var u7=Object.create;var tb=Object.defineProperty,d7=Object.defineProperties,h7=Object.getOwnPropertyDescriptor,p7=Object.getOwnPropertyDescriptors,f7=Object.getOwnPropertyNames,eb=Object.getOwnPropertySymbols,m7=Object.getPrototypeOf,RE=Object.prototype.hasOwnProperty,wk=Object.prototype.propertyIsEnumerable;var bk=(e,n,t)=>n in e?tb(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,q=(e,n)=>{for(var t in n||={})RE.call(n,t)&&bk(e,t,n[t]);if(eb)for(var t of eb(n))wk.call(n,t)&&bk(e,t,n[t]);return e},Ie=(e,n)=>d7(e,p7(n));var sc=(e,n)=>{var t={};for(var i in e)RE.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&eb)for(var i of eb(e))n.indexOf(i)<0&&wk.call(e,i)&&(t[i]=e[i]);return t};var _e=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),xk=(e,n)=>{for(var t in n)tb(e,t,{get:n[t],enumerable:!0})},g7=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of f7(n))!RE.call(e,r)&&r!==t&&tb(e,r,{get:()=>n[r],enumerable:!(i=h7(n,r))||i.enumerable});return e};var gy=(e,n,t)=>(t=e!=null?u7(m7(e)):{},g7(n||!e||!e.__esModule?tb(t,"default",{value:e,enumerable:!0}):t,e));var ne=(e,n,t)=>new Promise((i,r)=>{var o=v=>{try{g(t.next(v))}catch(x){r(x)}},d=v=>{try{g(t.throw(v))}catch(x){r(x)}},g=v=>v.done?i(v.value):Promise.resolve(v.value).then(o,d);g((t=t.apply(e,n)).next())});var jA=_e((zA,VA)=>{"use strict";(function(e,n){typeof zA=="object"&&typeof VA<"u"?VA.exports=n():typeof define=="function"&&define.amd?define(n):(e=typeof globalThis<"u"?globalThis:e||self,e.maplibregl=n())})(zA,function(){"use strict";var e={},n={};function t(r,o,d){if(n[r]=d,r==="index"){var g="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",v={};return n.shared(v),n.index(e,v),typeof window<"u"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([g],{type:"text/javascript"}))),e}}t("shared",["exports"],function(r){"use strict";function o(l,a,c,h){return new(c||(c=Promise))(function(m,b){function w(A){try{E(h.next(A))}catch(M){b(M)}}function S(A){try{E(h.throw(A))}catch(M){b(M)}}function E(A){var M;A.done?m(A.value):(M=A.value,M instanceof c?M:new c(function(O){O(M)})).then(w,S)}E((h=h.apply(l,a||[])).next())})}function d(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}typeof SuppressedError=="function"&&SuppressedError;var g=v;function v(l,a){this.x=l,this.y=a}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,a){return this.clone()._rotateAround(l,a)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var a=l.x-this.x,c=l.y-this.y;return a*a+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,a){return Math.atan2(this.x*a-this.y*l,this.x*l+this.y*a)},_matMult:function(l){var a=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=a,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var a=Math.cos(l),c=Math.sin(l),h=c*this.x+a*this.y;return this.x=a*this.x-c*this.y,this.y=h,this},_rotateAround:function(l,a){var c=Math.cos(l),h=Math.sin(l),m=a.y+h*(this.x-a.x)+c*(this.y-a.y);return this.x=a.x+c*(this.x-a.x)-h*(this.y-a.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(l){return l instanceof v?l:Array.isArray(l)?new v(l[0],l[1]):l};var x=d(g),D=R;function R(l,a,c,h){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(h-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=a,this.p2x=c,this.p2y=h}R.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,a){if(a===void 0&&(a=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,h=0;h<8;h++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<a)return c;var b=this.sampleCurveDerivativeX(c);if(Math.abs(b)<1e-6)break;c-=m/b}var w=0,S=1;for(c=l,h=0;h<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<a));h++)l>m?w=c:S=c,c=.5*(S-w)+w;return c},solve:function(l,a){return this.sampleCurveY(this.solveCurveX(l,a))}};var L=d(D);let j,J;function re(){return j==null&&(j=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),j}function be(){if(J==null&&(J=!1,re())){let a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let h=0;h<5*5;h++){let m=4*h;a.fillStyle=`rgb(${m},${m+1},${m+2})`,a.fillRect(h%5,Math.floor(h/5),1,1)}let c=a.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&c[h]!==h){J=!0;break}}}return J||!1}function xe(l,a,c,h){let m=new L(l,a,c,h);return b=>m.solve(b)}let Pe=xe(.25,.1,.25,1);function Ne(l,a,c){return Math.min(c,Math.max(a,l))}function Ve(l,a,c){let h=c-a,m=((l-a)%h+h)%h+a;return m===a?c:m}function We(l,...a){for(let c of a)for(let h in c)l[h]=c[h];return l}let rt=1;function gt(l,a,c){let h={};for(let m in l)h[m]=a.call(this,l[m],m,l);return h}function Gt(l,a,c){let h={};for(let m in l)a.call(this,l[m],m,l)&&(h[m]=l[m]);return h}function st(l){return Array.isArray(l)?l.map(st):typeof l=="object"&&l?gt(l,st):l}let Gn={};function Et(l){Gn[l]||(typeof console<"u"&&console.warn(l),Gn[l]=!0)}function en(l,a,c){return(c.y-l.y)*(a.x-l.x)>(a.y-l.y)*(c.x-l.x)}function Qt(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let Ei=null;function qi(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}let Ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function mr(l,a,c,h,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let b=new VideoFrame(l,{timestamp:0});try{let w=b?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);let S=w.startsWith("BGR"),E=new Uint8ClampedArray(h*m*4);if(yield b.copyTo(E,function(A,M,O,F,z){let H=4*Math.max(-M,0),$=(Math.max(0,O)-O)*F*4+H,Q=4*F,oe=Math.max(0,M),we=Math.max(0,O);return{rect:{x:oe,y:we,width:Math.min(A.width,M+F)-oe,height:Math.min(A.height,O+z)-we},layout:[{offset:$,stride:Q}]}}(l,a,c,h,m)),S)for(let A=0;A<E.length;A+=4){let M=E[A];E[A]=E[A+2],E[A+2]=M}return E}finally{b.close()}})}let tr,Jn,gr="AbortError";function Bi(){return new Error(gr)}let ko={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function io(l){return ko.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}let un="global-dispatcher";class Xn extends Error{constructor(a,c,h,m){super(`AJAXError: ${c} (${a}): ${h}`),this.status=a,this.statusText=c,this.url=h,this.body=m}}let bo=()=>Qt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wa=function(l,a){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){let h=io(l.url);if(h)return h(l,a);if(Qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:un},a)}if(!(/^file:/.test(c=l.url)||/^file:/.test(bo())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,m){return o(this,void 0,void 0,function*(){let b=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:bo(),signal:m.signal});h.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");let w=yield fetch(b);if(!w.ok){let A=yield w.blob();throw new Xn(w.status,w.statusText,h.url,A)}let S;S=h.type==="arrayBuffer"||h.type==="image"?w.arrayBuffer():h.type==="json"?w.json():w.text();let E=yield S;if(m.signal.aborted)throw Bi();return{data:E,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(l,a);if(Qt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:un},a)}var c;return function(h,m){return new Promise((b,w)=>{var S;let E=new XMLHttpRequest;E.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(E.responseType="arraybuffer");for(let A in h.headers)E.setRequestHeader(A,h.headers[A]);h.type==="json"&&(E.responseType="text",!((S=h.headers)===null||S===void 0)&&S.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=h.credentials==="include",E.onerror=()=>{w(new Error(E.statusText))},E.onload=()=>{if(!m.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let A=E.response;if(h.type==="json")try{A=JSON.parse(E.response)}catch(M){return void w(M)}b({data:A,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{let A=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});w(new Xn(E.status,E.statusText,h.url,A))}},m.signal.addEventListener("abort",()=>{E.abort(),w(Bi())}),E.send(h.body)})}(l,a)};function Bs(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;let a=new URL(l),c=window.location;return a.protocol===c.protocol&&a.host===c.host}function Wa(l,a,c){c[l]&&c[l].indexOf(a)!==-1||(c[l]=c[l]||[],c[l].push(a))}function xa(l,a,c){if(c&&c[l]){let h=c[l].indexOf(a);h!==-1&&c[l].splice(h,1)}}class Za{constructor(a,c={}){We(this,c),this.type=a}}class Ka extends Za{constructor(a,c={}){super("error",We({error:a},c))}}class kc{on(a,c){return this._listeners=this._listeners||{},Wa(a,c,this._listeners),this}off(a,c){return xa(a,c,this._listeners),xa(a,c,this._oneTimeListeners),this}once(a,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Wa(a,c,this._oneTimeListeners),this):new Promise(h=>this.once(a,h))}fire(a,c){typeof a=="string"&&(a=new Za(a,c||{}));let h=a.type;if(this.listens(h)){a.target=this;let m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let S of m)S.call(this,a);let b=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let S of b)xa(h,S,this._oneTimeListeners),S.call(this,a);let w=this._eventedParent;w&&(We(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(a))}else a instanceof Ka&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,c){return this._eventedParent=a,this._eventedParentData=c,this}}var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let jl=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function pd(l,a){let c={};for(let h in l)h!=="ref"&&(c[h]=l[h]);return jl.forEach(h=>{h in a&&(c[h]=a[h])}),c}function Rn(l,a){if(Array.isArray(l)){if(!Array.isArray(a)||l.length!==a.length)return!1;for(let c=0;c<l.length;c++)if(!Rn(l[c],a[c]))return!1;return!0}if(typeof l=="object"&&l!==null&&a!==null){if(typeof a!="object"||Object.keys(l).length!==Object.keys(a).length)return!1;for(let c in l)if(!Rn(l[c],a[c]))return!1;return!0}return l===a}function Ti(l,a){l.push(a)}function fd(l,a,c){Ti(c,{command:"addSource",args:[l,a[l]]})}function Ya(l,a,c){Ti(a,{command:"removeSource",args:[l]}),c[l]=!0}function Sa(l,a,c,h){Ya(l,c,h),fd(l,a,c)}function Nc(l,a,c){let h;for(h in l[c])if(Object.prototype.hasOwnProperty.call(l[c],h)&&h!=="data"&&!Rn(l[c][h],a[c][h]))return!1;for(h in a[c])if(Object.prototype.hasOwnProperty.call(a[c],h)&&h!=="data"&&!Rn(l[c][h],a[c][h]))return!1;return!0}function No(l,a,c,h,m,b){l=l||{},a=a||{};for(let w in l)Object.prototype.hasOwnProperty.call(l,w)&&(Rn(l[w],a[w])||c.push({command:b,args:[h,w,a[w],m]}));for(let w in a)Object.prototype.hasOwnProperty.call(a,w)&&!Object.prototype.hasOwnProperty.call(l,w)&&(Rn(l[w],a[w])||c.push({command:b,args:[h,w,a[w],m]}))}function md(l){return l.id}function gd(l,a){return l[a.id]=a,l}class je{constructor(a,c,h,m){this.message=(a?`${a}: `:"")+h,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function Us(l,...a){for(let c of a)for(let h in c)l[h]=c[h];return l}class Hr extends Error{constructor(a,c){super(c),this.message=c,this.key=a}}class zs{constructor(a,c=[]){this.parent=a,this.bindings={};for(let[h,m]of c)this.bindings[h]=m}concat(a){return new zs(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}let Ja={kind:"null"},Ze={kind:"number"},sn={kind:"string"},Lt={kind:"boolean"},ro={kind:"color"},ns={kind:"object"},Wt={kind:"value"},Vs={kind:"collator"},Ca={kind:"formatted"},Xa={kind:"padding"},js={kind:"resolvedImage"},ie={kind:"variableAnchorOffsetCollection"};function U(l,a){return{kind:"array",itemType:l,N:a}}function B(l){if(l.kind==="array"){let a=B(l.itemType);return typeof l.N=="number"?`array<${a}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${a}>`}return l.kind}let W=[Ja,Ze,sn,Lt,ro,Ca,ns,U(Wt),Xa,js,ie];function ee(l,a){if(a.kind==="error")return null;if(l.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!ee(l.itemType,a.itemType))&&(typeof l.N!="number"||l.N===a.N))return null}else{if(l.kind===a.kind)return null;if(l.kind==="value"){for(let c of W)if(!ee(c,a))return null}}return`Expected ${B(l)} but found ${B(a)} instead.`}function de(l,a){return a.some(c=>c.kind===l.kind)}function fe(l,a){return a.some(c=>c==="null"?l===null:c==="array"?Array.isArray(l):c==="object"?l&&!Array.isArray(l)&&typeof l=="object":c===typeof l)}function ve(l,a){return l.kind==="array"&&a.kind==="array"?l.itemType.kind===a.itemType.kind&&typeof l.N=="number":l.kind===a.kind}let le=.96422,Ae=.82521,Fe=4/29,Ee=6/29,$e=3*Ee*Ee,wt=Ee*Ee*Ee,St=Math.PI/180,Cn=180/Math.PI;function Yt(l){return(l%=360)<0&&(l+=360),l}function En([l,a,c,h]){let m,b,w=Wi((.2225045*(l=fn(l))+.7168786*(a=fn(a))+.0606169*(c=fn(c)))/1);l===a&&a===c?m=b=w:(m=Wi((.4360747*l+.3850649*a+.1430804*c)/le),b=Wi((.0139322*l+.0971045*a+.7141733*c)/Ae));let S=116*w-16;return[S<0?0:S,500*(m-w),200*(w-b),h]}function fn(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Wi(l){return l>wt?Math.pow(l,1/3):l/$e+Fe}function Ai([l,a,c,h]){let m=(l+16)/116,b=isNaN(a)?m:m+a/500,w=isNaN(c)?m:m-c/200;return m=1*zn(m),b=le*zn(b),w=Ae*zn(w),[ln(3.1338561*b-1.6168667*m-.4906146*w),ln(-.9787684*b+1.9161415*m+.033454*w),ln(.0719453*b-.2289914*m+1.4052427*w),h]}function ln(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function zn(l){return l>Ee?l*l*l:$e*(l-Fe)}function vi(l){return parseInt(l.padEnd(2,l),16)/255}function or(l,a){return yr(a?l/100:l,0,1)}function yr(l,a,c){return Math.min(Math.max(a,l),c)}function $r(l){return!l.some(Number.isNaN)}let Fc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Vn{constructor(a,c,h,m=1,b=!0){this.r=a,this.g=c,this.b=h,this.a=m,b||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[a,c,h,m]))}static parse(a){if(a instanceof Vn)return a;if(typeof a!="string")return;let c=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let m=Fc[h];if(m){let[w,S,E]=m;return[w/255,S/255,E/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let w=h.length<6?1:2,S=1;return[vi(h.slice(S,S+=w)),vi(h.slice(S,S+=w)),vi(h.slice(S,S+=w)),vi(h.slice(S,S+w)||"ff")]}if(h.startsWith("rgb")){let w=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){let[S,E,A,M,O,F,z,H,$,Q,oe,we]=w,ue=[M||" ",z||" ",Q].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){let ye=[A,F,$].join(""),Te=ye==="%%%"?100:ye===""?255:0;if(Te){let Le=[yr(+E/Te,0,1),yr(+O/Te,0,1),yr(+H/Te,0,1),oe?or(+oe,we):1];if($r(Le))return Le}}return}}let b=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){let[w,S,E,A,M,O,F,z,H]=b,$=[E||" ",M||" ",F].join("");if($==="  "||$==="  /"||$===",,"||$===",,,"){let Q=[+S,yr(+A,0,100),yr(+O,0,100),z?or(+z,H):1];if($r(Q))return function([oe,we,ue,ye]){function Te(Le){let nt=(Le+oe/30)%12,It=we*Math.min(ue,1-ue);return ue-It*Math.max(-1,Math.min(nt-3,9-nt,1))}return oe=Yt(oe),we/=100,ue/=100,[Te(0),Te(8),Te(4),ye]}(Q)}}}(a);return c?new Vn(...c,!1):void 0}get rgb(){let{r:a,g:c,b:h,a:m}=this,b=m||1/0;return this.overwriteGetter("rgb",[a/b,c/b,h/b,m])}get hcl(){return this.overwriteGetter("hcl",function(a){let[c,h,m,b]=En(a),w=Math.sqrt(h*h+m*m);return[Math.round(1e4*w)?Yt(Math.atan2(m,h)*Cn):NaN,w,c,b]}(this.rgb))}get lab(){return this.overwriteGetter("lab",En(this.rgb))}overwriteGetter(a,c){return Object.defineProperty(this,a,{value:c}),c}toString(){let[a,c,h,m]=this.rgb;return`rgba(${[a,c,h].map(b=>Math.round(255*b)).join(",")},${m})`}}Vn.black=new Vn(0,0,0,1),Vn.white=new Vn(1,1,1,1),Vn.transparent=new Vn(0,0,0,0),Vn.red=new Vn(1,0,0,1);class lg{constructor(a,c,h){this.sensitivity=a?c?"variant":"case":c?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,c){return this.collator.compare(a,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class cg{constructor(a,c,h,m,b){this.text=a,this.image=c,this.scale=h,this.fontStack=m,this.textColor=b}}class wo{constructor(a){this.sections=a}static fromString(a){return new wo([new cg(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof wo?a:wo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class xo{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof xo)return a;if(typeof a=="number")return new xo([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(let c of a)if(typeof c!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new xo(a)}}toString(){return JSON.stringify(this.values)}}let yC=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Fo{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Fo)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let c=0;c<a.length;c+=2){let h=a[c],m=a[c+1];if(typeof h!="string"||!yC.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Fo(a)}}toString(){return JSON.stringify(this.values)}}class So{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new So({name:a,available:!1}):null}}function Lc(l,a,c,h){return typeof l=="number"&&l>=0&&l<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof c=="number"&&c>=0&&c<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[l,a,c,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[l,a,c,h]:[l,a,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Hl(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Vn||l instanceof lg||l instanceof wo||l instanceof xo||l instanceof Fo||l instanceof So)return!0;if(Array.isArray(l)){for(let a of l)if(!Hl(a))return!1;return!0}if(typeof l=="object"){for(let a in l)if(!Hl(l[a]))return!1;return!0}return!1}function Zi(l){if(l===null)return Ja;if(typeof l=="string")return sn;if(typeof l=="boolean")return Lt;if(typeof l=="number")return Ze;if(l instanceof Vn)return ro;if(l instanceof lg)return Vs;if(l instanceof wo)return Ca;if(l instanceof xo)return Xa;if(l instanceof Fo)return ie;if(l instanceof So)return js;if(Array.isArray(l)){let a=l.length,c;for(let h of l){let m=Zi(h);if(c){if(c===m)continue;c=Wt;break}c=m}return U(c||Wt,a)}return ns}function yd(l){let a=typeof l;return l===null?"":a==="string"||a==="number"||a==="boolean"?String(l):l instanceof Vn||l instanceof wo||l instanceof xo||l instanceof Fo||l instanceof So?l.toString():JSON.stringify(l)}class is{constructor(a,c){this.type=a,this.value=c}static parse(a,c){if(a.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!Hl(a[1]))return c.error("invalid value");let h=a[1],m=Zi(h),b=c.expectedType;return m.kind!=="array"||m.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(m=b),new is(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ui{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}let rp={string:sn,number:Ze,boolean:Lt,object:ns};class rs{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");let h,m=1,b=a[0];if(b==="array"){let S,E;if(a.length>2){let A=a[1];if(typeof A!="string"||!(A in rp)||A==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);S=rp[A],m++}else S=Wt;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return c.error('The length argument to "array" must be a positive integer literal',2);E=a[2],m++}h=U(S,E)}else{if(!rp[b])throw new Error(`Types doesn't contain name = ${b}`);h=rp[b]}let w=[];for(;m<a.length;m++){let S=c.parse(a[m],m,Wt);if(!S)return null;w.push(S)}return new rs(h,w)}evaluate(a){for(let c=0;c<this.args.length;c++){let h=this.args[c].evaluate(a);if(!ee(this.type,Zi(h)))return h;if(c===this.args.length-1)throw new Ui(`Expected value to be of type ${B(this.type)}, but found ${B(Zi(h))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}let ug={"to-boolean":Lt,"to-color":ro,"to-number":Ze,"to-string":sn};class os{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");let h=a[0];if(!ug[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&a.length!==2)return c.error("Expected one argument.");let m=ug[h],b=[];for(let w=1;w<a.length;w++){let S=c.parse(a[w],w,Wt);if(!S)return null;b.push(S)}return new os(m,b)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let c,h;for(let m of this.args){if(c=m.evaluate(a),h=null,c instanceof Vn)return c;if(typeof c=="string"){let b=a.parseColor(c);if(b)return b}else if(Array.isArray(c)&&(h=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Lc(c[0],c[1],c[2],c[3]),!h))return new Vn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Ui(h||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let h of this.args){c=h.evaluate(a);let m=xo.parse(c);if(m)return m}throw new Ui(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let h of this.args){c=h.evaluate(a);let m=Fo.parse(c);if(m)return m}throw new Ui(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let h of this.args){if(c=h.evaluate(a),c===null)return 0;let m=Number(c);if(!isNaN(m))return m}throw new Ui(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return wo.fromString(yd(this.args[0].evaluate(a)));case"resolvedImage":return So.fromString(yd(this.args[0].evaluate(a)));default:return yd(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}let _C=["Unknown","Point","LineString","Polygon"];class op{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?_C[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let c=this._parseColorCache[a];return c||(c=this._parseColorCache[a]=Vn.parse(a)),c}}class $l{constructor(a,c,h=[],m,b=new zs,w=[]){this.registry=a,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=b,this.errors=w,this.expectedType=m,this._isConstant=c}parse(a,c,h,m,b={}){return c?this.concat(c,h,m)._parse(a,b):this._parse(a,b)}_parse(a,c){function h(m,b,w){return w==="assert"?new rs(b,[m]):w==="coerce"?new os(b,[m]):m}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let m=a[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let b=this.registry[m];if(b){let w=b.parse(a,this);if(!w)return null;if(this.expectedType){let S=this.expectedType,E=w.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(S.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(S,E))return null}else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"coerce");else w=h(w,S,c.typeAnnotation||"assert")}if(!(w instanceof is)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){let S=new op;try{w=new is(w.type,w.evaluate(S))}catch(E){return this.error(E.message),null}}return w}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,c,h){let m=typeof a=="number"?this.path.concat(a):this.path,b=h?this.scope.concat(h):this.scope;return new $l(this.registry,this._isConstant,m,c||null,b,this.errors)}error(a,...c){let h=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new Hr(h,a))}checkSubtype(a,c){let h=ee(a,c);return h&&this.error(h),h}}class Qa{constructor(a,c){this.type=c.type,this.bindings=[].concat(a),this.result=c}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(let c of this.bindings)a(c[1]);a(this.result)}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);let h=[];for(let b=1;b<a.length-1;b+=2){let w=a[b];if(typeof w!="string")return c.error(`Expected string, but found ${typeof w} instead.`,b);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",b);let S=c.parse(a[b+1],b+1);if(!S)return null;h.push([w,S])}let m=c.parse(a[a.length-1],a.length-1,c.expectedType,h);return m?new Qa(h,m):null}outputDefined(){return this.result.outputDefined()}}class On{constructor(a,c){this.type=c.type,this.name=a,this.boundExpression=c}static parse(a,c){if(a.length!==2||typeof a[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let h=a[1];return c.scope.has(h)?new On(h,c.scope.get(h)):c.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class dg{constructor(a,c,h){this.type=a,this.index=c,this.input=h}static parse(a,c){if(a.length!==3)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);let h=c.parse(a[1],1,Ze),m=c.parse(a[2],2,U(c.expectedType||Wt));return h&&m?new dg(m.type.itemType,h,m):null}evaluate(a){let c=this.index.evaluate(a),h=this.input.evaluate(a);if(c<0)throw new Ui(`Array index out of bounds: ${c} < 0.`);if(c>=h.length)throw new Ui(`Array index out of bounds: ${c} > ${h.length-1}.`);if(c!==Math.floor(c))throw new Ui(`Array index must be an integer, but found ${c} instead.`);return h[c]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class hg{constructor(a,c){this.type=Lt,this.needle=a,this.haystack=c}static parse(a,c){if(a.length!==3)return c.error(`Expected 2 arguments, but found ${a.length-1} instead.`);let h=c.parse(a[1],1,Wt),m=c.parse(a[2],2,Wt);return h&&m?de(h.type,[Lt,sn,Ze,Ja,Wt])?new hg(h,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${B(h.type)} instead`):null}evaluate(a){let c=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!h)return!1;if(!fe(c,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${B(Zi(c))} instead.`);if(!fe(h,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${B(Zi(h))} instead.`);return h.indexOf(c)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class Bc{constructor(a,c,h){this.type=Ze,this.needle=a,this.haystack=c,this.fromIndex=h}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);let h=c.parse(a[1],1,Wt),m=c.parse(a[2],2,Wt);if(!h||!m)return null;if(!de(h.type,[Lt,sn,Ze,Ja,Wt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${B(h.type)} instead`);if(a.length===4){let b=c.parse(a[3],3,Ze);return b?new Bc(h,m,b):null}return new Bc(h,m)}evaluate(a){let c=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!fe(c,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${B(Zi(c))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(a)),fe(h,["string"])){let b=h.indexOf(c,m);return b===-1?-1:[...h.slice(0,b)].length}if(fe(h,["array"]))return h.indexOf(c,m);throw new Ui(`Expected second argument to be of type array or string, but found ${B(Zi(h))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class pg{constructor(a,c,h,m,b,w){this.inputType=a,this.type=c,this.input=h,this.cases=m,this.outputs=b,this.otherwise=w}static parse(a,c){if(a.length<5)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return c.error("Expected an even number of arguments.");let h,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);let b={},w=[];for(let A=2;A<a.length-1;A+=2){let M=a[A],O=a[A+1];Array.isArray(M)||(M=[M]);let F=c.concat(A);if(M.length===0)return F.error("Expected at least one branch label.");for(let H of M){if(typeof H!="number"&&typeof H!="string")return F.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,Zi(H)))return null}else h=Zi(H);if(b[String(H)]!==void 0)return F.error("Branch labels must be unique.");b[String(H)]=w.length}let z=c.parse(O,A,m);if(!z)return null;m=m||z.type,w.push(z)}let S=c.parse(a[1],1,Wt);if(!S)return null;let E=c.parse(a[a.length-1],a.length-1,m);return E?S.type.kind!=="value"&&c.concat(1).checkSubtype(h,S.type)?null:new pg(h,m,S,b,w,E):null}evaluate(a){let c=this.input.evaluate(a);return(Zi(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class sp{constructor(a,c,h){this.type=a,this.branches=c,this.otherwise=h}static parse(a,c){if(a.length<4)return c.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return c.error("Expected an odd number of arguments.");let h;c.expectedType&&c.expectedType.kind!=="value"&&(h=c.expectedType);let m=[];for(let w=1;w<a.length-1;w+=2){let S=c.parse(a[w],w,Lt);if(!S)return null;let E=c.parse(a[w+1],w+1,h);if(!E)return null;m.push([S,E]),h=h||E.type}let b=c.parse(a[a.length-1],a.length-1,h);if(!b)return null;if(!h)throw new Error("Can't infer output type");return new sp(h,m,b)}evaluate(a){for(let[c,h]of this.branches)if(c.evaluate(a))return h.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(let[c,h]of this.branches)a(c),a(h);a(this.otherwise)}outputDefined(){return this.branches.every(([a,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class _d{constructor(a,c,h,m){this.type=a,this.input=c,this.beginIndex=h,this.endIndex=m}static parse(a,c){if(a.length<=2||a.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);let h=c.parse(a[1],1,Wt),m=c.parse(a[2],2,Ze);if(!h||!m)return null;if(!de(h.type,[U(Wt),sn,Wt]))return c.error(`Expected first argument to be of type array or string, but found ${B(h.type)} instead`);if(a.length===4){let b=c.parse(a[3],3,Ze);return b?new _d(h.type,h,m,b):null}return new _d(h.type,h,m)}evaluate(a){let c=this.input.evaluate(a),h=this.beginIndex.evaluate(a),m;if(this.endIndex&&(m=this.endIndex.evaluate(a)),fe(c,["string"]))return[...c].slice(h,m).join("");if(fe(c,["array"]))return c.slice(h,m);throw new Ui(`Expected first argument to be of type array or string, but found ${B(Zi(c))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function ap(l,a){let c=l.length-1,h,m,b=0,w=c,S=0;for(;b<=w;)if(S=Math.floor((b+w)/2),h=l[S],m=l[S+1],h<=a){if(S===c||a<m)return S;b=S+1}else{if(!(h>a))throw new Ui("Input is not a number.");w=S-1}return 0}class Uc{constructor(a,c,h){this.type=a,this.input=c,this.labels=[],this.outputs=[];for(let[m,b]of h)this.labels.push(m),this.outputs.push(b)}static parse(a,c){if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");let h=c.parse(a[1],1,Ze);if(!h)return null;let m=[],b=null;c.expectedType&&c.expectedType.kind!=="value"&&(b=c.expectedType);for(let w=1;w<a.length;w+=2){let S=w===1?-1/0:a[w],E=a[w+1],A=w,M=w+1;if(typeof S!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(m.length&&m[m.length-1][0]>=S)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);let O=c.parse(E,M,b);if(!O)return null;b=b||O.type,m.push([S,O])}return new Uc(b,h,m)}evaluate(a){let c=this.labels,h=this.outputs;if(c.length===1)return h[0].evaluate(a);let m=this.input.evaluate(a);if(m<=c[0])return h[0].evaluate(a);let b=c.length;return m>=c[b-1]?h[b-1].evaluate(a):h[ap(c,m)].evaluate(a)}eachChild(a){a(this.input);for(let c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Xv(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var vC=Qv;function Qv(l,a,c,h){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(h-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=a,this.p2x=c,this.p2y=h}Qv.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,a){if(a===void 0&&(a=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,h=0;h<8;h++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<a)return c;var b=this.sampleCurveDerivativeX(c);if(Math.abs(b)<1e-6)break;c-=m/b}var w=0,S=1;for(c=l,h=0;h<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<a));h++)l>m?w=c:S=c,c=.5*(S-w)+w;return c},solve:function(l,a){return this.sampleCurveY(this.solveCurveX(l,a))}};var bC=Xv(vC);function Gl(l,a,c){return l+c*(a-l)}function vd(l,a,c){return l.map((h,m)=>Gl(h,a[m],c))}let oo={number:Gl,color:function(l,a,c,h="rgb"){switch(h){case"rgb":{let[m,b,w,S]=vd(l.rgb,a.rgb,c);return new Vn(m,b,w,S,!1)}case"hcl":{let[m,b,w,S]=l.hcl,[E,A,M,O]=a.hcl,F,z;if(isNaN(m)||isNaN(E))isNaN(m)?isNaN(E)?F=NaN:(F=E,w!==1&&w!==0||(z=A)):(F=m,M!==1&&M!==0||(z=b));else{let we=E-m;E>m&&we>180?we-=360:E<m&&m-E>180&&(we+=360),F=m+c*we}let[H,$,Q,oe]=function([we,ue,ye,Te]){return we=isNaN(we)?0:we*St,Ai([ye,Math.cos(we)*ue,Math.sin(we)*ue,Te])}([F,z??Gl(b,A,c),Gl(w,M,c),Gl(S,O,c)]);return new Vn(H,$,Q,oe,!1)}case"lab":{let[m,b,w,S]=Ai(vd(l.lab,a.lab,c));return new Vn(m,b,w,S,!1)}}},array:vd,padding:function(l,a,c){return new xo(vd(l.values,a.values,c))},variableAnchorOffsetCollection:function(l,a,c){let h=l.values,m=a.values;if(h.length!==m.length)throw new Ui(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${a.toString()}`);let b=[];for(let w=0;w<h.length;w+=2){if(h[w]!==m[w])throw new Ui(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${h[w]}, to[${w}]: ${m[w]}`);b.push(h[w]);let[S,E]=h[w+1],[A,M]=m[w+1];b.push([Gl(S,A,c),Gl(E,M,c)])}return new Fo(b)}};class so{constructor(a,c,h,m,b){this.type=a,this.operator=c,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(let[w,S]of b)this.labels.push(w),this.outputs.push(S)}static interpolationFactor(a,c,h,m){let b=0;if(a.name==="exponential")b=lp(c,a.base,h,m);else if(a.name==="linear")b=lp(c,1,h,m);else if(a.name==="cubic-bezier"){let w=a.controlPoints;b=new bC(w[0],w[1],w[2],w[3]).solve(lp(c,1,h,m))}return b}static parse(a,c){let[h,m,b,...w]=a;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){let A=m[1];if(typeof A!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:A}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{let A=m.slice(1);if(A.length!==4||A.some(M=>typeof M!="number"||M<0||M>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:A}}}if(a.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(b=c.parse(b,2,Ze),!b)return null;let S=[],E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=ro:c.expectedType&&c.expectedType.kind!=="value"&&(E=c.expectedType);for(let A=0;A<w.length;A+=2){let M=w[A],O=w[A+1],F=A+3,z=A+4;if(typeof M!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(S.length&&S[S.length-1][0]>=M)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);let H=c.parse(O,z,E);if(!H)return null;E=E||H.type,S.push([M,H])}return ve(E,Ze)||ve(E,ro)||ve(E,Xa)||ve(E,ie)||ve(E,U(Ze))?new so(E,h,m,b,S):c.error(`Type ${B(E)} is not interpolatable.`)}evaluate(a){let c=this.labels,h=this.outputs;if(c.length===1)return h[0].evaluate(a);let m=this.input.evaluate(a);if(m<=c[0])return h[0].evaluate(a);let b=c.length;if(m>=c[b-1])return h[b-1].evaluate(a);let w=ap(c,m),S=so.interpolationFactor(this.interpolation,m,c[w],c[w+1]),E=h[w].evaluate(a),A=h[w+1].evaluate(a);switch(this.operator){case"interpolate":return oo[this.type.kind](E,A,S);case"interpolate-hcl":return oo.color(E,A,S,"hcl");case"interpolate-lab":return oo.color(E,A,S,"lab")}}eachChild(a){a(this.input);for(let c of this.outputs)a(c)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function lp(l,a,c,h){let m=h-c,b=l-c;return m===0?0:a===1?b/m:(Math.pow(a,b)-1)/(Math.pow(a,m)-1)}class cp{constructor(a,c){this.type=a,this.args=c}static parse(a,c){if(a.length<2)return c.error("Expectected at least one argument.");let h=null,m=c.expectedType;m&&m.kind!=="value"&&(h=m);let b=[];for(let S of a.slice(1)){let E=c.parse(S,1+b.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,b.push(E)}if(!h)throw new Error("No output type");let w=m&&b.some(S=>ee(m,S.type));return new cp(w?Wt:h,b)}evaluate(a){let c,h=null,m=0;for(let b of this.args)if(m++,h=b.evaluate(a),h&&h instanceof So&&!h.available&&(c||(c=h.name),h=null,m===this.args.length&&(h=c)),h!==null)break;return h}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}function up(l,a){return l==="=="||l==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function e0(l,a,c,h){return h.compare(a,c)===0}function zc(l,a,c){let h=l!=="=="&&l!=="!=";return class XU{constructor(b,w,S){this.type=Lt,this.lhs=b,this.rhs=w,this.collator=S,this.hasUntypedArgument=b.type.kind==="value"||w.type.kind==="value"}static parse(b,w){if(b.length!==3&&b.length!==4)return w.error("Expected two or three arguments.");let S=b[0],E=w.parse(b[1],1,Wt);if(!E)return null;if(!up(S,E.type))return w.concat(1).error(`"${S}" comparisons are not supported for type '${B(E.type)}'.`);let A=w.parse(b[2],2,Wt);if(!A)return null;if(!up(S,A.type))return w.concat(2).error(`"${S}" comparisons are not supported for type '${B(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return w.error(`Cannot compare types '${B(E.type)}' and '${B(A.type)}'.`);h&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new rs(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new rs(E.type,[A])));let M=null;if(b.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(M=w.parse(b[3],3,Vs),!M)return null}return new XU(E,A,M)}evaluate(b){let w=this.lhs.evaluate(b),S=this.rhs.evaluate(b);if(h&&this.hasUntypedArgument){let E=Zi(w),A=Zi(S);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new Ui(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let E=Zi(w),A=Zi(S);if(E.kind!=="string"||A.kind!=="string")return a(b,w,S)}return this.collator?c(b,w,S,this.collator.evaluate(b)):a(b,w,S)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}let wC=zc("==",function(l,a,c){return a===c},e0),t0=zc("!=",function(l,a,c){return a!==c},function(l,a,c,h){return!e0(0,a,c,h)}),n0=zc("<",function(l,a,c){return a<c},function(l,a,c,h){return h.compare(a,c)<0}),xC=zc(">",function(l,a,c){return a>c},function(l,a,c,h){return h.compare(a,c)>0}),SC=zc("<=",function(l,a,c){return a<=c},function(l,a,c,h){return h.compare(a,c)<=0}),i0=zc(">=",function(l,a,c){return a>=c},function(l,a,c,h){return h.compare(a,c)>=0});class bd{constructor(a,c,h){this.type=Vs,this.locale=h,this.caseSensitive=a,this.diacriticSensitive=c}static parse(a,c){if(a.length!==2)return c.error("Expected one argument.");let h=a[1];if(typeof h!="object"||Array.isArray(h))return c.error("Collator options argument must be an object.");let m=c.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Lt);if(!m)return null;let b=c.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Lt);if(!b)return null;let w=null;return h.locale&&(w=c.parse(h.locale,1,sn),!w)?null:new bd(m,b,w)}evaluate(a){return new lg(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class fg{constructor(a,c,h,m,b){this.type=sn,this.number=a,this.locale=c,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(a,c){if(a.length!==3)return c.error("Expected two arguments.");let h=c.parse(a[1],1,Ze);if(!h)return null;let m=a[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let b=null;if(m.locale&&(b=c.parse(m.locale,1,sn),!b))return null;let w=null;if(m.currency&&(w=c.parse(m.currency,1,sn),!w))return null;let S=null;if(m["min-fraction-digits"]&&(S=c.parse(m["min-fraction-digits"],1,Ze),!S))return null;let E=null;return m["max-fraction-digits"]&&(E=c.parse(m["max-fraction-digits"],1,Ze),!E)?null:new fg(h,b,w,S,E)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class dp{constructor(a){this.type=Ca,this.sections=a}static parse(a,c){if(a.length<2)return c.error("Expected at least one argument.");let h=a[1];if(!Array.isArray(h)&&typeof h=="object")return c.error("First argument must be an image or text section.");let m=[],b=!1;for(let w=1;w<=a.length-1;++w){let S=a[w];if(b&&typeof S=="object"&&!Array.isArray(S)){b=!1;let E=null;if(S["font-scale"]&&(E=c.parse(S["font-scale"],1,Ze),!E))return null;let A=null;if(S["text-font"]&&(A=c.parse(S["text-font"],1,U(sn)),!A))return null;let M=null;if(S["text-color"]&&(M=c.parse(S["text-color"],1,ro),!M))return null;let O=m[m.length-1];O.scale=E,O.font=A,O.textColor=M}else{let E=c.parse(a[w],1,Wt);if(!E)return null;let A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,m.push({content:E,scale:null,font:null,textColor:null})}}return new dp(m)}evaluate(a){return new wo(this.sections.map(c=>{let h=c.content.evaluate(a);return Zi(h)===js?new cg("",h,null,null,null):new cg(yd(h),null,c.scale?c.scale.evaluate(a):null,c.font?c.font.evaluate(a).join(","):null,c.textColor?c.textColor.evaluate(a):null)}))}eachChild(a){for(let c of this.sections)a(c.content),c.scale&&a(c.scale),c.font&&a(c.font),c.textColor&&a(c.textColor)}outputDefined(){return!1}}class mg{constructor(a){this.type=js,this.input=a}static parse(a,c){if(a.length!==2)return c.error("Expected two arguments.");let h=c.parse(a[1],1,sn);return h?new mg(h):c.error("No image name provided.")}evaluate(a){let c=this.input.evaluate(a),h=So.fromString(c);return h&&a.availableImages&&(h.available=a.availableImages.indexOf(c)>-1),h}eachChild(a){a(this.input)}outputDefined(){return!1}}class gg{constructor(a){this.type=Ze,this.input=a}static parse(a,c){if(a.length!==2)return c.error(`Expected 1 argument, but found ${a.length-1} instead.`);let h=c.parse(a[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${B(h.type)} instead.`):new gg(h):null}evaluate(a){let c=this.input.evaluate(a);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new Ui(`Expected value to be of type string or array, but found ${B(Zi(c))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}let Hs=8192;function CC(l,a){let c=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,m=Math.pow(2,a.z);return[Math.round(c*m*Hs),Math.round(h*m*Hs)]}function yg(l,a){let c=Math.pow(2,a.z);return[(m=(l[0]/Hs+a.x)/c,360*m-180),(h=(l[1]/Hs+a.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,m}function ql(l,a){l[0]=Math.min(l[0],a[0]),l[1]=Math.min(l[1],a[1]),l[2]=Math.max(l[2],a[0]),l[3]=Math.max(l[3],a[1])}function el(l,a){return!(l[0]<=a[0]||l[2]>=a[2]||l[1]<=a[1]||l[3]>=a[3])}function Fn(l,a,c){let h=l[0]-a[0],m=l[1]-a[1],b=l[0]-c[0],w=l[1]-c[1];return h*w-b*m==0&&h*b<=0&&m*w<=0}function hp(l,a,c,h){return(m=[h[0]-c[0],h[1]-c[1]])[0]*(b=[a[0]-l[0],a[1]-l[1]])[1]-m[1]*b[0]!=0&&!(!o0(l,a,c,h)||!o0(c,h,l,a));var m,b}function EC(l,a,c){for(let h of c)for(let m=0;m<h.length-1;++m)if(hp(l,a,h[m],h[m+1]))return!0;return!1}function Vc(l,a,c=!1){let h=!1;for(let S of a)for(let E=0;E<S.length-1;E++){if(Fn(l,S[E],S[E+1]))return c;(b=S[E])[1]>(m=l)[1]!=(w=S[E+1])[1]>m[1]&&m[0]<(w[0]-b[0])*(m[1]-b[1])/(w[1]-b[1])+b[0]&&(h=!h)}var m,b,w;return h}function IC(l,a){for(let c of a)if(Vc(l,c))return!0;return!1}function r0(l,a){for(let c of l)if(!Vc(c,a))return!1;for(let c=0;c<l.length-1;++c)if(EC(l[c],l[c+1],a))return!1;return!0}function DC(l,a){for(let c of a)if(r0(l,c))return!0;return!1}function o0(l,a,c,h){let m=h[0]-c[0],b=h[1]-c[1],w=(l[0]-c[0])*b-m*(l[1]-c[1]),S=(a[0]-c[0])*b-m*(a[1]-c[1]);return w>0&&S<0||w<0&&S>0}function _g(l,a,c){let h=[];for(let m=0;m<l.length;m++){let b=[];for(let w=0;w<l[m].length;w++){let S=CC(l[m][w],c);ql(a,S),b.push(S)}h.push(b)}return h}function s0(l,a,c){let h=[];for(let m=0;m<l.length;m++){let b=_g(l[m],a,c);h.push(b)}return h}function a0(l,a,c,h){if(l[0]<c[0]||l[0]>c[2]){let m=.5*h,b=l[0]-c[0]>m?-h:c[0]-l[0]>m?h:0;b===0&&(b=l[0]-c[2]>m?-h:c[2]-l[0]>m?h:0),l[0]+=b}ql(a,l)}function l0(l,a,c,h){let m=Math.pow(2,h.z)*Hs,b=[h.x*Hs,h.y*Hs],w=[];for(let S of l)for(let E of S){let A=[E.x+b[0],E.y+b[1]];a0(A,a,c,m),w.push(A)}return w}function c0(l,a,c,h){let m=Math.pow(2,h.z)*Hs,b=[h.x*Hs,h.y*Hs],w=[];for(let E of l){let A=[];for(let M of E){let O=[M.x+b[0],M.y+b[1]];ql(a,O),A.push(O)}w.push(A)}if(a[2]-a[0]<=m/2){(S=a)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(let E of w)for(let A of E)a0(A,a,c,m)}var S;return w}class Wl{constructor(a,c){this.type=Lt,this.geojson=a,this.geometries=c}static parse(a,c){if(a.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Hl(a[1])){let h=a[1];if(h.type==="FeatureCollection"){let m=[];for(let b of h.features){let{type:w,coordinates:S}=b.geometry;w==="Polygon"&&m.push(S),w==="MultiPolygon"&&m.push(...S)}if(m.length)return new Wl(h,{type:"MultiPolygon",coordinates:m})}else if(h.type==="Feature"){let m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Wl(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Wl(h,h)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(c,h){let m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(h.type==="Polygon"){let S=_g(h.coordinates,b,w),E=l0(c.geometry(),m,b,w);if(!el(m,b))return!1;for(let A of E)if(!Vc(A,S))return!1}if(h.type==="MultiPolygon"){let S=s0(h.coordinates,b,w),E=l0(c.geometry(),m,b,w);if(!el(m,b))return!1;for(let A of E)if(!IC(A,S))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(c,h){let m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(h.type==="Polygon"){let S=_g(h.coordinates,b,w),E=c0(c.geometry(),m,b,w);if(!el(m,b))return!1;for(let A of E)if(!r0(A,S))return!1}if(h.type==="MultiPolygon"){let S=s0(h.coordinates,b,w),E=c0(c.geometry(),m,b,w);if(!el(m,b))return!1;for(let A of E)if(!DC(A,S))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let u0=class{constructor(l=[],a=(c,h)=>c<h?-1:c>h?1:0){if(this.data=l,this.length=this.data.length,this.compare=a,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:a,compare:c}=this,h=a[l];for(;l>0;){let m=l-1>>1,b=a[m];if(c(h,b)>=0)break;a[l]=b,l=m}a[l]=h}_down(l){let{data:a,compare:c}=this,h=this.length>>1,m=a[l];for(;l<h;){let b=1+(l<<1),w=b+1;if(w<this.length&&c(a[w],a[b])<0&&(b=w),c(a[b],m)>=0)break;a[l]=a[b],l=b}a[l]=m}};function TC(l,a,c,h,m){d0(l,a,c,h||l.length-1,m||AC)}function d0(l,a,c,h,m){for(;h>c;){if(h-c>600){var b=h-c+1,w=a-c+1,S=Math.log(b),E=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*E*(b-E)/b)*(w-b/2<0?-1:1);d0(l,a,Math.max(c,Math.floor(a-w*E/b+A)),Math.min(h,Math.floor(a+(b-w)*E/b+A)),m)}var M=l[a],O=c,F=h;for(wd(l,c,a),m(l[h],M)>0&&wd(l,c,h);O<F;){for(wd(l,O,F),O++,F--;m(l[O],M)<0;)O++;for(;m(l[F],M)>0;)F--}m(l[c],M)===0?wd(l,c,F):wd(l,++F,h),F<=a&&(c=F+1),a<=F&&(h=F-1)}}function wd(l,a,c){var h=l[a];l[a]=l[c],l[c]=h}function AC(l,a){return l<a?-1:l>a?1:0}function pp(l,a){if(l.length<=1)return[l];let c=[],h,m;for(let b of l){let w=PC(b);w!==0&&(b.area=Math.abs(w),m===void 0&&(m=w<0),m===w<0?(h&&c.push(h),h=[b]):h.push(b))}if(h&&c.push(h),a>1)for(let b=0;b<c.length;b++)c[b].length<=a||(TC(c[b],a,1,c[b].length-1,MC),c[b]=c[b].slice(0,a));return c}function MC(l,a){return a.area-l.area}function PC(l){let a=0;for(let c,h,m=0,b=l.length,w=b-1;m<b;w=m++)c=l[m],h=l[w],a+=(h.x-c.x)*(c.y+h.y);return a}let h0=1/298.257223563,p0=h0*(2-h0),f0=Math.PI/180;class vg{constructor(a){let c=6378.137*f0*1e3,h=Math.cos(a*f0),m=1/(1-p0*(1-h*h)),b=Math.sqrt(m);this.kx=c*b*h,this.ky=c*b*m*(1-p0)}distance(a,c){let h=this.wrap(a[0]-c[0])*this.kx,m=(a[1]-c[1])*this.ky;return Math.sqrt(h*h+m*m)}pointOnLine(a,c){let h,m,b,w,S=1/0;for(let E=0;E<a.length-1;E++){let A=a[E][0],M=a[E][1],O=this.wrap(a[E+1][0]-A)*this.kx,F=(a[E+1][1]-M)*this.ky,z=0;O===0&&F===0||(z=(this.wrap(c[0]-A)*this.kx*O+(c[1]-M)*this.ky*F)/(O*O+F*F),z>1?(A=a[E+1][0],M=a[E+1][1]):z>0&&(A+=O/this.kx*z,M+=F/this.ky*z)),O=this.wrap(c[0]-A)*this.kx,F=(c[1]-M)*this.ky;let H=O*O+F*F;H<S&&(S=H,h=A,m=M,b=E,w=z)}return{point:[h,m],index:b,t:Math.max(0,Math.min(1,w))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function m0(l,a){return a[0]-l[0]}function fp(l){return l[1]-l[0]+1}function Ea(l,a){return l[1]>=l[0]&&l[1]<a}function bg(l,a){if(l[0]>l[1])return[null,null];let c=fp(l);if(a){if(c===2)return[l,null];let m=Math.floor(c/2);return[[l[0],l[0]+m],[l[0]+m,l[1]]]}if(c===1)return[l,null];let h=Math.floor(c/2)-1;return[[l[0],l[0]+h],[l[0]+h+1,l[1]]]}function wg(l,a){if(!Ea(a,l.length))return[1/0,1/0,-1/0,-1/0];let c=[1/0,1/0,-1/0,-1/0];for(let h=a[0];h<=a[1];++h)ql(c,l[h]);return c}function xg(l){let a=[1/0,1/0,-1/0,-1/0];for(let c of l)for(let h of c)ql(a,h);return a}function mp(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Sg(l,a,c){if(!mp(l)||!mp(a))return NaN;let h=0,m=0;return l[2]<a[0]&&(h=a[0]-l[2]),l[0]>a[2]&&(h=l[0]-a[2]),l[1]>a[3]&&(m=l[1]-a[3]),l[3]<a[1]&&(m=a[1]-l[3]),c.distance([0,0],[h,m])}function Zl(l,a,c){let h=c.pointOnLine(a,l);return c.distance(l,h.point)}function Cg(l,a,c,h,m){let b=Math.min(Zl(l,[c,h],m),Zl(a,[c,h],m)),w=Math.min(Zl(c,[l,a],m),Zl(h,[l,a],m));return Math.min(b,w)}function RC(l,a,c,h,m){if(!Ea(a,l.length)||!Ea(h,c.length))return 1/0;let b=1/0;for(let w=a[0];w<a[1];++w){let S=l[w],E=l[w+1];for(let A=h[0];A<h[1];++A){let M=c[A],O=c[A+1];if(hp(S,E,M,O))return 0;b=Math.min(b,Cg(S,E,M,O,m))}}return b}function ki(l,a,c,h,m){if(!Ea(a,l.length)||!Ea(h,c.length))return NaN;let b=1/0;for(let w=a[0];w<=a[1];++w)for(let S=h[0];S<=h[1];++S)if(b=Math.min(b,m.distance(l[w],c[S])),b===0)return b;return b}function OC(l,a,c){if(Vc(l,a,!0))return 0;let h=1/0;for(let m of a){let b=m[0],w=m[m.length-1];if(b!==w&&(h=Math.min(h,Zl(l,[w,b],c)),h===0))return h;let S=c.pointOnLine(m,l);if(h=Math.min(h,c.distance(l,S.point)),h===0)return h}return h}function cn(l,a,c,h){if(!Ea(a,l.length))return NaN;for(let b=a[0];b<=a[1];++b)if(Vc(l[b],c,!0))return 0;let m=1/0;for(let b=a[0];b<a[1];++b){let w=l[b],S=l[b+1];for(let E of c)for(let A=0,M=E.length,O=M-1;A<M;O=A++){let F=E[O],z=E[A];if(hp(w,S,F,z))return 0;m=Math.min(m,Cg(w,S,F,z,h))}}return m}function gp(l,a){for(let c of l)for(let h of c)if(Vc(h,a,!0))return!0;return!1}function ai(l,a,c,h=1/0){let m=xg(l),b=xg(a);if(h!==1/0&&Sg(m,b,c)>=h)return h;if(el(m,b)){if(gp(l,a))return 0}else if(gp(a,l))return 0;let w=1/0;for(let S of l)for(let E=0,A=S.length,M=A-1;E<A;M=E++){let O=S[M],F=S[E];for(let z of a)for(let H=0,$=z.length,Q=$-1;H<$;Q=H++){let oe=z[Q],we=z[H];if(hp(O,F,oe,we))return 0;w=Math.min(w,Cg(O,F,oe,we,c))}}return w}function qn(l,a,c,h,m,b){if(!b)return;let w=Sg(wg(h,b),m,c);w<a&&l.push([w,b,[0,0]])}function Kl(l,a,c,h,m,b,w){if(!b||!w)return;let S=Sg(wg(h,b),wg(m,w),c);S<a&&l.push([S,b,w])}function xd(l,a,c,h,m=1/0){let b=Math.min(h.distance(l[0],c[0][0]),m);if(b===0)return b;let w=new u0([[0,[0,l.length-1],[0,0]]],m0),S=xg(c);for(;w.length>0;){let E=w.pop();if(E[0]>=b)continue;let A=E[1],M=a?50:100;if(fp(A)<=M){if(!Ea(A,l.length))return NaN;if(a){let O=cn(l,A,c,h);if(isNaN(O)||O===0)return O;b=Math.min(b,O)}else for(let O=A[0];O<=A[1];++O){let F=OC(l[O],c,h);if(b=Math.min(b,F),b===0)return 0}}else{let O=bg(A,a);qn(w,b,h,l,S,O[0]),qn(w,b,h,l,S,O[1])}}return b}function Sd(l,a,c,h,m,b=1/0){let w=Math.min(b,m.distance(l[0],c[0]));if(w===0)return w;let S=new u0([[0,[0,l.length-1],[0,c.length-1]]],m0);for(;S.length>0;){let E=S.pop();if(E[0]>=w)continue;let A=E[1],M=E[2],O=a?50:100,F=h?50:100;if(fp(A)<=O&&fp(M)<=F){if(!Ea(A,l.length)&&Ea(M,c.length))return NaN;let z;if(a&&h)z=RC(l,A,c,M,m),w=Math.min(w,z);else if(a&&!h){let H=l.slice(A[0],A[1]+1);for(let $=M[0];$<=M[1];++$)if(z=Zl(c[$],H,m),w=Math.min(w,z),w===0)return w}else if(!a&&h){let H=c.slice(M[0],M[1]+1);for(let $=A[0];$<=A[1];++$)if(z=Zl(l[$],H,m),w=Math.min(w,z),w===0)return w}else z=ki(l,A,c,M,m),w=Math.min(w,z)}else{let z=bg(A,a),H=bg(M,h);Kl(S,w,m,l,c,z[0],H[0]),Kl(S,w,m,l,c,z[0],H[1]),Kl(S,w,m,l,c,z[1],H[0]),Kl(S,w,m,l,c,z[1],H[1])}}return w}function Eg(l){return l.type==="MultiPolygon"?l.coordinates.map(a=>({type:"Polygon",coordinates:a})):l.type==="MultiLineString"?l.coordinates.map(a=>({type:"LineString",coordinates:a})):l.type==="MultiPoint"?l.coordinates.map(a=>({type:"Point",coordinates:a})):[l]}class Yl{constructor(a,c){this.type=Ze,this.geojson=a,this.geometries=c}static parse(a,c){if(a.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(Hl(a[1])){let h=a[1];if(h.type==="FeatureCollection")return new Yl(h,h.features.map(m=>Eg(m.geometry)).flat());if(h.type==="Feature")return new Yl(h,Eg(h.geometry));if("type"in h&&"coordinates"in h)return new Yl(h,Eg(h))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(c,h){let m=c.geometry(),b=m.flat().map(E=>yg([E.x,E.y],c.canonical));if(m.length===0)return NaN;let w=new vg(b[0][1]),S=1/0;for(let E of h){switch(E.type){case"Point":S=Math.min(S,Sd(b,!1,[E.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,Sd(b,!1,E.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,xd(b,!1,E.coordinates,w,S))}if(S===0)return S}return S}(a,this.geometries);if(a.geometryType()==="LineString")return function(c,h){let m=c.geometry(),b=m.flat().map(E=>yg([E.x,E.y],c.canonical));if(m.length===0)return NaN;let w=new vg(b[0][1]),S=1/0;for(let E of h){switch(E.type){case"Point":S=Math.min(S,Sd(b,!0,[E.coordinates],!1,w,S));break;case"LineString":S=Math.min(S,Sd(b,!0,E.coordinates,!0,w,S));break;case"Polygon":S=Math.min(S,xd(b,!0,E.coordinates,w,S))}if(S===0)return S}return S}(a,this.geometries);if(a.geometryType()==="Polygon")return function(c,h){let m=c.geometry();if(m.length===0||m[0].length===0)return NaN;let b=pp(m,0).map(E=>E.map(A=>A.map(M=>yg([M.x,M.y],c.canonical)))),w=new vg(b[0][0][0][1]),S=1/0;for(let E of h)for(let A of b){switch(E.type){case"Point":S=Math.min(S,xd([E.coordinates],!1,A,w,S));break;case"LineString":S=Math.min(S,xd(E.coordinates,!0,A,w,S));break;case"Polygon":S=Math.min(S,ai(A,E.coordinates,w,S))}if(S===0)return S}return S}(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let jc={"==":wC,"!=":t0,">":xC,"<":n0,">=":i0,"<=":SC,array:rs,at:dg,boolean:rs,case:sp,coalesce:cp,collator:bd,format:dp,image:mg,in:hg,"index-of":Bc,interpolate:so,"interpolate-hcl":so,"interpolate-lab":so,length:gg,let:Qa,literal:is,match:pg,number:rs,"number-format":fg,object:rs,slice:_d,step:Uc,string:rs,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:On,within:Wl,distance:Yl};class Lo{constructor(a,c,h,m){this.name=a,this.type=c,this._evaluate=h,this.args=m}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,c){let h=a[0],m=Lo.definitions[h];if(!m)return c.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let b=Array.isArray(m)?m[0]:m.type,w=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=w.filter(([A])=>!Array.isArray(A)||A.length===a.length-1),E=null;for(let[A,M]of S){E=new $l(c.registry,Cd,c.path,null,c.scope);let O=[],F=!1;for(let z=1;z<a.length;z++){let H=a[z],$=Array.isArray(A)?A[z-1]:A.type,Q=E.parse(H,1+O.length,$);if(!Q){F=!0;break}O.push(Q)}if(!F)if(Array.isArray(A)&&A.length!==O.length)E.error(`Expected ${A.length} arguments, but found ${O.length} instead.`);else{for(let z=0;z<O.length;z++){let H=Array.isArray(A)?A[z]:A.type,$=O[z];E.concat(z+1).checkSubtype(H,$.type)}if(E.errors.length===0)return new Lo(h,b,M,O)}}if(S.length===1)c.errors.push(...E.errors);else{let A=(S.length?S:w).map(([O])=>{return F=O,Array.isArray(F)?`(${F.map(B).join(", ")})`:`(${B(F.type)}...)`;var F}).join(" | "),M=[];for(let O=1;O<a.length;O++){let F=c.parse(a[O],1+M.length);if(!F)return null;M.push(B(F.type))}c.error(`Expected arguments of type ${A}, but found (${M.join(", ")}) instead.`)}return null}static register(a,c){Lo.definitions=c;for(let h in c)a[h]=Lo}}function Ig(l,[a,c,h,m]){a=a.evaluate(l),c=c.evaluate(l),h=h.evaluate(l);let b=m?m.evaluate(l):1,w=Lc(a,c,h,b);if(w)throw new Ui(w);return new Vn(a/255,c/255,h/255,b,!1)}function Dg(l,a){return l in a}function Tg(l,a){let c=a[l];return c===void 0?null:c}function Jl(l){return{type:l}}function Cd(l){if(l instanceof On)return Cd(l.boundExpression);if(l instanceof Lo&&l.name==="error"||l instanceof bd||l instanceof Wl||l instanceof Yl)return!1;let a=l instanceof os||l instanceof rs,c=!0;return l.eachChild(h=>{c=a?c&&Cd(h):c&&h instanceof is}),!!c&&Ed(l)&&Id(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ed(l){if(l instanceof Lo&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Wl||l instanceof Yl)return!1;let a=!0;return l.eachChild(c=>{a&&!Ed(c)&&(a=!1)}),a}function Hc(l){if(l instanceof Lo&&l.name==="feature-state")return!1;let a=!0;return l.eachChild(c=>{a&&!Hc(c)&&(a=!1)}),a}function Id(l,a){if(l instanceof Lo&&a.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(h=>{c&&!Id(h,a)&&(c=!1)}),c}function yp(l){return{result:"success",value:l}}function $c(l){return{result:"error",value:l}}function Gc(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function g0(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Ag(l){return!!l.expression&&l.expression.interpolated}function Tn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function _p(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function kC(l){return l}function y0(l,a){let c=a.type==="color",h=l.stops&&typeof l.stops[0][0]=="object",m=h||!(h||l.property!==void 0),b=l.type||(Ag(a)?"exponential":"interval");if(c||a.type==="padding"){let M=c?Vn.parse:xo.parse;(l=Us({},l)).stops&&(l.stops=l.stops.map(O=>[O[0],M(O[1])])),l.default=M(l.default?l.default:a.default)}if(l.colorSpace&&(w=l.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var w;let S,E,A;if(b==="exponential")S=v0;else if(b==="interval")S=vp;else if(b==="categorical"){S=_0,E=Object.create(null);for(let M of l.stops)E[M[0]]=M[1];A=typeof l.stops[0][0]}else{if(b!=="identity")throw new Error(`Unknown function type "${b}"`);S=b0}if(h){let M={},O=[];for(let H=0;H<l.stops.length;H++){let $=l.stops[H],Q=$[0].zoom;M[Q]===void 0&&(M[Q]={zoom:Q,type:l.type,property:l.property,default:l.default,stops:[]},O.push(Q)),M[Q].stops.push([$[0].value,$[1]])}let F=[];for(let H of O)F.push([M[H].zoom,y0(M[H],a)]);let z={name:"linear"};return{kind:"composite",interpolationType:z,interpolationFactor:so.interpolationFactor.bind(void 0,z),zoomStops:F.map(H=>H[0]),evaluate:({zoom:H},$)=>v0({stops:F,base:l.base},a,H).evaluate(H,$)}}if(m){let M=b==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:so.interpolationFactor.bind(void 0,M),zoomStops:l.stops.map(O=>O[0]),evaluate:({zoom:O})=>S(l,a,O,E,A)}}return{kind:"source",evaluate(M,O){let F=O&&O.properties?O.properties[l.property]:void 0;return F===void 0?qc(l.default,a.default):S(l,a,F,E,A)}}}function qc(l,a,c){return l!==void 0?l:a!==void 0?a:c!==void 0?c:void 0}function _0(l,a,c,h,m){return qc(typeof c===m?h[c]:void 0,l.default,a.default)}function vp(l,a,c){if(Tn(c)!=="number")return qc(l.default,a.default);let h=l.stops.length;if(h===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[h-1][0])return l.stops[h-1][1];let m=ap(l.stops.map(b=>b[0]),c);return l.stops[m][1]}function v0(l,a,c){let h=l.base!==void 0?l.base:1;if(Tn(c)!=="number")return qc(l.default,a.default);let m=l.stops.length;if(m===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[m-1][0])return l.stops[m-1][1];let b=ap(l.stops.map(M=>M[0]),c),w=function(M,O,F,z){let H=z-F,$=M-F;return H===0?0:O===1?$/H:(Math.pow(O,$)-1)/(Math.pow(O,H)-1)}(c,h,l.stops[b][0],l.stops[b+1][0]),S=l.stops[b][1],E=l.stops[b+1][1],A=oo[a.type]||kC;return typeof S.evaluate=="function"?{evaluate(...M){let O=S.evaluate.apply(void 0,M),F=E.evaluate.apply(void 0,M);if(O!==void 0&&F!==void 0)return A(O,F,w,l.colorSpace)}}:A(S,E,w,l.colorSpace)}function b0(l,a,c){switch(a.type){case"color":c=Vn.parse(c);break;case"formatted":c=wo.fromString(c.toString());break;case"resolvedImage":c=So.fromString(c.toString());break;case"padding":c=xo.parse(c);break;default:Tn(c)===a.type||a.type==="enum"&&a.values[c]||(c=void 0)}return qc(c,l.default,a.default)}Lo.register(jc,{error:[{kind:"error"},[sn],(l,[a])=>{throw new Ui(a.evaluate(l))}],typeof:[sn,[Wt],(l,[a])=>B(Zi(a.evaluate(l)))],"to-rgba":[U(Ze,4),[ro],(l,[a])=>{let[c,h,m,b]=a.evaluate(l).rgb;return[255*c,255*h,255*m,b]}],rgb:[ro,[Ze,Ze,Ze],Ig],rgba:[ro,[Ze,Ze,Ze,Ze],Ig],has:{type:Lt,overloads:[[[sn],(l,[a])=>Dg(a.evaluate(l),l.properties())],[[sn,ns],(l,[a,c])=>Dg(a.evaluate(l),c.evaluate(l))]]},get:{type:Wt,overloads:[[[sn],(l,[a])=>Tg(a.evaluate(l),l.properties())],[[sn,ns],(l,[a,c])=>Tg(a.evaluate(l),c.evaluate(l))]]},"feature-state":[Wt,[sn],(l,[a])=>Tg(a.evaluate(l),l.featureState||{})],properties:[ns,[],l=>l.properties()],"geometry-type":[sn,[],l=>l.geometryType()],id:[Wt,[],l=>l.id()],zoom:[Ze,[],l=>l.globals.zoom],"heatmap-density":[Ze,[],l=>l.globals.heatmapDensity||0],"line-progress":[Ze,[],l=>l.globals.lineProgress||0],accumulated:[Wt,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Ze,Jl(Ze),(l,a)=>{let c=0;for(let h of a)c+=h.evaluate(l);return c}],"*":[Ze,Jl(Ze),(l,a)=>{let c=1;for(let h of a)c*=h.evaluate(l);return c}],"-":{type:Ze,overloads:[[[Ze,Ze],(l,[a,c])=>a.evaluate(l)-c.evaluate(l)],[[Ze],(l,[a])=>-a.evaluate(l)]]},"/":[Ze,[Ze,Ze],(l,[a,c])=>a.evaluate(l)/c.evaluate(l)],"%":[Ze,[Ze,Ze],(l,[a,c])=>a.evaluate(l)%c.evaluate(l)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(l,[a,c])=>Math.pow(a.evaluate(l),c.evaluate(l))],sqrt:[Ze,[Ze],(l,[a])=>Math.sqrt(a.evaluate(l))],log10:[Ze,[Ze],(l,[a])=>Math.log(a.evaluate(l))/Math.LN10],ln:[Ze,[Ze],(l,[a])=>Math.log(a.evaluate(l))],log2:[Ze,[Ze],(l,[a])=>Math.log(a.evaluate(l))/Math.LN2],sin:[Ze,[Ze],(l,[a])=>Math.sin(a.evaluate(l))],cos:[Ze,[Ze],(l,[a])=>Math.cos(a.evaluate(l))],tan:[Ze,[Ze],(l,[a])=>Math.tan(a.evaluate(l))],asin:[Ze,[Ze],(l,[a])=>Math.asin(a.evaluate(l))],acos:[Ze,[Ze],(l,[a])=>Math.acos(a.evaluate(l))],atan:[Ze,[Ze],(l,[a])=>Math.atan(a.evaluate(l))],min:[Ze,Jl(Ze),(l,a)=>Math.min(...a.map(c=>c.evaluate(l)))],max:[Ze,Jl(Ze),(l,a)=>Math.max(...a.map(c=>c.evaluate(l)))],abs:[Ze,[Ze],(l,[a])=>Math.abs(a.evaluate(l))],round:[Ze,[Ze],(l,[a])=>{let c=a.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[Ze,[Ze],(l,[a])=>Math.floor(a.evaluate(l))],ceil:[Ze,[Ze],(l,[a])=>Math.ceil(a.evaluate(l))],"filter-==":[Lt,[sn,Wt],(l,[a,c])=>l.properties()[a.value]===c.value],"filter-id-==":[Lt,[Wt],(l,[a])=>l.id()===a.value],"filter-type-==":[Lt,[sn],(l,[a])=>l.geometryType()===a.value],"filter-<":[Lt,[sn,Wt],(l,[a,c])=>{let h=l.properties()[a.value],m=c.value;return typeof h==typeof m&&h<m}],"filter-id-<":[Lt,[Wt],(l,[a])=>{let c=l.id(),h=a.value;return typeof c==typeof h&&c<h}],"filter->":[Lt,[sn,Wt],(l,[a,c])=>{let h=l.properties()[a.value],m=c.value;return typeof h==typeof m&&h>m}],"filter-id->":[Lt,[Wt],(l,[a])=>{let c=l.id(),h=a.value;return typeof c==typeof h&&c>h}],"filter-<=":[Lt,[sn,Wt],(l,[a,c])=>{let h=l.properties()[a.value],m=c.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[Lt,[Wt],(l,[a])=>{let c=l.id(),h=a.value;return typeof c==typeof h&&c<=h}],"filter->=":[Lt,[sn,Wt],(l,[a,c])=>{let h=l.properties()[a.value],m=c.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[Lt,[Wt],(l,[a])=>{let c=l.id(),h=a.value;return typeof c==typeof h&&c>=h}],"filter-has":[Lt,[Wt],(l,[a])=>a.value in l.properties()],"filter-has-id":[Lt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Lt,[U(sn)],(l,[a])=>a.value.indexOf(l.geometryType())>=0],"filter-id-in":[Lt,[U(Wt)],(l,[a])=>a.value.indexOf(l.id())>=0],"filter-in-small":[Lt,[sn,U(Wt)],(l,[a,c])=>c.value.indexOf(l.properties()[a.value])>=0],"filter-in-large":[Lt,[sn,U(Wt)],(l,[a,c])=>function(h,m,b,w){for(;b<=w;){let S=b+w>>1;if(m[S]===h)return!0;m[S]>h?w=S-1:b=S+1}return!1}(l.properties()[a.value],c.value,0,c.value.length-1)],all:{type:Lt,overloads:[[[Lt,Lt],(l,[a,c])=>a.evaluate(l)&&c.evaluate(l)],[Jl(Lt),(l,a)=>{for(let c of a)if(!c.evaluate(l))return!1;return!0}]]},any:{type:Lt,overloads:[[[Lt,Lt],(l,[a,c])=>a.evaluate(l)||c.evaluate(l)],[Jl(Lt),(l,a)=>{for(let c of a)if(c.evaluate(l))return!0;return!1}]]},"!":[Lt,[Lt],(l,[a])=>!a.evaluate(l)],"is-supported-script":[Lt,[sn],(l,[a])=>{let c=l.globals&&l.globals.isSupportedScript;return!c||c(a.evaluate(l))}],upcase:[sn,[sn],(l,[a])=>a.evaluate(l).toUpperCase()],downcase:[sn,[sn],(l,[a])=>a.evaluate(l).toLowerCase()],concat:[sn,Jl(Wt),(l,a)=>a.map(c=>yd(c.evaluate(l))).join("")],"resolved-locale":[sn,[Vs],(l,[a])=>a.evaluate(l).resolvedLocale()]});class bp{constructor(a,c){var h;this.expression=a,this._warningHistory={},this._evaluator=new op,this._defaultValue=c?(h=c).type==="color"&&_p(h.default)?new Vn(0,0,0,0):h.type==="color"?Vn.parse(h.default)||null:h.type==="padding"?xo.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Fo.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(a,c,h,m,b,w){return this._evaluator.globals=a,this._evaluator.feature=c,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(a,c,h,m,b,w){this._evaluator.globals=a,this._evaluator.feature=c||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=w||null;try{let S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Ui(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function wp(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in jc}function Wc(l,a){let c=new $l(jc,Cd,[],a?function(m){let b={color:ro,string:sn,number:Ze,enum:sn,boolean:Lt,formatted:Ca,padding:Xa,resolvedImage:js,variableAnchorOffsetCollection:ie};return m.type==="array"?U(b[m.value]||Wt,m.length):b[m.type]}(a):void 0),h=c.parse(l,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?yp(new bp(h,a)):$c(c.errors)}class Zc{constructor(a,c){this.kind=a,this._styleExpression=c,this.isStateDependent=a!=="constant"&&!Hc(c.expression)}evaluateWithoutErrorHandling(a,c,h,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(a,c,h,m,b,w)}evaluate(a,c,h,m,b,w){return this._styleExpression.evaluate(a,c,h,m,b,w)}}class Kc{constructor(a,c,h,m){this.kind=a,this.zoomStops=h,this._styleExpression=c,this.isStateDependent=a!=="camera"&&!Hc(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(a,c,h,m,b,w){return this._styleExpression.evaluateWithoutErrorHandling(a,c,h,m,b,w)}evaluate(a,c,h,m,b,w){return this._styleExpression.evaluate(a,c,h,m,b,w)}interpolationFactor(a,c,h){return this.interpolationType?so.interpolationFactor(this.interpolationType,a,c,h):0}}function Mg(l,a){let c=Wc(l,a);if(c.result==="error")return c;let h=c.value.expression,m=Ed(h);if(!m&&!Gc(a))return $c([new Hr("","data expressions not supported")]);let b=Id(h,["zoom"]);if(!b&&!g0(a))return $c([new Hr("","zoom expressions not supported")]);let w=Dd(h);return w||b?w instanceof Hr?$c([w]):w instanceof so&&!Ag(a)?$c([new Hr("",'"interpolate" expressions cannot be used with this property')]):yp(w?new Kc(m?"camera":"composite",c.value,w.labels,w instanceof so?w.interpolation:void 0):new Zc(m?"constant":"source",c.value)):$c([new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yc{constructor(a,c){this._parameters=a,this._specification=c,Us(this,y0(this._parameters,this._specification))}static deserialize(a){return new Yc(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Dd(l){let a=null;if(l instanceof Qa)a=Dd(l.result);else if(l instanceof cp){for(let c of l.args)if(a=Dd(c),a)break}else(l instanceof Uc||l instanceof so)&&l.input instanceof Lo&&l.input.name==="zoom"&&(a=l);return a instanceof Hr||l.eachChild(c=>{let h=Dd(c);h instanceof Hr?a=h:!a&&h?a=new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&h&&a!==h&&(a=new Hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function xp(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(let a of l.slice(1))if(!xp(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}let Sp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pg(l){if(l==null)return{filter:()=>!0,needGeometry:!1};xp(l)||(l=Cp(l));let a=Wc(l,Sp);if(a.result==="error")throw new Error(a.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,h,m)=>a.value.evaluate(c,h,{},m),needGeometry:w0(l)}}function NC(l,a){return l<a?-1:l>a?1:0}function w0(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let a=1;a<l.length;a++)if(w0(l[a]))return!0;return!1}function Cp(l){if(!l)return!0;let a=l[0];return l.length<=1?a!=="any":a==="=="?Rg(l[1],l[2],"=="):a==="!="?Dr(Rg(l[1],l[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Rg(l[1],l[2],a):a==="any"?(c=l.slice(1),["any"].concat(c.map(Cp))):a==="all"?["all"].concat(l.slice(1).map(Cp)):a==="none"?["all"].concat(l.slice(1).map(Cp).map(Dr)):a==="in"?Td(l[1],l.slice(2)):a==="!in"?Dr(Td(l[1],l.slice(2))):a==="has"?Ad(l[1]):a!=="!has"||Dr(Ad(l[1]));var c}function Rg(l,a,c){switch(l){case"$type":return[`filter-type-${c}`,a];case"$id":return[`filter-id-${c}`,a];default:return[`filter-${c}`,l,a]}}function Td(l,a){if(a.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(c=>typeof c!=typeof a[0])?["filter-in-large",l,["literal",a.sort(NC)]]:["filter-in-small",l,["literal",a]]}}function Ad(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Dr(l){return["!",l]}function Xl(l){let a=typeof l;if(a==="number"||a==="boolean"||a==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let m="[";for(let b of l)m+=`${Xl(b)},`;return`${m}]`}let c=Object.keys(l).sort(),h="{";for(let m=0;m<c.length;m++)h+=`${JSON.stringify(c[m])}:${Xl(l[c[m]])},`;return`${h}}`}function x0(l){let a="";for(let c of jl)a+=`/${Xl(l[c])}`;return a}function S0(l){let a=l.value;return a?[new je(l.key,a,"constants have been deprecated as of v8")]:[]}function Ni(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function ss(l){if(Array.isArray(l))return l.map(ss);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){let a={};for(let c in l)a[c]=ss(l[c]);return a}return Ni(l)}function Co(l){let a=l.key,c=l.value,h=l.valueSpec||{},m=l.objectElementValidators||{},b=l.style,w=l.styleSpec,S=l.validateSpec,E=[],A=Tn(c);if(A!=="object")return[new je(a,c,`object expected, ${A} found`)];for(let M in c){let O=M.split(".")[0],F=h[O]||h["*"],z;if(m[O])z=m[O];else if(h[O])z=S;else if(m["*"])z=m["*"];else{if(!h["*"]){E.push(new je(a,c[M],`unknown property "${M}"`));continue}z=S}E=E.concat(z({key:(a&&`${a}.`)+M,value:c[M],valueSpec:F,style:b,styleSpec:w,object:c,objectKey:M,validateSpec:S},c))}for(let M in h)m[M]||h[M].required&&h[M].default===void 0&&c[M]===void 0&&E.push(new je(a,c,`missing required property "${M}"`));return E}function Md(l){let a=l.value,c=l.valueSpec,h=l.style,m=l.styleSpec,b=l.key,w=l.arrayElementValidator||l.validateSpec;if(Tn(a)!=="array")return[new je(b,a,`array expected, ${Tn(a)} found`)];if(c.length&&a.length!==c.length)return[new je(b,a,`array length ${c.length} expected, length ${a.length} found`)];if(c["min-length"]&&a.length<c["min-length"])return[new je(b,a,`array length at least ${c["min-length"]} expected, length ${a.length} found`)];let S={type:c.value,values:c.values};m.$version<7&&(S.function=c.function),Tn(c.value)==="object"&&(S=c.value);let E=[];for(let A=0;A<a.length;A++)E=E.concat(w({array:a,arrayIndex:A,value:a[A],valueSpec:S,validateSpec:l.validateSpec,style:h,styleSpec:m,key:`${b}[${A}]`}));return E}function Og(l){let a=l.key,c=l.value,h=l.valueSpec,m=Tn(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new je(a,c,`number expected, ${m} found`)]:"minimum"in h&&c<h.minimum?[new je(a,c,`${c} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&c>h.maximum?[new je(a,c,`${c} is greater than the maximum value ${h.maximum}`)]:[]}function Ep(l){let a=l.valueSpec,c=Ni(l.value.type),h,m,b,w={},S=c!=="categorical"&&l.value.property===void 0,E=!S,A=Tn(l.value.stops)==="array"&&Tn(l.value.stops[0])==="array"&&Tn(l.value.stops[0][0])==="object",M=Co({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(z){if(c==="identity")return[new je(z.key,z.value,'identity function may not have a "stops" property')];let H=[],$=z.value;return H=H.concat(Md({key:z.key,value:$,valueSpec:z.valueSpec,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:O})),Tn($)==="array"&&$.length===0&&H.push(new je(z.key,$,"array must have at least one stop")),H},default:function(z){return z.validateSpec({key:z.key,value:z.value,valueSpec:a,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec})}}});return c==="identity"&&S&&M.push(new je(l.key,l.value,'missing required property "property"')),c==="identity"||l.value.stops||M.push(new je(l.key,l.value,'missing required property "stops"')),c==="exponential"&&l.valueSpec.expression&&!Ag(l.valueSpec)&&M.push(new je(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(E&&!Gc(l.valueSpec)?M.push(new je(l.key,l.value,"property functions not supported")):S&&!g0(l.valueSpec)&&M.push(new je(l.key,l.value,"zoom functions not supported"))),c!=="categorical"&&!A||l.value.property!==void 0||M.push(new je(l.key,l.value,'"property" property is required')),M;function O(z){let H=[],$=z.value,Q=z.key;if(Tn($)!=="array")return[new je(Q,$,`array expected, ${Tn($)} found`)];if($.length!==2)return[new je(Q,$,`array length 2 expected, length ${$.length} found`)];if(A){if(Tn($[0])!=="object")return[new je(Q,$,`object expected, ${Tn($[0])} found`)];if($[0].zoom===void 0)return[new je(Q,$,"object stop key must have zoom")];if($[0].value===void 0)return[new je(Q,$,"object stop key must have value")];if(b&&b>Ni($[0].zoom))return[new je(Q,$[0].zoom,"stop zoom values must appear in ascending order")];Ni($[0].zoom)!==b&&(b=Ni($[0].zoom),m=void 0,w={}),H=H.concat(Co({key:`${Q}[0]`,value:$[0],valueSpec:{zoom:{}},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:Og,value:F}}))}else H=H.concat(F({key:`${Q}[0]`,value:$[0],valueSpec:{},validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec},$));return wp(ss($[1]))?H.concat([new je(`${Q}[1]`,$[1],"expressions are not allowed in function stops.")]):H.concat(z.validateSpec({key:`${Q}[1]`,value:$[1],valueSpec:a,validateSpec:z.validateSpec,style:z.style,styleSpec:z.styleSpec}))}function F(z,H){let $=Tn(z.value),Q=Ni(z.value),oe=z.value!==null?z.value:H;if(h){if($!==h)return[new je(z.key,oe,`${$} stop domain type must match previous stop domain type ${h}`)]}else h=$;if($!=="number"&&$!=="string"&&$!=="boolean")return[new je(z.key,oe,"stop domain value must be a number, string, or boolean")];if($!=="number"&&c!=="categorical"){let we=`number expected, ${$} found`;return Gc(a)&&c===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(z.key,oe,we)]}return c!=="categorical"||$!=="number"||isFinite(Q)&&Math.floor(Q)===Q?c!=="categorical"&&$==="number"&&m!==void 0&&Q<m?[new je(z.key,oe,"stop domain values must appear in ascending order")]:(m=Q,c==="categorical"&&Q in w?[new je(z.key,oe,"stop domain values must be unique")]:(w[Q]=!0,[])):[new je(z.key,oe,`integer expected, found ${Q}`)]}}function Jc(l){let a=(l.expressionContext==="property"?Mg:Wc)(ss(l.value),l.valueSpec);if(a.result==="error")return a.value.map(h=>new je(`${l.key}${h.key}`,l.value,h.message));let c=a.value.expression||a.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!c.outputDefined())return[new je(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Hc(c))return[new je(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Hc(c))return[new je(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Id(c,["zoom","feature-state"]))return[new je(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Ed(c))return[new je(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ia(l){let a=l.key,c=l.value,h=l.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Ni(c))===-1&&m.push(new je(a,c,`expected one of [${h.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(h.values).indexOf(Ni(c))===-1&&m.push(new je(a,c,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function kg(l){return xp(ss(l.value))?Jc(Us({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ip(l)}function Ip(l){let a=l.value,c=l.key;if(Tn(a)!=="array")return[new je(c,a,`array expected, ${Tn(a)} found`)];let h=l.styleSpec,m,b=[];if(a.length<1)return[new je(c,a,"filter array must have at least 1 element")];switch(b=b.concat(Ia({key:`${c}[0]`,value:a[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),Ni(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&Ni(a[1])==="$type"&&b.push(new je(c,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&b.push(new je(c,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(m=Tn(a[1]),m!=="string"&&b.push(new je(`${c}[1]`,a[1],`string expected, ${m} found`)));for(let w=2;w<a.length;w++)m=Tn(a[w]),Ni(a[1])==="$type"?b=b.concat(Ia({key:`${c}[${w}]`,value:a[w],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&b.push(new je(`${c}[${w}]`,a[w],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let w=1;w<a.length;w++)b=b.concat(Ip({key:`${c}[${w}]`,value:a[w],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":m=Tn(a[1]),a.length!==2?b.push(new je(c,a,`filter array for "${a[0]}" operator must have 2 elements`)):m!=="string"&&b.push(new je(`${c}[1]`,a[1],`string expected, ${m} found`))}return b}function Ng(l,a){let c=l.key,h=l.validateSpec,m=l.style,b=l.styleSpec,w=l.value,S=l.objectKey,E=b[`${a}_${l.layerType}`];if(!E)return[];let A=S.match(/^(.*)-transition$/);if(a==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return h({key:c,value:w,valueSpec:b.transition,style:m,styleSpec:b});let M=l.valueSpec||E[S];if(!M)return[new je(c,w,`unknown property "${S}"`)];let O;if(Tn(w)==="string"&&Gc(M)&&!M.tokens&&(O=/^{([^}]+)}$/.exec(w)))return[new je(c,w,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];let F=[];return l.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&F.push(new je(c,w,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&_p(ss(w))&&Ni(w.type)==="identity"&&F.push(new je(c,w,'"text-font" does not support identity functions'))),F.concat(h({key:l.key,value:w,valueSpec:M,style:m,styleSpec:b,expressionContext:"property",propertyType:a,propertyKey:S}))}function Dp(l){return Ng(l,"paint")}function Fg(l){return Ng(l,"layout")}function Lg(l){let a=[],c=l.value,h=l.key,m=l.style,b=l.styleSpec;c.type||c.ref||a.push(new je(h,c,'either "type" or "ref" is required'));let w=Ni(c.type),S=Ni(c.ref);if(c.id){let E=Ni(c.id);for(let A=0;A<l.arrayIndex;A++){let M=m.layers[A];Ni(M.id)===E&&a.push(new je(h,c.id,`duplicate layer id "${c.id}", previously used at line ${M.id.__line__}`))}}if("ref"in c){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in c&&a.push(new je(h,c[A],`"${A}" is prohibited for ref layers`))}),m.layers.forEach(A=>{Ni(A.id)===S&&(E=A)}),E?E.ref?a.push(new je(h,c.ref,"ref cannot reference another ref layer")):w=Ni(E.type):a.push(new je(h,c.ref,`ref layer "${S}" not found`))}else if(w!=="background")if(c.source){let E=m.sources&&m.sources[c.source],A=E&&Ni(E.type);E?A==="vector"&&w==="raster"?a.push(new je(h,c.source,`layer "${c.id}" requires a raster source`)):A!=="raster-dem"&&w==="hillshade"?a.push(new je(h,c.source,`layer "${c.id}" requires a raster-dem source`)):A==="raster"&&w!=="raster"?a.push(new je(h,c.source,`layer "${c.id}" requires a vector source`)):A!=="vector"||c["source-layer"]?A==="raster-dem"&&w!=="hillshade"?a.push(new je(h,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!c.paint||!c.paint["line-gradient"]||A==="geojson"&&E.lineMetrics||a.push(new je(h,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new je(h,c,`layer "${c.id}" must specify a "source-layer"`)):a.push(new je(h,c.source,`source "${c.source}" not found`))}else a.push(new je(h,c,'missing required property "source"'));return a=a.concat(Co({key:h,value:c,valueSpec:b.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:c.type,valueSpec:b.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:kg,layout:E=>Co({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Fg(Us({layerType:w},A))}}),paint:E=>Co({layer:c,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Dp(Us({layerType:w},A))}})}})),a}function Ql(l){let a=l.value,c=l.key,h=Tn(a);return h!=="string"?[new je(c,a,`string expected, ${h} found`)]:[]}let Tp={promoteId:function({key:l,value:a}){if(Tn(a)==="string")return Ql({key:l,value:a});{let c=[];for(let h in a)c.push(...Ql({key:`${l}.${h}`,value:a[h]}));return c}}};function Pd(l){let a=l.value,c=l.key,h=l.styleSpec,m=l.style,b=l.validateSpec;if(!a.type)return[new je(c,a,'"type" is required')];let w=Ni(a.type),S;switch(w){case"vector":case"raster":return S=Co({key:c,value:a,valueSpec:h[`source_${w.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:Tp,validateSpec:b}),S;case"raster-dem":return S=function(E){var A;let M=(A=E.sourceName)!==null&&A!==void 0?A:"",O=E.value,F=E.styleSpec,z=F.source_raster_dem,H=E.style,$=[],Q=Tn(O);if(O===void 0)return $;if(Q!=="object")return $.push(new je("source_raster_dem",O,`object expected, ${Q} found`)),$;let oe=Ni(O.encoding)==="custom",we=["redFactor","greenFactor","blueFactor","baseShift"],ue=E.value.encoding?`"${E.value.encoding}"`:"Default";for(let ye in O)!oe&&we.includes(ye)?$.push(new je(ye,O[ye],`In "${M}": "${ye}" is only valid when "encoding" is set to "custom". ${ue} encoding found`)):z[ye]?$=$.concat(E.validateSpec({key:ye,value:O[ye],valueSpec:z[ye],validateSpec:E.validateSpec,style:H,styleSpec:F})):$.push(new je(ye,O[ye],`unknown property "${ye}"`));return $}({sourceName:c,value:a,style:l.style,styleSpec:h,validateSpec:b}),S;case"geojson":if(S=Co({key:c,value:a,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:b,objectElementValidators:Tp}),a.cluster)for(let E in a.clusterProperties){let[A,M]=a.clusterProperties[E],O=typeof A=="string"?[A,["accumulated"],["get",E]]:A;S.push(...Jc({key:`${c}.${E}.map`,value:M,validateSpec:b,expressionContext:"cluster-map"})),S.push(...Jc({key:`${c}.${E}.reduce`,value:O,validateSpec:b,expressionContext:"cluster-reduce"}))}return S;case"video":return Co({key:c,value:a,valueSpec:h.source_video,style:m,validateSpec:b,styleSpec:h});case"image":return Co({key:c,value:a,valueSpec:h.source_image,style:m,validateSpec:b,styleSpec:h});case"canvas":return[new je(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ia({key:`${c}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:b,styleSpec:h})}}function Bg(l){let a=l.value,c=l.styleSpec,h=c.light,m=l.style,b=[],w=Tn(a);if(a===void 0)return b;if(w!=="object")return b=b.concat([new je("light",a,`object expected, ${w} found`)]),b;for(let S in a){let E=S.match(/^(.*)-transition$/);b=b.concat(E&&h[E[1]]&&h[E[1]].transition?l.validateSpec({key:S,value:a[S],valueSpec:c.transition,validateSpec:l.validateSpec,style:m,styleSpec:c}):h[S]?l.validateSpec({key:S,value:a[S],valueSpec:h[S],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new je(S,a[S],`unknown property "${S}"`)])}return b}function Ug(l){let a=l.value,c=l.styleSpec,h=c.sky,m=l.style,b=Tn(a);if(a===void 0)return[];if(b!=="object")return[new je("sky",a,`object expected, ${b} found`)];let w=[];for(let S in a)w=w.concat(h[S]?l.validateSpec({key:S,value:a[S],valueSpec:h[S],style:m,styleSpec:c}):[new je(S,a[S],`unknown property "${S}"`)]);return w}function zg(l){let a=l.value,c=l.styleSpec,h=c.terrain,m=l.style,b=[],w=Tn(a);if(a===void 0)return b;if(w!=="object")return b=b.concat([new je("terrain",a,`object expected, ${w} found`)]),b;for(let S in a)b=b.concat(h[S]?l.validateSpec({key:S,value:a[S],valueSpec:h[S],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new je(S,a[S],`unknown property "${S}"`)]);return b}function Vg(l){let a=[],c=l.value,h=l.key;if(Array.isArray(c)){let m=[],b=[];for(let w in c)c[w].id&&m.includes(c[w].id)&&a.push(new je(h,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),m.push(c[w].id),c[w].url&&b.includes(c[w].url)&&a.push(new je(h,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),b.push(c[w].url),a=a.concat(Co({key:`${h}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return a}return Ql({key:h,value:c})}let Ap={"*":()=>[],array:Md,boolean:function(l){let a=l.value,c=l.key,h=Tn(a);return h!=="boolean"?[new je(c,a,`boolean expected, ${h} found`)]:[]},number:Og,color:function(l){let a=l.key,c=l.value,h=Tn(c);return h!=="string"?[new je(a,c,`color expected, ${h} found`)]:Vn.parse(String(c))?[]:[new je(a,c,`color expected, "${c}" found`)]},constants:S0,enum:Ia,filter:kg,function:Ep,layer:Lg,object:Co,source:Pd,light:Bg,sky:Ug,terrain:zg,projection:function(l){let a=l.value,c=l.styleSpec,h=c.projection,m=l.style,b=Tn(a);if(a===void 0)return[];if(b!=="object")return[new je("projection",a,`object expected, ${b} found`)];let w=[];for(let S in a)w=w.concat(h[S]?l.validateSpec({key:S,value:a[S],valueSpec:h[S],style:m,styleSpec:c}):[new je(S,a[S],`unknown property "${S}"`)]);return w},string:Ql,formatted:function(l){return Ql(l).length===0?[]:Jc(l)},resolvedImage:function(l){return Ql(l).length===0?[]:Jc(l)},padding:function(l){let a=l.key,c=l.value;if(Tn(c)==="array"){if(c.length<1||c.length>4)return[new je(a,c,`padding requires 1 to 4 values; ${c.length} values found`)];let h={type:"number"},m=[];for(let b=0;b<c.length;b++)m=m.concat(l.validateSpec({key:`${a}[${b}]`,value:c[b],validateSpec:l.validateSpec,valueSpec:h}));return m}return Og({key:a,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(l){let a=l.key,c=l.value,h=Tn(c),m=l.styleSpec;if(h!=="array"||c.length<1||c.length%2!=0)return[new je(a,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let w=0;w<c.length;w+=2)b=b.concat(Ia({key:`${a}[${w}]`,value:c[w],valueSpec:m.layout_symbol["text-anchor"]})),b=b.concat(Md({key:`${a}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:m}));return b},sprite:Vg};function Xc(l){let a=l.value,c=l.valueSpec,h=l.styleSpec;return l.validateSpec=Xc,c.expression&&_p(Ni(a))?Ep(l):c.expression&&wp(ss(a))?Jc(l):c.type&&Ap[c.type]?Ap[c.type](l):Co(Us({},l,{valueSpec:c.type?h[c.type]:c}))}function C0(l){let a=l.value,c=l.key,h=Ql(l);return h.length||(a.indexOf("{fontstack}")===-1&&h.push(new je(c,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&h.push(new je(c,a,'"glyphs" url must include a "{range}" token'))),h}function Bo(l,a=De){let c=[];return c=c.concat(Xc({key:"",value:l,valueSpec:a.$root,styleSpec:a,style:l,validateSpec:Xc,objectElementValidators:{glyphs:C0,"*":()=>[]}})),l.constants&&(c=c.concat(S0({key:"constants",value:l.constants,style:l,styleSpec:a,validateSpec:Xc}))),jg(c)}function $s(l){return function(a){return l(Ie(q({},a),{validateSpec:Xc}))}}function jg(l){return[].concat(l).sort((a,c)=>a.line-c.line)}function as(l){return function(...a){return jg(l.apply(this,a))}}Bo.source=as($s(Pd)),Bo.sprite=as($s(Vg)),Bo.glyphs=as($s(C0)),Bo.light=as($s(Bg)),Bo.sky=as($s(Ug)),Bo.terrain=as($s(zg)),Bo.layer=as($s(Lg)),Bo.filter=as($s(kg)),Bo.paintProperty=as($s(Dp)),Bo.layoutProperty=as($s(Fg));let ec=Bo,FC=ec.light,LC=ec.sky,E0=ec.paintProperty,I0=ec.layoutProperty;function Hg(l,a){let c=!1;if(a&&a.length)for(let h of a)l.fire(new Ka(new Error(h.message))),c=!0;return c}class Qc{constructor(a,c,h){let m=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;let w=new Int32Array(this.arrayBuffer);a=w[0],this.d=(c=w[1])+2*(h=w[2]);for(let E=0;E<this.d*this.d;E++){let A=w[3+E],M=w[3+E+1];m.push(A===M?null:w.subarray(A,M))}let S=w[3+m.length+1];this.keys=w.subarray(w[3+m.length],S),this.bboxes=w.subarray(S),this.insert=this._insertReadonly}else{this.d=c+2*h;for(let w=0;w<this.d*this.d;w++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=a,this.padding=h,this.scale=c/a,this.uid=0;let b=h/c*a;this.min=-b,this.max=a+b}insert(a,c,h,m,b){this._forEachCell(c,h,m,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(c),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,c,h,m,b,w){this.cells[b].push(w)}query(a,c,h,m,b){let w=this.min,S=this.max;if(a<=w&&c<=w&&S<=h&&S<=m&&!b)return Array.prototype.slice.call(this.keys);{let E=[];return this._forEachCell(a,c,h,m,this._queryCell,E,{},b),E}}_queryCell(a,c,h,m,b,w,S,E){let A=this.cells[b];if(A!==null){let M=this.keys,O=this.bboxes;for(let F=0;F<A.length;F++){let z=A[F];if(S[z]===void 0){let H=4*z;(E?E(O[H+0],O[H+1],O[H+2],O[H+3]):a<=O[H+2]&&c<=O[H+3]&&h>=O[H+0]&&m>=O[H+1])?(S[z]=!0,w.push(M[z])):S[z]=!1}}}}_forEachCell(a,c,h,m,b,w,S,E){let A=this._convertToCellCoord(a),M=this._convertToCellCoord(c),O=this._convertToCellCoord(h),F=this._convertToCellCoord(m);for(let z=A;z<=O;z++)for(let H=M;H<=F;H++){let $=this.d*H+z;if((!E||E(this._convertFromCellCoord(z),this._convertFromCellCoord(H),this._convertFromCellCoord(z+1),this._convertFromCellCoord(H+1)))&&b.call(this,a,c,h,m,$,w,S,E))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let a=this.cells,c=3+this.cells.length+1+1,h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;let m=new Int32Array(c+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let b=c;for(let w=0;w<a.length;w++){let S=a[w];m[3+w]=b,m.set(S,b),b+=S.length}return m[3+a.length]=b,m.set(this.keys,b),b+=this.keys.length,m[3+a.length+1]=b,m.set(this.bboxes,b),b+=this.bboxes.length,m.buffer}static serialize(a,c){let h=a.toArrayBuffer();return c&&c.push(h),{buffer:h}}static deserialize(a){return new Qc(a.buffer)}}let Uo={};function at(l,a,c={}){if(Uo[l])throw new Error(`${l} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:l,writeable:!1}),Uo[l]={klass:a,omit:c.omit||[],shallow:c.shallow||[]}}at("Object",Object),at("TransferableGridIndex",Qc),at("Color",Vn),at("Error",Error),at("AJAXError",Xn),at("ResolvedImage",So),at("StylePropertyFunction",Yc),at("StyleExpression",bp,{omit:["_evaluator"]}),at("ZoomDependentExpression",Kc),at("ZoomConstantExpression",Zc),at("CompoundExpression",Lo,{omit:["_evaluate"]});for(let l in jc)jc[l]._classRegistryKey||at(`Expression_${l}`,jc[l]);function Mp(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function $g(l){return l.$name||l.constructor._classRegistryKey}function D0(l){return!function(a){if(a===null||typeof a!="object")return!1;let c=$g(a);return!(!c||c==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Mp(l)||qi(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function eu(l,a){if(D0(l))return(Mp(l)||qi(l))&&a&&a.push(l),ArrayBuffer.isView(l)&&a&&a.push(l.buffer),l instanceof ImageData&&a&&a.push(l.data.buffer),l;if(Array.isArray(l)){let b=[];for(let w of l)b.push(eu(w,a));return b}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);let c=$g(l);if(!c)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Uo[c])throw new Error(`${c} is not registered.`);let{klass:h}=Uo[c],m=h.serialize?h.serialize(l,a):{};if(h.serialize){if(a&&m===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let b in l){if(!l.hasOwnProperty(b)||Uo[c].omit.indexOf(b)>=0)continue;let w=l[b];m[b]=Uo[c].shallow.indexOf(b)>=0?w:eu(w,a)}l instanceof Error&&(m.message=l.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(m.$name=c),m}function tu(l){if(D0(l))return l;if(Array.isArray(l))return l.map(tu);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);let a=$g(l)||"Object";if(!Uo[a])throw new Error(`can't deserialize unregistered class ${a}`);let{klass:c}=Uo[a];if(!c)throw new Error(`can't deserialize unregistered class ${a}`);if(c.deserialize)return c.deserialize(l);let h=Object.create(c.prototype);for(let m of Object.keys(l)){if(m==="$name")continue;let b=l[m];h[m]=Uo[a].shallow.indexOf(m)>=0?b:tu(b)}return h}class Gg{constructor(){this.first=!0}update(a,c){let h=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=c),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=h,!0))}}let _n={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function qg(l){for(let a of l)if(Zg(a.charCodeAt(0)))return!0;return!1}function BC(l){for(let a of l)if(!nu(a.charCodeAt(0)))return!1;return!0}function Wg(l){let a=l.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(a.join("|"),"u")}let UC=Wg(["Arab","Dupl","Mong","Ougr","Syrc"]);function nu(l){return!UC.test(String.fromCodePoint(l))}let T0=Wg(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Zg(l){return!(l!==746&&l!==747&&(l<4352||!(_n["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||_n["CJK Compatibility"](l)||_n["CJK Strokes"](l)||!(!_n["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||_n["Enclosed CJK Letters and Months"](l)||_n["Ideographic Description Characters"](l)||_n.Kanbun(l)||_n.Katakana(l)&&l!==12540||!(!_n["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!_n["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||_n["Vertical Forms"](l)||_n["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||T0.test(String.fromCodePoint(l)))))}function A0(l){return!(Zg(l)||function(a){return!!(_n["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||_n["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||_n["Letterlike Symbols"](a)||_n["Number Forms"](a)||_n["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||_n["Control Pictures"](a)&&a!==9251||_n["Optical Character Recognition"](a)||_n["Enclosed Alphanumerics"](a)||_n["Geometric Shapes"](a)||_n["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||_n["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||_n["CJK Symbols and Punctuation"](a)||_n.Katakana(a)||_n["Private Use Area"](a)||_n["CJK Compatibility Forms"](a)||_n["Small Form Variants"](a)||_n["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(l))}let zC=Wg(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Kg(l){return zC.test(String.fromCodePoint(l))}function VC(l,a){return!(!a&&Kg(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||_n.Khmer(l))}function jC(l){for(let a of l)if(Kg(a.charCodeAt(0)))return!0;return!1}let Eo=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class di{constructor(a,c){this.zoom=a,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Gg,this.transition={})}isSupportedScript(a){return function(c,h){for(let m of c)if(!VC(m.charCodeAt(0),h))return!1;return!0}(a,Eo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let a=this.zoom,c=a-Math.floor(a),h=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*c}}}class iu{constructor(a,c){this.property=a,this.value=c,this.expression=function(h,m){if(_p(h))return new Yc(h,m);if(wp(h)){let b=Mg(h,m);if(b.result==="error")throw new Error(b.value.map(w=>`${w.key}: ${w.message}`).join(", "));return b.value}{let b=h;return m.type==="color"&&typeof h=="string"?b=Vn.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(b=Fo.parse(h)):b=xo.parse(h),{kind:"constant",evaluate:()=>b}}}(c===void 0?a.specification.default:c,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,c,h){return this.property.possiblyEvaluate(this,a,c,h)}}class Pp{constructor(a){this.property=a,this.value=new iu(a,void 0)}transitioned(a,c){return new M0(this.property,this.value,c,We({},a.transition,this.transition),a.now)}untransitioned(){return new M0(this.property,this.value,null,{},0)}}class Rp{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return st(this._values[a].value.value)}setValue(a,c){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Pp(this._values[a].property)),this._values[a].value=new iu(this._values[a].property,c===null?void 0:st(c))}getTransition(a){return st(this._values[a].transition)}setTransition(a,c){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Pp(this._values[a].property)),this._values[a].transition=st(c)||void 0}serialize(){let a={};for(let c of Object.keys(this._values)){let h=this.getValue(c);h!==void 0&&(a[c]=h);let m=this.getTransition(c);m!==void 0&&(a[`${c}-transition`]=m)}return a}transitioned(a,c){let h=new Rd(this._properties);for(let m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(a,c._values[m]);return h}untransitioned(){let a=new Rd(this._properties);for(let c of Object.keys(this._values))a._values[c]=this._values[c].untransitioned();return a}}class M0{constructor(a,c,h,m,b){this.property=a,this.value=c,this.begin=b+m.delay||0,this.end=this.begin+m.duration||0,a.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(a,c,h){let m=a.now||0,b=this.value.possiblyEvaluate(a,c,h),w=this.prior;if(w){if(m>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(m<this.begin)return w.possiblyEvaluate(a,c,h);{let S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(a,c,h),b,function(E){if(E<=0)return 0;if(E>=1)return 1;let A=E*E,M=A*E;return 4*(E<.5?M:3*(E-A)+M-.75)}(S))}}return b}}class Rd{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,c,h){let m=new kd(this._properties);for(let b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(a,c,h);return m}hasTransition(){for(let a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Od{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return st(this._values[a].value)}setValue(a,c){this._values[a]=new iu(this._values[a].property,c===null?void 0:st(c))}serialize(){let a={};for(let c of Object.keys(this._values)){let h=this.getValue(c);h!==void 0&&(a[c]=h)}return a}possiblyEvaluate(a,c,h){let m=new kd(this._properties);for(let b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(a,c,h);return m}}class Gs{constructor(a,c,h){this.property=a,this.value=c,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,c,h,m){return this.property.evaluate(this.value,this.parameters,a,c,h,m)}}class kd{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class ht{constructor(a){this.specification=a}possiblyEvaluate(a,c){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(c)}interpolate(a,c,h){let m=oo[this.specification.type];return m?m(a,c,h):a}}class At{constructor(a,c){this.specification=a,this.overrides=c}possiblyEvaluate(a,c,h,m){return new Gs(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(c,null,{},h,m)}:a.expression,c)}interpolate(a,c,h){if(a.value.kind!=="constant"||c.value.kind!=="constant")return a;if(a.value.value===void 0||c.value.value===void 0)return new Gs(this,{kind:"constant",value:void 0},a.parameters);let m=oo[this.specification.type];if(m){let b=m(a.value.value,c.value.value,h);return new Gs(this,{kind:"constant",value:b},a.parameters)}return a}evaluate(a,c,h,m,b,w){return a.kind==="constant"?a.value:a.evaluate(c,h,m,b,w)}}class Op extends At{possiblyEvaluate(a,c,h,m){if(a.value===void 0)return new Gs(this,{kind:"constant",value:void 0},c);if(a.expression.kind==="constant"){let b=a.expression.evaluate(c,null,{},h,m),w=a.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,S=this._calculate(w,w,w,c);return new Gs(this,{kind:"constant",value:S},c)}if(a.expression.kind==="camera"){let b=this._calculate(a.expression.evaluate({zoom:c.zoom-1}),a.expression.evaluate({zoom:c.zoom}),a.expression.evaluate({zoom:c.zoom+1}),c);return new Gs(this,{kind:"constant",value:b},c)}return new Gs(this,a.expression,c)}evaluate(a,c,h,m,b,w){if(a.kind==="source"){let S=a.evaluate(c,h,m,b,w);return this._calculate(S,S,S,c)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(c.zoom)-1},h,m),a.evaluate({zoom:Math.floor(c.zoom)},h,m),a.evaluate({zoom:Math.floor(c.zoom)+1},h,m),c):a.value}_calculate(a,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:a,to:c}:{from:h,to:c}}interpolate(a){return a}}class kp{constructor(a){this.specification=a}possiblyEvaluate(a,c,h,m){if(a.value!==void 0){if(a.expression.kind==="constant"){let b=a.expression.evaluate(c,null,{},h,m);return this._calculate(b,b,b,c)}return this._calculate(a.expression.evaluate(new di(Math.floor(c.zoom-1),c)),a.expression.evaluate(new di(Math.floor(c.zoom),c)),a.expression.evaluate(new di(Math.floor(c.zoom+1),c)),c)}}_calculate(a,c,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:a,to:c}:{from:h,to:c}}interpolate(a){return a}}class Yg{constructor(a){this.specification=a}possiblyEvaluate(a,c,h,m){return!!a.expression.evaluate(c,null,{},h,m)}interpolate(){return!1}}class _{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in a){let h=a[c];h.specification.overridable&&this.overridableProperties.push(c);let m=this.defaultPropertyValues[c]=new iu(h,void 0),b=this.defaultTransitionablePropertyValues[c]=new Pp(h);this.defaultTransitioningPropertyValues[c]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}at("DataDrivenProperty",At),at("DataConstantProperty",ht),at("CrossFadedDataDrivenProperty",Op),at("CrossFadedProperty",kp),at("ColorRampProperty",Yg);let s="-transition";class u extends kc{constructor(a,c){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),c.layout&&(this._unevaluatedLayout=new Od(c.layout)),c.paint)){this._transitionablePaint=new Rp(c.paint);for(let h in a.paint)this.setPaintProperty(h,a.paint[h],{validate:!1});for(let h in a.layout)this.setLayoutProperty(h,a.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new kd(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,c,h={}){c!=null&&this._validate(I0,`layers.${this.id}.layout.${a}`,a,c,h)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,c):this.visibility=c)}getPaintProperty(a){return a.endsWith(s)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,c,h={}){if(c!=null&&this._validate(E0,`layers.${this.id}.paint.${a}`,a,c,h))return!1;if(a.endsWith(s))return this._transitionablePaint.setTransition(a.slice(0,-11),c||void 0),!1;{let m=this._transitionablePaint._values[a],b=m.property.specification["property-type"]==="cross-faded-data-driven",w=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(a,c),this._handleSpecialPaintPropertyUpdate(a);let E=this._transitionablePaint._values[a].value;return E.isDataDriven()||w||b||this._handleOverridablePaintPropertyUpdate(a,S,E)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,c,h){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,c){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,c)}serialize(){let a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Gt(a,(c,h)=>!(c===void 0||h==="layout"&&!Object.keys(c).length||h==="paint"&&!Object.keys(c).length))}_validate(a,c,h,m,b={}){return(!b||b.validate!==!1)&&Hg(this,a.call(ec,{key:c,layerType:this.type,objectKey:h,value:m,styleSpec:De,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let a in this.paint._values){let c=this.paint.get(a);if(c instanceof Gs&&Gc(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class f{constructor(a,c){this._structArray=a,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,c){return a._trim(),c&&(a.isTransferred=!0,c.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){let c=Object.create(this.prototype);return c.arrayBuffer=a.arrayBuffer,c.length=a.length,c.capacity=a.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(l,a=1){let c=0,h=0;return{members:l.map(m=>{let b=p[m.type].BYTES_PER_ELEMENT,w=c=I(c,Math.max(a,b)),S=m.components||1;return h=Math.max(h,b),c+=b*S,{name:m.name,type:m.type,components:S,offset:w}}),size:I(c,Math.max(h,a)),alignment:a}}function I(l,a){return Math.ceil(l/a)*a}class T extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c){let h=this.length;return this.resize(h+1),this.emplace(h,a,c)}emplace(a,c,h){let m=2*a;return this.int16[m+0]=c,this.int16[m+1]=h,a}}T.prototype.bytesPerElement=4,at("StructArrayLayout2i4",T);class P extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h){let m=this.length;return this.resize(m+1),this.emplace(m,a,c,h)}emplace(a,c,h,m){let b=3*a;return this.int16[b+0]=c,this.int16[b+1]=h,this.int16[b+2]=m,a}}P.prototype.bytesPerElement=6,at("StructArrayLayout3i6",P);class k extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m){let b=this.length;return this.resize(b+1),this.emplace(b,a,c,h,m)}emplace(a,c,h,m,b){let w=4*a;return this.int16[w+0]=c,this.int16[w+1]=h,this.int16[w+2]=m,this.int16[w+3]=b,a}}k.prototype.bytesPerElement=8,at("StructArrayLayout4i8",k);class N extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w){let S=this.length;return this.resize(S+1),this.emplace(S,a,c,h,m,b,w)}emplace(a,c,h,m,b,w,S){let E=6*a;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=b,this.int16[E+4]=w,this.int16[E+5]=S,a}}N.prototype.bytesPerElement=12,at("StructArrayLayout2i4i12",N);class V extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w){let S=this.length;return this.resize(S+1),this.emplace(S,a,c,h,m,b,w)}emplace(a,c,h,m,b,w,S){let E=4*a,A=8*a;return this.int16[E+0]=c,this.int16[E+1]=h,this.uint8[A+4]=m,this.uint8[A+5]=b,this.uint8[A+6]=w,this.uint8[A+7]=S,a}}V.prototype.bytesPerElement=8,at("StructArrayLayout2i4ub8",V);class G extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c){let h=this.length;return this.resize(h+1),this.emplace(h,a,c)}emplace(a,c,h){let m=2*a;return this.float32[m+0]=c,this.float32[m+1]=h,a}}G.prototype.bytesPerElement=8,at("StructArrayLayout2f8",G);class K extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w,S,E,A,M){let O=this.length;return this.resize(O+1),this.emplace(O,a,c,h,m,b,w,S,E,A,M)}emplace(a,c,h,m,b,w,S,E,A,M,O){let F=10*a;return this.uint16[F+0]=c,this.uint16[F+1]=h,this.uint16[F+2]=m,this.uint16[F+3]=b,this.uint16[F+4]=w,this.uint16[F+5]=S,this.uint16[F+6]=E,this.uint16[F+7]=A,this.uint16[F+8]=M,this.uint16[F+9]=O,a}}K.prototype.bytesPerElement=20,at("StructArrayLayout10ui20",K);class te extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w,S,E,A,M,O,F){let z=this.length;return this.resize(z+1),this.emplace(z,a,c,h,m,b,w,S,E,A,M,O,F)}emplace(a,c,h,m,b,w,S,E,A,M,O,F,z){let H=12*a;return this.int16[H+0]=c,this.int16[H+1]=h,this.int16[H+2]=m,this.int16[H+3]=b,this.uint16[H+4]=w,this.uint16[H+5]=S,this.uint16[H+6]=E,this.uint16[H+7]=A,this.int16[H+8]=M,this.int16[H+9]=O,this.int16[H+10]=F,this.int16[H+11]=z,a}}te.prototype.bytesPerElement=24,at("StructArrayLayout4i4ui4i24",te);class se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,h){let m=this.length;return this.resize(m+1),this.emplace(m,a,c,h)}emplace(a,c,h,m){let b=3*a;return this.float32[b+0]=c,this.float32[b+1]=h,this.float32[b+2]=m,a}}se.prototype.bytesPerElement=12,at("StructArrayLayout3f12",se);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){let c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint32[1*a+0]=c,a}}ae.prototype.bytesPerElement=4,at("StructArrayLayout1ul4",ae);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w,S,E,A){let M=this.length;return this.resize(M+1),this.emplace(M,a,c,h,m,b,w,S,E,A)}emplace(a,c,h,m,b,w,S,E,A,M){let O=10*a,F=5*a;return this.int16[O+0]=c,this.int16[O+1]=h,this.int16[O+2]=m,this.int16[O+3]=b,this.int16[O+4]=w,this.int16[O+5]=S,this.uint32[F+3]=E,this.uint16[O+8]=A,this.uint16[O+9]=M,a}}ce.prototype.bytesPerElement=20,at("StructArrayLayout6i1ul2ui20",ce);class X extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w){let S=this.length;return this.resize(S+1),this.emplace(S,a,c,h,m,b,w)}emplace(a,c,h,m,b,w,S){let E=6*a;return this.int16[E+0]=c,this.int16[E+1]=h,this.int16[E+2]=m,this.int16[E+3]=b,this.int16[E+4]=w,this.int16[E+5]=S,a}}X.prototype.bytesPerElement=12,at("StructArrayLayout2i2i2i12",X);class pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b){let w=this.length;return this.resize(w+1),this.emplace(w,a,c,h,m,b)}emplace(a,c,h,m,b,w){let S=4*a,E=8*a;return this.float32[S+0]=c,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[E+6]=b,this.int16[E+7]=w,a}}pe.prototype.bytesPerElement=16,at("StructArrayLayout2f1f2i16",pe);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w){let S=this.length;return this.resize(S+1),this.emplace(S,a,c,h,m,b,w)}emplace(a,c,h,m,b,w,S){let E=16*a,A=4*a,M=8*a;return this.uint8[E+0]=c,this.uint8[E+1]=h,this.float32[A+1]=m,this.float32[A+2]=b,this.int16[M+6]=w,this.int16[M+7]=S,a}}ge.prototype.bytesPerElement=16,at("StructArrayLayout2ub2f2i16",ge);class Se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,h){let m=this.length;return this.resize(m+1),this.emplace(m,a,c,h)}emplace(a,c,h,m){let b=3*a;return this.uint16[b+0]=c,this.uint16[b+1]=h,this.uint16[b+2]=m,a}}Se.prototype.bytesPerElement=6,at("StructArrayLayout3ui6",Se);class ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe){let we=this.length;return this.resize(we+1),this.emplace(we,a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe)}emplace(a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe,we){let ue=24*a,ye=12*a,Te=48*a;return this.int16[ue+0]=c,this.int16[ue+1]=h,this.uint16[ue+2]=m,this.uint16[ue+3]=b,this.uint32[ye+2]=w,this.uint32[ye+3]=S,this.uint32[ye+4]=E,this.uint16[ue+10]=A,this.uint16[ue+11]=M,this.uint16[ue+12]=O,this.float32[ye+7]=F,this.float32[ye+8]=z,this.uint8[Te+36]=H,this.uint8[Te+37]=$,this.uint8[Te+38]=Q,this.uint32[ye+10]=oe,this.int16[ue+22]=we,a}}ke.prototype.bytesPerElement=48,at("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ke);class ze extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe,we,ue,ye,Te,Le,nt,It,et,Ye,yt,lt){let ot=this.length;return this.resize(ot+1),this.emplace(ot,a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe,we,ue,ye,Te,Le,nt,It,et,Ye,yt,lt)}emplace(a,c,h,m,b,w,S,E,A,M,O,F,z,H,$,Q,oe,we,ue,ye,Te,Le,nt,It,et,Ye,yt,lt,ot){let Oe=32*a,bt=16*a;return this.int16[Oe+0]=c,this.int16[Oe+1]=h,this.int16[Oe+2]=m,this.int16[Oe+3]=b,this.int16[Oe+4]=w,this.int16[Oe+5]=S,this.int16[Oe+6]=E,this.int16[Oe+7]=A,this.uint16[Oe+8]=M,this.uint16[Oe+9]=O,this.uint16[Oe+10]=F,this.uint16[Oe+11]=z,this.uint16[Oe+12]=H,this.uint16[Oe+13]=$,this.uint16[Oe+14]=Q,this.uint16[Oe+15]=oe,this.uint16[Oe+16]=we,this.uint16[Oe+17]=ue,this.uint16[Oe+18]=ye,this.uint16[Oe+19]=Te,this.uint16[Oe+20]=Le,this.uint16[Oe+21]=nt,this.uint16[Oe+22]=It,this.uint32[bt+12]=et,this.float32[bt+13]=Ye,this.float32[bt+14]=yt,this.uint16[Oe+30]=lt,this.uint16[Oe+31]=ot,a}}ze.prototype.bytesPerElement=64,at("StructArrayLayout8i15ui1ul2f2ui64",ze);class Xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){let c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.float32[1*a+0]=c,a}}Xe.prototype.bytesPerElement=4,at("StructArrayLayout1f4",Xe);class it extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,h){let m=this.length;return this.resize(m+1),this.emplace(m,a,c,h)}emplace(a,c,h,m){let b=3*a;return this.uint16[6*a+0]=c,this.float32[b+1]=h,this.float32[b+2]=m,a}}it.prototype.bytesPerElement=12,at("StructArrayLayout1ui2f12",it);class qe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c,h){let m=this.length;return this.resize(m+1),this.emplace(m,a,c,h)}emplace(a,c,h,m){let b=4*a;return this.uint32[2*a+0]=c,this.uint16[b+2]=h,this.uint16[b+3]=m,a}}qe.prototype.bytesPerElement=8,at("StructArrayLayout1ul2ui8",qe);class Ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,c){let h=this.length;return this.resize(h+1),this.emplace(h,a,c)}emplace(a,c,h){let m=2*a;return this.uint16[m+0]=c,this.uint16[m+1]=h,a}}Ge.prototype.bytesPerElement=4,at("StructArrayLayout2ui4",Ge);class pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){let c=this.length;return this.resize(c+1),this.emplace(c,a)}emplace(a,c){return this.uint16[1*a+0]=c,a}}pt.prototype.bytesPerElement=2,at("StructArrayLayout1ui2",pt);class $t extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,c,h,m){let b=this.length;return this.resize(b+1),this.emplace(b,a,c,h,m)}emplace(a,c,h,m,b){let w=4*a;return this.float32[w+0]=c,this.float32[w+1]=h,this.float32[w+2]=m,this.float32[w+3]=b,a}}$t.prototype.bytesPerElement=16,at("StructArrayLayout4f16",$t);class Ke extends f{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}Ke.prototype.size=20;class tt extends ce{get(a){return new Ke(this,a)}}at("CollisionBoxArray",tt);class Ut extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ut.prototype.size=48;class hi extends ke{get(a){return new Ut(this,a)}}at("PlacedSymbolArray",hi);class nn extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}nn.prototype.size=64;class mn extends ze{get(a){return new nn(this,a)}}at("SymbolInstanceArray",mn);class pi extends Xe{getoffsetX(a){return this.float32[1*a+0]}}at("GlyphOffsetArray",pi);class Tr extends P{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}at("SymbolLineVertexArray",Tr);class ls extends f{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ls.prototype.size=12;class fi extends it{get(a){return new ls(this,a)}}at("TextAnchorOffsetArray",fi);class ao extends f{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ao.prototype.size=8;class Gr extends qe{get(a){return new ao(this,a)}}at("FeatureIndexArray",Gr);class Ar extends T{}class qr extends T{}class qs extends T{}class ru extends N{}class Np extends V{}class ou extends G{}class zo extends K{}class Fp extends te{}class Jg extends se{}class Vo extends ae{}class jo extends X{}class tl extends ge{}class cs extends Se{}class _r extends Ge{}let Mr=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Io}=Mr;class vn{constructor(a=[]){this.segments=a}prepareSegment(a,c,h,m){let b=this.segments[this.segments.length-1];return a>vn.MAX_VERTEX_ARRAY_LENGTH&&Et(`Max vertices per segment is ${vn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!b||b.vertexLength+a>vn.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==m)&&(b={vertexOffset:c.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(b.sortKey=m),this.segments.push(b)),b}get(){return this.segments}destroy(){for(let a of this.segments)for(let c in a.vaos)a.vaos[c].destroy()}static simpleSegment(a,c,h,m){return new vn([{vertexOffset:a,primitiveOffset:c,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function tc(l,a){return 256*(l=Ne(Math.floor(l),0,255))+Ne(Math.floor(a),0,255)}vn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at("SegmentVector",vn);let su=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var au={exports:{}},P0={exports:{}};P0.exports=function(l,a){var c,h,m,b,w,S,E,A;for(h=l.length-(c=3&l.length),m=a,w=3432918353,S=461845907,A=0;A<h;)E=255&l.charCodeAt(A)|(255&l.charCodeAt(++A))<<8|(255&l.charCodeAt(++A))<<16|(255&l.charCodeAt(++A))<<24,++A,m=27492+(65535&(b=5*(65535&(m=(m^=E=(65535&(E=(E=(65535&E)*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(E=0,c){case 3:E^=(255&l.charCodeAt(A+2))<<16;case 2:E^=(255&l.charCodeAt(A+1))<<8;case 1:m^=E=(65535&(E=(E=(65535&(E^=255&l.charCodeAt(A)))*w+(((E>>>16)*w&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return m^=l.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var HC=P0.exports,R0={exports:{}};R0.exports=function(l,a){for(var c,h=l.length,m=a^h,b=0;h>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(b)|(255&l.charCodeAt(++b))<<8|(255&l.charCodeAt(++b))<<16|(255&l.charCodeAt(++b))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),h-=4,++b;switch(h){case 3:m^=(255&l.charCodeAt(b+2))<<16;case 2:m^=(255&l.charCodeAt(b+1))<<8;case 1:m=1540483477*(65535&(m^=255&l.charCodeAt(b)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var nl=HC,O0=R0.exports;au.exports=nl,au.exports.murmur3=nl,au.exports.murmur2=O0;var Lp=d(au.exports);class Nd{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,c,h,m){this.ids.push(Bp(a)),this.positions.push(c,h,m)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=Bp(a),h=0,m=this.ids.length-1;for(;h<m;){let w=h+m>>1;this.ids[w]>=c?m=w:h=w+1}let b=[];for(;this.ids[h]===c;)b.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return b}static serialize(a,c){let h=new Float64Array(a.ids),m=new Uint32Array(a.positions);return Up(h,m,0,h.length-1),c&&c.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(a){let c=new Nd;return c.ids=a.ids,c.positions=a.positions,c.indexed=!0,c}}function Bp(l){let a=+l;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Lp(String(l))}function Up(l,a,c,h){for(;c<h;){let m=l[c+h>>1],b=c-1,w=h+1;for(;;){do b++;while(l[b]<m);do w--;while(l[w]>m);if(b>=w)break;lu(l,b,w),lu(a,3*b,3*w),lu(a,3*b+1,3*w+1),lu(a,3*b+2,3*w+2)}w-c<h-w?(Up(l,a,c,w),c=w+1):(Up(l,a,w+1,h),h=w)}}function lu(l,a,c){let h=l[a];l[a]=l[c],l[c]=h}at("FeaturePositionMap",Nd);class Fd{constructor(a,c){this.gl=a.gl,this.location=c}}class k0 extends Fd{constructor(a,c){super(a,c),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class LR extends Fd{constructor(a,c){super(a,c),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class BR extends Fd{constructor(a,c){super(a,c),this.current=Vn.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}let _9=new Float32Array(16);function $C(l){return[tc(255*l.r,255*l.g),tc(255*l.b,255*l.a)]}class Xg{constructor(a,c,h){this.value=a,this.uniformNames=c.map(m=>`u_${m}`),this.type=h}setUniform(a,c,h){a.set(h.constantOr(this.value))}getBinding(a,c,h){return this.type==="color"?new BR(a,c):new k0(a,c)}}class zp{constructor(a,c){this.uniformNames=c.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=a.tlbr}setUniform(a,c,h,m){let b=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;b&&a.set(b)}getBinding(a,c,h){return h.substr(0,9)==="u_pattern"?new LR(a,c):new k0(a,c)}}class nc{constructor(a,c,h,m){this.expression=a,this.type=h,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(a,c,h,m,b){let w=this.paintVertexArray.length,S=this.expression.evaluate(new di(0),c,{},m,[],b);this.paintVertexArray.resize(a),this._setPaintValue(w,a,S)}updatePaintArray(a,c,h,m){let b=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(a,c,b)}_setPaintValue(a,c,h){if(this.type==="color"){let m=$C(h);for(let b=a;b<c;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=a;m<c;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Da{constructor(a,c,h,m,b,w){this.expression=a,this.uniformNames=c.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=c.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(a,c,h,m,b){let w=this.expression.evaluate(new di(this.zoom),c,{},m,[],b),S=this.expression.evaluate(new di(this.zoom+1),c,{},m,[],b),E=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(E,a,w,S)}updatePaintArray(a,c,h,m){let b=this.expression.evaluate({zoom:this.zoom},h,m),w=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(a,c,b,w)}_setPaintValue(a,c,h,m){if(this.type==="color"){let b=$C(h),w=$C(m);for(let S=a;S<c;S++)this.paintVertexArray.emplace(S,b[0],b[1],w[0],w[1])}else{for(let b=a;b<c;b++)this.paintVertexArray.emplace(b,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,c){let h=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=Ne(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);a.set(m)}getBinding(a,c,h){return new k0(a,c)}}class cu{constructor(a,c,h,m,b,w){this.expression=a,this.type=c,this.useIntegerZoom=h,this.zoom=m,this.layerId=w,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(a,c,h){let m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(m,a,c.patterns&&c.patterns[this.layerId],h)}updatePaintArray(a,c,h,m,b){this._setPaintValues(a,c,h.patterns&&h.patterns[this.layerId],b)}_setPaintValues(a,c,h,m){if(!m||!h)return;let{min:b,mid:w,max:S}=h,E=m[b],A=m[w],M=m[S];if(E&&A&&M)for(let O=a;O<c;O++)this.zoomInPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],A.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],A.pixelRatio,M.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,su.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,su.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class UR{constructor(a,c,h){this.binders={},this._buffers=[];let m=[];for(let b in a.paint._values){if(!h(b))continue;let w=a.paint.get(b);if(!(w instanceof Gs&&Gc(w.property.specification)))continue;let S=v9(b,a.type),E=w.value,A=w.property.specification.type,M=w.property.useIntegerZoom,O=w.property.specification["property-type"],F=O==="cross-faded"||O==="cross-faded-data-driven";if(E.kind==="constant")this.binders[b]=F?new zp(E.value,S):new Xg(E.value,S,A),m.push(`/u_${b}`);else if(E.kind==="source"||F){let z=zR(b,A,"source");this.binders[b]=F?new cu(E,A,M,c,z,a.id):new nc(E,S,A,z),m.push(`/a_${b}`)}else{let z=zR(b,A,"composite");this.binders[b]=new Da(E,S,A,M,c,z),m.push(`/z_${b}`)}}this.cacheKey=m.sort().join("")}getMaxValue(a){let c=this.binders[a];return c instanceof nc||c instanceof Da?c.maxValue:0}populatePaintArrays(a,c,h,m,b){for(let w in this.binders){let S=this.binders[w];(S instanceof nc||S instanceof Da||S instanceof cu)&&S.populatePaintArray(a,c,h,m,b)}}setConstantPatternPositions(a,c){for(let h in this.binders){let m=this.binders[h];m instanceof zp&&m.setConstantPatternPositions(a,c)}}updatePaintArrays(a,c,h,m,b){let w=!1;for(let S in a){let E=c.getPositions(S);for(let A of E){let M=h.feature(A.index);for(let O in this.binders){let F=this.binders[O];if((F instanceof nc||F instanceof Da||F instanceof cu)&&F.expression.isStateDependent===!0){let z=m.paint.get(O);F.expression=z.value,F.updatePaintArray(A.start,A.end,M,a[S],b),w=!0}}}}return w}defines(){let a=[];for(let c in this.binders){let h=this.binders[c];(h instanceof Xg||h instanceof zp)&&a.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return a}getBinderAttributes(){let a=[];for(let c in this.binders){let h=this.binders[c];if(h instanceof nc||h instanceof Da)for(let m=0;m<h.paintVertexAttributes.length;m++)a.push(h.paintVertexAttributes[m].name);else if(h instanceof cu)for(let m=0;m<su.members.length;m++)a.push(su.members[m].name)}return a}getBinderUniforms(){let a=[];for(let c in this.binders){let h=this.binders[c];if(h instanceof Xg||h instanceof zp||h instanceof Da)for(let m of h.uniformNames)a.push(m)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,c){let h=[];for(let m in this.binders){let b=this.binders[m];if(b instanceof Xg||b instanceof zp||b instanceof Da){for(let w of b.uniformNames)if(c[w]){let S=b.getBinding(a,c[w],w);h.push({name:w,property:m,binding:S})}}}return h}setUniforms(a,c,h,m){for(let{name:b,property:w,binding:S}of c)this.binders[w].setUniform(S,m,h.get(w),b)}updatePaintBuffers(a){this._buffers=[];for(let c in this.binders){let h=this.binders[c];if(a&&h instanceof cu){let m=a.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof nc||h instanceof Da)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(a){for(let c in this.binders){let h=this.binders[c];(h instanceof nc||h instanceof Da||h instanceof cu)&&h.upload(a)}this.updatePaintBuffers()}destroy(){for(let a in this.binders){let c=this.binders[a];(c instanceof nc||c instanceof Da||c instanceof cu)&&c.destroy()}}}class Ld{constructor(a,c,h=()=>!0){this.programConfigurations={};for(let m of a)this.programConfigurations[m.id]=new UR(m,c,h);this.needsUpload=!1,this._featureMap=new Nd,this._bufferOffset=0}populatePaintArrays(a,c,h,m,b,w){for(let S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(a,c,m,b,w);c.id!==void 0&&this._featureMap.add(c.id,h,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,c,h,m){for(let b of h)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(a,this._featureMap,c,b,m)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(a);this.needsUpload=!1}}destroy(){for(let a in this.programConfigurations)this.programConfigurations[a].destroy()}}function v9(l,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${a}-`,"").replace(/-/g,"_")]}function zR(l,a,c){let h={color:{source:G,composite:$t},number:{source:Xe,composite:G}},m=function(b){return{"line-pattern":{source:zo,composite:zo},"fill-pattern":{source:zo,composite:zo},"fill-extrusion-pattern":{source:zo,composite:zo}}[b]}(l);return m&&m[c]||h[a][c]}at("ConstantBinder",Xg),at("CrossFadedConstantBinder",zp),at("SourceExpressionBinder",nc),at("CrossFadedCompositeBinder",cu),at("CompositeExpressionBinder",Da),at("ProgramConfiguration",UR,{omit:["_buffers"]}),at("ProgramConfigurationSet",Ld);let Ki=8192,GC=Math.pow(2,14)-1,VR=-GC-1;function Bd(l){let a=Ki/l.extent,c=l.loadGeometry();for(let h=0;h<c.length;h++){let m=c[h];for(let b=0;b<m.length;b++){let w=m[b],S=Math.round(w.x*a),E=Math.round(w.y*a);w.x=Ne(S,VR,GC),w.y=Ne(E,VR,GC),(S<w.x||S>w.x+1||E<w.y||E>w.y+1)&&Et("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Ud(l,a){return{type:l.type,id:l.id,properties:l.properties,geometry:a?Bd(l):[]}}function N0(l,a,c,h,m){l.emplaceBack(2*a+(h+1)/2,2*c+(m+1)/2)}class qC{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new qr,this.indexArray=new cs,this.segments=new vn,this.programConfigurations=new Ld(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,h){let m=this.layers[0],b=[],w=null,S=!1;m.type==="circle"&&(w=m.layout.get("circle-sort-key"),S=!w.isConstant());for(let{feature:E,id:A,index:M,sourceLayerIndex:O}of a){let F=this.layers[0]._featureFilter.needGeometry,z=Ud(E,F);if(!this.layers[0]._featureFilter.filter(new di(this.zoom),z,h))continue;let H=S?w.evaluate(z,{},h):void 0,$={id:A,properties:E.properties,type:E.type,sourceLayerIndex:O,index:M,geometry:F?z.geometry:Bd(E),patterns:{},sortKey:H};b.push($)}S&&b.sort((E,A)=>E.sortKey-A.sortKey);for(let E of b){let{geometry:A,index:M,sourceLayerIndex:O}=E,F=a[M].feature;this.addFeature(E,A,M,h),c.featureIndex.insert(F,A,M,O,this.index)}}update(a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Io),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,c,h,m){for(let b of c)for(let w of b){let S=w.x,E=w.y;if(S<0||S>=Ki||E<0||E>=Ki)continue;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),M=A.vertexLength;N0(this.layoutVertexArray,S,E,-1,-1),N0(this.layoutVertexArray,S,E,1,-1),N0(this.layoutVertexArray,S,E,1,1),N0(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,{},m)}}function jR(l,a){for(let c=0;c<l.length;c++)if(Vp(a,l[c]))return!0;for(let c=0;c<a.length;c++)if(Vp(l,a[c]))return!0;return!!WC(l,a)}function b9(l,a,c){return!!Vp(l,a)||!!ZC(a,l,c)}function HR(l,a){if(l.length===1)return GR(a,l[0]);for(let c=0;c<a.length;c++){let h=a[c];for(let m=0;m<h.length;m++)if(Vp(l,h[m]))return!0}for(let c=0;c<l.length;c++)if(GR(a,l[c]))return!0;for(let c=0;c<a.length;c++)if(WC(l,a[c]))return!0;return!1}function w9(l,a,c){if(l.length>1){if(WC(l,a))return!0;for(let h=0;h<a.length;h++)if(ZC(a[h],l,c))return!0}for(let h=0;h<l.length;h++)if(ZC(l[h],a,c))return!0;return!1}function WC(l,a){if(l.length===0||a.length===0)return!1;for(let c=0;c<l.length-1;c++){let h=l[c],m=l[c+1];for(let b=0;b<a.length-1;b++)if(x9(h,m,a[b],a[b+1]))return!0}return!1}function x9(l,a,c,h){return en(l,c,h)!==en(a,c,h)&&en(l,a,c)!==en(l,a,h)}function ZC(l,a,c){let h=c*c;if(a.length===1)return l.distSqr(a[0])<h;for(let m=1;m<a.length;m++)if($R(l,a[m-1],a[m])<h)return!0;return!1}function $R(l,a,c){let h=a.distSqr(c);if(h===0)return l.distSqr(a);let m=((l.x-a.x)*(c.x-a.x)+(l.y-a.y)*(c.y-a.y))/h;return l.distSqr(m<0?a:m>1?c:c.sub(a)._mult(m)._add(a))}function GR(l,a){let c,h,m,b=!1;for(let w=0;w<l.length;w++){c=l[w];for(let S=0,E=c.length-1;S<c.length;E=S++)h=c[S],m=c[E],h.y>a.y!=m.y>a.y&&a.x<(m.x-h.x)*(a.y-h.y)/(m.y-h.y)+h.x&&(b=!b)}return b}function Vp(l,a){let c=!1;for(let h=0,m=l.length-1;h<l.length;m=h++){let b=l[h],w=l[m];b.y>a.y!=w.y>a.y&&a.x<(w.x-b.x)*(a.y-b.y)/(w.y-b.y)+b.x&&(c=!c)}return c}function S9(l,a,c){let h=c[0],m=c[2];if(l.x<h.x&&a.x<h.x||l.x>m.x&&a.x>m.x||l.y<h.y&&a.y<h.y||l.y>m.y&&a.y>m.y)return!1;let b=en(l,a,c[0]);return b!==en(l,a,c[1])||b!==en(l,a,c[2])||b!==en(l,a,c[3])}function Qg(l,a,c){let h=a.paint.get(l).value;return h.kind==="constant"?h.value:c.programConfigurations.get(a.id).getMaxValue(l)}function F0(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function L0(l,a,c,h,m){if(!a[0]&&!a[1])return l;let b=x.convert(a)._mult(m);c==="viewport"&&b._rotate(-h);let w=[];for(let S=0;S<l.length;S++)w.push(l[S].sub(b));return w}let qR,WR;at("CircleBucket",qC,{omit:["layers"]});var C9={get paint(){return WR=WR||new _({"circle-radius":new At(De.paint_circle["circle-radius"]),"circle-color":new At(De.paint_circle["circle-color"]),"circle-blur":new At(De.paint_circle["circle-blur"]),"circle-opacity":new At(De.paint_circle["circle-opacity"]),"circle-translate":new ht(De.paint_circle["circle-translate"]),"circle-translate-anchor":new ht(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ht(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ht(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new At(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new At(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new At(De.paint_circle["circle-stroke-opacity"])})},get layout(){return qR=qR||new _({"circle-sort-key":new At(De.layout_circle["circle-sort-key"])})}},lo=1e-6,jp=typeof Float32Array<"u"?Float32Array:Array;function KC(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function ZR(l,a,c){var h=a[0],m=a[1],b=a[2],w=a[3],S=a[4],E=a[5],A=a[6],M=a[7],O=a[8],F=a[9],z=a[10],H=a[11],$=a[12],Q=a[13],oe=a[14],we=a[15],ue=c[0],ye=c[1],Te=c[2],Le=c[3];return l[0]=ue*h+ye*S+Te*O+Le*$,l[1]=ue*m+ye*E+Te*F+Le*Q,l[2]=ue*b+ye*A+Te*z+Le*oe,l[3]=ue*w+ye*M+Te*H+Le*we,l[4]=(ue=c[4])*h+(ye=c[5])*S+(Te=c[6])*O+(Le=c[7])*$,l[5]=ue*m+ye*E+Te*F+Le*Q,l[6]=ue*b+ye*A+Te*z+Le*oe,l[7]=ue*w+ye*M+Te*H+Le*we,l[8]=(ue=c[8])*h+(ye=c[9])*S+(Te=c[10])*O+(Le=c[11])*$,l[9]=ue*m+ye*E+Te*F+Le*Q,l[10]=ue*b+ye*A+Te*z+Le*oe,l[11]=ue*w+ye*M+Te*H+Le*we,l[12]=(ue=c[12])*h+(ye=c[13])*S+(Te=c[14])*O+(Le=c[15])*$,l[13]=ue*m+ye*E+Te*F+Le*Q,l[14]=ue*b+ye*A+Te*z+Le*oe,l[15]=ue*w+ye*M+Te*H+Le*we,l}Math.hypot||(Math.hypot=function(){for(var l=0,a=arguments.length;a--;)l+=arguments[a]*arguments[a];return Math.sqrt(l)});var ey,E9=ZR;function B0(l,a,c){var h=a[0],m=a[1],b=a[2],w=a[3];return l[0]=c[0]*h+c[4]*m+c[8]*b+c[12]*w,l[1]=c[1]*h+c[5]*m+c[9]*b+c[13]*w,l[2]=c[2]*h+c[6]*m+c[10]*b+c[14]*w,l[3]=c[3]*h+c[7]*m+c[11]*b+c[15]*w,l}ey=new jp(4),jp!=Float32Array&&(ey[0]=0,ey[1]=0,ey[2]=0,ey[3]=0);class I9 extends u{constructor(a){super(a,C9)}createBucket(a){return new qC(a)}queryRadius(a){let c=a;return Qg("circle-radius",this,c)+Qg("circle-stroke-width",this,c)+F0(this.paint.get("circle-translate"))}queryIntersectsFeature(a,c,h,m,b,w,S,E){let A=L0(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,S),M=this.paint.get("circle-radius").evaluate(c,h)+this.paint.get("circle-stroke-width").evaluate(c,h),O=this.paint.get("circle-pitch-alignment")==="map",F=O?A:function(H,$){return H.map(Q=>KR(Q,$))}(A,E),z=O?M*S:M;for(let H of m)for(let $ of H){let Q=O?$:KR($,E),oe=z,we=B0([],[$.x,$.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?oe*=we[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(oe*=w.cameraToCenterDistance/we[3]),b9(F,Q,oe))return!0}return!1}}function KR(l,a){let c=B0([],[l.x,l.y,0,1],a);return new x(c[0]/c[3],c[1]/c[3])}class YR extends qC{}let JR;at("HeatmapBucket",YR,{omit:["layers"]});var D9={get paint(){return JR=JR||new _({"heatmap-radius":new At(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new At(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ht(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Yg(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ht(De.paint_heatmap["heatmap-opacity"])})}};function YC(l,{width:a,height:c},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==a*c*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${a*c*h}`)}else m=new Uint8Array(a*c*h);return l.width=a,l.height=c,l.data=m,l}function XR(l,{width:a,height:c},h){if(a===l.width&&c===l.height)return;let m=YC({},{width:a,height:c},h);JC(l,m,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,a),height:Math.min(l.height,c)},h),l.width=a,l.height=c,l.data=m.data}function JC(l,a,c,h,m,b){if(m.width===0||m.height===0)return a;if(m.width>l.width||m.height>l.height||c.x>l.width-m.width||c.y>l.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>a.width||m.height>a.height||h.x>a.width-m.width||h.y>a.height-m.height)throw new RangeError("out of range destination coordinates for image copy");let w=l.data,S=a.data;if(w===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<m.height;E++){let A=((c.y+E)*l.width+c.x)*b,M=((h.y+E)*a.width+h.x)*b;for(let O=0;O<m.width*b;O++)S[M+O]=w[A+O]}return a}class ty{constructor(a,c){YC(this,a,1,c)}resize(a){XR(this,a,1)}clone(){return new ty({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,h,m,b){JC(a,c,h,m,b,1)}}class us{constructor(a,c){YC(this,a,4,c)}resize(a){XR(this,a,4)}replace(a,c){c?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new us({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,c,h,m,b){JC(a,c,h,m,b,4)}}function QR(l){let a={},c=l.resolution||256,h=l.clips?l.clips.length:1,m=l.image||new us({width:c,height:h});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let b=(w,S,E)=>{a[l.evaluationKey]=E;let A=l.expression.evaluate(a);m.data[w+S+0]=Math.floor(255*A.r/A.a),m.data[w+S+1]=Math.floor(255*A.g/A.a),m.data[w+S+2]=Math.floor(255*A.b/A.a),m.data[w+S+3]=Math.floor(255*A.a)};if(l.clips)for(let w=0,S=0;w<h;++w,S+=4*c)for(let E=0,A=0;E<c;E++,A+=4){let M=E/(c-1),{start:O,end:F}=l.clips[w];b(S,A,O*(1-M)+F*M)}else for(let w=0,S=0;w<c;w++,S+=4)b(0,S,w/(c-1));return m}at("AlphaImage",ty),at("RGBAImage",us);let XC="big-fb";class T9 extends u{createBucket(a){return new YR(a)}constructor(a){super(a,D9),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=QR({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(XC)&&this.heatmapFbos.delete(XC)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eO;var A9={get paint(){return eO=eO||new _({"hillshade-illumination-direction":new ht(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ht(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ht(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ht(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ht(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ht(De.paint_hillshade["hillshade-accent-color"])})}};class M9 extends u{constructor(a){super(a,A9)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let P9=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:R9}=P9;function tO(l,a,c=2){let h=a&&a.length,m=h?a[0]*c:l.length,b=nO(l,0,m,c,!0),w=[];if(!b||b.next===b.prev)return w;let S,E,A;if(h&&(b=function(M,O,F,z){let H=[];for(let $=0,Q=O.length;$<Q;$++){let oe=nO(M,O[$]*z,$<Q-1?O[$+1]*z:M.length,z,!1);oe===oe.next&&(oe.steiner=!0),H.push(z9(oe))}H.sort(L9);for(let $=0;$<H.length;$++)F=B9(H[$],F);return F}(l,a,b,c)),l.length>80*c){S=1/0,E=1/0;let M=-1/0,O=-1/0;for(let F=c;F<m;F+=c){let z=l[F],H=l[F+1];z<S&&(S=z),H<E&&(E=H),z>M&&(M=z),H>O&&(O=H)}A=Math.max(M-S,O-E),A=A!==0?32767/A:0}return ny(b,w,c,S,E,A,0),w}function nO(l,a,c,h,m){let b;if(m===function(w,S,E,A){let M=0;for(let O=S,F=E-A;O<E;O+=A)M+=(w[F]-w[O])*(w[O+1]+w[F+1]),F=O;return M}(l,a,c,h)>0)for(let w=a;w<c;w+=h)b=oO(w/h|0,l[w],l[w+1],b);else for(let w=c-h;w>=a;w-=h)b=oO(w/h|0,l[w],l[w+1],b);return b&&U0(b,b.next)&&(ry(b),b=b.next),b}function zd(l,a){if(!l)return l;a||(a=l);let c,h=l;do if(c=!1,h.steiner||!U0(h,h.next)&&zi(h.prev,h,h.next)!==0)h=h.next;else{if(ry(h),h=a=h.prev,h===h.next)break;c=!0}while(c||h!==a);return a}function ny(l,a,c,h,m,b,w){if(!l)return;!w&&b&&function(E,A,M,O){let F=E;do F.z===0&&(F.z=QC(F.x,F.y,A,M,O)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==E);F.prevZ.nextZ=null,F.prevZ=null,function(z){let H,$=1;do{let Q,oe=z;z=null;let we=null;for(H=0;oe;){H++;let ue=oe,ye=0;for(let Le=0;Le<$&&(ye++,ue=ue.nextZ,ue);Le++);let Te=$;for(;ye>0||Te>0&&ue;)ye!==0&&(Te===0||!ue||oe.z<=ue.z)?(Q=oe,oe=oe.nextZ,ye--):(Q=ue,ue=ue.nextZ,Te--),we?we.nextZ=Q:z=Q,Q.prevZ=we,we=Q;oe=ue}we.nextZ=null,$*=2}while(H>1)}(F)}(l,h,m,b);let S=l;for(;l.prev!==l.next;){let E=l.prev,A=l.next;if(b?k9(l,h,m,b):O9(l))a.push(E.i,l.i,A.i),ry(l),l=A.next,S=A.next;else if((l=A)===S){w?w===1?ny(l=N9(zd(l),a),a,c,h,m,b,2):w===2&&F9(l,a,c,h,m,b):ny(zd(l),a,c,h,m,b,1);break}}}function O9(l){let a=l.prev,c=l,h=l.next;if(zi(a,c,h)>=0)return!1;let m=a.x,b=c.x,w=h.x,S=a.y,E=c.y,A=h.y,M=m<b?m<w?m:w:b<w?b:w,O=S<E?S<A?S:A:E<A?E:A,F=m>b?m>w?m:w:b>w?b:w,z=S>E?S>A?S:A:E>A?E:A,H=h.next;for(;H!==a;){if(H.x>=M&&H.x<=F&&H.y>=O&&H.y<=z&&Hp(m,S,b,E,w,A,H.x,H.y)&&zi(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function k9(l,a,c,h){let m=l.prev,b=l,w=l.next;if(zi(m,b,w)>=0)return!1;let S=m.x,E=b.x,A=w.x,M=m.y,O=b.y,F=w.y,z=S<E?S<A?S:A:E<A?E:A,H=M<O?M<F?M:F:O<F?O:F,$=S>E?S>A?S:A:E>A?E:A,Q=M>O?M>F?M:F:O>F?O:F,oe=QC(z,H,a,c,h),we=QC($,Q,a,c,h),ue=l.prevZ,ye=l.nextZ;for(;ue&&ue.z>=oe&&ye&&ye.z<=we;){if(ue.x>=z&&ue.x<=$&&ue.y>=H&&ue.y<=Q&&ue!==m&&ue!==w&&Hp(S,M,E,O,A,F,ue.x,ue.y)&&zi(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,ye.x>=z&&ye.x<=$&&ye.y>=H&&ye.y<=Q&&ye!==m&&ye!==w&&Hp(S,M,E,O,A,F,ye.x,ye.y)&&zi(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;ue&&ue.z>=oe;){if(ue.x>=z&&ue.x<=$&&ue.y>=H&&ue.y<=Q&&ue!==m&&ue!==w&&Hp(S,M,E,O,A,F,ue.x,ue.y)&&zi(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;ye&&ye.z<=we;){if(ye.x>=z&&ye.x<=$&&ye.y>=H&&ye.y<=Q&&ye!==m&&ye!==w&&Hp(S,M,E,O,A,F,ye.x,ye.y)&&zi(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function N9(l,a){let c=l;do{let h=c.prev,m=c.next.next;!U0(h,m)&&iO(h,c,c.next,m)&&iy(h,m)&&iy(m,h)&&(a.push(h.i,c.i,m.i),ry(c),ry(c.next),c=l=m),c=c.next}while(c!==l);return zd(c)}function F9(l,a,c,h,m,b){let w=l;do{let S=w.next.next;for(;S!==w.prev;){if(w.i!==S.i&&V9(w,S)){let E=rO(w,S);return w=zd(w,w.next),E=zd(E,E.next),ny(w,a,c,h,m,b,0),void ny(E,a,c,h,m,b,0)}S=S.next}w=w.next}while(w!==l)}function L9(l,a){return l.x-a.x}function B9(l,a){let c=function(m,b){let w=b,S=m.x,E=m.y,A,M=-1/0;do{if(E<=w.y&&E>=w.next.y&&w.next.y!==w.y){let $=w.x+(E-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if($<=S&&$>M&&(M=$,A=w.x<w.next.x?w:w.next,$===S))return A}w=w.next}while(w!==b);if(!A)return null;let O=A,F=A.x,z=A.y,H=1/0;w=A;do{if(S>=w.x&&w.x>=F&&S!==w.x&&Hp(E<z?S:M,E,F,z,E<z?M:S,E,w.x,w.y)){let $=Math.abs(E-w.y)/(S-w.x);iy(w,m)&&($<H||$===H&&(w.x>A.x||w.x===A.x&&U9(A,w)))&&(A=w,H=$)}w=w.next}while(w!==O);return A}(l,a);if(!c)return a;let h=rO(c,l);return zd(h,h.next),zd(c,c.next)}function U9(l,a){return zi(l.prev,l,a.prev)<0&&zi(a.next,l,l.next)<0}function QC(l,a,c,h,m){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*m|0)|l<<8))|l<<4))|l<<2))|l<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-h)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function z9(l){let a=l,c=l;do(a.x<c.x||a.x===c.x&&a.y<c.y)&&(c=a),a=a.next;while(a!==l);return c}function Hp(l,a,c,h,m,b,w,S){return(m-w)*(a-S)>=(l-w)*(b-S)&&(l-w)*(h-S)>=(c-w)*(a-S)&&(c-w)*(b-S)>=(m-w)*(h-S)}function V9(l,a){return l.next.i!==a.i&&l.prev.i!==a.i&&!function(c,h){let m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==h.i&&m.next.i!==h.i&&iO(m,m.next,c,h))return!0;m=m.next}while(m!==c);return!1}(l,a)&&(iy(l,a)&&iy(a,l)&&function(c,h){let m=c,b=!1,w=(c.x+h.x)/2,S=(c.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&w<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(b=!b),m=m.next;while(m!==c);return b}(l,a)&&(zi(l.prev,l,a.prev)||zi(l,a.prev,a))||U0(l,a)&&zi(l.prev,l,l.next)>0&&zi(a.prev,a,a.next)>0)}function zi(l,a,c){return(a.y-l.y)*(c.x-a.x)-(a.x-l.x)*(c.y-a.y)}function U0(l,a){return l.x===a.x&&l.y===a.y}function iO(l,a,c,h){let m=V0(zi(l,a,c)),b=V0(zi(l,a,h)),w=V0(zi(c,h,l)),S=V0(zi(c,h,a));return m!==b&&w!==S||!(m!==0||!z0(l,c,a))||!(b!==0||!z0(l,h,a))||!(w!==0||!z0(c,l,h))||!(S!==0||!z0(c,a,h))}function z0(l,a,c){return a.x<=Math.max(l.x,c.x)&&a.x>=Math.min(l.x,c.x)&&a.y<=Math.max(l.y,c.y)&&a.y>=Math.min(l.y,c.y)}function V0(l){return l>0?1:l<0?-1:0}function iy(l,a){return zi(l.prev,l,l.next)<0?zi(l,a,l.next)>=0&&zi(l,l.prev,a)>=0:zi(l,a,l.prev)<0||zi(l,l.next,a)<0}function rO(l,a){let c=eE(l.i,l.x,l.y),h=eE(a.i,a.x,a.y),m=l.next,b=a.prev;return l.next=a,a.prev=l,c.next=m,m.prev=c,h.next=c,c.prev=h,b.next=h,h.prev=b,h}function oO(l,a,c,h){let m=eE(l,a,c);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function ry(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function eE(l,a,c){return{i:l,x:a,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function tE(l,a,c){let h=c.patternDependencies,m=!1;for(let b of a){let w=b.paint.get(`${l}-pattern`);w.isConstant()||(m=!0);let S=w.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function nE(l,a,c,h,m){let b=m.patternDependencies;for(let w of a){let S=w.paint.get(`${l}-pattern`).value;if(S.kind!=="constant"){let E=S.evaluate({zoom:h-1},c,{},m.availableImages),A=S.evaluate({zoom:h},c,{},m.availableImages),M=S.evaluate({zoom:h+1},c,{},m.availableImages);E=E&&E.name?E.name:E,A=A&&A.name?A.name:A,M=M&&M.name?M.name:M,b[E]=!0,b[A]=!0,b[M]=!0,c.patterns[w.id]={min:E,mid:A,max:M}}}return c}class iE{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qs,this.indexArray=new cs,this.indexArray2=new _r,this.programConfigurations=new Ld(a.layers,a.zoom),this.segments=new vn,this.segments2=new vn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,h){this.hasPattern=tE("fill",this.layers,c);let m=this.layers[0].layout.get("fill-sort-key"),b=!m.isConstant(),w=[];for(let{feature:S,id:E,index:A,sourceLayerIndex:M}of a){let O=this.layers[0]._featureFilter.needGeometry,F=Ud(S,O);if(!this.layers[0]._featureFilter.filter(new di(this.zoom),F,h))continue;let z=b?m.evaluate(F,{},h,c.availableImages):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:M,index:A,geometry:O?F.geometry:Bd(S),patterns:{},sortKey:z};w.push(H)}b&&w.sort((S,E)=>S.sortKey-E.sortKey);for(let S of w){let{geometry:E,index:A,sourceLayerIndex:M}=S;if(this.hasPattern){let O=nE("fill",this.layers,S,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(S,E,A,h,{});c.featureIndex.insert(a[A].feature,E,A,M,this.index)}}update(a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,h)}addFeatures(a,c,h){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,R9),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,c,h,m,b){for(let w of pp(c,500)){let S=0;for(let z of w)S+=z.length;let E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=E.vertexLength,M=[],O=[];for(let z of w){if(z.length===0)continue;z!==w[0]&&O.push(M.length/2);let H=this.segments2.prepareSegment(z.length,this.layoutVertexArray,this.indexArray2),$=H.vertexLength;this.layoutVertexArray.emplaceBack(z[0].x,z[0].y),this.indexArray2.emplaceBack($+z.length-1,$),M.push(z[0].x),M.push(z[0].y);for(let Q=1;Q<z.length;Q++)this.layoutVertexArray.emplaceBack(z[Q].x,z[Q].y),this.indexArray2.emplaceBack($+Q-1,$+Q),M.push(z[Q].x),M.push(z[Q].y);H.vertexLength+=z.length,H.primitiveLength+=z.length}let F=tO(M,O);for(let z=0;z<F.length;z+=3)this.indexArray.emplaceBack(A+F[z],A+F[z+1],A+F[z+2]);E.vertexLength+=S,E.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,b,m)}}let sO,aO;at("FillBucket",iE,{omit:["layers","patternFeatures"]});var j9={get paint(){return aO=aO||new _({"fill-antialias":new ht(De.paint_fill["fill-antialias"]),"fill-opacity":new At(De.paint_fill["fill-opacity"]),"fill-color":new At(De.paint_fill["fill-color"]),"fill-outline-color":new At(De.paint_fill["fill-outline-color"]),"fill-translate":new ht(De.paint_fill["fill-translate"]),"fill-translate-anchor":new ht(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new Op(De.paint_fill["fill-pattern"])})},get layout(){return sO=sO||new _({"fill-sort-key":new At(De.layout_fill["fill-sort-key"])})}};class H9 extends u{constructor(a){super(a,j9)}recalculate(a,c){super.recalculate(a,c);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new iE(a)}queryRadius(){return F0(this.paint.get("fill-translate"))}queryIntersectsFeature(a,c,h,m,b,w,S){return HR(L0(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,S),m)}isTileClipped(){return!0}}let $9=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),G9=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:q9}=$9;var uu={},W9=g,lO=$p;function $p(l,a,c,h,m){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=h,this._values=m,l.readFields(Z9,this,a)}function Z9(l,a,c){l==1?a.id=c.readVarint():l==2?function(h,m){for(var b=h.readVarint()+h.pos;h.pos<b;){var w=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[w]=S}}(c,a):l==3?a.type=c.readVarint():l==4&&(a._geometry=c.pos)}function K9(l){for(var a,c,h=0,m=0,b=l.length,w=b-1;m<b;w=m++)h+=((c=l[w]).x-(a=l[m]).x)*(a.y+c.y);return h}$p.types=["Unknown","Point","LineString","Polygon"],$p.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var a,c=l.readVarint()+l.pos,h=1,m=0,b=0,w=0,S=[];l.pos<c;){if(m<=0){var E=l.readVarint();h=7&E,m=E>>3}if(m--,h===1||h===2)b+=l.readSVarint(),w+=l.readSVarint(),h===1&&(a&&S.push(a),a=[]),a.push(new W9(b,w));else{if(h!==7)throw new Error("unknown command "+h);a&&a.push(a[0].clone())}}return a&&S.push(a),S},$p.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var a=l.readVarint()+l.pos,c=1,h=0,m=0,b=0,w=1/0,S=-1/0,E=1/0,A=-1/0;l.pos<a;){if(h<=0){var M=l.readVarint();c=7&M,h=M>>3}if(h--,c===1||c===2)(m+=l.readSVarint())<w&&(w=m),m>S&&(S=m),(b+=l.readSVarint())<E&&(E=b),b>A&&(A=b);else if(c!==7)throw new Error("unknown command "+c)}return[w,E,S,A]},$p.prototype.toGeoJSON=function(l,a,c){var h,m,b=this.extent*Math.pow(2,c),w=this.extent*l,S=this.extent*a,E=this.loadGeometry(),A=$p.types[this.type];function M(z){for(var H=0;H<z.length;H++){var $=z[H];z[H]=[360*($.x+w)/b-180,360/Math.PI*Math.atan(Math.exp((180-360*($.y+S)/b)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(h=0;h<E.length;h++)O[h]=E[h][0];M(E=O);break;case 2:for(h=0;h<E.length;h++)M(E[h]);break;case 3:for(E=function(z){var H=z.length;if(H<=1)return[z];for(var $,Q,oe=[],we=0;we<H;we++){var ue=K9(z[we]);ue!==0&&(Q===void 0&&(Q=ue<0),Q===ue<0?($&&oe.push($),$=[z[we]]):$.push(z[we]))}return $&&oe.push($),oe}(E),h=0;h<E.length;h++)for(m=0;m<E[h].length;m++)M(E[h][m])}E.length===1?E=E[0]:A="Multi"+A;var F={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(F.id=this.id),F};var Y9=lO,cO=uO;function uO(l,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(J9,this,a),this.length=this._features.length}function J9(l,a,c){l===15?a.version=c.readVarint():l===1?a.name=c.readString():l===5?a.extent=c.readVarint():l===2?a._features.push(c.pos):l===3?a._keys.push(c.readString()):l===4&&a._values.push(function(h){for(var m=null,b=h.readVarint()+h.pos;h.pos<b;){var w=h.readVarint()>>3;m=w===1?h.readString():w===2?h.readFloat():w===3?h.readDouble():w===4?h.readVarint64():w===5?h.readVarint():w===6?h.readSVarint():w===7?h.readBoolean():null}return m}(c))}uO.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var a=this._pbf.readVarint()+this._pbf.pos;return new Y9(this._pbf,a,this.extent,this._keys,this._values)};var X9=cO;function Q9(l,a,c){if(l===3){var h=new X9(c,c.readVarint()+c.pos);h.length&&(a[h.name]=h)}}uu.VectorTile=function(l,a){this.layers=l.readFields(Q9,{},a)},uu.VectorTileFeature=lO,uu.VectorTileLayer=cO;let eW=uu.VectorTileFeature.types,rE=Math.pow(2,13);function oy(l,a,c,h,m,b,w,S){l.emplaceBack(a,c,2*Math.floor(h*rE)+w,m*rE*2,b*rE*2,Math.round(S))}class oE{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ru,this.centroidVertexArray=new Ar,this.indexArray=new cs,this.programConfigurations=new Ld(a.layers,a.zoom),this.segments=new vn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,h){this.features=[],this.hasPattern=tE("fill-extrusion",this.layers,c);for(let{feature:m,id:b,index:w,sourceLayerIndex:S}of a){let E=this.layers[0]._featureFilter.needGeometry,A=Ud(m,E);if(!this.layers[0]._featureFilter.filter(new di(this.zoom),A,h))continue;let M={id:b,sourceLayerIndex:S,index:w,geometry:E?A.geometry:Bd(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(nE("fill-extrusion",this.layers,M,this.zoom,c)):this.addFeature(M,M.geometry,w,h,{}),c.featureIndex.insert(m,M.geometry,w,S,this.index,!0)}}addFeatures(a,c,h){for(let m of this.features){let{geometry:b}=m;this.addFeature(m,b,m.index,c,h)}}update(a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,q9),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,G9.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,c,h,m,b){for(let w of pp(c,500)){let S={x:0,y:0,vertexCount:0},E=0;for(let H of w)E+=H.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let H of w){if(H.length===0||nW(H))continue;let $=0;for(let Q=0;Q<H.length;Q++){let oe=H[Q];if(Q>=1){let we=H[Q-1];if(!tW(oe,we)){A.vertexLength+4>vn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ue=oe.sub(we)._perp()._unit(),ye=we.dist(oe);$+ye>32768&&($=0),oy(this.layoutVertexArray,oe.x,oe.y,ue.x,ue.y,0,0,$),oy(this.layoutVertexArray,oe.x,oe.y,ue.x,ue.y,0,1,$),S.x+=2*oe.x,S.y+=2*oe.y,S.vertexCount+=2,$+=ye,oy(this.layoutVertexArray,we.x,we.y,ue.x,ue.y,0,0,$),oy(this.layoutVertexArray,we.x,we.y,ue.x,ue.y,0,1,$),S.x+=2*we.x,S.y+=2*we.y,S.vertexCount+=2;let Te=A.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+E>vn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),eW[a.type]!=="Polygon")continue;let M=[],O=[],F=A.vertexLength;for(let H of w)if(H.length!==0){H!==w[0]&&O.push(M.length/2);for(let $=0;$<H.length;$++){let Q=H[$];oy(this.layoutVertexArray,Q.x,Q.y,0,0,1,1,0),S.x+=Q.x,S.y+=Q.y,S.vertexCount+=1,M.push(Q.x),M.push(Q.y)}}let z=tO(M,O);for(let H=0;H<z.length;H+=3)this.indexArray.emplaceBack(F+z[H],F+z[H+2],F+z[H+1]);A.primitiveLength+=z.length/3,A.vertexLength+=E;for(let H=0;H<S.vertexCount;H++){let $=Math.floor(S.x/S.vertexCount),Q=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack($,Q)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,b,m)}}function tW(l,a){return l.x===a.x&&(l.x<0||l.x>Ki)||l.y===a.y&&(l.y<0||l.y>Ki)}function nW(l){return l.every(a=>a.x<0)||l.every(a=>a.x>Ki)||l.every(a=>a.y<0)||l.every(a=>a.y>Ki)}let dO;at("FillExtrusionBucket",oE,{omit:["layers","features"]});var iW={get paint(){return dO=dO||new _({"fill-extrusion-opacity":new ht(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new At(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ht(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ht(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Op(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new At(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new At(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ht(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rW extends u{constructor(a){super(a,iW)}createBucket(a){return new oE(a)}queryRadius(){return F0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,c,h,m,b,w,S,E){let A=L0(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,S),M=this.paint.get("fill-extrusion-height").evaluate(c,h),O=this.paint.get("fill-extrusion-base").evaluate(c,h),F=function(H,$,Q,oe){let we=[];for(let ue of H){let ye=[ue.x,ue.y,0,1];B0(ye,ye,$),we.push(new x(ye[0]/ye[3],ye[1]/ye[3]))}return we}(A,E),z=function(H,$,Q,oe){let we=[],ue=[],ye=oe[8]*$,Te=oe[9]*$,Le=oe[10]*$,nt=oe[11]*$,It=oe[8]*Q,et=oe[9]*Q,Ye=oe[10]*Q,yt=oe[11]*Q;for(let lt of H){let ot=[],Oe=[];for(let bt of lt){let mt=bt.x,zt=bt.y,Qn=oe[0]*mt+oe[4]*zt+oe[12],Zn=oe[1]*mt+oe[5]*zt+oe[13],sr=oe[2]*mt+oe[6]*zt+oe[14],Ws=oe[3]*mt+oe[7]*zt+oe[15],Rr=sr+Le,ar=Ws+nt,co=Qn+It,uo=Zn+et,ho=sr+Ye,Fi=Ws+yt,lr=new x((Qn+ye)/ar,(Zn+Te)/ar);lr.z=Rr/ar,ot.push(lr);let Wr=new x(co/Fi,uo/Fi);Wr.z=ho/Fi,Oe.push(Wr)}we.push(ot),ue.push(Oe)}return[we,ue]}(m,O,M,E);return function(H,$,Q){let oe=1/0;HR(Q,$)&&(oe=hO(Q,$[0]));for(let we=0;we<$.length;we++){let ue=$[we],ye=H[we];for(let Te=0;Te<ue.length-1;Te++){let Le=ue[Te],nt=[Le,ue[Te+1],ye[Te+1],ye[Te],Le];jR(Q,nt)&&(oe=Math.min(oe,hO(Q,nt)))}}return oe!==1/0&&oe}(z[0],z[1],F)}}function sy(l,a){return l.x*a.x+l.y*a.y}function hO(l,a){if(l.length===1){let c=0,h=a[c++],m;for(;!m||h.equals(m);)if(m=a[c++],!m)return 1/0;for(;c<a.length;c++){let b=a[c],w=l[0],S=m.sub(h),E=b.sub(h),A=w.sub(h),M=sy(S,S),O=sy(S,E),F=sy(E,E),z=sy(A,S),H=sy(A,E),$=M*F-O*O,Q=(F*z-O*H)/$,oe=(M*H-O*z)/$,we=h.z*(1-Q-oe)+m.z*Q+b.z*oe;if(isFinite(we))return we}return 1/0}{let c=1/0;for(let h of a)c=Math.min(c,h.z);return c}}let oW=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sW}=oW,aW=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:lW}=aW,cW=uu.VectorTileFeature.types,uW=Math.cos(Math.PI/180*37.5),pO=Math.pow(2,14)/.5;class sE{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(c=>c.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Np,this.layoutVertexArray2=new ou,this.indexArray=new cs,this.programConfigurations=new Ld(a.layers,a.zoom),this.segments=new vn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(a,c,h){this.hasPattern=tE("line",this.layers,c);let m=this.layers[0].layout.get("line-sort-key"),b=!m.isConstant(),w=[];for(let{feature:S,id:E,index:A,sourceLayerIndex:M}of a){let O=this.layers[0]._featureFilter.needGeometry,F=Ud(S,O);if(!this.layers[0]._featureFilter.filter(new di(this.zoom),F,h))continue;let z=b?m.evaluate(F,{},h):void 0,H={id:E,properties:S.properties,type:S.type,sourceLayerIndex:M,index:A,geometry:O?F.geometry:Bd(S),patterns:{},sortKey:z};w.push(H)}b&&w.sort((S,E)=>S.sortKey-E.sortKey);for(let S of w){let{geometry:E,index:A,sourceLayerIndex:M}=S;if(this.hasPattern){let O=nE("line",this.layers,S,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(S,E,A,h,{});c.featureIndex.insert(a[A].feature,E,A,M,this.index)}}update(a,c,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,c,this.stateDependentLayers,h)}addFeatures(a,c,h){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,lW)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,sW),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,c,h,m,b){let w=this.layers[0].layout,S=w.get("line-join").evaluate(a,{}),E=w.get("line-cap"),A=w.get("line-miter-limit"),M=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(let O of c)this.addLine(O,a,S,E,A,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,b,m)}addLine(a,c,h,m,b,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let oe=0;oe<a.length-1;oe++)this.totalDistance+=a[oe].dist(a[oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let S=cW[c.type]==="Polygon",E=a.length;for(;E>=2&&a[E-1].equals(a[E-2]);)E--;let A=0;for(;A<E-1&&a[A].equals(a[A+1]);)A++;if(E<(S?3:2))return;h==="bevel"&&(b=1.05);let M=this.overscaling<=16?15*Ki/(512*this.overscaling):0,O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray),F,z,H,$,Q;this.e1=this.e2=-1,S&&(F=a[E-2],Q=a[A].sub(F)._unit()._perp());for(let oe=A;oe<E;oe++){if(H=oe===E-1?S?a[A+1]:void 0:a[oe+1],H&&a[oe].equals(H))continue;Q&&($=Q),F&&(z=F),F=a[oe],Q=H?H.sub(F)._unit()._perp():$,$=$||Q;let we=$.add(Q);we.x===0&&we.y===0||we._unit();let ue=$.x*Q.x+$.y*Q.y,ye=we.x*Q.x+we.y*Q.y,Te=ye!==0?1/ye:1/0,Le=2*Math.sqrt(2-2*ye),nt=ye<uW&&z&&H,It=$.x*Q.y-$.y*Q.x>0;if(nt&&oe>A){let yt=F.dist(z);if(yt>2*M){let lt=F.sub(F.sub(z)._mult(M/yt)._round());this.updateDistance(z,lt),this.addCurrentVertex(lt,$,0,0,O),z=lt}}let et=z&&H,Ye=et?h:S?"butt":m;if(et&&Ye==="round"&&(Te<w?Ye="miter":Te<=2&&(Ye="fakeround")),Ye==="miter"&&Te>b&&(Ye="bevel"),Ye==="bevel"&&(Te>2&&(Ye="flipbevel"),Te<b&&(Ye="miter")),z&&this.updateDistance(z,F),Ye==="miter")we._mult(Te),this.addCurrentVertex(F,we,0,0,O);else if(Ye==="flipbevel"){if(Te>100)we=Q.mult(-1);else{let yt=Te*$.add(Q).mag()/$.sub(Q).mag();we._perp()._mult(yt*(It?-1:1))}this.addCurrentVertex(F,we,0,0,O),this.addCurrentVertex(F,we.mult(-1),0,0,O)}else if(Ye==="bevel"||Ye==="fakeround"){let yt=-Math.sqrt(Te*Te-1),lt=It?yt:0,ot=It?0:yt;if(z&&this.addCurrentVertex(F,$,lt,ot,O),Ye==="fakeround"){let Oe=Math.round(180*Le/Math.PI/20);for(let bt=1;bt<Oe;bt++){let mt=bt/Oe;if(mt!==.5){let Qn=mt-.5;mt+=mt*Qn*(mt-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*Qn*Qn+(.848013+ue*(.215638*ue-1.06021)))}let zt=Q.sub($)._mult(mt)._add($)._unit()._mult(It?-1:1);this.addHalfVertex(F,zt.x,zt.y,!1,It,0,O)}}H&&this.addCurrentVertex(F,Q,-lt,-ot,O)}else if(Ye==="butt")this.addCurrentVertex(F,we,0,0,O);else if(Ye==="square"){let yt=z?1:-1;this.addCurrentVertex(F,we,yt,yt,O)}else Ye==="round"&&(z&&(this.addCurrentVertex(F,$,0,0,O),this.addCurrentVertex(F,$,1,1,O,!0)),H&&(this.addCurrentVertex(F,Q,-1,-1,O,!0),this.addCurrentVertex(F,Q,0,0,O)));if(nt&&oe<E-1){let yt=F.dist(H);if(yt>2*M){let lt=F.add(H.sub(F)._mult(M/yt)._round());this.updateDistance(F,lt),this.addCurrentVertex(lt,Q,0,0,O),F=lt}}}}addCurrentVertex(a,c,h,m,b,w=!1){let S=c.y*m-c.x,E=-c.y-c.x*m;this.addHalfVertex(a,c.x+c.y*h,c.y-c.x*h,w,!1,h,b),this.addHalfVertex(a,S,E,w,!0,-m,b),this.distance>pO/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,c,h,m,b,w))}addHalfVertex({x:a,y:c},h,m,b,w,S,E){let A=.5*(this.lineClips?this.scaledDistance*(pO-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(b?1:0),(c<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),w?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,c){this.distance+=a.dist(c),this.updateScaledDistance()}}let fO,mO;at("LineBucket",sE,{omit:["layers","patternFeatures"]});var gO={get paint(){return mO=mO||new _({"line-opacity":new At(De.paint_line["line-opacity"]),"line-color":new At(De.paint_line["line-color"]),"line-translate":new ht(De.paint_line["line-translate"]),"line-translate-anchor":new ht(De.paint_line["line-translate-anchor"]),"line-width":new At(De.paint_line["line-width"]),"line-gap-width":new At(De.paint_line["line-gap-width"]),"line-offset":new At(De.paint_line["line-offset"]),"line-blur":new At(De.paint_line["line-blur"]),"line-dasharray":new kp(De.paint_line["line-dasharray"]),"line-pattern":new Op(De.paint_line["line-pattern"]),"line-gradient":new Yg(De.paint_line["line-gradient"])})},get layout(){return fO=fO||new _({"line-cap":new ht(De.layout_line["line-cap"]),"line-join":new At(De.layout_line["line-join"]),"line-miter-limit":new ht(De.layout_line["line-miter-limit"]),"line-round-limit":new ht(De.layout_line["line-round-limit"]),"line-sort-key":new At(De.layout_line["line-sort-key"])})}};class dW extends At{possiblyEvaluate(a,c){return c=new di(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(a,c)}evaluate(a,c,h,m){return c=We({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(a,c,h,m)}}let j0;class hW extends u{constructor(a){super(a,gO),this.gradientVersion=0,j0||(j0=new dW(gO.paint.properties["line-width"].specification),j0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Uc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,c){super.recalculate(a,c),this.paint._values["line-floorwidth"]=j0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new sE(a)}queryRadius(a){let c=a,h=yO(Qg("line-width",this,c),Qg("line-gap-width",this,c)),m=Qg("line-offset",this,c);return h/2+Math.abs(m)+F0(this.paint.get("line-translate"))}queryIntersectsFeature(a,c,h,m,b,w,S){let E=L0(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,S),A=S/2*yO(this.paint.get("line-width").evaluate(c,h),this.paint.get("line-gap-width").evaluate(c,h)),M=this.paint.get("line-offset").evaluate(c,h);return M&&(m=function(O,F){let z=[];for(let H=0;H<O.length;H++){let $=O[H],Q=[];for(let oe=0;oe<$.length;oe++){let we=$[oe-1],ue=$[oe],ye=$[oe+1],Te=oe===0?new x(0,0):ue.sub(we)._unit()._perp(),Le=oe===$.length-1?new x(0,0):ye.sub(ue)._unit()._perp(),nt=Te._add(Le)._unit(),It=nt.x*Le.x+nt.y*Le.y;It!==0&&nt._mult(1/It),Q.push(nt._mult(F)._add(ue))}z.push(Q)}return z}(m,M*S)),function(O,F,z){for(let H=0;H<F.length;H++){let $=F[H];if(O.length>=3){for(let Q=0;Q<$.length;Q++)if(Vp(O,$[Q]))return!0}if(w9(O,$,z))return!0}return!1}(E,m,A)}isTileClipped(){return!0}}function yO(l,a){return a>0?a+2*l:l}let pW=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fW=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let mW=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let _O=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gW=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yW(l,a,c){return l.sections.forEach(h=>{h.text=function(m,b,w){let S=b.layout.get("text-transform").evaluate(w,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Eo.applyArabicShaping&&(m=Eo.applyArabicShaping(m)),m}(h.text,a,c)}),l}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let ay={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var nr=24,vO=Wn,bO=function(l,a,c,h,m){var b,w,S=8*m-h-1,E=(1<<S)-1,A=E>>1,M=-7,O=c?m-1:0,F=c?-1:1,z=l[a+O];for(O+=F,b=z&(1<<-M)-1,z>>=-M,M+=S;M>0;b=256*b+l[a+O],O+=F,M-=8);for(w=b&(1<<-M)-1,b>>=-M,M+=h;M>0;w=256*w+l[a+O],O+=F,M-=8);if(b===0)b=1-A;else{if(b===E)return w?NaN:1/0*(z?-1:1);w+=Math.pow(2,h),b-=A}return(z?-1:1)*w*Math.pow(2,b-h)},wO=function(l,a,c,h,m,b){var w,S,E,A=8*b-m-1,M=(1<<A)-1,O=M>>1,F=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,z=h?0:b-1,H=h?1:-1,$=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(S=isNaN(a)?1:0,w=M):(w=Math.floor(Math.log(a)/Math.LN2),a*(E=Math.pow(2,-w))<1&&(w--,E*=2),(a+=w+O>=1?F/E:F*Math.pow(2,1-O))*E>=2&&(w++,E/=2),w+O>=M?(S=0,w=M):w+O>=1?(S=(a*E-1)*Math.pow(2,m),w+=O):(S=a*Math.pow(2,O-1)*Math.pow(2,m),w=0));m>=8;l[c+z]=255&S,z+=H,S/=256,m-=8);for(w=w<<m|S,A+=m;A>0;l[c+z]=255&w,z+=H,w/=256,A-=8);l[c+z-H]|=128*$};function Wn(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Wn.Varint=0,Wn.Fixed64=1,Wn.Bytes=2,Wn.Fixed32=5;var aE=4294967296,xO=1/aE,SO=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ic(l){return l.type===Wn.Bytes?l.readVarint()+l.pos:l.pos+1}function Gp(l,a,c){return c?4294967296*a+(l>>>0):4294967296*(a>>>0)+(l>>>0)}function CO(l,a,c){var h=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));c.realloc(h);for(var m=c.pos-1;m>=l;m--)c.buf[m+h]=c.buf[m]}function _W(l,a){for(var c=0;c<l.length;c++)a.writeVarint(l[c])}function vW(l,a){for(var c=0;c<l.length;c++)a.writeSVarint(l[c])}function bW(l,a){for(var c=0;c<l.length;c++)a.writeFloat(l[c])}function wW(l,a){for(var c=0;c<l.length;c++)a.writeDouble(l[c])}function xW(l,a){for(var c=0;c<l.length;c++)a.writeBoolean(l[c])}function SW(l,a){for(var c=0;c<l.length;c++)a.writeFixed32(l[c])}function CW(l,a){for(var c=0;c<l.length;c++)a.writeSFixed32(l[c])}function EW(l,a){for(var c=0;c<l.length;c++)a.writeFixed64(l[c])}function IW(l,a){for(var c=0;c<l.length;c++)a.writeSFixed64(l[c])}function H0(l,a){return(l[a]|l[a+1]<<8|l[a+2]<<16)+16777216*l[a+3]}function qp(l,a,c){l[c]=a,l[c+1]=a>>>8,l[c+2]=a>>>16,l[c+3]=a>>>24}function EO(l,a){return(l[a]|l[a+1]<<8|l[a+2]<<16)+(l[a+3]<<24)}Wn.prototype={destroy:function(){this.buf=null},readFields:function(l,a,c){for(c=c||this.length;this.pos<c;){var h=this.readVarint(),m=h>>3,b=this.pos;this.type=7&h,l(m,a,this),this.pos===b&&this.skip(h)}return a},readMessage:function(l,a){return this.readFields(l,a,this.readVarint()+this.pos)},readFixed32:function(){var l=H0(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=EO(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=H0(this.buf,this.pos)+H0(this.buf,this.pos+4)*aE;return this.pos+=8,l},readSFixed64:function(){var l=H0(this.buf,this.pos)+EO(this.buf,this.pos+4)*aE;return this.pos+=8,l},readFloat:function(){var l=bO(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=bO(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var a,c,h=this.buf;return a=127&(c=h[this.pos++]),c<128?a:(a|=(127&(c=h[this.pos++]))<<7,c<128?a:(a|=(127&(c=h[this.pos++]))<<14,c<128?a:(a|=(127&(c=h[this.pos++]))<<21,c<128?a:function(m,b,w){var S,E,A=w.buf;if(S=(112&(E=A[w.pos++]))>>4,E<128||(S|=(127&(E=A[w.pos++]))<<3,E<128)||(S|=(127&(E=A[w.pos++]))<<10,E<128)||(S|=(127&(E=A[w.pos++]))<<17,E<128)||(S|=(127&(E=A[w.pos++]))<<24,E<128)||(S|=(1&(E=A[w.pos++]))<<31,E<128))return Gp(m,S,b);throw new Error("Expected varint not more than 10 bytes")}(a|=(15&(c=h[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,a=this.pos;return this.pos=l,l-a>=12&&SO?function(c,h,m){return SO.decode(c.subarray(h,m))}(this.buf,a,l):function(c,h,m){for(var b="",w=h;w<m;){var S,E,A,M=c[w],O=null,F=M>239?4:M>223?3:M>191?2:1;if(w+F>m)break;F===1?M<128&&(O=M):F===2?(192&(S=c[w+1]))==128&&(O=(31&M)<<6|63&S)<=127&&(O=null):F===3?(E=c[w+2],(192&(S=c[w+1]))==128&&(192&E)==128&&((O=(15&M)<<12|(63&S)<<6|63&E)<=2047||O>=55296&&O<=57343)&&(O=null)):F===4&&(E=c[w+2],A=c[w+3],(192&(S=c[w+1]))==128&&(192&E)==128&&(192&A)==128&&((O=(15&M)<<18|(63&S)<<12|(63&E)<<6|63&A)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,F=1):O>65535&&(O-=65536,b+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),b+=String.fromCharCode(O),w+=F}return b}(this.buf,a,l)},readBytes:function(){var l=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,l);return this.pos=l,a},readPackedVarint:function(l,a){if(this.type!==Wn.Bytes)return l.push(this.readVarint(a));var c=ic(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(a));return l},readPackedSVarint:function(l){if(this.type!==Wn.Bytes)return l.push(this.readSVarint());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Wn.Bytes)return l.push(this.readBoolean());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Wn.Bytes)return l.push(this.readFloat());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Wn.Bytes)return l.push(this.readDouble());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Wn.Bytes)return l.push(this.readFixed32());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Wn.Bytes)return l.push(this.readSFixed32());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Wn.Bytes)return l.push(this.readFixed64());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Wn.Bytes)return l.push(this.readSFixed64());var a=ic(this);for(l=l||[];this.pos<a;)l.push(this.readSFixed64());return l},skip:function(l){var a=7&l;if(a===Wn.Varint)for(;this.buf[this.pos++]>127;);else if(a===Wn.Bytes)this.pos=this.readVarint()+this.pos;else if(a===Wn.Fixed32)this.pos+=4;else{if(a!==Wn.Fixed64)throw new Error("Unimplemented type: "+a);this.pos+=8}},writeTag:function(l,a){this.writeVarint(l<<3|a)},realloc:function(l){for(var a=this.length||16;a<this.pos+l;)a*=2;if(a!==this.length){var c=new Uint8Array(a);c.set(this.buf),this.buf=c,this.length=a}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),qp(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),qp(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),qp(this.buf,-1&l,this.pos),qp(this.buf,Math.floor(l*xO),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),qp(this.buf,-1&l,this.pos),qp(this.buf,Math.floor(l*xO),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(a,c){var h,m;if(a>=0?(h=a%4294967296|0,m=a/4294967296|0):(m=~(-a/4294967296),4294967295^(h=~(-a%4294967296))?h=h+1|0:(h=0,m=m+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(b,w,S){S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,b>>>=7,S.buf[S.pos++]=127&b|128,S.buf[S.pos]=127&(b>>>=7)}(h,0,c),function(b,w){var S=(7&b)<<4;w.buf[w.pos++]|=S|((b>>>=3)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b|((b>>>=7)?128:0),b&&(w.buf[w.pos++]=127&b)))))}(m,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var a=this.pos;this.pos=function(h,m,b){for(var w,S,E=0;E<m.length;E++){if((w=m.charCodeAt(E))>55295&&w<57344){if(!S){w>56319||E+1===m.length?(h[b++]=239,h[b++]=191,h[b++]=189):S=w;continue}if(w<56320){h[b++]=239,h[b++]=191,h[b++]=189,S=w;continue}w=S-55296<<10|w-56320|65536,S=null}else S&&(h[b++]=239,h[b++]=191,h[b++]=189,S=null);w<128?h[b++]=w:(w<2048?h[b++]=w>>6|192:(w<65536?h[b++]=w>>12|224:(h[b++]=w>>18|240,h[b++]=w>>12&63|128),h[b++]=w>>6&63|128),h[b++]=63&w|128)}return b}(this.buf,l,this.pos);var c=this.pos-a;c>=128&&CO(a,c,this),this.pos=a-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),wO(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),wO(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var a=l.length;this.writeVarint(a),this.realloc(a);for(var c=0;c<a;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,a){this.pos++;var c=this.pos;l(a,this);var h=this.pos-c;h>=128&&CO(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeMessage:function(l,a,c){this.writeTag(l,Wn.Bytes),this.writeRawMessage(a,c)},writePackedVarint:function(l,a){a.length&&this.writeMessage(l,_W,a)},writePackedSVarint:function(l,a){a.length&&this.writeMessage(l,vW,a)},writePackedBoolean:function(l,a){a.length&&this.writeMessage(l,xW,a)},writePackedFloat:function(l,a){a.length&&this.writeMessage(l,bW,a)},writePackedDouble:function(l,a){a.length&&this.writeMessage(l,wW,a)},writePackedFixed32:function(l,a){a.length&&this.writeMessage(l,SW,a)},writePackedSFixed32:function(l,a){a.length&&this.writeMessage(l,CW,a)},writePackedFixed64:function(l,a){a.length&&this.writeMessage(l,EW,a)},writePackedSFixed64:function(l,a){a.length&&this.writeMessage(l,IW,a)},writeBytesField:function(l,a){this.writeTag(l,Wn.Bytes),this.writeBytes(a)},writeFixed32Field:function(l,a){this.writeTag(l,Wn.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(l,a){this.writeTag(l,Wn.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(l,a){this.writeTag(l,Wn.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(l,a){this.writeTag(l,Wn.Fixed64),this.writeSFixed64(a)},writeVarintField:function(l,a){this.writeTag(l,Wn.Varint),this.writeVarint(a)},writeSVarintField:function(l,a){this.writeTag(l,Wn.Varint),this.writeSVarint(a)},writeStringField:function(l,a){this.writeTag(l,Wn.Bytes),this.writeString(a)},writeFloatField:function(l,a){this.writeTag(l,Wn.Fixed32),this.writeFloat(a)},writeDoubleField:function(l,a){this.writeTag(l,Wn.Fixed64),this.writeDouble(a)},writeBooleanField:function(l,a){this.writeVarintField(l,!!a)}};var lE=d(vO);let cE=3;function DW(l,a,c){l===1&&c.readMessage(TW,a)}function TW(l,a,c){if(l===3){let{id:h,bitmap:m,width:b,height:w,left:S,top:E,advance:A}=c.readMessage(AW,{});a.push({id:h,bitmap:new ty({width:b+2*cE,height:w+2*cE},m),metrics:{width:b,height:w,left:S,top:E,advance:A}})}}function AW(l,a,c){l===1?a.id=c.readVarint():l===2?a.bitmap=c.readBytes():l===3?a.width=c.readVarint():l===4?a.height=c.readVarint():l===5?a.left=c.readSVarint():l===6?a.top=c.readSVarint():l===7&&(a.advance=c.readVarint())}let IO=cE;function DO(l){let a=0,c=0;for(let w of l)a+=w.w*w.h,c=Math.max(c,w.w);l.sort((w,S)=>S.h-w.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),c),h:1/0}],m=0,b=0;for(let w of l)for(let S=h.length-1;S>=0;S--){let E=h[S];if(!(w.w>E.w||w.h>E.h)){if(w.x=E.x,w.y=E.y,b=Math.max(b,w.y+w.h),m=Math.max(m,w.x+w.w),w.w===E.w&&w.h===E.h){let A=h.pop();S<h.length&&(h[S]=A)}else w.h===E.h?(E.x+=w.w,E.w-=w.w):w.w===E.w?(E.y+=w.h,E.h-=w.h):(h.push({x:E.x+w.w,y:E.y,w:E.w-w.w,h:w.h}),E.y+=w.h,E.h-=w.h);break}}return{w:m,h:b,fill:a/(m*b)||0}}let Do=1;class uE{constructor(a,{pixelRatio:c,version:h,stretchX:m,stretchY:b,content:w,textFitWidth:S,textFitHeight:E}){this.paddedRect=a,this.pixelRatio=c,this.stretchX=m,this.stretchY=b,this.content=w,this.version=h,this.textFitWidth=S,this.textFitHeight=E}get tl(){return[this.paddedRect.x+Do,this.paddedRect.y+Do]}get br(){return[this.paddedRect.x+this.paddedRect.w-Do,this.paddedRect.y+this.paddedRect.h-Do]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Do)/this.pixelRatio,(this.paddedRect.h-2*Do)/this.pixelRatio]}}class TO{constructor(a,c){let h={},m={};this.haveRenderCallbacks=[];let b=[];this.addImages(a,h,b),this.addImages(c,m,b);let{w,h:S}=DO(b),E=new us({width:w||1,height:S||1});for(let A in a){let M=a[A],O=h[A].paddedRect;us.copy(M.data,E,{x:0,y:0},{x:O.x+Do,y:O.y+Do},M.data)}for(let A in c){let M=c[A],O=m[A].paddedRect,F=O.x+Do,z=O.y+Do,H=M.data.width,$=M.data.height;us.copy(M.data,E,{x:0,y:0},{x:F,y:z},M.data),us.copy(M.data,E,{x:0,y:$-1},{x:F,y:z-1},{width:H,height:1}),us.copy(M.data,E,{x:0,y:0},{x:F,y:z+$},{width:H,height:1}),us.copy(M.data,E,{x:H-1,y:0},{x:F-1,y:z},{width:1,height:$}),us.copy(M.data,E,{x:0,y:0},{x:F+H,y:z},{width:1,height:$})}this.image=E,this.iconPositions=h,this.patternPositions=m}addImages(a,c,h){for(let m in a){let b=a[m],w={x:0,y:0,w:b.data.width+2*Do,h:b.data.height+2*Do};h.push(w),c[m]=new uE(w,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(a,c){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in a.updatedImages)this.patchUpdatedImage(this.iconPositions[h],a.getImage(h),c),this.patchUpdatedImage(this.patternPositions[h],a.getImage(h),c)}patchUpdatedImage(a,c,h){if(!a||!c||a.version===c.version)return;a.version=c.version;let[m,b]=a.tl;h.update(c.data,void 0,{x:m,y:b})}}var du;at("ImagePosition",uE),at("ImageAtlas",TO),r.ah=void 0,(du=r.ah||(r.ah={}))[du.none=0]="none",du[du.horizontal=1]="horizontal",du[du.vertical=2]="vertical",du[du.horizontalOnly=3]="horizontalOnly";let ly=-17;class cy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,c){let h=new cy;return h.scale=a||1,h.fontStack=c,h}static forImage(a){let c=new cy;return c.imageName=a,c}}class Wp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,c){let h=new Wp;for(let m=0;m<a.sections.length;m++){let b=a.sections[m];b.image?h.addImageSection(b):h.addTextSection(b,c)}return h}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let c="";for(let h=0;h<a.length;h++){let m=a.charCodeAt(h+1)||null,b=a.charCodeAt(h-1)||null;c+=m&&A0(m)&&!ay[a[h+1]]||b&&A0(b)&&!ay[a[h-1]]||!ay[a[h]]?a[h]:ay[a[h]]}return c}(this.text)}trim(){let a=0;for(let h=0;h<this.text.length&&G0[this.text.charCodeAt(h)];h++)a++;let c=this.text.length;for(let h=this.text.length-1;h>=0&&h>=a&&G0[this.text.charCodeAt(h)];h--)c--;this.text=this.text.substring(a,c),this.sectionIndex=this.sectionIndex.slice(a,c)}substring(a,c){let h=new Wp;return h.text=this.text.substring(a,c),h.sectionIndex=this.sectionIndex.slice(a,c),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,c)=>Math.max(a,this.sections[c].scale),0)}addTextSection(a,c){this.text+=a.text,this.sections.push(cy.forText(a.scale,a.fontStack||c));let h=this.sections.length-1;for(let m=0;m<a.text.length;++m)this.sectionIndex.push(h)}addImageSection(a){let c=a.image?a.image.name:"";if(c.length===0)return void Et("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(cy.forImage(c)),this.sectionIndex.push(this.sections.length-1)):Et("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function $0(l,a,c,h,m,b,w,S,E,A,M,O,F,z,H){let $=Wp.fromFeature(l,m),Q;O===r.ah.vertical&&$.verticalizePunctuation();let{processBidirectionalText:oe,processStyledBidirectionalText:we}=Eo;if(oe&&$.sections.length===1){Q=[];let Te=oe($.toString(),dE($,A,b,a,h,z));for(let Le of Te){let nt=new Wp;nt.text=Le,nt.sections=$.sections;for(let It=0;It<Le.length;It++)nt.sectionIndex.push(0);Q.push(nt)}}else if(we){Q=[];let Te=we($.text,$.sectionIndex,dE($,A,b,a,h,z));for(let Le of Te){let nt=new Wp;nt.text=Le[0],nt.sectionIndex=Le[1],nt.sections=$.sections,Q.push(nt)}}else Q=function(Te,Le){let nt=[],It=Te.text,et=0;for(let Ye of Le)nt.push(Te.substring(et,Ye)),et=Ye;return et<It.length&&nt.push(Te.substring(et,It.length)),nt}($,dE($,A,b,a,h,z));let ue=[],ye={positionedLines:ue,text:$.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Te,Le,nt,It,et,Ye,yt,lt,ot,Oe,bt,mt){let zt=0,Qn=ly,Zn=0,sr=0,Ws=lt==="right"?1:lt==="left"?0:.5,Rr=0;for(let Fi of et){Fi.trim();let lr=Fi.getMaxScale(),Wr=(lr-1)*nr,Or={positionedGlyphs:[],lineOffset:0};Te.positionedLines[Rr]=Or;let po=Or.positionedGlyphs,kr=0;if(!Fi.length()){Qn+=Ye,++Rr;continue}for(let To=0;To<Fi.length();To++){let An=Fi.getSection(To),li=Fi.getSectionIndex(To),mi=Fi.getCharCode(To),Ho=0,Mi=null,Jp=null,rl=null,ol=nr,Zs=!(ot===r.ah.horizontal||!bt&&!Zg(mi)||bt&&(G0[mi]||(ar=mi,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(ar)))));if(An.imageName){let ps=It[An.imageName];if(!ps)continue;rl=An.imageName,Te.iconsInText=Te.iconsInText||!0,Jp=ps.paddedRect;let vr=ps.displaySize;An.scale=An.scale*nr/mt,Mi={width:vr[0],height:vr[1],left:Do,top:-IO,advance:Zs?vr[1]:vr[0]},Ho=Wr+(nr-vr[1]*An.scale),ol=Mi.advance;let rc=Zs?vr[0]*An.scale-nr*lr:vr[1]*An.scale-nr*lr;rc>0&&rc>kr&&(kr=rc)}else{let ps=nt[An.fontStack],vr=ps&&ps[mi];if(vr&&vr.rect)Jp=vr.rect,Mi=vr.metrics;else{let rc=Le[An.fontStack],my=rc&&rc[mi];if(!my)continue;Mi=my.metrics}Ho=(lr-An.scale)*nr}Zs?(Te.verticalizable=!0,po.push({glyph:mi,imageName:rl,x:zt,y:Qn+Ho,vertical:Zs,scale:An.scale,fontStack:An.fontStack,sectionIndex:li,metrics:Mi,rect:Jp}),zt+=ol*An.scale+Oe):(po.push({glyph:mi,imageName:rl,x:zt,y:Qn+Ho,vertical:Zs,scale:An.scale,fontStack:An.fontStack,sectionIndex:li,metrics:Mi,rect:Jp}),zt+=Mi.advance*An.scale+Oe)}po.length!==0&&(Zn=Math.max(zt-Oe,Zn),OW(po,0,po.length-1,Ws,kr)),zt=0;let hs=Ye*lr+kr;Or.lineOffset=Math.max(kr,Wr),Qn+=hs,sr=Math.max(hs,sr),++Rr}var ar;let co=Qn-ly,{horizontalAlign:uo,verticalAlign:ho}=hE(yt);(function(Fi,lr,Wr,Or,po,kr,hs,To,An){let li=(lr-Wr)*po,mi=0;mi=kr!==hs?-To*Or-ly:(-Or*An+.5)*hs;for(let Ho of Fi)for(let Mi of Ho.positionedGlyphs)Mi.x+=li,Mi.y+=mi})(Te.positionedLines,Ws,uo,ho,Zn,sr,Ye,co,et.length),Te.top+=-ho*co,Te.bottom=Te.top+co,Te.left+=-uo*Zn,Te.right=Te.left+Zn}(ye,a,c,h,Q,w,S,E,O,A,F,H),!function(Te){for(let Le of Te)if(Le.positionedGlyphs.length!==0)return!1;return!0}(ue)&&ye}let G0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},MW={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},PW={40:!0};function AO(l,a,c,h,m,b){if(a.imageName){let w=h[a.imageName];return w?w.displaySize[0]*a.scale*nr/b+m:0}{let w=c[a.fontStack],S=w&&w[l];return S?S.metrics.advance*a.scale+m:0}}function MO(l,a,c,h){let m=Math.pow(l-a,2);return h?l<a?m/2:2*m:m+Math.abs(c)*c}function RW(l,a,c){let h=0;return l===10&&(h-=1e4),c&&(h+=150),l!==40&&l!==65288||(h+=50),a!==41&&a!==65289||(h+=50),h}function PO(l,a,c,h,m,b){let w=null,S=MO(a,c,m,b);for(let E of h){let A=MO(a-E.x,c,m,b)+E.badness;A<=S&&(w=E,S=A)}return{index:l,x:a,priorBreak:w,badness:S}}function RO(l){return l?RO(l.priorBreak).concat(l.index):[]}function dE(l,a,c,h,m,b){if(!l)return[];let w=[],S=function(O,F,z,H,$,Q){let oe=0;for(let we=0;we<O.length();we++){let ue=O.getSection(we);oe+=AO(O.getCharCode(we),ue,H,$,F,Q)}return oe/Math.max(1,Math.ceil(oe/z))}(l,a,c,h,m,b),E=l.text.indexOf("\u200B")>=0,A=0;for(let O=0;O<l.length();O++){let F=l.getSection(O),z=l.getCharCode(O);if(G0[z]||(A+=AO(z,F,h,m,a,b)),O<l.length()-1){let H=!((M=z)<11904)&&(!!_n["CJK Compatibility Forms"](M)||!!_n["CJK Compatibility"](M)||!!_n["CJK Strokes"](M)||!!_n["CJK Symbols and Punctuation"](M)||!!_n["Enclosed CJK Letters and Months"](M)||!!_n["Halfwidth and Fullwidth Forms"](M)||!!_n["Ideographic Description Characters"](M)||!!_n["Vertical Forms"](M)||T0.test(String.fromCodePoint(M)));(MW[z]||H||F.imageName||O!==l.length()-2&&PW[l.getCharCode(O+1)])&&w.push(PO(O+1,A,S,w,RW(z,l.getCharCode(O+1),H&&E),!1))}}var M;return RO(PO(l.length(),A,S,w,0,!0))}function hE(l){let a=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:a,verticalAlign:c}}function OW(l,a,c,h,m){if(!h&&!m)return;let b=l[c],w=(l[c].x+b.metrics.advance*b.scale)*h;for(let S=a;S<=c;S++)l[S].x-=w,l[S].y+=m}function kW(l,a,c){let{horizontalAlign:h,verticalAlign:m}=hE(c),b=a[0]-l.displaySize[0]*h,w=a[1]-l.displaySize[1]*m;return{image:l,top:w,bottom:w+l.displaySize[1],left:b,right:b+l.displaySize[0]}}function OO(l){var a,c;let h=l.left,m=l.top,b=l.right-h,w=l.bottom-m,S=(a=l.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",E=(c=l.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",A=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(E==="proportional"){if(S==="stretchOnly"&&b/w<A||S==="proportional"){let M=Math.ceil(w*A);h*=M/b,b=M}}else if(S==="proportional"&&E==="stretchOnly"&&A!==0&&b/w>A){let M=Math.ceil(b/A);m*=M/w,w=M}return{x1:h,y1:m,x2:h+b,y2:m+w}}function kO(l,a,c,h,m,b){let w=l.image,S;if(w.content){let Q=w.content,oe=w.pixelRatio||1;S=[Q[0]/oe,Q[1]/oe,w.displaySize[0]-Q[2]/oe,w.displaySize[1]-Q[3]/oe]}let E=a.left*b,A=a.right*b,M,O,F,z;c==="width"||c==="both"?(z=m[0]+E-h[3],O=m[0]+A+h[1]):(z=m[0]+(E+A-w.displaySize[0])/2,O=z+w.displaySize[0]);let H=a.top*b,$=a.bottom*b;return c==="height"||c==="both"?(M=m[1]+H-h[0],F=m[1]+$+h[2]):(M=m[1]+(H+$-w.displaySize[1])/2,F=M+w.displaySize[1]),{image:w,top:M,right:O,bottom:F,left:z,collisionPadding:S}}let uy=255,il=128,hu=uy*il;function NO(l,a){let{expression:c}=a;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new di(l+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:m}=c,b=0;for(;b<h.length&&h[b]<=l;)b++;b=Math.max(0,b-1);let w=b;for(;w<h.length&&h[w]<l+1;)w++;w=Math.min(h.length-1,w);let S=h[b],E=h[w];return c.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:E,minSize:c.evaluate(new di(S)),maxSize:c.evaluate(new di(E)),interpolationType:m}}}function pE(l,a,c){let h="never",m=l.get(a);return m?h=m:l.get(c)&&(h="always"),h}let NW=uu.VectorTileFeature.types,FW=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function q0(l,a,c,h,m,b,w,S,E,A,M,O,F){let z=S?Math.min(hu,Math.round(S[0])):0,H=S?Math.min(hu,Math.round(S[1])):0;l.emplaceBack(a,c,Math.round(32*h),Math.round(32*m),b,w,(z<<1)+(E?1:0),H,16*A,16*M,256*O,256*F)}function fE(l,a,c){l.emplaceBack(a.x,a.y,c),l.emplaceBack(a.x,a.y,c),l.emplaceBack(a.x,a.y,c),l.emplaceBack(a.x,a.y,c)}function LW(l){for(let a of l.sections)if(jC(a.text))return!0;return!1}class mE{constructor(a){this.layoutVertexArray=new Fp,this.indexArray=new cs,this.programConfigurations=a,this.segments=new vn,this.dynamicLayoutVertexArray=new Jg,this.opacityVertexArray=new Vo,this.hasVisibleVertices=!1,this.placedSymbolArray=new hi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,c,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pW.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,fW.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,FW,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}at("SymbolBuffers",mE);class gE{constructor(a,c,h){this.layoutVertexArray=new a,this.layoutAttributes=c,this.indexArray=new h,this.segments=new vn,this.collisionVertexArray=new tl}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,mW.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}at("CollisionBuffers",gE);class Zp{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(w=>w.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=KC([]),this.placementViewportMatrix=KC([]);let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=NO(this.zoom,c["text-size"]),this.iconSizeData=NO(this.zoom,c["icon-size"]);let h=this.layers[0].layout,m=h.get("symbol-sort-key"),b=h.get("symbol-z-order");this.canOverlap=pE(h,"text-overlap","text-allow-overlap")!=="never"||pE(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(w=>r.ah[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=a.sourceID}createArrays(){this.text=new mE(new Ld(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new mE(new Ld(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new pi,this.lineVertexArray=new Tr,this.symbolInstances=new mn,this.textAnchorOffsets=new fi}calculateGlyphDependencies(a,c,h,m,b){for(let w=0;w<a.length;w++)if(c[a.charCodeAt(w)]=!0,(h||m)&&b){let S=ay[a.charAt(w)];S&&(c[S.charCodeAt(0)]=!0)}}populate(a,c,h){let m=this.layers[0],b=m.layout,w=b.get("text-font"),S=b.get("text-field"),E=b.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof wo&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),M=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,O=b.get("symbol-sort-key");if(this.features=[],!A&&!M)return;let F=c.iconDependencies,z=c.glyphDependencies,H=c.availableImages,$=new di(this.zoom);for(let{feature:Q,id:oe,index:we,sourceLayerIndex:ue}of a){let ye=m._featureFilter.needGeometry,Te=Ud(Q,ye);if(!m._featureFilter.filter($,Te,h))continue;let Le,nt;if(ye||(Te.geometry=Bd(Q)),A){let et=m.getValueAndResolveTokens("text-field",Te,h,H),Ye=wo.factory(et),yt=this.hasRTLText=this.hasRTLText||LW(Ye);(!yt||Eo.getRTLTextPluginStatus()==="unavailable"||yt&&Eo.isParsed())&&(Le=yW(Ye,m,Te))}if(M){let et=m.getValueAndResolveTokens("icon-image",Te,h,H);nt=et instanceof So?et:So.fromString(et)}if(!Le&&!nt)continue;let It=this.sortFeaturesByKey?O.evaluate(Te,{},h):void 0;if(this.features.push({id:oe,text:Le,icon:nt,index:we,sourceLayerIndex:ue,geometry:Te.geometry,properties:Q.properties,type:NW[Q.type],sortKey:It}),nt&&(F[nt.name]=!0),Le){let et=w.evaluate(Te,{},h).join(","),Ye=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.ah.vertical)>=0;for(let yt of Le.sections)if(yt.image)F[yt.image.name]=!0;else{let lt=qg(Le.toString()),ot=yt.fontStack||et,Oe=z[ot]=z[ot]||{};this.calculateGlyphDependencies(yt.text,Oe,Ye,this.allowVerticalPlacement,lt)}}}b.get("symbol-placement")==="line"&&(this.features=function(Q){let oe={},we={},ue=[],ye=0;function Te(et){ue.push(Q[et]),ye++}function Le(et,Ye,yt){let lt=we[et];return delete we[et],we[Ye]=lt,ue[lt].geometry[0].pop(),ue[lt].geometry[0]=ue[lt].geometry[0].concat(yt[0]),lt}function nt(et,Ye,yt){let lt=oe[Ye];return delete oe[Ye],oe[et]=lt,ue[lt].geometry[0].shift(),ue[lt].geometry[0]=yt[0].concat(ue[lt].geometry[0]),lt}function It(et,Ye,yt){let lt=yt?Ye[0][Ye[0].length-1]:Ye[0][0];return`${et}:${lt.x}:${lt.y}`}for(let et=0;et<Q.length;et++){let Ye=Q[et],yt=Ye.geometry,lt=Ye.text?Ye.text.toString():null;if(!lt){Te(et);continue}let ot=It(lt,yt),Oe=It(lt,yt,!0);if(ot in we&&Oe in oe&&we[ot]!==oe[Oe]){let bt=nt(ot,Oe,yt),mt=Le(ot,Oe,ue[bt].geometry);delete oe[ot],delete we[Oe],we[It(lt,ue[mt].geometry,!0)]=mt,ue[bt].geometry=null}else ot in we?Le(ot,Oe,yt):Oe in oe?nt(ot,Oe,yt):(Te(et),oe[ot]=ye-1,we[Oe]=ye-1)}return ue.filter(et=>et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Q,oe)=>Q.sortKey-oe.sortKey)}update(a,c,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,c,this.layers,h),this.icon.programConfigurations.updatePaintArrays(a,c,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,c){let h=this.lineVertexArray.length;if(a.segment!==void 0){let m=a.dist(c[a.segment+1]),b=a.dist(c[a.segment]),w={};for(let S=a.segment+1;S<c.length;S++)w[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:m},S<c.length-1&&(m+=c[S+1].dist(c[S]));for(let S=a.segment||0;S>=0;S--)w[S]={x:c[S].x,y:c[S].y,tileUnitDistanceFromAnchor:b},S>0&&(b+=c[S-1].dist(c[S]));for(let S=0;S<c.length;S++){let E=w[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(a,c,h,m,b,w,S,E,A,M,O,F){let z=a.indexArray,H=a.layoutVertexArray,$=a.segments.prepareSegment(4*c.length,H,z,this.canOverlap?w.sortKey:void 0),Q=this.glyphOffsetArray.length,oe=$.vertexLength,we=this.allowVerticalPlacement&&S===r.ah.vertical?Math.PI/2:0,ue=w.text&&w.text.sections;for(let ye=0;ye<c.length;ye++){let{tl:Te,tr:Le,bl:nt,br:It,tex:et,pixelOffsetTL:Ye,pixelOffsetBR:yt,minFontScaleX:lt,minFontScaleY:ot,glyphOffset:Oe,isSDF:bt,sectionIndex:mt}=c[ye],zt=$.vertexLength,Qn=Oe[1];q0(H,E.x,E.y,Te.x,Qn+Te.y,et.x,et.y,h,bt,Ye.x,Ye.y,lt,ot),q0(H,E.x,E.y,Le.x,Qn+Le.y,et.x+et.w,et.y,h,bt,yt.x,Ye.y,lt,ot),q0(H,E.x,E.y,nt.x,Qn+nt.y,et.x,et.y+et.h,h,bt,Ye.x,yt.y,lt,ot),q0(H,E.x,E.y,It.x,Qn+It.y,et.x+et.w,et.y+et.h,h,bt,yt.x,yt.y,lt,ot),fE(a.dynamicLayoutVertexArray,E,we),z.emplaceBack(zt,zt+1,zt+2),z.emplaceBack(zt+1,zt+2,zt+3),$.vertexLength+=4,$.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Oe[0]),ye!==c.length-1&&mt===c[ye+1].sectionIndex||a.programConfigurations.populatePaintArrays(H.length,w,w.index,{},F,ue&&ue[mt])}a.placedSymbolArray.emplaceBack(E.x,E.y,Q,this.glyphOffsetArray.length-Q,oe,A,M,E.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,O)}_addCollisionDebugVertex(a,c,h,m,b,w){return c.emplaceBack(0,0),a.emplaceBack(h.x,h.y,m,b,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(a,c,h,m,b,w,S){let E=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),A=E.vertexLength,M=b.layoutVertexArray,O=b.collisionVertexArray,F=S.anchorX,z=S.anchorY;this._addCollisionDebugVertex(M,O,w,F,z,new x(a,c)),this._addCollisionDebugVertex(M,O,w,F,z,new x(h,c)),this._addCollisionDebugVertex(M,O,w,F,z,new x(h,m)),this._addCollisionDebugVertex(M,O,w,F,z,new x(a,m)),E.vertexLength+=4;let H=b.indexArray;H.emplaceBack(A,A+1),H.emplaceBack(A+1,A+2),H.emplaceBack(A+2,A+3),H.emplaceBack(A+3,A),E.primitiveLength+=4}addDebugCollisionBoxes(a,c,h,m){for(let b=a;b<c;b++){let w=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,m?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gE(jo,_O.members,_r),this.iconCollisionBox=new gE(jo,_O.members,_r);for(let a=0;a<this.symbolInstances.length;a++){let c=this.symbolInstances.get(a);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(a,c,h,m,b,w,S,E,A){let M={};for(let O=c;O<h;O++){let F=a.get(O);M.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.textFeatureIndex=F.featureIndex;break}for(let O=m;O<b;O++){let F=a.get(O);M.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalTextFeatureIndex=F.featureIndex;break}for(let O=w;O<S;O++){let F=a.get(O);M.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.iconFeatureIndex=F.featureIndex;break}for(let O=E;O<A;O++){let F=a.get(O);M.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},M.verticalIconFeatureIndex=F.featureIndex;break}return M}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let h=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,c){let h=a.placedSymbolArray.get(c),m=h.vertexStartIndex+4*h.numGlyphs;for(let b=h.vertexStartIndex;b<m;b+=4)a.indexArray.emplaceBack(b,b+1,b+2),a.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(a),h=Math.cos(a),m=[],b=[],w=[];for(let S=0;S<this.symbolInstances.length;++S){w.push(S);let E=this.symbolInstances.get(S);m.push(0|Math.round(c*E.anchorX+h*E.anchorY)),b.push(E.featureIndex)}return w.sort((S,E)=>m[S]-m[E]||b[E]-b[S]),w}addToSortKeyRanges(a,c){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===c?h.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let h=this.symbolInstances.get(c);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,b,w)=>{m>=0&&w.indexOf(m)===b&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let FO,LO;at("SymbolBucket",Zp,{omit:["layers","collisionBoxArray","features","compareText"]}),Zp.MAX_GLYPHS=65535,Zp.addDynamicAttributes=fE;var yE={get paint(){return LO=LO||new _({"icon-opacity":new At(De.paint_symbol["icon-opacity"]),"icon-color":new At(De.paint_symbol["icon-color"]),"icon-halo-color":new At(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new At(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new At(De.paint_symbol["icon-halo-blur"]),"icon-translate":new ht(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new ht(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new At(De.paint_symbol["text-opacity"]),"text-color":new At(De.paint_symbol["text-color"],{runtimeType:ro,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new At(De.paint_symbol["text-halo-color"]),"text-halo-width":new At(De.paint_symbol["text-halo-width"]),"text-halo-blur":new At(De.paint_symbol["text-halo-blur"]),"text-translate":new ht(De.paint_symbol["text-translate"]),"text-translate-anchor":new ht(De.paint_symbol["text-translate-anchor"])})},get layout(){return FO=FO||new _({"symbol-placement":new ht(De.layout_symbol["symbol-placement"]),"symbol-spacing":new ht(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ht(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new At(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ht(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ht(De.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ht(De.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ht(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new ht(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ht(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new At(De.layout_symbol["icon-size"]),"icon-text-fit":new ht(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ht(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new At(De.layout_symbol["icon-image"]),"icon-rotate":new At(De.layout_symbol["icon-rotate"]),"icon-padding":new At(De.layout_symbol["icon-padding"]),"icon-keep-upright":new ht(De.layout_symbol["icon-keep-upright"]),"icon-offset":new At(De.layout_symbol["icon-offset"]),"icon-anchor":new At(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ht(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ht(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ht(De.layout_symbol["text-rotation-alignment"]),"text-field":new At(De.layout_symbol["text-field"]),"text-font":new At(De.layout_symbol["text-font"]),"text-size":new At(De.layout_symbol["text-size"]),"text-max-width":new At(De.layout_symbol["text-max-width"]),"text-line-height":new ht(De.layout_symbol["text-line-height"]),"text-letter-spacing":new At(De.layout_symbol["text-letter-spacing"]),"text-justify":new At(De.layout_symbol["text-justify"]),"text-radial-offset":new At(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ht(De.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new At(De.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new At(De.layout_symbol["text-anchor"]),"text-max-angle":new ht(De.layout_symbol["text-max-angle"]),"text-writing-mode":new ht(De.layout_symbol["text-writing-mode"]),"text-rotate":new At(De.layout_symbol["text-rotate"]),"text-padding":new ht(De.layout_symbol["text-padding"]),"text-keep-upright":new ht(De.layout_symbol["text-keep-upright"]),"text-transform":new At(De.layout_symbol["text-transform"]),"text-offset":new At(De.layout_symbol["text-offset"]),"text-allow-overlap":new ht(De.layout_symbol["text-allow-overlap"]),"text-overlap":new ht(De.layout_symbol["text-overlap"]),"text-ignore-placement":new ht(De.layout_symbol["text-ignore-placement"]),"text-optional":new ht(De.layout_symbol["text-optional"])})}};class BO{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Ja,this.defaultValue=a}evaluate(a){if(a.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(a.formattedSection))return c.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}at("FormatSectionOverride",BO,{omit:["defaultValue"]});class W0 extends u{constructor(a){super(a,yE)}recalculate(a,c){if(super.recalculate(a,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let m=[];for(let b of h)m.indexOf(b)<0&&m.push(b);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,c,h,m){let b=this.layout.get(a).evaluate(c,{},h,m),w=this._unevaluatedLayout._values[a];return w.isDataDriven()||wp(w.value)||!b?b:function(S,E){return E.replace(/{([^{}]+)}/g,(A,M)=>S&&M in S?String(S[M]):"")}(c.properties,b)}createBucket(a){return new Zp(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let a of yE.paint.overridableProperties){if(!W0.hasPaintOverride(this.layout,a))continue;let c=this.paint.get(a),h=new BO(c),m=new bp(h,c.property.specification),b=null;b=c.value.kind==="constant"||c.value.kind==="source"?new Zc("source",m):new Kc("composite",m,c.value.zoomStops),this.paint._values[a]=new Gs(c.property,b,c.parameters)}}_handleOverridablePaintPropertyUpdate(a,c,h){return!(!this.layout||c.isDataDriven()||h.isDataDriven())&&W0.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,c){let h=a.get("text-field"),m=yE.paint.properties[c],b=!1,w=S=>{for(let E of S)if(m.overrides&&m.overrides.hasOverride(E))return void(b=!0)};if(h.value.kind==="constant"&&h.value.value instanceof wo)w(h.value.value.sections);else if(h.value.kind==="source"){let S=A=>{b||(A instanceof is&&Zi(A.value)===Ca?w(A.value.sections):A instanceof dp?w(A.sections):A.eachChild(S))},E=h.value;E._styleExpression&&S(E._styleExpression.expression)}return b}}let UO;var BW={get paint(){return UO=UO||new _({"background-color":new ht(De.paint_background["background-color"]),"background-pattern":new kp(De.paint_background["background-pattern"]),"background-opacity":new ht(De.paint_background["background-opacity"])})}};class UW extends u{constructor(a){super(a,BW)}}let zO;var zW={get paint(){return zO=zO||new _({"raster-opacity":new ht(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new ht(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ht(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ht(De.paint_raster["raster-brightness-max"]),"raster-saturation":new ht(De.paint_raster["raster-saturation"]),"raster-contrast":new ht(De.paint_raster["raster-contrast"]),"raster-resampling":new ht(De.paint_raster["raster-resampling"]),"raster-fade-duration":new ht(De.paint_raster["raster-fade-duration"])})}};class VW extends u{constructor(a){super(a,zW)}}class jW extends u{constructor(a){super(a,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class HW{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let _E=63710088e-1;class pu{constructor(a,c){if(isNaN(a)||isNaN(c))throw new Error(`Invalid LngLat object: (${a}, ${c})`);if(this.lng=+a,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new pu(Ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){let c=Math.PI/180,h=this.lat*c,m=a.lat*c,b=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((a.lng-this.lng)*c);return _E*Math.acos(Math.min(b,1))}static convert(a){if(a instanceof pu)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new pu(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new pu(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let VO=2*Math.PI*_E;function jO(l){return VO*Math.cos(l*Math.PI/180)}function HO(l){return(180+l)/360}function $O(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function GO(l,a){return l/jO(a)}function vE(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class dy{constructor(a,c,h=0){this.x=+a,this.y=+c,this.z=+h}static fromLngLat(a,c=0){let h=pu.convert(a);return new dy(HO(h.lng),$O(h.lat),GO(c,h.lat))}toLngLat(){return new pu(360*this.x-180,vE(this.y))}toAltitude(){return this.z*jO(vE(this.y))}meterInMercatorCoordinateUnits(){return 1/VO*(a=vE(this.y),1/Math.cos(a*Math.PI/180));var a}}function qO(l,a,c){var h=2*Math.PI*6378137/256/Math.pow(2,c);return[l*h-2*Math.PI*6378137/2,a*h-2*Math.PI*6378137/2]}class bE{constructor(a,c,h){if(!function(m,b,w){return!(m<0||m>25||w<0||w>=Math.pow(2,m)||b<0||b>=Math.pow(2,m))}(a,c,h))throw new Error(`x=${c}, y=${h}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=c,this.y=h,this.key=hy(0,a,a,c,h)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,c,h){let m=(w=this.y,S=this.z,E=qO(256*(b=this.x),256*(w=Math.pow(2,S)-w-1),S),A=qO(256*(b+1),256*(w+1),S),E[0]+","+E[1]+","+A[0]+","+A[1]);var b,w,S,E,A;let M=function(O,F,z){let H,$="";for(let Q=O;Q>0;Q--)H=1<<Q-1,$+=(F&H?1:0)+(z&H?2:0);return $}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,m)}isChildOf(a){let c=this.z-a.z;return c>0&&a.x===this.x>>c&&a.y===this.y>>c}getTilePoint(a){let c=Math.pow(2,this.z);return new x((a.x*c-this.x)*Ki,(a.y*c-this.y)*Ki)}toString(){return`${this.z}/${this.x}/${this.y}`}}class WO{constructor(a,c){this.wrap=a,this.canonical=c,this.key=hy(a,c.z,c.z,c.x,c.y)}}class ds{constructor(a,c,h,m,b){if(a<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${h}`);this.overscaledZ=a,this.wrap=c,this.canonical=new bE(h,+m,+b),this.key=hy(c,a,h,m,b)}clone(){return new ds(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-a;return a>this.canonical.z?new ds(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ds(a,this.wrap,a,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(a,c){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-a;return a>this.canonical.z?hy(this.wrap*+c,a,this.canonical.z,this.canonical.x,this.canonical.y):hy(this.wrap*+c,a,a,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(a){if(a.wrap!==this.wrap)return!1;let c=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>c&&a.canonical.y===this.canonical.y>>c}children(a){if(this.overscaledZ>=a)return[new ds(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new ds(c,this.wrap,c,h,m),new ds(c,this.wrap,c,h+1,m),new ds(c,this.wrap,c,h,m+1),new ds(c,this.wrap,c,h+1,m+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new ds(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new ds(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new WO(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new dy(a.x-this.wrap,a.y))}}function hy(l,a,c,h,m){(l*=2)<0&&(l=-1*l-1);let b=1<<c;return(b*b*l+b*m+h).toString(36)+c.toString(36)+a.toString(36)}at("CanonicalTileID",bE),at("OverscaledTileID",ds,{omit:["posMatrix"]});class ZO{constructor(a,c,h,m=1,b=1,w=1,S=0){if(this.uid=a,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Et(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let E=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=b,this.blueFactor=w,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<E;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(E,A)]=this.data[this._idx(E-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,E)]=this.data[this._idx(A,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<E;A++)for(let M=0;M<E;M++){let O=this.get(A,M);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(a,c){let h=new Uint8Array(this.data.buffer),m=4*this._idx(a,c);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,c){if(a<-1||a>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(a+1)}unpack(a,c,h){return a*this.redFactor+c*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new us({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,c,h){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,b=c*this.dim+this.dim,w=h*this.dim,S=h*this.dim+this.dim;switch(c){case-1:m=b-1;break;case 1:b=m+1}switch(h){case-1:w=S-1;break;case 1:S=w+1}let E=-c*this.dim,A=-h*this.dim;for(let M=w;M<S;M++)for(let O=m;O<b;O++)this.data[this._idx(O,M)]=a.data[this._idx(O+E,M+A)]}}at("DEMData",ZO);class KO{constructor(a){this._stringToNumber={},this._numberToString=[];for(let c=0;c<a.length;c++){let h=a[c];this._stringToNumber[h]=c,this._numberToString[c]=h}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class YO{constructor(a,c,h,m,b){this.type="Feature",this._vectorTileFeature=a,a._z=c,a._x=h,a._y=m,this.properties=a.properties,this.id=b}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){let a={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(a[c]=this[c]);return a}}class JO{constructor(a,c){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Qc(Ki,16,0),this.grid3D=new Qc(Ki,16,0),this.featureIndexArray=new Gr,this.promoteId=c}insert(a,c,h,m,b,w){let S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,b);let E=w?this.grid3D:this.grid;for(let A=0;A<c.length;A++){let M=c[A],O=[1/0,1/0,-1/0,-1/0];for(let F=0;F<M.length;F++){let z=M[F];O[0]=Math.min(O[0],z.x),O[1]=Math.min(O[1],z.y),O[2]=Math.max(O[2],z.x),O[3]=Math.max(O[3],z.y)}O[0]<Ki&&O[1]<Ki&&O[2]>=0&&O[3]>=0&&E.insert(S,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new uu.VectorTile(new lE(this.rawTileData)).layers,this.sourceLayerCoder=new KO(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,c,h,m){this.loadVTLayers();let b=a.params||{},w=Ki/a.tileSize/a.scale,S=Pg(b.filter),E=a.queryGeometry,A=a.queryPadding*w,M=QO(E),O=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),F=QO(a.cameraQueryGeometry),z=this.grid3D.query(F.minX-A,F.minY-A,F.maxX+A,F.maxY+A,(Q,oe,we,ue)=>function(ye,Te,Le,nt,It){for(let Ye of ye)if(Te<=Ye.x&&Le<=Ye.y&&nt>=Ye.x&&It>=Ye.y)return!0;let et=[new x(Te,Le),new x(Te,It),new x(nt,It),new x(nt,Le)];if(ye.length>2){for(let Ye of et)if(Vp(ye,Ye))return!0}for(let Ye=0;Ye<ye.length-1;Ye++)if(S9(ye[Ye],ye[Ye+1],et))return!0;return!1}(a.cameraQueryGeometry,Q-A,oe-A,we+A,ue+A));for(let Q of z)O.push(Q);O.sort($W);let H={},$;for(let Q=0;Q<O.length;Q++){let oe=O[Q];if(oe===$)continue;$=oe;let we=this.featureIndexArray.get(oe),ue=null;this.loadMatchingFeature(H,we.bucketIndex,we.sourceLayerIndex,we.featureIndex,S,b.layers,b.availableImages,c,h,m,(ye,Te,Le)=>(ue||(ue=Bd(ye)),Te.queryIntersectsFeature(E,ye,Le,ue,this.z,a.transform,w,a.pixelPosMatrix)))}return H}loadMatchingFeature(a,c,h,m,b,w,S,E,A,M,O){let F=this.bucketLayerIDs[c];if(w&&!function(Q,oe){for(let we=0;we<Q.length;we++)if(oe.indexOf(Q[we])>=0)return!0;return!1}(w,F))return;let z=this.sourceLayerCoder.decode(h),H=this.vtLayers[z].feature(m);if(b.needGeometry){let Q=Ud(H,!0);if(!b.filter(new di(this.tileID.overscaledZ),Q,this.tileID.canonical))return}else if(!b.filter(new di(this.tileID.overscaledZ),H))return;let $=this.getId(H,z);for(let Q=0;Q<F.length;Q++){let oe=F[Q];if(w&&w.indexOf(oe)<0)continue;let we=E[oe];if(!we)continue;let ue={};$&&M&&(ue=M.getState(we.sourceLayer||"_geojsonTileLayer",$));let ye=We({},A[oe]);ye.paint=XO(ye.paint,we.paint,H,ue,S),ye.layout=XO(ye.layout,we.layout,H,ue,S);let Te=!O||O(H,we,ue);if(!Te)continue;let Le=new YO(H,this.z,this.x,this.y,$);Le.layer=ye;let nt=a[oe];nt===void 0&&(nt=a[oe]=[]),nt.push({featureIndex:m,feature:Le,intersectionZ:Te})}}lookupSymbolFeatures(a,c,h,m,b,w,S,E){let A={};this.loadVTLayers();let M=Pg(b);for(let O of a)this.loadMatchingFeature(A,h,m,O,M,w,S,E,c);return A}hasLayer(a){for(let c of this.bucketLayerIDs)for(let h of c)if(a===h)return!0;return!1}getId(a,c){let h=a.id;return this.promoteId&&(h=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof h=="boolean"&&(h=Number(h))),h}}function XO(l,a,c,h,m){return gt(l,(b,w)=>{let S=a instanceof kd?a.get(w):null;return S&&S.evaluate?S.evaluate(c,h,m):S})}function QO(l){let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let b of l)a=Math.min(a,b.x),c=Math.min(c,b.y),h=Math.max(h,b.x),m=Math.max(m,b.y);return{minX:a,minY:c,maxX:h,maxY:m}}function $W(l,a){return a-l}function ek(l,a,c,h,m){let b=[];for(let w=0;w<l.length;w++){let S=l[w],E;for(let A=0;A<S.length-1;A++){let M=S[A],O=S[A+1];M.x<a&&O.x<a||(M.x<a?M=new x(a,M.y+(a-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x<a&&(O=new x(a,M.y+(a-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y<c&&O.y<c||(M.y<c?M=new x(M.x+(c-M.y)/(O.y-M.y)*(O.x-M.x),c)._round():O.y<c&&(O=new x(M.x+(c-M.y)/(O.y-M.y)*(O.x-M.x),c)._round()),M.x>=h&&O.x>=h||(M.x>=h?M=new x(h,M.y+(h-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x>=h&&(O=new x(h,M.y+(h-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y>=m&&O.y>=m||(M.y>=m?M=new x(M.x+(m-M.y)/(O.y-M.y)*(O.x-M.x),m)._round():O.y>=m&&(O=new x(M.x+(m-M.y)/(O.y-M.y)*(O.x-M.x),m)._round()),E&&M.equals(E[E.length-1])||(E=[M],b.push(E)),E.push(O)))))}}return b}at("FeatureIndex",JO,{omit:["rawTileData","sourceLayerCoder"]});class fu extends x{constructor(a,c,h,m){super(a,c),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new fu(this.x,this.y,this.angle,this.segment)}}function tk(l,a,c,h,m){if(a.segment===void 0||c===0)return!0;let b=a,w=a.segment+1,S=0;for(;S>-c/2;){if(w--,w<0)return!1;S-=l[w].dist(b),b=l[w]}S+=l[w].dist(l[w+1]),w++;let E=[],A=0;for(;S<c/2;){let M=l[w],O=l[w+1];if(!O)return!1;let F=l[w-1].angleTo(M)-M.angleTo(O);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:F}),A+=F;S-E[0].distance>h;)A-=E.shift().angleDelta;if(A>m)return!1;w++,S+=M.dist(O)}return!0}function nk(l){let a=0;for(let c=0;c<l.length-1;c++)a+=l[c].dist(l[c+1]);return a}function ik(l,a,c){return l?.6*a*c:0}function rk(l,a){return Math.max(l?l.right-l.left:0,a?a.right-a.left:0)}function GW(l,a,c,h,m,b){let w=ik(c,m,b),S=rk(c,h)*b,E=0,A=nk(l)/2;for(let M=0;M<l.length-1;M++){let O=l[M],F=l[M+1],z=O.dist(F);if(E+z>A){let H=(A-E)/z,$=oo.number(O.x,F.x,H),Q=oo.number(O.y,F.y,H),oe=new fu($,Q,F.angleTo(O),M);return oe._round(),!w||tk(l,oe,S,w,a)?oe:void 0}E+=z}}function qW(l,a,c,h,m,b,w,S,E){let A=ik(h,b,w),M=rk(h,m),O=M*w,F=l[0].x===0||l[0].x===E||l[0].y===0||l[0].y===E;return a-O<a/4&&(a=O+a/4),ok(l,F?a/2*S%a:(M/2+2*b)*w*S%a,a,A,c,O,F,!1,E)}function ok(l,a,c,h,m,b,w,S,E){let A=b/2,M=nk(l),O=0,F=a-c,z=[];for(let H=0;H<l.length-1;H++){let $=l[H],Q=l[H+1],oe=$.dist(Q),we=Q.angleTo($);for(;F+c<O+oe;){F+=c;let ue=(F-O)/oe,ye=oo.number($.x,Q.x,ue),Te=oo.number($.y,Q.y,ue);if(ye>=0&&ye<E&&Te>=0&&Te<E&&F-A>=0&&F+A<=M){let Le=new fu(ye,Te,we,H);Le._round(),h&&!tk(l,Le,b,h,m)||z.push(Le)}}O+=oe}return S||z.length||w||(z=ok(l,O/2,c,h,m,b,w,!0,E)),z}at("Anchor",fu);let Kp=Do;function sk(l,a,c,h){let m=[],b=l.image,w=b.pixelRatio,S=b.paddedRect.w-2*Kp,E=b.paddedRect.h-2*Kp,A={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom},M=b.stretchX||[[0,S]],O=b.stretchY||[[0,E]],F=(Oe,bt)=>Oe+bt[1]-bt[0],z=M.reduce(F,0),H=O.reduce(F,0),$=S-z,Q=E-H,oe=0,we=z,ue=0,ye=H,Te=0,Le=$,nt=0,It=Q;if(b.content&&h){let Oe=b.content,bt=Oe[2]-Oe[0],mt=Oe[3]-Oe[1];(b.textFitWidth||b.textFitHeight)&&(A=OO(l)),oe=Z0(M,0,Oe[0]),ue=Z0(O,0,Oe[1]),we=Z0(M,Oe[0],Oe[2]),ye=Z0(O,Oe[1],Oe[3]),Te=Oe[0]-oe,nt=Oe[1]-ue,Le=bt-we,It=mt-ye}let et=A.x1,Ye=A.y1,yt=A.x2-et,lt=A.y2-Ye,ot=(Oe,bt,mt,zt)=>{let Qn=K0(Oe.stretch-oe,we,yt,et),Zn=Y0(Oe.fixed-Te,Le,Oe.stretch,z),sr=K0(bt.stretch-ue,ye,lt,Ye),Ws=Y0(bt.fixed-nt,It,bt.stretch,H),Rr=K0(mt.stretch-oe,we,yt,et),ar=Y0(mt.fixed-Te,Le,mt.stretch,z),co=K0(zt.stretch-ue,ye,lt,Ye),uo=Y0(zt.fixed-nt,It,zt.stretch,H),ho=new x(Qn,sr),Fi=new x(Rr,sr),lr=new x(Rr,co),Wr=new x(Qn,co),Or=new x(Zn/w,Ws/w),po=new x(ar/w,uo/w),kr=a*Math.PI/180;if(kr){let An=Math.sin(kr),li=Math.cos(kr),mi=[li,-An,An,li];ho._matMult(mi),Fi._matMult(mi),Wr._matMult(mi),lr._matMult(mi)}let hs=Oe.stretch+Oe.fixed,To=bt.stretch+bt.fixed;return{tl:ho,tr:Fi,bl:Wr,br:lr,tex:{x:b.paddedRect.x+Kp+hs,y:b.paddedRect.y+Kp+To,w:mt.stretch+mt.fixed-hs,h:zt.stretch+zt.fixed-To},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Or,pixelOffsetBR:po,minFontScaleX:Le/w/yt,minFontScaleY:It/w/lt,isSDF:c}};if(h&&(b.stretchX||b.stretchY)){let Oe=ak(M,$,z),bt=ak(O,Q,H);for(let mt=0;mt<Oe.length-1;mt++){let zt=Oe[mt],Qn=Oe[mt+1];for(let Zn=0;Zn<bt.length-1;Zn++)m.push(ot(zt,bt[Zn],Qn,bt[Zn+1]))}}else m.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return m}function Z0(l,a,c){let h=0;for(let m of l)h+=Math.max(a,Math.min(c,m[1]))-Math.max(a,Math.min(c,m[0]));return h}function ak(l,a,c){let h=[{fixed:-Kp,stretch:0}];for(let[m,b]of l){let w=h[h.length-1];h.push({fixed:m-w.stretch,stretch:w.stretch}),h.push({fixed:m-w.stretch,stretch:w.stretch+(b-m)})}return h.push({fixed:a+Kp,stretch:c}),h}function K0(l,a,c,h){return l/a*c+h}function Y0(l,a,c,h){return l-a*c/h}class J0{constructor(a,c,h,m,b,w,S,E,A,M){var O;if(this.boxStartIndex=a.length,A){let F=w.top,z=w.bottom,H=w.collisionPadding;H&&(F-=H[1],z+=H[3]);let $=z-F;$>0&&($=Math.max(10,$),this.circleDiameter=$)}else{let F=!((O=w.image)===null||O===void 0)&&O.content&&(w.image.textFitWidth||w.image.textFitHeight)?OO(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};F.y1=F.y1*S-E[0],F.y2=F.y2*S+E[2],F.x1=F.x1*S-E[3],F.x2=F.x2*S+E[1];let z=w.collisionPadding;if(z&&(F.x1-=z[0]*S,F.y1-=z[1]*S,F.x2+=z[2]*S,F.y2+=z[3]*S),M){let H=new x(F.x1,F.y1),$=new x(F.x2,F.y1),Q=new x(F.x1,F.y2),oe=new x(F.x2,F.y2),we=M*Math.PI/180;H._rotate(we),$._rotate(we),Q._rotate(we),oe._rotate(we),F.x1=Math.min(H.x,$.x,Q.x,oe.x),F.x2=Math.max(H.x,$.x,Q.x,oe.x),F.y1=Math.min(H.y,$.y,Q.y,oe.y),F.y2=Math.max(H.y,$.y,Q.y,oe.y)}a.emplaceBack(c.x,c.y,F.x1,F.y1,F.x2,F.y2,h,m,b)}this.boxEndIndex=a.length}}class WW{constructor(a=[],c=(h,m)=>h<m?-1:h>m?1:0){if(this.data=a,this.length=this.data.length,this.compare=c,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;let a=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),a}peek(){return this.data[0]}_up(a){let{data:c,compare:h}=this,m=c[a];for(;a>0;){let b=a-1>>1,w=c[b];if(h(m,w)>=0)break;c[a]=w,a=b}c[a]=m}_down(a){let{data:c,compare:h}=this,m=this.length>>1,b=c[a];for(;a<m;){let w=1+(a<<1),S=w+1;if(S<this.length&&h(c[S],c[w])<0&&(w=S),h(c[w],b)>=0)break;c[a]=c[w],a=w}c[a]=b}}function ZW(l,a=1,c=!1){let h=1/0,m=1/0,b=-1/0,w=-1/0,S=l[0];for(let z=0;z<S.length;z++){let H=S[z];(!z||H.x<h)&&(h=H.x),(!z||H.y<m)&&(m=H.y),(!z||H.x>b)&&(b=H.x),(!z||H.y>w)&&(w=H.y)}let E=Math.min(b-h,w-m),A=E/2,M=new WW([],KW);if(E===0)return new x(h,m);for(let z=h;z<b;z+=E)for(let H=m;H<w;H+=E)M.push(new Yp(z+A,H+A,A,l));let O=function(z){let H=0,$=0,Q=0,oe=z[0];for(let we=0,ue=oe.length,ye=ue-1;we<ue;ye=we++){let Te=oe[we],Le=oe[ye],nt=Te.x*Le.y-Le.x*Te.y;$+=(Te.x+Le.x)*nt,Q+=(Te.y+Le.y)*nt,H+=3*nt}return new Yp($/H,Q/H,0,z)}(l),F=M.length;for(;M.length;){let z=M.pop();(z.d>O.d||!O.d)&&(O=z,c&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,F)),z.max-O.d<=a||(A=z.h/2,M.push(new Yp(z.p.x-A,z.p.y-A,A,l)),M.push(new Yp(z.p.x+A,z.p.y-A,A,l)),M.push(new Yp(z.p.x-A,z.p.y+A,A,l)),M.push(new Yp(z.p.x+A,z.p.y+A,A,l)),F+=4)}return c&&(console.log(`num probes: ${F}`),console.log(`best distance: ${O.d}`)),O.p}function KW(l,a){return a.max-l.max}function Yp(l,a,c,h){this.p=new x(l,a),this.h=c,this.d=function(m,b){let w=!1,S=1/0;for(let E=0;E<b.length;E++){let A=b[E];for(let M=0,O=A.length,F=O-1;M<O;F=M++){let z=A[M],H=A[F];z.y>m.y!=H.y>m.y&&m.x<(H.x-z.x)*(m.y-z.y)/(H.y-z.y)+z.x&&(w=!w),S=Math.min(S,$R(m,z,H))}}return(w?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Pr;r.aq=void 0,(Pr=r.aq||(r.aq={}))[Pr.center=1]="center",Pr[Pr.left=2]="left",Pr[Pr.right=3]="right",Pr[Pr.top=4]="top",Pr[Pr.bottom=5]="bottom",Pr[Pr["top-left"]=6]="top-left",Pr[Pr["top-right"]=7]="top-right",Pr[Pr["bottom-left"]=8]="bottom-left",Pr[Pr["bottom-right"]=9]="bottom-right";let mu=7,wE=Number.POSITIVE_INFINITY;function lk(l,a){return a[1]!==wE?function(c,h,m){let b=0,w=0;switch(h=Math.abs(h),m=Math.abs(m),c){case"top-right":case"top-left":case"top":w=m-mu;break;case"bottom-right":case"bottom-left":case"bottom":w=-m+mu}switch(c){case"top-right":case"bottom-right":case"right":b=-h;break;case"top-left":case"bottom-left":case"left":b=h}return[b,w]}(l,a[0],a[1]):function(c,h){let m=0,b=0;h<0&&(h=0);let w=h/Math.SQRT2;switch(c){case"top-right":case"top-left":b=w-mu;break;case"bottom-right":case"bottom-left":b=-w+mu;break;case"bottom":b=-h+mu;break;case"top":b=h-mu}switch(c){case"top-right":case"bottom-right":m=-w;break;case"top-left":case"bottom-left":m=w;break;case"left":m=h;break;case"right":m=-h}return[m,b]}(l,a[0])}function ck(l,a,c){var h;let m=l.layout,b=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(a,{},c);if(b){let S=b.values,E=[];for(let A=0;A<S.length;A+=2){let M=E[A]=S[A],O=S[A+1].map(F=>F*nr);M.startsWith("top")?O[1]-=mu:M.startsWith("bottom")&&(O[1]+=mu),E[A+1]=O}return new Fo(E)}let w=m.get("text-variable-anchor");if(w){let S;S=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(a,{},c)*nr,wE]:m.get("text-offset").evaluate(a,{},c).map(A=>A*nr);let E=[];for(let A of w)E.push(A,lk(A,S));return new Fo(E)}return null}function xE(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function YW(l,a,c,h,m,b,w,S,E,A,M){let O=b.textMaxSize.evaluate(a,{});O===void 0&&(O=w);let F=l.layers[0].layout,z=F.get("icon-offset").evaluate(a,{},M),H=dk(c.horizontal),$=w/24,Q=l.tilePixelRatio*$,oe=l.tilePixelRatio*O/24,we=l.tilePixelRatio*S,ue=l.tilePixelRatio*F.get("symbol-spacing"),ye=F.get("text-padding")*l.tilePixelRatio,Te=function(Oe,bt,mt,zt=1){let Qn=Oe.get("icon-padding").evaluate(bt,{},mt),Zn=Qn&&Qn.values;return[Zn[0]*zt,Zn[1]*zt,Zn[2]*zt,Zn[3]*zt]}(F,a,M,l.tilePixelRatio),Le=F.get("text-max-angle")/180*Math.PI,nt=F.get("text-rotation-alignment")!=="viewport"&&F.get("symbol-placement")!=="point",It=F.get("icon-rotation-alignment")==="map"&&F.get("symbol-placement")!=="point",et=F.get("symbol-placement"),Ye=ue/2,yt=F.get("icon-text-fit"),lt;h&&yt!=="none"&&(l.allowVerticalPlacement&&c.vertical&&(lt=kO(h,c.vertical,yt,F.get("icon-text-fit-padding"),z,$)),H&&(h=kO(h,H,yt,F.get("icon-text-fit-padding"),z,$)));let ot=(Oe,bt)=>{bt.x<0||bt.x>=Ki||bt.y<0||bt.y>=Ki||function(mt,zt,Qn,Zn,sr,Ws,Rr,ar,co,uo,ho,Fi,lr,Wr,Or,po,kr,hs,To,An,li,mi,Ho,Mi,Jp){let rl=mt.addToLineVertexArray(zt,Qn),ol,Zs,ps,vr,rc=0,my=0,mk=0,gk=0,ME=-1,PE=-1,oc={},yk=Lp("");if(mt.allowVerticalPlacement&&Zn.vertical){let Zr=ar.layout.get("text-rotate").evaluate(li,{},Mi)+90;ps=new J0(co,zt,uo,ho,Fi,Zn.vertical,lr,Wr,Or,Zr),Rr&&(vr=new J0(co,zt,uo,ho,Fi,Rr,kr,hs,Or,Zr))}if(sr){let Zr=ar.layout.get("icon-rotate").evaluate(li,{}),fs=ar.layout.get("icon-text-fit")!=="none",Vd=sk(sr,Zr,Ho,fs),Aa=Rr?sk(Rr,Zr,Ho,fs):void 0;Zs=new J0(co,zt,uo,ho,Fi,sr,kr,hs,!1,Zr),rc=4*Vd.length;let jd=mt.iconSizeData,sl=null;jd.kind==="source"?(sl=[il*ar.layout.get("icon-size").evaluate(li,{})],sl[0]>hu&&Et(`${mt.layerIds[0]}: Value for "icon-size" is >= ${uy}. Reduce your "icon-size".`)):jd.kind==="composite"&&(sl=[il*mi.compositeIconSizes[0].evaluate(li,{},Mi),il*mi.compositeIconSizes[1].evaluate(li,{},Mi)],(sl[0]>hu||sl[1]>hu)&&Et(`${mt.layerIds[0]}: Value for "icon-size" is >= ${uy}. Reduce your "icon-size".`)),mt.addSymbols(mt.icon,Vd,sl,An,To,li,r.ah.none,zt,rl.lineStartIndex,rl.lineLength,-1,Mi),ME=mt.icon.placedSymbolArray.length-1,Aa&&(my=4*Aa.length,mt.addSymbols(mt.icon,Aa,sl,An,To,li,r.ah.vertical,zt,rl.lineStartIndex,rl.lineLength,-1,Mi),PE=mt.icon.placedSymbolArray.length-1)}let _k=Object.keys(Zn.horizontal);for(let Zr of _k){let fs=Zn.horizontal[Zr];if(!ol){yk=Lp(fs.text);let Aa=ar.layout.get("text-rotate").evaluate(li,{},Mi);ol=new J0(co,zt,uo,ho,Fi,fs,lr,Wr,Or,Aa)}let Vd=fs.positionedLines.length===1;if(mk+=uk(mt,zt,fs,Ws,ar,Or,li,po,rl,Zn.vertical?r.ah.horizontal:r.ah.horizontalOnly,Vd?_k:[Zr],oc,ME,mi,Mi),Vd)break}Zn.vertical&&(gk+=uk(mt,zt,Zn.vertical,Ws,ar,Or,li,po,rl,r.ah.vertical,["vertical"],oc,PE,mi,Mi));let QW=ol?ol.boxStartIndex:mt.collisionBoxArray.length,e7=ol?ol.boxEndIndex:mt.collisionBoxArray.length,t7=ps?ps.boxStartIndex:mt.collisionBoxArray.length,n7=ps?ps.boxEndIndex:mt.collisionBoxArray.length,i7=Zs?Zs.boxStartIndex:mt.collisionBoxArray.length,r7=Zs?Zs.boxEndIndex:mt.collisionBoxArray.length,o7=vr?vr.boxStartIndex:mt.collisionBoxArray.length,s7=vr?vr.boxEndIndex:mt.collisionBoxArray.length,Ta=-1,Q0=(Zr,fs)=>Zr&&Zr.circleDiameter?Math.max(Zr.circleDiameter,fs):fs;Ta=Q0(ol,Ta),Ta=Q0(ps,Ta),Ta=Q0(Zs,Ta),Ta=Q0(vr,Ta);let vk=Ta>-1?1:0;vk&&(Ta*=Jp/nr),mt.glyphOffsetArray.length>=Zp.MAX_GLYPHS&&Et("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&mt.addToSortKeyRanges(mt.symbolInstances.length,li.sortKey);let a7=ck(ar,li,Mi),[l7,c7]=function(Zr,fs){let Vd=Zr.length,Aa=fs?.values;if(Aa?.length>0)for(let jd=0;jd<Aa.length;jd+=2){let sl=Aa[jd+1];Zr.emplaceBack(r.aq[Aa[jd]],sl[0],sl[1])}return[Vd,Zr.length]}(mt.textAnchorOffsets,a7);mt.symbolInstances.emplaceBack(zt.x,zt.y,oc.right>=0?oc.right:-1,oc.center>=0?oc.center:-1,oc.left>=0?oc.left:-1,oc.vertical||-1,ME,PE,yk,QW,e7,t7,n7,i7,r7,o7,s7,uo,mk,gk,rc,my,vk,0,lr,Ta,l7,c7)}(l,bt,Oe,c,h,m,lt,l.layers[0],l.collisionBoxArray,a.index,a.sourceLayerIndex,l.index,Q,[ye,ye,ye,ye],nt,E,we,Te,It,z,a,b,A,M,w)};if(et==="line")for(let Oe of ek(a.geometry,0,0,Ki,Ki)){let bt=qW(Oe,ue,Le,c.vertical||H,h,24,oe,l.overscaling,Ki);for(let mt of bt)H&&JW(l,H.text,Ye,mt)||ot(Oe,mt)}else if(et==="line-center"){for(let Oe of a.geometry)if(Oe.length>1){let bt=GW(Oe,Le,c.vertical||H,h,24,oe);bt&&ot(Oe,bt)}}else if(a.type==="Polygon")for(let Oe of pp(a.geometry,0)){let bt=ZW(Oe,16);ot(Oe[0],new fu(bt.x,bt.y,0))}else if(a.type==="LineString")for(let Oe of a.geometry)ot(Oe,new fu(Oe[0].x,Oe[0].y,0));else if(a.type==="Point")for(let Oe of a.geometry)for(let bt of Oe)ot([bt],new fu(bt.x,bt.y,0))}function uk(l,a,c,h,m,b,w,S,E,A,M,O,F,z,H){let $=function(we,ue,ye,Te,Le,nt,It,et){let Ye=Te.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,yt=[];for(let lt of ue.positionedLines)for(let ot of lt.positionedGlyphs){if(!ot.rect)continue;let Oe=ot.rect||{},bt=IO+1,mt=!0,zt=1,Qn=0,Zn=(Le||et)&&ot.vertical,sr=ot.metrics.advance*ot.scale/2;if(et&&ue.verticalizable&&(Qn=lt.lineOffset/2-(ot.imageName?-(nr-ot.metrics.width*ot.scale)/2:(ot.scale-1)*nr)),ot.imageName){let An=It[ot.imageName];mt=An.sdf,zt=An.pixelRatio,bt=Do/zt}let Ws=Le?[ot.x+sr,ot.y]:[0,0],Rr=Le?[0,0]:[ot.x+sr+ye[0],ot.y+ye[1]-Qn],ar=[0,0];Zn&&(ar=Rr,Rr=[0,0]);let co=ot.metrics.isDoubleResolution?2:1,uo=(ot.metrics.left-bt)*ot.scale-sr+Rr[0],ho=(-ot.metrics.top-bt)*ot.scale+Rr[1],Fi=uo+Oe.w/co*ot.scale/zt,lr=ho+Oe.h/co*ot.scale/zt,Wr=new x(uo,ho),Or=new x(Fi,ho),po=new x(uo,lr),kr=new x(Fi,lr);if(Zn){let An=new x(-sr,sr-ly),li=-Math.PI/2,mi=nr/2-sr,Ho=new x(5-ly-mi,-(ot.imageName?mi:0)),Mi=new x(...ar);Wr._rotateAround(li,An)._add(Ho)._add(Mi),Or._rotateAround(li,An)._add(Ho)._add(Mi),po._rotateAround(li,An)._add(Ho)._add(Mi),kr._rotateAround(li,An)._add(Ho)._add(Mi)}if(Ye){let An=Math.sin(Ye),li=Math.cos(Ye),mi=[li,-An,An,li];Wr._matMult(mi),Or._matMult(mi),po._matMult(mi),kr._matMult(mi)}let hs=new x(0,0),To=new x(0,0);yt.push({tl:Wr,tr:Or,bl:po,br:kr,tex:Oe,writingMode:ue.writingMode,glyphOffset:Ws,sectionIndex:ot.sectionIndex,isSDF:mt,pixelOffsetTL:hs,pixelOffsetBR:To,minFontScaleX:0,minFontScaleY:0})}return yt}(0,c,S,m,b,w,h,l.allowVerticalPlacement),Q=l.textSizeData,oe=null;Q.kind==="source"?(oe=[il*m.layout.get("text-size").evaluate(w,{})],oe[0]>hu&&Et(`${l.layerIds[0]}: Value for "text-size" is >= ${uy}. Reduce your "text-size".`)):Q.kind==="composite"&&(oe=[il*z.compositeTextSizes[0].evaluate(w,{},H),il*z.compositeTextSizes[1].evaluate(w,{},H)],(oe[0]>hu||oe[1]>hu)&&Et(`${l.layerIds[0]}: Value for "text-size" is >= ${uy}. Reduce your "text-size".`)),l.addSymbols(l.text,$,oe,S,b,w,A,a,E.lineStartIndex,E.lineLength,F,H);for(let we of M)O[we]=l.text.placedSymbolArray.length-1;return 4*$.length}function dk(l){for(let a in l)return l[a];return null}function JW(l,a,c,h){let m=l.compareText;if(a in m){let b=m[a];for(let w=b.length-1;w>=0;w--)if(h.dist(b[w])<c)return!0}else m[a]=[];return m[a].push(h),!1}let hk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class SE{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,h]=new Uint8Array(a,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);let b=hk[15&h];if(!b)throw new Error("Unrecognized array type.");let[w]=new Uint16Array(a,2,1),[S]=new Uint32Array(a,4,1);return new SE(S,w,b,a)}constructor(a,c=64,h=Float64Array,m){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=h,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;let b=hk.indexOf(this.ArrayType),w=2*a*this.ArrayType.BYTES_PER_ELEMENT,S=a*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+S+E,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+w+S+E),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+S+E,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=a)}add(a,c){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=a,this.coords[this._pos++]=c,h}finish(){let a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return CE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,c,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:w,nodeSize:S}=this,E=[0,b.length-1,0],A=[];for(;E.length;){let M=E.pop()||0,O=E.pop()||0,F=E.pop()||0;if(O-F<=S){for(let Q=F;Q<=O;Q++){let oe=w[2*Q],we=w[2*Q+1];oe>=a&&oe<=h&&we>=c&&we<=m&&A.push(b[Q])}continue}let z=F+O>>1,H=w[2*z],$=w[2*z+1];H>=a&&H<=h&&$>=c&&$<=m&&A.push(b[z]),(M===0?a<=H:c<=$)&&(E.push(F),E.push(z-1),E.push(1-M)),(M===0?h>=H:m>=$)&&(E.push(z+1),E.push(O),E.push(1-M))}return A}within(a,c,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:m,coords:b,nodeSize:w}=this,S=[0,m.length-1,0],E=[],A=h*h;for(;S.length;){let M=S.pop()||0,O=S.pop()||0,F=S.pop()||0;if(O-F<=w){for(let Q=F;Q<=O;Q++)fk(b[2*Q],b[2*Q+1],a,c)<=A&&E.push(m[Q]);continue}let z=F+O>>1,H=b[2*z],$=b[2*z+1];fk(H,$,a,c)<=A&&E.push(m[z]),(M===0?a-h<=H:c-h<=$)&&(S.push(F),S.push(z-1),S.push(1-M)),(M===0?a+h>=H:c+h>=$)&&(S.push(z+1),S.push(O),S.push(1-M))}return E}}function CE(l,a,c,h,m,b){if(m-h<=c)return;let w=h+m>>1;pk(l,a,w,h,m,b),CE(l,a,c,h,w-1,1-b),CE(l,a,c,w+1,m,1-b)}function pk(l,a,c,h,m,b){for(;m>h;){if(m-h>600){let A=m-h+1,M=c-h+1,O=Math.log(A),F=.5*Math.exp(2*O/3),z=.5*Math.sqrt(O*F*(A-F)/A)*(M-A/2<0?-1:1);pk(l,a,c,Math.max(h,Math.floor(c-M*F/A+z)),Math.min(m,Math.floor(c+(A-M)*F/A+z)),b)}let w=a[2*c+b],S=h,E=m;for(py(l,a,h,c),a[2*m+b]>w&&py(l,a,h,m);S<E;){for(py(l,a,S,E),S++,E--;a[2*S+b]<w;)S++;for(;a[2*E+b]>w;)E--}a[2*h+b]===w?py(l,a,h,E):(E++,py(l,a,E,m)),E<=c&&(h=E+1),c<=E&&(m=E-1)}}function py(l,a,c,h){EE(l,c,h),EE(a,2*c,2*h),EE(a,2*c+1,2*h+1)}function EE(l,a,c){let h=l[a];l[a]=l[c],l[c]=h}function fk(l,a,c,h){let m=l-c,b=a-h;return m*m+b*b}var IE;r.bg=void 0,(IE=r.bg||(r.bg={})).create="create",IE.load="load",IE.fullLoad="fullLoad";let X0=null,fy=[],DE=1e3/60,TE="loadTime",AE="fullLoadTime",XW={mark(l){performance.mark(l)},frame(l){let a=l;X0!=null&&fy.push(a-X0),X0=a},clearMetrics(){X0=null,fy=[],performance.clearMeasures(TE),performance.clearMeasures(AE);for(let l in r.bg)performance.clearMarks(r.bg[l])},getPerformanceMetrics(){performance.measure(TE,r.bg.create,r.bg.load),performance.measure(AE,r.bg.create,r.bg.fullLoad);let l=performance.getEntriesByName(TE)[0].duration,a=performance.getEntriesByName(AE)[0].duration,c=fy.length,h=1/(fy.reduce((b,w)=>b+w,0)/c/1e3),m=fy.filter(b=>b>DE).reduce((b,w)=>b+(w-DE)/DE,0);return{loadTime:l,fullLoadTime:a,fps:h,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};r.$=class extends k{},r.A=jp,r.B=LC,r.C=function(l){if(Ei==null){let a=l.navigator?l.navigator.userAgent:null;Ei=!!l.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Ei},r.D=ht,r.E=kc,r.F=class{constructor(l,a){this.target=l,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new HW(()=>this.process()),this.subscription=function(c,h,m,b){return c.addEventListener(h,m,!1),{unsubscribe:()=>{c.removeEventListener(h,m,!1)}}}(this.target,"message",c=>this.receive(c)),this.globalScope=Qt(self)?l:window}registerMessageHandler(l,a){this.messageHandlers[l]=a}sendAsync(l,a){return new Promise((c,h)=>{let m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:c,reject:h},a&&a.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];let S={id:m,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});let b=[],w=Object.assign(Object.assign({},l),{id:m,sourceMapId:this.mapId,origin:location.origin,data:eu(l.data,b)});this.target.postMessage(w,{transfer:b})})}receive(l){let a=l.data,c=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[c];let h=this.abortControllers[c];return delete this.abortControllers[c],void(h&&h.abort())}if(Qt(self)||a.mustQueue)return this.tasks[c]=a,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,a)}}process(){if(this.taskQueue.length===0)return;let l=this.taskQueue.shift(),a=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(l,a)}processTask(l,a){return o(this,void 0,void 0,function*(){if(a.type==="<response>"){let m=this.resolveRejects[l];return delete this.resolveRejects[l],m?void(a.error?m.reject(tu(a.error)):m.resolve(tu(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=tu(a.data),h=new AbortController;this.abortControllers[l]=h;try{let m=yield this.messageHandlers[a.type](a.sourceMapId,c,h);this.completeTask(l,null,m)}catch(m){this.completeTask(l,m)}})}completeTask(l,a,c){let h=[];delete this.abortControllers[l];let m={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?eu(a):null,data:eu(c,h)};this.target.postMessage(m,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},r.G=un,r.H=function(){var l=new jp(16);return jp!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},r.I=uE,r.J=function(l,a,c){var h,m,b,w,S,E,A,M,O,F,z,H,$=c[0],Q=c[1],oe=c[2];return a===l?(l[12]=a[0]*$+a[4]*Q+a[8]*oe+a[12],l[13]=a[1]*$+a[5]*Q+a[9]*oe+a[13],l[14]=a[2]*$+a[6]*Q+a[10]*oe+a[14],l[15]=a[3]*$+a[7]*Q+a[11]*oe+a[15]):(m=a[1],b=a[2],w=a[3],S=a[4],E=a[5],A=a[6],M=a[7],O=a[8],F=a[9],z=a[10],H=a[11],l[0]=h=a[0],l[1]=m,l[2]=b,l[3]=w,l[4]=S,l[5]=E,l[6]=A,l[7]=M,l[8]=O,l[9]=F,l[10]=z,l[11]=H,l[12]=h*$+S*Q+O*oe+a[12],l[13]=m*$+E*Q+F*oe+a[13],l[14]=b*$+A*Q+z*oe+a[14],l[15]=w*$+M*Q+H*oe+a[15]),l},r.K=function(l,a,c){var h=c[0],m=c[1],b=c[2];return l[0]=a[0]*h,l[1]=a[1]*h,l[2]=a[2]*h,l[3]=a[3]*h,l[4]=a[4]*m,l[5]=a[5]*m,l[6]=a[6]*m,l[7]=a[7]*m,l[8]=a[8]*b,l[9]=a[9]*b,l[10]=a[10]*b,l[11]=a[11]*b,l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},r.L=ZR,r.M=function(l,a){let c={};for(let h=0;h<a.length;h++){let m=a[h];m in l&&(c[m]=l[m])}return c},r.N=pu,r.O=HO,r.P=x,r.Q=$O,r.R=us,r.S=ds,r.T=Rp,r.U=re,r.V=be,r.W=mr,r.X=Ki,r.Y=C,r.Z=dy,r._=o,r.a=ko,r.a$=function(l,a){var c=l[0],h=l[1],m=l[2],b=l[3],w=l[4],S=l[5],E=l[6],A=l[7],M=l[8],O=l[9],F=l[10],z=l[11],H=l[12],$=l[13],Q=l[14],oe=l[15],we=a[0],ue=a[1],ye=a[2],Te=a[3],Le=a[4],nt=a[5],It=a[6],et=a[7],Ye=a[8],yt=a[9],lt=a[10],ot=a[11],Oe=a[12],bt=a[13],mt=a[14],zt=a[15];return Math.abs(c-we)<=lo*Math.max(1,Math.abs(c),Math.abs(we))&&Math.abs(h-ue)<=lo*Math.max(1,Math.abs(h),Math.abs(ue))&&Math.abs(m-ye)<=lo*Math.max(1,Math.abs(m),Math.abs(ye))&&Math.abs(b-Te)<=lo*Math.max(1,Math.abs(b),Math.abs(Te))&&Math.abs(w-Le)<=lo*Math.max(1,Math.abs(w),Math.abs(Le))&&Math.abs(S-nt)<=lo*Math.max(1,Math.abs(S),Math.abs(nt))&&Math.abs(E-It)<=lo*Math.max(1,Math.abs(E),Math.abs(It))&&Math.abs(A-et)<=lo*Math.max(1,Math.abs(A),Math.abs(et))&&Math.abs(M-Ye)<=lo*Math.max(1,Math.abs(M),Math.abs(Ye))&&Math.abs(O-yt)<=lo*Math.max(1,Math.abs(O),Math.abs(yt))&&Math.abs(F-lt)<=lo*Math.max(1,Math.abs(F),Math.abs(lt))&&Math.abs(z-ot)<=lo*Math.max(1,Math.abs(z),Math.abs(ot))&&Math.abs(H-Oe)<=lo*Math.max(1,Math.abs(H),Math.abs(Oe))&&Math.abs($-bt)<=lo*Math.max(1,Math.abs($),Math.abs(bt))&&Math.abs(Q-mt)<=lo*Math.max(1,Math.abs(Q),Math.abs(mt))&&Math.abs(oe-zt)<=lo*Math.max(1,Math.abs(oe),Math.abs(zt))},r.a0=vn,r.a1=bE,r.a2=je,r.a3=l=>{let a=window.document.createElement("video");return a.muted=!0,new Promise(c=>{a.onloadstart=()=>{c(a)};for(let h of l){let m=window.document.createElement("source");Bs(h)||(a.crossOrigin="Anonymous"),m.src=h,a.appendChild(m)}})},r.a4=function(){return rt++},r.a5=tt,r.a6=Zp,r.a7=Pg,r.a8=Ud,r.a9=YO,r.aA=function(l){if(l.type==="custom")return new jW(l);switch(l.type){case"background":return new UW(l);case"circle":return new I9(l);case"fill":return new H9(l);case"fill-extrusion":return new rW(l);case"heatmap":return new T9(l);case"hillshade":return new M9(l);case"line":return new hW(l);case"raster":return new VW(l);case"symbol":return new W0(l)}},r.aB=st,r.aC=function(l,a){if(!l)return[{command:"setStyle",args:[a]}];let c=[];try{if(!Rn(l.version,a.version))return[{command:"setStyle",args:[a]}];Rn(l.center,a.center)||c.push({command:"setCenter",args:[a.center]}),Rn(l.zoom,a.zoom)||c.push({command:"setZoom",args:[a.zoom]}),Rn(l.bearing,a.bearing)||c.push({command:"setBearing",args:[a.bearing]}),Rn(l.pitch,a.pitch)||c.push({command:"setPitch",args:[a.pitch]}),Rn(l.sprite,a.sprite)||c.push({command:"setSprite",args:[a.sprite]}),Rn(l.glyphs,a.glyphs)||c.push({command:"setGlyphs",args:[a.glyphs]}),Rn(l.transition,a.transition)||c.push({command:"setTransition",args:[a.transition]}),Rn(l.light,a.light)||c.push({command:"setLight",args:[a.light]}),Rn(l.terrain,a.terrain)||c.push({command:"setTerrain",args:[a.terrain]}),Rn(l.sky,a.sky)||c.push({command:"setSky",args:[a.sky]}),Rn(l.projection,a.projection)||c.push({command:"setProjection",args:[a.projection]});let h={},m=[];(function(w,S,E,A){let M;for(M in S=S||{},w=w||{})Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(S,M)||Ya(M,E,A));for(M in S)Object.prototype.hasOwnProperty.call(S,M)&&(Object.prototype.hasOwnProperty.call(w,M)?Rn(w[M],S[M])||(w[M].type==="geojson"&&S[M].type==="geojson"&&Nc(w,S,M)?Ti(E,{command:"setGeoJSONSourceData",args:[M,S[M].data]}):Sa(M,S,E,A)):fd(M,S,E))})(l.sources,a.sources,m,h);let b=[];l.layers&&l.layers.forEach(w=>{"source"in w&&h[w.source]?c.push({command:"removeLayer",args:[w.id]}):b.push(w)}),c=c.concat(m),function(w,S,E){S=S||[];let A=(w=w||[]).map(md),M=S.map(md),O=w.reduce(gd,{}),F=S.reduce(gd,{}),z=A.slice(),H=Object.create(null),$,Q,oe,we,ue;for(let ye=0,Te=0;ye<A.length;ye++)$=A[ye],Object.prototype.hasOwnProperty.call(F,$)?Te++:(Ti(E,{command:"removeLayer",args:[$]}),z.splice(z.indexOf($,Te),1));for(let ye=0,Te=0;ye<M.length;ye++)$=M[M.length-1-ye],z[z.length-1-ye]!==$&&(Object.prototype.hasOwnProperty.call(O,$)?(Ti(E,{command:"removeLayer",args:[$]}),z.splice(z.lastIndexOf($,z.length-Te),1)):Te++,we=z[z.length-ye],Ti(E,{command:"addLayer",args:[F[$],we]}),z.splice(z.length-ye,0,$),H[$]=!0);for(let ye=0;ye<M.length;ye++)if($=M[ye],Q=O[$],oe=F[$],!H[$]&&!Rn(Q,oe))if(Rn(Q.source,oe.source)&&Rn(Q["source-layer"],oe["source-layer"])&&Rn(Q.type,oe.type)){for(ue in No(Q.layout,oe.layout,E,$,null,"setLayoutProperty"),No(Q.paint,oe.paint,E,$,null,"setPaintProperty"),Rn(Q.filter,oe.filter)||Ti(E,{command:"setFilter",args:[$,oe.filter]}),Rn(Q.minzoom,oe.minzoom)&&Rn(Q.maxzoom,oe.maxzoom)||Ti(E,{command:"setLayerZoomRange",args:[$,oe.minzoom,oe.maxzoom]}),Q)Object.prototype.hasOwnProperty.call(Q,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?No(Q[ue],oe[ue],E,$,ue.slice(6),"setPaintProperty"):Rn(Q[ue],oe[ue])||Ti(E,{command:"setLayerProperty",args:[$,ue,oe[ue]]}));for(ue in oe)Object.prototype.hasOwnProperty.call(oe,ue)&&!Object.prototype.hasOwnProperty.call(Q,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?No(Q[ue],oe[ue],E,$,ue.slice(6),"setPaintProperty"):Rn(Q[ue],oe[ue])||Ti(E,{command:"setLayerProperty",args:[$,ue,oe[ue]]}))}else Ti(E,{command:"removeLayer",args:[$]}),we=z[z.lastIndexOf($)+1],Ti(E,{command:"addLayer",args:[oe,we]})}(b,a.layers,c)}catch(h){console.warn("Unable to compute style diff:",h),c=[{command:"setStyle",args:[a]}]}return c},r.aD=function(l){let a=[],c=l.id;return c===void 0&&a.push({message:`layers.${c}: missing required property "id"`}),l.render===void 0&&a.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&a.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),a},r.aE=function l(a,c){if(Array.isArray(a)){if(!Array.isArray(c)||a.length!==c.length)return!1;for(let h=0;h<a.length;h++)if(!l(a[h],c[h]))return!1;return!0}if(typeof a=="object"&&a!==null&&c!==null){if(typeof c!="object"||Object.keys(a).length!==Object.keys(c).length)return!1;for(let h in a)if(!l(a[h],c[h]))return!1;return!0}return a===c},r.aF=gt,r.aG=Gt,r.aH=class extends Fd{constructor(l,a){super(l,a),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},r.aI=k0,r.aJ=class extends Fd{constructor(l,a){super(l,a),this.current=_9}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let a=1;a<16;a++)if(l[a]!==this.current[a]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},r.aK=LR,r.aL=BR,r.aM=Vn,r.aN=class extends Fd{constructor(l,a){super(l,a),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},r.aO=class extends Fd{constructor(l,a){super(l,a),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},r.aP=function(l,a,c,h,m,b,w){var S=1/(a-c),E=1/(h-m),A=1/(b-w);return l[0]=-2*S,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*E,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*A,l[11]=0,l[12]=(a+c)*S,l[13]=(m+h)*E,l[14]=(w+b)*A,l[15]=1,l},r.aQ=E9,r.aR=class extends pe{},r.aS=gW,r.aT=class extends Se{},r.aU=XC,r.aV=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},r.aW=QR,r.aX=Ar,r.aY=cs,r.aZ=class extends pt{},r.a_=function(l,a){return l[0]===a[0]&&l[1]===a[1]&&l[2]===a[2]&&l[3]===a[3]&&l[4]===a[4]&&l[5]===a[5]&&l[6]===a[6]&&l[7]===a[7]&&l[8]===a[8]&&l[9]===a[9]&&l[10]===a[10]&&l[11]===a[11]&&l[12]===a[12]&&l[13]===a[13]&&l[14]===a[14]&&l[15]===a[15]},r.aa=function(l){let a={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,h,m,b)=>{let w=m||b;return a[h]=!w||w.toLowerCase(),""}),a["max-age"]){let c=parseInt(a["max-age"],10);isNaN(c)?delete a["max-age"]:a["max-age"]=c}return a},r.ab=function(l,a){let c=[];for(let h in l)h in a||c.push(h);return c},r.ac=Ne,r.ad=function(l,a,c){var h=Math.sin(c),m=Math.cos(c),b=a[0],w=a[1],S=a[2],E=a[3],A=a[4],M=a[5],O=a[6],F=a[7];return a!==l&&(l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[0]=b*m+A*h,l[1]=w*m+M*h,l[2]=S*m+O*h,l[3]=E*m+F*h,l[4]=A*m-b*h,l[5]=M*m-w*h,l[6]=O*m-S*h,l[7]=F*m-E*h,l},r.ae=function(l){var a=new jp(16);return a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15],a},r.af=B0,r.ag=function(l,a){let c=0,h=0;if(l.kind==="constant")h=l.layoutSize;else if(l.kind!=="source"){let{interpolationType:m,minZoom:b,maxZoom:w}=l,S=m?Ne(so.interpolationFactor(m,a,b,w),0,1):0;l.kind==="camera"?h=oo.number(l.minSize,l.maxSize,S):c=S}return{uSizeT:c,uSize:h}},r.ai=function(l,{uSize:a,uSizeT:c},{lowerSize:h,upperSize:m}){return l.kind==="source"?h/il:l.kind==="composite"?oo.number(h/il,m/il,c):a},r.aj=fE,r.ak=function(l,a,c,h){let m=a.y-l.y,b=a.x-l.x,w=h.y-c.y,S=h.x-c.x,E=w*b-S*m;if(E===0)return null;let A=(S*(l.y-c.y)-w*(l.x-c.x))/E;return new x(l.x+A*b,l.y+A*m)},r.al=ek,r.am=jR,r.an=KC,r.ao=function(l){let a=1/0,c=1/0,h=-1/0,m=-1/0;for(let b of l)a=Math.min(a,b.x),c=Math.min(c,b.y),h=Math.max(h,b.x),m=Math.max(m,b.y);return[a,c,h,m]},r.ap=nr,r.ar=pE,r.as=function(l,a){var c=a[0],h=a[1],m=a[2],b=a[3],w=a[4],S=a[5],E=a[6],A=a[7],M=a[8],O=a[9],F=a[10],z=a[11],H=a[12],$=a[13],Q=a[14],oe=a[15],we=c*S-h*w,ue=c*E-m*w,ye=c*A-b*w,Te=h*E-m*S,Le=h*A-b*S,nt=m*A-b*E,It=M*$-O*H,et=M*Q-F*H,Ye=M*oe-z*H,yt=O*Q-F*$,lt=O*oe-z*$,ot=F*oe-z*Q,Oe=we*ot-ue*lt+ye*yt+Te*Ye-Le*et+nt*It;return Oe?(l[0]=(S*ot-E*lt+A*yt)*(Oe=1/Oe),l[1]=(m*lt-h*ot-b*yt)*Oe,l[2]=($*nt-Q*Le+oe*Te)*Oe,l[3]=(F*Le-O*nt-z*Te)*Oe,l[4]=(E*Ye-w*ot-A*et)*Oe,l[5]=(c*ot-m*Ye+b*et)*Oe,l[6]=(Q*ye-H*nt-oe*ue)*Oe,l[7]=(M*nt-F*ye+z*ue)*Oe,l[8]=(w*lt-S*Ye+A*It)*Oe,l[9]=(h*Ye-c*lt-b*It)*Oe,l[10]=(H*Le-$*ye+oe*we)*Oe,l[11]=(O*ye-M*Le-z*we)*Oe,l[12]=(S*et-w*yt-E*It)*Oe,l[13]=(c*yt-h*et+m*It)*Oe,l[14]=($*ue-H*Te-Q*we)*Oe,l[15]=(M*Te-O*ue+F*we)*Oe,l):null},r.at=xE,r.au=hE,r.av=SE,r.aw=function(){let l={},a=De.$version;for(let c in De.$root){let h=De.$root[c];if(h.required){let m=null;m=c==="version"?a:h.type==="array"?[]:{},m!=null&&(l[c]=m)}}return l},r.ax=Gg,r.ay=bo,r.az=function(l){l=l.slice();let a=Object.create(null);for(let c=0;c<l.length;c++)a[l[c].id]=l[c];for(let c=0;c<l.length;c++)"ref"in l[c]&&(l[c]=pd(l[c],a[l[c].ref]));return l},r.b=qi,r.b0=function(l,a){return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},r.b1=function(l,a,c){return l[0]=a[0]*c[0],l[1]=a[1]*c[1],l[2]=a[2]*c[2],l[3]=a[3]*c[3],l},r.b2=function(l,a){return l[0]*a[0]+l[1]*a[1]+l[2]*a[2]+l[3]*a[3]},r.b3=Ve,r.b4=WO,r.b5=GO,r.b6=function(l,a,c,h,m){var b,w=1/Math.tan(a/2);return l[0]=w/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=w,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,m!=null&&m!==1/0?(l[10]=(m+h)*(b=1/(h-m)),l[14]=2*m*h*b):(l[10]=-1,l[14]=-2*h),l},r.b7=function(l,a,c){var h=Math.sin(c),m=Math.cos(c),b=a[4],w=a[5],S=a[6],E=a[7],A=a[8],M=a[9],O=a[10],F=a[11];return a!==l&&(l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15]),l[4]=b*m+A*h,l[5]=w*m+M*h,l[6]=S*m+O*h,l[7]=E*m+F*h,l[8]=A*m-b*h,l[9]=M*m-w*h,l[10]=O*m-S*h,l[11]=F*m-E*h,l},r.b8=xe,r.b9=Pe,r.bA=vO,r.bB=function(l){return l.message===gr},r.bC=Wc,r.bD=Eo,r.ba=function(l){return l*Math.PI/180},r.bb=function(l,a){let{x:c,y:h}=dy.fromLngLat(a);return!(l<0||l>25||h<0||h>=1||c<0||c>=1)},r.bc=function(l,a){return l[0]=a[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=a[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=a[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},r.bd=class extends P{},r.be=_E,r.bf=XW,r.bh=Xn,r.bi=function(l,a){ko.REGISTERED_PROTOCOLS[l]=a},r.bj=function(l){delete ko.REGISTERED_PROTOCOLS[l]},r.bk=function(l,a){let c={};for(let m=0;m<l.length;m++){let b=a&&a[l[m].id]||x0(l[m]);a&&(a[l[m].id]=b);let w=c[b];w||(w=c[b]=[]),w.push(l[m])}let h=[];for(let m in c)h.push(c[m]);return h},r.bl=at,r.bm=KO,r.bn=JO,r.bo=TO,r.bp=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ki/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;let a=l.bucket.layers[0],c=a.layout,h=a._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new di(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new di(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new di(18))};if(l.bucket.textSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=l.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new di(A),l.canonical),h["text-size"].possiblyEvaluate(new di(M),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=l.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new di(A),l.canonical),h["icon-size"].possiblyEvaluate(new di(M),l.canonical)]}let b=c.get("text-line-height")*nr,w=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",S=c.get("text-keep-upright"),E=c.get("text-size");for(let A of l.bucket.features){let M=c.get("text-font").evaluate(A,{},l.canonical).join(","),O=E.evaluate(A,{},l.canonical),F=m.layoutTextSize.evaluate(A,{},l.canonical),z=m.layoutIconSize.evaluate(A,{},l.canonical),H={horizontal:{},vertical:void 0},$=A.text,Q,oe=[0,0];if($){let ye=$.toString(),Te=c.get("text-letter-spacing").evaluate(A,{},l.canonical)*nr,Le=BC(ye)?Te:0,nt=c.get("text-anchor").evaluate(A,{},l.canonical),It=ck(a,A,l.canonical);if(!It){let lt=c.get("text-radial-offset").evaluate(A,{},l.canonical);oe=lt?lk(nt,[lt*nr,wE]):c.get("text-offset").evaluate(A,{},l.canonical).map(ot=>ot*nr)}let et=w?"center":c.get("text-justify").evaluate(A,{},l.canonical),Ye=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(A,{},l.canonical)*nr:1/0,yt=()=>{l.bucket.allowVerticalPlacement&&qg(ye)&&(H.vertical=$0($,l.glyphMap,l.glyphPositions,l.imagePositions,M,Ye,b,nt,"left",Le,oe,r.ah.vertical,!0,F,O))};if(!w&&It){let lt=new Set;if(et==="auto")for(let Oe=0;Oe<It.values.length;Oe+=2)lt.add(xE(It.values[Oe]));else lt.add(et);let ot=!1;for(let Oe of lt)if(!H.horizontal[Oe])if(ot)H.horizontal[Oe]=H.horizontal[0];else{let bt=$0($,l.glyphMap,l.glyphPositions,l.imagePositions,M,Ye,b,"center",Oe,Le,oe,r.ah.horizontal,!1,F,O);bt&&(H.horizontal[Oe]=bt,ot=bt.positionedLines.length===1)}yt()}else{et==="auto"&&(et=xE(nt));let lt=$0($,l.glyphMap,l.glyphPositions,l.imagePositions,M,Ye,b,nt,et,Le,oe,r.ah.horizontal,!1,F,O);lt&&(H.horizontal[et]=lt),yt(),qg(ye)&&w&&S&&(H.vertical=$0($,l.glyphMap,l.glyphPositions,l.imagePositions,M,Ye,b,nt,et,Le,oe,r.ah.vertical,!1,F,O))}}let we=!1;if(A.icon&&A.icon.name){let ye=l.imageMap[A.icon.name];ye&&(Q=kW(l.imagePositions[A.icon.name],c.get("icon-offset").evaluate(A,{},l.canonical),c.get("icon-anchor").evaluate(A,{},l.canonical)),we=!!ye.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=we:l.bucket.sdfIcons!==we&&Et("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ye.pixelRatio!==l.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}let ue=dk(H.horizontal)||H.vertical;l.bucket.iconsInText=!!ue&&ue.iconsInText,(ue||Q)&&YW(l.bucket,A,H,Q,l.imageMap,m,F,z,oe,we,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},r.bq=sE,r.br=iE,r.bs=oE,r.bt=uu,r.bu=lE,r.bv=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},r.bw=function(l,a,c,h,m){return o(this,void 0,void 0,function*(){if(be())try{return yield mr(l,a,c,h,m)}catch{}return function(b,w,S,E,A){let M=b.width,O=b.height;tr&&Jn||(tr=new OffscreenCanvas(M,O),Jn=tr.getContext("2d",{willReadFrequently:!0})),tr.width=M,tr.height=O,Jn.drawImage(b,0,0,M,O);let F=Jn.getImageData(w,S,E,A);return Jn.clearRect(0,0,M,O),F.data}(l,a,c,h,m)})},r.bx=ZO,r.by=d,r.bz=g,r.c=Bi,r.d=l=>o(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));let a=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(a)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),r.e=We,r.f=l=>new Promise((a,c)=>{let h=new Image;h.onload=()=>{a(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Ls})},h.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let m=new Blob([new Uint8Array(l)],{type:"image/png"});h.src=l.byteLength?URL.createObjectURL(m):Ls}),r.g=io,r.h=(l,a)=>wa(We(l,{type:"json"}),a),r.i=Qt,r.j=Ka,r.k=Za,r.l=(l,a)=>wa(We(l,{type:"arrayBuffer"}),a),r.m=wa,r.n=function(l){return new lE(l).readFields(DW,[])},r.o=ty,r.p=DO,r.q=_,r.r=FC,r.s=Bs,r.t=Hg,r.u=ec,r.v=De,r.w=Et,r.x=function([l,a,c]){return a+=90,a*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(a)*Math.sin(c),y:l*Math.sin(a)*Math.sin(c),z:l*Math.cos(c)}},r.y=oo,r.z=di}),t("worker",["./shared"],function(r){"use strict";class o{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,B){for(let ee of U){this._layerConfigs[ee.id]=ee;let de=this._layers[ee.id]=r.aA(ee);de._featureFilter=r.a7(de.filter),this.keyCache[ee.id]&&delete this.keyCache[ee.id]}for(let ee of B)delete this.keyCache[ee],delete this._layerConfigs[ee],delete this._layers[ee];this.familiesBySource={};let W=r.bk(Object.values(this._layerConfigs),this.keyCache);for(let ee of W){let de=ee.map(Ee=>this._layers[Ee.id]),fe=de[0];if(fe.visibility==="none")continue;let ve=fe.source||"",le=this.familiesBySource[ve];le||(le=this.familiesBySource[ve]={});let Ae=fe.sourceLayer||"_geojsonTileLayer",Fe=le[Ae];Fe||(Fe=le[Ae]=[]),Fe.push(de)}}}class d{constructor(U){let B={},W=[];for(let ve in U){let le=U[ve],Ae=B[ve]={};for(let Fe in le){let Ee=le[+Fe];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;let $e={x:0,y:0,w:Ee.bitmap.width+2,h:Ee.bitmap.height+2};W.push($e),Ae[Fe]={rect:$e,metrics:Ee.metrics}}}let{w:ee,h:de}=r.p(W),fe=new r.o({width:ee||1,height:de||1});for(let ve in U){let le=U[ve];for(let Ae in le){let Fe=le[+Ae];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;let Ee=B[ve][Ae].rect;r.o.copy(Fe.bitmap,fe,{x:0,y:0},{x:Ee.x+1,y:Ee.y+1},Fe.bitmap)}}this.image=fe,this.positions=B}}r.bl("GlyphAtlas",d);class g{constructor(U){this.tileID=new r.S(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId,this.inFlightDependencies=[]}parse(U,B,W,ee){return r._(this,void 0,void 0,function*(){this.status="parsing",this.data=U,this.collisionBoxArray=new r.a5;let de=new r.bm(Object.keys(U.layers).sort()),fe=new r.bn(this.tileID,this.promoteId);fe.bucketLayerIDs=[];let ve={},le={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Ae=B.familiesBySource[this.source];for(let ln in Ae){let zn=U.layers[ln];if(!zn)continue;zn.version===1&&r.w(`Vector tile source "${this.source}" layer "${ln}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let vi=de.encode(ln),or=[];for(let yr=0;yr<zn.length;yr++){let $r=zn.feature(yr),Fc=fe.getId($r,ln);or.push({feature:$r,id:Fc,index:yr,sourceLayerIndex:vi})}for(let yr of Ae[ln]){let $r=yr[0];$r.source!==this.source&&r.w(`layer.source = ${$r.source} does not equal this.source = ${this.source}`),$r.minzoom&&this.zoom<Math.floor($r.minzoom)||$r.maxzoom&&this.zoom>=$r.maxzoom||$r.visibility!=="none"&&(v(yr,this.zoom,W),(ve[$r.id]=$r.createBucket({index:fe.bucketLayerIDs.length,layers:yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vi,sourceID:this.source})).populate(or,le,this.tileID.canonical),fe.bucketLayerIDs.push(yr.map(Fc=>Fc.id)))}}let Fe=r.aF(le.glyphDependencies,ln=>Object.keys(ln).map(Number));this.inFlightDependencies.forEach(ln=>ln?.abort()),this.inFlightDependencies=[];let Ee=Promise.resolve({});if(Object.keys(Fe).length){let ln=new AbortController;this.inFlightDependencies.push(ln),Ee=ee.sendAsync({type:"GG",data:{stacks:Fe,source:this.source,tileID:this.tileID,type:"glyphs"}},ln)}let $e=Object.keys(le.iconDependencies),wt=Promise.resolve({});if($e.length){let ln=new AbortController;this.inFlightDependencies.push(ln),wt=ee.sendAsync({type:"GI",data:{icons:$e,source:this.source,tileID:this.tileID,type:"icons"}},ln)}let St=Object.keys(le.patternDependencies),Cn=Promise.resolve({});if(St.length){let ln=new AbortController;this.inFlightDependencies.push(ln),Cn=ee.sendAsync({type:"GI",data:{icons:St,source:this.source,tileID:this.tileID,type:"patterns"}},ln)}let[Yt,En,fn]=yield Promise.all([Ee,wt,Cn]),Wi=new d(Yt),Ai=new r.bo(En,fn);for(let ln in ve){let zn=ve[ln];zn instanceof r.a6?(v(zn.layers,this.zoom,W),r.bp({bucket:zn,glyphMap:Yt,glyphPositions:Wi.positions,imageMap:En,imagePositions:Ai.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):zn.hasPattern&&(zn instanceof r.bq||zn instanceof r.br||zn instanceof r.bs)&&(v(zn.layers,this.zoom,W),zn.addFeatures(le,this.tileID.canonical,Ai.patternPositions))}return this.status="done",{buckets:Object.values(ve).filter(ln=>!ln.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wi.image,imageAtlas:Ai,glyphMap:this.returnDependencies?Yt:null,iconMap:this.returnDependencies?En:null,glyphPositions:this.returnDependencies?Wi.positions:null}})}}function v(ie,U,B){let W=new r.z(U);for(let ee of ie)ee.recalculate(W,B)}class x{constructor(U,B,W){this.actor=U,this.layerIndex=B,this.availableImages=W,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(U,B){return r._(this,void 0,void 0,function*(){let W=yield r.l(U.request,B);try{return{vectorTile:new r.bt.VectorTile(new r.bu(W.data)),rawData:W.data,cacheControl:W.cacheControl,expires:W.expires}}catch(ee){let de=new Uint8Array(W.data),fe=`Unable to parse the tile at ${U.request.url}, `;throw fe+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ee.message}`,new Error(fe)}})}loadTile(U){return r._(this,void 0,void 0,function*(){let B=U.uid,W=!!(U&&U.request&&U.request.collectResourceTiming)&&new r.bv(U.request),ee=new g(U);this.loading[B]=ee;let de=new AbortController;ee.abort=de;try{let fe=yield this.loadVectorTile(U,de);if(delete this.loading[B],!fe)return null;let ve=fe.rawData,le={};fe.expires&&(le.expires=fe.expires),fe.cacheControl&&(le.cacheControl=fe.cacheControl);let Ae={};if(W){let Ee=W.finish();Ee&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ee)))}ee.vectorTile=fe.vectorTile;let Fe=ee.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[B]=ee,this.fetching[B]={rawTileData:ve,cacheControl:le,resourceTiming:Ae};try{let Ee=yield Fe;return r.e({rawTileData:ve.slice(0)},Ee,le,Ae)}finally{delete this.fetching[B]}}catch(fe){throw delete this.loading[B],ee.status="done",this.loaded[B]=ee,fe}})}reloadTile(U){return r._(this,void 0,void 0,function*(){let B=U.uid;if(!this.loaded||!this.loaded[B])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let W=this.loaded[B];if(W.showCollisionBoxes=U.showCollisionBoxes,W.status==="parsing"){let ee=yield W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor),de;if(this.fetching[B]){let{rawTileData:fe,cacheControl:ve,resourceTiming:le}=this.fetching[B];delete this.fetching[B],de=r.e({rawTileData:fe.slice(0)},ee,ve,le)}else de=ee;return de}if(W.status==="done"&&W.vectorTile)return W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(U){return r._(this,void 0,void 0,function*(){let B=this.loading,W=U.uid;B&&B[W]&&B[W].abort&&(B[W].abort.abort(),delete B[W])})}removeTile(U){return r._(this,void 0,void 0,function*(){this.loaded&&this.loaded[U.uid]&&delete this.loaded[U.uid]})}}class D{constructor(){this.loaded={}}loadTile(U){return r._(this,void 0,void 0,function*(){let{uid:B,encoding:W,rawImageData:ee,redFactor:de,greenFactor:fe,blueFactor:ve,baseShift:le}=U,Ae=ee.width+2,Fe=ee.height+2,Ee=r.b(ee)?new r.R({width:Ae,height:Fe},yield r.bw(ee,-1,-1,Ae,Fe)):ee,$e=new r.bx(B,Ee,W,de,fe,ve,le);return this.loaded=this.loaded||{},this.loaded[B]=$e,$e})}removeTile(U){let B=this.loaded,W=U.uid;B&&B[W]&&delete B[W]}}function R(ie,U){if(ie.length!==0){L(ie[0],U);for(var B=1;B<ie.length;B++)L(ie[B],!U)}}function L(ie,U){for(var B=0,W=0,ee=0,de=ie.length,fe=de-1;ee<de;fe=ee++){var ve=(ie[ee][0]-ie[fe][0])*(ie[fe][1]+ie[ee][1]),le=B+ve;W+=Math.abs(B)>=Math.abs(ve)?B-le+ve:ve-le+B,B=le}B+W>=0!=!!U&&ie.reverse()}var j=r.by(function ie(U,B){var W,ee=U&&U.type;if(ee==="FeatureCollection")for(W=0;W<U.features.length;W++)ie(U.features[W],B);else if(ee==="GeometryCollection")for(W=0;W<U.geometries.length;W++)ie(U.geometries[W],B);else if(ee==="Feature")ie(U.geometry,B);else if(ee==="Polygon")R(U.coordinates,B);else if(ee==="MultiPolygon")for(W=0;W<U.coordinates.length;W++)R(U.coordinates[W],B);return U});let J=r.bt.VectorTileFeature.prototype.toGeoJSON;var re={exports:{}},be=r.bz,xe=r.bt.VectorTileFeature,Pe=Ne;function Ne(ie,U){this.options=U||{},this.features=ie,this.length=ie.length}function Ve(ie,U){this.id=typeof ie.id=="number"?ie.id:void 0,this.type=ie.type,this.rawGeometry=ie.type===1?[ie.geometry]:ie.geometry,this.properties=ie.tags,this.extent=U||4096}Ne.prototype.feature=function(ie){return new Ve(this.features[ie],this.options.extent)},Ve.prototype.loadGeometry=function(){var ie=this.rawGeometry;this.geometry=[];for(var U=0;U<ie.length;U++){for(var B=ie[U],W=[],ee=0;ee<B.length;ee++)W.push(new be(B[ee][0],B[ee][1]));this.geometry.push(W)}return this.geometry},Ve.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ie=this.geometry,U=1/0,B=-1/0,W=1/0,ee=-1/0,de=0;de<ie.length;de++)for(var fe=ie[de],ve=0;ve<fe.length;ve++){var le=fe[ve];U=Math.min(U,le.x),B=Math.max(B,le.x),W=Math.min(W,le.y),ee=Math.max(ee,le.y)}return[U,W,B,ee]},Ve.prototype.toGeoJSON=xe.prototype.toGeoJSON;var We=r.bA,rt=Pe;function gt(ie){var U=new We;return function(B,W){for(var ee in B.layers)W.writeMessage(3,Gt,B.layers[ee])}(ie,U),U.finish()}function Gt(ie,U){var B;U.writeVarintField(15,ie.version||1),U.writeStringField(1,ie.name||""),U.writeVarintField(5,ie.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<ie.length;B++)W.feature=ie.feature(B),U.writeMessage(2,st,W);var ee=W.keys;for(B=0;B<ee.length;B++)U.writeStringField(3,ee[B]);var de=W.values;for(B=0;B<de.length;B++)U.writeMessage(4,Ei,de[B])}function st(ie,U){var B=ie.feature;B.id!==void 0&&U.writeVarintField(1,B.id),U.writeMessage(2,Gn,ie),U.writeVarintField(3,B.type),U.writeMessage(4,Qt,B)}function Gn(ie,U){var B=ie.feature,W=ie.keys,ee=ie.values,de=ie.keycache,fe=ie.valuecache;for(var ve in B.properties){var le=B.properties[ve],Ae=de[ve];if(le!==null){Ae===void 0&&(W.push(ve),de[ve]=Ae=W.length-1),U.writeVarint(Ae);var Fe=typeof le;Fe!=="string"&&Fe!=="boolean"&&Fe!=="number"&&(le=JSON.stringify(le));var Ee=Fe+":"+le,$e=fe[Ee];$e===void 0&&(ee.push(le),fe[Ee]=$e=ee.length-1),U.writeVarint($e)}}}function Et(ie,U){return(U<<3)+(7&ie)}function en(ie){return ie<<1^ie>>31}function Qt(ie,U){for(var B=ie.loadGeometry(),W=ie.type,ee=0,de=0,fe=B.length,ve=0;ve<fe;ve++){var le=B[ve],Ae=1;W===1&&(Ae=le.length),U.writeVarint(Et(1,Ae));for(var Fe=W===3?le.length-1:le.length,Ee=0;Ee<Fe;Ee++){Ee===1&&W!==1&&U.writeVarint(Et(2,Fe-1));var $e=le[Ee].x-ee,wt=le[Ee].y-de;U.writeVarint(en($e)),U.writeVarint(en(wt)),ee+=$e,de+=wt}W===3&&U.writeVarint(Et(7,1))}}function Ei(ie,U){var B=typeof ie;B==="string"?U.writeStringField(1,ie):B==="boolean"?U.writeBooleanField(7,ie):B==="number"&&(ie%1!=0?U.writeDoubleField(3,ie):ie<0?U.writeSVarintField(6,ie):U.writeVarintField(5,ie))}re.exports=gt,re.exports.fromVectorTileJs=gt,re.exports.fromGeojsonVt=function(ie,U){U=U||{};var B={};for(var W in ie)B[W]=new rt(ie[W].features,U),B[W].name=W,B[W].version=U.version,B[W].extent=U.extent;return gt({layers:B})},re.exports.GeoJSONWrapper=rt;var qi=r.by(re.exports);let Ls={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ie=>ie},mr=Math.fround||(tr=new Float32Array(1),ie=>(tr[0]=+ie,tr[0]));var tr;let Jn=3,gr=5,Bi=6;class ko{constructor(U){this.options=Object.assign(Object.create(Ls),U),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(U){let{log:B,minZoom:W,maxZoom:ee}=this.options;B&&console.time("total time");let de=`prepare ${U.length} points`;B&&console.time(de),this.points=U;let fe=[];for(let le=0;le<U.length;le++){let Ae=U[le];if(!Ae.geometry)continue;let[Fe,Ee]=Ae.geometry.coordinates,$e=mr(Xn(Fe)),wt=mr(bo(Ee));fe.push($e,wt,1/0,le,-1,1),this.options.reduce&&fe.push(0)}let ve=this.trees[ee+1]=this._createTree(fe);B&&console.timeEnd(de);for(let le=ee;le>=W;le--){let Ae=+Date.now();ve=this.trees[le]=this._createTree(this._cluster(ve,le)),B&&console.log("z%d: %d clusters in %dms",le,ve.numItems,+Date.now()-Ae)}return B&&console.timeEnd("total time"),this}getClusters(U,B){let W=((U[0]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,U[1])),de=U[2]===180?180:((U[2]+180)%360+360)%360-180,fe=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)W=-180,de=180;else if(W>de){let Ee=this.getClusters([W,ee,180,fe],B),$e=this.getClusters([-180,ee,de,fe],B);return Ee.concat($e)}let ve=this.trees[this._limitZoom(B)],le=ve.range(Xn(W),bo(fe),Xn(de),bo(ee)),Ae=ve.data,Fe=[];for(let Ee of le){let $e=this.stride*Ee;Fe.push(Ae[$e+gr]>1?io(Ae,$e,this.clusterProps):this.points[Ae[$e+Jn]])}return Fe}getChildren(U){let B=this._getOriginId(U),W=this._getOriginZoom(U),ee="No cluster with the specified id.",de=this.trees[W];if(!de)throw new Error(ee);let fe=de.data;if(B*this.stride>=fe.length)throw new Error(ee);let ve=this.options.radius/(this.options.extent*Math.pow(2,W-1)),le=de.within(fe[B*this.stride],fe[B*this.stride+1],ve),Ae=[];for(let Fe of le){let Ee=Fe*this.stride;fe[Ee+4]===U&&Ae.push(fe[Ee+gr]>1?io(fe,Ee,this.clusterProps):this.points[fe[Ee+Jn]])}if(Ae.length===0)throw new Error(ee);return Ae}getLeaves(U,B,W){let ee=[];return this._appendLeaves(ee,U,B=B||10,W=W||0,0),ee}getTile(U,B,W){let ee=this.trees[this._limitZoom(U)],de=Math.pow(2,U),{extent:fe,radius:ve}=this.options,le=ve/fe,Ae=(W-le)/de,Fe=(W+1+le)/de,Ee={features:[]};return this._addTileFeatures(ee.range((B-le)/de,Ae,(B+1+le)/de,Fe),ee.data,B,W,de,Ee),B===0&&this._addTileFeatures(ee.range(1-le/de,Ae,1,Fe),ee.data,de,W,de,Ee),B===de-1&&this._addTileFeatures(ee.range(0,Ae,le/de,Fe),ee.data,-1,W,de,Ee),Ee.features.length?Ee:null}getClusterExpansionZoom(U){let B=this._getOriginZoom(U)-1;for(;B<=this.options.maxZoom;){let W=this.getChildren(U);if(B++,W.length!==1)break;U=W[0].properties.cluster_id}return B}_appendLeaves(U,B,W,ee,de){let fe=this.getChildren(B);for(let ve of fe){let le=ve.properties;if(le&&le.cluster?de+le.point_count<=ee?de+=le.point_count:de=this._appendLeaves(U,le.cluster_id,W,ee,de):de<ee?de++:U.push(ve),U.length===W)break}return de}_createTree(U){let B=new r.av(U.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<U.length;W+=this.stride)B.add(U[W],U[W+1]);return B.finish(),B.data=U,B}_addTileFeatures(U,B,W,ee,de,fe){for(let ve of U){let le=ve*this.stride,Ae=B[le+gr]>1,Fe,Ee,$e;if(Ae)Fe=un(B,le,this.clusterProps),Ee=B[le],$e=B[le+1];else{let Cn=this.points[B[le+Jn]];Fe=Cn.properties;let[Yt,En]=Cn.geometry.coordinates;Ee=Xn(Yt),$e=bo(En)}let wt={type:1,geometry:[[Math.round(this.options.extent*(Ee*de-W)),Math.round(this.options.extent*($e*de-ee))]],tags:Fe},St;St=Ae||this.options.generateId?B[le+Jn]:this.points[B[le+Jn]].id,St!==void 0&&(wt.id=St),fe.features.push(wt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,B){let{radius:W,extent:ee,reduce:de,minPoints:fe}=this.options,ve=W/(ee*Math.pow(2,B)),le=U.data,Ae=[],Fe=this.stride;for(let Ee=0;Ee<le.length;Ee+=Fe){if(le[Ee+2]<=B)continue;le[Ee+2]=B;let $e=le[Ee],wt=le[Ee+1],St=U.within(le[Ee],le[Ee+1],ve),Cn=le[Ee+gr],Yt=Cn;for(let En of St){let fn=En*Fe;le[fn+2]>B&&(Yt+=le[fn+gr])}if(Yt>Cn&&Yt>=fe){let En,fn=$e*Cn,Wi=wt*Cn,Ai=-1,ln=((Ee/Fe|0)<<5)+(B+1)+this.points.length;for(let zn of St){let vi=zn*Fe;if(le[vi+2]<=B)continue;le[vi+2]=B;let or=le[vi+gr];fn+=le[vi]*or,Wi+=le[vi+1]*or,le[vi+4]=ln,de&&(En||(En=this._map(le,Ee,!0),Ai=this.clusterProps.length,this.clusterProps.push(En)),de(En,this._map(le,vi)))}le[Ee+4]=ln,Ae.push(fn/Yt,Wi/Yt,1/0,ln,-1,Yt),de&&Ae.push(Ai)}else{for(let En=0;En<Fe;En++)Ae.push(le[Ee+En]);if(Yt>1)for(let En of St){let fn=En*Fe;if(!(le[fn+2]<=B)){le[fn+2]=B;for(let Wi=0;Wi<Fe;Wi++)Ae.push(le[fn+Wi])}}}}return Ae}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,B,W){if(U[B+gr]>1){let fe=this.clusterProps[U[B+Bi]];return W?Object.assign({},fe):fe}let ee=this.points[U[B+Jn]].properties,de=this.options.map(ee);return W&&de===ee?Object.assign({},de):de}}function io(ie,U,B){return{type:"Feature",id:ie[U+Jn],properties:un(ie,U,B),geometry:{type:"Point",coordinates:[(W=ie[U],360*(W-.5)),wa(ie[U+1])]}};var W}function un(ie,U,B){let W=ie[U+gr],ee=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,de=ie[U+Bi],fe=de===-1?{}:Object.assign({},B[de]);return Object.assign(fe,{cluster:!0,cluster_id:ie[U+Jn],point_count:W,point_count_abbreviated:ee})}function Xn(ie){return ie/360+.5}function bo(ie){let U=Math.sin(ie*Math.PI/180),B=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return B<0?0:B>1?1:B}function wa(ie){let U=(180-360*ie)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Bs(ie,U,B,W){let ee=W,de=U+(B-U>>1),fe,ve=B-U,le=ie[U],Ae=ie[U+1],Fe=ie[B],Ee=ie[B+1];for(let $e=U+3;$e<B;$e+=3){let wt=Wa(ie[$e],ie[$e+1],le,Ae,Fe,Ee);if(wt>ee)fe=$e,ee=wt;else if(wt===ee){let St=Math.abs($e-de);St<ve&&(fe=$e,ve=St)}}ee>W&&(fe-U>3&&Bs(ie,U,fe,W),ie[fe+2]=ee,B-fe>3&&Bs(ie,fe,B,W))}function Wa(ie,U,B,W,ee,de){let fe=ee-B,ve=de-W;if(fe!==0||ve!==0){let le=((ie-B)*fe+(U-W)*ve)/(fe*fe+ve*ve);le>1?(B=ee,W=de):le>0&&(B+=fe*le,W+=ve*le)}return fe=ie-B,ve=U-W,fe*fe+ve*ve}function xa(ie,U,B,W){let ee={id:ie??null,type:U,geometry:B,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(U==="Point"||U==="MultiPoint"||U==="LineString")Za(ee,B);else if(U==="Polygon")Za(ee,B[0]);else if(U==="MultiLineString")for(let de of B)Za(ee,de);else if(U==="MultiPolygon")for(let de of B)Za(ee,de[0]);return ee}function Za(ie,U){for(let B=0;B<U.length;B+=3)ie.minX=Math.min(ie.minX,U[B]),ie.minY=Math.min(ie.minY,U[B+1]),ie.maxX=Math.max(ie.maxX,U[B]),ie.maxY=Math.max(ie.maxY,U[B+1])}function Ka(ie,U,B,W){if(!U.geometry)return;let ee=U.geometry.coordinates;if(ee&&ee.length===0)return;let de=U.geometry.type,fe=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),ve=[],le=U.id;if(B.promoteId?le=U.properties[B.promoteId]:B.generateId&&(le=W||0),de==="Point")kc(ee,ve);else if(de==="MultiPoint")for(let Ae of ee)kc(Ae,ve);else if(de==="LineString")De(ee,ve,fe,!1);else if(de==="MultiLineString"){if(B.lineMetrics){for(let Ae of ee)ve=[],De(Ae,ve,fe,!1),ie.push(xa(le,"LineString",ve,U.properties));return}jl(ee,ve,fe,!1)}else if(de==="Polygon")jl(ee,ve,fe,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(let Ae of U.geometry.geometries)Ka(ie,{id:le,geometry:Ae,properties:U.properties},B,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ae of ee){let Fe=[];jl(Ae,Fe,fe,!0),ve.push(Fe)}}ie.push(xa(le,de,ve,U.properties))}function kc(ie,U){U.push(pd(ie[0]),Rn(ie[1]),0)}function De(ie,U,B,W){let ee,de,fe=0;for(let le=0;le<ie.length;le++){let Ae=pd(ie[le][0]),Fe=Rn(ie[le][1]);U.push(Ae,Fe,0),le>0&&(fe+=W?(ee*Fe-Ae*de)/2:Math.sqrt(Math.pow(Ae-ee,2)+Math.pow(Fe-de,2))),ee=Ae,de=Fe}let ve=U.length-3;U[2]=1,Bs(U,0,ve,B),U[ve+2]=1,U.size=Math.abs(fe),U.start=0,U.end=U.size}function jl(ie,U,B,W){for(let ee=0;ee<ie.length;ee++){let de=[];De(ie[ee],de,B,W),U.push(de)}}function pd(ie){return ie/360+.5}function Rn(ie){let U=Math.sin(ie*Math.PI/180),B=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return B<0?0:B>1?1:B}function Ti(ie,U,B,W,ee,de,fe,ve){if(W/=U,de>=(B/=U)&&fe<W)return ie;if(fe<B||de>=W)return null;let le=[];for(let Ae of ie){let Fe=Ae.geometry,Ee=Ae.type,$e=ee===0?Ae.minX:Ae.minY,wt=ee===0?Ae.maxX:Ae.maxY;if($e>=B&&wt<W){le.push(Ae);continue}if(wt<B||$e>=W)continue;let St=[];if(Ee==="Point"||Ee==="MultiPoint")fd(Fe,St,B,W,ee);else if(Ee==="LineString")Ya(Fe,St,B,W,ee,!1,ve.lineMetrics);else if(Ee==="MultiLineString")Nc(Fe,St,B,W,ee,!1);else if(Ee==="Polygon")Nc(Fe,St,B,W,ee,!0);else if(Ee==="MultiPolygon")for(let Cn of Fe){let Yt=[];Nc(Cn,Yt,B,W,ee,!0),Yt.length&&St.push(Yt)}if(St.length){if(ve.lineMetrics&&Ee==="LineString"){for(let Cn of St)le.push(xa(Ae.id,Ee,Cn,Ae.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(St.length===1?(Ee="LineString",St=St[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=St.length===3?"Point":"MultiPoint"),le.push(xa(Ae.id,Ee,St,Ae.tags))}}return le.length?le:null}function fd(ie,U,B,W,ee){for(let de=0;de<ie.length;de+=3){let fe=ie[de+ee];fe>=B&&fe<=W&&No(U,ie[de],ie[de+1],ie[de+2])}}function Ya(ie,U,B,W,ee,de,fe){let ve=Sa(ie),le=ee===0?md:gd,Ae,Fe,Ee=ie.start;for(let Yt=0;Yt<ie.length-3;Yt+=3){let En=ie[Yt],fn=ie[Yt+1],Wi=ie[Yt+2],Ai=ie[Yt+3],ln=ie[Yt+4],zn=ee===0?En:fn,vi=ee===0?Ai:ln,or=!1;fe&&(Ae=Math.sqrt(Math.pow(En-Ai,2)+Math.pow(fn-ln,2))),zn<B?vi>B&&(Fe=le(ve,En,fn,Ai,ln,B),fe&&(ve.start=Ee+Ae*Fe)):zn>W?vi<W&&(Fe=le(ve,En,fn,Ai,ln,W),fe&&(ve.start=Ee+Ae*Fe)):No(ve,En,fn,Wi),vi<B&&zn>=B&&(Fe=le(ve,En,fn,Ai,ln,B),or=!0),vi>W&&zn<=W&&(Fe=le(ve,En,fn,Ai,ln,W),or=!0),!de&&or&&(fe&&(ve.end=Ee+Ae*Fe),U.push(ve),ve=Sa(ie)),fe&&(Ee+=Ae)}let $e=ie.length-3,wt=ie[$e],St=ie[$e+1],Cn=ee===0?wt:St;Cn>=B&&Cn<=W&&No(ve,wt,St,ie[$e+2]),$e=ve.length-3,de&&$e>=3&&(ve[$e]!==ve[0]||ve[$e+1]!==ve[1])&&No(ve,ve[0],ve[1],ve[2]),ve.length&&U.push(ve)}function Sa(ie){let U=[];return U.size=ie.size,U.start=ie.start,U.end=ie.end,U}function Nc(ie,U,B,W,ee,de){for(let fe of ie)Ya(fe,U,B,W,ee,de,!1)}function No(ie,U,B,W){ie.push(U,B,W)}function md(ie,U,B,W,ee,de){let fe=(de-U)/(W-U);return No(ie,de,B+(ee-B)*fe,1),fe}function gd(ie,U,B,W,ee,de){let fe=(de-B)/(ee-B);return No(ie,U+(W-U)*fe,de,1),fe}function je(ie,U){let B=[];for(let W=0;W<ie.length;W++){let ee=ie[W],de=ee.type,fe;if(de==="Point"||de==="MultiPoint"||de==="LineString")fe=Us(ee.geometry,U);else if(de==="MultiLineString"||de==="Polygon"){fe=[];for(let ve of ee.geometry)fe.push(Us(ve,U))}else if(de==="MultiPolygon"){fe=[];for(let ve of ee.geometry){let le=[];for(let Ae of ve)le.push(Us(Ae,U));fe.push(le)}}B.push(xa(ee.id,de,fe,ee.tags))}return B}function Us(ie,U){let B=[];B.size=ie.size,ie.start!==void 0&&(B.start=ie.start,B.end=ie.end);for(let W=0;W<ie.length;W+=3)B.push(ie[W]+U,ie[W+1],ie[W+2]);return B}function Hr(ie,U){if(ie.transformed)return ie;let B=1<<ie.z,W=ie.x,ee=ie.y;for(let de of ie.features){let fe=de.geometry,ve=de.type;if(de.geometry=[],ve===1)for(let le=0;le<fe.length;le+=2)de.geometry.push(zs(fe[le],fe[le+1],U,B,W,ee));else for(let le=0;le<fe.length;le++){let Ae=[];for(let Fe=0;Fe<fe[le].length;Fe+=2)Ae.push(zs(fe[le][Fe],fe[le][Fe+1],U,B,W,ee));de.geometry.push(Ae)}}return ie.transformed=!0,ie}function zs(ie,U,B,W,ee,de){return[Math.round(B*(ie*W-ee)),Math.round(B*(U*W-de))]}function Ja(ie,U,B,W,ee){let de=U===ee.maxZoom?0:ee.tolerance/((1<<U)*ee.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:ie.length,source:null,x:B,y:W,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let ve of ie)Ze(fe,ve,de,ee);return fe}function Ze(ie,U,B,W){let ee=U.geometry,de=U.type,fe=[];if(ie.minX=Math.min(ie.minX,U.minX),ie.minY=Math.min(ie.minY,U.minY),ie.maxX=Math.max(ie.maxX,U.maxX),ie.maxY=Math.max(ie.maxY,U.maxY),de==="Point"||de==="MultiPoint")for(let ve=0;ve<ee.length;ve+=3)fe.push(ee[ve],ee[ve+1]),ie.numPoints++,ie.numSimplified++;else if(de==="LineString")sn(fe,ee,ie,B,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(let ve=0;ve<ee.length;ve++)sn(fe,ee[ve],ie,B,de==="Polygon",ve===0);else if(de==="MultiPolygon")for(let ve=0;ve<ee.length;ve++){let le=ee[ve];for(let Ae=0;Ae<le.length;Ae++)sn(fe,le[Ae],ie,B,!0,Ae===0)}if(fe.length){let ve=U.tags||null;if(de==="LineString"&&W.lineMetrics){ve={};for(let Ae in U.tags)ve[Ae]=U.tags[Ae];ve.mapbox_clip_start=ee.start/ee.size,ve.mapbox_clip_end=ee.end/ee.size}let le={geometry:fe,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:ve};U.id!==null&&(le.id=U.id),ie.features.push(le)}}function sn(ie,U,B,W,ee,de){let fe=W*W;if(W>0&&U.size<(ee?fe:W))return void(B.numPoints+=U.length/3);let ve=[];for(let le=0;le<U.length;le+=3)(W===0||U[le+2]>fe)&&(B.numSimplified++,ve.push(U[le],U[le+1])),B.numPoints++;ee&&function(le,Ae){let Fe=0;for(let Ee=0,$e=le.length,wt=$e-2;Ee<$e;wt=Ee,Ee+=2)Fe+=(le[Ee]-le[wt])*(le[Ee+1]+le[wt+1]);if(Fe>0===Ae)for(let Ee=0,$e=le.length;Ee<$e/2;Ee+=2){let wt=le[Ee],St=le[Ee+1];le[Ee]=le[$e-2-Ee],le[Ee+1]=le[$e-1-Ee],le[$e-2-Ee]=wt,le[$e-1-Ee]=St}}(ve,de),ie.push(ve)}let Lt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ro{constructor(U,B){let W=(B=this.options=function(de,fe){for(let ve in fe)de[ve]=fe[ve];return de}(Object.create(Lt),B)).debug;if(W&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");let ee=function(de,fe){let ve=[];if(de.type==="FeatureCollection")for(let le=0;le<de.features.length;le++)Ka(ve,de.features[le],fe,le);else Ka(ve,de.type==="Feature"?de:{geometry:de},fe);return ve}(U,B);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ee=function(de,fe){let ve=fe.buffer/fe.extent,le=de,Ae=Ti(de,1,-1-ve,ve,0,-1,2,fe),Fe=Ti(de,1,1-ve,2+ve,0,-1,2,fe);return(Ae||Fe)&&(le=Ti(de,1,-ve,1+ve,0,-1,2,fe)||[],Ae&&(le=je(Ae,1).concat(le)),Fe&&(le=le.concat(je(Fe,-1)))),le}(ee,B),ee.length&&this.splitTile(ee,0,0,0),W&&(ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(U,B,W,ee,de,fe,ve){let le=[U,B,W,ee],Ae=this.options,Fe=Ae.debug;for(;le.length;){ee=le.pop(),W=le.pop(),B=le.pop(),U=le.pop();let Ee=1<<B,$e=ns(B,W,ee),wt=this.tiles[$e];if(!wt&&(Fe>1&&console.time("creation"),wt=this.tiles[$e]=Ja(U,B,W,ee,Ae),this.tileCoords.push({z:B,x:W,y:ee}),Fe)){Fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,W,ee,wt.numFeatures,wt.numPoints,wt.numSimplified),console.timeEnd("creation"));let or=`z${B}`;this.stats[or]=(this.stats[or]||0)+1,this.total++}if(wt.source=U,de==null){if(B===Ae.indexMaxZoom||wt.numPoints<=Ae.indexMaxPoints)continue}else{if(B===Ae.maxZoom||B===de)continue;if(de!=null){let or=de-B;if(W!==fe>>or||ee!==ve>>or)continue}}if(wt.source=null,U.length===0)continue;Fe>1&&console.time("clipping");let St=.5*Ae.buffer/Ae.extent,Cn=.5-St,Yt=.5+St,En=1+St,fn=null,Wi=null,Ai=null,ln=null,zn=Ti(U,Ee,W-St,W+Yt,0,wt.minX,wt.maxX,Ae),vi=Ti(U,Ee,W+Cn,W+En,0,wt.minX,wt.maxX,Ae);U=null,zn&&(fn=Ti(zn,Ee,ee-St,ee+Yt,1,wt.minY,wt.maxY,Ae),Wi=Ti(zn,Ee,ee+Cn,ee+En,1,wt.minY,wt.maxY,Ae),zn=null),vi&&(Ai=Ti(vi,Ee,ee-St,ee+Yt,1,wt.minY,wt.maxY,Ae),ln=Ti(vi,Ee,ee+Cn,ee+En,1,wt.minY,wt.maxY,Ae),vi=null),Fe>1&&console.timeEnd("clipping"),le.push(fn||[],B+1,2*W,2*ee),le.push(Wi||[],B+1,2*W,2*ee+1),le.push(Ai||[],B+1,2*W+1,2*ee),le.push(ln||[],B+1,2*W+1,2*ee+1)}}getTile(U,B,W){U=+U,B=+B,W=+W;let ee=this.options,{extent:de,debug:fe}=ee;if(U<0||U>24)return null;let ve=1<<U,le=ns(U,B=B+ve&ve-1,W);if(this.tiles[le])return Hr(this.tiles[le],de);fe>1&&console.log("drilling down to z%d-%d-%d",U,B,W);let Ae,Fe=U,Ee=B,$e=W;for(;!Ae&&Fe>0;)Fe--,Ee>>=1,$e>>=1,Ae=this.tiles[ns(Fe,Ee,$e)];return Ae&&Ae.source?(fe>1&&(console.log("found parent tile z%d-%d-%d",Fe,Ee,$e),console.time("drilling down")),this.splitTile(Ae.source,Fe,Ee,$e,U,B,W),fe>1&&console.timeEnd("drilling down"),this.tiles[le]?Hr(this.tiles[le],de):null):null}}function ns(ie,U,B){return 32*((1<<ie)*B+U)+ie}function Wt(ie,U){return U?ie.properties[U]:ie.id}function Vs(ie,U){if(ie==null)return!0;if(ie.type==="Feature")return Wt(ie,U)!=null;if(ie.type==="FeatureCollection"){let B=new Set;for(let W of ie.features){let ee=Wt(W,U);if(ee==null||B.has(ee))return!1;B.add(ee)}return!0}return!1}function Ca(ie,U){let B=new Map;if(ie!=null)if(ie.type==="Feature")B.set(Wt(ie,U),ie);else for(let W of ie.features)B.set(Wt(W,U),W);return B}class Xa extends x{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(U,B){return r._(this,void 0,void 0,function*(){let W=U.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ee=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!ee)return null;let de=new class{constructor(ve){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.X,this.length=ve.length,this._features=ve}feature(ve){return new class{constructor(le){this._feature=le,this.extent=r.X,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))}loadGeometry(){if(this._feature.type===1){let le=[];for(let Ae of this._feature.geometry)le.push([new r.P(Ae[0],Ae[1])]);return le}{let le=[];for(let Ae of this._feature.geometry){let Fe=[];for(let Ee of Ae)Fe.push(new r.P(Ee[0],Ee[1]));le.push(Fe)}return le}}toGeoJSON(le,Ae,Fe){return J.call(this,le,Ae,Fe)}}(this._features[ve])}}(ee.features),fe=qi(de);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:de,rawData:fe.buffer}})}loadData(U){return r._(this,void 0,void 0,function*(){var B;(B=this._pendingRequest)===null||B===void 0||B.abort();let W=!!(U&&U.request&&U.request.collectResourceTiming)&&new r.bv(U.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(U,this._pendingRequest),this._geoJSONIndex=U.cluster?new ko(function({superclusterOptions:fe,clusterProperties:ve}){if(!ve||!fe)return fe;let le={},Ae={},Fe={accumulated:null,zoom:0},Ee={properties:null},$e=Object.keys(ve);for(let wt of $e){let[St,Cn]=ve[wt],Yt=r.bC(Cn),En=r.bC(typeof St=="string"?[St,["accumulated"],["get",wt]]:St);le[wt]=Yt.value,Ae[wt]=En.value}return fe.map=wt=>{Ee.properties=wt;let St={};for(let Cn of $e)St[Cn]=le[Cn].evaluate(Fe,Ee);return St},fe.reduce=(wt,St)=>{Ee.properties=St;for(let Cn of $e)Fe.accumulated=wt[Cn],wt[Cn]=Ae[Cn].evaluate(Fe,Ee)},fe}(U)).load((yield this._pendingData).features):(ee=yield this._pendingData,new ro(ee,U.geojsonVtOptions)),this.loaded={};let de={};if(W){let fe=W.finish();fe&&(de.resourceTiming={},de.resourceTiming[U.source]=JSON.parse(JSON.stringify(fe)))}return de}catch(de){if(delete this._pendingRequest,r.bB(de))return{abandoned:!0};throw de}var ee})}getData(){return r._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(U){let B=this.loaded;return B&&B[U.uid]?super.reloadTile(U):this.loadTile(U)}loadAndProcessGeoJSON(U,B){return r._(this,void 0,void 0,function*(){let W=yield this.loadGeoJSON(U,B);if(delete this._pendingRequest,typeof W!="object")throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(j(W,!0),U.filter){let ee=r.bC(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ee.result==="error")throw new Error(ee.value.map(fe=>`${fe.key}: ${fe.message}`).join(", "));W={type:"FeatureCollection",features:W.features.filter(fe=>ee.value.evaluate({zoom:0},fe))}}return W})}loadGeoJSON(U,B){return r._(this,void 0,void 0,function*(){let{promoteId:W}=U;if(U.request){let ee=yield r.h(U.request,B);return this._dataUpdateable=Vs(ee.data,W)?Ca(ee.data,W):void 0,ee.data}if(typeof U.data=="string")try{let ee=JSON.parse(U.data);return this._dataUpdateable=Vs(ee,W)?Ca(ee,W):void 0,ee}catch{throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`)}if(!U.dataDiff)throw new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${U.source}`);return function(ee,de,fe){var ve,le,Ae,Fe;if(de.removeAll&&ee.clear(),de.remove)for(let Ee of de.remove)ee.delete(Ee);if(de.add)for(let Ee of de.add){let $e=Wt(Ee,fe);$e!=null&&ee.set($e,Ee)}if(de.update)for(let Ee of de.update){let $e=ee.get(Ee.id);if($e==null)continue;let wt=!Ee.removeAllProperties&&(((ve=Ee.removeProperties)===null||ve===void 0?void 0:ve.length)>0||((le=Ee.addOrUpdateProperties)===null||le===void 0?void 0:le.length)>0);if((Ee.newGeometry||Ee.removeAllProperties||wt)&&($e=Object.assign({},$e),ee.set(Ee.id,$e),wt&&($e.properties=Object.assign({},$e.properties))),Ee.newGeometry&&($e.geometry=Ee.newGeometry),Ee.removeAllProperties)$e.properties={};else if(((Ae=Ee.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(let St of Ee.removeProperties)Object.prototype.hasOwnProperty.call($e.properties,St)&&delete $e.properties[St];if(((Fe=Ee.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0)for(let{key:St,value:Cn}of Ee.addOrUpdateProperties)$e.properties[St]=Cn}}(this._dataUpdateable,U.dataDiff,W),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(U){return r._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(U){return this._geoJSONIndex.getClusterExpansionZoom(U.clusterId)}getClusterChildren(U){return this._geoJSONIndex.getChildren(U.clusterId)}getClusterLeaves(U){return this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset)}}class js{constructor(U){this.self=U,this.actor=new r.F(U),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(B,W)=>{if(this.externalWorkerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.externalWorkerSourceTypes[B]=W},this.self.addProtocol=r.bi,this.self.removeProtocol=r.bj,this.self.registerRTLTextPlugin=B=>{if(r.bD.isParsed())throw new Error("RTL text plugin already registered.");r.bD.setMethods(B)},this.actor.registerMessageHandler("LDT",(B,W)=>this._getDEMWorkerSource(B,W.source).loadTile(W)),this.actor.registerMessageHandler("RDT",(B,W)=>r._(this,void 0,void 0,function*(){this._getDEMWorkerSource(B,W.source).removeTile(W)})),this.actor.registerMessageHandler("GCEZ",(B,W)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(B,W.type,W.source).getClusterExpansionZoom(W)})),this.actor.registerMessageHandler("GCC",(B,W)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(B,W.type,W.source).getClusterChildren(W)})),this.actor.registerMessageHandler("GCL",(B,W)=>r._(this,void 0,void 0,function*(){return this._getWorkerSource(B,W.type,W.source).getClusterLeaves(W)})),this.actor.registerMessageHandler("LD",(B,W)=>this._getWorkerSource(B,W.type,W.source).loadData(W)),this.actor.registerMessageHandler("GD",(B,W)=>this._getWorkerSource(B,W.type,W.source).getData()),this.actor.registerMessageHandler("LT",(B,W)=>this._getWorkerSource(B,W.type,W.source).loadTile(W)),this.actor.registerMessageHandler("RT",(B,W)=>this._getWorkerSource(B,W.type,W.source).reloadTile(W)),this.actor.registerMessageHandler("AT",(B,W)=>this._getWorkerSource(B,W.type,W.source).abortTile(W)),this.actor.registerMessageHandler("RMT",(B,W)=>this._getWorkerSource(B,W.type,W.source).removeTile(W)),this.actor.registerMessageHandler("RS",(B,W)=>r._(this,void 0,void 0,function*(){if(!this.workerSources[B]||!this.workerSources[B][W.type]||!this.workerSources[B][W.type][W.source])return;let ee=this.workerSources[B][W.type][W.source];delete this.workerSources[B][W.type][W.source],ee.removeSource!==void 0&&ee.removeSource(W)})),this.actor.registerMessageHandler("RM",B=>r._(this,void 0,void 0,function*(){delete this.layerIndexes[B],delete this.availableImages[B],delete this.workerSources[B],delete this.demWorkerSources[B]})),this.actor.registerMessageHandler("SR",(B,W)=>r._(this,void 0,void 0,function*(){this.referrer=W})),this.actor.registerMessageHandler("SRPS",(B,W)=>this._syncRTLPluginState(B,W)),this.actor.registerMessageHandler("IS",(B,W)=>r._(this,void 0,void 0,function*(){this.self.importScripts(W)})),this.actor.registerMessageHandler("SI",(B,W)=>this._setImages(B,W)),this.actor.registerMessageHandler("UL",(B,W)=>r._(this,void 0,void 0,function*(){this._getLayerIndex(B).update(W.layers,W.removedIds)})),this.actor.registerMessageHandler("SL",(B,W)=>r._(this,void 0,void 0,function*(){this._getLayerIndex(B).replace(W)}))}_setImages(U,B){return r._(this,void 0,void 0,function*(){this.availableImages[U]=B;for(let W in this.workerSources[U]){let ee=this.workerSources[U][W];for(let de in ee)ee[de].availableImages=B}})}_syncRTLPluginState(U,B){return r._(this,void 0,void 0,function*(){if(r.bD.isParsed())return r.bD.getState();if(B.pluginStatus!=="loading")return r.bD.setState(B),B;let W=B.pluginURL;if(this.self.importScripts(W),r.bD.isParsed()){let ee={pluginStatus:"loaded",pluginURL:W};return r.bD.setState(ee),ee}throw r.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${W}`)})}_getAvailableImages(U){let B=this.availableImages[U];return B||(B=[]),B}_getLayerIndex(U){let B=this.layerIndexes[U];return B||(B=this.layerIndexes[U]=new o),B}_getWorkerSource(U,B,W){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][B]||(this.workerSources[U][B]={}),!this.workerSources[U][B][W]){let ee={sendAsync:(de,fe)=>(de.targetMapId=U,this.actor.sendAsync(de,fe))};switch(B){case"vector":this.workerSources[U][B][W]=new x(ee,this._getLayerIndex(U),this._getAvailableImages(U));break;case"geojson":this.workerSources[U][B][W]=new Xa(ee,this._getLayerIndex(U),this._getAvailableImages(U));break;default:this.workerSources[U][B][W]=new this.externalWorkerSourceTypes[B](ee,this._getLayerIndex(U),this._getAvailableImages(U))}}return this.workerSources[U][B][W]}_getDEMWorkerSource(U,B){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][B]||(this.demWorkerSources[U][B]=new D),this.demWorkerSources[U][B]}}return r.i(self)&&(self.worker=new js(self)),js}),t("index",["exports","./shared"],function(r,o){"use strict";var d="4.7.1";let g,v,x={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((s,u)=>{let p=requestAnimationFrame(s);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),u(o.c())})}),getImageData(_,s=0){return this.getImageCanvasContext(_).getImageData(-s,-s,_.width+2*s,_.height+2*s)},getImageCanvasContext(_){let s=window.document.createElement("canvas"),u=s.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return s.width=_.width,s.height=_.height,u.drawImage(_,0,0,_.width,_.height),u},resolveURL:_=>(g||(g=document.createElement("a")),g.href=_,g.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(v==null&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};class D{static testProp(s){if(!D.docStyle)return s[0];for(let u=0;u<s.length;u++)if(s[u]in D.docStyle)return s[u];return s[0]}static create(s,u,p){let f=window.document.createElement(s);return u!==void 0&&(f.className=u),p&&p.appendChild(f),f}static createNS(s,u){return window.document.createElementNS(s,u)}static disableDrag(){D.docStyle&&D.selectProp&&(D.userSelect=D.docStyle[D.selectProp],D.docStyle[D.selectProp]="none")}static enableDrag(){D.docStyle&&D.selectProp&&(D.docStyle[D.selectProp]=D.userSelect)}static setTransform(s,u){s.style[D.transformProp]=u}static addEventListener(s,u,p,f={}){s.addEventListener(u,p,"passive"in f?f:f.capture)}static removeEventListener(s,u,p,f={}){s.removeEventListener(u,p,"passive"in f?f:f.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",D.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",D.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",D.suppressClickInternal,!0)},0)}static getScale(s){let u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}static getPoint(s,u,p){let f=u.boundingClientRect;return new o.P((p.clientX-f.left)/u.x-s.clientLeft,(p.clientY-f.top)/u.y-s.clientTop)}static mousePos(s,u){let p=D.getScale(s);return D.getPoint(s,p,u)}static touchPos(s,u){let p=[],f=D.getScale(s);for(let y=0;y<u.length;y++)p.push(D.getPoint(s,f,u[y]));return p}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}D.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,D.selectProp=D.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),D.transformProp=D.testProp(["transform","WebkitTransform"]);let R={supported:!1,testSupport:function(_){!J&&j&&(re?be(_):L=_)}},L,j,J=!1,re=!1;function be(_){let s=_.createTexture();_.bindTexture(_.TEXTURE_2D,s);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,j),_.isContextLost())return;R.supported=!0}catch{}_.deleteTexture(s),J=!0}var xe;typeof document<"u"&&(j=document.createElement("img"),j.onload=()=>{L&&be(L),L=null,re=!0},j.onerror=()=>{J=!0,L=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let s,u,p,f;_.resetRequestQueue=()=>{s=[],u=0,p=0,f={}},_.addThrottleControl=T=>{let P=p++;return f[P]=T,P},_.removeThrottleControl=T=>{delete f[T],C()},_.getImage=(T,P,k=!0)=>new Promise((N,V)=>{R.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),o.e(T,{type:"image"}),s.push({abortController:P,requestParameters:T,supportImageRefresh:k,state:"queued",onError:G=>{V(G)},onSuccess:G=>{N(G)}}),C()});let y=T=>o._(this,void 0,void 0,function*(){T.state="running";let{requestParameters:P,supportImageRefresh:k,onError:N,onSuccess:V,abortController:G}=T,K=k===!1&&!o.i(self)&&!o.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((ae,ce)=>ae&&ce==="accept",!0));u++;let te=K?I(P,G):o.m(P,G);try{let ae=yield te;delete T.abortController,T.state="completed",ae.data instanceof HTMLImageElement||o.b(ae.data)?V(ae):ae.data&&V({data:yield(se=ae.data,typeof createImageBitmap=="function"?o.d(se):o.f(se)),cacheControl:ae.cacheControl,expires:ae.expires})}catch(ae){delete T.abortController,N(ae)}finally{u--,C()}var se}),C=()=>{let T=(()=>{for(let P of Object.keys(f))if(f[P]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=u;P<T&&s.length>0;P++){let k=s.shift();k.abortController.signal.aborted?P--:y(k)}},I=(T,P)=>new Promise((k,N)=>{let V=new Image,G=T.url,K=T.credentials;K&&K==="include"?V.crossOrigin="use-credentials":(K&&K==="same-origin"||!o.s(G))&&(V.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{V.src="",N(o.c())}),V.fetchPriority="high",V.onload=()=>{V.onerror=V.onload=null,k({data:V})},V.onerror=()=>{V.onerror=V.onload=null,P.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},V.src=G})}(xe||(xe={})),xe.resetRequestQueue();class Pe{constructor(s){this._transformRequestFn=s}transformRequest(s,u){return this._transformRequestFn&&this._transformRequestFn(s,u)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function Ne(_){var s=new o.A(3);return s[0]=_[0],s[1]=_[1],s[2]=_[2],s}var Ve,We=function(_,s,u){return _[0]=s[0]-u[0],_[1]=s[1]-u[1],_[2]=s[2]-u[2],_};Ve=new o.A(3),o.A!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0);var rt=function(_){var s=_[0],u=_[1];return s*s+u*u};function gt(_){let s=[];if(typeof _=="string")s.push({id:"default",url:_});else if(_&&_.length>0){let u=[];for(let{id:p,url:f}of _){let y=`${p}${f}`;u.indexOf(y)===-1&&(u.push(y),s.push({id:p,url:f}))}}return s}function Gt(_,s,u){let p=_.split("?");return p[0]+=`${s}${u}`,p.join("?")}(function(){var _=new o.A(2);o.A!=Float32Array&&(_[0]=0,_[1]=0)})();class st{constructor(s,u,p,f){this.context=s,this.format=p,this.texture=s.gl.createTexture(),this.update(u,f)}update(s,u,p){let{width:f,height:y}=s,C=!(this.size&&this.size[0]===f&&this.size[1]===y||p),{context:I}=this,{gl:T}=I;if(this.useMipmap=!!(u&&u.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[f,y],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,s):T.texImage2D(T.TEXTURE_2D,0,this.format,f,y,0,this.format,T.UNSIGNED_BYTE,s.data);else{let{x:P,y:k}=p||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||o.b(s)?T.texSubImage2D(T.TEXTURE_2D,0,P,k,T.RGBA,T.UNSIGNED_BYTE,s):T.texSubImage2D(T.TEXTURE_2D,0,P,k,f,y,T.RGBA,T.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(s,u,p){let{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),s!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||s),this.filter=s),u!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Gn(_){let{userImage:s}=_;return!!(s&&s.render&&s.render())&&(_.data.replace(new Uint8Array(s.data.buffer)),!0)}class Et extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(s){let u=this.images[s];if(u&&!u.data&&u.spriteData){let p=u.spriteData;u.data=new o.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(s,u){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,u)&&(this.images[s]=u)}_validate(s,u){let p=!0,f=u.data||u.spriteData;return this._validateStretch(u.stretchX,f&&f.width)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,f&&f.height)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new o.j(new Error(`Image "${s}" has invalid "content" value`))),p=!1),p}_validateStretch(s,u){if(!s)return!0;let p=0;for(let f of s){if(f[0]<p||f[1]<f[0]||u<f[1])return!1;p=f[1]}return!0}_validateContent(s,u){if(!s)return!0;if(s.length!==4)return!1;let p=u.spriteData,f=p&&p.width||u.data.width,y=p&&p.height||u.data.height;return!(s[0]<0||f<s[0]||s[1]<0||y<s[1]||s[2]<0||f<s[2]||s[3]<0||y<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,u,p=!0){let f=this.getImage(s);if(p&&(f.data.width!==u.data.width||f.data.height!==u.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=f.version+1,this.images[s]=u,this.updatedImages[s]=!0}removeImage(s){let u=this.images[s];delete this.images[s],delete this.patterns[s],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((u,p)=>{let f=!0;if(!this.isLoaded())for(let y of s)this.images[y]||(f=!1);this.isLoaded()||f?u(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:u})})}_getImagesForIds(s){let u={};for(let p of s){let f=this.getImage(p);f||(this.fire(new o.k("styleimagemissing",{id:p})),f=this.getImage(p)),f?u[p]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:o.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){let{width:s,height:u}=this.atlasImage;return{width:s,height:u}}getPattern(s){let u=this.patterns[s],p=this.getImage(s);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{let f={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new o.I(f,p);this.patterns[s]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let u=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new st(s,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let y in this.patterns)s.push(this.patterns[y].bin);let{w:u,h:p}=o.p(s),f=this.atlasImage;f.resize({width:u||1,height:p||1});for(let y in this.patterns){let{bin:C}=this.patterns[y],I=C.x+1,T=C.y+1,P=this.getImage(y).data,k=P.width,N=P.height;o.R.copy(P,f,{x:0,y:0},{x:I,y:T},{width:k,height:N}),o.R.copy(P,f,{x:0,y:N-1},{x:I,y:T-1},{width:k,height:1}),o.R.copy(P,f,{x:0,y:0},{x:I,y:T+N},{width:k,height:1}),o.R.copy(P,f,{x:k-1,y:0},{x:I-1,y:T},{width:1,height:N}),o.R.copy(P,f,{x:0,y:0},{x:I+k,y:T},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let u of s){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;let p=this.getImage(u);p||o.w(`Image with ID: "${u}" was not found`),Gn(p)&&this.updateImage(u,p)}}}let en=1e20;function Qt(_,s,u,p,f,y,C,I,T){for(let P=s;P<s+p;P++)Ei(_,u*y+P,y,f,C,I,T);for(let P=u;P<u+f;P++)Ei(_,P*y+s,1,p,C,I,T)}function Ei(_,s,u,p,f,y,C){y[0]=0,C[0]=-en,C[1]=en,f[0]=_[s];for(let I=1,T=0,P=0;I<p;I++){f[I]=_[s+I*u];let k=I*I;do{let N=y[T];P=(f[I]-f[N]+k-N*N)/(I-N)/2}while(P<=C[T]&&--T>-1);T++,y[T]=I,C[T]=P,C[T+1]=en}for(let I=0,T=0;I<p;I++){for(;C[T+1]<I;)T++;let P=y[T],k=I-P;_[s+I*u]=f[P]+k*k}}class qi{constructor(s,u){this.requestManager=s,this.localIdeographFontFamily=u,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){let u=[];for(let y in s)for(let C of s[y])u.push(this._getAndCacheGlyphsPromise(y,C));let p=yield Promise.all(u),f={};for(let{stack:y,id:C,glyph:I}of p)f[y]||(f[y]={}),f[y][C]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return f})}_getAndCacheGlyphsPromise(s,u){return o._(this,void 0,void 0,function*(){let p=this.entries[s];p||(p=this.entries[s]={glyphs:{},requests:{},ranges:{}});let f=p.glyphs[u];if(f!==void 0)return{stack:s,id:u,glyph:f};if(f=this._tinySDF(p,s,u),f)return p.glyphs[u]=f,{stack:s,id:u,glyph:f};let y=Math.floor(u/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[y])return{stack:s,id:u,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[y]){let I=qi.loadGlyphRange(s,y,this.url,this.requestManager);p.requests[y]=I}let C=yield p.requests[y];for(let I in C)this._doesCharSupportLocalGlyph(+I)||(p.glyphs[+I]=C[+I]);return p.ranges[y]=!0,{stack:s,id:u,glyph:C[u]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,u,p){let f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(p))return;let y=s.tinySDF;if(!y){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),y=s.tinySDF=new qi.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:I})}let C=y.draw(String.fromCharCode(p));return{id:p,bitmap:new o.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}qi.loadGlyphRange=function(_,s,u,p){return o._(this,void 0,void 0,function*(){let f=256*s,y=f+255,C=p.transformRequest(u.replace("{fontstack}",_).replace("{range}",`${f}-${y}`),"Glyphs"),I=yield o.l(C,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${s}, ${f}-${y}`);let T={};for(let P of o.n(I.data))T[P.id]=P;return T})},qi.TinySDF=class{constructor({fontSize:_=24,buffer:s=3,radius:u=8,cutoff:p=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:C="normal"}={}){this.buffer=s,this.cutoff=p,this.radius=u;let I=this.size=_+4*s,T=this._createCanvas(I),P=this.ctx=T.getContext("2d",{willReadFrequently:!0});P.font=`${C} ${y} ${_}px ${f}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(_){let s=document.createElement("canvas");return s.width=s.height=_,s}draw(_){let{width:s,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(_),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),T=Math.min(this.size-this.buffer,C+Math.ceil(p)),P=I+2*this.buffer,k=T+2*this.buffer,N=Math.max(P*k,0),V=new Uint8ClampedArray(N),G={data:V,width:P,height:k,glyphWidth:I,glyphHeight:T,glyphTop:C,glyphLeft:0,glyphAdvance:s};if(I===0||T===0)return G;let{ctx:K,buffer:te,gridInner:se,gridOuter:ae}=this;K.clearRect(te,te,I,T),K.fillText(_,te,te+C);let ce=K.getImageData(te,te,I,T);ae.fill(en,0,N),se.fill(0,0,N);for(let X=0;X<T;X++)for(let pe=0;pe<I;pe++){let ge=ce.data[4*(X*I+pe)+3]/255;if(ge===0)continue;let Se=(X+te)*P+pe+te;if(ge===1)ae[Se]=0,se[Se]=en;else{let ke=.5-ge;ae[Se]=ke>0?ke*ke:0,se[Se]=ke<0?ke*ke:0}}Qt(ae,0,0,P,k,P,this.f,this.v,this.z),Qt(se,te,te,I,T,P,this.f,this.v,this.z);for(let X=0;X<N;X++){let pe=Math.sqrt(ae[X])-Math.sqrt(se[X]);V[X]=Math.round(255-255*(pe/this.radius+this.cutoff))}return G}};class Ls{constructor(){this.specification=o.v.light.position}possiblyEvaluate(s,u){return o.x(s.expression.evaluate(u))}interpolate(s,u,p){return{x:o.y.number(s.x,u.x,p),y:o.y.number(s.y,u.y,p),z:o.y.number(s.z,u.z,p)}}}let mr;class tr extends o.E{constructor(s){super(),mr=mr||new o.q({anchor:new o.D(o.v.light.anchor),position:new Ls,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(mr),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,u={}){if(!this._validate(o.r,s,u))for(let p in s){let f=s[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,p){return(!p||p.validate!==!1)&&o.t(this,s.call(o.u,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let Jn=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class gr extends o.E{constructor(s){super(),this._transitionable=new o.T(Jn),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(s,u={}){if(!this._validate(o.B,s,u)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let p in s){let f=s[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,p={}){return p?.validate!==!1&&o.t(this,s.call(o.u,o.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Bi{constructor(s,u){this.width=s,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,u){let p=s.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(s,u)),this.dashEntry[p]}getDashRanges(s,u,p){let f=[],y=s.length%2==1?-s[s.length-1]*p:0,C=s[0]*p,I=!0;f.push({left:y,right:C,isDash:I,zeroLength:s[0]===0});let T=s[0];for(let P=1;P<s.length;P++){I=!I;let k=s[P];y=T*p,T+=k,C=T*p,f.push({left:y,right:C,isDash:I,zeroLength:k===0})}return f}addRoundDash(s,u,p){let f=u/2;for(let y=-p;y<=p;y++){let C=this.width*(this.nextRow+p+y),I=0,T=s[I];for(let P=0;P<this.width;P++){P/T.right>1&&(T=s[++I]);let k=Math.abs(P-T.left),N=Math.abs(P-T.right),V=Math.min(k,N),G,K=y/p*(f+1);if(T.isDash){let te=f-Math.abs(K);G=Math.sqrt(V*V+te*te)}else G=f-Math.sqrt(V*V+K*K);this.data[C+P]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(s){for(let I=s.length-1;I>=0;--I){let T=s[I],P=s[I+1];T.zeroLength?s.splice(I,1):P&&P.isDash===T.isDash&&(P.left=T.left,s.splice(I,1))}let u=s[0],p=s[s.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);let f=this.width*this.nextRow,y=0,C=s[y];for(let I=0;I<this.width;I++){I/C.right>1&&(C=s[++y]);let T=Math.abs(I-C.left),P=Math.abs(I-C.right),k=Math.min(T,P);this.data[f+I]=Math.max(0,Math.min(255,(C.isDash?k:-k)+128))}}addDash(s,u){let p=u?7:0,f=2*p+1;if(this.nextRow+f>this.height)return o.w("LineAtlas out of space"),null;let y=0;for(let I=0;I<s.length;I++)y+=s[I];if(y!==0){let I=this.width/y,T=this.getDashRanges(s,this.width,I);u?this.addRoundDash(T,I,p):this.addRegularDash(T)}let C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=f,this.dirty=!0,C}bind(s){let u=s.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}let ko="maplibre_preloaded_worker_pool";class io{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<io.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ko]}numActive(){return Object.keys(this.active).length}}let un=Math.floor(x.hardwareConcurrency/2),Xn,bo;function wa(){return Xn||(Xn=new io),Xn}io.workerCount=o.C(globalThis)?Math.max(Math.min(un,3),1):1;class Bs{constructor(s,u){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=u;let p=this.workerPool.acquire(u);for(let f=0;f<p.length;f++){let y=new o.F(p[f],u);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,u){let p=[];for(let f of this.actors)p.push(f.sendAsync({type:s,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,u){for(let p of this.actors)p.registerMessageHandler(s,u)}}function Wa(){return bo||(bo=new Bs(wa(),o.G),bo.registerMessageHandler("GR",(_,s,u)=>o.m(s,u))),bo}function xa(_,s){let u=o.H();return o.J(u,u,[1,1,0]),o.K(u,u,[.5*_.width,.5*_.height,1]),o.L(u,u,_.calculatePosMatrix(s.toUnwrapped()))}function Za(_,s,u,p,f,y){let C=function(N,V,G){if(N)for(let K of N){let te=V[K];if(te&&te.source===G&&te.type==="fill-extrusion")return!0}else for(let K in V){let te=V[K];if(te.source===G&&te.type==="fill-extrusion")return!0}return!1}(f&&f.layers,s,_.id),I=y.maxPitchScaleFactor(),T=_.tilesIn(p,I,C);T.sort(Ka);let P=[];for(let N of T)P.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(s,u,_._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,f,y,I,xa(_.transform,N.tileID))});let k=function(N){let V={},G={};for(let K of N){let te=K.queryResults,se=K.wrappedTileID,ae=G[se]=G[se]||{};for(let ce in te){let X=te[ce],pe=ae[ce]=ae[ce]||{},ge=V[ce]=V[ce]||[];for(let Se of X)pe[Se.featureIndex]||(pe[Se.featureIndex]=!0,ge.push(Se))}}return V}(P);for(let N in k)k[N].forEach(V=>{let G=V.feature,K=_.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=K});return k}function Ka(_,s){let u=_.tileID,p=s.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function kc(_,s,u){return o._(this,void 0,void 0,function*(){let p=_;if(_.url?p=(yield o.h(s.transformRequest(_.url,"Source"),u)).data:yield x.frameAsync(u),!p)return null;let f=o.M(o.e(p,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(f.vectorLayerIds=p.vector_layers.map(y=>y.id)),f})}class De{constructor(s,u){s&&(u?this.setSouthWest(s).setNorthEast(u):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.N?new o.N(s.lng,s.lat):o.N.convert(s),this}extend(s){let u=this._sw,p=this._ne,f,y;if(s instanceof o.N)f=s,y=s;else{if(!(s instanceof De))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(De.convert(s)):this.extend(o.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.N.convert(s)):this;if(f=s._sw,y=s._ne,!f||!y)return this}return u||p?(u.lng=Math.min(f.lng,u.lng),u.lat=Math.min(f.lat,u.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new o.N(f.lng,f.lat),this._ne=new o.N(y.lng,y.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:u,lat:p}=o.N.convert(s),f=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&f}static convert(s){return s instanceof De?s:s&&new De(s)}static fromLngLat(s,u=0){let p=360*u/40075017,f=p/Math.cos(Math.PI/180*s.lat);return new De(new o.N(s.lng-f,s.lat-p),new o.N(s.lng+f,s.lat+p))}adjustAntiMeridian(){let s=new o.N(this._sw.lng,this._sw.lat),u=new o.N(this._ne.lng,this._ne.lat);return new De(s,s.lng>u.lng?new o.N(u.lng+360,u.lat):u)}}class jl{constructor(s,u,p){this.bounds=De.convert(this.validateBounds(s)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let u=Math.pow(2,s.z),p=Math.floor(o.O(this.bounds.getWest())*u),f=Math.floor(o.Q(this.bounds.getNorth())*u),y=Math.ceil(o.O(this.bounds.getEast())*u),C=Math.ceil(o.Q(this.bounds.getSouth())*u);return s.x>=p&&s.x<y&&s.y>=f&&s.y<C}}class pd extends o.E{constructor(s,u,p,f){if(super(),this.id=s,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(u,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield kc(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new jl(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){let u=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((y,C)=>{s.reloadPromise={resolve:y,reject:C}})}else s.actor=this.dispatcher.getActor(),f="LT";s.abortController=new AbortController;try{let y=yield s.actor.sendAsync({type:f,data:p},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,y)}catch(y){if(delete s.abortController,s.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,u){if(u&&u.resourceTiming&&(s.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&s.setExpiryData(u),s.loadVectorData(u,this.map.painter),s.reloadPromise){let p=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(p.resolve).catch(p.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Rn extends o.E{constructor(s,u,p,f){super(),this.id=s,this.dispatcher=p,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},u),o.e(this,o.M(u,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield kc(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(o.e(this,s),s.bounds&&(this.tileBounds=new jl(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new o.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){let u=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let p=yield xe.getImage(this.map._requestManager.transformRequest(u,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&s.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});let f=this.map.painter.context,y=f.gl,C=p.data;s.texture=this.map.painter.getTileTexture(C.width),s.texture?s.texture.update(C,{useMipmap:!0}):(s.texture=new st(f,C,y.RGBA,{useMipmap:!0}),s.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(p){if(delete s.abortController,s.aborted)s.state="unloaded";else if(p)throw s.state="errored",p}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Ti extends Rn{constructor(s,u,p,f){super(s,u,p,f),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){let u=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let f=yield xe.getImage(p,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(f&&f.data){let y=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&s.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let C=o.b(y)&&o.U()?y:yield this.readImageNow(y),I={type:this.type,uid:s.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let T=yield s.actor.sendAsync({type:"LDT",data:I});s.dem=T,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(f){if(delete s.abortController,s.aborted)s.state="unloaded";else if(f)throw s.state="errored",f}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.V()){let u=s.width+2,p=s.height+2;try{return new o.R({width:u,height:p},yield o.W(s,-1,-1,u,p))}catch{}}return x.getImageData(s,1)})}_getNeighboringTiles(s){let u=s.canonical,p=Math.pow(2,u.z),f=(u.x-1+p)%p,y=u.x===0?s.wrap-1:s.wrap,C=(u.x+1+p)%p,I=u.x+1===p?s.wrap+1:s.wrap,T={};return T[new o.S(s.overscaledZ,y,u.z,f,u.y).key]={backfilled:!1},T[new o.S(s.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(T[new o.S(s.overscaledZ,y,u.z,f,u.y-1).key]={backfilled:!1},T[new o.S(s.overscaledZ,s.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},T[new o.S(s.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(T[new o.S(s.overscaledZ,y,u.z,f,u.y+1).key]={backfilled:!1},T[new o.S(s.overscaledZ,s.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},T[new o.S(s.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),T}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class fd extends o.E{constructor(s,u,p,f){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(f),this._data=u.data,this._options=o.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;let y=o.X/this.tileSize;u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*y,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*y,extent:o.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.X,radius:(u.clusterRadius||50)*y,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return o._(this,void 0,void 0,function*(){let s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:u,offset:p}})}_updateWorkerData(s){return o._(this,void 0,void 0,function*(){let u=o.e({type:this.type},this.workerOptions);s?u.dataDiff=s:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(x.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{let p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let f=null;p.resourceTiming&&p.resourceTiming[this.id]&&(f=p.resourceTiming[this.id].slice(0));let y={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&o.e(y,{resourceTiming:f}),this.fire(new o.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(s){return o._(this,void 0,void 0,function*(){let u=s.actor?"RT":"LT";s.actor=this.actor;let p={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;let f=yield this.actor.sendAsync({type:u,data:p},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(f,this.map.painter,u==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ya=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Sa extends o.E{constructor(s,u,p,f){super(),this.id=s,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=u}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let u=yield xe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,s&&(this.coordinates=s),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new o.j(u))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let u=s.map(o.Z.fromLngLat);this.tileID=function(f){let y=1/0,C=1/0,I=-1/0,T=-1/0;for(let V of f)y=Math.min(y,V.x),C=Math.min(C,V.y),I=Math.max(I,V.x),T=Math.max(T,V.y);let P=Math.max(I-y,T-C),k=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),N=Math.pow(2,k);return new o.a1(k,Math.floor((y+I)/2*N),Math.floor((C+T)/2*N))}(u),this.minzoom=this.maxzoom=this.tileID.z;let p=u.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,o.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,o.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,u=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ya.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new st(s,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(let f in this.tiles){let y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Nc extends Sa{constructor(s,u,p,f){super(s,u,p,f),this.roundZoom=!0,this.type="video",this.options=u}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let u of s.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{let u=yield o.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new o.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let u=this.video.seekable;s<u.start(0)||s>u.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,u=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ya.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new st(s,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(let f in this.tiles){let y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class No extends Sa{constructor(s,u,p,f){super(s,u,p,f),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(C=>typeof C!="number"))||this.fire(new o.j(new o.a2(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a2(`sources.${s}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a2(`sources.${s}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ya.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new st(u,this.canvas,p.RGBA,{premultiply:!0});let f=!1;for(let y in this.tiles){let C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,f=!0)}f&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let md={},gd=_=>{switch(_){case"geojson":return fd;case"image":return Sa;case"raster":return Rn;case"raster-dem":return Ti;case"vector":return pd;case"video":return Nc;case"canvas":return No}return md[_]},je="RTLPluginLoaded";class Us extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wa()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=x.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(je))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Hr=null;function zs(){return Hr||(Hr=new Us),Hr}class Ja{constructor(s,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=o.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let u=s+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(f,y){let C={};if(!y)return C;for(let I of f){let T=I.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(T.length!==0){I.layers=T,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(P=>T.filter(k=>k.id===P)[0]));for(let P of T)C[P.id]=I}}return C}(s.buckets,u.style),this.hasSymbolBuckets=!1;for(let f in this.buckets){let y=this.buckets[f];if(y instanceof o.a6){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let f in this.buckets){let y=this.buckets[f];if(y instanceof o.a6&&y.hasRTLText){this.hasRTLText=!0,zs().lazyLoad();break}}this.queryPadding=0;for(let f in this.buckets){let y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(f).queryRadius(y))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let p in this.buckets){let f=this.buckets[p];f.uploadPending()&&f.upload(s)}let u=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new st(s,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new st(s,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,u,p,f,y,C,I,T,P,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:C,tileSize:this.tileSize,pixelPosMatrix:k,transform:T,params:I,queryPadding:this.queryPadding*P},s,u,p):{}}querySourceFeatures(s,u){let p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;let f=p.loadVTLayers(),y=u&&u.sourceLayer?u.sourceLayer:"",C=f._geojsonTileLayer||f[y];if(!C)return;let I=o.a7(u&&u.filter),{z:T,x:P,y:k}=this.tileID.canonical,N={z:T,x:P,y:k};for(let V=0;V<C.length;V++){let G=C.feature(V);if(I.needGeometry){let se=o.a8(G,!0);if(!I.filter(new o.z(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!I.filter(new o.z(this.tileID.overscaledZ),G))continue;let K=p.getId(G,y),te=new o.a9(G,T,P,k,K);te.tile=N,s.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let u=this.expirationTime;if(s.cacheControl){let p=o.aa(s.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let p=Date.now(),f=!1;if(this.expirationTime>p)f=!1;else if(u)if(this.expirationTime<u)f=!0;else{let y=this.expirationTime-u;y?this.expirationTime=p+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let p=this.latestFeatureIndex.loadVTLayers();for(let f in this.buckets){if(!u.style.hasLayer(f))continue;let y=this.buckets[f],C=y.layers[0].sourceLayer||"_geojsonTileLayer",I=p[C],T=s[C];if(!I||!T||Object.keys(T).length===0)continue;y.update(T,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});let P=u&&u.style&&u.style.getLayer(f);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<x.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=x.now()+s}setDependencies(s,u){let p={};for(let f of u)p[f]=!0;this.dependencies[s]=p}hasDependency(s,u){for(let p of s){let f=this.dependencies[p];if(f){for(let y of u)if(f[y])return!0}}return!1}}class Ze{constructor(s,u){this.max=s,this.onRemove=u,this.reset()}reset(){for(let s in this.data)for(let u of this.data[s])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(s,u,p){let f=s.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);let y={value:u,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout(()=>{this.remove(s,y)},p)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){let C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let u=this.data[s].shift();return u.timeout&&clearTimeout(u.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),u.value}getByKey(s){let u=this.data[s];return u?u[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,u){if(!this.has(s))return this;let p=s.wrapped().key,f=u===void 0?0:this.data[p].indexOf(u),y=this.data[p][f];return this.data[p].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(s){let u=[];for(let p in this.data)for(let f of this.data[p])s(f.value)||u.push(f);for(let p of u)this.remove(p.value.tileID,p)}}class sn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,u,p){let f=String(u);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][f]=this.stateChanges[s][f]||{},o.e(this.stateChanges[s][f],p),this.deletedStates[s]===null){this.deletedStates[s]={};for(let y in this.state[s])y!==f&&(this.deletedStates[s][y]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][f]===null){this.deletedStates[s][f]={};for(let y in this.state[s][f])p[y]||(this.deletedStates[s][f][y]=null)}else for(let y in p)this.deletedStates[s]&&this.deletedStates[s][f]&&this.deletedStates[s][f][y]===null&&delete this.deletedStates[s][f][y]}removeFeatureState(s,u,p){if(this.deletedStates[s]===null)return;let f=String(u);if(this.deletedStates[s]=this.deletedStates[s]||{},p&&u!==void 0)this.deletedStates[s][f]!==null&&(this.deletedStates[s][f]=this.deletedStates[s][f]||{},this.deletedStates[s][f][p]=null);else if(u!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][f])for(p in this.deletedStates[s][f]={},this.stateChanges[s][f])this.deletedStates[s][f][p]=null;else this.deletedStates[s][f]=null;else this.deletedStates[s]=null}getState(s,u){let p=String(u),f=o.e({},(this.state[s]||{})[p],(this.stateChanges[s]||{})[p]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let y=this.deletedStates[s][u];if(y===null)return{};for(let C in y)delete f[C]}return f}initializeTileState(s,u){s.setFeatureState(this.state,u)}coalesceChanges(s,u){let p={};for(let f in this.stateChanges){this.state[f]=this.state[f]||{};let y={};for(let C in this.stateChanges[f])this.state[f][C]||(this.state[f][C]={}),o.e(this.state[f][C],this.stateChanges[f][C]),y[C]=this.state[f][C];p[f]=y}for(let f in this.deletedStates){this.state[f]=this.state[f]||{};let y={};if(this.deletedStates[f]===null)for(let C in this.state[f])y[C]={},this.state[f][C]={};else for(let C in this.deletedStates[f]){if(this.deletedStates[f][C]===null)this.state[f][C]={};else for(let I of Object.keys(this.deletedStates[f][C]))delete this.state[f][C][I];y[C]=this.state[f][C]}p[f]=p[f]||{},o.e(p[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(let f in s)s[f].setFeatureState(p,u)}}class Lt extends o.E{constructor(s,u,p){super(),this.id=s,this.dispatcher=p,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,y,C,I)=>{let T=new(gd(y.type))(f,y,C,I);if(T.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${T.id}`);return T})(s,u,p,this),this._tiles={},this._cache=new Ze(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new sn,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let u=this._tiles[s];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,u,p){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,u,p)}catch(f){s.state="errored",f.status!==404?this._source.fire(new o.j(f,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let u in this._tiles){let p=this._tiles[u];p.upload(s),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(ro).map(s=>s.key)}getRenderableIds(s){let u=[];for(let p in this._tiles)this._isIdRenderable(p,s)&&u.push(this._tiles[p]);return s?u.sort((p,f)=>{let y=p.tileID,C=f.tileID,I=new o.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),T=new o.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-C.overscaledZ||T.y-I.y||T.x-I.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(ro).map(p=>p.key)}hasRenderableParent(s){let u=this.findLoadedParent(s,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(s,u){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(u||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,u){return o._(this,void 0,void 0,function*(){let p=this._tiles[s];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,s,u))})}_tileLoaded(s,u,p){s.timeAdded=x.now(),p==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(u,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let u=this.getRenderableIds();for(let f=0;f<u.length;f++){let y=u[f];if(s.neighboringTiles&&s.neighboringTiles[y]){let C=this.getTileByID(y);p(s,C),p(C,s)}}function p(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let C=y.tileID.canonical.x-f.tileID.canonical.x,I=y.tileID.canonical.y-f.tileID.canonical.y,T=Math.pow(2,f.tileID.canonical.z),P=y.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+T)===1?C+=T:Math.abs(C-T)===1&&(C-=T)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,C,I),f.neighboringTiles&&f.neighboringTiles[P]&&(f.neighboringTiles[P].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,u,p,f){for(let y in this._tiles){let C=this._tiles[y];if(f[y]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){let P=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[P.key],C&&C.hasData()&&(I=P)}let T=I;for(;T.overscaledZ>u;)if(T=T.scaledTo(T.overscaledZ-1),s[T.key]){f[I.key]=I;break}}}findLoadedParent(s,u){if(s.key in this._loadedParentTiles){let p=this._loadedParentTiles[s.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=s.overscaledZ-1;p>=u;p--){let f=s.scaledTo(p),y=this._getLoadedTile(f);if(y)return y}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let u=this._tiles[s.key];return u&&u.hasData()?u:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let u=Math.ceil(s.width/this._source.tileSize)+1,p=Math.ceil(s.height/this._source.tileSize)+1,f=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(s){let u=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,u){let p={};for(let f in this._tiles){let y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+u),p[y.tileID.key]=y}this._tiles=p;for(let f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(let f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(s,u,p,f,y,C){let I={},T={},P=Object.keys(s),k=x.now();for(let N of P){let V=s[N],G=this._tiles[N];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=k)continue;let K=this.findLoadedParent(V,u),te=this.findLoadedSibling(V),se=K||te||null;se&&(this._addTile(se.tileID),I[se.tileID.key]=se.tileID),T[N]=V}this._retainLoadedChildren(T,f,p,s);for(let N in I)s[N]||(this._coveredTiles[N]=!0,s[N]=I[N]);if(C){let N={},V={};for(let G of y)this._tiles[G.key].hasData()?N[G.key]=G:V[G.key]=G;for(let G in V){let K=V[G].children(this._source.maxzoom);this._tiles[K[0].key]&&this._tiles[K[1].key]&&this._tiles[K[2].key]&&this._tiles[K[3].key]&&(N[K[0].key]=s[K[0].key]=K[0],N[K[1].key]=s[K[1].key]=K[1],N[K[2].key]=s[K[2].key]=K[2],N[K[3].key]=s[K[3].key]=K[3],delete V[G])}for(let G in V){let K=V[G],te=this.findLoadedParent(K,this._source.minzoom),se=this.findLoadedSibling(K),ae=te||se||null;if(ae){N[ae.tileID.key]=s[ae.tileID.key]=ae.tileID;for(let ce in N)N[ce].isChildOf(ae.tileID)&&delete N[ce]}}for(let G in this._tiles)N[G]||(this._coveredTiles[G]=!0)}}update(s,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=s,this.terrain=u,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new o.S(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(p=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(k=>this._source.hasTile(k)))):p=[];let f=s.coveringZoomLevel(this._source),y=Math.max(f-Lt.maxOverzooming,this._source.minzoom),C=Math.max(f+Lt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let k={};for(let N of p)if(N.canonical.z>this._source.minzoom){let V=N.scaledTo(N.canonical.z-1);k[V.key]=V;let G=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));k[G.key]=G}p=p.concat(Object.values(k))}let I=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let T=this._updateRetainedTiles(p,f);ns(this._source.type)&&this._updateCoveredAndRetainedTiles(T,y,C,f,p,u);for(let k in T)this._tiles[k].clearFadeHold();let P=o.ab(this._tiles,T);for(let k of P){let N=this._tiles[k];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,u){var p;let f={},y={},C=Math.max(u-Lt.maxOverzooming,this._source.minzoom),I=Math.max(u+Lt.maxUnderzooming,this._source.minzoom),T={};for(let P of s){let k=this._addTile(P);f[P.key]=P,k.hasData()||u<this._source.maxzoom&&(T[P.key]=P)}this._retainLoadedChildren(T,u,I,f);for(let P of s){let k=this._tiles[P.key];if(k.hasData())continue;if(u+1>this._source.maxzoom){let V=P.children(this._source.maxzoom)[0],G=this.getTile(V);if(G&&G.hasData()){f[V.key]=V;continue}}else{let V=P.children(this._source.maxzoom);if(f[V[0].key]&&f[V[1].key]&&f[V[2].key]&&f[V[3].key])continue}let N=k.wasRequested();for(let V=P.overscaledZ-1;V>=C;--V){let G=P.scaledTo(V);if(y[G.key])break;if(y[G.key]=!0,k=this.getTile(G),!k&&N&&(k=this._addTile(G)),k){let K=k.hasData();if((K||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||N)&&(f[G.key]=G),N=k.wasRequested(),K)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let u=[],p,f=this._tiles[s].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){p=this._loadedParentTiles[f.key];break}u.push(f.key);let y=f.scaledTo(f.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;f=y}for(let y of u)this._loadedParentTiles[y]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let u=this._tiles[s].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(s){let u=this._tiles[s.key];if(u)return u;u=this._cache.getAndRemove(s),u&&(this._setTileReloadTimer(s.key,u),u.tileID=s,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,u)));let p=u;return u||(u=new Ja(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(u,s.key,u.state)),u.uses++,this._tiles[s.key]=u,p||this._source.fire(new o.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(s,u){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let p=u.getExpiryTimeout();p&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},p))}_removeTile(s){let u=this._tiles[s];u&&(u.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(s){let u=s.sourceDataType;s.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,u,p){let f=[],y=this.transform;if(!y)return f;let C=p?y.getCameraQueryGeometry(s):s,I=s.map(K=>y.pointCoordinate(K,this.terrain)),T=C.map(K=>y.pointCoordinate(K,this.terrain)),P=this.getIds(),k=1/0,N=1/0,V=-1/0,G=-1/0;for(let K of T)k=Math.min(k,K.x),N=Math.min(N,K.y),V=Math.max(V,K.x),G=Math.max(G,K.y);for(let K=0;K<P.length;K++){let te=this._tiles[P[K]];if(te.holdingForFade())continue;let se=te.tileID,ae=Math.pow(2,y.zoom-te.tileID.overscaledZ),ce=u*te.queryPadding*o.X/te.tileSize/ae,X=[se.getTilePoint(new o.Z(k,N)),se.getTilePoint(new o.Z(V,G))];if(X[0].x-ce<o.X&&X[0].y-ce<o.X&&X[1].x+ce>=0&&X[1].y+ce>=0){let pe=I.map(Se=>se.getTilePoint(Se)),ge=T.map(Se=>se.getTilePoint(Se));f.push({tile:te,tileID:se,queryGeometry:pe,cameraQueryGeometry:ge,scale:ae})}}return f}getVisibleCoordinates(s){let u=this.getRenderableIds(s).map(p=>this._tiles[p].tileID);for(let p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(ns(this._source.type)){let s=x.now();for(let u in this._tiles)if(this._tiles[u].fadeEndTime>=s)return!0}return!1}setFeatureState(s,u,p){this._state.updateState(s=s||"_geojsonTileLayer",u,p)}removeFeatureState(s,u,p){this._state.removeFeatureState(s=s||"_geojsonTileLayer",u,p)}getFeatureState(s,u){return this._state.getState(s=s||"_geojsonTileLayer",u)}setDependencies(s,u,p){let f=this._tiles[s];f&&f.setDependencies(u,p)}reloadTilesForDependencies(s,u){for(let p in this._tiles)this._tiles[p].hasDependency(s,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(s,u))}}function ro(_,s){let u=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*s.wrap)-+(s.wrap<0);return _.overscaledZ-s.overscaledZ||p-u||s.canonical.y-_.canonical.y||s.canonical.x-_.canonical.x}function ns(_){return _==="raster"||_==="image"||_==="video"}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;class Wt{constructor(s,u){this.reset(s,u)}reset(s,u){this.points=s||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ac(s,0,1);let u=1,p=this._distances[u],f=s*this.paddedLength+this.padding;for(;p<f&&u<this._distances.length;)p=this._distances[++u];let y=u-1,C=this._distances[y],I=p-C,T=I>0?(f-C)/I:0;return this.points[y].mult(1-T).add(this.points[u].mult(T))}}function Vs(_,s){let u=!0;return _==="always"||_!=="never"&&s!=="never"||(u=!1),u}class Ca{constructor(s,u,p){let f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(s/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=u,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,u,p,f,y){this._forEachCell(u,p,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(s,u,p,f){this._forEachCell(u-f,p-f,u+f,p+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(u),this.circles.push(p),this.circles.push(f)}_insertBoxCell(s,u,p,f,y,C){this.boxCells[y].push(C)}_insertCircleCell(s,u,p,f,y,C){this.circleCells[y].push(C)}_query(s,u,p,f,y,C,I){if(p<0||s>this.width||f<0||u>this.height)return[];let T=[];if(s<=0&&u<=0&&this.width<=p&&this.height<=f){if(y)return[{key:null,x1:s,y1:u,x2:p,y2:f}];for(let P=0;P<this.boxKeys.length;P++)T.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){let k=this.circles[3*P],N=this.circles[3*P+1],V=this.circles[3*P+2];T.push({key:this.circleKeys[P],x1:k-V,y1:N-V,x2:k+V,y2:N+V})}}else this._forEachCell(s,u,p,f,this._queryCell,T,{hitTest:y,overlapMode:C,seenUids:{box:{},circle:{}}},I);return T}query(s,u,p,f){return this._query(s,u,p,f,!1,null)}hitTest(s,u,p,f,y,C){return this._query(s,u,p,f,!0,y,C).length>0}hitTestCircle(s,u,p,f,y){let C=s-p,I=s+p,T=u-p,P=u+p;if(I<0||C>this.width||P<0||T>this.height)return!1;let k=[];return this._forEachCell(C,T,I,P,this._queryCellCircle,k,{hitTest:!0,overlapMode:f,circle:{x:s,y:u,radius:p},seenUids:{box:{},circle:{}}},y),k.length>0}_queryCell(s,u,p,f,y,C,I,T){let{seenUids:P,hitTest:k,overlapMode:N}=I,V=this.boxCells[y];if(V!==null){let K=this.bboxes;for(let te of V)if(!P.box[te]){P.box[te]=!0;let se=4*te,ae=this.boxKeys[te];if(s<=K[se+2]&&u<=K[se+3]&&p>=K[se+0]&&f>=K[se+1]&&(!T||T(ae))&&(!k||!Vs(N,ae.overlapMode))&&(C.push({key:ae,x1:K[se],y1:K[se+1],x2:K[se+2],y2:K[se+3]}),k))return!0}}let G=this.circleCells[y];if(G!==null){let K=this.circles;for(let te of G)if(!P.circle[te]){P.circle[te]=!0;let se=3*te,ae=this.circleKeys[te];if(this._circleAndRectCollide(K[se],K[se+1],K[se+2],s,u,p,f)&&(!T||T(ae))&&(!k||!Vs(N,ae.overlapMode))){let ce=K[se],X=K[se+1],pe=K[se+2];if(C.push({key:ae,x1:ce-pe,y1:X-pe,x2:ce+pe,y2:X+pe}),k)return!0}}}return!1}_queryCellCircle(s,u,p,f,y,C,I,T){let{circle:P,seenUids:k,overlapMode:N}=I,V=this.boxCells[y];if(V!==null){let K=this.bboxes;for(let te of V)if(!k.box[te]){k.box[te]=!0;let se=4*te,ae=this.boxKeys[te];if(this._circleAndRectCollide(P.x,P.y,P.radius,K[se+0],K[se+1],K[se+2],K[se+3])&&(!T||T(ae))&&!Vs(N,ae.overlapMode))return C.push(!0),!0}}let G=this.circleCells[y];if(G!==null){let K=this.circles;for(let te of G)if(!k.circle[te]){k.circle[te]=!0;let se=3*te,ae=this.circleKeys[te];if(this._circlesCollide(K[se],K[se+1],K[se+2],P.x,P.y,P.radius)&&(!T||T(ae))&&!Vs(N,ae.overlapMode))return C.push(!0),!0}}}_forEachCell(s,u,p,f,y,C,I,T){let P=this._convertToXCellCoord(s),k=this._convertToYCellCoord(u),N=this._convertToXCellCoord(p),V=this._convertToYCellCoord(f);for(let G=P;G<=N;G++)for(let K=k;K<=V;K++)if(y.call(this,s,u,p,f,this.xCellCount*K+G,C,I,T))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,u,p,f,y,C){let I=f-s,T=y-u,P=p+C;return P*P>I*I+T*T}_circleAndRectCollide(s,u,p,f,y,C,I){let T=(C-f)/2,P=Math.abs(s-(f+T));if(P>T+p)return!1;let k=(I-y)/2,N=Math.abs(u-(y+k));if(N>k+p)return!1;if(P<=T||N<=k)return!0;let V=P-T,G=N-k;return V*V+G*G<=p*p}}function Xa(_,s,u,p,f){let y=o.H();return s?(o.K(y,y,[1/f,1/f,1]),u||o.ad(y,y,p.angle)):o.L(y,p.labelPlaneMatrix,_),y}function js(_,s,u,p,f){if(s){let y=o.ae(_);return o.K(y,y,[f,f,1]),u||o.ad(y,y,-p.angle),y}return p.glCoordMatrix}function ie(_,s,u,p){let f;p?(f=[_,s,p(_,s),1],o.af(f,f,u)):(f=[_,s,0,1],Cn(f,f,u));let y=f[3];return{point:new o.P(f[0]/y,f[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function U(_,s){return .5+_/s*.5}function B(_,s){return _.x>=-s[0]&&_.x<=s[0]&&_.y>=-s[1]&&_.y<=s[1]}function W(_,s,u,p,f,y,C,I,T,P,k,N,V,G,K){let te=p?_.textSizeData:_.iconSizeData,se=o.ag(te,u.transform.zoom),ae=[256/u.width*2+1,256/u.height*2+1],ce=p?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ce.clear();let X=_.lineVertexArray,pe=p?_.text.placedSymbolArray:_.icon.placedSymbolArray,ge=u.transform.width/u.transform.height,Se=!1;for(let ke=0;ke<pe.length;ke++){let ze=pe.get(ke);if(ze.hidden||ze.writingMode===o.ah.vertical&&!Se){St(ze.numGlyphs,ce);continue}Se=!1;let Xe=ie(ze.anchorX,ze.anchorY,s,K);if(!B(Xe.point,ae)){St(ze.numGlyphs,ce);continue}let it=U(u.transform.cameraToCenterDistance,Xe.signedDistanceFromCamera),qe=o.ai(te,se,ze),Ge=C?qe/it:qe*it,pt={getElevation:K,labelPlaneMatrix:f,lineVertexArray:X,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:P,tileAnchorPoint:new o.P(ze.anchorX,ze.anchorY),unwrappedTileID:k,width:N,height:V,translation:G},$t=fe(pt,ze,Ge,!1,I,s,y,_.glyphOffsetArray,ce,ge,T);Se=$t.useVertical,($t.notEnoughRoom||Se||$t.needsFlipping&&fe(pt,ze,Ge,!0,I,s,y,_.glyphOffsetArray,ce,ge,T).notEnoughRoom)&&St(ze.numGlyphs,ce)}p?_.text.dynamicLayoutVertexBuffer.updateData(ce):_.icon.dynamicLayoutVertexBuffer.updateData(ce)}function ee(_,s,u,p,f,y,C,I){let T=y.glyphStartIndex+y.numGlyphs,P=y.lineStartIndex,k=y.lineStartIndex+y.lineLength,N=s.getoffsetX(y.glyphStartIndex),V=s.getoffsetX(T-1),G=$e(_*N,u,p,f,y.segment,P,k,I,C);if(!G)return null;let K=$e(_*V,u,p,f,y.segment,P,k,I,C);return K?I.projectionCache.anyProjectionOccluded?null:{first:G,last:K}:null}function de(_,s,u,p){return _===o.ah.horizontal&&Math.abs(u.y-s.y)>Math.abs(u.x-s.x)*p?{useVertical:!0}:(_===o.ah.vertical?s.y<u.y:s.x>u.x)?{needsFlipping:!0}:null}function fe(_,s,u,p,f,y,C,I,T,P,k){let N=u/24,V=s.lineOffsetX*N,G=s.lineOffsetY*N,K;if(s.numGlyphs>1){let te=s.glyphStartIndex+s.numGlyphs,se=s.lineStartIndex,ae=s.lineStartIndex+s.lineLength,ce=ee(N,I,V,G,p,s,k,_);if(!ce)return{notEnoughRoom:!0};let X=ie(ce.first.point.x,ce.first.point.y,C,_.getElevation).point,pe=ie(ce.last.point.x,ce.last.point.y,C,_.getElevation).point;if(f&&!p){let ge=de(s.writingMode,X,pe,P);if(ge)return ge}K=[ce.first];for(let ge=s.glyphStartIndex+1;ge<te-1;ge++)K.push($e(N*I.getoffsetX(ge),V,G,p,s.segment,se,ae,_,k));K.push(ce.last)}else{if(f&&!p){let se=ie(_.tileAnchorPoint.x,_.tileAnchorPoint.y,y,_.getElevation).point,ae=s.lineStartIndex+s.segment+1,ce=new o.P(_.lineVertexArray.getx(ae),_.lineVertexArray.gety(ae)),X=ie(ce.x,ce.y,y,_.getElevation),pe=X.signedDistanceFromCamera>0?X.point:function(Se,ke,ze,Xe,it,qe){return ve(Se,ke,ze,1,it,qe)}(_.tileAnchorPoint,ce,se,0,y,_),ge=de(s.writingMode,se,pe,P);if(ge)return ge}let te=$e(N*I.getoffsetX(s.glyphStartIndex),V,G,p,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,_,k);if(!te||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};K=[te]}for(let te of K)o.aj(T,te.point,te.angle);return{}}function ve(_,s,u,p,f,y){let C=_.add(_.sub(s)._unit()),I=f!==void 0?ie(C.x,C.y,f,y.getElevation).point:Ae(C.x,C.y,y).point,T=u.sub(I);return u.add(T._mult(p/T.mag()))}function le(_,s,u){let p=s.projectionCache;if(p.projections[_])return p.projections[_];let f=new o.P(s.lineVertexArray.getx(_),s.lineVertexArray.gety(_)),y=Ae(f.x,f.y,s);if(y.signedDistanceFromCamera>0)return p.projections[_]=y.point,p.anyProjectionOccluded=p.anyProjectionOccluded||y.isOccluded,y.point;let C=_-u.direction;return function(I,T,P,k,N){return ve(I,T,P,k,void 0,N)}(u.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(C),s.lineVertexArray.gety(C)),f,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,s)}function Ae(_,s,u){let p=_+u.translation[0],f=s+u.translation[1],y;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(y=u.projection.projectTileCoordinates(p,f,u.unwrappedTileID,u.getElevation),y.point.x=(.5*y.point.x+.5)*u.width,y.point.y=(.5*-y.point.y+.5)*u.height):(y=ie(p,f,u.labelPlaneMatrix,u.getElevation),y.isOccluded=!1),y}function Fe(_,s,u){return _._unit()._perp()._mult(s*u)}function Ee(_,s,u,p,f,y,C,I,T){if(I.projectionCache.offsets[_])return I.projectionCache.offsets[_];let P=u.add(s);if(_+T.direction<p||_+T.direction>=f)return I.projectionCache.offsets[_]=P,P;let k=le(_+T.direction,I,T),N=Fe(k.sub(u),C,T.direction),V=u.add(N),G=k.add(N);return I.projectionCache.offsets[_]=o.ak(y,P,V,G)||P,I.projectionCache.offsets[_]}function $e(_,s,u,p,f,y,C,I,T){let P=p?_-s:_+s,k=P>0?1:-1,N=0;p&&(k*=-1,N=Math.PI),k<0&&(N+=Math.PI);let V,G=k>0?y+f:y+f+1;I.projectionCache.cachedAnchorPoint?V=I.projectionCache.cachedAnchorPoint:(V=Ae(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=V);let K,te,se=V,ae=V,ce=0,X=0,pe=Math.abs(P),ge=[],Se;for(;ce+X<=pe;){if(G+=k,G<y||G>=C)return null;ce+=X,ae=se,te=K;let Xe={absOffsetX:pe,direction:k,distanceFromAnchor:ce,previousVertex:ae};if(se=le(G,I,Xe),u===0)ge.push(ae),Se=se.sub(ae);else{let it,qe=se.sub(ae);it=qe.mag()===0?Fe(le(G+k,I,Xe).sub(se),u,k):Fe(qe,u,k),te||(te=ae.add(it)),K=Ee(G,it,se,y,C,te,u,I,Xe),ge.push(te),Se=K.sub(te)}X=Se.mag()}let ke=Se._mult((pe-ce)/X)._add(te||ae),ze=N+Math.atan2(se.y-ae.y,se.x-ae.x);return ge.push(ke),{point:ke,angle:T?ze:0,path:ge}}let wt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function St(_,s){for(let u=0;u<_;u++){let p=s.length;s.resize(p+4),s.float32.set(wt,3*p)}}function Cn(_,s,u){let p=s[0],f=s[1];return _[0]=u[0]*p+u[4]*f+u[12],_[1]=u[1]*p+u[5]*f+u[13],_[3]=u[3]*p+u[7]*f+u[15],_}let Yt=100;class En{constructor(s,u,p=new Ca(s.width+200,s.height+200,25),f=new Ca(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=u,this.grid=p,this.ignoredGrid=f,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Yt,this.screenBottomBoundary=s.height+Yt,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,u,p,f,y,C,I,T,P,k,N){let V=s.anchorPointX+T[0],G=s.anchorPointY+T[1],K=this.projectAndGetPerspectiveRatio(f,V,G,y,k),te=p*K.perspectiveRatio,se;if(C||I)se=this._projectCollisionBox(s,te,f,y,C,I,T,K,k,N);else{let ge=K.point.x+(N?N.x*te:0),Se=K.point.y+(N?N.y*te:0);se={allPointsOccluded:!1,box:[ge+s.x1*te,Se+s.y1*te,ge+s.x2*te,Se+s.y2*te]}}let[ae,ce,X,pe]=se.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?se.allPointsOccluded:this.mapProjection.isOccluded(V,G,y))||K.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ae,ce,X,pe)||u!=="always"&&this.grid.hitTest(ae,ce,X,pe,u,P)?{box:[ae,ce,X,pe],placeable:!1,offscreen:!1}:{box:[ae,ce,X,pe],placeable:!0,offscreen:this.isOffscreen(ae,ce,X,pe)}}placeCollisionCircles(s,u,p,f,y,C,I,T,P,k,N,V,G,K,te,se){let ae=[],ce=new o.P(u.anchorX,u.anchorY),X=this.getPerspectiveRatio(C,ce.x,ce.y,I,se),pe=(N?y/X:y*X)/o.ap,ge={getElevation:se,labelPlaneMatrix:T,lineVertexArray:p,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ce,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:te},Se=ee(pe,f,u.lineOffsetX*pe,u.lineOffsetY*pe,!1,u,!1,ge),ke=!1,ze=!1,Xe=!0;if(Se){let it=.5*G*X+K,qe=new o.P(-100,-100),Ge=new o.P(this.screenRightBoundary,this.screenBottomBoundary),pt=new Wt,$t=Se.first,Ke=Se.last,tt=[];for(let nn=$t.path.length-1;nn>=1;nn--)tt.push($t.path[nn]);for(let nn=1;nn<Ke.path.length;nn++)tt.push(Ke.path[nn]);let Ut=2.5*it;if(P){let nn=this.projectPathToScreenSpace(tt,ge,P);tt=nn.some(mn=>mn.signedDistanceFromCamera<=0)?[]:nn.map(mn=>mn.point)}let hi=[];if(tt.length>0){let nn=tt[0].clone(),mn=tt[0].clone();for(let pi=1;pi<tt.length;pi++)nn.x=Math.min(nn.x,tt[pi].x),nn.y=Math.min(nn.y,tt[pi].y),mn.x=Math.max(mn.x,tt[pi].x),mn.y=Math.max(mn.y,tt[pi].y);hi=nn.x>=qe.x&&mn.x<=Ge.x&&nn.y>=qe.y&&mn.y<=Ge.y?[tt]:mn.x<qe.x||nn.x>Ge.x||mn.y<qe.y||nn.y>Ge.y?[]:o.al([tt],qe.x,qe.y,Ge.x,Ge.y)}for(let nn of hi){pt.reset(nn,.25*it);let mn=0;mn=pt.length<=.5*it?1:Math.ceil(pt.paddedLength/Ut)+1;for(let pi=0;pi<mn;pi++){let Tr=pi/Math.max(mn-1,1),ls=pt.lerp(Tr),fi=ls.x+Yt,ao=ls.y+Yt;ae.push(fi,ao,it,0);let Gr=fi-it,Ar=ao-it,qr=fi+it,qs=ao+it;if(Xe=Xe&&this.isOffscreen(Gr,Ar,qr,qs),ze=ze||this.isInsideGrid(Gr,Ar,qr,qs),s!=="always"&&this.grid.hitTestCircle(fi,ao,it,s,V)&&(ke=!0,!k))return{circles:[],offscreen:!1,collisionDetected:ke}}}}return{circles:!k&&ke||!ze||X<this.perspectiveRatioCutoff?[]:ae,offscreen:Xe,collisionDetected:ke}}projectPathToScreenSpace(s,u,p){return s.map(f=>ie(f.x,f.y,p,u.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let u=[],p=1/0,f=1/0,y=-1/0,C=-1/0;for(let k of s){let N=new o.P(k.x+Yt,k.y+Yt);p=Math.min(p,N.x),f=Math.min(f,N.y),y=Math.max(y,N.x),C=Math.max(C,N.y),u.push(N)}let I=this.grid.query(p,f,y,C).concat(this.ignoredGrid.query(p,f,y,C)),T={},P={};for(let k of I){let N=k.key;if(T[N.bucketInstanceId]===void 0&&(T[N.bucketInstanceId]={}),T[N.bucketInstanceId][N.featureIndex])continue;let V=[new o.P(k.x1,k.y1),new o.P(k.x2,k.y1),new o.P(k.x2,k.y2),new o.P(k.x1,k.y2)];o.am(u,V)&&(T[N.bucketInstanceId][N.featureIndex]=!0,P[N.bucketInstanceId]===void 0&&(P[N.bucketInstanceId]=[]),P[N.bucketInstanceId].push(N.featureIndex))}return P}insertCollisionBox(s,u,p,f,y,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:C,overlapMode:u},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,u,p,f,y,C){let I=p?this.ignoredGrid:this.grid,T={bucketInstanceId:f,featureIndex:y,collisionGroupID:C,overlapMode:u};for(let P=0;P<s.length;P+=4)I.insertCircle(T,s[P],s[P+1],s[P+2])}projectAndGetPerspectiveRatio(s,u,p,f,y){let C;y?(C=[u,p,y(u,p),1],o.af(C,C,s)):(C=[u,p,0,1],Cn(C,C,s));let I=C[3];return{point:new o.P((C[0]/I+1)/2*this.transform.width+Yt,(-C[1]/I+1)/2*this.transform.height+Yt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}getPerspectiveRatio(s,u,p,f,y){let C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,f,y):ie(u,p,s,y);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(s,u,p,f){return p<Yt||s>=this.screenRightBoundary||f<Yt||u>this.screenBottomBoundary}isInsideGrid(s,u,p,f){return p>=0&&s<this.gridRightBoundary&&f>=0&&u<this.gridBottomBoundary}getViewportMatrix(){let s=o.an([]);return o.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,u,p,f,y,C,I,T,P,k){let N=new o.P(1,0),V=new o.P(0,1),G=new o.P(s.anchorPointX+I[0],s.anchorPointY+I[1]);if(C&&!y){let Xe=this.projectAndGetPerspectiveRatio(p,G.x+1,G.y,f,P).point.sub(T.point).unit(),it=Math.atan(Xe.y/Xe.x)+(Xe.x<0?Math.PI:0),qe=Math.sin(it),Ge=Math.cos(it);N=new o.P(Ge,qe),V=new o.P(-qe,Ge)}else if(!C&&y){let Xe=-this.transform.angle,it=Math.sin(Xe),qe=Math.cos(Xe);N=new o.P(qe,it),V=new o.P(-it,qe)}let K=T.point,te=u;if(y){K=G;let Xe=this.transform.zoom-Math.floor(this.transform.zoom);te=Math.pow(2,-Xe),te*=this.mapProjection.getPitchedTextCorrection(this.transform,G,f),k||(te*=o.ac(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}k&&(K=K.add(N.mult(k.x*te)).add(V.mult(k.y*te)));let se=s.x1*te,ae=s.x2*te,ce=(se+ae)/2,X=s.y1*te,pe=s.y2*te,ge=(X+pe)/2,Se=[{offsetX:se,offsetY:X},{offsetX:ce,offsetY:X},{offsetX:ae,offsetY:X},{offsetX:ae,offsetY:ge},{offsetX:ae,offsetY:pe},{offsetX:ce,offsetY:pe},{offsetX:se,offsetY:pe},{offsetX:se,offsetY:ge}],ke=[];for(let{offsetX:Xe,offsetY:it}of Se)ke.push(new o.P(K.x+N.x*Xe+V.x*it,K.y+N.y*Xe+V.y*it));let ze=!1;if(y){let Xe=ke.map(it=>this.projectAndGetPerspectiveRatio(p,it.x,it.y,f,P));ze=Xe.some(it=>!it.isOccluded),ke=Xe.map(it=>it.point)}else ze=!0;return{box:o.ao(ke),allPointsOccluded:!ze}}}function fn(_,s,u){return s*(o.X/(_.tileSize*Math.pow(2,u-_.tileID.overscaledZ)))}class Wi{constructor(s,u,p,f){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?u:-u))):f&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Ai{constructor(s,u,p,f,y){this.text=new Wi(s?s.text:null,u,p,y),this.icon=new Wi(s?s.icon:null,u,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ln{constructor(s,u,p){this.text=s,this.icon=u,this.skipFade=p}}class zn{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class vi{constructor(s,u,p,f,y){this.bucketInstanceId=s,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=f,this.tileID=y}}class or{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let u=++this.maxGroupID;this.collisionGroups[s]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[s]}}function yr(_,s,u,p,f){let{horizontalAlign:y,verticalAlign:C}=o.au(_);return new o.P(-(y-.5)*s+p[0]*f,-(C-.5)*u+p[1]*f)}class $r{constructor(s,u,p,f,y,C){this.transform=s.clone(),this.terrain=p,this.collisionIndex=new En(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new or(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let u=this.terrain;return u?(p,f)=>u.getElevation(s,p,f):null}getBucketParts(s,u,p,f){let y=p.getBucket(u),C=p.latestFeatureIndex;if(!y||!C||u.id!==y.layerIds[0])return;let I=p.collisionBoxArray,T=y.layers[0].layout,P=y.layers[0].paint,k=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),N=p.tileSize/o.X,V=p.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix(V),K=T.get("text-pitch-alignment")==="map",te=T.get("text-rotation-alignment")==="map",se=fn(p,1,this.transform.zoom),ae=this.collisionIndex.mapProjection.translatePosition(this.transform,p,P.get("text-translate"),P.get("text-translate-anchor")),ce=this.collisionIndex.mapProjection.translatePosition(this.transform,p,P.get("icon-translate"),P.get("icon-translate-anchor")),X=Xa(G,K,te,this.transform,se),pe=null;if(K){let Se=js(G,K,te,this.transform,se);pe=o.L([],this.transform.labelPlaneMatrix,Se)}this.retainedQueryData[y.bucketInstanceId]=new vi(y.bucketInstanceId,C,y.sourceLayerIndex,y.index,p.tileID);let ge={bucket:y,layout:T,translationText:ae,translationIcon:ce,posMatrix:G,unwrappedTileID:V,textLabelPlaneMatrix:X,labelToScreenMatrix:pe,scale:k,textPixelRatio:N,holdingForFade:p.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:o.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(let Se of y.sortKeyRanges){let{sortKey:ke,symbolInstanceStart:ze,symbolInstanceEnd:Xe}=Se;s.push({sortKey:ke,symbolInstanceStart:ze,symbolInstanceEnd:Xe,parameters:ge})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ge})}attemptAnchorPlacement(s,u,p,f,y,C,I,T,P,k,N,V,G,K,te,se,ae,ce,X){let pe=o.aq[s.textAnchor],ge=[s.textOffset0,s.textOffset1],Se=yr(pe,p,f,ge,y),ke=this.collisionIndex.placeCollisionBox(u,V,T,P,k,I,C,se,N.predicate,X,Se);if((!ce||this.collisionIndex.placeCollisionBox(ce,V,T,P,k,I,C,ae,N.predicate,X,Se).placeable)&&ke.placeable){let ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(ze=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:ge,width:p,height:f,anchor:pe,textBoxScale:y,prevAnchor:ze},this.markUsedJustification(K,pe,G,te),K.allowVerticalPlacement&&(this.markUsedOrientation(K,te,G),this.placedOrientations[G.crossTileID]=te),{shift:Se,placedGlyphBoxes:ke}}}placeLayerBucketPart(s,u,p){let{bucket:f,layout:y,translationText:C,translationIcon:I,posMatrix:T,unwrappedTileID:P,textLabelPlaneMatrix:k,labelToScreenMatrix:N,textPixelRatio:V,holdingForFade:G,collisionBoxArray:K,partiallyEvaluatedTextSize:te,collisionGroup:se}=s.parameters,ae=y.get("text-optional"),ce=y.get("icon-optional"),X=o.ar(y,"text-overlap","text-allow-overlap"),pe=X==="always",ge=o.ar(y,"icon-overlap","icon-allow-overlap"),Se=ge==="always",ke=y.get("text-rotation-alignment")==="map",ze=y.get("text-pitch-alignment")==="map",Xe=y.get("icon-text-fit")!=="none",it=y.get("symbol-z-order")==="viewport-y",qe=pe&&(Se||!f.hasIconData()||ce),Ge=Se&&(pe||!f.hasTextData()||ae);!f.collisionArrays&&K&&f.deserializeCollisionBoxes(K);let pt=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),$t=(Ke,tt,Ut)=>{var hi,nn;if(u[Ke.crossTileID])return;if(G)return void(this.placements[Ke.crossTileID]=new ln(!1,!1,!1));let mn=!1,pi=!1,Tr=!0,ls=null,fi={box:null,placeable:!1,offscreen:null},ao={box:null,placeable:!1,offscreen:null},Gr=null,Ar=null,qr=null,qs=0,ru=0,Np=0;tt.textFeatureIndex?qs=tt.textFeatureIndex:Ke.useRuntimeCollisionCircles&&(qs=Ke.featureIndex),tt.verticalTextFeatureIndex&&(ru=tt.verticalTextFeatureIndex);let ou=tt.textBox;if(ou){let Vo=_r=>{let Mr=o.ah.horizontal;if(f.allowVerticalPlacement&&!_r&&this.prevPlacement){let Io=this.prevPlacement.placedOrientations[Ke.crossTileID];Io&&(this.placedOrientations[Ke.crossTileID]=Io,Mr=Io,this.markUsedOrientation(f,Mr,Ke))}return Mr},jo=(_r,Mr)=>{if(f.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&tt.verticalTextBox){for(let Io of f.writingModes)if(Io===o.ah.vertical?(fi=Mr(),ao=fi):fi=_r(),fi&&fi.placeable)break}else fi=_r()},tl=Ke.textAnchorOffsetStartIndex,cs=Ke.textAnchorOffsetEndIndex;if(cs===tl){let _r=(Mr,Io)=>{let vn=this.collisionIndex.placeCollisionBox(Mr,X,V,T,P,ze,ke,C,se.predicate,pt);return vn&&vn.placeable&&(this.markUsedOrientation(f,Io,Ke),this.placedOrientations[Ke.crossTileID]=Io),vn};jo(()=>_r(ou,o.ah.horizontal),()=>{let Mr=tt.verticalTextBox;return f.allowVerticalPlacement&&Ke.numVerticalGlyphVertices>0&&Mr?_r(Mr,o.ah.vertical):{box:null,offscreen:null}}),Vo(fi&&fi.placeable)}else{let _r=o.aq[(nn=(hi=this.prevPlacement)===null||hi===void 0?void 0:hi.variableOffsets[Ke.crossTileID])===null||nn===void 0?void 0:nn.anchor],Mr=(vn,tc,su)=>{let au=vn.x2-vn.x1,P0=vn.y2-vn.y1,HC=Ke.textBoxScale,R0=Xe&&ge==="never"?tc:null,nl=null,O0=X==="never"?1:2,Lp="never";_r&&O0++;for(let Nd=0;Nd<O0;Nd++){for(let Bp=tl;Bp<cs;Bp++){let Up=f.textAnchorOffsets.get(Bp);if(_r&&Up.textAnchor!==_r)continue;let lu=this.attemptAnchorPlacement(Up,vn,au,P0,HC,ke,ze,V,T,P,se,Lp,Ke,f,su,C,I,R0,pt);if(lu&&(nl=lu.placedGlyphBoxes,nl&&nl.placeable))return mn=!0,ls=lu.shift,nl}_r?_r=null:Lp=X}return p&&!nl&&(nl={box:this.collisionIndex.placeCollisionBox(ou,"always",V,T,P,ze,ke,C,se.predicate,pt,new o.P(0,0)).box,offscreen:!1,placeable:!1}),nl};jo(()=>Mr(ou,tt.iconBox,o.ah.horizontal),()=>{let vn=tt.verticalTextBox;return f.allowVerticalPlacement&&(!fi||!fi.placeable)&&Ke.numVerticalGlyphVertices>0&&vn?Mr(vn,tt.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),fi&&(mn=fi.placeable,Tr=fi.offscreen);let Io=Vo(fi&&fi.placeable);if(!mn&&this.prevPlacement){let vn=this.prevPlacement.variableOffsets[Ke.crossTileID];vn&&(this.variableOffsets[Ke.crossTileID]=vn,this.markUsedJustification(f,vn.anchor,Ke,Io))}}}if(Gr=fi,mn=Gr&&Gr.placeable,Tr=Gr&&Gr.offscreen,Ke.useRuntimeCollisionCircles){let Vo=f.text.placedSymbolArray.get(Ke.centerJustifiedTextSymbolIndex),jo=o.ai(f.textSizeData,te,Vo),tl=y.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(X,Vo,f.lineVertexArray,f.glyphOffsetArray,jo,T,P,k,N,p,ze,se.predicate,Ke.collisionCircleDiameter,tl,C,pt),Ar.circles.length&&Ar.collisionDetected&&!p&&o.w("Collisions detected, but collision boxes are not shown"),mn=pe||Ar.circles.length>0&&!Ar.collisionDetected,Tr=Tr&&Ar.offscreen}if(tt.iconFeatureIndex&&(Np=tt.iconFeatureIndex),tt.iconBox){let Vo=jo=>this.collisionIndex.placeCollisionBox(jo,ge,V,T,P,ze,ke,I,se.predicate,pt,Xe&&ls?ls:void 0);ao&&ao.placeable&&tt.verticalIconBox?(qr=Vo(tt.verticalIconBox),pi=qr.placeable):(qr=Vo(tt.iconBox),pi=qr.placeable),Tr=Tr&&qr.offscreen}let zo=ae||Ke.numHorizontalGlyphVertices===0&&Ke.numVerticalGlyphVertices===0,Fp=ce||Ke.numIconVertices===0;zo||Fp?Fp?zo||(pi=pi&&mn):mn=pi&&mn:pi=mn=pi&&mn;let Jg=pi&&qr.placeable;if(mn&&Gr.placeable&&this.collisionIndex.insertCollisionBox(Gr.box,X,y.get("text-ignore-placement"),f.bucketInstanceId,ao&&ao.placeable&&ru?ru:qs,se.ID),Jg&&this.collisionIndex.insertCollisionBox(qr.box,ge,y.get("icon-ignore-placement"),f.bucketInstanceId,Np,se.ID),Ar&&mn&&this.collisionIndex.insertCollisionCircles(Ar.circles,X,y.get("text-ignore-placement"),f.bucketInstanceId,qs,se.ID),p&&this.storeCollisionData(f.bucketInstanceId,Ut,tt,Gr,qr,Ar),Ke.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ke.crossTileID]=new ln(mn||qe,pi||Ge,Tr||f.justReloaded),u[Ke.crossTileID]=!0};if(it){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ke=f.getSortedSymbolIndexes(this.transform.angle);for(let tt=Ke.length-1;tt>=0;--tt){let Ut=Ke[tt];$t(f.symbolInstances.get(Ut),f.collisionArrays[Ut],Ut)}}else for(let Ke=s.symbolInstanceStart;Ke<s.symbolInstanceEnd;Ke++)$t(f.symbolInstances.get(Ke),f.collisionArrays[Ke],Ke);if(p&&f.bucketInstanceId in this.collisionCircleArrays){let Ke=this.collisionCircleArrays[f.bucketInstanceId];o.as(Ke.invProjMatrix,T),Ke.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(s,u,p,f,y,C){if(p.textBox||p.iconBox){let I,T;this.collisionBoxArrays.has(s)?I=this.collisionBoxArrays.get(s):(I=new Map,this.collisionBoxArrays.set(s,I)),I.has(u)?T=I.get(u):(T={text:null,icon:null},I.set(u,T)),p.textBox&&(T.text=f.box),p.iconBox&&(T.icon=y.box)}if(C){let I=this.collisionCircleArrays[s];I===void 0&&(I=this.collisionCircleArrays[s]=new zn);for(let T=0;T<C.circles.length;T+=4)I.circles.push(C.circles[T+0]),I.circles.push(C.circles[T+1]),I.circles.push(C.circles[T+2]),I.circles.push(C.collisionDetected?1:0)}}markUsedJustification(s,u,p,f){let y;y=f===o.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[o.at(u)];let C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(let I of C)I>=0&&(s.text.placedSymbolArray.get(I).crossTileID=y>=0&&I!==y?0:p.crossTileID)}markUsedOrientation(s,u,p){let f=u===o.ah.horizontal||u===o.ah.horizontalOnly?u:0,y=u===o.ah.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(let I of C)s.text.placedSymbolArray.get(I).placedOrientation=f;p.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let u=this.prevPlacement,p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;let f=u?u.symbolFadeChange(s):1,y=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(let T in this.placements){let P=this.placements[T],k=y[T];k?(this.opacities[T]=new Ai(k,f,P.text,P.icon),p=p||P.text!==k.text.placed||P.icon!==k.icon.placed):(this.opacities[T]=new Ai(null,f,P.text,P.icon,P.skipFade),p=p||P.text||P.icon)}for(let T in y){let P=y[T];if(!this.opacities[T]){let k=new Ai(P,f,!1,!1);k.isHidden()||(this.opacities[T]=k,p=p||P.text.placed||P.icon.placed)}}for(let T in C)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=C[T]);for(let T in I)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=I[T]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:s)}updateLayerOpacities(s,u){let p={};for(let f of u){let y=f.getBucket(s);y&&f.latestFeatureIndex&&s.id===y.layerIds[0]&&this.updateBucketOpacities(y,f.tileID,p,f.collisionBoxArray)}}updateBucketOpacities(s,u,p,f){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let y=s.layers[0],C=y.layout,I=new Ai(null,0,!1,!1,!0),T=C.get("text-allow-overlap"),P=C.get("icon-allow-overlap"),k=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=C.get("text-rotation-alignment")==="map",V=C.get("text-pitch-alignment")==="map",G=C.get("icon-text-fit")!=="none",K=new Ai(null,0,T&&(P||!s.hasIconData()||C.get("icon-optional")),P&&(T||!s.hasTextData()||C.get("text-optional")),!0);!s.collisionArrays&&f&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(f);let te=(ae,ce,X)=>{for(let pe=0;pe<ce/4;pe++)ae.opacityVertexArray.emplaceBack(X);ae.hasVisibleVertices=ae.hasVisibleVertices||X!==Lc},se=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ae=0;ae<s.symbolInstances.length;ae++){let ce=s.symbolInstances.get(ae),{numHorizontalGlyphVertices:X,numVerticalGlyphVertices:pe,crossTileID:ge}=ce,Se=this.opacities[ge];p[ge]?Se=I:Se||(Se=K,this.opacities[ge]=Se),p[ge]=!0;let ke=ce.numIconVertices>0,ze=this.placedOrientations[ce.crossTileID],Xe=ze===o.ah.vertical,it=ze===o.ah.horizontal||ze===o.ah.horizontalOnly;if(X>0||pe>0){let Ge=So(Se.text);te(s.text,X,Xe?Lc:Ge),te(s.text,pe,it?Lc:Ge);let pt=Se.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(tt=>{tt>=0&&(s.text.placedSymbolArray.get(tt).hidden=pt||Xe?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=pt||it?1:0);let $t=this.variableOffsets[ce.crossTileID];$t&&this.markUsedJustification(s,$t.anchor,ce,ze);let Ke=this.placedOrientations[ce.crossTileID];Ke&&(this.markUsedJustification(s,"left",ce,Ke),this.markUsedOrientation(s,Ke,ce))}if(ke){let Ge=So(Se.icon),pt=!(G&&ce.verticalPlacedIconSymbolIndex&&Xe);ce.placedIconSymbolIndex>=0&&(te(s.icon,ce.numIconVertices,pt?Ge:Lc),s.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=Se.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(te(s.icon,ce.numVerticalIconVertices,pt?Lc:Ge),s.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=Se.icon.isHidden())}let qe=se&&se.has(ae)?se.get(ae):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let Ge=s.collisionArrays[ae];if(Ge){let pt=new o.P(0,0);if(Ge.textBox||Ge.verticalTextBox){let $t=!0;if(k){let Ke=this.variableOffsets[ge];Ke?(pt=yr(Ke.anchor,Ke.width,Ke.height,Ke.textOffset,Ke.textBoxScale),N&&pt._rotate(V?this.transform.angle:-this.transform.angle)):$t=!1}if(Ge.textBox||Ge.verticalTextBox){let Ke;Ge.textBox&&(Ke=Xe),Ge.verticalTextBox&&(Ke=it),Fc(s.textCollisionBox.collisionVertexArray,Se.text.placed,!$t||Ke,qe.text,pt.x,pt.y)}}if(Ge.iconBox||Ge.verticalIconBox){let $t=!!(!it&&Ge.verticalIconBox),Ke;Ge.iconBox&&(Ke=$t),Ge.verticalIconBox&&(Ke=!$t),Fc(s.iconCollisionBox.collisionVertexArray,Se.icon.placed,Ke,qe.icon,G?pt.x:0,G?pt.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){let ae=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=ae.invProjMatrix,s.placementViewportMatrix=ae.viewportMatrix,s.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,u){let p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>s}setStale(){this.stale=!0}}function Fc(_,s,u,p,f,y){p&&p.length!==0||(p=[0,0,0,0]);let C=p[0]-Yt,I=p[1]-Yt,T=p[2]-Yt,P=p[3]-Yt;_.emplaceBack(s?1:0,u?1:0,f||0,y||0,C,I),_.emplaceBack(s?1:0,u?1:0,f||0,y||0,T,I),_.emplaceBack(s?1:0,u?1:0,f||0,y||0,T,P),_.emplaceBack(s?1:0,u?1:0,f||0,y||0,C,P)}let Vn=Math.pow(2,25),lg=Math.pow(2,24),cg=Math.pow(2,17),wo=Math.pow(2,16),xo=Math.pow(2,9),yC=Math.pow(2,8),Fo=Math.pow(2,1);function So(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;let s=_.placed?1:0,u=Math.floor(127*_.opacity);return u*Vn+s*lg+u*cg+s*wo+u*xo+s*yC+u*Fo+s}let Lc=0;function Hl(){return{isOccluded:(_,s,u)=>!1,getPitchedTextCorrection:(_,s,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,s,u,p){throw new Error("Not implemented.")},translatePosition:(_,s,u,p)=>function(f,y,C,I,T=!1){if(!C[0]&&!C[1])return[0,0];let P=T?I==="map"?f.angle:0:I==="viewport"?-f.angle:0;if(P){let k=Math.sin(P),N=Math.cos(P);C=[C[0]*N-C[1]*k,C[0]*k+C[1]*N]}return[T?C[0]:fn(y,C[0],f.zoom),T?C[1]:fn(y,C[1],f.zoom)]}(_,s,u,p),getCircleRadiusCorrection:_=>1}}class Zi{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,u,p,f,y){let C=this._bucketParts;for(;this._currentTileIndex<s.length;)if(u.getBucketParts(C,f,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,T)=>I.sortKey-T.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class yd{constructor(s,u,p,f,y,C,I,T){this.placement=new $r(s,Hl(),u,C,I,T),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(s,u,p){let f=x.now(),y=()=>!this._forceFullPlacement&&x.now()-f>2;for(;this._currentPlacementIndex>=0;){let C=u[s[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Zi(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let is=512/o.X/2;class Ui{constructor(s,u,p){this.tileID=s,this.bucketInstanceId=p,this._symbolsByKey={};let f=new Map;for(let y=0;y<u.length;y++){let C=u.get(y),I=C.key,T=f.get(I);T?T.push(C):f.set(I,[C])}for(let[y,C]of f){let I={positions:C.map(T=>({x:Math.floor(T.anchorX*is),y:Math.floor(T.anchorY*is)})),crossTileIDs:C.map(T=>T.crossTileID)};if(I.positions.length>128){let T=new o.av(I.positions.length,16,Uint16Array);for(let{x:P,y:k}of I.positions)T.add(P,k);T.finish(),delete I.positions,I.index=T}this._symbolsByKey[y]=I}}getScaledCoordinates(s,u){let{x:p,y:f,z:y}=this.tileID.canonical,{x:C,y:I,z:T}=u.canonical,P=is/Math.pow(2,T-y),k=(I*o.X+s.anchorY)*P,N=f*o.X*is;return{x:Math.floor((C*o.X+s.anchorX)*P-p*o.X*is),y:Math.floor(k-N)}}findMatches(s,u,p){let f=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let y=0;y<s.length;y++){let C=s.get(y);if(C.crossTileID)continue;let I=this._symbolsByKey[C.key];if(!I)continue;let T=this.getScaledCoordinates(C,u);if(I.index){let P=I.index.range(T.x-f,T.y-f,T.x+f,T.y+f).sort();for(let k of P){let N=I.crossTileIDs[k];if(!p[N]){p[N]=!0,C.crossTileID=N;break}}}else if(I.positions)for(let P=0;P<I.positions.length;P++){let k=I.positions[P],N=I.crossTileIDs[P];if(Math.abs(k.x-T.x)<=f&&Math.abs(k.y-T.y)<=f&&!p[N]){p[N]=!0,C.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class rp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class rs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let u=Math.round((s-this.lng)/360);if(u!==0)for(let p in this.indexes){let f=this.indexes[p],y={};for(let C in f){let I=f[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),y[I.tileID.key]=I}this.indexes[p]=y}this.lng=s}addBucket(s,u,p){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let y=0;y<u.symbolInstances.length;y++)u.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let f=this.usedCrossTileIDs[s.overscaledZ];for(let y in this.indexes){let C=this.indexes[y];if(Number(y)>s.overscaledZ)for(let I in C){let T=C[I];T.tileID.isChildOf(s)&&T.findMatches(u.symbolInstances,s,f)}else{let I=C[s.scaledTo(Number(y)).key];I&&I.findMatches(u.symbolInstances,s,f)}}for(let y=0;y<u.symbolInstances.length;y++){let C=u.symbolInstances.get(y);C.crossTileID||(C.crossTileID=p.generate(),f[C.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Ui(s,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(s,u){for(let p of u.getCrossTileIDsLists())for(let f of p)delete this.usedCrossTileIDs[s][f]}removeStaleBuckets(s){let u=!1;for(let p in this.indexes){let f=this.indexes[p];for(let y in f)s[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,f[y]),delete f[y],u=!0)}return u}}class ug{constructor(){this.layerIndexes={},this.crossTileIDs=new rp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,u,p){let f=this.layerIndexes[s.id];f===void 0&&(f=this.layerIndexes[s.id]=new rs);let y=!1,C={};f.handleWrapJump(p);for(let I of u){let T=I.getBucket(s);T&&s.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(I.tileID,T,this.crossTileIDs)&&(y=!0),C[T.bucketInstanceId]=!0)}return f.removeStaleBuckets(C)&&(y=!0),y}pruneUnusedLayers(s){let u={};s.forEach(p=>{u[p]=!0});for(let p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}let os=(_,s)=>o.t(_,s&&s.filter(u=>u.identifier!=="source.canvas")),_C=o.aw();class op extends o.E{constructor(s,u={}){super(),this._rtlPluginLoaded=()=>{for(let p in this.sourceCaches){let f=this.sourceCaches[p].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[p].reload()}},this.map=s,this.dispatcher=new Bs(wa(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,f)=>this.getGlyphs(p,f)),this.dispatcher.registerMessageHandler("GI",(p,f)=>this.getImages(p,f)),this.imageManager=new Et,this.imageManager.setEventedParent(this),this.glyphManager=new qi(s._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Bi(256,512),this.crossTileSymbolIndex=new ug,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),zs().on(je,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;let f=this.sourceCaches[p.sourceId];if(!f)return;let y=f.getSource();if(y&&y.vectorLayerIds)for(let C in this._layers){let I=this._layers[C];I.source===y.id&&this._validateLayer(I)}})}loadURL(s,u={},p){this.fire(new o.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;let f=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let y=this._loadStyleRequest;o.h(f,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,u,p)}).catch(C=>{this._loadStyleRequest=null,C&&!y.signal.aborted&&this.fire(new o.j(C))})}loadJSON(s,u={},p){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(s,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(_C,{validate:!1})}_load(s,u,p){var f;let y=u.transformStyle?u.transformStyle(p,s):s;if(!u.validate||!os(this,o.u(y))){this._loaded=!0,this.stylesheet=y;for(let C in y.sources)this.addSource(C,y.sources[C],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new tr(this.stylesheet.light),this.sky=new gr(this.stylesheet.sky),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){let s=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(u=>u.id),this._layers={},this._serializedLayers=null;for(let u of s){let p=o.aA(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(s,u=!1,p=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,C,I,T){return o._(this,void 0,void 0,function*(){let P=gt(y),k=I>1?"@2x":"",N={},V={};for(let{id:G,url:K}of P){let te=C.transformRequest(Gt(K,k,".json"),"SpriteJSON");N[G]=o.h(te,T);let se=C.transformRequest(Gt(K,k,".png"),"SpriteImage");V[G]=xe.getImage(se,T)}return yield Promise.all([...Object.values(N),...Object.values(V)]),function(G,K){return o._(this,void 0,void 0,function*(){let te={};for(let se in G){te[se]={};let ae=x.getImageCanvasContext((yield K[se]).data),ce=(yield G[se]).data;for(let X in ce){let{width:pe,height:ge,x:Se,y:ke,sdf:ze,pixelRatio:Xe,stretchX:it,stretchY:qe,content:Ge,textFitWidth:pt,textFitHeight:$t}=ce[X];te[se][X]={data:null,pixelRatio:Xe,sdf:ze,stretchX:it,stretchY:qe,content:Ge,textFitWidth:pt,textFitHeight:$t,spriteData:{width:pe,height:ge,x:Se,y:ke,context:ae}}}}return te})}(N,V)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(let C in y){this._spritesImagesIds[C]=[];let I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(T=>!(T in y)):[];for(let T of I)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(let T in y[C]){let P=C==="default"?T:`${C}:${T}`;this._spritesImagesIds[C].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,y[C][T],!1):this.imageManager.addImage(P,y[C][T]),u&&(this._changedImages[P]=!0)}}}).catch(y=>{this._spriteRequest=null,f=y,this.fire(new o.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),p&&p(f)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(s){let u=this.sourceCaches[s.source];if(!u)return;let p=s.sourceLayer;if(!p)return;let f=u.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(p)===-1)&&this.fire(new o.j(new Error(`Source layer "${p}" does not exist on source "${f.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,u=!1){let p=this._serializedAllLayers();if(!s||s.length===0)return Object.values(u?o.aB(p):p);let f=[];for(let y of s)if(p[y]){let C=u?o.aB(p[y]):p[y];f.push(C)}return f}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let u=Object.keys(this._layers);for(let p of u){let f=this._layers[p];f.type!=="custom"&&(s[p]=f.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(let s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let u=this._changed;if(u){let f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(let C in this._updatedSources){let I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let C in this._updatedPaintProps)this._layers[C].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let p={};for(let f in this.sourceCaches){let y=this.sourceCaches[f];p[f]=y.used,y.used=!1}for(let f of this._order){let y=this._layers[f];y.recalculate(s,this._availableImages),!y.isHidden(s.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(let f in p){let y=this.sourceCaches[f];!!p[f]!=!!y.used&&y.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,u&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,u={}){var p;this._checkLoaded();let f=this.serialize();if(s=u.transformStyle?u.transformStyle(f,s):s,((p=u.validate)===null||p===void 0||p)&&os(this,o.u(s)))return!1;(s=o.aB(s)).layers=o.az(s.layers);let y=o.aC(f,s),C=this._getOperationsToPerform(y);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(let I of C.operations)I();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let u=[],p=[];for(let f of s)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":u.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":u.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,f.args));break;case"setSky":u.push(()=>this.setSky.apply(this,f.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":u.push(()=>{});break;default:p.push(f.command)}return{operations:u,unimplemented:p}}addImage(s,u){if(this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,u),this._afterImageUpdated(s)}updateImage(s,u){this.imageManager.updateImage(s,u)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,u,p={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.u.source,`sources.${s}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);let f=this.sourceCaches[s]=new Lt(s,u,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:s})),f.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let p in this._layers)if(this._layers[p].source===s)return this.fire(new o.j(new Error(`Source "${s}" cannot be removed while layer "${p}" is using it.`)));let u=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],u.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,u){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let p=this.sourceCaches[s].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,u,p={}){this._checkLoaded();let f=s.id;if(this.getLayer(f))return void this.fire(new o.j(new Error(`Layer "${f}" already exists on this map.`)));let y;if(s.type==="custom"){if(os(this,o.aD(s)))return;y=o.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(f,s.source),s=o.aB(s),s=o.e(s,{source:f})),this._validate(o.u.layer,`layers.${f}`,s,{arrayIndex:-1},p))return;y=o.aA(s),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}})}let C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new o.j(new Error(`Cannot add layer "${f}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){let I=this._removedLayers[f];delete this._removedLayers[f],I.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(s,u){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===u)return;let p=this._order.indexOf(s);this._order.splice(p,1);let f=u?this._order.indexOf(u):this._order.length;u&&f===-1?this.fire(new o.j(new Error(`Cannot move layer "${s}" before non-existing layer "${u}".`))):(this._order.splice(f,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let u=this._layers[s];if(!u)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${s}".`)));u.setEventedParent(null);let p=this._order.indexOf(s);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=u,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],u.onRemove&&u.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,u,p){this._checkLoaded();let f=this.getLayer(s);f?f.minzoom===u&&f.maxzoom===p||(u!=null&&(f.minzoom=u),p!=null&&(f.maxzoom=p),this._updateLayer(f)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,u,p={}){this._checkLoaded();let f=this.getLayer(s);if(f){if(!o.aE(f.filter,u))return u==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(o.u.filter,`layers.${f.id}.filter`,u,null,p)||(f.filter=o.aB(u),this._updateLayer(f)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.aB(this.getLayer(s).filter)}setLayoutProperty(s,u,p,f={}){this._checkLoaded();let y=this.getLayer(s);y?o.aE(y.getLayoutProperty(u),p)||(y.setLayoutProperty(u,p,f),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,u){let p=this.getLayer(s);if(p)return p.getLayoutProperty(u);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,u,p,f={}){this._checkLoaded();let y=this.getLayer(s);y?o.aE(y.getPaintProperty(u),p)||(y.setPaintProperty(u,p,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,u){return this.getLayer(s).getPaintProperty(u)}setFeatureState(s,u){this._checkLoaded();let p=s.source,f=s.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));let C=y.getSource().type;C==="geojson"&&f?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||f?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,s.id,u)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,u){this._checkLoaded();let p=s.source,f=this.sourceCaches[p];if(f===void 0)return void this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)));let y=f.getSource().type,C=y==="vector"?s.sourceLayer:void 0;y!=="vector"||C?u&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(C,s.id,u):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let u=s.source,p=s.sourceLayer,f=this.sourceCaches[u];if(f!==void 0)return f.getSource().type!=="vector"||p?(s.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(p,s.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=o.aF(this.sourceCaches,y=>y.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,f=this.stylesheet;return o.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:s,layers:u,terrain:p},y=>y!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let u=C=>this._layers[C].type==="fill-extrusion",p={},f=[];for(let C=this._order.length-1;C>=0;C--){let I=this._order[C];if(u(I)){p[I]=C;for(let T of s){let P=T[I];if(P)for(let k of P)f.push(k)}}}f.sort((C,I)=>I.intersectionZ-C.intersectionZ);let y=[];for(let C=this._order.length-1;C>=0;C--){let I=this._order[C];if(u(I))for(let T=f.length-1;T>=0;T--){let P=f[T].feature;if(p[P.layer.id]<C)break;y.push(P),f.pop()}else for(let T of s){let P=T[I];if(P)for(let k of P)y.push(k.feature)}}return y}queryRenderedFeatures(s,u,p){u&&u.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",u.filter,null,u);let f={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(let I of u.layers){let T=this._layers[I];if(!T)return this.fire(new o.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];f[T.source]=!0}}let y=[];u.availableImages=this._availableImages;let C=this._serializedAllLayers();for(let I in this.sourceCaches)u.layers&&!f[I]||y.push(Za(this.sourceCaches[I],this._layers,C,s,u,p));return this.placement&&y.push(function(I,T,P,k,N,V,G){let K={},te=V.queryRenderedSymbols(k),se=[];for(let ae of Object.keys(te).map(Number))se.push(G[ae]);se.sort(Ka);for(let ae of se){let ce=ae.featureIndex.lookupSymbolFeatures(te[ae.bucketInstanceId],T,ae.bucketIndex,ae.sourceLayerIndex,N.filter,N.layers,N.availableImages,I);for(let X in ce){let pe=K[X]=K[X]||[],ge=ce[X];ge.sort((Se,ke)=>{let ze=ae.featureSortOrder;if(ze){let Xe=ze.indexOf(Se.featureIndex);return ze.indexOf(ke.featureIndex)-Xe}return ke.featureIndex-Se.featureIndex});for(let Se of ge)pe.push(Se)}}for(let ae in K)K[ae].forEach(ce=>{let X=ce.feature,pe=P[I[ae].source].getFeatureState(X.layer["source-layer"],X.id);X.source=X.layer.source,X.layer["source-layer"]&&(X.sourceLayer=X.layer["source-layer"]),X.state=pe});return K}(this._layers,C,this.sourceCaches,s,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(s,u){u&&u.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",u.filter,null,u);let p=this.sourceCaches[s];return p?function(f,y){let C=f.getRenderableIds().map(P=>f.getTileByID(P)),I=[],T={};for(let P=0;P<C.length;P++){let k=C[P],N=k.tileID.canonical.key;T[N]||(T[N]=!0,k.querySourceFeatures(I,y))}return I}(p,u):[]}getLight(){return this.light.getLight()}setLight(s,u={}){this._checkLoaded();let p=this.light.getLight(),f=!1;for(let C in s)if(!o.aE(s[C],p[C])){f=!0;break}if(!f)return;let y={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,u),this.light.updateTransitions(y)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,u={}){let p=this.getSky(),f=!1;if(!s&&!p)return;if(s&&!p)f=!0;else if(!s&&p)f=!0;else for(let C in s)if(!o.aE(s[C],p[C])){f=!0;break}if(!f)return;let y={now:x.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,u),this.sky.updateTransitions(y)}_validate(s,u,p,f,y={}){return(!y||y.validate!==!1)&&os(this,s.call(o.u,o.e({key:u,style:this.serialize(),value:p,styleSpec:o.v},f)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),zs().off(je,this._rtlPluginLoaded);for(let u in this._layers)this._layers[u].setEventedParent(null);for(let u in this.sourceCaches){let p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let u in this.sourceCaches)this.sourceCaches[u].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,u,p,f,y=!1){let C=!1,I=!1,T={};for(let P of this._order){let k=this._layers[P];if(k.type!=="symbol")continue;if(!T[k.source]){let V=this.sourceCaches[k.source];T[k.source]=V.getRenderableIds(!0).map(G=>V.getTileByID(G)).sort((G,K)=>K.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(K.tileID)?-1:1))}let N=this.crossTileSymbolIndex.addLayer(k,T[k.source],s.center.lng);C=C||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(x.now(),s.zoom))&&(this.pauseablePlacement=new yd(s,this.map.terrain,this._order,y,u,p,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(x.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(let P of this._order){let k=this._layers[P];k.type==="symbol"&&this.placement.updateLayerOpacities(k,T[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(x.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,u){return o._(this,void 0,void 0,function*(){let p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();let f=this.sourceCaches[u.source];return f&&f.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(s,u){return o._(this,void 0,void 0,function*(){let p=yield this.glyphManager.getGlyphs(u.stacks),f=this.sourceCaches[u.source];return f&&f.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,u={}){this._checkLoaded(),s&&this._validate(o.u.glyphs,"glyphs",s,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,u,p={},f){this._checkLoaded();let y=[{id:s,url:u}],C=[...gt(this.stylesheet.sprite),...y];this._validate(o.u.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(y,!0,f))}removeSprite(s){this._checkLoaded();let u=gt(this.stylesheet.sprite);if(u.find(p=>p.id===s)){if(this._spritesImagesIds[s])for(let p of this._spritesImagesIds[s])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===s),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return gt(this.stylesheet.sprite)}setSprite(s,u={},p){this._checkLoaded(),s&&this._validate(o.u.sprite,"sprite",s,null,u)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,p):(this._unloadSprite(),p&&p(null)))}}var $l=o.Y([{name:"a_pos",type:"Int16",components:2}]);let Qa={prelude:On(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:On(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:On(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:On(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:On("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:On(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:On(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:On("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:On("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:On("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:On(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:On(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:On(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:On(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:On(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:On(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:On(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:On(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:On(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:On(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:On(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:On(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:On(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:On(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:On("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:On("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:On("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:On("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function On(_,s){let u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=s.match(/attribute ([\w]+) ([\w]+)/g),f=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=y?y.concat(f):f,I={};return{fragmentSource:_=_.replace(u,(T,P,k,N,V)=>(I[V]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
varying ${k} ${N} ${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = u_${V};
#endif
`)),vertexSource:s=s.replace(u,(T,P,k,N,V)=>{let G=N==="float"?"vec2":"vec4",K=V.match(/color/)?"color":G;return I[V]?P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${k} ${G} a_${V};
varying ${k} ${N} ${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${K}(a_${V}, u_${V}_t);
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${k} ${G} a_${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = a_${V};
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = unpack_mix_${K}(a_${V}, u_${V}_t);
#else
    ${k} ${N} ${V} = u_${V};
#endif
`}),staticAttributes:p,staticUniforms:C}}class dg{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,u,p,f,y,C,I,T,P){this.context=s;let k=this.boundPaintVertexBuffers.length!==f.length;for(let N=0;!k&&N<f.length;N++)this.boundPaintVertexBuffers[N]!==f[N]&&(k=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||k||this.boundIndexBuffer!==y||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==P?this.freshBind(u,p,f,y,C,I,T,P):(s.bindVertexArray.set(this.vao),I&&I.bind(),y&&y.dynamicDraw&&y.bind(),T&&T.bind(),P&&P.bind())}freshBind(s,u,p,f,y,C,I,T){let P=s.numAttributes,k=this.context,N=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=T,u.enableAttributes(N,s);for(let V of p)V.enableAttributes(N,s);C&&C.enableAttributes(N,s),I&&I.enableAttributes(N,s),T&&T.enableAttributes(N,s),u.bind(),u.setVertexAttribPointers(N,s,y);for(let V of p)V.bind(),V.setVertexAttribPointers(N,s,y);C&&(C.bind(),C.setVertexAttribPointers(N,s,y)),f&&f.bind(),I&&(I.bind(),I.setVertexAttribPointers(N,s,y)),T&&(T.bind(),T.setVertexAttribPointers(N,s,y)),k.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let hg=(_,s,u,p,f)=>({u_matrix:_,u_texture:0,u_ele_delta:s,u_fog_matrix:u,u_fog_color:p?p.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(f):0,u_horizon_color:p?p.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Bc(_){let s=[];for(let u=0;u<_.length;u++){if(_[u]===null)continue;let p=_[u].split(" ");s.push(p.pop())}return s}class pg{constructor(s,u,p,f,y,C){let I=s.gl;this.program=I.createProgram();let T=Bc(u.staticAttributes),P=p?p.getBinderAttributes():[],k=T.concat(P),N=Qa.prelude.staticUniforms?Bc(Qa.prelude.staticUniforms):[],V=u.staticUniforms?Bc(u.staticUniforms):[],G=p?p.getBinderUniforms():[],K=N.concat(V).concat(G),te=[];for(let Se of K)te.indexOf(Se)<0&&te.push(Se);let se=p?p.defines():[];y&&se.push("#define OVERDRAW_INSPECTOR;"),C&&se.push("#define TERRAIN3D;");let ae=se.concat(Qa.prelude.fragmentSource,u.fragmentSource).join(`
`),ce=se.concat(Qa.prelude.vertexSource,u.vertexSource).join(`
`),X=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(X,ae),I.compileShader(X),!I.getShaderParameter(X,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(X)}`);I.attachShader(this.program,X);let pe=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(pe,ce),I.compileShader(pe),!I.getShaderParameter(pe,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(pe)}`);I.attachShader(this.program,pe),this.attributes={};let ge={};this.numAttributes=k.length;for(let Se=0;Se<this.numAttributes;Se++)k[Se]&&(I.bindAttribLocation(this.program,Se,k[Se]),this.attributes[k[Se]]=Se);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(pe),I.deleteShader(X);for(let Se=0;Se<te.length;Se++){let ke=te[Se];if(ke&&!ge[ke]){let ze=I.getUniformLocation(this.program,ke);ze&&(ge[ke]=ze)}}this.fixedUniforms=f(s,ge),this.terrainUniforms=((Se,ke)=>({u_depth:new o.aH(Se,ke.u_depth),u_terrain:new o.aH(Se,ke.u_terrain),u_terrain_dim:new o.aI(Se,ke.u_terrain_dim),u_terrain_matrix:new o.aJ(Se,ke.u_terrain_matrix),u_terrain_unpack:new o.aK(Se,ke.u_terrain_unpack),u_terrain_exaggeration:new o.aI(Se,ke.u_terrain_exaggeration)}))(s,ge),this.binderUniforms=p?p.getUniforms(s,ge):[]}draw(s,u,p,f,y,C,I,T,P,k,N,V,G,K,te,se,ae,ce){let X=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(p),s.setStencilMode(f),s.setColorMode(y),s.setCullFace(C),T){s.activeTexture.set(X.TEXTURE2),X.bindTexture(X.TEXTURE_2D,T.depthTexture),s.activeTexture.set(X.TEXTURE3),X.bindTexture(X.TEXTURE_2D,T.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(T[ge])}for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(I[ge]);te&&te.setUniforms(s,this.binderUniforms,G,{zoom:K});let pe=0;switch(u){case X.LINES:pe=2;break;case X.TRIANGLES:pe=3;break;case X.LINE_STRIP:pe=1}for(let ge of V.get()){let Se=ge.vaos||(ge.vaos={});(Se[P]||(Se[P]=new dg)).bind(s,this,k,te?te.getPaintVertexBuffers():[],N,ge.vertexOffset,se,ae,ce),X.drawElements(u,ge.primitiveLength*pe,X.UNSIGNED_SHORT,ge.primitiveOffset*pe*2)}}}function sp(_,s,u){let p=1/fn(u,1,s.transform.tileZoom),f=Math.pow(2,u.tileID.overscaledZ),y=u.tileSize*Math.pow(2,s.transform.tileZoom)/f,C=y*(u.tileID.canonical.x+u.tileID.wrap*f),I=y*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}let _d=(_,s,u,p)=>{let f=s.style.light,y=f.properties.get("position"),C=[y.x,y.y,y.z],I=function(){var P=new o.A(9);return o.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();f.properties.get("anchor")==="viewport"&&function(P,k){var N=Math.sin(k),V=Math.cos(k);P[0]=V,P[1]=N,P[2]=0,P[3]=-N,P[4]=V,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(I,-s.transform.angle),function(P,k,N){var V=k[0],G=k[1],K=k[2];P[0]=V*N[0]+G*N[3]+K*N[6],P[1]=V*N[1]+G*N[4]+K*N[7],P[2]=V*N[2]+G*N[5]+K*N[8]}(C,C,I);let T=f.properties.get("color");return{u_matrix:_,u_lightpos:C,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+u,u_opacity:p}},ap=(_,s,u,p,f,y,C)=>o.e(_d(_,s,u,p),sp(y,s,C),{u_height_factor:-Math.pow(2,f.overscaledZ)/C.tileSize/8}),Uc=_=>({u_matrix:_}),Xv=(_,s,u,p)=>o.e(Uc(_),sp(u,s,p)),vC=(_,s)=>({u_matrix:_,u_world:s}),Qv=(_,s,u,p,f)=>o.e(Xv(_,s,u,p),{u_world:f}),bC=(_,s,u,p)=>{let f=_.transform,y,C;if(p.paint.get("circle-pitch-alignment")==="map"){let I=fn(u,1,f.zoom);y=!0,C=[I,I]}else y=!1,C=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(s.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:C}},Gl=(_,s,u)=>({u_matrix:_,u_inv_matrix:s,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),vd=(_,s,u=1)=>({u_matrix:_,u_color:s,u_overlay:0,u_overlay_scale:u}),oo=_=>({u_matrix:_}),so=(_,s,u,p)=>({u_matrix:_,u_extrude_scale:fn(s,1,u),u_intensity:p}),lp=(_,s,u,p)=>{let f=o.H();o.aP(f,0,_.width,_.height,0,0,1);let y=_.context.gl;return{u_matrix:f,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:s.paint.get("heatmap-opacity")}};function cp(_,s){let u=Math.pow(2,s.canonical.z),p=s.canonical.y;return[new o.Z(0,p/u).toLngLat().lat,new o.Z(0,(p+1)/u).toLngLat().lat]}let up=(_,s,u,p)=>{let f=_.transform;return{u_matrix:n0(_,s,u,p),u_ratio:1/fn(s,1,f.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},e0=(_,s,u,p,f)=>o.e(up(_,s,u,f),{u_image:0,u_image_height:p}),zc=(_,s,u,p,f)=>{let y=_.transform,C=t0(s,y);return{u_matrix:n0(_,s,u,f),u_texsize:s.imageAtlasTexture.size,u_ratio:1/fn(s,1,y.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},wC=(_,s,u,p,f,y)=>{let C=_.lineAtlas,I=t0(s,_.transform),T=u.layout.get("line-cap")==="round",P=C.getDash(p.from,T),k=C.getDash(p.to,T),N=P.width*f.fromScale,V=k.width*f.toScale;return o.e(up(_,s,u,y),{u_patternscale_a:[I/N,-P.height/2],u_patternscale_b:[I/V,-k.height/2],u_sdfgamma:C.width/(256*Math.min(N,V)*_.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:k.y,u_mix:f.t})};function t0(_,s){return 1/fn(_,1,s.tileZoom)}function n0(_,s,u,p){return _.translatePosMatrix(p?p.posMatrix:s.tileID.posMatrix,s,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}let xC=(_,s,u,p,f)=>{return{u_matrix:_,u_tl_parent:s,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(C=f.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:SC(f.paint.get("raster-hue-rotate"))};var y,C};function SC(_){_*=Math.PI/180;let s=Math.sin(_),u=Math.cos(_);return[(2*u+1)/3,(-Math.sqrt(3)*s-u+1)/3,(Math.sqrt(3)*s-u+1)/3]}let i0=(_,s,u,p,f,y,C,I,T,P,k,N,V,G)=>{let K=C.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:K.width/K.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:I,u_label_plane_matrix:T,u_coord_matrix:P,u_is_text:+N,u_pitch_with_map:+p,u_is_along_line:f,u_is_variable_anchor:y,u_texsize:V,u_texture:0,u_translation:k,u_pitched_scale:G}},bd=(_,s,u,p,f,y,C,I,T,P,k,N,V,G,K)=>{let te=C.transform;return o.e(i0(_,s,u,p,f,y,C,I,T,P,k,N,V,K),{u_gamma_scale:p?Math.cos(te._pitch)*te.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+G})},fg=(_,s,u,p,f,y,C,I,T,P,k,N,V,G)=>o.e(bd(_,s,u,p,f,y,C,I,T,P,k,!0,N,!0,G),{u_texsize_icon:V,u_texture_icon:1}),dp=(_,s,u)=>({u_matrix:_,u_opacity:s,u_color:u}),mg=(_,s,u,p,f,y)=>o.e(function(C,I,T,P){let k=T.imageManager.getPattern(C.from.toString()),N=T.imageManager.getPattern(C.to.toString()),{width:V,height:G}=T.imageManager.getPixelSize(),K=Math.pow(2,P.tileID.overscaledZ),te=P.tileSize*Math.pow(2,T.transform.tileZoom)/K,se=te*(P.tileID.canonical.x+P.tileID.wrap*K),ae=te*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[V,G],u_mix:I.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/fn(P,1,T.transform.tileZoom),u_pixel_coord_upper:[se>>16,ae>>16],u_pixel_coord_lower:[65535&se,65535&ae]}}(p,y,u,f),{u_matrix:_,u_opacity:s}),gg={fillExtrusion:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_lightpos:new o.aN(_,s.u_lightpos),u_lightintensity:new o.aI(_,s.u_lightintensity),u_lightcolor:new o.aN(_,s.u_lightcolor),u_vertical_gradient:new o.aI(_,s.u_vertical_gradient),u_opacity:new o.aI(_,s.u_opacity)}),fillExtrusionPattern:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_lightpos:new o.aN(_,s.u_lightpos),u_lightintensity:new o.aI(_,s.u_lightintensity),u_lightcolor:new o.aN(_,s.u_lightcolor),u_vertical_gradient:new o.aI(_,s.u_vertical_gradient),u_height_factor:new o.aI(_,s.u_height_factor),u_image:new o.aH(_,s.u_image),u_texsize:new o.aO(_,s.u_texsize),u_pixel_coord_upper:new o.aO(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(_,s.u_pixel_coord_lower),u_scale:new o.aN(_,s.u_scale),u_fade:new o.aI(_,s.u_fade),u_opacity:new o.aI(_,s.u_opacity)}),fill:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix)}),fillPattern:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_image:new o.aH(_,s.u_image),u_texsize:new o.aO(_,s.u_texsize),u_pixel_coord_upper:new o.aO(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(_,s.u_pixel_coord_lower),u_scale:new o.aN(_,s.u_scale),u_fade:new o.aI(_,s.u_fade)}),fillOutline:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_world:new o.aO(_,s.u_world)}),fillOutlinePattern:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_world:new o.aO(_,s.u_world),u_image:new o.aH(_,s.u_image),u_texsize:new o.aO(_,s.u_texsize),u_pixel_coord_upper:new o.aO(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(_,s.u_pixel_coord_lower),u_scale:new o.aN(_,s.u_scale),u_fade:new o.aI(_,s.u_fade)}),circle:(_,s)=>({u_camera_to_center_distance:new o.aI(_,s.u_camera_to_center_distance),u_scale_with_map:new o.aH(_,s.u_scale_with_map),u_pitch_with_map:new o.aH(_,s.u_pitch_with_map),u_extrude_scale:new o.aO(_,s.u_extrude_scale),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_matrix:new o.aJ(_,s.u_matrix)}),collisionBox:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_pixel_extrude_scale:new o.aO(_,s.u_pixel_extrude_scale)}),collisionCircle:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_inv_matrix:new o.aJ(_,s.u_inv_matrix),u_camera_to_center_distance:new o.aI(_,s.u_camera_to_center_distance),u_viewport_size:new o.aO(_,s.u_viewport_size)}),debug:(_,s)=>({u_color:new o.aL(_,s.u_color),u_matrix:new o.aJ(_,s.u_matrix),u_overlay:new o.aH(_,s.u_overlay),u_overlay_scale:new o.aI(_,s.u_overlay_scale)}),clippingMask:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix)}),heatmap:(_,s)=>({u_extrude_scale:new o.aI(_,s.u_extrude_scale),u_intensity:new o.aI(_,s.u_intensity),u_matrix:new o.aJ(_,s.u_matrix)}),heatmapTexture:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_world:new o.aO(_,s.u_world),u_image:new o.aH(_,s.u_image),u_color_ramp:new o.aH(_,s.u_color_ramp),u_opacity:new o.aI(_,s.u_opacity)}),hillshade:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_image:new o.aH(_,s.u_image),u_latrange:new o.aO(_,s.u_latrange),u_light:new o.aO(_,s.u_light),u_shadow:new o.aL(_,s.u_shadow),u_highlight:new o.aL(_,s.u_highlight),u_accent:new o.aL(_,s.u_accent)}),hillshadePrepare:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_image:new o.aH(_,s.u_image),u_dimension:new o.aO(_,s.u_dimension),u_zoom:new o.aI(_,s.u_zoom),u_unpack:new o.aK(_,s.u_unpack)}),line:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_ratio:new o.aI(_,s.u_ratio),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(_,s.u_units_to_pixels)}),lineGradient:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_ratio:new o.aI(_,s.u_ratio),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(_,s.u_units_to_pixels),u_image:new o.aH(_,s.u_image),u_image_height:new o.aI(_,s.u_image_height)}),linePattern:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_texsize:new o.aO(_,s.u_texsize),u_ratio:new o.aI(_,s.u_ratio),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_image:new o.aH(_,s.u_image),u_units_to_pixels:new o.aO(_,s.u_units_to_pixels),u_scale:new o.aN(_,s.u_scale),u_fade:new o.aI(_,s.u_fade)}),lineSDF:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_ratio:new o.aI(_,s.u_ratio),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_units_to_pixels:new o.aO(_,s.u_units_to_pixels),u_patternscale_a:new o.aO(_,s.u_patternscale_a),u_patternscale_b:new o.aO(_,s.u_patternscale_b),u_sdfgamma:new o.aI(_,s.u_sdfgamma),u_image:new o.aH(_,s.u_image),u_tex_y_a:new o.aI(_,s.u_tex_y_a),u_tex_y_b:new o.aI(_,s.u_tex_y_b),u_mix:new o.aI(_,s.u_mix)}),raster:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_tl_parent:new o.aO(_,s.u_tl_parent),u_scale_parent:new o.aI(_,s.u_scale_parent),u_buffer_scale:new o.aI(_,s.u_buffer_scale),u_fade_t:new o.aI(_,s.u_fade_t),u_opacity:new o.aI(_,s.u_opacity),u_image0:new o.aH(_,s.u_image0),u_image1:new o.aH(_,s.u_image1),u_brightness_low:new o.aI(_,s.u_brightness_low),u_brightness_high:new o.aI(_,s.u_brightness_high),u_saturation_factor:new o.aI(_,s.u_saturation_factor),u_contrast_factor:new o.aI(_,s.u_contrast_factor),u_spin_weights:new o.aN(_,s.u_spin_weights)}),symbolIcon:(_,s)=>({u_is_size_zoom_constant:new o.aH(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(_,s.u_is_size_feature_constant),u_size_t:new o.aI(_,s.u_size_t),u_size:new o.aI(_,s.u_size),u_camera_to_center_distance:new o.aI(_,s.u_camera_to_center_distance),u_pitch:new o.aI(_,s.u_pitch),u_rotate_symbol:new o.aH(_,s.u_rotate_symbol),u_aspect_ratio:new o.aI(_,s.u_aspect_ratio),u_fade_change:new o.aI(_,s.u_fade_change),u_matrix:new o.aJ(_,s.u_matrix),u_label_plane_matrix:new o.aJ(_,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(_,s.u_coord_matrix),u_is_text:new o.aH(_,s.u_is_text),u_pitch_with_map:new o.aH(_,s.u_pitch_with_map),u_is_along_line:new o.aH(_,s.u_is_along_line),u_is_variable_anchor:new o.aH(_,s.u_is_variable_anchor),u_texsize:new o.aO(_,s.u_texsize),u_texture:new o.aH(_,s.u_texture),u_translation:new o.aO(_,s.u_translation),u_pitched_scale:new o.aI(_,s.u_pitched_scale)}),symbolSDF:(_,s)=>({u_is_size_zoom_constant:new o.aH(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(_,s.u_is_size_feature_constant),u_size_t:new o.aI(_,s.u_size_t),u_size:new o.aI(_,s.u_size),u_camera_to_center_distance:new o.aI(_,s.u_camera_to_center_distance),u_pitch:new o.aI(_,s.u_pitch),u_rotate_symbol:new o.aH(_,s.u_rotate_symbol),u_aspect_ratio:new o.aI(_,s.u_aspect_ratio),u_fade_change:new o.aI(_,s.u_fade_change),u_matrix:new o.aJ(_,s.u_matrix),u_label_plane_matrix:new o.aJ(_,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(_,s.u_coord_matrix),u_is_text:new o.aH(_,s.u_is_text),u_pitch_with_map:new o.aH(_,s.u_pitch_with_map),u_is_along_line:new o.aH(_,s.u_is_along_line),u_is_variable_anchor:new o.aH(_,s.u_is_variable_anchor),u_texsize:new o.aO(_,s.u_texsize),u_texture:new o.aH(_,s.u_texture),u_gamma_scale:new o.aI(_,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_is_halo:new o.aH(_,s.u_is_halo),u_translation:new o.aO(_,s.u_translation),u_pitched_scale:new o.aI(_,s.u_pitched_scale)}),symbolTextAndIcon:(_,s)=>({u_is_size_zoom_constant:new o.aH(_,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(_,s.u_is_size_feature_constant),u_size_t:new o.aI(_,s.u_size_t),u_size:new o.aI(_,s.u_size),u_camera_to_center_distance:new o.aI(_,s.u_camera_to_center_distance),u_pitch:new o.aI(_,s.u_pitch),u_rotate_symbol:new o.aH(_,s.u_rotate_symbol),u_aspect_ratio:new o.aI(_,s.u_aspect_ratio),u_fade_change:new o.aI(_,s.u_fade_change),u_matrix:new o.aJ(_,s.u_matrix),u_label_plane_matrix:new o.aJ(_,s.u_label_plane_matrix),u_coord_matrix:new o.aJ(_,s.u_coord_matrix),u_is_text:new o.aH(_,s.u_is_text),u_pitch_with_map:new o.aH(_,s.u_pitch_with_map),u_is_along_line:new o.aH(_,s.u_is_along_line),u_is_variable_anchor:new o.aH(_,s.u_is_variable_anchor),u_texsize:new o.aO(_,s.u_texsize),u_texsize_icon:new o.aO(_,s.u_texsize_icon),u_texture:new o.aH(_,s.u_texture),u_texture_icon:new o.aH(_,s.u_texture_icon),u_gamma_scale:new o.aI(_,s.u_gamma_scale),u_device_pixel_ratio:new o.aI(_,s.u_device_pixel_ratio),u_is_halo:new o.aH(_,s.u_is_halo),u_translation:new o.aO(_,s.u_translation),u_pitched_scale:new o.aI(_,s.u_pitched_scale)}),background:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_opacity:new o.aI(_,s.u_opacity),u_color:new o.aL(_,s.u_color)}),backgroundPattern:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_opacity:new o.aI(_,s.u_opacity),u_image:new o.aH(_,s.u_image),u_pattern_tl_a:new o.aO(_,s.u_pattern_tl_a),u_pattern_br_a:new o.aO(_,s.u_pattern_br_a),u_pattern_tl_b:new o.aO(_,s.u_pattern_tl_b),u_pattern_br_b:new o.aO(_,s.u_pattern_br_b),u_texsize:new o.aO(_,s.u_texsize),u_mix:new o.aI(_,s.u_mix),u_pattern_size_a:new o.aO(_,s.u_pattern_size_a),u_pattern_size_b:new o.aO(_,s.u_pattern_size_b),u_scale_a:new o.aI(_,s.u_scale_a),u_scale_b:new o.aI(_,s.u_scale_b),u_pixel_coord_upper:new o.aO(_,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(_,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(_,s.u_tile_units_to_pixels)}),terrain:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_texture:new o.aH(_,s.u_texture),u_ele_delta:new o.aI(_,s.u_ele_delta),u_fog_matrix:new o.aJ(_,s.u_fog_matrix),u_fog_color:new o.aL(_,s.u_fog_color),u_fog_ground_blend:new o.aI(_,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(_,s.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(_,s.u_horizon_color),u_horizon_fog_blend:new o.aI(_,s.u_horizon_fog_blend)}),terrainDepth:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_ele_delta:new o.aI(_,s.u_ele_delta)}),terrainCoords:(_,s)=>({u_matrix:new o.aJ(_,s.u_matrix),u_texture:new o.aH(_,s.u_texture),u_terrain_coords_id:new o.aI(_,s.u_terrain_coords_id),u_ele_delta:new o.aI(_,s.u_ele_delta)}),sky:(_,s)=>({u_sky_color:new o.aL(_,s.u_sky_color),u_horizon_color:new o.aL(_,s.u_horizon_color),u_horizon:new o.aI(_,s.u_horizon),u_sky_horizon_blend:new o.aI(_,s.u_sky_horizon_blend)})};class Hs{constructor(s,u,p){this.context=s;let f=s.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let CC={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yg{constructor(s,u,p,f){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=f,this.context=s;let y=s.gl;this.buffer=y.createBuffer(),s.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,u){for(let p=0;p<this.attributes.length;p++){let f=u.attributes[this.attributes[p].name];f!==void 0&&s.enableVertexAttribArray(f)}}setVertexAttribPointers(s,u,p){for(let f=0;f<this.attributes.length;f++){let y=this.attributes[f],C=u.attributes[y.name];C!==void 0&&s.vertexAttribPointer(C,y.components,s[CC[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ql=new WeakMap;function el(_){var s;if(ql.has(_))return ql.get(_);{let u=(s=_.getParameter(_.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return ql.set(_,u),u}}class Fn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hp extends Fn{getDefault(){return o.aM.transparent}set(s){let u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class EC extends Fn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Vc extends Fn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class IC extends Fn{getDefault(){return[!0,!0,!0,!0]}set(s){let u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class r0 extends Fn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class DC extends Fn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class o0 extends Fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let u=this.current;(s.func!==u.func||s.ref!==u.ref||s.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class _g extends Fn{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class s0 extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;s?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=s,this.dirty=!1}}class a0 extends Fn{getDefault(){return[0,1]}set(s){let u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class l0 extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;s?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=s,this.dirty=!1}}class c0 extends Fn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Wl extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;s?u.enable(u.BLEND):u.disable(u.BLEND),this.current=s,this.dirty=!1}}class u0 extends Fn{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class TC extends Fn{getDefault(){return o.aM.transparent}set(s){let u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class d0 extends Fn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class wd extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;s?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=s,this.dirty=!1}}class AC extends Fn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class pp extends Fn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class MC extends Fn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class PC extends Fn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class h0 extends Fn{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class p0 extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class f0 extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class vg extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.bindTexture(u.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class m0 extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class fp extends Fn{getDefault(){return null}set(s){let u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Ea extends Fn{getDefault(){return null}set(s){var u;if(s===this.current&&!this.dirty)return;let p=this.gl;el(p)?p.bindVertexArray(s):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class bg extends Fn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class wg extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class xg extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class mp extends Fn{constructor(s,u){super(s),this.context=s,this.parent=u}getDefault(){return null}}class Sg extends mp{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Zl extends mp{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Cg extends mp{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class RC{constructor(s,u,p,f,y){this.context=s,this.width=u,this.height=p;let C=s.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Sg(s,I),f)this.depthAttachment=y?new Cg(s,I):new Zl(s,I);else if(y)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let s=this.context.gl,u=this.colorAttachment.get();if(u&&s.deleteTexture(u),this.depthAttachment){let p=this.depthAttachment.get();p&&s.deleteRenderbuffer(p)}s.deleteFramebuffer(this.framebuffer)}}class ki{constructor(s,u,p){this.blendFunction=s,this.blendColor=u,this.mask=p}}ki.Replace=[1,0],ki.disabled=new ki(ki.Replace,o.aM.transparent,[!1,!1,!1,!1]),ki.unblended=new ki(ki.Replace,o.aM.transparent,[!0,!0,!0,!0]),ki.alphaBlended=new ki([1,771],o.aM.transparent,[!0,!0,!0,!0]);class OC{constructor(s){var u,p;if(this.gl=s,this.clearColor=new hp(this),this.clearDepth=new EC(this),this.clearStencil=new Vc(this),this.colorMask=new IC(this),this.depthMask=new r0(this),this.stencilMask=new DC(this),this.stencilFunc=new o0(this),this.stencilOp=new _g(this),this.stencilTest=new s0(this),this.depthRange=new a0(this),this.depthTest=new l0(this),this.depthFunc=new c0(this),this.blend=new Wl(this),this.blendFunc=new u0(this),this.blendColor=new TC(this),this.blendEquation=new d0(this),this.cullFace=new wd(this),this.cullFaceSide=new AC(this),this.frontFace=new pp(this),this.program=new MC(this),this.activeTexture=new PC(this),this.viewport=new h0(this),this.bindFramebuffer=new p0(this),this.bindRenderbuffer=new f0(this),this.bindTexture=new vg(this),this.bindVertexBuffer=new m0(this),this.bindElementBuffer=new fp(this),this.bindVertexArray=new Ea(this),this.pixelStoreUnpack=new bg(this),this.pixelStoreUnpackPremultiplyAlpha=new wg(this),this.pixelStoreUnpackFlipY=new xg(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),el(s)){this.HALF_FLOAT=s.HALF_FLOAT;let f=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=s.RGBA16F)!==null&&u!==void 0?u:f?.RGBA16F_EXT,this.RGB16F=(p=s.RGB16F)!==null&&p!==void 0?p:f?.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let f=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=f?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,u){return new Hs(this,s,u)}createVertexBuffer(s,u,p){return new yg(this,s,u,p)}createRenderbuffer(s,u,p){let f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,s,u,p),this.bindRenderbuffer.set(null),y}createFramebuffer(s,u,p,f){return new RC(this,s,u,p,f)}clear({color:s,depth:u,stencil:p}){let f=this.gl,y=0;s&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(y|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),f.clear(y)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.aE(s.blendFunction,ki.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return el(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var u;return el(this.gl)?this.gl.deleteVertexArray(s):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class cn{constructor(s,u,p){this.func=s,this.mask=u,this.range=p}}cn.ReadOnly=!1,cn.ReadWrite=!0,cn.disabled=new cn(519,cn.ReadOnly,[0,1]);let gp=7680;class ai{constructor(s,u,p,f,y,C){this.test=s,this.ref=u,this.mask=p,this.fail=f,this.depthFail=y,this.pass=C}}ai.disabled=new ai({func:519,mask:0},0,0,gp,gp,gp);class qn{constructor(s,u,p){this.enable=s,this.mode=u,this.frontFace=p}}let Kl;function xd(_,s,u,p,f){let y=_.context,C=y.gl,I=_.useProgram("collisionBox"),T=[],P=0,k=0;for(let ae=0;ae<p.length;ae++){let ce=p[ae],X=s.getTile(ce).getBucket(u);if(!X)continue;let pe=f?X.textCollisionBox:X.iconCollisionBox,ge=X.collisionCircleArray;if(ge.length>0){let Se=o.H();o.aQ(Se,X.placementInvProjMatrix,_.transform.glCoordMatrix),o.aQ(Se,Se,X.placementViewportMatrix),T.push({circleArray:ge,circleOffset:k,transform:ce.posMatrix,invTransform:Se,coord:ce}),P+=ge.length/4,k=P}pe&&I.draw(y,C.LINES,cn.disabled,ai.disabled,_.colorModeForRenderPass(),qn.disabled,{u_matrix:ce.posMatrix,u_pixel_extrude_scale:[1/(N=_.transform).width,1/N.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce),u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,null,_.transform.zoom,null,null,pe.collisionVertexBuffer)}var N;if(!f||!T.length)return;let V=_.useProgram("collisionCircle"),G=new o.aR;G.resize(4*P),G._trim();let K=0;for(let ae of T)for(let ce=0;ce<ae.circleArray.length/4;ce++){let X=4*ce,pe=ae.circleArray[X+0],ge=ae.circleArray[X+1],Se=ae.circleArray[X+2],ke=ae.circleArray[X+3];G.emplace(K++,pe,ge,Se,ke,0),G.emplace(K++,pe,ge,Se,ke,1),G.emplace(K++,pe,ge,Se,ke,2),G.emplace(K++,pe,ge,Se,ke,3)}(!Kl||Kl.length<2*P)&&(Kl=function(ae){let ce=2*ae,X=new o.aT;X.resize(ce),X._trim();for(let pe=0;pe<ce;pe++){let ge=6*pe;X.uint16[ge+0]=4*pe+0,X.uint16[ge+1]=4*pe+1,X.uint16[ge+2]=4*pe+2,X.uint16[ge+3]=4*pe+2,X.uint16[ge+4]=4*pe+3,X.uint16[ge+5]=4*pe+0}return X}(P));let te=y.createIndexBuffer(Kl,!0),se=y.createVertexBuffer(G,o.aS.members,!0);for(let ae of T){let ce=Gl(ae.transform,ae.invTransform,_.transform);V.draw(y,C.TRIANGLES,cn.disabled,ai.disabled,_.colorModeForRenderPass(),qn.disabled,ce,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ae.coord),u.id,se,te,o.a0.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,_.transform.zoom,null,null,null)}se.destroy(),te.destroy()}qn.disabled=new qn(!1,1029,2305),qn.backCCW=new qn(!0,1029,2305);let Sd=o.an(new Float32Array(16));function Eg(_,s,u,p,f,y){let{horizontalAlign:C,verticalAlign:I}=o.au(_);return new o.P((-(C-.5)*s/f+p[0])*y,(-(I-.5)*u/f+p[1])*y)}function Yl(_,s,u,p,f,y){let C=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let I=p.mult(y);u||(I=I.rotate(-f));let T=C.add(I);return ie(T.x,T.y,s.labelPlaneMatrix,s.getElevation).point}if(u){let I=Ae(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(_),T=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return _.add(p.rotate(T))}return _.add(p)}function jc(_,s,u,p,f,y,C,I,T,P,k,N,V,G){let K=_.text.placedSymbolArray,te=_.text.dynamicLayoutVertexArray,se=_.icon.dynamicLayoutVertexArray,ae={};te.clear();for(let ce=0;ce<K.length;ce++){let X=K.get(ce),pe=X.hidden||!X.crossTileID||_.allowVerticalPlacement&&!X.placedOrientation?null:p[X.crossTileID];if(pe){let ge=new o.P(X.anchorX,X.anchorY),Se={getElevation:G,width:f.width,height:f.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:u,projection:k,projectionCache:null,tileAnchorPoint:ge,translation:N,unwrappedTileID:V},ke=u?ie(ge.x,ge.y,C,G):Ae(ge.x,ge.y,Se),ze=U(f.cameraToCenterDistance,ke.signedDistanceFromCamera),Xe=o.ai(_.textSizeData,T,X)*ze/o.ap;u&&(Xe*=_.tilePixelRatio/I);let{width:it,height:qe,anchor:Ge,textOffset:pt,textBoxScale:$t}=pe,Ke=Eg(Ge,it,qe,pt,$t,Xe),tt=k.getPitchedTextCorrection(f,ge.add(new o.P(N[0],N[1])),V),Ut=Yl(ke.point,Se,s,Ke,f.angle,tt),hi=_.allowVerticalPlacement&&X.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let nn=0;nn<X.numGlyphs;nn++)o.aj(te,Ut,hi);P&&X.associatedIconIndex>=0&&(ae[X.associatedIconIndex]={shiftedAnchor:Ut,angle:hi})}else St(X.numGlyphs,te)}if(P){se.clear();let ce=_.icon.placedSymbolArray;for(let X=0;X<ce.length;X++){let pe=ce.get(X);if(pe.hidden)St(pe.numGlyphs,se);else{let ge=ae[X];if(ge)for(let Se=0;Se<pe.numGlyphs;Se++)o.aj(se,ge.shiftedAnchor,ge.angle);else St(pe.numGlyphs,se)}}_.icon.dynamicLayoutVertexBuffer.updateData(se)}_.text.dynamicLayoutVertexBuffer.updateData(te)}function Lo(_,s,u){return u.iconsInText&&s?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Ig(_,s,u,p,f,y,C,I,T,P,k,N){let V=_.context,G=V.gl,K=_.transform,te=Hl(),se=I==="map",ae=T==="map",ce=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",X=se&&!ae&&!ce,pe=!ae&&ce,ge=!u.layout.get("symbol-sort-key").isConstant(),Se=!1,ke=_.depthModeForSublayer(0,cn.ReadOnly),ze=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Xe=[],it=te.getCircleRadiusCorrection(K);for(let qe of p){let Ge=s.getTile(qe),pt=Ge.getBucket(u);if(!pt)continue;let $t=f?pt.text:pt.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;let Ke=$t.programConfigurations.get(u.id),tt=f||pt.sdfIcons,Ut=f?pt.textSizeData:pt.iconSizeData,hi=ae||K.pitch!==0,nn=_.useProgram(Lo(tt,f,pt),Ke),mn=o.ag(Ut,K.zoom),pi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(qe),Tr,ls,fi,ao,Gr=[0,0],Ar=null;if(f)ls=Ge.glyphAtlasTexture,fi=G.LINEAR,Tr=Ge.glyphAtlasTexture.size,pt.iconsInText&&(Gr=Ge.imageAtlasTexture.size,Ar=Ge.imageAtlasTexture,ao=hi||_.options.rotating||_.options.zooming||Ut.kind==="composite"||Ut.kind==="camera"?G.LINEAR:G.NEAREST);else{let vn=u.layout.get("icon-size").constantOr(0)!==1||pt.iconsNeedLinear;ls=Ge.imageAtlasTexture,fi=tt||_.options.rotating||_.options.zooming||vn||hi?G.LINEAR:G.NEAREST,Tr=Ge.imageAtlasTexture.size}let qr=fn(Ge,1,_.transform.zoom),qs=pe?qe.posMatrix:Sd,ru=Xa(qs,ae,se,_.transform,qr),Np=js(qs,ae,se,_.transform,qr),ou=js(qe.posMatrix,ae,se,_.transform,qr),zo=te.translatePosition(_.transform,Ge,y,C),Fp=ze&&pt.hasTextData(),Jg=u.layout.get("icon-text-fit")!=="none"&&Fp&&pt.hasIconData();if(ce){let vn=_.style.map.terrain?(su,au)=>_.style.map.terrain.getElevation(qe,su,au):null,tc=u.layout.get("text-rotation-alignment")==="map";W(pt,qe.posMatrix,_,f,ru,ou,ae,P,tc,te,qe.toUnwrapped(),K.width,K.height,zo,vn)}let Vo=qe.posMatrix,jo=f&&ze||Jg,tl=ce||jo?Sd:ru,cs=Np,_r=tt&&u.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Mr;Mr=tt?pt.iconsInText?fg(Ut.kind,mn,X,ae,ce,jo,_,Vo,tl,cs,zo,Tr,Gr,it):bd(Ut.kind,mn,X,ae,ce,jo,_,Vo,tl,cs,zo,f,Tr,!0,it):i0(Ut.kind,mn,X,ae,ce,jo,_,Vo,tl,cs,zo,f,Tr,it);let Io={program:nn,buffers:$t,uniformValues:Mr,atlasTexture:ls,atlasTextureIcon:Ar,atlasInterpolation:fi,atlasInterpolationIcon:ao,isSDF:tt,hasHalo:_r};if(ge&&pt.canOverlap){Se=!0;let vn=$t.segments.get();for(let tc of vn)Xe.push({segments:new o.a0([tc]),sortKey:tc.sortKey,state:Io,terrainData:pi})}else Xe.push({segments:$t.segments,sortKey:0,state:Io,terrainData:pi})}Se&&Xe.sort((qe,Ge)=>qe.sortKey-Ge.sortKey);for(let qe of Xe){let Ge=qe.state;if(V.activeTexture.set(G.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,G.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(V.activeTexture.set(G.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),Ge.isSDF){let pt=Ge.uniformValues;Ge.hasHalo&&(pt.u_is_halo=1,Dg(Ge.buffers,qe.segments,u,_,Ge.program,ke,k,N,pt,qe.terrainData)),pt.u_is_halo=0}Dg(Ge.buffers,qe.segments,u,_,Ge.program,ke,k,N,Ge.uniformValues,qe.terrainData)}}function Dg(_,s,u,p,f,y,C,I,T,P){let k=p.context;f.draw(k,k.gl.TRIANGLES,y,C,I,qn.disabled,T,P,u.id,_.layoutVertexBuffer,_.indexBuffer,s,u.paint,p.transform.zoom,_.programConfigurations.get(u.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Tg(_,s,u,p){let f=_.context,y=f.gl,C=ai.disabled,I=new ki([y.ONE,y.ONE],o.aM.transparent,[!0,!0,!0,!0]),T=s.getBucket(u);if(!T)return;let P=p.key,k=u.heatmapFbos.get(P);k||(k=Cd(f,s.tileSize,s.tileSize),u.heatmapFbos.set(P,k)),f.bindFramebuffer.set(k.framebuffer),f.viewport.set([0,0,s.tileSize,s.tileSize]),f.clear({color:o.aM.transparent});let N=T.programConfigurations.get(u.id),V=_.useProgram("heatmap",N),G=_.style.map.terrain.getTerrainData(p);V.draw(f,y.TRIANGLES,cn.disabled,C,I,qn.disabled,so(p.posMatrix,s,_.transform.zoom,u.paint.get("heatmap-intensity")),G,u.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,u.paint,_.transform.zoom,N)}function Jl(_,s,u){let p=_.context,f=p.gl;p.setColorMode(_.colorModeForRenderPass());let y=Ed(p,s),C=u.key,I=s.heatmapFbos.get(C);I&&(p.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,I.colorAttachment.get()),p.activeTexture.set(f.TEXTURE1),y.bind(f.LINEAR,f.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(p,f.TRIANGLES,cn.disabled,ai.disabled,_.colorModeForRenderPass(),qn.disabled,lp(_,s,0,1),null,s.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,s.paint,_.transform.zoom),I.destroy(),s.heatmapFbos.delete(C))}function Cd(_,s,u){var p,f;let y=_.gl,C=y.createTexture();y.bindTexture(y.TEXTURE_2D,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);let I=(p=_.HALF_FLOAT)!==null&&p!==void 0?p:y.UNSIGNED_BYTE,T=(f=_.RGBA16F)!==null&&f!==void 0?f:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,T,s,u,0,y.RGBA,I,null);let P=_.createFramebuffer(s,u,!1,!1);return P.colorAttachment.set(C),P}function Ed(_,s){return s.colorRampTexture||(s.colorRampTexture=new st(_,s.colorRamp,_.gl.RGBA)),s.colorRampTexture}function Hc(_,s,u,p,f){if(!u||!p||!p.imageAtlas)return;let y=p.imageAtlas.patternPositions,C=y[u.to.toString()],I=y[u.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){let T=f.getPaintProperty(s);C=y[T],I=y[T]}C&&I&&_.setConstantPatternPositions(C,I)}function Id(_,s,u,p,f,y,C){let I=_.context.gl,T="fill-pattern",P=u.paint.get(T),k=P&&P.constantOr(1),N=u.getCrossfadeParameters(),V,G,K,te,se;C?(G=k&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=I.LINES):(G=k?"fillPattern":"fill",V=I.TRIANGLES);let ae=P.constantOr(null);for(let ce of p){let X=s.getTile(ce);if(k&&!X.patternsLoaded())continue;let pe=X.getBucket(u);if(!pe)continue;let ge=pe.programConfigurations.get(u.id),Se=_.useProgram(G,ge),ke=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce);k&&(_.context.activeTexture.set(I.TEXTURE0),X.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ge.updatePaintBuffers(N)),Hc(ge,T,ae,X,u);let ze=ke?ce:null,Xe=_.translatePosMatrix(ze?ze.posMatrix:ce.posMatrix,X,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){te=pe.indexBuffer2,se=pe.segments2;let it=[I.drawingBufferWidth,I.drawingBufferHeight];K=G==="fillOutlinePattern"&&k?Qv(Xe,_,N,X,it):vC(Xe,it)}else te=pe.indexBuffer,se=pe.segments,K=k?Xv(Xe,_,N,X):Uc(Xe);Se.draw(_.context,V,f,_.stencilModeForClipping(ce),y,qn.disabled,K,ke,u.id,pe.layoutVertexBuffer,te,se,u.paint,_.transform.zoom,ge)}}function yp(_,s,u,p,f,y,C){let I=_.context,T=I.gl,P="fill-extrusion-pattern",k=u.paint.get(P),N=k.constantOr(1),V=u.getCrossfadeParameters(),G=u.paint.get("fill-extrusion-opacity"),K=k.constantOr(null);for(let te of p){let se=s.getTile(te),ae=se.getBucket(u);if(!ae)continue;let ce=_.style.map.terrain&&_.style.map.terrain.getTerrainData(te),X=ae.programConfigurations.get(u.id),pe=_.useProgram(N?"fillExtrusionPattern":"fillExtrusion",X);N&&(_.context.activeTexture.set(T.TEXTURE0),se.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),X.updatePaintBuffers(V)),Hc(X,P,K,se,u);let ge=_.translatePosMatrix(te.posMatrix,se,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Se=u.paint.get("fill-extrusion-vertical-gradient"),ke=N?ap(ge,_,Se,G,te,V,se):_d(ge,_,Se,G);pe.draw(I,I.gl.TRIANGLES,f,y,C,qn.backCCW,ke,ce,u.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,u.paint,_.transform.zoom,X,_.style.map.terrain&&ae.centroidVertexBuffer)}}function $c(_,s,u,p,f,y,C){let I=_.context,T=I.gl,P=u.fbo;if(!P)return;let k=_.useProgram("hillshade"),N=_.style.map.terrain&&_.style.map.terrain.getTerrainData(s);I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,P.colorAttachment.get()),k.draw(I,T.TRIANGLES,f,y,C,qn.disabled,((V,G,K,te)=>{let se=K.paint.get("hillshade-shadow-color"),ae=K.paint.get("hillshade-highlight-color"),ce=K.paint.get("hillshade-accent-color"),X=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(X-=V.transform.angle);let pe=!V.options.moving;return{u_matrix:te?te.posMatrix:V.transform.calculatePosMatrix(G.tileID.toUnwrapped(),pe),u_image:0,u_latrange:cp(0,G.tileID),u_light:[K.paint.get("hillshade-exaggeration"),X],u_shadow:se,u_highlight:ae,u_accent:ce}})(_,u,p,N?s:null),N,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Gc(_,s,u,p,f,y){let C=_.context,I=C.gl,T=s.dem;if(T&&T.data){let P=T.dim,k=T.stride,N=T.getPixels();if(C.activeTexture.set(I.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||_.getTileTexture(k),s.demTexture){let G=s.demTexture;G.update(N,{premultiply:!1}),G.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else s.demTexture=new st(C,N,I.RGBA,{premultiply:!1}),s.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);C.activeTexture.set(I.TEXTURE0);let V=s.fbo;if(!V){let G=new st(C,{width:P,height:P,data:null},I.RGBA);G.bind(I.LINEAR,I.CLAMP_TO_EDGE),V=s.fbo=C.createFramebuffer(P,P,!0,!1),V.colorAttachment.set(G.texture)}C.bindFramebuffer.set(V.framebuffer),C.viewport.set([0,0,P,P]),_.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,p,f,y,qn.disabled,((G,K)=>{let te=K.stride,se=o.H();return o.aP(se,0,o.X,-o.X,0,0,1),o.J(se,se,[0,-o.X,0]),{u_matrix:se,u_image:1,u_dimension:[te,te],u_zoom:G.overscaledZ,u_unpack:K.getUnpackVector()}})(s.tileID,T),null,u.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function g0(_,s,u,p,f,y){let C=p.paint.get("raster-fade-duration");if(!y&&C>0){let I=x.now(),T=(I-_.timeAdded)/C,P=s?(I-s.timeAdded)/C:-1,k=u.getSource(),N=f.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),V=!s||Math.abs(s.tileID.overscaledZ-N)>Math.abs(_.tileID.overscaledZ-N),G=V&&_.refreshedUponExpiration?1:o.ac(V?T:1-P,0,1);return _.refreshedUponExpiration&&T>=1&&(_.refreshedUponExpiration=!1),s?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}let Ag=new o.aM(1,0,0,1),Tn=new o.aM(0,1,0,1),_p=new o.aM(0,0,1,1),kC=new o.aM(1,0,1,1),y0=new o.aM(0,1,1,1);function qc(_,s,u,p){vp(_,0,s+u/2,_.transform.width,u,p)}function _0(_,s,u,p){vp(_,s-u/2,0,u,_.transform.height,p)}function vp(_,s,u,p,f,y){let C=_.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(s*_.pixelRatio,u*_.pixelRatio,p*_.pixelRatio,f*_.pixelRatio),C.clear({color:y}),I.disable(I.SCISSOR_TEST)}function v0(_,s,u){let p=_.context,f=p.gl,y=u.posMatrix,C=_.useProgram("debug"),I=cn.disabled,T=ai.disabled,P=_.colorModeForRenderPass(),k="$debug",N=_.style.map.terrain&&_.style.map.terrain.getTerrainData(u);p.activeTexture.set(f.TEXTURE0);let V=s.getTileByID(u.key).latestRawTileData,G=Math.floor((V&&V.byteLength||0)/1024),K=s.getTile(u).tileSize,te=512/Math.min(K,512)*(u.overscaledZ/_.transform.zoom)*.5,se=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(se+=` => ${u.overscaledZ}`),function(ae,ce){ae.initDebugOverlayCanvas();let X=ae.debugOverlayCanvas,pe=ae.context.gl,ge=ae.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,X.width,X.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold 36px Open Sans, sans-serif",ge.fillText(ce,5,5),ge.strokeText(ce,5,5),ae.debugOverlayTexture.update(X),ae.debugOverlayTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE)}(_,`${se} ${G}kB`),C.draw(p,f.TRIANGLES,I,T,ki.alphaBlended,qn.disabled,vd(y,o.aM.transparent,te),null,k,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),C.draw(p,f.LINE_STRIP,I,T,P,qn.disabled,vd(y,o.aM.red),N,k,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function b0(_,s,u){let p=_.context,f=p.gl,y=_.colorModeForRenderPass(),C=new cn(f.LEQUAL,cn.ReadWrite,_.depthRangeFor3D),I=_.useProgram("terrain"),T=s.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,_.width,_.height]);for(let P of u){let k=_.renderToTexture.getTexture(P),N=s.getTerrainData(P.tileID);p.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,k.texture);let V=_.transform.calculatePosMatrix(P.tileID.toUnwrapped()),G=s.getMeshFrameDelta(_.transform.zoom),K=_.transform.calculateFogMatrix(P.tileID.toUnwrapped()),te=hg(V,G,K,_.style.sky,_.transform.pitch);I.draw(p,f.TRIANGLES,C,ai.disabled,y,qn.backCCW,te,N,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}}class bp{constructor(s,u,p){this.vertexBuffer=s,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class wp{constructor(s,u){this.context=new OC(s),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ug}resize(s,u,p){if(this.width=Math.floor(s*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let f of this.style._order)this.style._layers[f].resize()}setup(){let s=this.context,u=new o.aX;u.emplaceBack(0,0),u.emplaceBack(o.X,0),u.emplaceBack(0,o.X),u.emplaceBack(o.X,o.X),this.tileExtentBuffer=s.createVertexBuffer(u,$l.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);let p=new o.aX;p.emplaceBack(0,0),p.emplaceBack(o.X,0),p.emplaceBack(0,o.X),p.emplaceBack(o.X,o.X),this.debugBuffer=s.createVertexBuffer(p,$l.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);let f=new o.$;f.emplaceBack(0,0,0,0),f.emplaceBack(o.X,0,o.X,0),f.emplaceBack(0,o.X,0,o.X),f.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=s.createVertexBuffer(f,Ya.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);let y=new o.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(y,$l.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);let C=new o.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(C);let I=new o.aY;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(I);let T=this.context.gl;this.stencilClearMode=new ai({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){let s=this.context,u=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let p=o.H();o.aP(p,0,this.width,this.height,0,0,1),o.K(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,u.TRIANGLES,cn.disabled,this.stencilClearMode,ki.disabled,qn.disabled,oo(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,u){if(this.currentStencilSource===s.source||!s.isTileClipped()||!u||!u.length)return;this.currentStencilSource=s.source;let p=this.context,f=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(ki.disabled),p.setDepthMode(cn.disabled);let y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let C of u){let I=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,T=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);y.draw(p,f.TRIANGLES,cn.disabled,new ai({func:f.ALWAYS,mask:0},I,255,f.KEEP,f.KEEP,f.REPLACE),ki.disabled,qn.disabled,oo(C.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,u=this.context.gl;return new ai({func:u.NOTEQUAL,mask:255},s,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(s){let u=this.context.gl;return new ai({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(s){let u=this.context.gl,p=s.sort((C,I)=>I.overscaledZ-C.overscaledZ),f=p[p.length-1].overscaledZ,y=p[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();let C={};for(let I=0;I<y;I++)C[I+f]=new ai({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=y,[C,p]}return[{[f]:ai.disabled},p]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new ki([s.CONSTANT_COLOR,s.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ki.unblended:ki.alphaBlended}depthModeForSublayer(s,u,p){if(!this.opaquePassEnabledForLayer())return cn.disabled;let f=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new cn(p||this.context.gl.LEQUAL,u,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,u){this.style=s,this.options=u,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(x.now()),this.imageManager.beginFrame();let p=this.style._order,f=this.style.sourceCaches,y={},C={},I={};for(let T in f){let P=f[T];P.used&&P.prepare(this.context),y[T]=P.getVisibleCoordinates(),C[T]=y[T].slice().reverse(),I[T]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let T=0;T<p.length;T++)if(this.style._layers[p[T]].is3D()){this.opaquePassCutoff=T;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let T of p){let P=this.style._layers[T];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;let k=C[P.source];(P.type==="custom"||k.length)&&this.renderLayer(this,f[P.source],P,k)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(T,P){let k=T.context,N=k.gl,V=((ae,ce,X)=>({u_sky_color:ae.properties.get("sky-color"),u_horizon_color:ae.properties.get("horizon-color"),u_horizon:(ce.height/2+ce.getHorizon())*X,u_sky_horizon_blend:ae.properties.get("sky-horizon-blend")*ce.height/2*X}))(P,T.style.map.transform,T.pixelRatio),G=new cn(N.LEQUAL,cn.ReadWrite,[0,1]),K=ai.disabled,te=T.colorModeForRenderPass(),se=T.useProgram("sky");if(!P.mesh){let ae=new o.aX;ae.emplaceBack(-1,-1),ae.emplaceBack(1,-1),ae.emplaceBack(1,1),ae.emplaceBack(-1,1);let ce=new o.aY;ce.emplaceBack(0,1,2),ce.emplaceBack(0,2,3),P.mesh=new bp(k.createVertexBuffer(ae,$l.members),k.createIndexBuffer(ce),o.a0.simpleSegment(0,0,ae.length,ce.length))}se.draw(k,N.TRIANGLES,G,K,te,qn.disabled,V,void 0,"sky",P.mesh.vertexBuffer,P.mesh.indexBuffer,P.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){let T=this.style._layers[p[this.currentLayer]],P=f[T.source],k=y[T.source];this._renderTileClippingMasks(T,k),this.renderLayer(this,P,T,k)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){let T=this.style._layers[p[this.currentLayer]],P=f[T.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(T))continue;let k=(T.type==="symbol"?I:C)[T.source];this._renderTileClippingMasks(T,y[T.source]),this.renderLayer(this,P,T,k)}if(this.options.showTileBoundaries){let T=function(P,k){let N=null,V=Object.values(P._layers).flatMap(se=>se.source&&!se.isHidden(k)?[P.sourceCaches[se.source]]:[]),G=V.filter(se=>se.getSource().type==="vector"),K=V.filter(se=>se.getSource().type!=="vector"),te=se=>{(!N||N.getSource().maxzoom<se.getSource().maxzoom)&&(N=se)};return G.forEach(se=>te(se)),N||K.forEach(se=>te(se)),N}(this.style,this.transform.zoom);T&&function(P,k,N){for(let V=0;V<N.length;V++)v0(P,k,N[V])}(this,T,T.getVisibleCoordinates())}this.options.showPadding&&function(T){let P=T.transform.padding;qc(T,T.transform.height-(P.top||0),3,Ag),qc(T,P.bottom||0,3,Tn),_0(T,P.left||0,3,_p),_0(T,T.transform.width-(P.right||0),3,kC);let k=T.transform.centerPoint;(function(N,V,G,K){vp(N,V-1,G-10,2,20,K),vp(N,V-10,G-1,20,2,K)})(T,k.x,T.transform.height-k.y,y0)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix,f=this.terrainFacilitator.dirty;f||(f=s?!o.a_(u,p):!o.a$(u,p)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(o.b0(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,C){let I=y.context,T=I.gl,P=ki.unblended,k=new cn(T.LEQUAL,cn.ReadWrite,[0,1]),N=C.getTerrainMesh(),V=C.sourceCache.getRenderableTiles(),G=y.useProgram("terrainDepth");I.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),I.clear({color:o.aM.transparent,depth:1});for(let K of V){let te=C.getTerrainData(K.tileID),se={u_matrix:y.transform.calculatePosMatrix(K.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};G.draw(I,T.TRIANGLES,k,ai.disabled,P,qn.backCCW,se,te,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,C){let I=y.context,T=I.gl,P=ki.unblended,k=new cn(T.LEQUAL,cn.ReadWrite,[0,1]),N=C.getTerrainMesh(),V=C.getCoordsTexture(),G=C.sourceCache.getRenderableTiles(),K=y.useProgram("terrainCoords");I.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),I.clear({color:o.aM.transparent,depth:1}),C.coordsIndex=[];for(let te of G){let se=C.getTerrainData(te.tileID);I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,V.texture);let ae={u_matrix:y.transform.calculatePosMatrix(te.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};K.draw(I,T.TRIANGLES,k,ai.disabled,P,qn.backCCW,ae,se,"terrain",N.vertexBuffer,N.indexBuffer,N.segments),C.coordsIndex.push(te.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(s,u,p,f){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(f||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(y,C,I,T,P){if(y.renderPass!=="translucent")return;let k=ai.disabled,N=y.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,G,K,te,se,ae,ce,X,pe){let ge=G.transform,Se=Hl(),ke=se==="map",ze=ae==="map";for(let Xe of V){let it=te.getTile(Xe),qe=it.getBucket(K);if(!qe||!qe.text||!qe.text.segments.get().length)continue;let Ge=o.ag(qe.textSizeData,ge.zoom),pt=fn(it,1,G.transform.zoom),$t=Xa(Xe.posMatrix,ze,ke,G.transform,pt),Ke=K.layout.get("icon-text-fit")!=="none"&&qe.hasIconData();if(Ge){let tt=Math.pow(2,ge.zoom-it.tileID.overscaledZ),Ut=G.style.map.terrain?(nn,mn)=>G.style.map.terrain.getElevation(Xe,nn,mn):null,hi=Se.translatePosition(ge,it,ce,X);jc(qe,ke,ze,pe,ge,$t,Xe.posMatrix,tt,Ge,Ke,Se,hi,Xe.toUnwrapped(),Ut)}}}(T,y,I,C,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),P),I.paint.get("icon-opacity").constantOr(1)!==0&&Ig(y,C,I,T,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),k,N),I.paint.get("text-opacity").constantOr(1)!==0&&Ig(y,C,I,T,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),k,N),C.map.showCollisionBoxes&&(xd(y,C,I,T,!0),xd(y,C,I,T,!1))})(s,u,p,f,this.style.placement.variableOffsets);break;case"circle":(function(y,C,I,T){if(y.renderPass!=="translucent")return;let P=I.paint.get("circle-opacity"),k=I.paint.get("circle-stroke-width"),N=I.paint.get("circle-stroke-opacity"),V=!I.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(k.constantOr(1)===0||N.constantOr(1)===0))return;let G=y.context,K=G.gl,te=y.depthModeForSublayer(0,cn.ReadOnly),se=ai.disabled,ae=y.colorModeForRenderPass(),ce=[];for(let X=0;X<T.length;X++){let pe=T[X],ge=C.getTile(pe),Se=ge.getBucket(I);if(!Se)continue;let ke=Se.programConfigurations.get(I.id),ze=y.useProgram("circle",ke),Xe=Se.layoutVertexBuffer,it=Se.indexBuffer,qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),Ge={programConfiguration:ke,program:ze,layoutVertexBuffer:Xe,indexBuffer:it,uniformValues:bC(y,pe,ge,I),terrainData:qe};if(V){let pt=Se.segments.get();for(let $t of pt)ce.push({segments:new o.a0([$t]),sortKey:$t.sortKey,state:Ge})}else ce.push({segments:Se.segments,sortKey:0,state:Ge})}V&&ce.sort((X,pe)=>X.sortKey-pe.sortKey);for(let X of ce){let{programConfiguration:pe,program:ge,layoutVertexBuffer:Se,indexBuffer:ke,uniformValues:ze,terrainData:Xe}=X.state;ge.draw(G,K.TRIANGLES,te,se,ae,qn.disabled,ze,Xe,I.id,Se,ke,X.segments,I.paint,y.transform.zoom,pe)}})(s,u,p,f);break;case"heatmap":(function(y,C,I,T){if(I.paint.get("heatmap-opacity")===0)return;let P=y.context;if(y.style.map.terrain){for(let k of T){let N=C.getTile(k);C.hasRenderableParent(k)||(y.renderPass==="offscreen"?Tg(y,N,I,k):y.renderPass==="translucent"&&Jl(y,I,k))}P.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(k,N,V,G){let K=k.context,te=K.gl,se=ai.disabled,ae=new ki([te.ONE,te.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(ce,X,pe){let ge=ce.gl;ce.activeTexture.set(ge.TEXTURE1),ce.viewport.set([0,0,X.width/4,X.height/4]);let Se=pe.heatmapFbos.get(o.aU);Se?(ge.bindTexture(ge.TEXTURE_2D,Se.colorAttachment.get()),ce.bindFramebuffer.set(Se.framebuffer)):(Se=Cd(ce,X.width/4,X.height/4),pe.heatmapFbos.set(o.aU,Se))})(K,k,V),K.clear({color:o.aM.transparent});for(let ce=0;ce<G.length;ce++){let X=G[ce];if(N.hasRenderableParent(X))continue;let pe=N.getTile(X),ge=pe.getBucket(V);if(!ge)continue;let Se=ge.programConfigurations.get(V.id),ke=k.useProgram("heatmap",Se),{zoom:ze}=k.transform;ke.draw(K,te.TRIANGLES,cn.disabled,se,ae,qn.disabled,so(X.posMatrix,pe,ze,V.paint.get("heatmap-intensity")),null,V.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,V.paint,k.transform.zoom,Se)}K.viewport.set([0,0,k.width,k.height])}(y,C,I,T):y.renderPass==="translucent"&&function(k,N){let V=k.context,G=V.gl;V.setColorMode(k.colorModeForRenderPass());let K=N.heatmapFbos.get(o.aU);K&&(V.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,K.colorAttachment.get()),V.activeTexture.set(G.TEXTURE1),Ed(V,N).bind(G.LINEAR,G.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(V,G.TRIANGLES,cn.disabled,ai.disabled,k.colorModeForRenderPass(),qn.disabled,lp(k,N,0,1),null,N.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,N.paint,k.transform.zoom))}(y,I)})(s,u,p,f);break;case"line":(function(y,C,I,T){if(y.renderPass!=="translucent")return;let P=I.paint.get("line-opacity"),k=I.paint.get("line-width");if(P.constantOr(1)===0||k.constantOr(1)===0)return;let N=y.depthModeForSublayer(0,cn.ReadOnly),V=y.colorModeForRenderPass(),G=I.paint.get("line-dasharray"),K=I.paint.get("line-pattern"),te=K.constantOr(1),se=I.paint.get("line-gradient"),ae=I.getCrossfadeParameters(),ce=te?"linePattern":G?"lineSDF":se?"lineGradient":"line",X=y.context,pe=X.gl,ge=!0;for(let Se of T){let ke=C.getTile(Se);if(te&&!ke.patternsLoaded())continue;let ze=ke.getBucket(I);if(!ze)continue;let Xe=ze.programConfigurations.get(I.id),it=y.context.program.get(),qe=y.useProgram(ce,Xe),Ge=ge||qe.program!==it,pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Se),$t=K.constantOr(null);if($t&&ke.imageAtlas){let Ut=ke.imageAtlas,hi=Ut.patternPositions[$t.to.toString()],nn=Ut.patternPositions[$t.from.toString()];hi&&nn&&Xe.setConstantPatternPositions(hi,nn)}let Ke=pt?Se:null,tt=te?zc(y,ke,I,ae,Ke):G?wC(y,ke,I,G,ae,Ke):se?e0(y,ke,I,ze.lineClipsArray.length,Ke):up(y,ke,I,Ke);if(te)X.activeTexture.set(pe.TEXTURE0),ke.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Xe.updatePaintBuffers(ae);else if(G&&(Ge||y.lineAtlas.dirty))X.activeTexture.set(pe.TEXTURE0),y.lineAtlas.bind(X);else if(se){let Ut=ze.gradients[I.id],hi=Ut.texture;if(I.gradientVersion!==Ut.version){let nn=256;if(I.stepInterpolant){let mn=C.getSource().maxzoom,pi=Se.canonical.z===mn?Math.ceil(1<<y.transform.maxZoom-Se.canonical.z):1;nn=o.ac(o.aV(ze.maxLineLength/o.X*1024*pi),256,X.maxTextureSize)}Ut.gradient=o.aW({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:nn,image:Ut.gradient||void 0,clips:ze.lineClipsArray}),Ut.texture?Ut.texture.update(Ut.gradient):Ut.texture=new st(X,Ut.gradient,pe.RGBA),Ut.version=I.gradientVersion,hi=Ut.texture}X.activeTexture.set(pe.TEXTURE0),hi.bind(I.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}qe.draw(X,pe.TRIANGLES,N,y.stencilModeForClipping(Se),V,qn.disabled,tt,pt,I.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,I.paint,y.transform.zoom,Xe,ze.layoutVertexBuffer2),ge=!1}})(s,u,p,f);break;case"fill":(function(y,C,I,T){let P=I.paint.get("fill-color"),k=I.paint.get("fill-opacity");if(k.constantOr(1)===0)return;let N=y.colorModeForRenderPass(),V=I.paint.get("fill-pattern"),G=y.opaquePassEnabledForLayer()&&!V.constantOr(1)&&P.constantOr(o.aM.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===G){let K=y.depthModeForSublayer(1,y.renderPass==="opaque"?cn.ReadWrite:cn.ReadOnly);Id(y,C,I,T,K,N,!1)}if(y.renderPass==="translucent"&&I.paint.get("fill-antialias")){let K=y.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,cn.ReadOnly);Id(y,C,I,T,K,N,!0)}})(s,u,p,f);break;case"fill-extrusion":(function(y,C,I,T){let P=I.paint.get("fill-extrusion-opacity");if(P!==0&&y.renderPass==="translucent"){let k=new cn(y.context.gl.LEQUAL,cn.ReadWrite,y.depthRangeFor3D);if(P!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))yp(y,C,I,T,k,ai.disabled,ki.disabled),yp(y,C,I,T,k,y.stencilModeFor3D(),y.colorModeForRenderPass());else{let N=y.colorModeForRenderPass();yp(y,C,I,T,k,ai.disabled,N)}}})(s,u,p,f);break;case"hillshade":(function(y,C,I,T){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;let P=y.context,k=y.depthModeForSublayer(0,cn.ReadOnly),N=y.colorModeForRenderPass(),[V,G]=y.renderPass==="translucent"?y.stencilConfigForOverlap(T):[{},T];for(let K of G){let te=C.getTile(K);te.needsHillshadePrepare!==void 0&&te.needsHillshadePrepare&&y.renderPass==="offscreen"?Gc(y,te,I,k,ai.disabled,N):y.renderPass==="translucent"&&$c(y,K,te,I,k,V[K.overscaledZ],N)}P.viewport.set([0,0,y.width,y.height])})(s,u,p,f);break;case"raster":(function(y,C,I,T){if(y.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!T.length)return;let P=y.context,k=P.gl,N=C.getSource(),V=y.useProgram("raster"),G=y.colorModeForRenderPass(),[K,te]=N instanceof Sa?[{},T]:y.stencilConfigForOverlap(T),se=te[te.length-1].overscaledZ,ae=!y.options.moving;for(let ce of te){let X=y.depthModeForSublayer(ce.overscaledZ-se,I.paint.get("raster-opacity")===1?cn.ReadWrite:cn.ReadOnly,k.LESS),pe=C.getTile(ce);pe.registerFadeDuration(I.paint.get("raster-fade-duration"));let ge=C.findLoadedParent(ce,0),Se=C.findLoadedSibling(ce),ke=g0(pe,ge||Se||null,C,I,y.transform,y.style.map.terrain),ze,Xe,it=I.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;P.activeTexture.set(k.TEXTURE0),pe.texture.bind(it,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(k.TEXTURE1),ge?(ge.texture.bind(it,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),ze=Math.pow(2,ge.tileID.overscaledZ-pe.tileID.overscaledZ),Xe=[pe.tileID.canonical.x*ze%1,pe.tileID.canonical.y*ze%1]):pe.texture.bind(it,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),pe.texture.useMipmap&&P.extTextureFilterAnisotropic&&y.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);let qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ce),Ge=qe?ce:null,pt=Ge?Ge.posMatrix:y.transform.calculatePosMatrix(ce.toUnwrapped(),ae),$t=xC(pt,Xe||[0,0],ze||1,ke,I);N instanceof Sa?V.draw(P,k.TRIANGLES,X,ai.disabled,G,qn.disabled,$t,qe,I.id,N.boundsBuffer,y.quadTriangleIndexBuffer,N.boundsSegments):V.draw(P,k.TRIANGLES,X,K[ce.overscaledZ],G,qn.disabled,$t,qe,I.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(s,u,p,f);break;case"background":(function(y,C,I,T){let P=I.paint.get("background-color"),k=I.paint.get("background-opacity");if(k===0)return;let N=y.context,V=N.gl,G=y.transform,K=G.tileSize,te=I.paint.get("background-pattern");if(y.isPatternMissing(te))return;let se=!te&&P.a===1&&k===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==se)return;let ae=ai.disabled,ce=y.depthModeForSublayer(0,se==="opaque"?cn.ReadWrite:cn.ReadOnly),X=y.colorModeForRenderPass(),pe=y.useProgram(te?"backgroundPattern":"background"),ge=T||G.coveringTiles({tileSize:K,terrain:y.style.map.terrain});te&&(N.activeTexture.set(V.TEXTURE0),y.imageManager.bind(y.context));let Se=I.getCrossfadeParameters();for(let ke of ge){let ze=T?ke.posMatrix:y.transform.calculatePosMatrix(ke.toUnwrapped()),Xe=te?mg(ze,k,y,te,{tileID:ke,tileSize:K},Se):dp(ze,k,P),it=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ke);pe.draw(N,V.TRIANGLES,ce,ae,X,qn.disabled,Xe,it,I.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(s,0,p,f);break;case"custom":(function(y,C,I){let T=y.context,P=I.implementation;if(y.renderPass==="offscreen"){let k=P.prerender;k&&(y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),k.call(P,T.gl,y.transform.customLayerMatrix()),T.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),T.setColorMode(y.colorModeForRenderPass()),T.setStencilMode(ai.disabled);let k=P.renderingMode==="3d"?new cn(y.context.gl.LEQUAL,cn.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,cn.ReadOnly);T.setDepthMode(k),P.render(T.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),T.setDirty(),y.setBaseState(),T.bindFramebuffer.set(null)}})(s,0,p)}}translatePosMatrix(s,u,p,f,y){if(!p[0]&&!p[1])return s;let C=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(C){let P=Math.sin(C),k=Math.cos(C);p=[p[0]*k-p[1]*P,p[0]*P+p[1]*k]}let I=[y?p[0]:fn(u,p[0],this.transform.zoom),y?p[1]:fn(u,p[1],this.transform.zoom),0],T=new Float32Array(16);return o.J(T,s,I),T}saveTileTexture(s){let u=this._tileTextures[s.size[0]];u?u.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let u=this._tileTextures[s];return u&&u.length>0?u.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let u=this.imageManager.getPattern(s.from.toString()),p=this.imageManager.getPattern(s.to.toString());return!u||!p}useProgram(s,u){this.cache=this.cache||{};let p=s+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new pg(this.context,Qa[s],u,gg[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new st(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:u}=this.context.gl;return this.width!==s||this.height!==u}}class Wc{constructor(s,u){this.points=s,this.planes=u}static fromInvProjectionMatrix(s,u,p){let f=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{let T=1/(I=o.af([],I,s))[3]/u*f;return o.b1(I,I,[T,T,1/I[3],T])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{let T=function(V,G){var K=G[0],te=G[1],se=G[2],ae=K*K+te*te+se*se;return ae>0&&(ae=1/Math.sqrt(ae)),V[0]=G[0]*ae,V[1]=G[1]*ae,V[2]=G[2]*ae,V}([],function(V,G,K){var te=G[0],se=G[1],ae=G[2],ce=K[0],X=K[1],pe=K[2];return V[0]=se*pe-ae*X,V[1]=ae*ce-te*pe,V[2]=te*X-se*ce,V}([],We([],y[I[0]],y[I[1]]),We([],y[I[2]],y[I[1]]))),P=-((k=T)[0]*(N=y[I[1]])[0]+k[1]*N[1]+k[2]*N[2]);var k,N;return T.concat(P)});return new Wc(y,C)}}class Zc{constructor(s,u){this.min=s,this.max=u,this.center=function(p,f,y){return p[0]=.5*f[0],p[1]=.5*f[1],p[2]=.5*f[2],p}([],function(p,f,y){return p[0]=f[0]+y[0],p[1]=f[1]+y[1],p[2]=f[2]+y[2],p}([],this.min,this.max))}quadrant(s){let u=[s%2==0,s<2],p=Ne(this.min),f=Ne(this.max);for(let y=0;y<u.length;y++)p[y]=u[y]?this.min[y]:this.center[y],f[y]=u[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Zc(p,f)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){let u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],p=!0;for(let f=0;f<s.planes.length;f++){let y=s.planes[f],C=0;for(let I=0;I<u.length;I++)o.b2(y,u[I])>=0&&C++;if(C===0)return 0;C!==u.length&&(p=!1)}if(p)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let I=0;I<s.points.length;I++){let T=s.points[I][f]-this.min[f];y=Math.min(y,T),C=Math.max(C,T)}if(C<0||y>this.max[f]-this.min[f])return 0}return 1}}class Kc{constructor(s=0,u=0,p=0,f=0){if(isNaN(s)||s<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=u,this.left=p,this.right=f}interpolate(s,u,p){return u.top!=null&&s.top!=null&&(this.top=o.y.number(s.top,u.top,p)),u.bottom!=null&&s.bottom!=null&&(this.bottom=o.y.number(s.bottom,u.bottom,p)),u.left!=null&&s.left!=null&&(this.left=o.y.number(s.left,u.left,p)),u.right!=null&&s.right!=null&&(this.right=o.y.number(s.right,u.right,p)),this}getCenter(s,u){let p=o.ac((this.left+s-this.right)/2,0,s),f=o.ac((this.top+u-this.bottom)/2,0,u);return new o.P(p,f)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Kc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Mg=85.051129;class Yc{constructor(s,u,p,f,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=s||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Kc,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let s=new Yc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){let u=-o.b3(s,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new o.A(4);return o.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,f,y){var C=f[0],I=f[1],T=f[2],P=f[3],k=Math.sin(y),N=Math.cos(y);p[0]=C*N+T*k,p[1]=I*N+P*k,p[2]=C*-k+T*N,p[3]=I*-k+P*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){let u=o.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){let u=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,u,p){this._unmodified=!1,this._edgeInsets.interpolate(s,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){let u=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(s){let u=[new o.b4(0,s)];if(this._renderWorldCopies){let p=this.pointCoordinate(new o.P(0,0)),f=this.pointCoordinate(new o.P(this.width,0)),y=this.pointCoordinate(new o.P(this.width,this.height)),C=this.pointCoordinate(new o.P(0,this.height)),I=Math.floor(Math.min(p.x,f.x,y.x,C.x)),T=Math.floor(Math.max(p.x,f.x,y.x,C.x)),P=1;for(let k=I-P;k<=T+P;k++)k!==0&&u.push(new o.b4(k,s))}return u}coveringTiles(s){var u,p;let f=this.coveringZoomLevel(s),y=f;if(s.minzoom!==void 0&&f<s.minzoom)return[];s.maxzoom!==void 0&&f>s.maxzoom&&(f=s.maxzoom);let C=this.pointCoordinate(this.getCameraPoint()),I=o.Z.fromLngLat(this.center),T=Math.pow(2,f),P=[T*C.x,T*C.y,0],k=[T*I.x,T*I.y,0],N=Wc.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f),V=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=f);let G=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,K=X=>({aabb:new Zc([X*T,0,0],[(X+1)*T,T,0]),zoom:0,x:0,y:0,wrap:X,fullyVisible:!1}),te=[],se=[],ae=f,ce=s.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let X=1;X<=3;X++)te.push(K(-X)),te.push(K(X));for(te.push(K(0));te.length>0;){let X=te.pop(),pe=X.x,ge=X.y,Se=X.fullyVisible;if(!Se){let qe=X.aabb.intersects(N);if(qe===0)continue;Se=qe===2}let ke=s.terrain?P:k,ze=X.aabb.distanceX(ke),Xe=X.aabb.distanceY(ke),it=Math.max(Math.abs(ze),Math.abs(Xe));if(X.zoom===ae||it>G+(1<<ae-X.zoom)-2&&X.zoom>=V){let qe=ae-X.zoom,Ge=P[0]-.5-(pe<<qe),pt=P[1]-.5-(ge<<qe);se.push({tileID:new o.S(X.zoom===ae?ce:X.zoom,X.wrap,X.zoom,pe,ge),distanceSq:rt([k[0]-.5-pe,k[1]-.5-ge]),tileDistanceToCamera:Math.sqrt(Ge*Ge+pt*pt)})}else for(let qe=0;qe<4;qe++){let Ge=(pe<<1)+qe%2,pt=(ge<<1)+(qe>>1),$t=X.zoom+1,Ke=X.aabb.quadrant(qe);if(s.terrain){let tt=new o.S($t,X.wrap,$t,Ge,pt),Ut=s.terrain.getMinMaxElevation(tt),hi=(u=Ut.minElevation)!==null&&u!==void 0?u:this.elevation,nn=(p=Ut.maxElevation)!==null&&p!==void 0?p:this.elevation;Ke=new Zc([Ke.min[0],Ke.min[1],hi],[Ke.max[0],Ke.max[1],nn])}te.push({aabb:Ke,zoom:$t,x:Ge,y:pt,wrap:X.wrap,fullyVisible:Se})}}return se.sort((X,pe)=>X.distanceSq-pe.distanceSq).map(X=>X.tileID)}resize(s,u){this.width=s,this.height=u,this.pixelsToGLUnits=[2/s,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){let u=o.ac(s.lat,-85.051129,Mg);return new o.P(o.O(s.lng)*this.worldSize,o.Q(u)*this.worldSize)}unproject(s){return new o.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){let u=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,s),y=s.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-y))return;let C=p+u-y,I=Math.cos(this._pitch)*this.cameraToCenterDistance/C/o.b5(1,f.lat),T=this.scaleZoom(I/this.tileSize);this._elevation=y,this._center=f,this.zoom=T}setLocationAtPoint(s,u){let p=this.pointCoordinate(u),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(s),C=new o.Z(y.x-(p.x-f.x),y.y-(p.y-f.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,u){return u?this.coordinatePoint(this.locationCoordinate(s),u.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,u){return this.coordinateLocation(this.pointCoordinate(s,u))}locationCoordinate(s){return o.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,u){if(u){let V=u.pointCoordinate(s);if(V!=null)return V}let p=[s.x,s.y,0,1],f=[s.x,s.y,1,1];o.af(p,p,this.pixelMatrixInverse),o.af(f,f,this.pixelMatrixInverse);let y=p[3],C=f[3],I=p[1]/y,T=f[1]/C,P=p[2]/y,k=f[2]/C,N=P===k?0:(0-P)/(k-P);return new o.Z(o.y.number(p[0]/y,f[0]/C,N)/this.worldSize,o.y.number(I,T,N)/this.worldSize)}coordinatePoint(s,u=0,p=this.pixelMatrix){let f=[s.x*this.worldSize,s.y*this.worldSize,u,1];return o.af(f,f,p),new o.P(f[0]/f[3],f[1]/f[3])}getBounds(){let s=Math.max(0,this.height/2-this.getHorizon());return new De().extend(this.pointLocation(new o.P(0,s))).extend(this.pointLocation(new o.P(this.width,s))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new De([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Mg])}calculateTileMatrix(s){let u=s.canonical,p=this.worldSize/this.zoomScale(u.z),f=u.x+Math.pow(2,u.z)*s.wrap,y=o.an(new Float64Array(16));return o.J(y,y,[f*p,u.y*p,0]),o.K(y,y,[p/o.X,p/o.X,1]),y}calculatePosMatrix(s,u=!1){let p=s.key,f=u?this._alignedPosMatrixCache:this._posMatrixCache;if(f[p])return f[p];let y=this.calculateTileMatrix(s);return o.L(y,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),f[p]=new Float32Array(y),f[p]}calculateFogMatrix(s){let u=s.key,p=this._fogMatrixCache;if(p[u])return p[u];let f=this.calculateTileMatrix(s);return o.L(f,this.fogMatrix,f),p[u]=new Float32Array(f),p[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,u){u=o.ac(+u,this.minZoom,this.maxZoom);let p={center:new o.N(s.lng,s.lat),zoom:u},f=this.lngRange;if(!this._renderWorldCopies&&f===null){let X=179.9999999999;f=[-X,X]}let y=this.tileSize*this.zoomScale(p.zoom),C=0,I=y,T=0,P=y,k=0,N=0,{x:V,y:G}=this.size;if(this.latRange){let X=this.latRange;C=o.Q(X[1])*y,I=o.Q(X[0])*y,I-C<G&&(k=G/(I-C))}f&&(T=o.b3(o.O(f[0])*y,0,y),P=o.b3(o.O(f[1])*y,0,y),P<T&&(P+=y),P-T<V&&(N=V/(P-T)));let{x:K,y:te}=this.project.call({worldSize:y},s),se,ae,ce=Math.max(N||0,k||0);if(ce){let X=new o.P(N?(P+T)/2:K,k?(I+C)/2:te);return p.center=this.unproject.call({worldSize:y},X).wrap(),p.zoom+=this.scaleZoom(ce),p}if(this.latRange){let X=G/2;te-X<C&&(ae=C+X),te+X>I&&(ae=I-X)}if(f){let X=(T+P)/2,pe=K;this._renderWorldCopies&&(pe=o.b3(K,X-y/2,X+y/2));let ge=V/2;pe-ge<T&&(se=T+ge),pe+ge>P&&(se=P-ge)}if(se!==void 0||ae!==void 0){let X=new o.P(se??K,ae??te);p.center=this.unproject.call({worldSize:y},X).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=p,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;let s=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let f=o.an(new Float64Array(16));o.K(f,f,[this.width/2,-this.height/2,1]),o.J(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=o.an(new Float64Array(16)),o.K(f,f,[1,-1,1]),o.J(f,f,[-1,-1,0]),o.K(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;let y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),I=y-C*this._pixelPerMeter/Math.cos(this._pitch),T=C<0?I:y,P=Math.PI/2+this._pitch,k=this._fov*(.5+s.y/this.height),N=Math.sin(k)*T/Math.sin(o.ac(Math.PI-P-k,.01,Math.PI-.01)),V=this.getHorizon(),G=2*Math.atan(V/this.cameraToCenterDistance)*(.5+s.y/(2*V)),K=Math.sin(G)*T/Math.sin(o.ac(Math.PI-P-G,.01,Math.PI-.01)),te=Math.min(N,K);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*te+T),this.nearZ=this.height/50,f=new Float64Array(16),o.b6(f,this._fov,this.width/this.height,this.nearZ,this.farZ),f[8]=2*-s.x/this.width,f[9]=2*s.y/this.height,this.projectionMatrix=o.ae(f),o.K(f,f,[1,-1,1]),o.J(f,f,[0,0,-this.cameraToCenterDistance]),o.b7(f,f,this._pitch),o.ad(f,f,this.angle),o.J(f,f,[-u,-p,0]),this.mercatorMatrix=o.K([],f,[this.worldSize,this.worldSize,this.worldSize]),o.K(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,f),o.J(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=o.as([],f),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-u,-p,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,f);let se=this.width%2/2,ae=this.height%2/2,ce=Math.cos(this.angle),X=Math.sin(this.angle),pe=u-Math.round(u)+ce*se+X*ae,ge=p-Math.round(p)+ce*ae+X*se,Se=new Float64Array(f);if(o.J(Se,Se,[pe>.5?pe-1:pe,ge>.5?ge-1:ge,0]),this.alignedModelViewProjectionMatrix=Se,f=o.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let s=this.pointCoordinate(new o.P(0,0)),u=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,s))}getCameraQueryGeometry(s){let u=this.getCameraPoint();if(s.length===1)return[s[0],u];{let p=u.x,f=u.y,y=u.x,C=u.y;for(let I of s)p=Math.min(p,I.x),f=Math.min(f,I.y),y=Math.max(y,I.x),C=Math.max(C,I.y);return[new o.P(p,f),new o.P(y,f),new o.P(y,C),new o.P(p,C),new o.P(p,f)]}}lngLatToCameraDepth(s,u){let p=this.locationCoordinate(s),f=[p.x*this.worldSize,p.y*this.worldSize,u,1];return o.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function Dd(_,s){let u,p=!1,f=null,y=null,C=()=>{f=null,p&&(_.apply(y,u),f=setTimeout(C,s),p=!1)};return(...I)=>(p=!0,y=this,u=I,f||C(),f)}class xp{constructor(s){this._getCurrentHash=()=>{let u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(p=f)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{let u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){let p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{let u=this._getCurrentHash();if(u.length===0)return;let p=u.join("/"),f=p;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${p}`);let y=window.location.hash.replace(f,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let C=window.location.href.replace(/(#.+)?$/,y);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Dd(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,f=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),C=Math.round(u.lng*y)/y,I=Math.round(u.lat*y)/y,T=this._map.getBearing(),P=this._map.getPitch(),k="";if(k+=s?`/${C}/${I}/${p}`:`${p}/${I}/${C}`,(T||P)&&(k+="/"+Math.round(10*T)/10),P&&(k+=`/${Math.round(P)}`),this._hashName){let N=this._hashName,V=!1,G=window.location.hash.slice(1).split("&").map(K=>{let te=K.split("=")[0];return te===N?(V=!0,`${te}=${k}`):K}).filter(K=>K);return V||G.push(`${N}=${k}`),`#${G.join("&")}`}return`#${k}`}}let Sp={linearity:.3,easing:o.b8(0,0,.3,1)},Pg=o.e({deceleration:2500,maxSpeed:1400},Sp),NC=o.e({deceleration:20,maxSpeed:1400},Sp),w0=o.e({deceleration:1e3,maxSpeed:360},Sp),Cp=o.e({deceleration:1e3,maxSpeed:90},Sp);class Rg{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:x.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,u=x.now();for(;s.length>0&&u-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let u={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:y}of this._inertiaBuffer)u.zoom+=y.zoomDelta||0,u.bearing+=y.bearingDelta||0,u.pitch+=y.pitchDelta||0,y.panDelta&&u.pan._add(y.panDelta),y.around&&(u.around=y.around),y.pinchAround&&(u.pinchAround=y.pinchAround);let p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(u.pan.mag()){let y=Ad(u.pan.mag(),p,o.e({},Pg,s||{}));f.offset=u.pan.mult(y.amount/u.pan.mag()),f.center=this._map.transform.center,Td(f,y)}if(u.zoom){let y=Ad(u.zoom,p,NC);f.zoom=this._map.transform.zoom+y.amount,Td(f,y)}if(u.bearing){let y=Ad(u.bearing,p,w0);f.bearing=this._map.transform.bearing+o.ac(y.amount,-179,179),Td(f,y)}if(u.pitch){let y=Ad(u.pitch,p,Cp);f.pitch=this._map.transform.pitch+y.amount,Td(f,y)}if(f.zoom||f.bearing){let y=u.pinchAround===void 0?u.around:u.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),o.e(f,{noMoveStart:!0})}}function Td(_,s){(!_.duration||_.duration<s.duration)&&(_.duration=s.duration,_.easing=s.easing)}function Ad(_,s,u){let{maxSpeed:p,linearity:f,deceleration:y}=u,C=o.ac(_*f/(s/1e3),-p,p),I=Math.abs(C)/(y*f);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class Dr extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,p,f={}){let y=D.mousePos(u.getCanvas(),p),C=u.unproject(y);super(s,o.e({point:y,lngLat:C,originalEvent:p},f)),this._defaultPrevented=!1,this.target=u}}class Xl extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,p){let f=s==="touchend"?p.changedTouches:p.touches,y=D.touchPos(u.getCanvasContainer(),f),C=y.map(T=>u.unproject(T)),I=y.reduce((T,P,k,N)=>T.add(P.div(N.length)),new o.P(0,0));super(s,{points:y,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class x0 extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,p){super(s,{originalEvent:p}),this._defaultPrevented=!1}}class S0{constructor(s,u){this._map=s,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new x0(s.type,this._map,s))}mousedown(s,u){return this._mousedownPos=u,this._firePreventable(new Dr(s.type,this._map,s))}mouseup(s){this._map.fire(new Dr(s.type,this._map,s))}click(s,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Dr(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Dr(s.type,this._map,s))}mouseover(s){this._map.fire(new Dr(s.type,this._map,s))}mouseout(s){this._map.fire(new Dr(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Xl(s.type,this._map,s))}touchmove(s){this._map.fire(new Xl(s.type,this._map,s))}touchend(s){this._map.fire(new Xl(s.type,this._map,s))}touchcancel(s){this._map.fire(new Xl(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ni{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Dr(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Dr(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ss{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(o.P.convert(s),this._map.terrain)}}class Co{constructor(s,u){this._map=s,this._tr=new ss(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,u){this.isEnabled()&&s.shiftKey&&s.button===0&&(D.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(s,u){if(!this._active)return;let p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;let f=this._startPos;this._lastPos=p,this._box||(this._box=D.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let y=Math.min(f.x,p.x),C=Math.max(f.x,p.x),I=Math.min(f.y,p.y),T=Math.max(f.y,p.y);D.setTransform(this._box,`translate(${y}px,${I}px)`),this._box.style.width=C-y+"px",this._box.style.height=T-I+"px"}mouseupWindow(s,u){if(!this._active||s.button!==0)return;let p=this._startPos,f=u;if(this.reset(),D.suppressClick(),p.x!==f.x||p.y!==f.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:s})),{cameraAnimation:y=>y.fitScreenCoordinates(p,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,u){return this._map.fire(new o.k(s,{originalEvent:u}))}}function Md(_,s){if(_.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${s.length}`);let u={};for(let p=0;p<_.length;p++)u[_[p].identifier]=s[p];return u}class Og{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),p.length===this.numTouches&&(this.centroid=function(f){let y=new o.P(0,0);for(let C of f)y._add(C);return y.div(f.length)}(u),this.touches=Md(p,u)))}touchmove(s,u,p){if(this.aborted||!this.centroid)return;let f=Md(p,u);for(let y in this.touches){let C=f[y];(!C||C.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(s,u,p){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){let f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Ep{constructor(s){this.singleTap=new Og(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,u,p){this.singleTap.touchstart(s,u,p)}touchmove(s,u,p){this.singleTap.touchmove(s,u,p)}touchend(s,u,p){let f=this.singleTap.touchend(s,u,p);if(f){let y=s.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(f)<30;if(y&&C||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Jc{constructor(s){this._tr=new ss(s),this._zoomIn=new Ep({numTouches:1,numTaps:2}),this._zoomOut=new Ep({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,u,p){this._zoomIn.touchstart(s,u,p),this._zoomOut.touchstart(s,u,p)}touchmove(s,u,p){this._zoomIn.touchmove(s,u,p),this._zoomOut.touchmove(s,u,p)}touchend(s,u,p){let f=this._zoomIn.touchend(s,u,p),y=this._zoomOut.touchend(s,u,p),C=this._tr;return f?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(f)},{originalEvent:s})}):y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(y)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ia{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let u=this._moveFunction(...s);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(s,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,u){if(!this.isEnabled())return;let p=this._lastPoint;if(!p)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let f=u.length?u[0]:u;return!this._moved&&f.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(p,f))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&D.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let kg={0:1,2:2};class Ip{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let u=D.mouseButton(s);this._eventButton=u}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(u,p){let f=kg[p];return u.buttons===void 0||(u.buttons&f)!==f}(s,this._eventButton)}isValidEndEvent(s){return D.mouseButton(s)===this._eventButton}}class Ng{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}let Dp=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=s=>{s.preventDefault()}},Fg=({enable:_,clickTolerance:s,bearingDegreesPerPixelMoved:u=.8})=>{let p=new Ip({checkCorrectEvent:f=>D.mouseButton(f)===0&&f.ctrlKey||D.mouseButton(f)===2});return new Ia({clickTolerance:s,move:(f,y)=>({bearingDelta:(y.x-f.x)*u}),moveStateManager:p,enable:_,assignEvents:Dp})},Lg=({enable:_,clickTolerance:s,pitchDegreesPerPixelMoved:u=-.5})=>{let p=new Ip({checkCorrectEvent:f=>D.mouseButton(f)===0&&f.ctrlKey||D.mouseButton(f)===2});return new Ia({clickTolerance:s,move:(f,y)=>({pitchDelta:(y.y-f.y)*u}),moveStateManager:p,enable:_,assignEvents:Dp})};class Ql{constructor(s,u){this._clickTolerance=s.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,u,p){return this._calculateTransform(s,u,p)}touchmove(s,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return s.preventDefault(),this._calculateTransform(s,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,u,p){this._calculateTransform(s,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,u,p){p.length>0&&(this._active=!0);let f=Md(p,u),y=new o.P(0,0),C=new o.P(0,0),I=0;for(let P in f){let k=f[P],N=this._touches[P];N&&(y._add(k),C._add(k.sub(N)),I++,f[P]=k)}if(this._touches=f,this._shouldBePrevented(I)||!C.mag())return;let T=C.div(I);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(I),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tp{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(s,u,p){if(!this._firstTwoTouches)return;s.preventDefault();let[f,y]=this._firstTwoTouches,C=Pd(p,u,f),I=Pd(p,u,y);if(!C||!I)return;let T=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],T,s)}touchend(s,u,p){if(!this._firstTwoTouches)return;let[f,y]=this._firstTwoTouches,C=Pd(p,u,f),I=Pd(p,u,y);C&&I||(this._active&&D.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Pd(_,s,u){for(let p=0;p<_.length;p++)if(_[p].identifier===u)return s[p]}function Bg(_,s){return Math.log(_/s)/Math.LN2}class Ug extends Tp{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,u){let p=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Bg(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bg(this._distance,p),pinchAround:u}}}function zg(_,s){return 180*_.angleWith(s)/Math.PI}class Vg extends Tp{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,u,p){let f=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zg(this._vector,f),pinchAround:u}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let u=25/(Math.PI*this._minDiameter)*360,p=zg(s,this._startVector);return Math.abs(p)<u}}function Ap(_){return Math.abs(_.y)>Math.abs(_.x)}class Xc extends Tp{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,u,p){super.touchstart(s,u,p),this._currentTouchCount=p.length}_start(s){this._lastPoints=s,Ap(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let f=s[0].sub(this._lastPoints[0]),y=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,p.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(s,u,p){if(this._valid!==void 0)return this._valid;let f=s.mag()>=2,y=u.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;let C=s.y>0==u.y>0;return Ap(s)&&Ap(u)&&C}}let C0={panStep:100,bearingStep:15,pitchStep:10};class Bo{constructor(s){this._tr=new ss(s);let u=C0;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let u=0,p=0,f=0,y=0,C=0;switch(s.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:s.shiftKey?p=-1:(s.preventDefault(),y=-1);break;case 39:s.shiftKey?p=1:(s.preventDefault(),y=1);break;case 38:s.shiftKey?f=1:(s.preventDefault(),C=-1);break;case 40:s.shiftKey?f=-1:(s.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,f=0),{cameraAnimation:I=>{let T=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:$s,zoom:u?Math.round(T.zoom)+u*(s.shiftKey?2:1):T.zoom,bearing:T.bearing+p*this._bearingStep,pitch:T.pitch+f*this._pitchStep,offset:[-y*this._panStep,-C*this._panStep],center:T.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function $s(_){return _*(2-_)}let jg=4.000244140625;class as{constructor(s,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=s,this._tr=new ss(s),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let u=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,p=x.now(),f=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%jg==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(f*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),s.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=s,this._delta-=u,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let u=D.mousePos(this._map.getCanvas(),s),p=this._tr;this._around=u.y>p.transform.height/2-p.transform.getHorizon()?o.N.convert(this._aroundCenter?p.center:p.unproject(u)):o.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(this._delta!==0){let T=this._type==="wheel"&&Math.abs(this._delta)>jg?this._wheelZoomRate:this._defaultZoomRate,P=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&P!==0&&(P=1/P);let k=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(k*P))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let u=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,p=this._startZoom,f=this._easing,y,C=!1,I=x.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&f&&I){let T=Math.min(I/200,1),P=f(T);y=o.y.number(p,u,P),T<1?this._frameId||(this._frameId=!0):C=!0}else y=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:y-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let u=o.b9;if(this._prevEase){let p=this._prevEase,f=(x.now()-p.start)/p.duration,y=p.easing(f+.01)-p.easing(f),C=.27/Math.sqrt(y*y+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=o.b8(C,I,.25,1)}return this._prevEase={start:x.now(),duration:s,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ec{constructor(s,u){this._clickZoom=s,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class FC{constructor(s){this._tr=new ss(s),this.reset()}reset(){this._active=!1}dblclick(s,u){return s.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class LC{constructor(){this._tap=new Ep({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,u,p){if(!this._swipePoint)if(this._tapTime){let f=u[0],y=s.timeStamp-this._tapTime<500,C=this._tapPoint.dist(f)<30;y&&C?p.length>0&&(this._swipePoint=f,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(s,u,p)}touchmove(s,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;let f=u[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,s.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(s,u,p)}touchend(s,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{let f=this._tap.touchend(s,u,p);f&&(this._tapTime=s.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class E0{constructor(s,u,p){this._el=s,this._mousePan=u,this._touchPan=p}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class I0{constructor(s,u,p){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hg{constructor(s,u,p,f){this._el=s,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Qc{constructor(s,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=D.create("div","maplibregl-cooperative-gesture-screen",s);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=u,this._container.appendChild(f);let y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=p,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(D.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,u){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:s,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Uo=_=>_.zoom||_.drag||_.pitch||_.rotate;class at extends o.k{}function Mp(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class $g{constructor(s,u){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,y)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let C=f.type==="renderFrame"?void 0:f,I={needsRenderFrame:!1},T={},P={},k=f.touches,N=k?this._getMapTouches(k):void 0,V=N?D.touchPos(this._map.getCanvas(),N):D.mousePos(this._map.getCanvas(),f);for(let{handlerName:te,handler:se,allowed:ae}of this._handlers){if(!se.isEnabled())continue;let ce;this._blockedByActive(P,ae,te)?se.reset():se[y||f.type]&&(ce=se[y||f.type](f,V,N),this.mergeHandlerResult(I,T,ce,te,C),ce&&ce.needsRenderFrame&&this._triggerRenderFrame()),(ce||se.isActive())&&(P[te]=se)}let G={};for(let te in this._previousActiveHandlers)P[te]||(G[te]=C);this._previousActiveHandlers=P,(Object.keys(G).length||Mp(I))&&(this._changes.push([I,T,G]),this._triggerRenderFrame()),(Object.keys(P).length||Mp(I))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:K}=I;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Rg(s),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);let p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(let[f,y,C]of this._listeners)D.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(let[s,u,p]of this._listeners)D.removeEventListener(s,u,s===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(s){let u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new S0(u,s));let f=u.boxZoom=new Co(u,s);this._add("boxZoom",f),s.interactive&&s.boxZoom&&f.enable();let y=u.cooperativeGestures=new Qc(u,s.cooperativeGestures);this._add("cooperativeGestures",y),s.cooperativeGestures&&y.enable();let C=new Jc(u),I=new FC(u);u.doubleClickZoom=new ec(I,C),this._add("tapZoom",C),this._add("clickZoom",I),s.interactive&&s.doubleClickZoom&&u.doubleClickZoom.enable();let T=new LC;this._add("tapDragZoom",T);let P=u.touchPitch=new Xc(u);this._add("touchPitch",P),s.interactive&&s.touchPitch&&u.touchPitch.enable(s.touchPitch);let k=Fg(s),N=Lg(s);u.dragRotate=new I0(s,k,N),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]),s.interactive&&s.dragRotate&&u.dragRotate.enable();let V=(({enable:ce,clickTolerance:X})=>{let pe=new Ip({checkCorrectEvent:ge=>D.mouseButton(ge)===0&&!ge.ctrlKey});return new Ia({clickTolerance:X,move:(ge,Se)=>({around:Se,panDelta:Se.sub(ge)}),activateOnStart:!0,moveStateManager:pe,enable:ce,assignEvents:Dp})})(s),G=new Ql(s,u);u.dragPan=new E0(p,V,G),this._add("mousePan",V),this._add("touchPan",G,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&u.dragPan.enable(s.dragPan);let K=new Vg,te=new Ug;u.touchZoomRotate=new Hg(p,te,K,T),this._add("touchRotate",K,["touchPan","touchZoom"]),this._add("touchZoom",te,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&u.touchZoomRotate.enable(s.touchZoomRotate);let se=u.scrollZoom=new as(u,()=>this._triggerRenderFrame());this._add("scrollZoom",se,["mousePan"]),s.interactive&&s.scrollZoom&&u.scrollZoom.enable(s.scrollZoom);let ae=u.keyboard=new Bo(u);this._add("keyboard",ae),s.interactive&&s.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Ni(u))}_add(s,u,p){this._handlers.push({handlerName:s,handler:u,allowed:p}),this._handlersById[s]=u}stop(s){if(!this._updatingCamera){for(let{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Uo(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,u,p){for(let f in s)if(f!==p&&(!u||u.indexOf(f)<0))return!0;return!1}_getMapTouches(s){let u=[];for(let p of s)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(s,u,p,f,y){if(!p)return;o.e(s,p);let C={handlerName:f,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){let s={},u={},p={};for(let[f,y,C]of this._changes)f.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(f.panDelta)),f.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(s.around=f.around),f.pinchAround!==void 0&&(s.pinchAround=f.pinchAround),f.noInertia&&(s.noInertia=f.noInertia),o.e(u,y),o.e(p,C);this._updateMapTransform(s,u,p),this._changes=[]}_updateMapTransform(s,u,p){let f=this._map,y=f._getTransformForUpdate(),C=f.terrain;if(!(Mp(s)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:I,zoomDelta:T,bearingDelta:P,pitchDelta:k,around:N,pinchAround:V}=s;V!==void 0&&(N=V),f._stop(!0),N=N||f.transform.centerPoint;let G=y.pointLocation(I?N.sub(I):N);P&&(y.bearing+=P),k&&(y.pitch+=k),T&&(y.zoom+=T),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(I)):y.setLocationAtPoint(G,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(G,N)):y.setLocationAtPoint(G,N),f._applyUpdatedTransform(y),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(u,p,!0)}_fireEvents(s,u,p){let f=Uo(this._eventsInProgress),y=Uo(s),C={};for(let N in s){let{originalEvent:V}=s[N];this._eventsInProgress[N]||(C[`${N}start`]=V),this._eventsInProgress[N]=s[N]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(let N in C)this._fireEvent(N,C[N]);y&&this._fireEvent("move",y.originalEvent);for(let N in s){let{originalEvent:V}=s[N];this._fireEvent(N,V)}let I={},T;for(let N in this._eventsInProgress){let{handlerName:V,originalEvent:G}=this._eventsInProgress[N];this._handlersById[V].isActive()||(delete this._eventsInProgress[N],T=u[V]||G,I[`${N}end`]=T)}for(let N in I)this._fireEvent(N,I[N]);let P=Uo(this._eventsInProgress),k=(f||y)&&!P;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();N.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(N)}if(p&&k){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!N||!N.essential&&x.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:T})),V(this._map.getBearing())&&this._map.resetNorth()):(V(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(s,u){this._map.fire(new o.k(s,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new at("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class D0 extends o.E{constructor(s,u){super(),this._renderFrameCallback=()=>{let p=Math.min((x.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,u){return this.jumpTo({center:s},u)}panBy(s,u,p){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},u),p)}panTo(s,u,p){return this.easeTo(o.e({center:s},u),p)}getZoom(){return this.transform.zoom}setZoom(s,u){return this.jumpTo({zoom:s},u),this}zoomTo(s,u,p){return this.easeTo(o.e({zoom:s},u),p)}zoomIn(s,u){return this.zoomTo(this.getZoom()+1,s,u),this}zoomOut(s,u){return this.zoomTo(this.getZoom()-1,s,u),this}getBearing(){return this.transform.bearing}setBearing(s,u){return this.jumpTo({bearing:s},u),this}getPadding(){return this.transform.padding}setPadding(s,u){return this.jumpTo({padding:s},u),this}rotateTo(s,u,p){return this.easeTo(o.e({bearing:s},u),p)}resetNorth(s,u){return this.rotateTo(0,o.e({duration:1e3},s),u),this}resetNorthPitch(s,u){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},s),u),this}snapToNorth(s,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,u):this}getPitch(){return this.transform.pitch}setPitch(s,u){return this.jumpTo({pitch:s},u),this}cameraForBounds(s,u){s=De.convert(s).adjustAntiMeridian();let p=u&&u.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),p,u)}_cameraForBoxAndBearing(s,u,p,f){let y={top:0,bottom:0,right:0,left:0};if(typeof(f=o.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){let qe=f.padding;f.padding={top:qe,bottom:qe,right:qe,left:qe}}f.padding=o.e(y,f.padding);let C=this.transform,I=C.padding,T=new De(s,u),P=C.project(T.getNorthWest()),k=C.project(T.getNorthEast()),N=C.project(T.getSouthEast()),V=C.project(T.getSouthWest()),G=o.ba(-p),K=P.rotate(G),te=k.rotate(G),se=N.rotate(G),ae=V.rotate(G),ce=new o.P(Math.max(K.x,te.x,ae.x,se.x),Math.max(K.y,te.y,ae.y,se.y)),X=new o.P(Math.min(K.x,te.x,ae.x,se.x),Math.min(K.y,te.y,ae.y,se.y)),pe=ce.sub(X),ge=(C.width-(I.left+I.right+f.padding.left+f.padding.right))/pe.x,Se=(C.height-(I.top+I.bottom+f.padding.top+f.padding.bottom))/pe.y;if(Se<0||ge<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let ke=Math.min(C.scaleZoom(C.scale*Math.min(ge,Se)),f.maxZoom),ze=o.P.convert(f.offset),Xe=new o.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(o.ba(p)),it=ze.add(Xe).mult(C.scale/C.zoomScale(ke));return{center:C.unproject(P.add(N).div(2).sub(it)),zoom:ke,bearing:p}}fitBounds(s,u,p){return this._fitInternal(this.cameraForBounds(s,u),u,p)}fitScreenCoordinates(s,u,p,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(s)),this.transform.pointLocation(o.P.convert(u)),p,f),f,y)}_fitInternal(s,u,p){return s?(delete(u=o.e(s,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(s,u){this.stop();let p=this._getTransformForUpdate(),f=!1,y=!1,C=!1;return"zoom"in s&&p.zoom!==+s.zoom&&(f=!0,p.zoom=+s.zoom),s.center!==void 0&&(p.center=o.N.convert(s.center)),"bearing"in s&&p.bearing!==+s.bearing&&(y=!0,p.bearing=+s.bearing),"pitch"in s&&p.pitch!==+s.pitch&&(C=!0,p.pitch=+s.pitch),s.padding==null||p.isPaddingEqual(s.padding)||(p.padding=s.padding),this._applyUpdatedTransform(p),this.fire(new o.k("movestart",u)).fire(new o.k("move",u)),f&&this.fire(new o.k("zoomstart",u)).fire(new o.k("zoom",u)).fire(new o.k("zoomend",u)),y&&this.fire(new o.k("rotatestart",u)).fire(new o.k("rotate",u)).fire(new o.k("rotateend",u)),C&&this.fire(new o.k("pitchstart",u)).fire(new o.k("pitch",u)).fire(new o.k("pitchend",u)),this.fire(new o.k("moveend",u))}calculateCameraOptionsFromTo(s,u,p,f=0){let y=o.Z.fromLngLat(s,u),C=o.Z.fromLngLat(p,f),I=C.x-y.x,T=C.y-y.y,P=C.z-y.z,k=Math.hypot(I,T,P);if(k===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(I,T),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/k/this.transform.tileSize),G=180*Math.atan2(I,-T)/Math.PI,K=180*Math.acos(N/k)/Math.PI;return K=P<0?90-K:90+K,{center:C.toLngLat(),zoom:V,pitch:K,bearing:G}}easeTo(s,u){var p;this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.b9},s)).animate===!1||!s.essential&&x.prefersReducedMotion)&&(s.duration=0);let f=this._getTransformForUpdate(),y=f.zoom,C=f.bearing,I=f.pitch,T=f.padding,P="bearing"in s?this._normalizeBearing(s.bearing,C):C,k="pitch"in s?+s.pitch:I,N="padding"in s?s.padding:f.padding,V=o.P.convert(s.offset),G=f.centerPoint.add(V),K=f.pointLocation(G),{center:te,zoom:se}=f.getConstrained(o.N.convert(s.center||K),(p=s.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(te,f);let ae=f.project(K),ce=f.project(te).sub(ae),X=f.zoomScale(se-y),pe,ge;s.around&&(pe=o.N.convert(s.around),ge=f.locationPoint(pe));let Se={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||se!==y,this._rotating=this._rotating||C!==P,this._pitching=this._pitching||k!==I,this._padding=!f.isPaddingEqual(N),this._easeId=s.easeId,this._prepareEase(u,s.noMoveStart,Se),this.terrain&&this._prepareElevation(te),this._ease(ke=>{if(this._zooming&&(f.zoom=o.y.number(y,se,ke)),this._rotating&&(f.bearing=o.y.number(C,P,ke)),this._pitching&&(f.pitch=o.y.number(I,k,ke)),this._padding&&(f.interpolatePadding(T,N,ke),G=f.centerPoint.add(V)),this.terrain&&!s.freezeElevation&&this._updateElevation(ke),pe)f.setLocationAtPoint(pe,ge);else{let ze=f.zoomScale(f.zoom-y),Xe=se>y?Math.min(2,X):Math.max(.5,X),it=Math.pow(Xe,1-ke),qe=f.unproject(ae.add(ce.mult(ke*it)).mult(ze));f.setLocationAtPoint(f.renderWorldCopies?qe.wrap():qe,G)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},ke=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(u,ke)},s),this}_prepareEase(s,u,p={}){this._moving=!0,u||p.moving||this.fire(new o.k("movestart",s)),this._zooming&&!p.zooming&&this.fire(new o.k("zoomstart",s)),this._rotating&&!p.rotating&&this.fire(new o.k("rotatestart",s)),this._pitching&&!p.pitching&&this.fire(new o.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&u!==this._elevationTarget){let p=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(p-(u-(p*s+this._elevationStart))/(1-s)),this._elevationTarget=u}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){let u=s.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(u.lngLat,s.zoom);if(u.altitude<p){let f=this.calculateCameraOptionsFromTo(u.lngLat,p,s.center,s.elevation);return{pitch:f.pitch,zoom:f.zoom}}return{}}_applyUpdatedTransform(s){let u=[];if(this.terrain&&u.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&u.push(f=>this.transformCameraUpdate(f)),!u.length)return;let p=s.clone();for(let f of u){let y=p.clone(),{center:C,zoom:I,pitch:T,bearing:P,elevation:k}=f(y);C&&(y.center=C),I!==void 0&&(y.zoom=I),T!==void 0&&(y.pitch=T),P!==void 0&&(y.bearing=P),k!==void 0&&(y.elevation=k),p.apply(y)}this.transform.apply(p)}_fireMoveEvents(s){this.fire(new o.k("move",s)),this._zooming&&this.fire(new o.k("zoom",s)),this._rotating&&this.fire(new o.k("rotate",s)),this._pitching&&this.fire(new o.k("pitch",s))}_afterEase(s,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;let p=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new o.k("zoomend",s)),f&&this.fire(new o.k("rotateend",s)),y&&this.fire(new o.k("pitchend",s)),this.fire(new o.k("moveend",s))}flyTo(s,u){var p;if(!s.essential&&x.prefersReducedMotion){let tt=o.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(tt,u)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},s);let f=this._getTransformForUpdate(),y=f.zoom,C=f.bearing,I=f.pitch,T=f.padding,P="bearing"in s?this._normalizeBearing(s.bearing,C):C,k="pitch"in s?+s.pitch:I,N="padding"in s?s.padding:f.padding,V=o.P.convert(s.offset),G=f.centerPoint.add(V),K=f.pointLocation(G),{center:te,zoom:se}=f.getConstrained(o.N.convert(s.center||K),(p=s.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(te,f);let ae=f.zoomScale(se-y),ce=f.project(K),X=f.project(te).sub(ce),pe=s.curve,ge=Math.max(f.width,f.height),Se=ge/ae,ke=X.mag();if("minZoom"in s){let tt=o.ac(Math.min(s.minZoom,y,se),f.minZoom,f.maxZoom),Ut=ge/f.zoomScale(tt-y);pe=Math.sqrt(Ut/ke*2)}let ze=pe*pe;function Xe(tt){let Ut=(Se*Se-ge*ge+(tt?-1:1)*ze*ze*ke*ke)/(2*(tt?Se:ge)*ze*ke);return Math.log(Math.sqrt(Ut*Ut+1)-Ut)}function it(tt){return(Math.exp(tt)-Math.exp(-tt))/2}function qe(tt){return(Math.exp(tt)+Math.exp(-tt))/2}let Ge=Xe(!1),pt=function(tt){return qe(Ge)/qe(Ge+pe*tt)},$t=function(tt){return ge*((qe(Ge)*(it(Ut=Ge+pe*tt)/qe(Ut))-it(Ge))/ze)/ke;var Ut},Ke=(Xe(!0)-Ge)/pe;if(Math.abs(ke)<1e-6||!isFinite(Ke)){if(Math.abs(ge-Se)<1e-6)return this.easeTo(s,u);let tt=Se<ge?-1:1;Ke=Math.abs(Math.log(Se/ge))/pe,$t=()=>0,pt=Ut=>Math.exp(tt*pe*Ut)}return s.duration="duration"in s?+s.duration:1e3*Ke/("screenSpeed"in s?+s.screenSpeed/pe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=C!==P,this._pitching=k!==I,this._padding=!f.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(te),this._ease(tt=>{let Ut=tt*Ke,hi=1/pt(Ut);f.zoom=tt===1?se:y+f.scaleZoom(hi),this._rotating&&(f.bearing=o.y.number(C,P,tt)),this._pitching&&(f.pitch=o.y.number(I,k,tt)),this._padding&&(f.interpolatePadding(T,N,tt),G=f.centerPoint.add(V)),this.terrain&&!s.freezeElevation&&this._updateElevation(tt);let nn=tt===1?te:f.unproject(ce.add(X.mult($t(Ut))).mult(hi));f.setLocationAtPoint(f.renderWorldCopies?nn.wrap():nn,G),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}return s||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(s,u,p){p.animate===!1||p.duration===0?(s(1),u()):(this._easeStart=x.now(),this._easeOptions=p,this._onEaseFrame=s,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,u){s=o.b3(s,-180,180);let p=Math.abs(s-u);return Math.abs(s-360-u)<p&&(s-=360),Math.abs(s+360-u)<p&&(s+=360),s}_normalizeCenter(s,u){if(!u.renderWorldCopies||u.lngRange)return;let p=s.lng-u.center.lng;s.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}let eu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class tu{constructor(s=eu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=D.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=D.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,u){let p=this._map._getUIString(`AttributionControl.${u}`);s.title=p,s.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}let u=this._map.style.sourceCaches;for(let f in u){let y=u[f];if(y.used||y.usedForTerrain){let C=y.getSource();C.attribution&&s.indexOf(C.attribution)<0&&s.push(C.attribution)}}s=s.filter(f=>String(f).trim()),s.sort((f,y)=>f.length-y.length),s=s.filter((f,y)=>{for(let C=y+1;C<s.length;C++)if(s[C].indexOf(f)>=0)return!1;return!0});let p=s.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,s.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Gg{constructor(s={}){this._updateCompact=()=>{let u=this._container.children;if(u.length){let p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=D.create("div","maplibregl-ctrl");let u=D.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){D.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class _n{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let u=++this._id;return this._queue.push({callback:s,id:u,cancelled:!1}),u}remove(s){let u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(let f of p)if(f.id===s)return void(f.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let u=this._currentlyRunning=this._queue;this._queue=[];for(let p of u)if(!p.cancelled&&(p.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var qg=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class BC extends o.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,u){this.sourceCache.update(s,u),this._renderableTilesKeys=[];let p={};for(let f of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),o.aP(f.posMatrix,0,o.X,0,o.X,0,1),this._tiles[f.key]=new Ja(f,this.tileSize));for(let f in this._tiles)p[f]||delete this._tiles[f]}freeRtt(s){for(let u in this._tiles){let p=this._tiles[u];(!s||p.tileID.equals(s)||p.tileID.isChildOf(s)||s.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){let u={};for(let p of this._renderableTilesKeys){let f=this._tiles[p].tileID;if(f.canonical.equals(s.canonical)){let y=s.clone();y.posMatrix=new Float64Array(16),o.aP(y.posMatrix,0,o.X,0,o.X,0,1),u[p]=y}else if(f.canonical.isChildOf(s.canonical)){let y=s.clone();y.posMatrix=new Float64Array(16);let C=f.canonical.z-s.canonical.z,I=f.canonical.x-(f.canonical.x>>C<<C),T=f.canonical.y-(f.canonical.y>>C<<C),P=o.X>>C;o.aP(y.posMatrix,0,P,0,P,0,1),o.J(y.posMatrix,y.posMatrix,[-I*P,-T*P,0]),u[p]=y}else if(s.canonical.isChildOf(f.canonical)){let y=s.clone();y.posMatrix=new Float64Array(16);let C=s.canonical.z-f.canonical.z,I=s.canonical.x-(s.canonical.x>>C<<C),T=s.canonical.y-(s.canonical.y>>C<<C),P=o.X>>C;o.aP(y.posMatrix,0,o.X,0,o.X,0,1),o.J(y.posMatrix,y.posMatrix,[I*P,T*P,0]),o.K(y.posMatrix,y.posMatrix,[1/2**C,1/2**C,0]),u[p]=y}}return u}getSourceTile(s,u){let p=this.sourceCache._source,f=s.overscaledZ-this.deltaZoom;if(f>p.maxzoom&&(f=p.maxzoom),f<p.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!y||!y.dem)&&u)for(;f>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(s.scaledTo(f--).key);return y}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=s)}}class Wg{constructor(s,u,p){this.painter=s,this.sourceCache=new BC(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,u,p,f=o.X){var y;if(!(u>=0&&u<f&&p>=0&&p<f))return 0;let C=this.getTerrainData(s),I=(y=C.tile)===null||y===void 0?void 0:y.dem;if(!I)return 0;let T=function(K,te,se){var ae=te[0],ce=te[1];return K[0]=se[0]*ae+se[4]*ce+se[12],K[1]=se[1]*ae+se[5]*ce+se[13],K}([],[u/f*o.X,p/f*o.X],C.u_terrain_matrix),P=[T[0]*I.dim,T[1]*I.dim],k=Math.floor(P[0]),N=Math.floor(P[1]),V=P[0]-k,G=P[1]-N;return I.get(k,N)*(1-V)*(1-G)+I.get(k+1,N)*V*(1-G)+I.get(k,N+1)*(1-V)*G+I.get(k+1,N+1)*V*G}getElevationForLngLatZoom(s,u){if(!o.bb(u,s.wrap()))return 0;let{tileID:p,mercatorX:f,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(s,u);return this.getElevation(p,f%o.X,y%o.X,o.X)}getElevation(s,u,p,f=o.X){return this.getDEMElevation(s,u,p,f)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let f=this.painter.context,y=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new st(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new st(f,new o.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}let u=this.sourceCache.getSourceTile(s,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){let f=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new st(f,u.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),u.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}let p=u&&u+u.tileID.key+s.key;if(p&&!this._demMatrixCache[p]){let f=this.sourceCache.sourceCache._source.maxzoom,y=s.canonical.z-u.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=f?y=s.canonical.z-f:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let C=s.canonical.x-(s.canonical.x>>y<<y),I=s.canonical.y-(s.canonical.y>>y<<y),T=o.bc(new Float64Array(16),[1/(o.X<<y),1/(o.X<<y),0]);o.J(T,T,[C*o.X,I*o.X,0]),this._demMatrixCache[s.key]={matrix:T,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(s){let u=this.painter,p=u.width/devicePixelRatio,f=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new st(u.context,{width:p,height:f,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new st(u.context,{width:p,height:f,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,f,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,f))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,C=0;y<this._coordsTextureSize;y++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&y,u[C+2]=I>>8<<4|y>>8,u[C+3]=0;let p=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),f=new st(s,p,s.gl.RGBA,{premultiply:!1});return f.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let u=new Uint8Array(4),p=this.painter.context,f=p.gl,y=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(y,I-C-1,1,1,f.RGBA,f.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);let T=u[0]+(u[2]>>4<<8),P=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],N=k&&this.sourceCache.getTileByID(k);if(!N)return null;let V=this._coordsTextureSize,G=(1<<N.tileID.canonical.z)*V;return new o.Z((N.tileID.canonical.x*V+T)/G+N.tileID.wrap,(N.tileID.canonical.y*V+P)/G,this.getElevation(N.tileID,T,P,V))}depthAtPoint(s){let u=new Uint8Array(4),p=this.painter.context,f=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let s=this.painter.context,u=new o.bd,p=new o.aY,f=this.meshSize,y=o.X/f,C=f*f;for(let N=0;N<=f;N++)for(let V=0;V<=f;V++)u.emplaceBack(V*y,N*y,0);for(let N=0;N<C;N+=f+1)for(let V=0;V<f;V++)p.emplaceBack(V+N,f+V+N+1,f+V+N+2),p.emplaceBack(V+N,f+V+N+2,V+N+1);let I=u.length,T=I+2*(f+1);for(let N of[0,1])for(let V=0;V<=f;V++)for(let G of[0,1])u.emplaceBack(V*y,N*o.X,G);for(let N=0;N<2*f;N+=2)p.emplaceBack(T+N,T+N+1,T+N+3),p.emplaceBack(T+N,T+N+3,T+N+2),p.emplaceBack(I+N,I+N+3,I+N+1),p.emplaceBack(I+N,I+N+2,I+N+3);let P=u.length,k=P+2*(f+1);for(let N of[0,1])for(let V=0;V<=f;V++)for(let G of[0,1])u.emplaceBack(N*o.X,V*y,G);for(let N=0;N<2*f;N+=2)p.emplaceBack(P+N,P+N+1,P+N+3),p.emplaceBack(P+N,P+N+3,P+N+2),p.emplaceBack(k+N,k+N+3,k+N+1),p.emplaceBack(k+N,k+N+2,k+N+3);return this._mesh=new bp(s.createVertexBuffer(u,qg.members),s.createIndexBuffer(p),o.a0.simpleSegment(0,0,u.length,p.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*o.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,u){var p;let{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(s,u);return(p=this.getMinMaxElevation(f).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(s){let u=this.getTerrainData(s).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(s,u){let p=o.Z.fromLngLat(s.wrap()),f=(1<<u)*o.X,y=p.x*f,C=p.y*f,I=Math.floor(y/o.X),T=Math.floor(C/o.X);return{tileID:new o.S(u,0,u,I,T),mercatorX:y,mercatorY:C}}}class UC{constructor(s,u,p){this._context=s,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new st(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:s,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>s.id!==u),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let nu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class T0{constructor(s,u){this.painter=s,this.terrain=u,this.pool=new UC(s.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(p=>!s._layers[p].isHidden(u)),this._coordsDescendingInv={};for(let p in s.sourceCaches){this._coordsDescendingInv[p]={};let f=s.sourceCaches[p].getVisibleCoordinates();for(let y of f){let C=this.terrain.sourceCache.getTerrainCoords(y);for(let I in C)this._coordsDescendingInv[p][I]||(this._coordsDescendingInv[p][I]=[]),this._coordsDescendingInv[p][I].push(C[I])}}this._coordsDescendingInvStr={};for(let p of s._order){let f=s._layers[p],y=f.source;if(nu[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(let C in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][C]=this._coordsDescendingInv[y][C].map(I=>I.key).sort().join()}}for(let p of this._renderableTiles)for(let f in this._coordsDescendingInvStr){let y=this._coordsDescendingInvStr[f][p.tileID.key];y&&y!==p.rttCoords[f]&&(p.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;let u=s.type,p=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(nu[u]&&(this._prevType&&nu[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(s.id),!f))return!0;if(nu[this._prevType]||nu[u]&&f){this._prevType=u;let y=this._stacks.length-1,C=this._stacks[y]||[];for(let I of this._renderableTiles){if(this.pool.isFull()&&(b0(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[y]){let P=this.pool.getObjectForId(I.rtt[y].id);if(P.stamp===I.rtt[y].stamp){this.pool.useObject(P);continue}}let T=this.pool.getOrCreateFreeObject();this.pool.useObject(T),this.pool.stampObject(T),I.rtt[y]={id:T.id,stamp:T.stamp},p.context.bindFramebuffer.set(T.fbo.framebuffer),p.context.clear({color:o.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let P=0;P<C.length;P++){let k=p.style._layers[C[P]],N=k.source?this._coordsDescendingInv[k.source][I.tileID.key]:[I.tileID];p.context.viewport.set([0,0,T.fbo.width,T.fbo.height]),p._renderTileClippingMasks(k,N),p.renderLayer(p,p.style.sourceCaches[k.source],k,N),k.source&&(I.rttCoords[k.source]=this._coordsDescendingInvStr[k.source][I.tileID.key])}}return b0(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),nu[u]}return!1}}let Zg={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},A0=d,zC={hash:!1,interactive:!0,bearingSnap:7,attributionControl:eu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Kg=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},VC={showCompass:!0,showZoom:!0,visualizePitch:!1};class jC{constructor(s,u,p=!1){this.mousedown=C=>{this.startMouse(o.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),D.mousePos(this.element,C)),D.addEventListener(window,"mousemove",this.mousemove),D.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,D.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),D.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let f=s.dragRotate._mouseRotate.getClickTolerance(),y=s.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Fg({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:I,bearingDegreesPerPixelMoved:T=.8})=>{let P=new Ng;return new Ia({clickTolerance:I,move:(k,N)=>({bearingDelta:(N.x-k.x)*T}),moveStateManager:P,enable:C,assignEvents:Kg})})({clickTolerance:f,enable:!0}),this.map=s,p&&(this.mousePitch=Lg({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:I,pitchDegreesPerPixelMoved:T=-.5})=>{let P=new Ng;return new Ia({clickTolerance:I,move:(k,N)=>({pitchDelta:(N.y-k.y)*T}),moveStateManager:P,enable:C,assignEvents:Kg})})({clickTolerance:y,enable:!0})),D.addEventListener(u,"mousedown",this.mousedown),D.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(u,"touchcancel",this.reset)}startMouse(s,u){this.mouseRotate.dragStart(s,u),this.mousePitch&&this.mousePitch.dragStart(s,u),D.disableDrag()}startTouch(s,u){this.touchRotate.dragStart(s,u),this.touchPitch&&this.touchPitch.dragStart(s,u),D.disableDrag()}moveMouse(s,u){let p=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(s,u)||{};if(f&&p.setBearing(p.getBearing()+f),this.mousePitch){let{pitchDelta:y}=this.mousePitch.dragMove(s,u)||{};y&&p.setPitch(p.getPitch()+y)}}moveTouch(s,u){let p=this.map,{bearingDelta:f}=this.touchRotate.dragMove(s,u)||{};if(f&&p.setBearing(p.getBearing()+f),this.touchPitch){let{pitchDelta:y}=this.touchPitch.dragMove(s,u)||{};y&&p.setPitch(p.getPitch()+y)}}off(){let s=this.element;D.removeEventListener(s,"mousedown",this.mousedown),D.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend),D.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){D.enableDrag(),D.removeEventListener(window,"mousemove",this.mousemove),D.removeEventListener(window,"mouseup",this.mouseup),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend)}}let Eo;function di(_,s,u){let p=new o.N(_.lng,_.lat);if(_=new o.N(_.lng,_.lat),s){let f=new o.N(_.lng-360,_.lat),y=new o.N(_.lng+360,_.lat),C=u.locationPoint(_).distSqr(s);u.locationPoint(f).distSqr(s)<C?_=f:u.locationPoint(y).distSqr(s)<C&&(_=y)}for(;Math.abs(_.lng-u.center.lng)>180;){let f=u.locationPoint(_);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;_.lng>u.center.lng?_.lng-=360:_.lng+=360}return _.lng!==p.lng&&u.locationPoint(_).y>u.height/2-u.getHorizon()?_:p}let iu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pp(_,s,u){let p=_.classList;for(let f in iu)p.remove(`maplibregl-${u}-anchor-${f}`);p.add(`maplibregl-${u}-anchor-${s}`)}class Rp extends o.E{constructor(s){if(super(),this._onKeyPress=u=>{let p=u.code,f=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=u=>{let p=u.originalEvent.target,f=this._element;this._popup&&(p===f||f.contains(p))&&this.togglePopup()},this._update=u=>{var p;if(!this._map)return;let f=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?di(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,`${iu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${y}`),x.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){let p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s?.opacity,s?.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div");let u=D.createNS("http://www.w3.org/2000/svg","svg"),p=41,f=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${f}px`),u.setAttributeNS(null,"viewBox",`0 0 ${f} ${p}`);let y=D.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");let C=D.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");let I=D.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");let T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ae of T){let ce=D.createNS("http://www.w3.org/2000/svg","ellipse");ce.setAttributeNS(null,"opacity","0.04"),ce.setAttributeNS(null,"cx","10.5"),ce.setAttributeNS(null,"cy","5.80029008"),ce.setAttributeNS(null,"rx",ae.rx),ce.setAttributeNS(null,"ry",ae.ry),I.appendChild(ce)}let P=D.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);let k=D.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(k);let N=D.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let V=D.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(V);let G=D.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");let K=D.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(8.0, 8.0)");let te=D.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#000000"),te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962");let se=D.createNS("http://www.w3.org/2000/svg","circle");se.setAttributeNS(null,"fill","#FFFFFF"),se.setAttributeNS(null,"cx","5.5"),se.setAttributeNS(null,"cy","5.5"),se.setAttributeNS(null,"r","5.4999962"),K.appendChild(te),K.appendChild(se),C.appendChild(I),C.appendChild(P),C.appendChild(N),C.appendChild(G),C.appendChild(K),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(u),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Pp(this._element,this._anchor,"marker"),s&&s.className)for(let u of s.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let f=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var u,p;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let f=this._map,y=f.terrain.depthAtPoint(this._pos),C=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,C)-y<.006)return void(this._element.style.opacity=this._opacity);let I=-this._offset.y/f.transform._pixelPerMeter,T=Math.sin(f.getPitch()*Math.PI/180)*I,P=f.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),k=f.transform.lngLatToCameraDepth(this._lngLat,C+T)-P>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&k&&this._popup.remove(),this._element.style.opacity=k?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,u){return s===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}let M0={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Rd=0,Od=!1,Gs={maxWidth:100,unit:"metric"};function kd(_,s,u){let p=u&&u.maxWidth||100,f=_._container.clientHeight/2,y=_.unproject([0,f]),C=_.unproject([p,f]),I=y.distanceTo(C);if(u&&u.unit==="imperial"){let T=3.2808*I;T>5280?ht(s,p,T/5280,_._getUIString("ScaleControl.Miles")):ht(s,p,T,_._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ht(s,p,I/1852,_._getUIString("ScaleControl.NauticalMiles")):I>=1e3?ht(s,p,I/1e3,_._getUIString("ScaleControl.Kilometers")):ht(s,p,I,_._getUIString("ScaleControl.Meters"))}function ht(_,s,u,p){let f=function(y){let C=Math.pow(10,`${Math.floor(y)}`.length-1),I=y/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(T){let P=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*P)/P}(I),C*I}(u);_.style.width=s*(f/u)+"px",_.innerHTML=`${f}&nbsp;${p}`}let At={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Op=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function kp(_){if(_){if(typeof _=="number"){let s=Math.round(Math.abs(_)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,_),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-_),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(_,0),right:new o.P(-_,0)}}if(_ instanceof o.P||Array.isArray(_)){let s=o.P.convert(_);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(_.center||[0,0]),top:o.P.convert(_.top||[0,0]),"top-left":o.P.convert(_["top-left"]||[0,0]),"top-right":o.P.convert(_["top-right"]||[0,0]),bottom:o.P.convert(_.bottom||[0,0]),"bottom-left":o.P.convert(_["bottom-left"]||[0,0]),"bottom-right":o.P.convert(_["bottom-right"]||[0,0]),left:o.P.convert(_.left||[0,0]),right:o.P.convert(_.right||[0,0])}}return kp(new o.P(0,0))}let Yg=d;r.AJAXError=o.bh,r.Evented=o.E,r.LngLat=o.N,r.MercatorCoordinate=o.Z,r.Point=o.P,r.addProtocol=o.bi,r.config=o.a,r.removeProtocol=o.bj,r.AttributionControl=tu,r.BoxZoomHandler=Co,r.CanvasSource=No,r.CooperativeGesturesHandler=Qc,r.DoubleClickZoomHandler=ec,r.DragPanHandler=E0,r.DragRotateHandler=I0,r.EdgeInsets=Kc,r.FullscreenControl=class extends o.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var s;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=u?.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){D.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let _=this._fullscreenButton=D.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);D.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},r.GeoJSONSource=fd,r.GeolocateControl=class extends o.E{constructor(_){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{let u=new o.N(s.coords.longitude,s.coords.latitude),p=s.coords.accuracy,f=this._map.getBearing(),y=o.e({bearing:f},this.options.fitBoundsOptions),C=De.fromLngLat(u,p);this._map.fitBounds(C,y,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let u=new o.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&Od)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=D.create("button","maplibregl-ctrl-geolocate",this._container),D.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{let u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Rp({element:this._dotElement}),this._circleElement=D.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},M0,_)}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(Eo!==void 0&&!s)return Eo;if(window.navigator.permissions===void 0)return Eo=!!window.navigator.geolocation,Eo;try{Eo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Eo=!!window.navigator.geolocation}return Eo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rd=0,Od=!1}_isOutOfMapMaxBounds(_){let s=this._map.getMaxBounds(),u=_.coords;return s&&(u.longitude<s.getWest()||u.longitude>s.getEast()||u.latitude<s.getSouth()||u.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let _=this._map.getBounds(),s=_.getSouthEast(),u=_.getNorthEast(),p=s.distanceTo(u),f=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rd--,Od=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rd++,Rd>1?(_={maximumAge:6e5,timeout:0},Od=!0):(_=this.options.positionOptions,Od=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},r.Hash=xp,r.ImageSource=Sa,r.KeyboardHandler=Bo,r.LngLatBounds=De,r.LogoControl=Gg,r.Map=class extends D0{constructor(_){o.bf.mark(o.bg.create);let s=Object.assign(Object.assign({},zC),_);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Yc(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new _n,this._controls=[],this._mapId=o.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Zg),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=xe.addThrottleControl(()=>this.isMoving()),this._requestManager=new Pe(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1,p=Dd(f=>{this._trackResize&&!this._removed&&(this.resize(f),this.redraw())},50);this._resizeObserver=new ResizeObserver(f=>{u?p(f):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new $g(this,s),this._hash=s.hash&&new xp(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,o.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new tu(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new Gg,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new o.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(_,s){if(s===void 0&&(s=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let u=_.onAdd(this);this._controls.push(_);let p=this._controlPositions[s];return s.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(_);return s>-1&&this._controls.splice(s,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,s,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,s,u,p)}resize(_){var s;let u=this._containerDimensions(),p=u[0],f=u[1],y=this._getClampedPixelRatio(p,f);if(this._resizeCanvas(p,f,y),this.painter.resize(p,f,y),this.painter.overLimit()){let I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];let T=this._getClampedPixelRatio(p,f);this._resizeCanvas(p,f,T),this.painter.resize(p,f,T)}this.transform.resize(p,f),(s=this._requestedCameraState)===null||s===void 0||s.resize(p,f);let C=!this._moving;return C&&(this.stop(),this.fire(new o.k("movestart",_)).fire(new o.k("move",_))),this.fire(new o.k("resize",_)),C&&this.fire(new o.k("moveend",_)),this}_getClampedPixelRatio(_,s){let{0:u,1:p}=this._maxCanvasSize,f=this.getPixelRatio(),y=_*f,C=s*f;return Math.min(y>u?u/y:1,C>p?p/C:1)*f}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(De.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(o.N.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(o.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,s,u){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layers:s,listener:u,delegates:{mousemove:y=>{let C=s.filter(T=>this.getLayer(T)),I=C.length!==0?this.queryRenderedFeatures(y.point,{layers:C}):[];I.length?p||(p=!0,u.call(this,new Dr(_,this,y.originalEvent,{features:I}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layers:s,listener:u,delegates:{mousemove:C=>{let I=s.filter(T=>this.getLayer(T));(I.length!==0?this.queryRenderedFeatures(C.point,{layers:I}):[]).length?p=!0:p&&(p=!1,u.call(this,new Dr(_,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new Dr(_,this,C.originalEvent)))}}}}{let p=f=>{let y=s.filter(I=>this.getLayer(I)),C=y.length!==0?this.queryRenderedFeatures(f.point,{layers:y}):[];C.length&&(f.features=C,u.call(this,f),delete f.features)};return{layers:s,listener:u,delegates:{[_]:p}}}}_saveDelegatedListener(_,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(s)}_removeDelegatedListener(_,s,u){if(!this._delegatedListeners||!this._delegatedListeners[_])return;let p=this._delegatedListeners[_];for(let f=0;f<p.length;f++){let y=p[f];if(y.listener===u&&y.layers.length===s.length&&y.layers.every(C=>s.includes(C))){for(let C in y.delegates)this.off(C,y.delegates[C]);return void p.splice(f,1)}}}on(_,s,u){if(u===void 0)return super.on(_,s);let p=this._createDelegatedListener(_,typeof s=="string"?[s]:s,u);this._saveDelegatedListener(_,p);for(let f in p.delegates)this.on(f,p.delegates[f]);return this}once(_,s,u){if(u===void 0)return super.once(_,s);let p=typeof s=="string"?[s]:s,f=this._createDelegatedListener(_,p,u);for(let y in f.delegates){let C=f.delegates[y];f.delegates[y]=(...I)=>{this._removeDelegatedListener(_,p,u),C(...I)}}this._saveDelegatedListener(_,f);for(let y in f.delegates)this.once(y,f.delegates[y]);return this}off(_,s,u){return u===void 0?super.off(_,s):(this._removeDelegatedListener(_,typeof s=="string"?[s]:s,u),this)}queryRenderedFeatures(_,s){if(!this.style)return[];let u,p=_ instanceof o.P||Array.isArray(_),f=p?_:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(p?{}:_)||{},f instanceof o.P||typeof f[0]=="number")u=[o.P.convert(f)];else{let y=o.P.convert(f[0]),C=o.P.convert(f[1]);u=[y,new o.P(C.x,y.y),C,new o.P(y.x,C.y),y]}return this.style.queryRenderedFeatures(u,s,this.transform)}querySourceFeatures(_,s){return this.style.querySourceFeatures(_,s)}setStyle(_,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(_,s))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){let s=this._locale[_];if(s==null)throw new Error(`Missing UI string '${_}'`);return s}_updateStyle(_,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,s));let u=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new op(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,s,u):this.style.loadJSON(_,s,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new op(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,s){if(typeof _=="string"){let u=this._requestManager.transformRequest(_,"Style");o.h(u,new AbortController).then(p=>{this._updateDiff(p.data,s)}).catch(p=>{p&&this.fire(new o.j(p))})}else typeof _=="object"&&this._updateDiff(_,s)}_updateDiff(_,s){try{this.style.setState(_,s)&&this._update(!0)}catch(u){o.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(_,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(_,s){return this._lazyInitEmptyStyle(),this.style.addSource(_,s),this._update(!0)}isSourceLoaded(_){let s=this.style&&this.style.sourceCaches[_];if(s!==void 0)return s.loaded();this.fire(new o.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){let s=this.style.sourceCaches[_.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&s.reload();for(let u in this.style._layers){let p=this.style._layers[u];p.type==="hillshade"&&p.source===_.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Wg(this.painter,s,_),this.painter.renderToTexture=new T0(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:_})),this}getTerrain(){var _,s;return(s=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let _=this.style&&this.style.sourceCaches;for(let s in _){let u=_[s]._tiles;for(let p in u){let f=u[p];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,s,u={}){let{pixelRatio:p=1,sdf:f=!1,stretchX:y,stretchY:C,content:I,textFitWidth:T,textFitHeight:P}=u;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:k,height:N,data:V}=s,G=s;return this.style.addImage(_,{data:new o.R({width:k,height:N},new Uint8Array(V)),pixelRatio:p,stretchX:y,stretchY:C,content:I,textFitWidth:T,textFitHeight:P,sdf:f,version:0,userImage:G}),G.onAdd&&G.onAdd(this,_),this}}{let{width:k,height:N,data:V}=x.getImageData(s);this.style.addImage(_,{data:new o.R({width:k,height:N},V),pixelRatio:p,stretchX:y,stretchY:C,content:I,textFitWidth:T,textFitHeight:P,sdf:f,version:0})}}updateImage(_,s){let u=this.style.getImage(_);if(!u)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let p=s instanceof HTMLImageElement||o.b(s)?x.getImageData(s):s,{width:f,height:y,data:C}=p;if(f===void 0||y===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==u.data.width||y!==u.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let I=!(s instanceof HTMLImageElement||o.b(s));return u.data.replace(C,I),this.style.updateImage(_,u),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return xe.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,s){return this._lazyInitEmptyStyle(),this.style.addLayer(_,s),this._update(!0)}moveLayer(_,s){return this.style.moveLayer(_,s),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,s,u){return this.style.setLayerZoomRange(_,s,u),this._update(!0)}setFilter(_,s,u={}){return this.style.setFilter(_,s,u),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,s,u,p={}){return this.style.setPaintProperty(_,s,u,p),this._update(!0)}getPaintProperty(_,s){return this.style.getPaintProperty(_,s)}setLayoutProperty(_,s,u,p={}){return this.style.setLayoutProperty(_,s,u,p),this._update(!0)}getLayoutProperty(_,s){return this.style.getLayoutProperty(_,s)}setGlyphs(_,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,s,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,s,u,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,s,u=>{u||this._update(!0)}),this}setLight(_,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(_){return this._lazyInitEmptyStyle(),this.style.setSky(_),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,s){return this.style.setFeatureState(_,s),this._update()}removeFeatureState(_,s){return this.style.removeFeatureState(_,s),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,s=0;return this._container&&(_=this._container.clientWidth||400,s=this._container.clientHeight||300),[_,s]}_setupContainer(){let _=this._container;_.classList.add("maplibregl-map");let s=this._canvasContainer=D.create("div","maplibregl-canvas-container",_);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=D.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);let f=this._controlContainer=D.create("div","maplibregl-control-container",_),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{y[C]=D.create("div",`maplibregl-ctrl-${C} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,s,u){this._canvas.width=Math.floor(u*_),this._canvas.height=Math.floor(u*s),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},s=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{s={requestedAttributes:_},p&&(s.statusMessage=p.statusMessage,s.type=p.type)},{once:!0});let u=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!u){let p="Failed to initialize WebGL";throw s?(s.message=p,new Error(JSON.stringify(s))):new Error(p)}this.painter=new wp(u,this.transform),R.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){let s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let f=this.transform.zoom,y=x.now();this.style.zoomHistory.update(f,y);let C=new o.z(f,{now:y,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(let u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),xe.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s?.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),D.remove(this._canvasContainer),D.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,x.frameAsync(this._frameRequest).then(_=>{o.bf.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return A0}getCameraTargetElevation(){return this.transform.elevation}},r.MapMouseEvent=Dr,r.MapTouchEvent=Xl,r.MapWheelEvent=x0,r.Marker=Rp,r.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{let s=this._map.getZoom(),u=s===this._map.getMaxZoom(),p=s===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{let s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,u)=>{let p=this._map._getUIString(`NavigationControl.${u}`);s.title=p,s.setAttribute("aria-label",p)},this.options=o.e({},VC,_),this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),D.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),D.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=D.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jC(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,s){let u=D.create("button",_,this._container);return u.type="button",u.addEventListener("click",s),u}},r.Popup=class extends o.E{constructor(_){super(),this.remove=()=>(this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=D.create("div","maplibregl-popup",this._map.getContainer()),this._tip=D.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?di(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!s)return;let p=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor,y=kp(this.options.offset);if(!f){let I=this._container.offsetWidth,T=this._container.offsetHeight,P;P=p.y+y.bottom.y<T?["top"]:p.y>this._map.transform.height-T?["bottom"]:[],p.x<I/2?P.push("left"):p.x>this._map.transform.width-I/2&&P.push("right"),f=P.length===0?"bottom":P.join("-")}let C=p.add(y[f]);this.options.subpixelPositioning||(C=C.round()),D.setTransform(this._container,`${iu[f]} translate(${C.x}px,${C.y}px)`),Pp(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(At),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=o.N.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){let s=document.createDocumentFragment(),u=document.createElement("body"),p;for(u.innerHTML=_;p=u.firstChild,p;)s.appendChild(p);return this.setDOMContent(s)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=D.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let _=this._container.querySelector(Op);_&&_.focus()}},r.RasterDEMTileSource=Ti,r.RasterTileSource=Rn,r.ScaleControl=class{constructor(_){this._onMove=()=>{kd(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,kd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Gs),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},r.ScrollZoomHandler=as,r.Style=op,r.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=D.create("button","maplibregl-ctrl-terrain",this._container),D.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},r.TwoFingersTouchPitchHandler=Xc,r.TwoFingersTouchRotateHandler=Vg,r.TwoFingersTouchZoomHandler=Ug,r.TwoFingersTouchZoomRotateHandler=Hg,r.VectorTileSource=pd,r.VideoSource=Nc,r.addSourceType=(_,s)=>o._(void 0,void 0,void 0,function*(){if(gd(_))throw new Error(`A source type called "${_}" already exists.`);((u,p)=>{md[u]=p})(_,s)}),r.clearPrewarmedResources=function(){let _=Xn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(ko),Xn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},r.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},r.getRTLTextPluginStatus=function(){return zs().getRTLTextPluginStatus()},r.getVersion=function(){return Yg},r.getWorkerCount=function(){return io.workerCount},r.getWorkerUrl=function(){return o.a.WORKER_URL},r.importScriptInWorkers=function(_){return Wa().broadcast("IS",_)},r.prewarm=function(){wa().acquire(ko)},r.setMaxParallelImageRequests=function(_){o.a.MAX_PARALLEL_IMAGE_REQUESTS=_},r.setRTLTextPlugin=function(_,s){return zs().setRTLTextPlugin(_,s)},r.setWorkerCount=function(_){io.workerCount=_},r.setWorkerUrl=function(_){o.a.WORKER_URL=_}});var i=e;return i})});var uP=_e((R9e,u5)=>{"use strict";function uae(e,n){for(var t=-1,i=e==null?0:e.length,r=Array(i);++t<i;)r[t]=n(e[t],t,e);return r}u5.exports=uae});var h5=_e((O9e,d5)=>{"use strict";function dae(){this.__data__=[],this.size=0}d5.exports=dae});var Bm=_e((k9e,p5)=>{"use strict";function hae(e,n){return e===n||e!==e&&n!==n}p5.exports=hae});var wv=_e((N9e,f5)=>{"use strict";var pae=Bm();function fae(e,n){for(var t=e.length;t--;)if(pae(e[t][0],n))return t;return-1}f5.exports=fae});var g5=_e((F9e,m5)=>{"use strict";var mae=wv(),gae=Array.prototype,yae=gae.splice;function _ae(e){var n=this.__data__,t=mae(n,e);if(t<0)return!1;var i=n.length-1;return t==i?n.pop():yae.call(n,t,1),--this.size,!0}m5.exports=_ae});var _5=_e((L9e,y5)=>{"use strict";var vae=wv();function bae(e){var n=this.__data__,t=vae(n,e);return t<0?void 0:n[t][1]}y5.exports=bae});var b5=_e((B9e,v5)=>{"use strict";var wae=wv();function xae(e){return wae(this.__data__,e)>-1}v5.exports=xae});var x5=_e((U9e,w5)=>{"use strict";var Sae=wv();function Cae(e,n){var t=this.__data__,i=Sae(t,e);return i<0?(++this.size,t.push([e,n])):t[i][1]=n,this}w5.exports=Cae});var xv=_e((z9e,S5)=>{"use strict";var Eae=h5(),Iae=g5(),Dae=_5(),Tae=b5(),Aae=x5();function Um(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}Um.prototype.clear=Eae;Um.prototype.delete=Iae;Um.prototype.get=Dae;Um.prototype.has=Tae;Um.prototype.set=Aae;S5.exports=Um});var E5=_e((V9e,C5)=>{"use strict";var Mae=xv();function Pae(){this.__data__=new Mae,this.size=0}C5.exports=Pae});var D5=_e((j9e,I5)=>{"use strict";function Rae(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}I5.exports=Rae});var A5=_e((H9e,T5)=>{"use strict";function Oae(e){return this.__data__.get(e)}T5.exports=Oae});var P5=_e(($9e,M5)=>{"use strict";function kae(e){return this.__data__.has(e)}M5.exports=kae});var dP=_e((G9e,R5)=>{"use strict";var Nae=typeof global=="object"&&global&&global.Object===Object&&global;R5.exports=Nae});var Ga=_e((q9e,O5)=>{"use strict";var Fae=dP(),Lae=typeof self=="object"&&self&&self.Object===Object&&self,Bae=Fae||Lae||Function("return this")();O5.exports=Bae});var Sv=_e((W9e,k5)=>{"use strict";var Uae=Ga(),zae=Uae.Symbol;k5.exports=zae});var B5=_e((Z9e,L5)=>{"use strict";var N5=Sv(),F5=Object.prototype,Vae=F5.hasOwnProperty,jae=F5.toString,Cv=N5?N5.toStringTag:void 0;function Hae(e){var n=Vae.call(e,Cv),t=e[Cv];try{e[Cv]=void 0;var i=!0}catch{}var r=jae.call(e);return i&&(n?e[Cv]=t:delete e[Cv]),r}L5.exports=Hae});var z5=_e((K9e,U5)=>{"use strict";var $ae=Object.prototype,Gae=$ae.toString;function qae(e){return Gae.call(e)}U5.exports=qae});var jh=_e((Y9e,H5)=>{"use strict";var V5=Sv(),Wae=B5(),Zae=z5(),Kae="[object Null]",Yae="[object Undefined]",j5=V5?V5.toStringTag:void 0;function Jae(e){return e==null?e===void 0?Yae:Kae:j5&&j5 in Object(e)?Wae(e):Zae(e)}H5.exports=Jae});var Bl=_e((J9e,$5)=>{"use strict";function Xae(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}$5.exports=Xae});var bS=_e((X9e,G5)=>{"use strict";var Qae=jh(),ele=Bl(),tle="[object AsyncFunction]",nle="[object Function]",ile="[object GeneratorFunction]",rle="[object Proxy]";function ole(e){if(!ele(e))return!1;var n=Qae(e);return n==nle||n==ile||n==tle||n==rle}G5.exports=ole});var W5=_e((Q9e,q5)=>{"use strict";var sle=Ga(),ale=sle["__core-js_shared__"];q5.exports=ale});var Y5=_e((eWe,K5)=>{"use strict";var hP=W5(),Z5=function(){var e=/[^.]+$/.exec(hP&&hP.keys&&hP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lle(e){return!!Z5&&Z5 in e}K5.exports=lle});var pP=_e((tWe,J5)=>{"use strict";var cle=Function.prototype,ule=cle.toString;function dle(e){if(e!=null){try{return ule.call(e)}catch{}try{return e+""}catch{}}return""}J5.exports=dle});var Q5=_e((nWe,X5)=>{"use strict";var hle=bS(),ple=Y5(),fle=Bl(),mle=pP(),gle=/[\\^$.*+?()[\]{}|]/g,yle=/^\[object .+?Constructor\]$/,_le=Function.prototype,vle=Object.prototype,ble=_le.toString,wle=vle.hasOwnProperty,xle=RegExp("^"+ble.call(wle).replace(gle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sle(e){if(!fle(e)||ple(e))return!1;var n=hle(e)?xle:yle;return n.test(mle(e))}X5.exports=Sle});var t4=_e((iWe,e4)=>{"use strict";function Cle(e,n){return e?.[n]}e4.exports=Cle});var od=_e((rWe,n4)=>{"use strict";var Ele=Q5(),Ile=t4();function Dle(e,n){var t=Ile(e,n);return Ele(t)?t:void 0}n4.exports=Dle});var wS=_e((oWe,i4)=>{"use strict";var Tle=od(),Ale=Ga(),Mle=Tle(Ale,"Map");i4.exports=Mle});var Ev=_e((sWe,r4)=>{"use strict";var Ple=od(),Rle=Ple(Object,"create");r4.exports=Rle});var a4=_e((aWe,s4)=>{"use strict";var o4=Ev();function Ole(){this.__data__=o4?o4(null):{},this.size=0}s4.exports=Ole});var c4=_e((lWe,l4)=>{"use strict";function kle(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}l4.exports=kle});var d4=_e((cWe,u4)=>{"use strict";var Nle=Ev(),Fle="__lodash_hash_undefined__",Lle=Object.prototype,Ble=Lle.hasOwnProperty;function Ule(e){var n=this.__data__;if(Nle){var t=n[e];return t===Fle?void 0:t}return Ble.call(n,e)?n[e]:void 0}u4.exports=Ule});var p4=_e((uWe,h4)=>{"use strict";var zle=Ev(),Vle=Object.prototype,jle=Vle.hasOwnProperty;function Hle(e){var n=this.__data__;return zle?n[e]!==void 0:jle.call(n,e)}h4.exports=Hle});var m4=_e((dWe,f4)=>{"use strict";var $le=Ev(),Gle="__lodash_hash_undefined__";function qle(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=$le&&n===void 0?Gle:n,this}f4.exports=qle});var y4=_e((hWe,g4)=>{"use strict";var Wle=a4(),Zle=c4(),Kle=d4(),Yle=p4(),Jle=m4();function zm(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}zm.prototype.clear=Wle;zm.prototype.delete=Zle;zm.prototype.get=Kle;zm.prototype.has=Yle;zm.prototype.set=Jle;g4.exports=zm});var b4=_e((pWe,v4)=>{"use strict";var _4=y4(),Xle=xv(),Qle=wS();function ece(){this.size=0,this.__data__={hash:new _4,map:new(Qle||Xle),string:new _4}}v4.exports=ece});var x4=_e((fWe,w4)=>{"use strict";function tce(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}w4.exports=tce});var Iv=_e((mWe,S4)=>{"use strict";var nce=x4();function ice(e,n){var t=e.__data__;return nce(n)?t[typeof n=="string"?"string":"hash"]:t.map}S4.exports=ice});var E4=_e((gWe,C4)=>{"use strict";var rce=Iv();function oce(e){var n=rce(this,e).delete(e);return this.size-=n?1:0,n}C4.exports=oce});var D4=_e((yWe,I4)=>{"use strict";var sce=Iv();function ace(e){return sce(this,e).get(e)}I4.exports=ace});var A4=_e((_We,T4)=>{"use strict";var lce=Iv();function cce(e){return lce(this,e).has(e)}T4.exports=cce});var P4=_e((vWe,M4)=>{"use strict";var uce=Iv();function dce(e,n){var t=uce(this,e),i=t.size;return t.set(e,n),this.size+=t.size==i?0:1,this}M4.exports=dce});var xS=_e((bWe,R4)=>{"use strict";var hce=b4(),pce=E4(),fce=D4(),mce=A4(),gce=P4();function Vm(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var i=e[n];this.set(i[0],i[1])}}Vm.prototype.clear=hce;Vm.prototype.delete=pce;Vm.prototype.get=fce;Vm.prototype.has=mce;Vm.prototype.set=gce;R4.exports=Vm});var k4=_e((wWe,O4)=>{"use strict";var yce=xv(),_ce=wS(),vce=xS(),bce=200;function wce(e,n){var t=this.__data__;if(t instanceof yce){var i=t.__data__;if(!_ce||i.length<bce-1)return i.push([e,n]),this.size=++t.size,this;t=this.__data__=new vce(i)}return t.set(e,n),this.size=t.size,this}O4.exports=wce});var SS=_e((xWe,N4)=>{"use strict";var xce=xv(),Sce=E5(),Cce=D5(),Ece=A5(),Ice=P5(),Dce=k4();function jm(e){var n=this.__data__=new xce(e);this.size=n.size}jm.prototype.clear=Sce;jm.prototype.delete=Cce;jm.prototype.get=Ece;jm.prototype.has=Ice;jm.prototype.set=Dce;N4.exports=jm});var L4=_e((SWe,F4)=>{"use strict";var Tce="__lodash_hash_undefined__";function Ace(e){return this.__data__.set(e,Tce),this}F4.exports=Ace});var U4=_e((CWe,B4)=>{"use strict";function Mce(e){return this.__data__.has(e)}B4.exports=Mce});var V4=_e((EWe,z4)=>{"use strict";var Pce=xS(),Rce=L4(),Oce=U4();function CS(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new Pce;++n<t;)this.add(e[n])}CS.prototype.add=CS.prototype.push=Rce;CS.prototype.has=Oce;z4.exports=CS});var H4=_e((IWe,j4)=>{"use strict";function kce(e,n){for(var t=-1,i=e==null?0:e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}j4.exports=kce});var G4=_e((DWe,$4)=>{"use strict";function Nce(e,n){return e.has(n)}$4.exports=Nce});var fP=_e((TWe,q4)=>{"use strict";var Fce=V4(),Lce=H4(),Bce=G4(),Uce=1,zce=2;function Vce(e,n,t,i,r,o){var d=t&Uce,g=e.length,v=n.length;if(g!=v&&!(d&&v>g))return!1;var x=o.get(e),D=o.get(n);if(x&&D)return x==n&&D==e;var R=-1,L=!0,j=t&zce?new Fce:void 0;for(o.set(e,n),o.set(n,e);++R<g;){var J=e[R],re=n[R];if(i)var be=d?i(re,J,R,n,e,o):i(J,re,R,e,n,o);if(be!==void 0){if(be)continue;L=!1;break}if(j){if(!Lce(n,function(xe,Pe){if(!Bce(j,Pe)&&(J===xe||r(J,xe,t,i,o)))return j.push(Pe)})){L=!1;break}}else if(!(J===re||r(J,re,t,i,o))){L=!1;break}}return o.delete(e),o.delete(n),L}q4.exports=Vce});var mP=_e((AWe,W4)=>{"use strict";var jce=Ga(),Hce=jce.Uint8Array;W4.exports=Hce});var K4=_e((MWe,Z4)=>{"use strict";function $ce(e){var n=-1,t=Array(e.size);return e.forEach(function(i,r){t[++n]=[r,i]}),t}Z4.exports=$ce});var J4=_e((PWe,Y4)=>{"use strict";function Gce(e){var n=-1,t=Array(e.size);return e.forEach(function(i){t[++n]=i}),t}Y4.exports=Gce});var n6=_e((RWe,t6)=>{"use strict";var X4=Sv(),Q4=mP(),qce=Bm(),Wce=fP(),Zce=K4(),Kce=J4(),Yce=1,Jce=2,Xce="[object Boolean]",Qce="[object Date]",eue="[object Error]",tue="[object Map]",nue="[object Number]",iue="[object RegExp]",rue="[object Set]",oue="[object String]",sue="[object Symbol]",aue="[object ArrayBuffer]",lue="[object DataView]",e6=X4?X4.prototype:void 0,gP=e6?e6.valueOf:void 0;function cue(e,n,t,i,r,o,d){switch(t){case lue:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case aue:return!(e.byteLength!=n.byteLength||!o(new Q4(e),new Q4(n)));case Xce:case Qce:case nue:return qce(+e,+n);case eue:return e.name==n.name&&e.message==n.message;case iue:case oue:return e==n+"";case tue:var g=Zce;case rue:var v=i&Yce;if(g||(g=Kce),e.size!=n.size&&!v)return!1;var x=d.get(e);if(x)return x==n;i|=Jce,d.set(e,n);var D=Wce(g(e),g(n),i,r,o,d);return d.delete(e),D;case sue:if(gP)return gP.call(e)==gP.call(n)}return!1}t6.exports=cue});var yP=_e((OWe,i6)=>{"use strict";function uue(e,n){for(var t=-1,i=n.length,r=e.length;++t<i;)e[r+t]=n[t];return e}i6.exports=uue});var Ul=_e((kWe,r6)=>{"use strict";var due=Array.isArray;r6.exports=due});var _P=_e((NWe,o6)=>{"use strict";var hue=yP(),pue=Ul();function fue(e,n,t){var i=n(e);return pue(e)?i:hue(i,t(e))}o6.exports=fue});var a6=_e((FWe,s6)=>{"use strict";function mue(e,n){for(var t=-1,i=e==null?0:e.length,r=0,o=[];++t<i;){var d=e[t];n(d,t,e)&&(o[r++]=d)}return o}s6.exports=mue});var vP=_e((LWe,l6)=>{"use strict";function gue(){return[]}l6.exports=gue});var bP=_e((BWe,u6)=>{"use strict";var yue=a6(),_ue=vP(),vue=Object.prototype,bue=vue.propertyIsEnumerable,c6=Object.getOwnPropertySymbols,wue=c6?function(e){return e==null?[]:(e=Object(e),yue(c6(e),function(n){return bue.call(e,n)}))}:_ue;u6.exports=wue});var h6=_e((UWe,d6)=>{"use strict";function xue(e,n){for(var t=-1,i=Array(e);++t<e;)i[t]=n(t);return i}d6.exports=xue});var sd=_e((zWe,p6)=>{"use strict";function Sue(e){return e!=null&&typeof e=="object"}p6.exports=Sue});var m6=_e((VWe,f6)=>{"use strict";var Cue=jh(),Eue=sd(),Iue="[object Arguments]";function Due(e){return Eue(e)&&Cue(e)==Iue}f6.exports=Due});var ES=_e((jWe,_6)=>{"use strict";var g6=m6(),Tue=sd(),y6=Object.prototype,Aue=y6.hasOwnProperty,Mue=y6.propertyIsEnumerable,Pue=g6(function(){return arguments}())?g6:function(e){return Tue(e)&&Aue.call(e,"callee")&&!Mue.call(e,"callee")};_6.exports=Pue});var b6=_e((HWe,v6)=>{"use strict";function Rue(){return!1}v6.exports=Rue});var IS=_e((Dv,Hm)=>{"use strict";var Oue=Ga(),kue=b6(),S6=typeof Dv=="object"&&Dv&&!Dv.nodeType&&Dv,w6=S6&&typeof Hm=="object"&&Hm&&!Hm.nodeType&&Hm,Nue=w6&&w6.exports===S6,x6=Nue?Oue.Buffer:void 0,Fue=x6?x6.isBuffer:void 0,Lue=Fue||kue;Hm.exports=Lue});var Tv=_e(($We,C6)=>{"use strict";var Bue=9007199254740991,Uue=/^(?:0|[1-9]\d*)$/;function zue(e,n){var t=typeof e;return n=n??Bue,!!n&&(t=="number"||t!="symbol"&&Uue.test(e))&&e>-1&&e%1==0&&e<n}C6.exports=zue});var DS=_e((GWe,E6)=>{"use strict";var Vue=9007199254740991;function jue(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vue}E6.exports=jue});var D6=_e((qWe,I6)=>{"use strict";var Hue=jh(),$ue=DS(),Gue=sd(),que="[object Arguments]",Wue="[object Array]",Zue="[object Boolean]",Kue="[object Date]",Yue="[object Error]",Jue="[object Function]",Xue="[object Map]",Que="[object Number]",ede="[object Object]",tde="[object RegExp]",nde="[object Set]",ide="[object String]",rde="[object WeakMap]",ode="[object ArrayBuffer]",sde="[object DataView]",ade="[object Float32Array]",lde="[object Float64Array]",cde="[object Int8Array]",ude="[object Int16Array]",dde="[object Int32Array]",hde="[object Uint8Array]",pde="[object Uint8ClampedArray]",fde="[object Uint16Array]",mde="[object Uint32Array]",Oi={};Oi[ade]=Oi[lde]=Oi[cde]=Oi[ude]=Oi[dde]=Oi[hde]=Oi[pde]=Oi[fde]=Oi[mde]=!0;Oi[que]=Oi[Wue]=Oi[ode]=Oi[Zue]=Oi[sde]=Oi[Kue]=Oi[Yue]=Oi[Jue]=Oi[Xue]=Oi[Que]=Oi[ede]=Oi[tde]=Oi[nde]=Oi[ide]=Oi[rde]=!1;function gde(e){return Gue(e)&&$ue(e.length)&&!!Oi[Hue(e)]}I6.exports=gde});var A6=_e((WWe,T6)=>{"use strict";function yde(e){return function(n){return e(n)}}T6.exports=yde});var P6=_e((Av,$m)=>{"use strict";var _de=dP(),M6=typeof Av=="object"&&Av&&!Av.nodeType&&Av,Mv=M6&&typeof $m=="object"&&$m&&!$m.nodeType&&$m,vde=Mv&&Mv.exports===M6,wP=vde&&_de.process,bde=function(){try{var e=Mv&&Mv.require&&Mv.require("util").types;return e||wP&&wP.binding&&wP.binding("util")}catch{}}();$m.exports=bde});var TS=_e((ZWe,k6)=>{"use strict";var wde=D6(),xde=A6(),R6=P6(),O6=R6&&R6.isTypedArray,Sde=O6?xde(O6):wde;k6.exports=Sde});var xP=_e((KWe,N6)=>{"use strict";var Cde=h6(),Ede=ES(),Ide=Ul(),Dde=IS(),Tde=Tv(),Ade=TS(),Mde=Object.prototype,Pde=Mde.hasOwnProperty;function Rde(e,n){var t=Ide(e),i=!t&&Ede(e),r=!t&&!i&&Dde(e),o=!t&&!i&&!r&&Ade(e),d=t||i||r||o,g=d?Cde(e.length,String):[],v=g.length;for(var x in e)(n||Pde.call(e,x))&&!(d&&(x=="length"||r&&(x=="offset"||x=="parent")||o&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||Tde(x,v)))&&g.push(x);return g}N6.exports=Rde});var AS=_e((YWe,F6)=>{"use strict";var Ode=Object.prototype;function kde(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||Ode;return e===t}F6.exports=kde});var SP=_e((JWe,L6)=>{"use strict";function Nde(e,n){return function(t){return e(n(t))}}L6.exports=Nde});var U6=_e((XWe,B6)=>{"use strict";var Fde=SP(),Lde=Fde(Object.keys,Object);B6.exports=Lde});var V6=_e((QWe,z6)=>{"use strict";var Bde=AS(),Ude=U6(),zde=Object.prototype,Vde=zde.hasOwnProperty;function jde(e){if(!Bde(e))return Ude(e);var n=[];for(var t in Object(e))Vde.call(e,t)&&t!="constructor"&&n.push(t);return n}z6.exports=jde});var Pv=_e((e7e,j6)=>{"use strict";var Hde=bS(),$de=DS();function Gde(e){return e!=null&&$de(e.length)&&!Hde(e)}j6.exports=Gde});var CP=_e((t7e,H6)=>{"use strict";var qde=xP(),Wde=V6(),Zde=Pv();function Kde(e){return Zde(e)?qde(e):Wde(e)}H6.exports=Kde});var G6=_e((n7e,$6)=>{"use strict";var Yde=_P(),Jde=bP(),Xde=CP();function Qde(e){return Yde(e,Xde,Jde)}$6.exports=Qde});var Z6=_e((i7e,W6)=>{"use strict";var q6=G6(),ehe=1,the=Object.prototype,nhe=the.hasOwnProperty;function ihe(e,n,t,i,r,o){var d=t&ehe,g=q6(e),v=g.length,x=q6(n),D=x.length;if(v!=D&&!d)return!1;for(var R=v;R--;){var L=g[R];if(!(d?L in n:nhe.call(n,L)))return!1}var j=o.get(e),J=o.get(n);if(j&&J)return j==n&&J==e;var re=!0;o.set(e,n),o.set(n,e);for(var be=d;++R<v;){L=g[R];var xe=e[L],Pe=n[L];if(i)var Ne=d?i(Pe,xe,L,n,e,o):i(xe,Pe,L,e,n,o);if(!(Ne===void 0?xe===Pe||r(xe,Pe,t,i,o):Ne)){re=!1;break}be||(be=L=="constructor")}if(re&&!be){var Ve=e.constructor,We=n.constructor;Ve!=We&&"constructor"in e&&"constructor"in n&&!(typeof Ve=="function"&&Ve instanceof Ve&&typeof We=="function"&&We instanceof We)&&(re=!1)}return o.delete(e),o.delete(n),re}W6.exports=ihe});var Y6=_e((r7e,K6)=>{"use strict";var rhe=od(),ohe=Ga(),she=rhe(ohe,"DataView");K6.exports=she});var X6=_e((o7e,J6)=>{"use strict";var ahe=od(),lhe=Ga(),che=ahe(lhe,"Promise");J6.exports=che});var e8=_e((s7e,Q6)=>{"use strict";var uhe=od(),dhe=Ga(),hhe=uhe(dhe,"Set");Q6.exports=hhe});var n8=_e((a7e,t8)=>{"use strict";var phe=od(),fhe=Ga(),mhe=phe(fhe,"WeakMap");t8.exports=mhe});var u8=_e((l7e,c8)=>{"use strict";var EP=Y6(),IP=wS(),DP=X6(),TP=e8(),AP=n8(),l8=jh(),Gm=pP(),i8="[object Map]",ghe="[object Object]",r8="[object Promise]",o8="[object Set]",s8="[object WeakMap]",a8="[object DataView]",yhe=Gm(EP),_he=Gm(IP),vhe=Gm(DP),bhe=Gm(TP),whe=Gm(AP),Hh=l8;(EP&&Hh(new EP(new ArrayBuffer(1)))!=a8||IP&&Hh(new IP)!=i8||DP&&Hh(DP.resolve())!=r8||TP&&Hh(new TP)!=o8||AP&&Hh(new AP)!=s8)&&(Hh=function(e){var n=l8(e),t=n==ghe?e.constructor:void 0,i=t?Gm(t):"";if(i)switch(i){case yhe:return a8;case _he:return i8;case vhe:return r8;case bhe:return o8;case whe:return s8}return n});c8.exports=Hh});var _8=_e((c7e,y8)=>{"use strict";var MP=SS(),xhe=fP(),She=n6(),Che=Z6(),d8=u8(),h8=Ul(),p8=IS(),Ehe=TS(),Ihe=1,f8="[object Arguments]",m8="[object Array]",MS="[object Object]",Dhe=Object.prototype,g8=Dhe.hasOwnProperty;function The(e,n,t,i,r,o){var d=h8(e),g=h8(n),v=d?m8:d8(e),x=g?m8:d8(n);v=v==f8?MS:v,x=x==f8?MS:x;var D=v==MS,R=x==MS,L=v==x;if(L&&p8(e)){if(!p8(n))return!1;d=!0,D=!1}if(L&&!D)return o||(o=new MP),d||Ehe(e)?xhe(e,n,t,i,r,o):She(e,n,v,t,i,r,o);if(!(t&Ihe)){var j=D&&g8.call(e,"__wrapped__"),J=R&&g8.call(n,"__wrapped__");if(j||J){var re=j?e.value():e,be=J?n.value():n;return o||(o=new MP),r(re,be,t,i,o)}}return L?(o||(o=new MP),Che(e,n,t,i,r,o)):!1}y8.exports=The});var PP=_e((u7e,w8)=>{"use strict";var Ahe=_8(),v8=sd();function b8(e,n,t,i,r){return e===n?!0:e==null||n==null||!v8(e)&&!v8(n)?e!==e&&n!==n:Ahe(e,n,t,i,b8,r)}w8.exports=b8});var S8=_e((d7e,x8)=>{"use strict";var Mhe=SS(),Phe=PP(),Rhe=1,Ohe=2;function khe(e,n,t,i){var r=t.length,o=r,d=!i;if(e==null)return!o;for(e=Object(e);r--;){var g=t[r];if(d&&g[2]?g[1]!==e[g[0]]:!(g[0]in e))return!1}for(;++r<o;){g=t[r];var v=g[0],x=e[v],D=g[1];if(d&&g[2]){if(x===void 0&&!(v in e))return!1}else{var R=new Mhe;if(i)var L=i(x,D,v,e,n,R);if(!(L===void 0?Phe(D,x,Rhe|Ohe,i,R):L))return!1}}return!0}x8.exports=khe});var RP=_e((h7e,C8)=>{"use strict";var Nhe=Bl();function Fhe(e){return e===e&&!Nhe(e)}C8.exports=Fhe});var I8=_e((p7e,E8)=>{"use strict";var Lhe=RP(),Bhe=CP();function Uhe(e){for(var n=Bhe(e),t=n.length;t--;){var i=n[t],r=e[i];n[t]=[i,r,Lhe(r)]}return n}E8.exports=Uhe});var OP=_e((f7e,D8)=>{"use strict";function zhe(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==void 0||e in Object(t))}}D8.exports=zhe});var A8=_e((m7e,T8)=>{"use strict";var Vhe=S8(),jhe=I8(),Hhe=OP();function $he(e){var n=jhe(e);return n.length==1&&n[0][2]?Hhe(n[0][0],n[0][1]):function(t){return t===e||Vhe(t,e,n)}}T8.exports=$he});var PS=_e((g7e,M8)=>{"use strict";var Ghe=jh(),qhe=sd(),Whe="[object Symbol]";function Zhe(e){return typeof e=="symbol"||qhe(e)&&Ghe(e)==Whe}M8.exports=Zhe});var RS=_e((y7e,P8)=>{"use strict";var Khe=Ul(),Yhe=PS(),Jhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xhe=/^\w*$/;function Qhe(e,n){if(Khe(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Yhe(e)?!0:Xhe.test(e)||!Jhe.test(e)||n!=null&&e in Object(n)}P8.exports=Qhe});var k8=_e((_7e,O8)=>{"use strict";var R8=xS(),epe="Expected a function";function kP(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(epe);var t=function(){var i=arguments,r=n?n.apply(this,i):i[0],o=t.cache;if(o.has(r))return o.get(r);var d=e.apply(this,i);return t.cache=o.set(r,d)||o,d};return t.cache=new(kP.Cache||R8),t}kP.Cache=R8;O8.exports=kP});var F8=_e((v7e,N8)=>{"use strict";var tpe=k8(),npe=500;function ipe(e){var n=tpe(e,function(i){return t.size===npe&&t.clear(),i}),t=n.cache;return n}N8.exports=ipe});var B8=_e((b7e,L8)=>{"use strict";var rpe=F8(),ope=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,spe=/\\(\\)?/g,ape=rpe(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(ope,function(t,i,r,o){n.push(r?o.replace(spe,"$1"):i||t)}),n});L8.exports=ape});var $8=_e((w7e,H8)=>{"use strict";var U8=Sv(),lpe=uP(),cpe=Ul(),upe=PS(),dpe=1/0,z8=U8?U8.prototype:void 0,V8=z8?z8.toString:void 0;function j8(e){if(typeof e=="string")return e;if(cpe(e))return lpe(e,j8)+"";if(upe(e))return V8?V8.call(e):"";var n=e+"";return n=="0"&&1/e==-dpe?"-0":n}H8.exports=j8});var q8=_e((x7e,G8)=>{"use strict";var hpe=$8();function ppe(e){return e==null?"":hpe(e)}G8.exports=ppe});var Rv=_e((S7e,W8)=>{"use strict";var fpe=Ul(),mpe=RS(),gpe=B8(),ype=q8();function _pe(e,n){return fpe(e)?e:mpe(e,n)?[e]:gpe(ype(e))}W8.exports=_pe});var qm=_e((C7e,Z8)=>{"use strict";var vpe=PS(),bpe=1/0;function wpe(e){if(typeof e=="string"||vpe(e))return e;var n=e+"";return n=="0"&&1/e==-bpe?"-0":n}Z8.exports=wpe});var OS=_e((E7e,K8)=>{"use strict";var xpe=Rv(),Spe=qm();function Cpe(e,n){n=xpe(n,e);for(var t=0,i=n.length;e!=null&&t<i;)e=e[Spe(n[t++])];return t&&t==i?e:void 0}K8.exports=Cpe});var J8=_e((I7e,Y8)=>{"use strict";var Epe=OS();function Ipe(e,n,t){var i=e==null?void 0:Epe(e,n);return i===void 0?t:i}Y8.exports=Ipe});var Q8=_e((D7e,X8)=>{"use strict";function Dpe(e,n){return e!=null&&n in Object(e)}X8.exports=Dpe});var tH=_e((T7e,eH)=>{"use strict";var Tpe=Rv(),Ape=ES(),Mpe=Ul(),Ppe=Tv(),Rpe=DS(),Ope=qm();function kpe(e,n,t){n=Tpe(n,e);for(var i=-1,r=n.length,o=!1;++i<r;){var d=Ope(n[i]);if(!(o=e!=null&&t(e,d)))break;e=e[d]}return o||++i!=r?o:(r=e==null?0:e.length,!!r&&Rpe(r)&&Ppe(d,r)&&(Mpe(e)||Ape(e)))}eH.exports=kpe});var iH=_e((A7e,nH)=>{"use strict";var Npe=Q8(),Fpe=tH();function Lpe(e,n){return e!=null&&Fpe(e,n,Npe)}nH.exports=Lpe});var oH=_e((M7e,rH)=>{"use strict";var Bpe=PP(),Upe=J8(),zpe=iH(),Vpe=RS(),jpe=RP(),Hpe=OP(),$pe=qm(),Gpe=1,qpe=2;function Wpe(e,n){return Vpe(e)&&jpe(n)?Hpe($pe(e),n):function(t){var i=Upe(t,e);return i===void 0&&i===n?zpe(t,e):Bpe(n,i,Gpe|qpe)}}rH.exports=Wpe});var kS=_e((P7e,sH)=>{"use strict";function Zpe(e){return e}sH.exports=Zpe});var lH=_e((R7e,aH)=>{"use strict";function Kpe(e){return function(n){return n?.[e]}}aH.exports=Kpe});var uH=_e((O7e,cH)=>{"use strict";var Ype=OS();function Jpe(e){return function(n){return Ype(n,e)}}cH.exports=Jpe});var hH=_e((k7e,dH)=>{"use strict";var Xpe=lH(),Qpe=uH(),efe=RS(),tfe=qm();function nfe(e){return efe(e)?Xpe(tfe(e)):Qpe(e)}dH.exports=nfe});var fH=_e((N7e,pH)=>{"use strict";var ife=A8(),rfe=oH(),ofe=kS(),sfe=Ul(),afe=hH();function lfe(e){return typeof e=="function"?e:e==null?ofe:typeof e=="object"?sfe(e)?rfe(e[0],e[1]):ife(e):afe(e)}pH.exports=lfe});var NP=_e((F7e,mH)=>{"use strict";var cfe=od(),ufe=function(){try{var e=cfe(Object,"defineProperty");return e({},"",{}),e}catch{}}();mH.exports=ufe});var NS=_e((L7e,yH)=>{"use strict";var gH=NP();function dfe(e,n,t){n=="__proto__"&&gH?gH(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}yH.exports=dfe});var FP=_e((B7e,_H)=>{"use strict";var hfe=NS(),pfe=Bm(),ffe=Object.prototype,mfe=ffe.hasOwnProperty;function gfe(e,n,t){var i=e[n];(!(mfe.call(e,n)&&pfe(i,t))||t===void 0&&!(n in e))&&hfe(e,n,t)}_H.exports=gfe});var wH=_e((U7e,bH)=>{"use strict";var yfe=FP(),_fe=Rv(),vfe=Tv(),vH=Bl(),bfe=qm();function wfe(e,n,t,i){if(!vH(e))return e;n=_fe(n,e);for(var r=-1,o=n.length,d=o-1,g=e;g!=null&&++r<o;){var v=bfe(n[r]),x=t;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(r!=d){var D=g[v];x=i?i(D,v,g):void 0,x===void 0&&(x=vH(D)?D:vfe(n[r+1])?[]:{})}yfe(g,v,x),g=g[v]}return e}bH.exports=wfe});var SH=_e((z7e,xH)=>{"use strict";var xfe=OS(),Sfe=wH(),Cfe=Rv();function Efe(e,n,t){for(var i=-1,r=n.length,o={};++i<r;){var d=n[i],g=xfe(e,d);t(g,d)&&Sfe(o,Cfe(d,e),g)}return o}xH.exports=Efe});var FS=_e((V7e,CH)=>{"use strict";var Ife=SP(),Dfe=Ife(Object.getPrototypeOf,Object);CH.exports=Dfe});var IH=_e((j7e,EH)=>{"use strict";var Tfe=yP(),Afe=FS(),Mfe=bP(),Pfe=vP(),Rfe=Object.getOwnPropertySymbols,Ofe=Rfe?function(e){for(var n=[];e;)Tfe(n,Mfe(e)),e=Afe(e);return n}:Pfe;EH.exports=Ofe});var TH=_e((H7e,DH)=>{"use strict";function kfe(e){var n=[];if(e!=null)for(var t in Object(e))n.push(t);return n}DH.exports=kfe});var MH=_e(($7e,AH)=>{"use strict";var Nfe=Bl(),Ffe=AS(),Lfe=TH(),Bfe=Object.prototype,Ufe=Bfe.hasOwnProperty;function zfe(e){if(!Nfe(e))return Lfe(e);var n=Ffe(e),t=[];for(var i in e)i=="constructor"&&(n||!Ufe.call(e,i))||t.push(i);return t}AH.exports=zfe});var LS=_e((G7e,PH)=>{"use strict";var Vfe=xP(),jfe=MH(),Hfe=Pv();function $fe(e){return Hfe(e)?Vfe(e,!0):jfe(e)}PH.exports=$fe});var OH=_e((q7e,RH)=>{"use strict";var Gfe=_P(),qfe=IH(),Wfe=LS();function Zfe(e){return Gfe(e,Wfe,qfe)}RH.exports=Zfe});var NH=_e((W7e,kH)=>{"use strict";var Kfe=uP(),Yfe=fH(),Jfe=SH(),Xfe=OH();function Qfe(e,n){if(e==null)return{};var t=Kfe(Xfe(e),function(i){return[i]});return n=Yfe(n),Jfe(e,t,function(i,r){return n(i,r[0])})}kH.exports=Qfe});var LP=_e((iZe,zH)=>{"use strict";var tge=NS(),nge=Bm();function ige(e,n,t){(t!==void 0&&!nge(e[n],t)||t===void 0&&!(n in e))&&tge(e,n,t)}zH.exports=ige});var jH=_e((rZe,VH)=>{"use strict";function rge(e){return function(n,t,i){for(var r=-1,o=Object(n),d=i(n),g=d.length;g--;){var v=d[e?g:++r];if(t(o[v],v,o)===!1)break}return n}}VH.exports=rge});var $H=_e((oZe,HH)=>{"use strict";var oge=jH(),sge=oge();HH.exports=sge});var KH=_e((kv,Wm)=>{"use strict";var age=Ga(),ZH=typeof kv=="object"&&kv&&!kv.nodeType&&kv,GH=ZH&&typeof Wm=="object"&&Wm&&!Wm.nodeType&&Wm,lge=GH&&GH.exports===ZH,qH=lge?age.Buffer:void 0,WH=qH?qH.allocUnsafe:void 0;function cge(e,n){if(n)return e.slice();var t=e.length,i=WH?WH(t):new e.constructor(t);return e.copy(i),i}Wm.exports=cge});var XH=_e((sZe,JH)=>{"use strict";var YH=mP();function uge(e){var n=new e.constructor(e.byteLength);return new YH(n).set(new YH(e)),n}JH.exports=uge});var e$=_e((aZe,QH)=>{"use strict";var dge=XH();function hge(e,n){var t=n?dge(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}QH.exports=hge});var n$=_e((lZe,t$)=>{"use strict";function pge(e,n){var t=-1,i=e.length;for(n||(n=Array(i));++t<i;)n[t]=e[t];return n}t$.exports=pge});var o$=_e((cZe,r$)=>{"use strict";var fge=Bl(),i$=Object.create,mge=function(){function e(){}return function(n){if(!fge(n))return{};if(i$)return i$(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();r$.exports=mge});var a$=_e((uZe,s$)=>{"use strict";var gge=o$(),yge=FS(),_ge=AS();function vge(e){return typeof e.constructor=="function"&&!_ge(e)?gge(yge(e)):{}}s$.exports=vge});var c$=_e((dZe,l$)=>{"use strict";var bge=Pv(),wge=sd();function xge(e){return wge(e)&&bge(e)}l$.exports=xge});var h$=_e((hZe,d$)=>{"use strict";var Sge=jh(),Cge=FS(),Ege=sd(),Ige="[object Object]",Dge=Function.prototype,Tge=Object.prototype,u$=Dge.toString,Age=Tge.hasOwnProperty,Mge=u$.call(Object);function Pge(e){if(!Ege(e)||Sge(e)!=Ige)return!1;var n=Cge(e);if(n===null)return!0;var t=Age.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&u$.call(t)==Mge}d$.exports=Pge});var BP=_e((pZe,p$)=>{"use strict";function Rge(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}p$.exports=Rge});var m$=_e((fZe,f$)=>{"use strict";var Oge=FP(),kge=NS();function Nge(e,n,t,i){var r=!t;t||(t={});for(var o=-1,d=n.length;++o<d;){var g=n[o],v=i?i(t[g],e[g],g,t,e):void 0;v===void 0&&(v=e[g]),r?kge(t,g,v):Oge(t,g,v)}return t}f$.exports=Nge});var y$=_e((mZe,g$)=>{"use strict";var Fge=m$(),Lge=LS();function Bge(e){return Fge(e,Lge(e))}g$.exports=Bge});var S$=_e((gZe,x$)=>{"use strict";var _$=LP(),Uge=KH(),zge=e$(),Vge=n$(),jge=a$(),v$=ES(),b$=Ul(),Hge=c$(),$ge=IS(),Gge=bS(),qge=Bl(),Wge=h$(),Zge=TS(),w$=BP(),Kge=y$();function Yge(e,n,t,i,r,o,d){var g=w$(e,t),v=w$(n,t),x=d.get(v);if(x){_$(e,t,x);return}var D=o?o(g,v,t+"",e,n,d):void 0,R=D===void 0;if(R){var L=b$(v),j=!L&&$ge(v),J=!L&&!j&&Zge(v);D=v,L||j||J?b$(g)?D=g:Hge(g)?D=Vge(g):j?(R=!1,D=Uge(v,!0)):J?(R=!1,D=zge(v,!0)):D=[]:Wge(v)||v$(v)?(D=g,v$(g)?D=Kge(g):(!qge(g)||Gge(g))&&(D=jge(v))):R=!1}R&&(d.set(v,D),r(D,v,i,o,d),d.delete(v)),_$(e,t,D)}x$.exports=Yge});var I$=_e((yZe,E$)=>{"use strict";var Jge=SS(),Xge=LP(),Qge=$H(),eye=S$(),tye=Bl(),nye=LS(),iye=BP();function C$(e,n,t,i,r){e!==n&&Qge(n,function(o,d){if(r||(r=new Jge),tye(o))eye(e,n,d,t,C$,i,r);else{var g=i?i(iye(e,d),o,d+"",e,n,r):void 0;g===void 0&&(g=o),Xge(e,d,g)}},nye)}E$.exports=C$});var T$=_e((_Ze,D$)=>{"use strict";function rye(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}D$.exports=rye});var P$=_e((vZe,M$)=>{"use strict";var oye=T$(),A$=Math.max;function sye(e,n,t){return n=A$(n===void 0?e.length-1:n,0),function(){for(var i=arguments,r=-1,o=A$(i.length-n,0),d=Array(o);++r<o;)d[r]=i[n+r];r=-1;for(var g=Array(n+1);++r<n;)g[r]=i[r];return g[n]=t(d),oye(e,this,g)}}M$.exports=sye});var O$=_e((bZe,R$)=>{"use strict";function aye(e){return function(){return e}}R$.exports=aye});var F$=_e((wZe,N$)=>{"use strict";var lye=O$(),k$=NP(),cye=kS(),uye=k$?function(e,n){return k$(e,"toString",{configurable:!0,enumerable:!1,value:lye(n),writable:!0})}:cye;N$.exports=uye});var B$=_e((xZe,L$)=>{"use strict";var dye=800,hye=16,pye=Date.now;function fye(e){var n=0,t=0;return function(){var i=pye(),r=hye-(i-t);if(t=i,r>0){if(++n>=dye)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}L$.exports=fye});var z$=_e((SZe,U$)=>{"use strict";var mye=F$(),gye=B$(),yye=gye(mye);U$.exports=yye});var j$=_e((CZe,V$)=>{"use strict";var _ye=kS(),vye=P$(),bye=z$();function wye(e,n){return bye(vye(e,n,_ye),e+"")}V$.exports=wye});var $$=_e((EZe,H$)=>{"use strict";var xye=Bm(),Sye=Pv(),Cye=Tv(),Eye=Bl();function Iye(e,n,t){if(!Eye(t))return!1;var i=typeof n;return(i=="number"?Sye(t)&&Cye(n,t.length):i=="string"&&n in t)?xye(t[n],e):!1}H$.exports=Iye});var q$=_e((IZe,G$)=>{"use strict";var Dye=j$(),Tye=$$();function Aye(e){return Dye(function(n,t){var i=-1,r=t.length,o=r>1?t[r-1]:void 0,d=r>2?t[2]:void 0;for(o=e.length>3&&typeof o=="function"?(r--,o):void 0,d&&Tye(t[0],t[1],d)&&(o=r<3?void 0:o,r=1),n=Object(n);++i<r;){var g=t[i];g&&e(n,g,i,o)}return n})}G$.exports=Aye});var Z$=_e((DZe,W$)=>{"use strict";var Mye=I$(),Pye=q$(),Rye=Pye(function(e,n,t){Mye(e,n,t)});W$.exports=Rye});var nG=_e((hYe,tG)=>{"use strict";tG.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var cd=_e($h=>{"use strict";var jP,Gye=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];$h.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17};$h.getSymbolTotalCodewords=function(n){return Gye[n]};$h.getBCHDigit=function(e){let n=0;for(;e!==0;)n++,e>>>=1;return n};$h.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');jP=n};$h.isKanjiModeEnabled=function(){return typeof jP<"u"};$h.toSJIS=function(n){return jP(n)}});var jS=_e(va=>{"use strict";va.L={bit:1};va.M={bit:0};va.Q={bit:3};va.H={bit:2};function qye(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return va.L;case"m":case"medium":return va.M;case"q":case"quartile":return va.Q;case"h":case"high":return va.H;default:throw new Error("Unknown EC Level: "+e)}}va.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4};va.from=function(n,t){if(va.isValid(n))return n;try{return qye(n)}catch{return t}}});var oG=_e((mYe,rG)=>{"use strict";function iG(){this.buffer=[],this.length=0}iG.prototype={get:function(e){let n=Math.floor(e/8);return(this.buffer[n]>>>7-e%8&1)===1},put:function(e,n){for(let t=0;t<n;t++)this.putBit((e>>>n-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),e&&(this.buffer[n]|=128>>>this.length%8),this.length++}};rG.exports=iG});var aG=_e((gYe,sG)=>{"use strict";function Fv(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Fv.prototype.set=function(e,n,t,i){let r=e*this.size+n;this.data[r]=t,i&&(this.reservedBit[r]=!0)};Fv.prototype.get=function(e,n){return this.data[e*this.size+n]};Fv.prototype.xor=function(e,n,t){this.data[e*this.size+n]^=t};Fv.prototype.isReserved=function(e,n){return this.reservedBit[e*this.size+n]};sG.exports=Fv});var lG=_e(HS=>{"use strict";var Wye=cd().getSymbolSize;HS.getRowColCoords=function(n){if(n===1)return[];let t=Math.floor(n/7)+2,i=Wye(n),r=i===145?26:Math.ceil((i-13)/(2*t-2))*2,o=[i-7];for(let d=1;d<t-1;d++)o[d]=o[d-1]-r;return o.push(6),o.reverse()};HS.getPositions=function(n){let t=[],i=HS.getRowColCoords(n),r=i.length;for(let o=0;o<r;o++)for(let d=0;d<r;d++)o===0&&d===0||o===0&&d===r-1||o===r-1&&d===0||t.push([i[o],i[d]]);return t}});var dG=_e(uG=>{"use strict";var Zye=cd().getSymbolSize,cG=7;uG.getPositions=function(n){let t=Zye(n);return[[0,0],[t-cG,0],[0,t-cG]]}});var hG=_e(Di=>{"use strict";Di.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Gh={N1:3,N2:3,N3:40,N4:10};Di.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7};Di.from=function(n){return Di.isValid(n)?parseInt(n,10):void 0};Di.getPenaltyN1=function(n){let t=n.size,i=0,r=0,o=0,d=null,g=null;for(let v=0;v<t;v++){r=o=0,d=g=null;for(let x=0;x<t;x++){let D=n.get(v,x);D===d?r++:(r>=5&&(i+=Gh.N1+(r-5)),d=D,r=1),D=n.get(x,v),D===g?o++:(o>=5&&(i+=Gh.N1+(o-5)),g=D,o=1)}r>=5&&(i+=Gh.N1+(r-5)),o>=5&&(i+=Gh.N1+(o-5))}return i};Di.getPenaltyN2=function(n){let t=n.size,i=0;for(let r=0;r<t-1;r++)for(let o=0;o<t-1;o++){let d=n.get(r,o)+n.get(r,o+1)+n.get(r+1,o)+n.get(r+1,o+1);(d===4||d===0)&&i++}return i*Gh.N2};Di.getPenaltyN3=function(n){let t=n.size,i=0,r=0,o=0;for(let d=0;d<t;d++){r=o=0;for(let g=0;g<t;g++)r=r<<1&2047|n.get(d,g),g>=10&&(r===1488||r===93)&&i++,o=o<<1&2047|n.get(g,d),g>=10&&(o===1488||o===93)&&i++}return i*Gh.N3};Di.getPenaltyN4=function(n){let t=0,i=n.data.length;for(let o=0;o<i;o++)t+=n.data[o];return Math.abs(Math.ceil(t*100/i/5)-10)*Gh.N4};function Kye(e,n,t){switch(e){case Di.Patterns.PATTERN000:return(n+t)%2===0;case Di.Patterns.PATTERN001:return n%2===0;case Di.Patterns.PATTERN010:return t%3===0;case Di.Patterns.PATTERN011:return(n+t)%3===0;case Di.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(t/3))%2===0;case Di.Patterns.PATTERN101:return n*t%2+n*t%3===0;case Di.Patterns.PATTERN110:return(n*t%2+n*t%3)%2===0;case Di.Patterns.PATTERN111:return(n*t%3+(n+t)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}Di.applyMask=function(n,t){let i=t.size;for(let r=0;r<i;r++)for(let o=0;o<i;o++)t.isReserved(o,r)||t.xor(o,r,Kye(n,o,r))};Di.getBestMask=function(n,t){let i=Object.keys(Di.Patterns).length,r=0,o=1/0;for(let d=0;d<i;d++){t(d),Di.applyMask(d,n);let g=Di.getPenaltyN1(n)+Di.getPenaltyN2(n)+Di.getPenaltyN3(n)+Di.getPenaltyN4(n);Di.applyMask(d,n),g<o&&(o=g,r=d)}return r}});var $P=_e(HP=>{"use strict";var ud=jS(),$S=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],GS=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];HP.getBlocksCount=function(n,t){switch(t){case ud.L:return $S[(n-1)*4+0];case ud.M:return $S[(n-1)*4+1];case ud.Q:return $S[(n-1)*4+2];case ud.H:return $S[(n-1)*4+3];default:return}};HP.getTotalCodewordsCount=function(n,t){switch(t){case ud.L:return GS[(n-1)*4+0];case ud.M:return GS[(n-1)*4+1];case ud.Q:return GS[(n-1)*4+2];case ud.H:return GS[(n-1)*4+3];default:return}}});var pG=_e(WS=>{"use strict";var Lv=new Uint8Array(512),qS=new Uint8Array(256);(function(){let n=1;for(let t=0;t<255;t++)Lv[t]=n,qS[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)Lv[t]=Lv[t-255]})();WS.log=function(n){if(n<1)throw new Error("log("+n+")");return qS[n]};WS.exp=function(n){return Lv[n]};WS.mul=function(n,t){return n===0||t===0?0:Lv[qS[n]+qS[t]]}});var fG=_e(Bv=>{"use strict";var GP=pG();Bv.mul=function(n,t){let i=new Uint8Array(n.length+t.length-1);for(let r=0;r<n.length;r++)for(let o=0;o<t.length;o++)i[r+o]^=GP.mul(n[r],t[o]);return i};Bv.mod=function(n,t){let i=new Uint8Array(n);for(;i.length-t.length>=0;){let r=i[0];for(let d=0;d<t.length;d++)i[d]^=GP.mul(t[d],r);let o=0;for(;o<i.length&&i[o]===0;)o++;i=i.slice(o)}return i};Bv.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let i=0;i<n;i++)t=Bv.mul(t,new Uint8Array([1,GP.exp(i)]));return t}});var yG=_e((SYe,gG)=>{"use strict";var mG=fG();function qP(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}qP.prototype.initialize=function(n){this.degree=n,this.genPoly=mG.generateECPolynomial(this.degree)};qP.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");let t=new Uint8Array(n.length+this.degree);t.set(n);let i=mG.mod(t,this.genPoly),r=this.degree-i.length;if(r>0){let o=new Uint8Array(this.degree);return o.set(i,r),o}return i};gG.exports=qP});var WP=_e(_G=>{"use strict";_G.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}});var ZP=_e(Pc=>{"use strict";var vG="[0-9]+",Yye="[A-Z $%*+\\-./:]+",Uv="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Uv=Uv.replace(/u/g,"\\u");var Jye="(?:(?![A-Z0-9 $%*+\\-./:]|"+Uv+`)(?:.|[\r
]))+`;Pc.KANJI=new RegExp(Uv,"g");Pc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Pc.BYTE=new RegExp(Jye,"g");Pc.NUMERIC=new RegExp(vG,"g");Pc.ALPHANUMERIC=new RegExp(Yye,"g");var Xye=new RegExp("^"+Uv+"$"),Qye=new RegExp("^"+vG+"$"),e_e=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Pc.testKanji=function(n){return Xye.test(n)};Pc.testNumeric=function(n){return Qye.test(n)};Pc.testAlphanumeric=function(n){return e_e.test(n)}});var dd=_e(fr=>{"use strict";var t_e=WP(),KP=ZP();fr.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};fr.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};fr.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};fr.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};fr.MIXED={bit:-1};fr.getCharCountIndicator=function(n,t){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!t_e.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?n.ccBits[0]:t<27?n.ccBits[1]:n.ccBits[2]};fr.getBestModeForData=function(n){return KP.testNumeric(n)?fr.NUMERIC:KP.testAlphanumeric(n)?fr.ALPHANUMERIC:KP.testKanji(n)?fr.KANJI:fr.BYTE};fr.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")};fr.isValid=function(n){return n&&n.bit&&n.ccBits};function n_e(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return fr.NUMERIC;case"alphanumeric":return fr.ALPHANUMERIC;case"kanji":return fr.KANJI;case"byte":return fr.BYTE;default:throw new Error("Unknown mode: "+e)}}fr.from=function(n,t){if(fr.isValid(n))return n;try{return n_e(n)}catch{return t}}});var CG=_e(qh=>{"use strict";var ZS=cd(),i_e=$P(),bG=jS(),hd=dd(),YP=WP(),xG=7973,wG=ZS.getBCHDigit(xG);function r_e(e,n,t){for(let i=1;i<=40;i++)if(n<=qh.getCapacity(i,t,e))return i}function SG(e,n){return hd.getCharCountIndicator(e,n)+4}function o_e(e,n){let t=0;return e.forEach(function(i){let r=SG(i.mode,n);t+=r+i.getBitsLength()}),t}function s_e(e,n){for(let t=1;t<=40;t++)if(o_e(e,t)<=qh.getCapacity(t,n,hd.MIXED))return t}qh.from=function(n,t){return YP.isValid(n)?parseInt(n,10):t};qh.getCapacity=function(n,t,i){if(!YP.isValid(n))throw new Error("Invalid QR Code version");typeof i>"u"&&(i=hd.BYTE);let r=ZS.getSymbolTotalCodewords(n),o=i_e.getTotalCodewordsCount(n,t),d=(r-o)*8;if(i===hd.MIXED)return d;let g=d-SG(i,n);switch(i){case hd.NUMERIC:return Math.floor(g/10*3);case hd.ALPHANUMERIC:return Math.floor(g/11*2);case hd.KANJI:return Math.floor(g/13);case hd.BYTE:default:return Math.floor(g/8)}};qh.getBestVersionForData=function(n,t){let i,r=bG.from(t,bG.M);if(Array.isArray(n)){if(n.length>1)return s_e(n,r);if(n.length===0)return 1;i=n[0]}else i=n;return r_e(i.mode,i.getLength(),r)};qh.getEncodedBits=function(n){if(!YP.isValid(n)||n<7)throw new Error("Invalid QR Code version");let t=n<<12;for(;ZS.getBCHDigit(t)-wG>=0;)t^=xG<<ZS.getBCHDigit(t)-wG;return n<<12|t}});var TG=_e(DG=>{"use strict";var JP=cd(),IG=1335,a_e=21522,EG=JP.getBCHDigit(IG);DG.getEncodedBits=function(n,t){let i=n.bit<<3|t,r=i<<10;for(;JP.getBCHDigit(r)-EG>=0;)r^=IG<<JP.getBCHDigit(r)-EG;return(i<<10|r)^a_e}});var MG=_e((AYe,AG)=>{"use strict";var l_e=dd();function Zm(e){this.mode=l_e.NUMERIC,this.data=e.toString()}Zm.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)};Zm.prototype.getLength=function(){return this.data.length};Zm.prototype.getBitsLength=function(){return Zm.getBitsLength(this.data.length)};Zm.prototype.write=function(n){let t,i,r;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),r=parseInt(i,10),n.put(r,10);let o=this.data.length-t;o>0&&(i=this.data.substr(t),r=parseInt(i,10),n.put(r,o*3+1))};AG.exports=Zm});var RG=_e((MYe,PG)=>{"use strict";var c_e=dd(),XP=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Km(e){this.mode=c_e.ALPHANUMERIC,this.data=e}Km.getBitsLength=function(n){return 11*Math.floor(n/2)+6*(n%2)};Km.prototype.getLength=function(){return this.data.length};Km.prototype.getBitsLength=function(){return Km.getBitsLength(this.data.length)};Km.prototype.write=function(n){let t;for(t=0;t+2<=this.data.length;t+=2){let i=XP.indexOf(this.data[t])*45;i+=XP.indexOf(this.data[t+1]),n.put(i,11)}this.data.length%2&&n.put(XP.indexOf(this.data[t]),6)};PG.exports=Km});var kG=_e((PYe,OG)=>{"use strict";OG.exports=function(n){for(var t=[],i=n.length,r=0;r<i;r++){var o=n.charCodeAt(r);if(o>=55296&&o<=56319&&i>r+1){var d=n.charCodeAt(r+1);d>=56320&&d<=57343&&(o=(o-55296)*1024+d-56320+65536,r+=1)}if(o<128){t.push(o);continue}if(o<2048){t.push(o>>6|192),t.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){t.push(o>>12|224),t.push(o>>6&63|128),t.push(o&63|128);continue}if(o>=65536&&o<=1114111){t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128);continue}t.push(239,191,189)}return new Uint8Array(t).buffer}});var FG=_e((RYe,NG)=>{"use strict";var u_e=kG(),d_e=dd();function Ym(e){this.mode=d_e.BYTE,this.data=new Uint8Array(u_e(e))}Ym.getBitsLength=function(n){return n*8};Ym.prototype.getLength=function(){return this.data.length};Ym.prototype.getBitsLength=function(){return Ym.getBitsLength(this.data.length)};Ym.prototype.write=function(e){for(let n=0,t=this.data.length;n<t;n++)e.put(this.data[n],8)};NG.exports=Ym});var BG=_e((OYe,LG)=>{"use strict";var h_e=dd(),p_e=cd();function Jm(e){this.mode=h_e.KANJI,this.data=e}Jm.getBitsLength=function(n){return n*13};Jm.prototype.getLength=function(){return this.data.length};Jm.prototype.getBitsLength=function(){return Jm.getBitsLength(this.data.length)};Jm.prototype.write=function(e){let n;for(n=0;n<this.data.length;n++){let t=p_e.toSJIS(this.data[n]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[n]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),e.put(t,13)}};LG.exports=Jm});var UG=_e((kYe,QP)=>{"use strict";var zv={single_source_shortest_paths:function(e,n,t){var i={},r={};r[n]=0;var o=zv.PriorityQueue.make();o.push(n,0);for(var d,g,v,x,D,R,L,j,J;!o.empty();){d=o.pop(),g=d.value,x=d.cost,D=e[g]||{};for(v in D)D.hasOwnProperty(v)&&(R=D[v],L=x+R,j=r[v],J=typeof r[v]>"u",(J||j>L)&&(r[v]=L,o.push(v,L),i[v]=g))}if(typeof t<"u"&&typeof r[t]>"u"){var re=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(re)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var t=[],i=n,r;i;)t.push(i),r=e[i],i=e[i];return t.reverse(),t},find_path:function(e,n,t){var i=zv.single_source_shortest_paths(e,n,t);return zv.extract_shortest_path_from_predecessor_list(i,t)},PriorityQueue:{make:function(e){var n=zv.PriorityQueue,t={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t.queue=[],t.sorter=e.sorter||n.default_sorter,t},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var t={value:e,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof QP<"u"&&(QP.exports=zv)});var WG=_e(Xm=>{"use strict";var si=dd(),jG=MG(),HG=RG(),$G=FG(),GG=BG(),Vv=ZP(),KS=cd(),f_e=UG();function zG(e){return unescape(encodeURIComponent(e)).length}function jv(e,n,t){let i=[],r;for(;(r=e.exec(t))!==null;)i.push({data:r[0],index:r.index,mode:n,length:r[0].length});return i}function qG(e){let n=jv(Vv.NUMERIC,si.NUMERIC,e),t=jv(Vv.ALPHANUMERIC,si.ALPHANUMERIC,e),i,r;return KS.isKanjiModeEnabled()?(i=jv(Vv.BYTE,si.BYTE,e),r=jv(Vv.KANJI,si.KANJI,e)):(i=jv(Vv.BYTE_KANJI,si.BYTE,e),r=[]),n.concat(t,i,r).sort(function(d,g){return d.index-g.index}).map(function(d){return{data:d.data,mode:d.mode,length:d.length}})}function eR(e,n){switch(n){case si.NUMERIC:return jG.getBitsLength(e);case si.ALPHANUMERIC:return HG.getBitsLength(e);case si.KANJI:return GG.getBitsLength(e);case si.BYTE:return $G.getBitsLength(e)}}function m_e(e){return e.reduce(function(n,t){let i=n.length-1>=0?n[n.length-1]:null;return i&&i.mode===t.mode?(n[n.length-1].data+=t.data,n):(n.push(t),n)},[])}function g_e(e){let n=[];for(let t=0;t<e.length;t++){let i=e[t];switch(i.mode){case si.NUMERIC:n.push([i,{data:i.data,mode:si.ALPHANUMERIC,length:i.length},{data:i.data,mode:si.BYTE,length:i.length}]);break;case si.ALPHANUMERIC:n.push([i,{data:i.data,mode:si.BYTE,length:i.length}]);break;case si.KANJI:n.push([i,{data:i.data,mode:si.BYTE,length:zG(i.data)}]);break;case si.BYTE:n.push([{data:i.data,mode:si.BYTE,length:zG(i.data)}])}}return n}function y_e(e,n){let t={},i={start:{}},r=["start"];for(let o=0;o<e.length;o++){let d=e[o],g=[];for(let v=0;v<d.length;v++){let x=d[v],D=""+o+v;g.push(D),t[D]={node:x,lastCount:0},i[D]={};for(let R=0;R<r.length;R++){let L=r[R];t[L]&&t[L].node.mode===x.mode?(i[L][D]=eR(t[L].lastCount+x.length,x.mode)-eR(t[L].lastCount,x.mode),t[L].lastCount+=x.length):(t[L]&&(t[L].lastCount=x.length),i[L][D]=eR(x.length,x.mode)+4+si.getCharCountIndicator(x.mode,n))}}r=g}for(let o=0;o<r.length;o++)i[r[o]].end=0;return{map:i,table:t}}function VG(e,n){let t,i=si.getBestModeForData(e);if(t=si.from(n,i),t!==si.BYTE&&t.bit<i.bit)throw new Error('"'+e+'" cannot be encoded with mode '+si.toString(t)+`.
 Suggested mode is: `+si.toString(i));switch(t===si.KANJI&&!KS.isKanjiModeEnabled()&&(t=si.BYTE),t){case si.NUMERIC:return new jG(e);case si.ALPHANUMERIC:return new HG(e);case si.KANJI:return new GG(e);case si.BYTE:return new $G(e)}}Xm.fromArray=function(n){return n.reduce(function(t,i){return typeof i=="string"?t.push(VG(i,null)):i.data&&t.push(VG(i.data,i.mode)),t},[])};Xm.fromString=function(n,t){let i=qG(n,KS.isKanjiModeEnabled()),r=g_e(i),o=y_e(r,t),d=f_e.find_path(o.map,"start","end"),g=[];for(let v=1;v<d.length-1;v++)g.push(o.table[d[v]].node);return Xm.fromArray(m_e(g))};Xm.rawSplit=function(n){return Xm.fromArray(qG(n,KS.isKanjiModeEnabled()))}});var KG=_e(ZG=>{"use strict";var JS=cd(),tR=jS(),__e=oG(),v_e=aG(),b_e=lG(),w_e=dG(),rR=hG(),oR=$P(),x_e=yG(),YS=CG(),S_e=TG(),C_e=dd(),nR=WG();function E_e(e,n){let t=e.size,i=w_e.getPositions(n);for(let r=0;r<i.length;r++){let o=i[r][0],d=i[r][1];for(let g=-1;g<=7;g++)if(!(o+g<=-1||t<=o+g))for(let v=-1;v<=7;v++)d+v<=-1||t<=d+v||(g>=0&&g<=6&&(v===0||v===6)||v>=0&&v<=6&&(g===0||g===6)||g>=2&&g<=4&&v>=2&&v<=4?e.set(o+g,d+v,!0,!0):e.set(o+g,d+v,!1,!0))}}function I_e(e){let n=e.size;for(let t=8;t<n-8;t++){let i=t%2===0;e.set(t,6,i,!0),e.set(6,t,i,!0)}}function D_e(e,n){let t=b_e.getPositions(n);for(let i=0;i<t.length;i++){let r=t[i][0],o=t[i][1];for(let d=-2;d<=2;d++)for(let g=-2;g<=2;g++)d===-2||d===2||g===-2||g===2||d===0&&g===0?e.set(r+d,o+g,!0,!0):e.set(r+d,o+g,!1,!0)}}function T_e(e,n){let t=e.size,i=YS.getEncodedBits(n),r,o,d;for(let g=0;g<18;g++)r=Math.floor(g/3),o=g%3+t-8-3,d=(i>>g&1)===1,e.set(r,o,d,!0),e.set(o,r,d,!0)}function iR(e,n,t){let i=e.size,r=S_e.getEncodedBits(n,t),o,d;for(o=0;o<15;o++)d=(r>>o&1)===1,o<6?e.set(o,8,d,!0):o<8?e.set(o+1,8,d,!0):e.set(i-15+o,8,d,!0),o<8?e.set(8,i-o-1,d,!0):o<9?e.set(8,15-o-1+1,d,!0):e.set(8,15-o-1,d,!0);e.set(i-8,8,1,!0)}function A_e(e,n){let t=e.size,i=-1,r=t-1,o=7,d=0;for(let g=t-1;g>0;g-=2)for(g===6&&g--;;){for(let v=0;v<2;v++)if(!e.isReserved(r,g-v)){let x=!1;d<n.length&&(x=(n[d]>>>o&1)===1),e.set(r,g-v,x),o--,o===-1&&(d++,o=7)}if(r+=i,r<0||t<=r){r-=i,i=-i;break}}}function M_e(e,n,t){let i=new __e;t.forEach(function(v){i.put(v.mode.bit,4),i.put(v.getLength(),C_e.getCharCountIndicator(v.mode,e)),v.write(i)});let r=JS.getSymbolTotalCodewords(e),o=oR.getTotalCodewordsCount(e,n),d=(r-o)*8;for(i.getLengthInBits()+4<=d&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);let g=(d-i.getLengthInBits())/8;for(let v=0;v<g;v++)i.put(v%2?17:236,8);return P_e(i,e,n)}function P_e(e,n,t){let i=JS.getSymbolTotalCodewords(n),r=oR.getTotalCodewordsCount(n,t),o=i-r,d=oR.getBlocksCount(n,t),g=i%d,v=d-g,x=Math.floor(i/d),D=Math.floor(o/d),R=D+1,L=x-D,j=new x_e(L),J=0,re=new Array(d),be=new Array(d),xe=0,Pe=new Uint8Array(e.buffer);for(let gt=0;gt<d;gt++){let Gt=gt<v?D:R;re[gt]=Pe.slice(J,J+Gt),be[gt]=j.encode(re[gt]),J+=Gt,xe=Math.max(xe,Gt)}let Ne=new Uint8Array(i),Ve=0,We,rt;for(We=0;We<xe;We++)for(rt=0;rt<d;rt++)We<re[rt].length&&(Ne[Ve++]=re[rt][We]);for(We=0;We<L;We++)for(rt=0;rt<d;rt++)Ne[Ve++]=be[rt][We];return Ne}function R_e(e,n,t,i){let r;if(Array.isArray(e))r=nR.fromArray(e);else if(typeof e=="string"){let x=n;if(!x){let D=nR.rawSplit(e);x=YS.getBestVersionForData(D,t)}r=nR.fromString(e,x||40)}else throw new Error("Invalid data");let o=YS.getBestVersionForData(r,t);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!n)n=o;else if(n<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);let d=M_e(n,t,r),g=JS.getSymbolSize(n),v=new v_e(g);return E_e(v,n),I_e(v),D_e(v,n),iR(v,t,0),n>=7&&T_e(v,n),A_e(v,d),isNaN(i)&&(i=rR.getBestMask(v,iR.bind(null,v,t))),rR.applyMask(i,v),iR(v,t,i),{modules:v,version:n,errorCorrectionLevel:t,maskPattern:i,segments:r}}ZG.create=function(n,t){if(typeof n>"u"||n==="")throw new Error("No input text");let i=tR.M,r,o;return typeof t<"u"&&(i=tR.from(t.errorCorrectionLevel,tR.M),r=YS.from(t.version),o=rR.from(t.maskPattern),t.toSJISFunc&&JS.setToSJISFunction(t.toSJISFunc)),R_e(n,r,i,o)}});var sR=_e(Wh=>{"use strict";function YG(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");let t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}Wh.getOptions=function(n){n||(n={}),n.color||(n.color={});let t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,r=n.scale||4;return{width:i,scale:i?4:r,margin:t,color:{dark:YG(n.color.dark||"#000000ff"),light:YG(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}};Wh.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale};Wh.getImageWidth=function(n,t){let i=Wh.getScale(n,t);return Math.floor((n+t.margin*2)*i)};Wh.qrToImageData=function(n,t,i){let r=t.modules.size,o=t.modules.data,d=Wh.getScale(r,i),g=Math.floor((r+i.margin*2)*d),v=i.margin*d,x=[i.color.light,i.color.dark];for(let D=0;D<g;D++)for(let R=0;R<g;R++){let L=(D*g+R)*4,j=i.color.light;if(D>=v&&R>=v&&D<g-v&&R<g-v){let J=Math.floor((D-v)/d),re=Math.floor((R-v)/d);j=x[o[J*r+re]?1:0]}n[L++]=j.r,n[L++]=j.g,n[L++]=j.b,n[L]=j.a}}});var JG=_e(XS=>{"use strict";var aR=sR();function O_e(e,n,t){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=t,n.width=t,n.style.height=t+"px",n.style.width=t+"px"}function k_e(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}XS.render=function(n,t,i){let r=i,o=t;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),t||(o=k_e()),r=aR.getOptions(r);let d=aR.getImageWidth(n.modules.size,r),g=o.getContext("2d"),v=g.createImageData(d,d);return aR.qrToImageData(v.data,n,r),O_e(g,o,d),g.putImageData(v,0,0),o};XS.renderToDataURL=function(n,t,i){let r=i;typeof r>"u"&&(!t||!t.getContext)&&(r=t,t=void 0),r||(r={});let o=XS.render(n,t,r),d=r.type||"image/png",g=r.rendererOpts||{};return o.toDataURL(d,g.quality)}});var eq=_e(QG=>{"use strict";var N_e=sR();function XG(e,n){let t=e.a/255,i=n+'="'+e.hex+'"';return t<1?i+" "+n+'-opacity="'+t.toFixed(2).slice(1)+'"':i}function lR(e,n,t){let i=e+n;return typeof t<"u"&&(i+=" "+t),i}function F_e(e,n,t){let i="",r=0,o=!1,d=0;for(let g=0;g<e.length;g++){let v=Math.floor(g%n),x=Math.floor(g/n);!v&&!o&&(o=!0),e[g]?(d++,g>0&&v>0&&e[g-1]||(i+=o?lR("M",v+t,.5+x+t):lR("m",r,0),r=0,o=!1),v+1<n&&e[g+1]||(i+=lR("h",d),d=0)):r++}return i}QG.render=function(n,t,i){let r=N_e.getOptions(t),o=n.modules.size,d=n.modules.data,g=o+r.margin*2,v=r.color.light.a?"<path "+XG(r.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",x="<path "+XG(r.color.dark,"stroke")+' d="'+F_e(d,o,r.margin)+'"/>',D='viewBox="0 0 '+g+" "+g+'"',L='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+D+' shape-rendering="crispEdges">'+v+x+`</svg>
`;return typeof i=="function"&&i(null,L),L}});var nq=_e(Hv=>{"use strict";var L_e=nG(),cR=KG(),tq=JG(),B_e=eq();function uR(e,n,t,i,r){let o=[].slice.call(arguments,1),d=o.length,g=typeof o[d-1]=="function";if(!g&&!L_e())throw new Error("Callback required as last argument");if(g){if(d<2)throw new Error("Too few arguments provided");d===2?(r=t,t=n,n=i=void 0):d===3&&(n.getContext&&typeof r>"u"?(r=i,i=void 0):(r=i,i=t,t=n,n=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(t=n,n=i=void 0):d===2&&!n.getContext&&(i=t,t=n,n=void 0),new Promise(function(v,x){try{let D=cR.create(t,i);v(e(D,n,i))}catch(D){x(D)}})}try{let v=cR.create(t,i);r(null,e(v,n,i))}catch(v){r(v)}}Hv.create=cR.create;Hv.toCanvas=uR.bind(null,tq.render);Hv.toDataURL=uR.bind(null,tq.renderToDataURL);Hv.toString=uR.bind(null,function(e,n,t){return B_e.render(e,t)})});function Sk(e,n){return Object.is(e,n)}var br=null,nb=!1,ib=1,Ks=Symbol("SIGNAL");function wn(e){let n=br;return br=e,n}function Ck(){return br}var _y={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ob(e){if(nb)throw new Error("");if(br===null)return;br.consumerOnSignalRead(e);let n=br.nextProducerIndex++;if(lb(br),n<br.producerNode.length&&br.producerNode[n]!==e&&yy(br)){let t=br.producerNode[n];ab(t,br.producerIndexOfThis[n])}br.producerNode[n]!==e&&(br.producerNode[n]=e,br.producerIndexOfThis[n]=yy(br)?Tk(e,br,n):0),br.producerLastReadVersion[n]=e.version}function y7(){ib++}function Ek(e){if(!(yy(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ib)){if(!e.producerMustRecompute(e)&&!FE(e)){e.dirty=!1,e.lastCleanEpoch=ib;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ib}}function Ik(e){if(e.liveConsumerNode===void 0)return;let n=nb;nb=!0;try{for(let t of e.liveConsumerNode)t.dirty||_7(t)}finally{nb=n}}function Dk(){return br?.consumerAllowSignalWrites!==!1}function _7(e){e.dirty=!0,Ik(e),e.consumerMarkedDirty?.(e)}function sb(e){return e&&(e.nextProducerIndex=0),wn(e)}function NE(e,n){if(wn(n),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(yy(e))for(let t=e.nextProducerIndex;t<e.producerNode.length;t++)ab(e.producerNode[t],e.producerIndexOfThis[t]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function FE(e){lb(e);for(let n=0;n<e.producerNode.length;n++){let t=e.producerNode[n],i=e.producerLastReadVersion[n];if(i!==t.version||(Ek(t),i!==t.version))return!0}return!1}function LE(e){if(lb(e),yy(e))for(let n=0;n<e.producerNode.length;n++)ab(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Tk(e,n,t){if(Ak(e),e.liveConsumerNode.length===0&&Mk(e))for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=Tk(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(t),e.liveConsumerNode.push(n)-1}function ab(e,n){if(Ak(e),e.liveConsumerNode.length===1&&Mk(e))for(let i=0;i<e.producerNode.length;i++)ab(e.producerNode[i],e.producerIndexOfThis[i]);let t=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[t],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[t],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[n],r=e.liveConsumerNode[n];lb(r),r.producerIndexOfThis[i]=n}}function yy(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function lb(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Ak(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Mk(e){return e.producerNode!==void 0}function BE(e){let n=Object.create(v7);n.computation=e;let t=()=>{if(Ek(n),ob(n),n.value===rb)throw n.error;return n.value};return t[Ks]=n,t}var OE=Symbol("UNSET"),kE=Symbol("COMPUTING"),rb=Symbol("ERRORED"),v7=Ie(q({},_y),{value:OE,dirty:!0,error:null,equal:Sk,producerMustRecompute(e){return e.value===OE||e.value===kE},producerRecomputeValue(e){if(e.value===kE)throw new Error("Detected cycle in computations.");let n=e.value;e.value=kE;let t=sb(e),i;try{i=e.computation()}catch(r){i=rb,e.error=r}finally{NE(e,t)}if(n!==OE&&n!==rb&&i!==rb&&e.equal(n,i)){e.value=n;return}e.value=i,e.version++}});function b7(){throw new Error}var Pk=b7;function Rk(){Pk()}function Ok(e){Pk=e}var w7=null;function kk(e){let n=Object.create(UE);n.value=e;let t=()=>(ob(n),n.value);return t[Ks]=n,t}function cb(e,n){Dk()||Rk(),e.equal(e.value,n)||(e.value=n,x7(e))}function Nk(e,n){Dk()||Rk(),cb(e,n(e.value))}var UE=Ie(q({},_y),{equal:Sk,value:void 0});function x7(e){e.version++,y7(),Ik(e),w7?.()}function qt(e){return typeof e=="function"}function Xp(e){let t=e(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ub=Xp(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hd(e,n){if(e){let t=e.indexOf(n);0<=t&&e.splice(t,1)}}var gi=class e{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(qt(i))try{i()}catch(o){n=o instanceof ub?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{Fk(o)}catch(d){n=n??[],d instanceof ub?n=[...n,...d.errors]:n.push(d)}}if(n)throw new ub(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Fk(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(n)}}_hasParent(n){let{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){let{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&Hd(t,n)}remove(n){let{_finalizers:t}=this;t&&Hd(t,n),n instanceof e&&n._removeParent(this)}};gi.EMPTY=(()=>{let e=new gi;return e.closed=!0,e})();var zE=gi.EMPTY;function db(e){return e instanceof gi||e&&"closed"in e&&qt(e.remove)&&qt(e.add)&&qt(e.unsubscribe)}function Fk(e){qt(e)?e():e.unsubscribe()}var Ma={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qp={setTimeout(e,n,...t){let{delegate:i}=Qp;return i?.setTimeout?i.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){let{delegate:n}=Qp;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function hb(e){Qp.setTimeout(()=>{let{onUnhandledError:n}=Ma;if(n)n(e);else throw e})}function $d(){}var Lk=VE("C",void 0,void 0);function Bk(e){return VE("E",void 0,e)}function Uk(e){return VE("N",e,void 0)}function VE(e,n,t){return{kind:e,value:n,error:t}}var Gd=null;function ef(e){if(Ma.useDeprecatedSynchronousErrorHandling){let n=!Gd;if(n&&(Gd={errorThrown:!1,error:null}),e(),n){let{errorThrown:t,error:i}=Gd;if(Gd=null,t)throw i}}else e()}function zk(e){Ma.useDeprecatedSynchronousErrorHandling&&Gd&&(Gd.errorThrown=!0,Gd.error=e)}var qd=class extends gi{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,db(n)&&n.add(this)):this.destination=E7}static create(n,t,i){return new gu(n,t,i)}next(n){this.isStopped?HE(Uk(n),this):this._next(n)}error(n){this.isStopped?HE(Bk(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?HE(Lk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},S7=Function.prototype.bind;function jE(e,n){return S7.call(e,n)}var $E=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(i){pb(i)}}error(n){let{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(i){pb(i)}else pb(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){pb(t)}}},gu=class extends qd{constructor(n,t,i){super();let r;if(qt(n)||!n)r={next:n??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Ma.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&jE(n.next,o),error:n.error&&jE(n.error,o),complete:n.complete&&jE(n.complete,o)}):r=n}this.destination=new $E(r)}};function pb(e){Ma.useDeprecatedSynchronousErrorHandling?zk(e):hb(e)}function C7(e){throw e}function HE(e,n){let{onStoppedNotification:t}=Ma;t&&Qp.setTimeout(()=>t(e,n))}var E7={closed:!0,next:$d,error:C7,complete:$d};var tf=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kr(e){return e}function GE(...e){return qE(e)}function qE(e){return e.length===0?Kr:e.length===1?e[0]:function(t){return e.reduce((i,r)=>r(i),t)}}var Zt=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new e;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=D7(t)?t:new gu(t,i,r);return ef(()=>{let{operator:d,source:g}=this;o.add(d?d.call(o,g):g?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=Vk(i),new i((r,o)=>{let d=new gu({next:g=>{try{t(g)}catch(v){o(v),d.unsubscribe()}},error:o,complete:r});this.subscribe(d)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[tf](){return this}pipe(...t){return qE(t)(this)}toPromise(t){return t=Vk(t),new t((i,r)=>{let o;this.subscribe(d=>o=d,d=>r(d),()=>i(o))})}}return e.create=n=>new e(n),e})();function Vk(e){var n;return(n=e??Ma.Promise)!==null&&n!==void 0?n:Promise}function I7(e){return e&&qt(e.next)&&qt(e.error)&&qt(e.complete)}function D7(e){return e&&e instanceof qd||I7(e)&&db(e)}function WE(e){return qt(e?.lift)}function dn(e){return n=>{if(WE(n))return n.lift(function(t){try{return e(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Kt(e,n,t,i,r){return new ZE(e,n,t,i,r)}var ZE=class extends qd{constructor(n,t,i,r,o,d){super(n),this.onFinalize=o,this.shouldUnsubscribe=d,this._next=t?function(g){try{t(g)}catch(v){n.error(v)}}:super._next,this._error=r?function(g){try{r(g)}catch(v){n.error(v)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(g){n.error(g)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function nf(){return dn((e,n)=>{let t=null;e._refCount++;let i=Kt(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){t=null;return}let r=e._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});e.subscribe(i),i.closed||(t=e.connect())})}var rf=class extends Zt{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,WE(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new gi;let t=this.getSubject();n.add(this.source.subscribe(Kt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=gi.EMPTY)}return n}refCount(){return nf()(this)}};var jk=Xp(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Bt=(()=>{class e extends Zt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new fb(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new jk}next(t){ef(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){ef(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ef(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?zE:(this.currentObservers=null,o.push(t),new gi(()=>{this.currentObservers=null,Hd(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Zt;return t.source=this,t}}return e.create=(n,t)=>new fb(n,t),e})(),fb=class extends Bt{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,n)}error(n){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,n)}complete(){var n,t;(t=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||t===void 0||t.call(n)}_subscribe(n){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(n))!==null&&i!==void 0?i:zE}};var cr=class extends Bt{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){let{hasError:n,thrownError:t,_value:i}=this;if(n)throw t;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var KE={now(){return(KE.delegate||Date).now()},delegate:void 0};var of=class extends Bt{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(n){let{hasError:t,_hasValue:i,_value:r,thrownError:o,isStopped:d,_isComplete:g}=this;t?n.error(o):(d||g)&&(i&&n.next(r),n.complete())}next(n){this.isStopped||(this._value=n,this._hasValue=!0)}complete(){let{_hasValue:n,_value:t,_isComplete:i}=this;i||(this._isComplete=!0,n&&super.next(t),super.complete())}};var mb=class extends gi{constructor(n,t){super()}schedule(n,t=0){return this}};var vy={setInterval(e,n,...t){let{delegate:i}=vy;return i?.setInterval?i.setInterval(e,n,...t):setInterval(e,n,...t)},clearInterval(e){let{delegate:n}=vy;return(n?.clearInterval||clearInterval)(e)},delegate:void 0};var gb=class extends mb{constructor(n,t){super(n,t),this.scheduler=n,this.work=t,this.pending=!1}schedule(n,t=0){var i;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(n,t,i=0){return vy.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&vy.clearInterval(t)}execute(n,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(n,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,t){let i=!1,r;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hd(i,this),n!=null&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,super.unsubscribe()}}};var sf=class e{constructor(n,t=e.now){this.schedulerActionCtor=n,this.now=t}schedule(n,t=0,i){return new this.schedulerActionCtor(this,n).schedule(i,t)}};sf.now=KE.now;var yb=class extends sf{constructor(n,t=sf.now){super(n,t),this.actions=[],this._active=!1}flush(n){let{actions:t}=this;if(this._active){t.push(n);return}let i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=t.shift());if(this._active=!1,i){for(;n=t.shift();)n.unsubscribe();throw i}}};var by=new yb(gb),Hk=by;var wr=new Zt(e=>e.complete());function _b(e){return e&&qt(e.schedule)}function YE(e){return e[e.length-1]}function yu(e){return qt(YE(e))?e.pop():void 0}function al(e){return _b(YE(e))?e.pop():void 0}function $k(e,n){return typeof YE(e)=="number"?e.pop():n}function vb(e,n,t,i){function r(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function g(D){try{x(i.next(D))}catch(R){d(R)}}function v(D){try{x(i.throw(D))}catch(R){d(R)}}function x(D){D.done?o(D.value):r(D.value).then(g,v)}x((i=i.apply(e,n||[])).next())})}function qk(e,n){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=g(0),d.throw=g(1),d.return=g(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(x){return function(D){return v([x,D])}}function v(x){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,x[0]&&(t=0)),t;)try{if(i=1,r&&(o=x[0]&2?r.return:x[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,x[1])).done)return o;switch(r=0,o&&(x=[x[0]&2,o.value]),x[0]){case 0:case 1:o=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,r=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!o||x[1]>o[0]&&x[1]<o[3])){t.label=x[1];break}if(x[0]===6&&t.label<o[1]){t.label=o[1],o=x;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(x);break}o[2]&&t.ops.pop(),t.trys.pop();continue}x=n.call(e,t)}catch(D){x=[6,D],r=0}finally{i=o=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function Gk(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wd(e){return this instanceof Wd?(this.v=e,this):new Wd(e)}function Wk(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(e,n||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(j){return function(J){return Promise.resolve(J).then(j,R)}}function g(j,J){i[j]&&(r[j]=function(re){return new Promise(function(be,xe){o.push([j,re,be,xe])>1||v(j,re)})},J&&(r[j]=J(r[j])))}function v(j,J){try{x(i[j](J))}catch(re){L(o[0][3],re)}}function x(j){j.value instanceof Wd?Promise.resolve(j.value.v).then(D,R):L(o[0][2],j)}function D(j){v("next",j)}function R(j){v("throw",j)}function L(j,J){j(J),o.shift(),o.length&&v(o[0][0],o[0][1])}}function Zk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof Gk=="function"?Gk(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=e[o]&&function(d){return new Promise(function(g,v){d=e[o](d),r(g,v,d.done,d.value)})}}function r(o,d,g,v){Promise.resolve(v).then(function(x){o({value:x,done:g})},d)}}var af=e=>e&&typeof e.length=="number"&&typeof e!="function";function bb(e){return qt(e?.then)}function wb(e){return qt(e[tf])}function xb(e){return Symbol.asyncIterator&&qt(e?.[Symbol.asyncIterator])}function Sb(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function T7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cb=T7();function Eb(e){return qt(e?.[Cb])}function Ib(e){return Wk(this,arguments,function*(){let t=e.getReader();try{for(;;){let{value:i,done:r}=yield Wd(t.read());if(r)return yield Wd(void 0);yield yield Wd(i)}}finally{t.releaseLock()}})}function Db(e){return qt(e?.getReader)}function Bn(e){if(e instanceof Zt)return e;if(e!=null){if(wb(e))return A7(e);if(af(e))return M7(e);if(bb(e))return P7(e);if(xb(e))return Kk(e);if(Eb(e))return R7(e);if(Db(e))return O7(e)}throw Sb(e)}function A7(e){return new Zt(n=>{let t=e[tf]();if(qt(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function M7(e){return new Zt(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}function P7(e){return new Zt(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,hb)})}function R7(e){return new Zt(n=>{for(let t of e)if(n.next(t),n.closed)return;n.complete()})}function Kk(e){return new Zt(n=>{k7(e,n).catch(t=>n.error(t))})}function O7(e){return Kk(Ib(e))}function k7(e,n){var t,i,r,o;return vb(this,void 0,void 0,function*(){try{for(t=Zk(e);i=yield t.next(),!i.done;){let d=i.value;if(n.next(d),n.closed)return}}catch(d){r={error:d}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}n.complete()})}function $o(e,n,t,i=0,r=!1){let o=n.schedule(function(){t(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function Tb(e,n=0){return dn((t,i)=>{t.subscribe(Kt(i,r=>$o(i,e,()=>i.next(r),n),()=>$o(i,e,()=>i.complete(),n),r=>$o(i,e,()=>i.error(r),n)))})}function Ab(e,n=0){return dn((t,i)=>{i.add(e.schedule(()=>t.subscribe(i),n))})}function Yk(e,n){return Bn(e).pipe(Ab(n),Tb(n))}function Jk(e,n){return Bn(e).pipe(Ab(n),Tb(n))}function Xk(e,n){return new Zt(t=>{let i=0;return n.schedule(function(){i===e.length?t.complete():(t.next(e[i++]),t.closed||this.schedule())})})}function Qk(e,n){return new Zt(t=>{let i;return $o(t,n,()=>{i=e[Cb](),$o(t,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(d){t.error(d);return}o?t.complete():t.next(r)},0,!0)}),()=>qt(i?.return)&&i.return()})}function Mb(e,n){if(!e)throw new Error("Iterable cannot be null");return new Zt(t=>{$o(t,n,()=>{let i=e[Symbol.asyncIterator]();$o(t,n,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function e2(e,n){return Mb(Ib(e),n)}function t2(e,n){if(e!=null){if(wb(e))return Yk(e,n);if(af(e))return Xk(e,n);if(bb(e))return Jk(e,n);if(xb(e))return Mb(e,n);if(Eb(e))return Qk(e,n);if(Db(e))return e2(e,n)}throw Sb(e)}function bi(e,n){return n?t2(e,n):Bn(e)}function Dt(...e){let n=al(e);return bi(e,n)}function lf(e,n){let t=qt(e)?e:()=>e,i=r=>r.error(t());return new Zt(n?r=>n.schedule(i,0,r):i)}function wy(e){return!!e&&(e instanceof Zt||qt(e.lift)&&qt(e.subscribe))}var Pa=Xp(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function JE(e,n){let t=typeof n=="object";return new Promise((i,r)=>{let o=new gu({next:d=>{i(d),o.unsubscribe()},error:r,complete:()=>{t?i(n.defaultValue):r(new Pa)}});e.subscribe(o)})}function n2(e){return e instanceof Date&&!isNaN(e)}function Vt(e,n){return dn((t,i)=>{let r=0;t.subscribe(Kt(i,o=>{i.next(e.call(n,o,r++))}))})}var{isArray:N7}=Array;function F7(e,n){return N7(n)?e(...n):e(n)}function cf(e){return Vt(n=>F7(e,n))}var{isArray:L7}=Array,{getPrototypeOf:B7,prototype:U7,keys:z7}=Object;function Pb(e){if(e.length===1){let n=e[0];if(L7(n))return{args:n,keys:null};if(V7(n)){let t=z7(n);return{args:t.map(i=>n[i]),keys:t}}}return{args:e,keys:null}}function V7(e){return e&&typeof e=="object"&&B7(e)===U7}function Rb(e,n){return e.reduce((t,i,r)=>(t[i]=n[r],t),{})}function _u(...e){let n=al(e),t=yu(e),{args:i,keys:r}=Pb(e);if(i.length===0)return bi([],n);let o=new Zt(j7(i,n,r?d=>Rb(r,d):Kr));return t?o.pipe(cf(t)):o}function j7(e,n,t=Kr){return i=>{i2(n,()=>{let{length:r}=e,o=new Array(r),d=r,g=r;for(let v=0;v<r;v++)i2(n,()=>{let x=bi(e[v],n),D=!1;x.subscribe(Kt(i,R=>{o[v]=R,D||(D=!0,g--),g||i.next(t(o.slice()))},()=>{--d||i.complete()}))},i)},i)}}function i2(e,n,t){e?$o(t,e,n):n()}function r2(e,n,t,i,r,o,d,g){let v=[],x=0,D=0,R=!1,L=()=>{R&&!v.length&&!x&&n.complete()},j=re=>x<i?J(re):v.push(re),J=re=>{o&&n.next(re),x++;let be=!1;Bn(t(re,D++)).subscribe(Kt(n,xe=>{r?.(xe),o?j(xe):n.next(xe)},()=>{be=!0},void 0,()=>{if(be)try{for(x--;v.length&&x<i;){let xe=v.shift();d?$o(n,d,()=>J(xe)):J(xe)}L()}catch(xe){n.error(xe)}}))};return e.subscribe(Kt(n,j,()=>{R=!0,L()})),()=>{g?.()}}function Vi(e,n,t=1/0){return qt(n)?Vi((i,r)=>Vt((o,d)=>n(i,o,r,d))(Bn(e(i,r))),t):(typeof n=="number"&&(t=n),dn((i,r)=>r2(i,r,e,t)))}function vu(e=1/0){return Vi(Kr,e)}function o2(){return vu(1)}function ll(...e){return o2()(bi(e,al(e)))}function uf(e){return new Zt(n=>{Bn(e()).subscribe(n)})}function XE(...e){let n=yu(e),{args:t,keys:i}=Pb(e),r=new Zt(o=>{let{length:d}=t;if(!d){o.complete();return}let g=new Array(d),v=d,x=d;for(let D=0;D<d;D++){let R=!1;Bn(t[D]).subscribe(Kt(o,L=>{R||(R=!0,x--),g[D]=L},()=>v--,void 0,()=>{(!v||!R)&&(x||o.next(i?Rb(i,g):g),o.complete())}))}});return n?r.pipe(cf(n)):r}var H7=["addListener","removeListener"],$7=["addEventListener","removeEventListener"],G7=["on","off"];function Nr(e,n,t,i){if(qt(t)&&(i=t,t=void 0),i)return Nr(e,n,t).pipe(cf(i));let[r,o]=Z7(e)?$7.map(d=>g=>e[d](n,g,t)):q7(e)?H7.map(s2(e,n)):W7(e)?G7.map(s2(e,n)):[];if(!r&&af(e))return Vi(d=>Nr(d,n,t))(Bn(e));if(!r)throw new TypeError("Invalid event target");return new Zt(d=>{let g=(...v)=>d.next(1<v.length?v:v[0]);return r(g),()=>o(g)})}function s2(e,n){return t=>i=>e[t](n,i)}function q7(e){return qt(e.addListener)&&qt(e.removeListener)}function W7(e){return qt(e.on)&&qt(e.off)}function Z7(e){return qt(e.addEventListener)&&qt(e.removeEventListener)}function xy(e=0,n,t=Hk){let i=-1;return n!=null&&(_b(n)?t=n:i=n),new Zt(r=>{let o=n2(e)?+e-t.now():e;o<0&&(o=0);let d=0;return t.schedule(function(){r.closed||(r.next(d++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Sy(...e){let n=al(e),t=$k(e,1/0),i=e;return i.length?i.length===1?Bn(i[0]):vu(t)(bi(i,n)):wr}var{isArray:K7}=Array;function Ob(e){return e.length===1&&K7(e[0])?e[0]:e}function jn(e,n){return dn((t,i)=>{let r=0;t.subscribe(Kt(i,o=>e.call(n,o,r++)&&i.next(o)))})}function QE(...e){return e=Ob(e),e.length===1?Bn(e[0]):new Zt(Y7(e))}function Y7(e){return n=>{let t=[];for(let i=0;t&&!n.closed&&i<e.length;i++)t.push(Bn(e[i]).subscribe(Kt(n,r=>{if(t){for(let o=0;o<t.length;o++)o!==i&&t[o].unsubscribe();t=null}n.next(r)})))}}function Cy(...e){let n=yu(e),t=Ob(e);return t.length?new Zt(i=>{let r=t.map(()=>[]),o=t.map(()=>!1);i.add(()=>{r=o=null});for(let d=0;!i.closed&&d<t.length;d++)Bn(t[d]).subscribe(Kt(i,g=>{if(r[d].push(g),r.every(v=>v.length)){let v=r.map(x=>x.shift());i.next(n?n(...v):v),r.some((x,D)=>!x.length&&o[D])&&i.complete()}},()=>{o[d]=!0,!r[d].length&&i.complete()}));return()=>{r=o=null}}):wr}function a2(e){return dn((n,t)=>{let i=!1,r=null,o=null,d=!1,g=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let x=r;r=null,t.next(x)}d&&t.complete()},v=()=>{o=null,d&&t.complete()};n.subscribe(Kt(t,x=>{i=!0,r=x,o||Bn(e(x)).subscribe(o=Kt(t,g,v))},()=>{d=!0,(!i||!o||o.closed)&&t.complete()}))})}function kb(e,n=by){return a2(()=>xy(e,n))}function bu(e){return dn((n,t)=>{let i=null,r=!1,o;i=n.subscribe(Kt(t,void 0,void 0,d=>{o=Bn(e(d,bu(e)(n))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function l2(e,n,t,i,r){return(o,d)=>{let g=t,v=n,x=0;o.subscribe(Kt(d,D=>{let R=x++;v=g?e(v,D,R):(g=!0,D),i&&d.next(v)},r&&(()=>{g&&d.next(v),d.complete()})))}}function ac(e,n){return qt(n)?Vi(e,n,1):Vi(e,1)}function df(e,n=by){return dn((t,i)=>{let r=null,o=null,d=null,g=()=>{if(r){r.unsubscribe(),r=null;let x=o;o=null,i.next(x)}};function v(){let x=d+e,D=n.now();if(D<x){r=this.schedule(void 0,x-D),i.add(r);return}g()}t.subscribe(Kt(i,x=>{o=x,d=n.now(),r||(r=n.schedule(v,e),i.add(r))},()=>{g(),i.complete()},void 0,()=>{o=r=null}))})}function wu(e){return dn((n,t)=>{let i=!1;n.subscribe(Kt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(e),t.complete()}))})}function fo(e){return e<=0?()=>wr:dn((n,t)=>{let i=0;n.subscribe(Kt(t,r=>{++i<=e&&(t.next(r),e<=i&&t.complete())}))})}function eI(e){return Vt(()=>e)}function Ey(e,n=Kr){return e=e??J7,dn((t,i)=>{let r,o=!0;t.subscribe(Kt(i,d=>{let g=n(d);(o||!e(r,g))&&(o=!1,r=g,i.next(d))}))})}function J7(e,n){return e===n}function Nb(e=X7){return dn((n,t)=>{let i=!1;n.subscribe(Kt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(e())))})}function X7(){return new Pa}function tI(...e){return n=>ll(n,Dt(...e))}function xu(e){return dn((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function cl(e,n){let t=arguments.length>=2;return i=>i.pipe(e?jn((r,o)=>e(r,o,i)):Kr,fo(1),t?wu(n):Nb(()=>new Pa))}function hf(e){return e<=0?()=>wr:dn((n,t)=>{let i=[];n.subscribe(Kt(t,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function nI(e,n){let t=arguments.length>=2;return i=>i.pipe(e?jn((r,o)=>e(r,o,i)):Kr,hf(1),t?wu(n):Nb(()=>new Pa))}function iI(e,n){return dn(l2(e,n,arguments.length>=2,!0))}function pf(e){return jn((n,t)=>e<=t)}function Ys(...e){let n=al(e);return dn((t,i)=>{(n?ll(e,t,n):ll(e,t)).subscribe(i)})}function Yi(e,n){return dn((t,i)=>{let r=null,o=0,d=!1,g=()=>d&&!r&&i.complete();t.subscribe(Kt(i,v=>{r?.unsubscribe();let x=0,D=o++;Bn(e(v,D)).subscribe(r=Kt(i,R=>i.next(n?n(v,R,D,x++):R),()=>{r=null,g()}))},()=>{d=!0,g()}))})}function Ii(e){return dn((n,t)=>{Bn(e).subscribe(Kt(t,()=>t.complete(),$d)),!t.closed&&n.subscribe(t)})}function Kn(e,n,t){let i=qt(e)||n||t?{next:e,error:n,complete:t}:e;return i?dn((r,o)=>{var d;(d=i.subscribe)===null||d===void 0||d.call(i);let g=!0;r.subscribe(Kt(o,v=>{var x;(x=i.next)===null||x===void 0||x.call(i,v),o.next(v)},()=>{var v;g=!1,(v=i.complete)===null||v===void 0||v.call(i),o.complete()},v=>{var x;g=!1,(x=i.error)===null||x===void 0||x.call(i,v),o.error(v)},()=>{var v,x;g&&((v=i.unsubscribe)===null||v===void 0||v.call(i)),(x=i.finalize)===null||x===void 0||x.call(i)}))}):Kr}function Fb(...e){let n=yu(e);return dn((t,i)=>{let r=e.length,o=new Array(r),d=e.map(()=>!1),g=!1;for(let v=0;v<r;v++)Bn(e[v]).subscribe(Kt(i,x=>{o[v]=x,!g&&!d[v]&&(d[v]=!0,(g=d.every(Kr))&&(d=null))},$d));t.subscribe(Kt(i,v=>{if(g){let x=[v,...o];i.next(n?n(...x):x)}}))})}var Q2="https://g.co/ng/security#xss",vt=class extends Error{constructor(n,t){super(Iw(n,t)),this.code=n}};function Iw(e,n){return`${`NG0${Math.abs(e)}`}${n?": "+n:""}`}var eN=Symbol("InputSignalNode#UNSET"),Q7=Ie(q({},UE),{transformFn:void 0,applyValueToInputSignal(e,n){cb(e,n)}});function tN(e,n){let t=Object.create(Q7);t.value=e,t.transformFn=n?.transform;function i(){if(ob(t),t.value===eN)throw new vt(-950,!1);return t.value}return i[Ks]=t,i}function Fy(e){return{toString:e}.toString()}var Lb="__parameters__";function eZ(e){return function(...t){if(e){let i=e(...t);for(let r in i)this[r]=i[r]}}}function nN(e,n,t){return Fy(()=>{let i=eZ(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;let d=new r(...o);return g.annotation=d,g;function g(v,x,D){let R=v.hasOwnProperty(Lb)?v[Lb]:Object.defineProperty(v,Lb,{value:[]})[Lb];for(;R.length<=D;)R.push(null);return(R[D]=R[D]||[]).push(d),v}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var ka=globalThis;function wi(e){for(let n in e)if(e[n]===wi)return n;throw Error("Could not find renamed property on target object.")}function tZ(e,n){for(let t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Mo(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Mo).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let n=e.toString();if(n==null)return""+n;let t=n.indexOf(`
`);return t===-1?n:n.substring(0,t)}function _I(e,n){return e==null||e===""?n===null?"":n:n==null||n===""?e:e+" "+n}var nZ=wi({__forward_ref__:wi});function ys(e){return e.__forward_ref__=ys,e.toString=function(){return Mo(this())},e}function Yr(e){return iN(e)?e():e}function iN(e){return typeof e=="function"&&e.hasOwnProperty(nZ)&&e.__forward_ref__===ys}function Be(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ot(e){return{providers:e.providers||[],imports:e.imports||[]}}function Dw(e){return c2(e,oN)||c2(e,sN)}function rN(e){return Dw(e)!==null}function c2(e,n){return e.hasOwnProperty(n)?e[n]:null}function iZ(e){let n=e&&(e[oN]||e[sN]);return n||null}function u2(e){return e&&(e.hasOwnProperty(d2)||e.hasOwnProperty(rZ))?e[d2]:null}var oN=wi({\u0275prov:wi}),d2=wi({\u0275inj:wi}),sN=wi({ngInjectableDef:wi}),rZ=wi({ngInjectorDef:wi}),ct=class{constructor(n,t){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Be({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aN(e){return e&&!!e.\u0275providers}var oZ=wi({\u0275cmp:wi}),sZ=wi({\u0275dir:wi}),aZ=wi({\u0275pipe:wi}),lZ=wi({\u0275mod:wi}),Zb=wi({\u0275fac:wi}),Dy=wi({__NG_ELEMENT_ID__:wi}),h2=wi({__NG_ENV_ID__:wi});function vf(e){return typeof e=="string"?e:e==null?"":String(e)}function cZ(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():vf(e)}function uZ(e,n){let t=n?`. Dependency path: ${n.join(" > ")} > ${e}`:"";throw new vt(-200,e)}function wD(e,n){throw new vt(-201,!1)}var xn=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(xn||{}),vI;function lN(){return vI}function Go(e){let n=vI;return vI=e,n}function cN(e,n,t){let i=Dw(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&xn.Optional)return null;if(n!==void 0)return n;wD(e,"Injector")}var dZ={},Ay=dZ,bI="__NG_DI_FLAG__",Kb="ngTempTokenPath",hZ="ngTokenPath",pZ=/\n/gm,fZ="\u0275",p2="__source",yf;function mZ(){return yf}function Su(e){let n=yf;return yf=e,n}function gZ(e,n=xn.Default){if(yf===void 0)throw new vt(-203,!1);return yf===null?cN(e,void 0,n):yf.get(e,n&xn.Optional?null:void 0,n)}function Re(e,n=xn.Default){return(lN()||gZ)(Yr(e),n)}function Me(e,n=xn.Default){return Re(e,Tw(n))}function Tw(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function wI(e){let n=[];for(let t=0;t<e.length;t++){let i=Yr(e[t]);if(Array.isArray(i)){if(i.length===0)throw new vt(900,!1);let r,o=xn.Default;for(let d=0;d<i.length;d++){let g=i[d],v=yZ(g);typeof v=="number"?v===-1?r=g.token:o|=v:r=g}n.push(Re(r,o))}else n.push(Re(i))}return n}function uN(e,n){return e[bI]=n,e.prototype[bI]=n,e}function yZ(e){return e[bI]}function _Z(e,n,t,i){let r=e[Kb];throw n[p2]&&r.unshift(n[p2]),e.message=vZ(`
`+e.message,r,t,i),e[hZ]=r,e[Kb]=null,e}function vZ(e,n,t,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==fZ?e.slice(2):e;let r=Mo(n);if(Array.isArray(n))r=n.map(Mo).join(" -> ");else if(typeof n=="object"){let o=[];for(let d in n)if(n.hasOwnProperty(d)){let g=n[d];o.push(d+":"+(typeof g=="string"?JSON.stringify(g):Mo(g)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${e.replace(pZ,`
  `)}`}var Ly=uN(nN("Optional"),8);var Aw=uN(nN("SkipSelf"),4);function Kd(e,n){let t=e.hasOwnProperty(Zb);return t?e[Zb]:null}function bZ(e,n,t){if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=n[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function wZ(e){return e.flat(Number.POSITIVE_INFINITY)}function xD(e,n){e.forEach(t=>Array.isArray(t)?xD(t,n):n(t))}function dN(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Yb(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function xZ(e,n){let t=[];for(let i=0;i<e;i++)t.push(n);return t}function SZ(e,n,t,i){let r=e.length;if(r==n)e.push(t,i);else if(r===1)e.push(i,e[0]),e[0]=t;else{for(r--,e.push(e[r-1],e[r]);r>n;){let o=r-2;e[r]=e[o],r--}e[n]=t,e[n+1]=i}}function Mw(e,n,t){let i=By(e,n);return i>=0?e[i|1]=t:(i=~i,SZ(e,i,n,t)),i}function rI(e,n){let t=By(e,n);if(t>=0)return e[t|1]}function By(e,n){return CZ(e,n,1)}function CZ(e,n,t){let i=0,r=e.length>>t;for(;r!==i;){let o=i+(r-i>>1),d=e[o<<t];if(n===d)return o<<t;d>n?r=o:i=o+1}return~(r<<t)}var cc={},Ao=[],bf=new ct(""),hN=new ct("",-1),pN=new ct(""),Jb=class{get(n,t=Ay){if(t===Ay){let i=new Error(`NullInjectorError: No provider for ${Mo(n)}!`);throw i.name="NullInjectorError",i}return t}},fN=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(fN||{}),hl=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(hl||{}),Iu=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Iu||{});function EZ(e,n,t){let i=e.length;for(;;){let r=e.indexOf(n,t);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=n.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}t=r+1}}function xI(e,n,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],d=t[i++],g=t[i++];e.setAttribute(n,d,g,o)}else{let o=r,d=t[++i];IZ(o)?e.setProperty(n,o,d):e.setAttribute(n,o,d),i++}}return i}function mN(e){return e===3||e===4||e===6}function IZ(e){return e.charCodeAt(0)===64}function My(e,n){if(!(n===null||n.length===0))if(e===null||e.length===0)e=n.slice();else{let t=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?f2(e,t,r,null,n[++i]):f2(e,t,r,null,null))}}return e}function f2(e,n,t,i,r){let o=0,d=e.length;if(n===-1)d=-1;else for(;o<e.length;){let g=e[o++];if(typeof g=="number"){if(g===n){d=-1;break}else if(g>n){d=o-1;break}}}for(;o<e.length;){let g=e[o];if(typeof g=="number")break;if(g===t){if(i===null){r!==null&&(e[o+1]=r);return}else if(i===e[o+1]){e[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}d!==-1&&(e.splice(d,0,n),o=d+1),e.splice(o++,0,t),i!==null&&e.splice(o++,0,i),r!==null&&e.splice(o++,0,r)}var gN="ng-template";function DZ(e,n,t,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&EZ(n[r+1].toLowerCase(),t,0)!==-1)return!0}else if(SD(e))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&typeof(o=n[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function SD(e){return e.type===4&&e.value!==gN}function TZ(e,n,t){let i=e.type===4&&!t?gN:e.value;return n===i}function AZ(e,n,t){let i=4,r=e.attrs,o=r!==null?RZ(r):0,d=!1;for(let g=0;g<n.length;g++){let v=n[g];if(typeof v=="number"){if(!d&&!Ra(i)&&!Ra(v))return!1;if(d&&Ra(v))continue;d=!1,i=v|i&1;continue}if(!d)if(i&4){if(i=2|i&1,v!==""&&!TZ(e,v,t)||v===""&&n.length===1){if(Ra(i))return!1;d=!0}}else if(i&8){if(r===null||!DZ(e,r,v,t)){if(Ra(i))return!1;d=!0}}else{let x=n[++g],D=MZ(v,r,SD(e),t);if(D===-1){if(Ra(i))return!1;d=!0;continue}if(x!==""){let R;if(D>o?R="":R=r[D+1].toLowerCase(),i&2&&x!==R){if(Ra(i))return!1;d=!0}}}}return Ra(i)||d}function Ra(e){return(e&1)===0}function MZ(e,n,t,i){if(n===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<n.length;){let d=n[r];if(d===e)return r;if(d===3||d===6)o=!0;else if(d===1||d===2){let g=n[++r];for(;typeof g=="string";)g=n[++r];continue}else{if(d===4)break;if(d===0){r+=4;continue}}r+=o?1:2}return-1}else return OZ(n,e)}function yN(e,n,t=!1){for(let i=0;i<n.length;i++)if(AZ(e,n[i],t))return!0;return!1}function PZ(e){let n=e.attrs;if(n!=null){let t=n.indexOf(5);if(!(t&1))return n[t+1]}return null}function RZ(e){for(let n=0;n<e.length;n++){let t=e[n];if(mN(t))return n}return e.length}function OZ(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){let i=e[t];if(typeof i=="number")return-1;if(i===n)return t;t++}return-1}function kZ(e,n){e:for(let t=0;t<n.length;t++){let i=n[t];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function m2(e,n){return e?":not("+n.trim()+")":n}function NZ(e){let n=e[0],t=1,i=2,r="",o=!1;for(;t<e.length;){let d=e[t];if(typeof d=="string")if(i&2){let g=e[++t];r+="["+d+(g.length>0?'="'+g+'"':"")+"]"}else i&8?r+="."+d:i&4&&(r+=" "+d);else r!==""&&!Ra(d)&&(n+=m2(o,r),r=""),i=d,o=o||!Ra(i);t++}return r!==""&&(n+=m2(o,r)),n}function FZ(e){return e.map(NZ).join(",")}function LZ(e){let n=[],t=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&n.push(o,e[++i]):r===8&&t.push(o);else{if(!Ra(r))break;r=o}i++}return{attrs:n,classes:t}}function Pt(e){return Fy(()=>{let n=xN(e),t=Ie(q({},n),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===fN.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||hl.Emulated,styles:e.styles||Ao,_:null,schemas:e.schemas||null,tView:null,id:""});SN(t);let i=e.dependencies;return t.directiveDefs=y2(i,!1),t.pipeDefs=y2(i,!0),t.id=zZ(t),t})}function BZ(e){return uc(e)||CD(e)}function UZ(e){return e!==null}function kt(e){return Fy(()=>({type:e.type,bootstrap:e.bootstrap||Ao,declarations:e.declarations||Ao,imports:e.imports||Ao,exports:e.exports||Ao,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function g2(e,n){if(e==null)return cc;let t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,d,g=Iu.None;Array.isArray(r)?(g=r[0],o=r[1],d=r[2]??o):(o=r,d=r),n?(t[o]=g!==Iu.None?[i,g]:i,n[o]=d):t[o]=i}return t}function Ln(e){return Fy(()=>{let n=xN(e);return SN(n),n})}function _N(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function uc(e){return e[oZ]||null}function CD(e){return e[sZ]||null}function vN(e){return e[aZ]||null}function bN(e){let n=uc(e)||CD(e)||vN(e);return n!==null?n.standalone:!1}function wN(e,n){let t=e[lZ]||null;if(!t&&n===!0)throw new Error(`Type ${Mo(e)} does not have '\u0275mod' property.`);return t}function xN(e){let n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||cc,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ao,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:g2(e.inputs,n),outputs:g2(e.outputs),debugInfo:null}}function SN(e){e.features?.forEach(n=>n(e))}function y2(e,n){if(!e)return null;let t=n?vN:BZ;return()=>(typeof e=="function"?e():e).map(i=>t(i)).filter(UZ)}function zZ(e){let n=0,t=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let r of t)n=Math.imul(31,n)+r.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Pw(e){return{\u0275providers:e}}function VZ(...e){return{\u0275providers:CN(!0,e),\u0275fromNgModule:!0}}function CN(e,...n){let t=[],i=new Set,r,o=d=>{t.push(d)};return xD(n,d=>{let g=d;SI(g,o,[],i)&&(r||=[],r.push(g))}),r!==void 0&&EN(r,o),t}function EN(e,n){for(let t=0;t<e.length;t++){let{ngModule:i,providers:r}=e[t];ED(r,o=>{n(o,i)})}}function SI(e,n,t,i){if(e=Yr(e),!e)return!1;let r=null,o=u2(e),d=!o&&uc(e);if(!o&&!d){let v=e.ngModule;if(o=u2(v),o)r=v;else return!1}else{if(d&&!d.standalone)return!1;r=e}let g=i.has(r);if(d){if(g)return!1;if(i.add(r),d.dependencies){let v=typeof d.dependencies=="function"?d.dependencies():d.dependencies;for(let x of v)SI(x,n,t,i)}}else if(o){if(o.imports!=null&&!g){i.add(r);let x;try{xD(o.imports,D=>{SI(D,n,t,i)&&(x||=[],x.push(D))})}finally{}x!==void 0&&EN(x,n)}if(!g){let x=Kd(r)||(()=>new r);n({provide:r,useFactory:x,deps:Ao},r),n({provide:pN,useValue:r,multi:!0},r),n({provide:bf,useValue:()=>Re(r),multi:!0},r)}let v=o.providers;if(v!=null&&!g){let x=e;ED(v,D=>{n(D,x)})}}else return!1;return r!==e&&e.providers!==void 0}function ED(e,n){for(let t of e)aN(t)&&(t=t.\u0275providers),Array.isArray(t)?ED(t,n):n(t)}var jZ=wi({provide:String,useValue:wi});function IN(e){return e!==null&&typeof e=="object"&&jZ in e}function HZ(e){return!!(e&&e.useExisting)}function $Z(e){return!!(e&&e.useFactory)}function wf(e){return typeof e=="function"}function GZ(e){return!!e.useClass}var Rw=new ct(""),Hb={},qZ={},oI;function Ow(){return oI===void 0&&(oI=new Jb),oI}var ur=class{},Py=class extends ur{get destroyed(){return this._destroyed}constructor(n,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,EI(n,d=>this.processProvider(d)),this.records.set(hN,ff(void 0,this)),r.has("environment")&&this.records.set(ur,ff(void 0,this));let o=this.records.get(Rw);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pN,Ao,xn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let n=wn(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),wn(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();let t=Su(this),i=Go(void 0),r;try{return n()}finally{Su(t),Go(i)}}get(n,t=Ay,i=xn.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(h2))return n[h2](this);i=Tw(i);let r,o=Su(this),d=Go(void 0);try{if(!(i&xn.SkipSelf)){let v=this.records.get(n);if(v===void 0){let x=JZ(n)&&Dw(n);x&&this.injectableDefInScope(x)?v=ff(CI(n),Hb):v=null,this.records.set(n,v)}if(v!=null)return this.hydrate(n,v)}let g=i&xn.Self?Ow():this.parent;return t=i&xn.Optional&&t===Ay?null:t,g.get(n,t)}catch(g){if(g.name==="NullInjectorError"){if((g[Kb]=g[Kb]||[]).unshift(Mo(n)),o)throw g;return _Z(g,n,"R3InjectorError",this.source)}else throw g}finally{Go(d),Su(o)}}resolveInjectorInitializers(){let n=wn(null),t=Su(this),i=Go(void 0),r;try{let o=this.get(bf,Ao,xn.Self);for(let d of o)d()}finally{Su(t),Go(i),wn(n)}}toString(){let n=[],t=this.records;for(let i of t.keys())n.push(Mo(i));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new vt(205,!1)}processProvider(n){n=Yr(n);let t=wf(n)?n:Yr(n&&n.provide),i=ZZ(n);if(!wf(n)&&n.multi===!0){let r=this.records.get(t);r||(r=ff(void 0,Hb,!0),r.factory=()=>wI(r.multi),this.records.set(t,r)),t=n,r.multi.push(n)}this.records.set(t,i)}hydrate(n,t){let i=wn(null);try{return t.value===Hb&&(t.value=qZ,t.value=t.factory()),typeof t.value=="object"&&t.value&&YZ(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{wn(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;let t=Yr(n.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){let t=this._onDestroyHooks.indexOf(n);t!==-1&&this._onDestroyHooks.splice(t,1)}};function CI(e){let n=Dw(e),t=n!==null?n.factory:Kd(e);if(t!==null)return t;if(e instanceof ct)throw new vt(204,!1);if(e instanceof Function)return WZ(e);throw new vt(204,!1)}function WZ(e){if(e.length>0)throw new vt(204,!1);let t=iZ(e);return t!==null?()=>t.factory(e):()=>new e}function ZZ(e){if(IN(e))return ff(void 0,e.useValue);{let n=DN(e);return ff(n,Hb)}}function DN(e,n,t){let i;if(wf(e)){let r=Yr(e);return Kd(r)||CI(r)}else if(IN(e))i=()=>Yr(e.useValue);else if($Z(e))i=()=>e.useFactory(...wI(e.deps||[]));else if(HZ(e))i=()=>Re(Yr(e.useExisting));else{let r=Yr(e&&(e.useClass||e.provide));if(KZ(e))i=()=>new r(...wI(e.deps));else return Kd(r)||CI(r)}return i}function ff(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function KZ(e){return!!e.deps}function YZ(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function JZ(e){return typeof e=="function"||typeof e=="object"&&e instanceof ct}function EI(e,n){for(let t of e)Array.isArray(t)?EI(t,n):t&&aN(t)?EI(t.\u0275providers,n):n(t)}function Xs(e,n){e instanceof Py&&e.assertNotDestroyed();let t,i=Su(e),r=Go(void 0);try{return n()}finally{Su(i),Go(r)}}function TN(){return lN()!==void 0||mZ()!=null}function kw(e){if(!TN())throw new vt(-203,!1)}function XZ(e){let n=ka.ng;if(n&&n.\u0275compilerFacade)return n.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function QZ(e){return typeof e=="function"}var pc=0,an=1,tn=2,yo=3,Oa=4,qo=5,xf=6,Xb=7,mo=8,Sf=9,pl=10,ji=11,Ry=12,_2=13,Pf=14,ms=15,Yd=16,mf=17,dc=18,Nw=19,AN=20,Cu=21,sI=22,Js=23,Jr=25,MN=1;var Jd=7,Qb=8,Cf=9,go=10,ew=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(ew||{});function Eu(e){return Array.isArray(e)&&typeof e[MN]=="object"}function fc(e){return Array.isArray(e)&&e[MN]===!0}function ID(e){return(e.flags&4)!==0}function Fw(e){return e.componentOffset>-1}function Lw(e){return(e.flags&1)===1}function Du(e){return!!e.template}function II(e){return(e[tn]&512)!==0}var DI=class{constructor(n,t,i){this.previousValue=n,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function PN(e,n,t,i){n!==null?n.applyValueToInputSignal(n,i):e[t]=i}function Sr(){return RN}function RN(e){return e.type.prototype.ngOnChanges&&(e.setInput=tK),eK}Sr.ngInherit=!0;function eK(){let e=kN(this),n=e?.current;if(n){let t=e.previous;if(t===cc)e.previous=n;else for(let i in n)t[i]=n[i];e.current=null,this.ngOnChanges(n)}}function tK(e,n,t,i,r){let o=this.declaredInputs[i],d=kN(e)||nK(e,{previous:cc,current:null}),g=d.current||(d.current={}),v=d.previous,x=v[o];g[o]=new DI(x&&x.currentValue,t,v===cc),PN(e,n,r,t)}var ON="__ngSimpleChanges__";function kN(e){return e[ON]||null}function nK(e,n){return e[ON]=n}var v2=null;var ul=function(e,n,t){v2?.(e,n,t)},NN="svg",iK="math";function fl(e){for(;Array.isArray(e);)e=e[pc];return e}function FN(e,n){return fl(n[e])}function Qs(e,n){return fl(n[e.index])}function DD(e,n){return e.data[n]}function LN(e,n){return e[n]}function Pu(e,n){let t=n[e];return Eu(t)?t:t[pc]}function rK(e){return(e[tn]&4)===4}function TD(e){return(e[tn]&128)===128}function oK(e){return fc(e[yo])}function Tu(e,n){return n==null?null:e[n]}function BN(e){e[mf]=0}function UN(e){e[tn]&1024||(e[tn]|=1024,TD(e)&&Uw(e))}function sK(e,n){for(;e>0;)n=n[Pf],e--;return n}function Bw(e){return!!(e[tn]&9216||e[Js]?.dirty)}function TI(e){e[pl].changeDetectionScheduler?.notify(8),e[tn]&64&&(e[tn]|=1024),Bw(e)&&Uw(e)}function Uw(e){e[pl].changeDetectionScheduler?.notify(0);let n=Xd(e);for(;n!==null&&!(n[tn]&8192||(n[tn]|=8192,!TD(n)));)n=Xd(n)}function zN(e,n){if((e[tn]&256)===256)throw new vt(911,!1);e[Cu]===null&&(e[Cu]=[]),e[Cu].push(n)}function aK(e,n){if(e[Cu]===null)return;let t=e[Cu].indexOf(n);t!==-1&&e[Cu].splice(t,1)}function Xd(e){let n=e[yo];return fc(n)?n[yo]:n}var hn={lFrame:ZN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var VN=!1;function lK(){return hn.lFrame.elementDepthCount}function cK(){hn.lFrame.elementDepthCount++}function uK(){hn.lFrame.elementDepthCount--}function jN(){return hn.bindingsEnabled}function HN(){return hn.skipHydrationRootTNode!==null}function dK(e){return hn.skipHydrationRootTNode===e}function hK(){hn.skipHydrationRootTNode=null}function rn(){return hn.lFrame.lView}function Hi(){return hn.lFrame.tView}function xi(e){return hn.lFrame.contextLView=e,e[mo]}function Si(e){return hn.lFrame.contextLView=null,e}function Qr(){let e=$N();for(;e!==null&&e.type===64;)e=e.parent;return e}function $N(){return hn.lFrame.currentTNode}function pK(){let e=hn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}function oh(e,n){let t=hn.lFrame;t.currentTNode=e,t.isParent=n}function AD(){return hn.lFrame.isParent}function MD(){hn.lFrame.isParent=!1}function fK(){return hn.lFrame.contextLView}function GN(){return VN}function b2(e){VN=e}function Uy(){let e=hn.lFrame,n=e.bindingRootIndex;return n===-1&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function mK(){return hn.lFrame.bindingIndex}function gK(e){return hn.lFrame.bindingIndex=e}function sh(){return hn.lFrame.bindingIndex++}function PD(e){let n=hn.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function yK(){return hn.lFrame.inI18n}function _K(e,n){let t=hn.lFrame;t.bindingIndex=t.bindingRootIndex=e,AI(n)}function vK(){return hn.lFrame.currentDirectiveIndex}function AI(e){hn.lFrame.currentDirectiveIndex=e}function bK(e){let n=hn.lFrame.currentDirectiveIndex;return n===-1?null:e[n]}function RD(){return hn.lFrame.currentQueryIndex}function zw(e){hn.lFrame.currentQueryIndex=e}function wK(e){let n=e[an];return n.type===2?n.declTNode:n.type===1?e[qo]:null}function qN(e,n,t){if(t&xn.SkipSelf){let r=n,o=e;for(;r=r.parent,r===null&&!(t&xn.Host);)if(r=wK(o),r===null||(o=o[Pf],r.type&10))break;if(r===null)return!1;n=r,e=o}let i=hn.lFrame=WN();return i.currentTNode=n,i.lView=e,!0}function OD(e){let n=WN(),t=e[an];hn.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function WN(){let e=hn.lFrame,n=e===null?null:e.child;return n===null?ZN(e):n}function ZN(e){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=n),n}function KN(){let e=hn.lFrame;return hn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var YN=KN;function kD(){let e=KN();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function xK(e){return(hn.lFrame.contextLView=sK(e,hn.lFrame.contextLView))[mo]}function mc(){return hn.lFrame.selectedIndex}function Qd(e){hn.lFrame.selectedIndex=e}function Vw(){let e=hn.lFrame;return DD(e.tView,e.selectedIndex)}function Na(){hn.lFrame.currentNamespace=NN}function ah(){SK()}function SK(){hn.lFrame.currentNamespace=null}function CK(){return hn.lFrame.currentNamespace}var JN=!0;function jw(){return JN}function Hw(e){JN=e}function EK(e,n,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){let d=RN(n);(t.preOrderHooks??=[]).push(e,d),(t.preOrderCheckHooks??=[]).push(e,d)}r&&(t.preOrderHooks??=[]).push(0-e,r),o&&((t.preOrderHooks??=[]).push(e,o),(t.preOrderCheckHooks??=[]).push(e,o))}function $w(e,n){for(let t=n.directiveStart,i=n.directiveEnd;t<i;t++){let o=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:g,ngAfterViewInit:v,ngAfterViewChecked:x,ngOnDestroy:D}=o;d&&(e.contentHooks??=[]).push(-t,d),g&&((e.contentHooks??=[]).push(t,g),(e.contentCheckHooks??=[]).push(t,g)),v&&(e.viewHooks??=[]).push(-t,v),x&&((e.viewHooks??=[]).push(t,x),(e.viewCheckHooks??=[]).push(t,x)),D!=null&&(e.destroyHooks??=[]).push(t,D)}}function $b(e,n,t){XN(e,n,3,t)}function Gb(e,n,t,i){(e[tn]&3)===t&&XN(e,n,t,i)}function aI(e,n){let t=e[tn];(t&3)===n&&(t&=16383,t+=1,e[tn]=t)}function XN(e,n,t,i){let r=i!==void 0?e[mf]&65535:0,o=i??-1,d=n.length-1,g=0;for(let v=r;v<d;v++)if(typeof n[v+1]=="number"){if(g=n[v],i!=null&&g>=i)break}else n[v]<0&&(e[mf]+=65536),(g<o||o==-1)&&(IK(e,t,n,v),e[mf]=(e[mf]&4294901760)+v+2),v++}function w2(e,n){ul(4,e,n);let t=wn(null);try{n.call(e)}finally{wn(t),ul(5,e,n)}}function IK(e,n,t,i){let r=t[i]<0,o=t[i+1],d=r?-t[i]:t[i],g=e[d];r?e[tn]>>14<e[mf]>>16&&(e[tn]&3)===n&&(e[tn]+=16384,w2(g,o)):w2(g,o)}var _f=-1,eh=class{constructor(n,t,i){this.factory=n,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function DK(e){return e instanceof eh}function TK(e){return(e.flags&8)!==0}function AK(e){return(e.flags&16)!==0}var lI={},MI=class{constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,i){i=Tw(i);let r=this.injector.get(n,lI,i);return r!==lI||t===lI?r:this.parentInjector.get(n,t,i)}};function QN(e){return e!==_f}function tw(e){return e&32767}function MK(e){return e>>16}function nw(e,n){let t=MK(e),i=n;for(;t>0;)i=i[Pf],t--;return i}var PI=!0;function iw(e){let n=PI;return PI=e,n}var PK=256,eF=PK-1,tF=5,RK=0,dl={};function OK(e,n,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Dy)&&(i=t[Dy]),i==null&&(i=t[Dy]=RK++);let r=i&eF,o=1<<r;n.data[e+(r>>tF)]|=o}function rw(e,n){let t=nF(e,n);if(t!==-1)return t;let i=n[an];i.firstCreatePass&&(e.injectorIndex=n.length,cI(i.data,e),cI(n,null),cI(i.blueprint,null));let r=ND(e,n),o=e.injectorIndex;if(QN(r)){let d=tw(r),g=nw(r,n),v=g[an].data;for(let x=0;x<8;x++)n[o+x]=g[d+x]|v[d+x]}return n[o+8]=r,o}function cI(e,n){e.push(0,0,0,0,0,0,0,0,n)}function nF(e,n){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||n[e.injectorIndex+8]===null?-1:e.injectorIndex}function ND(e,n){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let t=0,i=null,r=n;for(;r!==null;){if(i=aF(r),i===null)return _f;if(t++,r=r[Pf],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return _f}function RI(e,n,t){OK(e,n,t)}function kK(e,n){if(n==="class")return e.classes;if(n==="style")return e.styles;let t=e.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(mN(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===n)return t[r+1];r=r+2}}}return null}function iF(e,n,t){if(t&xn.Optional||e!==void 0)return e;wD(n,"NodeInjector")}function rF(e,n,t,i){if(t&xn.Optional&&i===void 0&&(i=null),!(t&(xn.Self|xn.Host))){let r=e[Sf],o=Go(void 0);try{return r?r.get(n,i,t&xn.Optional):cN(n,i,t&xn.Optional)}finally{Go(o)}}return iF(i,n,t)}function oF(e,n,t,i=xn.Default,r){if(e!==null){if(n[tn]&2048&&!(i&xn.Self)){let d=BK(e,n,t,i,dl);if(d!==dl)return d}let o=sF(e,n,t,i,dl);if(o!==dl)return o}return rF(n,t,i,r)}function sF(e,n,t,i,r){let o=FK(t);if(typeof o=="function"){if(!qN(n,e,i))return i&xn.Host?iF(r,t,i):rF(n,t,i,r);try{let d;if(d=o(i),d==null&&!(i&xn.Optional))wD(t);else return d}finally{YN()}}else if(typeof o=="number"){let d=null,g=nF(e,n),v=_f,x=i&xn.Host?n[ms][qo]:null;for((g===-1||i&xn.SkipSelf)&&(v=g===-1?ND(e,n):n[g+8],v===_f||!S2(i,!1)?g=-1:(d=n[an],g=tw(v),n=nw(v,n)));g!==-1;){let D=n[an];if(x2(o,g,D.data)){let R=NK(g,n,t,d,i,x);if(R!==dl)return R}v=n[g+8],v!==_f&&S2(i,n[an].data[g+8]===x)&&x2(o,g,n)?(d=D,g=tw(v),n=nw(v,n)):g=-1}}return r}function NK(e,n,t,i,r,o){let d=n[an],g=d.data[e+8],v=i==null?Fw(g)&&PI:i!=d&&(g.type&3)!==0,x=r&xn.Host&&o===g,D=qb(g,d,t,v,x);return D!==null?th(n,d,D,g):dl}function qb(e,n,t,i,r){let o=e.providerIndexes,d=n.data,g=o&1048575,v=e.directiveStart,x=e.directiveEnd,D=o>>20,R=i?g:g+D,L=r?g+D:x;for(let j=R;j<L;j++){let J=d[j];if(j<v&&t===J||j>=v&&J.type===t)return j}if(r){let j=d[v];if(j&&Du(j)&&j.type===t)return v}return null}function th(e,n,t,i){let r=e[t],o=n.data;if(DK(r)){let d=r;d.resolving&&uZ(cZ(o[t]));let g=iw(d.canSeeViewProviders);d.resolving=!0;let v,x=d.injectImpl?Go(d.injectImpl):null,D=qN(e,i,xn.Default);try{r=e[t]=d.factory(void 0,o,e,i),n.firstCreatePass&&t>=i.directiveStart&&EK(t,o[t],n)}finally{x!==null&&Go(x),iw(g),d.resolving=!1,YN()}}return r}function FK(e){if(typeof e=="string")return e.charCodeAt(0)||0;let n=e.hasOwnProperty(Dy)?e[Dy]:void 0;return typeof n=="number"?n>=0?n&eF:LK:n}function x2(e,n,t){let i=1<<e;return!!(t[n+(e>>tF)]&i)}function S2(e,n){return!(e&xn.Self)&&!(e&xn.Host&&n)}var Zd=class{constructor(n,t){this._tNode=n,this._lView=t}get(n,t,i){return oF(this._tNode,this._lView,n,Tw(i),t)}};function LK(){return new Zd(Qr(),rn())}function ea(e){return Fy(()=>{let n=e.prototype.constructor,t=n[Zb]||OI(n),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let o=r[Zb]||OI(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function OI(e){return iN(e)?()=>{let n=OI(Yr(e));return n&&n()}:Kd(e)}function BK(e,n,t,i,r){let o=e,d=n;for(;o!==null&&d!==null&&d[tn]&2048&&!(d[tn]&512);){let g=sF(o,d,t,i|xn.Self,dl);if(g!==dl)return g;let v=o.parent;if(!v){let x=d[AN];if(x){let D=x.get(t,dl,i);if(D!==dl)return D}v=aF(d),d=d[Pf]}o=v}return r}function aF(e){let n=e[an],t=n.type;return t===2?n.declTNode:t===1?e[qo]:null}function Gw(e){return kK(Qr(),e)}function C2(e,n=null,t=null,i){let r=lF(e,n,t,i);return r.resolveInjectorInitializers(),r}function lF(e,n=null,t=null,i,r=new Set){let o=[t||Ao,VZ(e)];return i=i||(typeof e=="object"?void 0:Mo(e)),new Py(o,n||Ow(),i||null,r)}var Un=class e{static{this.THROW_IF_NOT_FOUND=Ay}static{this.NULL=new Jb}static create(n,t){if(Array.isArray(n))return C2({name:""},t,n,"");{let i=n.name??"";return C2({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=Be({token:e,providedIn:"any",factory:()=>Re(hN)})}static{this.__NG_ELEMENT_ID__=-1}};var UK=new ct("");UK.__NG_ELEMENT_ID__=e=>{let n=Qr();if(n===null)throw new vt(204,!1);if(n.type&2)return n.value;if(e&xn.Optional)return null;throw new vt(204,!1)};var zK="ngOriginalError";function uI(e){return e[zK]}var cF=!0,ta=(()=>{class e{static{this.__NG_ELEMENT_ID__=VK}static{this.__NG_ENV_ID__=t=>t}}return e})(),kI=class extends ta{constructor(n){super(),this._lView=n}onDestroy(n){return zN(this._lView,n),()=>aK(this._lView,n)}};function VK(){return new kI(rn())}var Ru=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new cr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}}return e})();var NI=class extends Bt{constructor(n=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=n,TN()&&(this.destroyRef=Me(ta,{optional:!0})??void 0,this.pendingTasks=Me(Ru,{optional:!0})??void 0)}emit(n){let t=wn(null);try{super.next(n)}finally{wn(t)}}subscribe(n,t,i){let r=n,o=t||(()=>null),d=i;if(n&&typeof n=="object"){let v=n;r=v.next?.bind(v),o=v.error?.bind(v),d=v.complete?.bind(v)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),d&&(d=this.wrapInTimeout(d)));let g=super.subscribe({next:r,error:o,complete:d});return n instanceof gi&&n.add(g),g}wrapInTimeout(n){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{n(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},kn=NI;function ow(...e){}function uF(e){let n,t;function i(){e=ow;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{e(),i()})),()=>i()}function E2(e){return queueMicrotask(()=>e()),()=>{e=ow}}var FD="isAngularZone",sw=FD+"_ID",jK=0,jt=class e{constructor(n){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kn(!1),this.onMicrotaskEmpty=new kn(!1),this.onStable=new kn(!1),this.onError=new kn(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=cF}=n;if(typeof Zone>"u")throw new vt(908,!1);Zone.assertZonePatched();let d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!r&&i,d.shouldCoalesceRunChangeDetection=r,d.callbackScheduled=!1,d.scheduleInRootZone=o,GK(d)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(FD)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new vt(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new vt(909,!1)}run(n,t,i){return this._inner.run(n,t,i)}runTask(n,t,i,r){let o=this._inner,d=o.scheduleEventTask("NgZoneEvent: "+r,n,HK,ow,ow);try{return o.runTask(d,t,i)}finally{o.cancelTask(d)}}runGuarded(n,t,i){return this._inner.runGuarded(n,t,i)}runOutsideAngular(n){return this._outer.run(n)}},HK={};function LD(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function $K(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function n(){uF(()=>{e.callbackScheduled=!1,FI(e),e.isCheckStableRunning=!0,LD(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),FI(e)}function GK(e){let n=()=>{$K(e)},t=jK++;e._inner=e._inner.fork({name:"angular",properties:{[FD]:!0,[sw]:t,[sw+t]:!0},onInvokeTask:(i,r,o,d,g,v)=>{if(qK(v))return i.invokeTask(o,d,g,v);try{return I2(e),i.invokeTask(o,d,g,v)}finally{(e.shouldCoalesceEventChangeDetection&&d.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&n(),D2(e)}},onInvoke:(i,r,o,d,g,v,x)=>{try{return I2(e),i.invoke(o,d,g,v,x)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!WK(v)&&n(),D2(e)}},onHasTask:(i,r,o,d)=>{i.hasTask(o,d),r===o&&(d.change=="microTask"?(e._hasPendingMicrotasks=d.microTask,FI(e),LD(e)):d.change=="macroTask"&&(e.hasPendingMacrotasks=d.macroTask))},onHandleError:(i,r,o,d)=>(i.handleError(o,d),e.runOutsideAngular(()=>e.onError.emit(d)),!1)})}function FI(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function I2(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function D2(e){e._nesting--,LD(e)}var aw=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kn,this.onMicrotaskEmpty=new kn,this.onStable=new kn,this.onError=new kn}run(n,t,i){return n.apply(t,i)}runGuarded(n,t,i){return n.apply(t,i)}runOutsideAngular(n){return n()}runTask(n,t,i,r){return n.apply(t,i)}};function qK(e){return dF(e,"__ignore_ng_zone__")}function WK(e){return dF(e,"__scheduler_tick__")}function dF(e,n){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[n]===!0}function ZK(e="zone.js",n){return e==="noop"?new aw:e==="zone.js"?new jt(n):e}var ml=class{constructor(){this._console=console}handleError(n){let t=this._findOriginalError(n);this._console.error("ERROR",n),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(n){let t=n&&uI(n);for(;t&&uI(t);)t=uI(t);return t||null}},KK=new ct("",{providedIn:"root",factory:()=>{let e=Me(jt),n=Me(ml);return t=>e.runOutsideAngular(()=>n.handleError(t))}}),LI=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=Me(ml,{optional:!0}),this.destroyRef=Me(ta),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(n){if(this.destroyed)throw new vt(953,!1);return(this.listeners??=[]).push(n),{unsubscribe:()=>{let t=this.listeners?.indexOf(n);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(n){if(this.destroyed)throw new vt(953,!1);if(this.listeners===null)return;let t=wn(null);try{for(let i of this.listeners)try{i(n)}catch(r){this.errorHandler?.handleError(r)}}finally{wn(t)}}};function xt(e){return new LI}function T2(e,n){return tN(e,n)}function YK(e){return tN(eN,e)}var He=(T2.required=YK,T2);function JK(){return Rf(Qr(),rn())}function Rf(e,n){return new yi(Qs(e,n))}var yi=(()=>{class e{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=JK}}return e})();function hF(e){return e instanceof yi?e.nativeElement:e}function XK(){return this._results[Symbol.iterator]()}var lw=class e{get changes(){return this._changes??=new kn}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=e.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=XK)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;let i=wZ(n);(this._changesDetected=!bZ(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function pF(e){return(e.flags&128)===128}var fF=new Map,QK=0;function eY(){return QK++}function tY(e){fF.set(e[Nw],e)}function BI(e){fF.delete(e[Nw])}var A2="__ngContext__";function Au(e,n){Eu(n)?(e[A2]=n[Nw],tY(n)):e[A2]=n}function mF(e){return yF(e[Ry])}function gF(e){return yF(e[Oa])}function yF(e){for(;e!==null&&!fc(e);)e=e[Oa];return e}var UI;function _F(e){UI=e}function nY(){if(UI!==void 0)return UI;if(typeof document<"u")return document;throw new vt(210,!1)}var zy=new ct("",{providedIn:"root",factory:()=>iY}),iY="ng",BD=new ct(""),_s=new ct("",{providedIn:"platform",factory:()=>"unknown"});var vF=new ct(""),Vy=new ct("",{providedIn:"root",factory:()=>nY().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rY="h",oY="b";var sY=()=>null;function UD(e,n,t=!1){return sY(e,n,t)}var bF=!1,aY=new ct("",{providedIn:"root",factory:()=>bF});var Bb;function lY(){if(Bb===void 0&&(Bb=null,ka.trustedTypes))try{Bb=ka.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Bb}function M2(e){return lY()?.createScriptURL(e)||e}var cw=class{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Q2})`}};function lh(e){return e instanceof cw?e.changingThisBreaksApplicationSecurity:e}function zD(e,n){let t=cY(e);if(t!=null&&t!==n){if(t==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${Q2})`)}return t===n}function cY(e){return e instanceof cw&&e.getTypeName()||null}var uY=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wF(e){return e=String(e),e.match(uY)?e:"unsafe:"+e}var qw=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(qw||{});function VD(e){let n=SF();return n?n.sanitize(qw.URL,e)||"":zD(e,"URL")?lh(e):wF(vf(e))}function dY(e){let n=SF();if(n)return M2(n.sanitize(qw.RESOURCE_URL,e)||"");if(zD(e,"ResourceURL"))return M2(lh(e));throw new vt(904,!1)}function hY(e,n){return n==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||n==="href"&&(e==="base"||e==="link")?dY:VD}function xF(e,n,t){return hY(n,t)(e)}function SF(){let e=rn();return e&&e[pl].sanitizer}var pY=/^>|^->|<!--|-->|--!>|<!-$/g,fY=/(<|>)/g,mY="\u200B$1\u200B";function gY(e){return e.replace(pY,n=>n.replace(fY,mY))}function CF(e){return e instanceof Function?e():e}function EF(e){return(e??Me(Un)).get(_s)==="browser"}var hc=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(hc||{}),yY;function jD(e,n){return yY(e,n)}function gf(e,n,t,i,r){if(i!=null){let o,d=!1;fc(i)?o=i:Eu(i)&&(d=!0,i=i[pc]);let g=fl(i);e===0&&t!==null?r==null?MF(n,t,g):uw(n,t,g,r||null,!0):e===1&&t!==null?uw(n,t,g,r||null,!0):e===2?PY(n,g,d):e===3&&n.destroyNode(g),o!=null&&OY(n,e,o,t,r)}}function _Y(e,n){return e.createText(n)}function vY(e,n,t){e.setValue(n,t)}function bY(e,n){return e.createComment(gY(n))}function IF(e,n,t){return e.createElement(n,t)}function wY(e,n){DF(e,n),n[pc]=null,n[qo]=null}function xY(e,n,t,i,r,o){i[pc]=r,i[qo]=n,Kw(e,i,t,1,r,o)}function DF(e,n){n[pl].changeDetectionScheduler?.notify(9),Kw(e,n,n[ji],2,null,null)}function SY(e){let n=e[Ry];if(!n)return dI(e[an],e);for(;n;){let t=null;if(Eu(n))t=n[Ry];else{let i=n[go];i&&(t=i)}if(!t){for(;n&&!n[Oa]&&n!==e;)Eu(n)&&dI(n[an],n),n=n[yo];n===null&&(n=e),Eu(n)&&dI(n[an],n),t=n&&n[Oa]}n=t}}function CY(e,n,t,i){let r=go+i,o=t.length;i>0&&(t[r-1][Oa]=n),i<o-go?(n[Oa]=t[r],dN(t,go+i,n)):(t.push(n),n[Oa]=null),n[yo]=t;let d=n[Yd];d!==null&&t!==d&&TF(d,n);let g=n[dc];g!==null&&g.insertView(e),TI(n),n[tn]|=128}function TF(e,n){let t=e[Cf],i=n[yo];if(Eu(i))e[tn]|=ew.HasTransplantedViews;else{let r=i[yo][ms];n[ms]!==r&&(e[tn]|=ew.HasTransplantedViews)}t===null?e[Cf]=[n]:t.push(n)}function HD(e,n){let t=e[Cf],i=t.indexOf(n);t.splice(i,1)}function Oy(e,n){if(e.length<=go)return;let t=go+n,i=e[t];if(i){let r=i[Yd];r!==null&&r!==e&&HD(r,i),n>0&&(e[t-1][Oa]=i[Oa]);let o=Yb(e,go+n);wY(i[an],i);let d=o[dc];d!==null&&d.detachView(o[an]),i[yo]=null,i[Oa]=null,i[tn]&=-129}return i}function Ww(e,n){if(!(n[tn]&256)){let t=n[ji];t.destroyNode&&Kw(e,n,t,3,null,null),SY(n)}}function dI(e,n){if(n[tn]&256)return;let t=wn(null);try{n[tn]&=-129,n[tn]|=256,n[Js]&&LE(n[Js]),IY(e,n),EY(e,n),n[an].type===1&&n[ji].destroy();let i=n[Yd];if(i!==null&&fc(n[yo])){i!==n[yo]&&HD(i,n);let r=n[dc];r!==null&&r.detachView(e)}BI(n)}finally{wn(t)}}function EY(e,n){let t=e.cleanup,i=n[Xb];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let d=t[o+3];d>=0?i[d]():i[-d].unsubscribe(),o+=2}else{let d=i[t[o+1]];t[o].call(d)}i!==null&&(n[Xb]=null);let r=n[Cu];if(r!==null){n[Cu]=null;for(let o=0;o<r.length;o++){let d=r[o];d()}}}function IY(e,n){let t;if(e!=null&&(t=e.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=n[t[i]];if(!(r instanceof eh)){let o=t[i+1];if(Array.isArray(o))for(let d=0;d<o.length;d+=2){let g=r[o[d]],v=o[d+1];ul(4,g,v);try{v.call(g)}finally{ul(5,g,v)}}else{ul(4,r,o);try{o.call(r)}finally{ul(5,r,o)}}}}}function AF(e,n,t){return DY(e,n.parent,t)}function DY(e,n,t){let i=n;for(;i!==null&&i.type&168;)n=i,i=n.parent;if(i===null)return t[pc];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=e.data[i.directiveStart+r];if(o===hl.None||o===hl.Emulated)return null}return Qs(i,t)}}function uw(e,n,t,i,r){e.insertBefore(n,t,i,r)}function MF(e,n,t){e.appendChild(n,t)}function P2(e,n,t,i,r){i!==null?uw(e,n,t,i,r):MF(e,n,t)}function PF(e,n){return e.parentNode(n)}function TY(e,n){return e.nextSibling(n)}function RF(e,n,t){return MY(e,n,t)}function AY(e,n,t){return e.type&40?Qs(e,t):null}var MY=AY,R2;function Zw(e,n,t,i){let r=AF(e,i,n),o=n[ji],d=i.parent||n[qo],g=RF(d,i,n);if(r!=null)if(Array.isArray(t))for(let v=0;v<t.length;v++)P2(o,r,t[v],g,!1);else P2(o,r,t,g,!1);R2!==void 0&&R2(o,i,n,t,r)}function Iy(e,n){if(n!==null){let t=n.type;if(t&3)return Qs(n,e);if(t&4)return zI(-1,e[n.index]);if(t&8){let i=n.child;if(i!==null)return Iy(e,i);{let r=e[n.index];return fc(r)?zI(-1,r):fl(r)}}else{if(t&128)return Iy(e,n.next);if(t&32)return jD(n,e)()||fl(e[n.index]);{let i=OF(e,n);if(i!==null){if(Array.isArray(i))return i[0];let r=Xd(e[ms]);return Iy(r,i)}else return Iy(e,n.next)}}}return null}function OF(e,n){if(n!==null){let i=e[ms][qo],r=n.projection;return i.projection[r]}return null}function zI(e,n){let t=go+e+1;if(t<n.length){let i=n[t],r=i[an].firstChild;if(r!==null)return Iy(i,r)}return n[Jd]}function PY(e,n,t){e.removeChild(null,n,t)}function $D(e,n,t,i,r,o,d){for(;t!=null;){if(t.type===128){t=t.next;continue}let g=i[t.index],v=t.type;if(d&&n===0&&(g&&Au(fl(g),i),t.flags|=2),(t.flags&32)!==32)if(v&8)$D(e,n,t.child,i,r,o,!1),gf(n,e,r,g,o);else if(v&32){let x=jD(t,i),D;for(;D=x();)gf(n,e,r,D,o);gf(n,e,r,g,o)}else v&16?kF(e,n,i,t,r,o):gf(n,e,r,g,o);t=d?t.projectionNext:t.next}}function Kw(e,n,t,i,r,o){$D(t,i,e.firstChild,n,r,o,!1)}function RY(e,n,t){let i=n[ji],r=AF(e,t,n),o=t.parent||n[qo],d=RF(o,t,n);kF(i,0,n,t,r,d)}function kF(e,n,t,i,r,o){let d=t[ms],v=d[qo].projection[i.projection];if(Array.isArray(v))for(let x=0;x<v.length;x++){let D=v[x];gf(n,e,r,D,o)}else{let x=v,D=d[yo];pF(i)&&(x.flags|=128),$D(e,n,x,D,r,o,!0)}}function OY(e,n,t,i,r){let o=t[Jd],d=fl(t);o!==d&&gf(n,e,i,o,r);for(let g=go;g<t.length;g++){let v=t[g];Kw(v[an],v,e,n,i,o)}}function kY(e,n,t,i,r){if(n)r?e.addClass(t,i):e.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:hc.DashCase;r==null?e.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=hc.Important),e.setStyle(t,i,r,o))}}function NY(e,n,t){e.setAttribute(n,"style",t)}function NF(e,n,t){t===""?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}function FF(e,n,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&xI(e,n,i),r!==null&&NF(e,n,r),o!==null&&NY(e,n,o)}var vs={};function he(e=1){LF(Hi(),rn(),mc()+e,!1)}function LF(e,n,t,i){if(!i)if((n[tn]&3)===3){let o=e.preOrderCheckHooks;o!==null&&$b(n,o,t)}else{let o=e.preOrderHooks;o!==null&&Gb(n,o,0,t)}Qd(t)}function Je(e,n=xn.Default){let t=rn();if(t===null)return Re(e,n);let i=Qr();return oF(i,t,Yr(e),n)}function BF(){let e="invalid";throw new Error(e)}function UF(e,n,t,i,r,o){let d=wn(null);try{let g=null;r&Iu.SignalBased&&(g=n[i][Ks]),g!==null&&g.transformFn!==void 0&&(o=g.transformFn(o)),r&Iu.HasDecoratorInputTransform&&(o=e.inputTransforms[i].call(n,o)),e.setInput!==null?e.setInput(n,g,o,t,i):PN(n,g,i,o)}finally{wn(d)}}function FY(e,n){let t=e.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Qd(~r);else{let o=r,d=t[++i],g=t[++i];_K(d,o);let v=n[o];g(2,v)}}}finally{Qd(-1)}}function Yw(e,n,t,i,r,o,d,g,v,x,D){let R=n.blueprint.slice();return R[pc]=r,R[tn]=i|4|128|8|64,(x!==null||e&&e[tn]&2048)&&(R[tn]|=2048),BN(R),R[yo]=R[Pf]=e,R[mo]=t,R[pl]=d||e&&e[pl],R[ji]=g||e&&e[ji],R[Sf]=v||e&&e[Sf]||null,R[qo]=o,R[Nw]=eY(),R[xf]=D,R[AN]=x,R[ms]=n.type==2?e[ms]:R,R}function Of(e,n,t,i,r){let o=e.data[n];if(o===null)o=LY(e,n,t,i,r),yK()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let d=pK();o.injectorIndex=d===null?-1:d.injectorIndex}return oh(o,!0),o}function LY(e,n,t,i,r){let o=$N(),d=AD(),g=d?o:o&&o.parent,v=e.data[n]=HY(e,g,t,n,i,r);return e.firstChild===null&&(e.firstChild=v),o!==null&&(d?o.child==null&&v.parent!==null&&(o.child=v):o.next===null&&(o.next=v,v.prev=o)),v}function zF(e,n,t,i){if(t===0)return-1;let r=n.length;for(let o=0;o<t;o++)n.push(i),e.blueprint.push(i),e.data.push(null);return r}function VF(e,n,t,i,r){let o=mc(),d=i&2;try{Qd(-1),d&&n.length>Jr&&LF(e,n,Jr,!1),ul(d?2:0,r),t(i,r)}finally{Qd(o),ul(d?3:1,r)}}function GD(e,n,t){if(ID(n)){let i=wn(null);try{let r=n.directiveStart,o=n.directiveEnd;for(let d=r;d<o;d++){let g=e.data[d];if(g.contentQueries){let v=t[d];g.contentQueries(1,v,d)}}}finally{wn(i)}}}function qD(e,n,t){jN()&&(KY(e,n,t,Qs(t,n)),(t.flags&64)===64&&$F(e,n,t))}function WD(e,n,t=Qs){let i=n.localNames;if(i!==null){let r=n.index+1;for(let o=0;o<i.length;o+=2){let d=i[o+1],g=d===-1?t(n,e):e[d];e[r++]=g}}}function jF(e){let n=e.tView;return n===null||n.incompleteFirstPass?e.tView=ZD(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function ZD(e,n,t,i,r,o,d,g,v,x,D){let R=Jr+i,L=R+r,j=BY(R,L),J=typeof x=="function"?x():x;return j[an]={type:e,blueprint:j,template:t,queries:null,viewQuery:g,declTNode:n,data:j.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof d=="function"?d():d,firstChild:null,schemas:v,consts:J,incompleteFirstPass:!1,ssrId:D}}function BY(e,n){let t=[];for(let i=0;i<n;i++)t.push(i<e?null:vs);return t}function UY(e,n,t,i){let o=i.get(aY,bF)||t===hl.ShadowDom,d=e.selectRootElement(n,o);return zY(d),d}function zY(e){VY(e)}var VY=()=>null;function jY(e,n,t,i){let r=WF(n);r.push(t),e.firstCreatePass&&ZF(e).push(i,r.length-1)}function HY(e,n,t,i,r,o){let d=n?n.injectorIndex:-1,g=0;return HN()&&(g|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:g,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function O2(e,n,t,i,r){for(let o in n){if(!n.hasOwnProperty(o))continue;let d=n[o];if(d===void 0)continue;i??={};let g,v=Iu.None;Array.isArray(d)?(g=d[0],v=d[1]):g=d;let x=o;if(r!==null){if(!r.hasOwnProperty(o))continue;x=r[o]}e===0?k2(i,t,x,g,v):k2(i,t,x,g)}return i}function k2(e,n,t,i,r){let o;e.hasOwnProperty(t)?(o=e[t]).push(n,i):o=e[t]=[n,i],r!==void 0&&o.push(r)}function $Y(e,n,t){let i=n.directiveStart,r=n.directiveEnd,o=e.data,d=n.attrs,g=[],v=null,x=null;for(let D=i;D<r;D++){let R=o[D],L=t?t.get(R):null,j=L?L.inputs:null,J=L?L.outputs:null;v=O2(0,R.inputs,D,v,j),x=O2(1,R.outputs,D,x,J);let re=v!==null&&d!==null&&!SD(n)?sJ(v,D,d):null;g.push(re)}v!==null&&(v.hasOwnProperty("class")&&(n.flags|=8),v.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=g,n.inputs=v,n.outputs=x}function GY(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function KD(e,n,t,i,r,o,d,g){let v=Qs(n,t),x=n.inputs,D;!g&&x!=null&&(D=x[i])?(JD(e,t,D,i,r),Fw(n)&&qY(t,n.index)):n.type&3?(i=GY(i),r=d!=null?d(r,n.value||"",i):r,o.setProperty(v,i,r)):n.type&12}function qY(e,n){let t=Pu(n,e);t[tn]&16||(t[tn]|=64)}function YD(e,n,t,i){if(jN()){let r=i===null?null:{"":-1},o=JY(e,t),d,g;o===null?d=g=null:[d,g]=o,d!==null&&HF(e,n,t,d,r,g),r&&XY(t,i,r)}t.mergedAttrs=My(t.mergedAttrs,t.attrs)}function HF(e,n,t,i,r,o){for(let x=0;x<i.length;x++)RI(rw(t,n),e,i[x].type);eJ(t,e.data.length,i.length);for(let x=0;x<i.length;x++){let D=i[x];D.providersResolver&&D.providersResolver(D)}let d=!1,g=!1,v=zF(e,n,i.length,null);for(let x=0;x<i.length;x++){let D=i[x];t.mergedAttrs=My(t.mergedAttrs,D.hostAttrs),tJ(e,t,n,v,D),QY(v,D,r),D.contentQueries!==null&&(t.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(t.flags|=64);let R=D.type.prototype;!d&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),d=!0),!g&&(R.ngOnChanges||R.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),g=!0),v++}$Y(e,t,o)}function WY(e,n,t,i,r){let o=r.hostBindings;if(o){let d=e.hostBindingOpCodes;d===null&&(d=e.hostBindingOpCodes=[]);let g=~n.index;ZY(d)!=g&&d.push(g),d.push(t,i,o)}}function ZY(e){let n=e.length;for(;n>0;){let t=e[--n];if(typeof t=="number"&&t<0)return t}return 0}function KY(e,n,t,i){let r=t.directiveStart,o=t.directiveEnd;Fw(t)&&nJ(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||rw(t,n),Au(i,n);let d=t.initialInputs;for(let g=r;g<o;g++){let v=e.data[g],x=th(n,e,g,t);if(Au(x,n),d!==null&&oJ(n,g-r,x,v,t,d),Du(v)){let D=Pu(t.index,n);D[mo]=th(n,e,g,t)}}}function $F(e,n,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,d=vK();try{Qd(o);for(let g=i;g<r;g++){let v=e.data[g],x=n[g];AI(g),(v.hostBindings!==null||v.hostVars!==0||v.hostAttrs!==null)&&YY(v,x)}}finally{Qd(-1),AI(d)}}function YY(e,n){e.hostBindings!==null&&e.hostBindings(1,n)}function JY(e,n){let t=e.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let d=t[o];if(yN(n,d.selectors,!1))if(i||(i=[]),Du(d))if(d.findHostDirectiveDefs!==null){let g=[];r=r||new Map,d.findHostDirectiveDefs(d,g,r),i.unshift(...g,d);let v=g.length;VI(e,n,v)}else i.unshift(d),VI(e,n,0);else r=r||new Map,d.findHostDirectiveDefs?.(d,i,r),i.push(d)}return i===null?null:[i,r]}function VI(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function XY(e,n,t){if(n){let i=e.localNames=[];for(let r=0;r<n.length;r+=2){let o=t[n[r+1]];if(o==null)throw new vt(-301,!1);i.push(n[r],o)}}}function QY(e,n,t){if(t){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)t[n.exportAs[i]]=e;Du(n)&&(t[""]=e)}}function eJ(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}function tJ(e,n,t,i,r){e.data[i]=r;let o=r.factory||(r.factory=Kd(r.type,!0)),d=new eh(o,Du(r),Je);e.blueprint[i]=d,t[i]=d,WY(e,n,i,zF(e,t,r.hostVars,vs),r)}function nJ(e,n,t){let i=Qs(n,e),r=jF(t),o=e[pl].rendererFactory,d=16;t.signals?d=4096:t.onPush&&(d=64);let g=Jw(e,Yw(e,r,null,d,i,n,null,o.createRenderer(i,t),null,null,null));e[n.index]=g}function iJ(e,n,t,i,r,o){let d=Qs(e,n);rJ(n[ji],d,o,e.value,t,i,r)}function rJ(e,n,t,i,r,o,d){if(o==null)e.removeAttribute(n,r,t);else{let g=d==null?vf(o):d(o,i||"",r);e.setAttribute(n,r,g,t)}}function oJ(e,n,t,i,r,o){let d=o[n];if(d!==null)for(let g=0;g<d.length;){let v=d[g++],x=d[g++],D=d[g++],R=d[g++];UF(i,t,v,x,D,R)}}function sJ(e,n,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){i===null&&(i=[]);let d=e[o];for(let g=0;g<d.length;g+=3)if(d[g]===n){i.push(o,d[g+1],d[g+2],t[r+1]);break}}r+=2}return i}function GF(e,n,t,i){return[e,!0,0,n,null,i,null,t,null,null]}function qF(e,n){let t=e.contentQueries;if(t!==null){let i=wn(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],d=t[r+1];if(d!==-1){let g=e.data[d];zw(o),g.contentQueries(2,n[d],d)}}}finally{wn(i)}}}function Jw(e,n){return e[Ry]?e[_2][Oa]=n:e[Ry]=n,e[_2]=n,n}function jI(e,n,t){zw(0);let i=wn(null);try{n(e,t)}finally{wn(i)}}function WF(e){return e[Xb]??=[]}function ZF(e){return e.cleanup??=[]}function KF(e,n){let t=e[Sf],i=t?t.get(ml,null):null;i&&i.handleError(n)}function JD(e,n,t,i,r){for(let o=0;o<t.length;){let d=t[o++],g=t[o++],v=t[o++],x=n[d],D=e.data[d];UF(D,x,i,g,v,r)}}function YF(e,n,t){let i=FN(n,e);vY(e[ji],i,t)}function aJ(e,n){let t=Pu(n,e),i=t[an];lJ(i,t);let r=t[pc];r!==null&&t[xf]===null&&(t[xf]=UD(r,t[Sf])),XD(i,t,t[mo])}function lJ(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}function XD(e,n,t){OD(n);try{let i=e.viewQuery;i!==null&&jI(1,i,t);let r=e.template;r!==null&&VF(e,n,r,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[dc]?.finishViewCreation(e),e.staticContentQueries&&qF(e,n),e.staticViewQueries&&jI(2,e.viewQuery,t);let o=e.components;o!==null&&cJ(n,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{n[tn]&=-5,kD()}}function cJ(e,n){for(let t=0;t<n.length;t++)aJ(e,n[t])}function jy(e,n,t,i){let r=wn(null);try{let o=n.tView,g=e[tn]&4096?4096:16,v=Yw(e,o,t,g,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),x=e[n.index];v[Yd]=x;let D=e[dc];return D!==null&&(v[dc]=D.createEmbeddedView(o)),XD(o,v,t),v}finally{wn(r)}}function JF(e,n){let t=go+n;if(t<e.length)return e[t]}function Ef(e,n){return!n||n.firstChild===null||pF(e)}function Hy(e,n,t,i=!0){let r=n[an];if(CY(r,n,e,t),i){let d=zI(t,e),g=n[ji],v=PF(g,e[Jd]);v!==null&&xY(r,e[qo],g,n,v,d)}let o=n[xf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function XF(e,n){let t=Oy(e,n);return t!==void 0&&Ww(t[an],t),t}function dw(e,n,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=n[t.index];o!==null&&i.push(fl(o)),fc(o)&&uJ(o,i);let d=t.type;if(d&8)dw(e,n,t.child,i);else if(d&32){let g=jD(t,n),v;for(;v=g();)i.push(v)}else if(d&16){let g=OF(n,t);if(Array.isArray(g))i.push(...g);else{let v=Xd(n[ms]);dw(v[an],v,g,i,!0)}}t=r?t.projectionNext:t.next}return i}function uJ(e,n){for(let t=go;t<e.length;t++){let i=e[t],r=i[an].firstChild;r!==null&&dw(i[an],i,r,n)}e[Jd]!==e[pc]&&n.push(e[Jd])}var QF=[];function dJ(e){return e[Js]??hJ(e)}function hJ(e){let n=QF.pop()??Object.create(fJ);return n.lView=e,n}function pJ(e){e.lView[Js]!==e&&(e.lView=null,QF.push(e))}var fJ=Ie(q({},_y),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Uw(e.lView)},consumerOnSignalRead(){this.lView[Js]=this}});function mJ(e){let n=e[Js]??Object.create(gJ);return n.lView=e,n}var gJ=Ie(q({},_y),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let n=Xd(e.lView);for(;n&&!eL(n[an]);)n=Xd(n);n&&UN(n)},consumerOnSignalRead(){this.lView[Js]=this}});function eL(e){return e.type!==2}var yJ=100;function tL(e,n=!0,t=0){let i=e[pl],r=i.rendererFactory,o=!1;o||r.begin?.();try{_J(e,t)}catch(d){throw n&&KF(e,d),d}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function _J(e,n){let t=GN();try{b2(!0),HI(e,n);let i=0;for(;Bw(e);){if(i===yJ)throw new vt(103,!1);i++,HI(e,1)}}finally{b2(t)}}function vJ(e,n,t,i){let r=n[tn];if((r&256)===256)return;let o=!1,d=!1;!o&&n[pl].inlineEffectRunner?.flush(),OD(n);let g=!0,v=null,x=null;o||(eL(e)?(x=dJ(n),v=sb(x)):Ck()===null?(g=!1,x=mJ(n),v=sb(x)):n[Js]&&(LE(n[Js]),n[Js]=null));try{BN(n),gK(e.bindingStartIndex),t!==null&&VF(e,n,t,2,i);let D=(r&3)===3;if(!o)if(D){let j=e.preOrderCheckHooks;j!==null&&$b(n,j,null)}else{let j=e.preOrderHooks;j!==null&&Gb(n,j,0,null),aI(n,0)}if(d||bJ(n),nL(n,0),e.contentQueries!==null&&qF(e,n),!o)if(D){let j=e.contentCheckHooks;j!==null&&$b(n,j)}else{let j=e.contentHooks;j!==null&&Gb(n,j,1),aI(n,1)}FY(e,n);let R=e.components;R!==null&&rL(n,R,0);let L=e.viewQuery;if(L!==null&&jI(2,L,i),!o)if(D){let j=e.viewCheckHooks;j!==null&&$b(n,j)}else{let j=e.viewHooks;j!==null&&Gb(n,j,2),aI(n,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),n[sI]){for(let j of n[sI])j();n[sI]=null}o||(n[tn]&=-73)}catch(D){throw o||Uw(n),D}finally{x!==null&&(NE(x,v),g&&pJ(x)),kD()}}function nL(e,n){for(let t=mF(e);t!==null;t=gF(t))for(let i=go;i<t.length;i++){let r=t[i];iL(r,n)}}function bJ(e){for(let n=mF(e);n!==null;n=gF(n)){if(!(n[tn]&ew.HasTransplantedViews))continue;let t=n[Cf];for(let i=0;i<t.length;i++){let r=t[i];UN(r)}}}function wJ(e,n,t){let i=Pu(n,e);iL(i,t)}function iL(e,n){TD(e)&&HI(e,n)}function HI(e,n){let i=e[an],r=e[tn],o=e[Js],d=!!(n===0&&r&16);if(d||=!!(r&64&&n===0),d||=!!(r&1024),d||=!!(o?.dirty&&FE(o)),d||=!1,o&&(o.dirty=!1),e[tn]&=-9217,d)vJ(i,e,i.template,e[mo]);else if(r&8192){nL(e,1);let g=i.components;g!==null&&rL(e,g,1)}}function rL(e,n,t){for(let i=0;i<n.length;i++)wJ(e,n[i],t)}function QD(e,n){let t=GN()?64:1088;for(e[pl].changeDetectionScheduler?.notify(n);e;){e[tn]|=t;let i=Xd(e);if(II(e)&&!i)return e;e=i}return null}var nh=class{get rootNodes(){let n=this._lView,t=n[an];return dw(t,n,t.firstChild,[])}constructor(n,t,i=!0){this._lView=n,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mo]}set context(n){this._lView[mo]=n}get destroyed(){return(this._lView[tn]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[yo];if(fc(n)){let t=n[Qb],i=t?t.indexOf(this):-1;i>-1&&(Oy(n,i),Yb(t,i))}this._attachedToViewContainer=!1}Ww(this._lView[an],this._lView)}onDestroy(n){zN(this._lView,n)}markForCheck(){QD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[tn]&=-129}reattach(){TI(this._lView),this._lView[tn]|=128}detectChanges(){this._lView[tn]|=1024,tL(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new vt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=II(this._lView),t=this._lView[Yd];t!==null&&!n&&HD(t,this._lView),DF(this._lView[an],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new vt(902,!1);this._appRef=n;let t=II(this._lView),i=this._lView[Yd];i!==null&&!t&&TF(i,this._lView),TI(this._lView)}},Xr=(()=>{class e{static{this.__NG_ELEMENT_ID__=CJ}}return e})(),xJ=Xr,SJ=class extends xJ{constructor(n,t,i){super(),this._declarationLView=n,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,t){return this.createEmbeddedViewImpl(n,t)}createEmbeddedViewImpl(n,t,i){let r=jy(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:t,dehydratedView:i});return new nh(r)}};function CJ(){return eT(Qr(),rn())}function eT(e,n){return e.type&4?new SJ(n,e,Rf(e,n)):null}var yTe=new RegExp(`^(\\d+)*(${oY}|${rY})*(.*)`);var EJ=()=>null;function If(e,n){return EJ(e,n)}var Df=class{},tT=new ct("",{providedIn:"root",factory:()=>!1});var oL=new ct(""),sL=new ct(""),$I=class{},hw=class{};function IJ(e){let n=Error(`No component factory found for ${Mo(e)}.`);return n[DJ]=e,n}var DJ="ngComponent";var GI=class{resolveComponentFactory(n){throw IJ(n)}},gl=class{static{this.NULL=new GI}},Tf=class{},ch=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>TJ()}}return e})();function TJ(){let e=rn(),n=Qr(),t=Pu(n.index,e);return(Eu(t)?t:e)[ji]}var AJ=(()=>{class e{static{this.\u0275prov=Be({token:e,providedIn:"root",factory:()=>null})}}return e})();function pw(e,n,t){let i=t?e.styles:null,r=t?e.classes:null,o=0;if(n!==null)for(let d=0;d<n.length;d++){let g=n[d];if(typeof g=="number")o=g;else if(o==1)r=_I(r,g);else if(o==2){let v=g,x=n[++d];i=_I(i,v+": "+x+";")}}t?e.styles=i:e.stylesWithoutHost=i,t?e.classes=r:e.classesWithoutHost=r}var fw=class extends gl{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let t=uc(n);return new ih(t,this.ngModule)}};function N2(e,n){let t=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let r=e[i];if(r===void 0)continue;let o=Array.isArray(r),d=o?r[0]:r,g=o?r[1]:Iu.None;n?t.push({propName:d,templateName:i,isSignal:(g&Iu.SignalBased)!==0}):t.push({propName:d,templateName:i})}return t}function MJ(e){let n=e.toLowerCase();return n==="svg"?NN:n==="math"?iK:null}var ih=class extends hw{get inputs(){let n=this.componentDef,t=n.inputTransforms,i=N2(n.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return N2(this.componentDef.outputs,!1)}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=FZ(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!t}create(n,t,i,r){let o=wn(null);try{r=r||this.ngModule;let d=r instanceof ur?r:r?.injector;d&&this.componentDef.getStandaloneInjector!==null&&(d=this.componentDef.getStandaloneInjector(d)||d);let g=d?new MI(n,d):n,v=g.get(Tf,null);if(v===null)throw new vt(407,!1);let x=g.get(AJ,null),D=g.get(Df,null),R={rendererFactory:v,sanitizer:x,inlineEffectRunner:null,changeDetectionScheduler:D},L=v.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",J=i?UY(L,i,this.componentDef.encapsulation,g):IF(L,j,MJ(j)),re=512;this.componentDef.signals?re|=4096:this.componentDef.onPush||(re|=16);let be=null;J!==null&&(be=UD(J,g,!0));let xe=ZD(0,null,null,1,0,null,null,null,null,null,null),Pe=Yw(null,xe,null,re,null,null,R,L,g,null,be);OD(Pe);let Ne,Ve,We=null;try{let rt=this.componentDef,gt,Gt=null;rt.findHostDirectiveDefs?(gt=[],Gt=new Map,rt.findHostDirectiveDefs(rt,gt,Gt),gt.push(rt)):gt=[rt];let st=PJ(Pe,J);We=RJ(st,J,rt,gt,Pe,R,L),Ve=DD(xe,Jr),J&&NJ(L,rt,J,i),t!==void 0&&FJ(Ve,this.ngContentSelectors,t),Ne=kJ(We,rt,gt,Gt,Pe,[LJ]),XD(xe,Pe,null)}catch(rt){throw We!==null&&BI(We),BI(Pe),rt}finally{kD()}return new qI(this.componentType,Ne,Rf(Ve,Pe),Pe,Ve)}finally{wn(o)}}},qI=class extends $I{constructor(n,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new nh(r,void 0,!1),this.componentType=n}setInput(n,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;let o=this._rootLView;JD(o[an],o,r,n,t),this.previousInputValues.set(n,t);let d=Pu(this._tNode.index,o);QD(d,1)}}get injector(){return new Zd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function PJ(e,n){let t=e[an],i=Jr;return e[i]=n,Of(t,i,2,"#host",null)}function RJ(e,n,t,i,r,o,d){let g=r[an];OJ(i,e,n,d);let v=null;n!==null&&(v=UD(n,r[Sf]));let x=o.rendererFactory.createRenderer(n,t),D=16;t.signals?D=4096:t.onPush&&(D=64);let R=Yw(r,jF(t),null,D,r[e.index],e,o,x,null,null,v);return g.firstCreatePass&&VI(g,e,i.length-1),Jw(r,R),r[e.index]=R}function OJ(e,n,t,i){for(let r of e)n.mergedAttrs=My(n.mergedAttrs,r.hostAttrs);n.mergedAttrs!==null&&(pw(n,n.mergedAttrs,!0),t!==null&&FF(i,t,n))}function kJ(e,n,t,i,r,o){let d=Qr(),g=r[an],v=Qs(d,r);HF(g,r,d,t,null,i);for(let D=0;D<t.length;D++){let R=d.directiveStart+D,L=th(r,g,R,d);Au(L,r)}$F(g,r,d),v&&Au(v,r);let x=th(r,g,d.directiveStart+d.componentOffset,d);if(e[mo]=r[mo]=x,o!==null)for(let D of o)D(x,n);return GD(g,d,r),x}function NJ(e,n,t,i){if(i)xI(e,t,["ng-version","18.2.13"]);else{let{attrs:r,classes:o}=LZ(n.selectors[0]);r&&xI(e,t,r),o&&o.length>0&&NF(e,t,o.join(" "))}}function FJ(e,n,t){let i=e.projection=[];for(let r=0;r<n.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function LJ(){let e=Qr();$w(rn()[an],e)}var Wo=(()=>{class e{static{this.__NG_ELEMENT_ID__=BJ}}return e})();function BJ(){let e=Qr();return lL(e,rn())}var UJ=Wo,aL=class extends UJ{constructor(n,t,i){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=i}get element(){return Rf(this._hostTNode,this._hostLView)}get injector(){return new Zd(this._hostTNode,this._hostLView)}get parentInjector(){let n=ND(this._hostTNode,this._hostLView);if(QN(n)){let t=nw(n,this._hostLView),i=tw(n),r=t[an].data[i+8];return new Zd(r,t)}else return new Zd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let t=F2(this._lContainer);return t!==null&&t[n]||null}get length(){return this._lContainer.length-go}createEmbeddedView(n,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let d=If(this._lContainer,n.ssrId),g=n.createEmbeddedViewImpl(t||{},o,d);return this.insertImpl(g,r,Ef(this._hostTNode,d)),g}createComponent(n,t,i,r,o){let d=n&&!QZ(n),g;if(d)g=t;else{let J=t||{};g=J.index,i=J.injector,r=J.projectableNodes,o=J.environmentInjector||J.ngModuleRef}let v=d?n:new ih(uc(n)),x=i||this.parentInjector;if(!o&&v.ngModule==null){let re=(d?x:this.parentInjector).get(ur,null);re&&(o=re)}let D=uc(v.componentType??{}),R=If(this._lContainer,D?.id??null),L=R?.firstChild??null,j=v.create(x,r,L,o);return this.insertImpl(j.hostView,g,Ef(this._hostTNode,R)),j}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,i){let r=n._lView;if(oK(r)){let g=this.indexOf(n);if(g!==-1)this.detach(g);else{let v=r[yo],x=new aL(v,v[qo],v[yo]);x.detach(x.indexOf(n))}}let o=this._adjustIndex(t),d=this._lContainer;return Hy(d,r,o,i),n.attachToViewContainerRef(),dN(hI(d),o,n),n}move(n,t){return this.insert(n,t)}indexOf(n){let t=F2(this._lContainer);return t!==null?t.indexOf(n):-1}remove(n){let t=this._adjustIndex(n,-1),i=Oy(this._lContainer,t);i&&(Yb(hI(this._lContainer),t),Ww(i[an],i))}detach(n){let t=this._adjustIndex(n,-1),i=Oy(this._lContainer,t);return i&&Yb(hI(this._lContainer),t)!=null?new nh(i):null}_adjustIndex(n,t=0){return n??this.length+t}};function F2(e){return e[Qb]}function hI(e){return e[Qb]||(e[Qb]=[])}function lL(e,n){let t,i=n[e.index];return fc(i)?t=i:(t=GF(i,n,null,e),n[e.index]=t,Jw(n,t)),VJ(t,n,e,i),new aL(t,e,n)}function zJ(e,n){let t=e[ji],i=t.createComment(""),r=Qs(n,e),o=PF(t,r);return uw(t,o,i,TY(t,r),!1),i}var VJ=$J,jJ=()=>!1;function HJ(e,n,t){return jJ(e,n,t)}function $J(e,n,t,i){if(e[Jd])return;let r;t.type&8?r=fl(i):r=zJ(n,t),e[Jd]=r}var WI=class e{constructor(n){this.queryList=n,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},ZI=class e{constructor(n=[]){this.queries=n}createEmbeddedView(n){let t=n.queries;if(t!==null){let i=n.contentQueries!==null?n.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let d=t.getByIndex(o),g=this.queries[d.indexInDeclarationView];r.push(g.clone())}return new e(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)iT(n,t).matches!==null&&this.queries[t].setDirty()}},mw=class{constructor(n,t,i=null){this.flags=t,this.read=i,typeof n=="string"?this.predicate=YJ(n):this.predicate=n}},KI=class e{constructor(n=[]){this.queries=n}elementStart(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new e(t):null}template(n,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},YI=class e{constructor(n,t=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new e(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(n,t,GJ(t,o)),this.matchTNodeWithReadOption(n,t,qb(t,n,o,!1,!1))}else i===Xr?t.type&4&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,qb(t,n,i,!1,!1))}matchTNodeWithReadOption(n,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===yi||r===Wo||r===Xr&&t.type&4)this.addMatch(t.index,-2);else{let o=qb(t,n,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(n,t){this.matches===null?this.matches=[n,t]:this.matches.push(n,t)}};function GJ(e,n){let t=e.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===n)return t[i+1]}return null}function qJ(e,n){return e.type&11?Rf(e,n):e.type&4?eT(e,n):null}function WJ(e,n,t,i){return t===-1?qJ(n,e):t===-2?ZJ(e,n,i):th(e,e[an],t,n)}function ZJ(e,n,t){if(t===yi)return Rf(n,e);if(t===Xr)return eT(n,e);if(t===Wo)return lL(n,e)}function cL(e,n,t,i){let r=n[dc].queries[i];if(r.matches===null){let o=e.data,d=t.matches,g=[];for(let v=0;d!==null&&v<d.length;v+=2){let x=d[v];if(x<0)g.push(null);else{let D=o[x];g.push(WJ(n,D,d[v+1],t.metadata.read))}}r.matches=g}return r.matches}function JI(e,n,t,i){let r=e.queries.getByIndex(t),o=r.matches;if(o!==null){let d=cL(e,n,r,t);for(let g=0;g<o.length;g+=2){let v=o[g];if(v>0)i.push(d[g/2]);else{let x=o[g+1],D=n[-v];for(let R=go;R<D.length;R++){let L=D[R];L[Yd]===L[yo]&&JI(L[an],L,x,i)}if(D[Cf]!==null){let R=D[Cf];for(let L=0;L<R.length;L++){let j=R[L];JI(j[an],j,x,i)}}}}}return i}function nT(e,n){return e[dc].queries[n].queryList}function uL(e,n,t){let i=new lw((t&4)===4);return jY(e,n,i,i.destroy),(n[dc]??=new ZI).queries.push(new WI(i))-1}function dL(e,n,t){let i=Hi();return i.firstCreatePass&&(hL(i,new mw(e,n,t),-1),(n&2)===2&&(i.staticViewQueries=!0)),uL(i,rn(),n)}function KJ(e,n,t,i){let r=Hi();if(r.firstCreatePass){let o=Qr();hL(r,new mw(n,t,i),o.index),JJ(r,e),(t&2)===2&&(r.staticContentQueries=!0)}return uL(r,rn(),t)}function YJ(e){return e.split(",").map(n=>n.trim())}function hL(e,n,t){e.queries===null&&(e.queries=new KI),e.queries.track(new YI(n,t))}function JJ(e,n){let t=e.contentQueries||(e.contentQueries=[]),i=t.length?t[t.length-1]:-1;n!==i&&t.push(e.queries.length-1,n)}function iT(e,n){return e.queries.getByIndex(n)}function pL(e,n){let t=e[an],i=iT(t,n);return i.crossesNgTemplate?JI(t,e,n,[]):cL(t,e,i,n)}var L2=new Set;function gc(e){L2.has(e)||(L2.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function fL(e){return typeof e=="function"&&e[Ks]!==void 0}function Fr(e,n){gc("NgSignals");let t=kk(e),i=t[Ks];return n?.equal&&(i.equal=n.equal),t.set=r=>cb(i,r),t.update=r=>Nk(i,r),t.asReadonly=XJ.bind(t),t}function XJ(){let e=this[Ks];if(e.readonlyFn===void 0){let n=()=>this();n[Ks]=e,e.readonlyFn=n}return e.readonlyFn}function mL(e){return fL(e)&&typeof e.set=="function"}function gL(e,n){let t,i=BE(()=>{t._dirtyCounter();let r=nX(t,e);if(n&&r===void 0)throw new vt(-951,!1);return r});return t=i[Ks],t._dirtyCounter=Fr(0),t._flatValue=void 0,i}function QJ(){return gL(!0,!1)}function eX(){return gL(!0,!0)}function tX(e,n){let t=e[Ks];t._lView=rn(),t._queryIndex=n,t._queryList=nT(t._lView,n),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function nX(e,n){let t=e._lView,i=e._queryIndex;if(t===void 0||i===void 0||t[tn]&4)return n?void 0:Ao;let r=nT(t,i),o=pL(t,i);return r.reset(o,hF),n?r.first:r._changesDetected||e._flatValue===void 0?e._flatValue=r.toArray():e._flatValue}function B2(e,n){return QJ()}function iX(e,n){return eX()}var rT=(B2.required=iX,B2);function rX(e){let n=[],t=new Map;function i(r){let o=t.get(r);if(!o){let d=e(r);t.set(r,o=d.then(lX))}return o}return gw.forEach((r,o)=>{let d=[];r.templateUrl&&d.push(i(r.templateUrl).then(x=>{r.template=x}));let g=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=g,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let x=r.styles.length,D=r.styleUrls;r.styleUrls.forEach((R,L)=>{g.push(""),d.push(i(R).then(j=>{g[x+L]=j,D.splice(D.indexOf(R),1),D.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&d.push(i(r.styleUrl).then(x=>{g.push(x),r.styleUrl=void 0}));let v=Promise.all(d).then(()=>cX(o));n.push(v)}),sX(),Promise.all(n).then(()=>{})}var gw=new Map,oX=new Set;function sX(){let e=gw;return gw=new Map,e}function aX(){return gw.size===0}function lX(e){return typeof e=="string"?e:e.text()}function cX(e){oX.delete(e)}function uX(e){return Object.getPrototypeOf(e.prototype).constructor}function Cr(e){let n=uX(e.type),t=!0,i=[e];for(;n;){let r;if(Du(e))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new vt(903,!1);r=n.\u0275dir}if(r){if(t){i.push(r);let d=e;d.inputs=Ub(e.inputs),d.inputTransforms=Ub(e.inputTransforms),d.declaredInputs=Ub(e.declaredInputs),d.outputs=Ub(e.outputs);let g=r.hostBindings;g&&mX(e,g);let v=r.viewQuery,x=r.contentQueries;if(v&&pX(e,v),x&&fX(e,x),dX(e,r),tZ(e.outputs,r.outputs),Du(r)&&r.data.animation){let D=e.data;D.animation=(D.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let d=0;d<o.length;d++){let g=o[d];g&&g.ngInherit&&g(e),g===Cr&&(t=!1)}}n=Object.getPrototypeOf(n)}hX(i)}function dX(e,n){for(let t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;let i=n.inputs[t];if(i!==void 0&&(e.inputs[t]=i,e.declaredInputs[t]=n.declaredInputs[t],n.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!n.inputTransforms.hasOwnProperty(r))continue;e.inputTransforms??={},e.inputTransforms[r]=n.inputTransforms[r]}}}function hX(e){let n=0,t=null;for(let i=e.length-1;i>=0;i--){let r=e[i];r.hostVars=n+=r.hostVars,r.hostAttrs=My(r.hostAttrs,t=My(t,r.hostAttrs))}}function Ub(e){return e===cc?{}:e===Ao?[]:e}function pX(e,n){let t=e.viewQuery;t?e.viewQuery=(i,r)=>{n(i,r),t(i,r)}:e.viewQuery=n}function fX(e,n){let t=e.contentQueries;t?e.contentQueries=(i,r,o)=>{n(i,r,o),t(i,r,o)}:e.contentQueries=n}function mX(e,n){let t=e.hostBindings;t?e.hostBindings=(i,r)=>{n(i,r),t(i,r)}:e.hostBindings=n}function oT(e){let n=t=>{let i=Array.isArray(e);t.hostDirectives===null?(t.findHostDirectiveDefs=yL,t.hostDirectives=i?e.map(XI):[e]):i?t.hostDirectives.unshift(...e.map(XI)):t.hostDirectives.unshift(e)};return n.ngInherit=!0,n}function yL(e,n,t){if(e.hostDirectives!==null)for(let i of e.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)U2(XI(o),n,t)}else U2(i,n,t)}function U2(e,n,t){let i=CD(e.directive);gX(i.declaredInputs,e.inputs),yL(i,n,t),t.set(i,e),n.push(i)}function XI(e){return typeof e=="function"?{directive:Yr(e),inputs:cc,outputs:cc}:{directive:Yr(e.directive),inputs:z2(e.inputs),outputs:z2(e.outputs)}}function z2(e){if(e===void 0||e.length===0)return cc;let n={};for(let t=0;t<e.length;t+=2)n[e[t]]=e[t+1];return n}function gX(e,n){for(let t in n)if(n.hasOwnProperty(t)){let i=n[t],r=e[t];e[i]=r}}function uh(e){let n=e.inputConfig,t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}e.inputTransforms=t}var Mu=class{},ky=class{};var yw=class extends Mu{constructor(n,t,i,r=!0){super(),this.ngModuleType=n,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fw(this);let o=wN(n);this._bootstrapComponents=CF(o.bootstrap),this._r3Injector=lF(n,t,[{provide:Mu,useValue:this},{provide:gl,useValue:this.componentFactoryResolver},...i],Mo(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},_w=class extends ky{constructor(n){super(),this.moduleType=n}create(n){return new yw(this.moduleType,n,[])}};function yX(e,n,t){return new yw(e,n,t,!1)}var QI=class extends Mu{constructor(n){super(),this.componentFactoryResolver=new fw(this),this.instance=null;let t=new Py([...n.providers,{provide:Mu,useValue:this},{provide:gl,useValue:this.componentFactoryResolver}],n.parent||Ow(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function Xw(e,n,t=null){return new QI({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}function _L(e){return sT(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function _X(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{let t=e[Symbol.iterator](),i;for(;!(i=t.next()).done;)n(i.value)}}function sT(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Qw(e,n,t){return e[n]=t}function vX(e,n){return e[n]}function gs(e,n,t){let i=e[n];return Object.is(i,t)?!1:(e[n]=t,!0)}function aT(e,n,t,i){let r=gs(e,n,t);return gs(e,n+1,i)||r}function bX(e,n,t,i,r){let o=aT(e,n,t,i);return gs(e,n+2,r)||o}function wX(e){return(e.flags&32)===32}function xX(e,n,t,i,r,o,d,g,v){let x=n.consts,D=Of(n,e,4,d||null,g||null);YD(n,t,D,Tu(x,v)),$w(n,D);let R=D.tView=ZD(2,D,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return n.queries!==null&&(n.queries.template(n,D),R.queries=n.queries.embeddedTView(D)),D}function vw(e,n,t,i,r,o,d,g,v,x){let D=t+Jr,R=n.firstCreatePass?xX(D,n,e,i,r,o,d,g,v):n.data[D];oh(R,!1);let L=SX(n,e,R,t);jw()&&Zw(n,e,L,R),Au(L,e);let j=GF(L,e,L,R);return e[D]=j,Jw(e,j),HJ(j,R,e),Lw(R)&&qD(n,e,R),v!=null&&WD(e,R,x),R}function Nt(e,n,t,i,r,o,d,g){let v=rn(),x=Hi(),D=Tu(x.consts,o);return vw(v,x,e,n,t,i,r,D,d,g),Nt}var SX=CX;function CX(e,n,t,i){return Hw(!0),n[ji].createComment("")}var lc=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(lc||{}),vL=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}}return e})(),eD=class e{constructor(){this.ngZone=Me(jt),this.scheduler=Me(Df),this.errorHandler=Me(ml,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[lc.EarlyRead,lc.Write,lc.MixedReadWrite,lc.Read]}execute(){this.executing=!0;for(let n of e.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[n]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[n](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let n of this.sequences)n.afterRun(),n.once&&(this.sequences.delete(n),n.destroy());for(let n of this.deferredRegistrations)this.sequences.add(n);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(n){this.executing?this.deferredRegistrations.add(n):(this.sequences.add(n),this.scheduler.notify(6))}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}static{this.\u0275prov=Be({token:e,providedIn:"root",factory:()=>new e})}},tD=class{constructor(n,t,i,r){this.impl=n,this.hooks=t,this.once=i,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function kf(e,n){!n?.injector&&kw(kf);let t=n?.injector??Me(Un);return EF(t)?(gc("NgAfterRender"),bL(e,t,n,!1)):wL}function Po(e,n){!n?.injector&&kw(Po);let t=n?.injector??Me(Un);return EF(t)?(gc("NgAfterNextRender"),bL(e,t,n,!0)):wL}function EX(e,n){if(e instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[n]=e,t}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function bL(e,n,t,i){let r=n.get(vL);r.impl??=n.get(eD);let o=t?.phase??lc.MixedReadWrite,d=t?.manualCleanup!==!0?n.get(ta):null,g=new tD(r.impl,EX(e,o),i,d);return r.impl.register(g),g}var wL={destroy(){}};function In(e,n,t,i){let r=rn(),o=sh();if(gs(r,o,n)){let d=Hi(),g=Vw();iJ(g,r,e,n,t,i)}return In}function IX(e,n,t,i){return gs(e,sh(),t)?n+vf(t)+i:vs}function DX(e,n,t,i,r,o){let d=mK(),g=aT(e,d,t,r);return PD(2),g?n+vf(t)+i+vf(r)+o:vs}function zb(e,n){return e<<17|n<<2}function rh(e){return e>>17&32767}function TX(e){return(e&2)==2}function AX(e,n){return e&131071|n<<17}function nD(e){return e|2}function Af(e){return(e&131068)>>2}function pI(e,n){return e&-131069|n<<2}function MX(e){return(e&1)===1}function iD(e){return e|1}function PX(e,n,t,i,r,o){let d=o?n.classBindings:n.styleBindings,g=rh(d),v=Af(d);e[i]=t;let x=!1,D;if(Array.isArray(t)){let R=t;D=R[1],(D===null||By(R,D)>0)&&(x=!0)}else D=t;if(r)if(v!==0){let L=rh(e[g+1]);e[i+1]=zb(L,g),L!==0&&(e[L+1]=pI(e[L+1],i)),e[g+1]=AX(e[g+1],i)}else e[i+1]=zb(g,0),g!==0&&(e[g+1]=pI(e[g+1],i)),g=i;else e[i+1]=zb(v,0),g===0?g=i:e[v+1]=pI(e[v+1],i),v=i;x&&(e[i+1]=nD(e[i+1])),V2(e,D,i,!0),V2(e,D,i,!1),RX(n,D,e,i,o),d=zb(g,v),o?n.classBindings=d:n.styleBindings=d}function RX(e,n,t,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof n=="string"&&By(o,n)>=0&&(t[i+1]=iD(t[i+1]))}function V2(e,n,t,i){let r=e[t+1],o=n===null,d=i?rh(r):Af(r),g=!1;for(;d!==0&&(g===!1||o);){let v=e[d],x=e[d+1];OX(v,n)&&(g=!0,e[d+1]=i?iD(x):nD(x)),d=i?rh(x):Af(x)}g&&(e[t+1]=i?nD(r):iD(r))}function OX(e,n){return e===null||n==null||(Array.isArray(e)?e[1]:e)===n?!0:Array.isArray(e)&&typeof n=="string"?By(e,n)>=0:!1}var xr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xL(e){return e.substring(xr.key,xr.keyEnd)}function kX(e){return e.substring(xr.value,xr.valueEnd)}function NX(e){return EL(e),SL(e,Mf(e,0,xr.textEnd))}function SL(e,n){let t=xr.textEnd;return t===n?-1:(n=xr.keyEnd=LX(e,xr.key=n,t),Mf(e,n,t))}function FX(e){return EL(e),CL(e,Mf(e,0,xr.textEnd))}function CL(e,n){let t=xr.textEnd,i=xr.key=Mf(e,n,t);return t===i?-1:(i=xr.keyEnd=BX(e,i,t),i=j2(e,i,t,58),i=xr.value=Mf(e,i,t),i=xr.valueEnd=UX(e,i,t),j2(e,i,t,59))}function EL(e){xr.key=0,xr.keyEnd=0,xr.value=0,xr.valueEnd=0,xr.textEnd=e.length}function Mf(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function LX(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}function BX(e,n,t){let i;for(;n<t&&((i=e.charCodeAt(n))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)n++;return n}function j2(e,n,t,i){return n=Mf(e,n,t),n<t&&n++,n}function UX(e,n,t){let i=-1,r=-1,o=-1,d=n,g=d;for(;d<t;){let v=e.charCodeAt(d++);if(v===59)return g;v===34||v===39?g=d=H2(e,v,d,t):n===d-4&&o===85&&r===82&&i===76&&v===40?g=d=H2(e,41,d,t):v>32&&(g=d),o=r,r=i,i=v&-33}return g}function H2(e,n,t,i){let r=-1,o=t;for(;o<i;){let d=e.charCodeAt(o++);if(d==n&&r!==92)return o;d==92&&r===92?r=0:r=d}throw new Error}function Ce(e,n,t){let i=rn(),r=sh();if(gs(i,r,n)){let o=Hi(),d=Vw();KD(o,d,i,e,n,i[ji],t,!1)}return Ce}function rD(e,n,t,i,r){let o=n.inputs,d=r?"class":"style";JD(e,t,o[d],d,i)}function Fa(e,n,t){return DL(e,n,t,!1),Fa}function na(e,n){return DL(e,n,null,!0),na}function IL(e){TL(PL,zX,e,!1)}function zX(e,n){for(let t=FX(n);t>=0;t=CL(n,t))PL(e,xL(n),kX(n))}function Ro(e){TL(WX,VX,e,!0)}function VX(e,n){for(let t=NX(n);t>=0;t=SL(n,t))Mw(e,xL(n),!0)}function DL(e,n,t,i){let r=rn(),o=Hi(),d=PD(2);if(o.firstUpdatePass&&ML(o,e,d,i),n!==vs&&gs(r,d,n)){let g=o.data[mc()];RL(o,g,r,r[ji],e,r[d+1]=KX(n,t),i,d)}}function TL(e,n,t,i){let r=Hi(),o=PD(2);r.firstUpdatePass&&ML(r,null,o,i);let d=rn();if(t!==vs&&gs(d,o,t)){let g=r.data[mc()];if(OL(g,i)&&!AL(r,o)){let v=i?g.classesWithoutHost:g.stylesWithoutHost;v!==null&&(t=_I(v,t||"")),rD(r,g,d,t,i)}else ZX(r,g,d,d[ji],d[o+1],d[o+1]=qX(e,n,t),i,o)}}function AL(e,n){return n>=e.expandoStartIndex}function ML(e,n,t,i){let r=e.data;if(r[t+1]===null){let o=r[mc()],d=AL(e,t);OL(o,i)&&n===null&&!d&&(n=!1),n=jX(r,o,n,i),PX(r,o,n,t,d,i)}}function jX(e,n,t,i){let r=bK(e),o=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(t=fI(null,e,n,t,i),t=Ny(t,n.attrs,i),o=null);else{let d=n.directiveStylingLast;if(d===-1||e[d]!==r)if(t=fI(r,e,n,t,i),o===null){let v=HX(e,n,i);v!==void 0&&Array.isArray(v)&&(v=fI(null,e,n,v[1],i),v=Ny(v,n.attrs,i),$X(e,n,i,v))}else o=GX(e,n,i)}return o!==void 0&&(i?n.residualClasses=o:n.residualStyles=o),t}function HX(e,n,t){let i=t?n.classBindings:n.styleBindings;if(Af(i)!==0)return e[rh(i)]}function $X(e,n,t,i){let r=t?n.classBindings:n.styleBindings;e[rh(r)]=i}function GX(e,n,t){let i,r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++){let d=e[o].hostAttrs;i=Ny(i,d,t)}return Ny(i,n.attrs,t)}function fI(e,n,t,i,r){let o=null,d=t.directiveEnd,g=t.directiveStylingLast;for(g===-1?g=t.directiveStart:g++;g<d&&(o=n[g],i=Ny(i,o.hostAttrs,r),o!==e);)g++;return e!==null&&(t.directiveStylingLast=g),i}function Ny(e,n,t){let i=t?1:2,r=-1;if(n!==null)for(let o=0;o<n.length;o++){let d=n[o];typeof d=="number"?r=d:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Mw(e,d,t?!0:n[++o]))}return e===void 0?null:e}function qX(e,n,t){if(t==null||t==="")return Ao;let i=[],r=lh(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&n(i,r);return i}function PL(e,n,t){Mw(e,n,lh(t))}function WX(e,n,t){let i=String(n);i!==""&&!i.includes(" ")&&Mw(e,i,t)}function ZX(e,n,t,i,r,o,d,g){r===vs&&(r=Ao);let v=0,x=0,D=0<r.length?r[0]:null,R=0<o.length?o[0]:null;for(;D!==null||R!==null;){let L=v<r.length?r[v+1]:void 0,j=x<o.length?o[x+1]:void 0,J=null,re;D===R?(v+=2,x+=2,L!==j&&(J=R,re=j)):R===null||D!==null&&D<R?(v+=2,J=D):(x+=2,J=R,re=j),J!==null&&RL(e,n,t,i,J,re,d,g),D=v<r.length?r[v]:null,R=x<o.length?o[x]:null}}function RL(e,n,t,i,r,o,d,g){if(!(n.type&3))return;let v=e.data,x=v[g+1],D=MX(x)?$2(v,n,t,r,Af(x),d):void 0;if(!bw(D)){bw(o)||TX(x)&&(o=$2(v,null,t,r,g,d));let R=FN(mc(),t);kY(i,d,R,r,o)}}function $2(e,n,t,i,r,o){let d=n===null,g;for(;r>0;){let v=e[r],x=Array.isArray(v),D=x?v[1]:v,R=D===null,L=t[r+1];L===vs&&(L=R?Ao:void 0);let j=R?rI(L,i):D===i?L:void 0;if(x&&!bw(j)&&(j=rI(v,i)),bw(j)&&(g=j,d))return g;let J=e[r+1];r=d?rh(J):Af(J)}if(n!==null){let v=o?n.residualClasses:n.residualStyles;v!=null&&(g=rI(v,i))}return g}function bw(e){return e!==void 0}function KX(e,n){return e==null||e===""||(typeof n=="string"?e=e+n:typeof e=="object"&&(e=Mo(lh(e)))),e}function OL(e,n){return(e.flags&(n?8:16))!==0}var oD=class{destroy(n){}updateValue(n,t){}swap(n,t){let i=Math.min(n,t),r=Math.max(n,t),o=this.detach(r);if(r-i>1){let d=this.detach(i);this.attach(i,o),this.attach(r,d)}else this.attach(i,o)}move(n,t){this.attach(t,this.detach(n))}};function mI(e,n,t,i,r){return e===t&&Object.is(n,i)?1:Object.is(r(e,n),r(t,i))?-1:0}function YX(e,n,t){let i,r,o=0,d=e.length-1,g=void 0;if(Array.isArray(n)){let v=n.length-1;for(;o<=d&&o<=v;){let x=e.at(o),D=n[o],R=mI(o,x,o,D,t);if(R!==0){R<0&&e.updateValue(o,D),o++;continue}let L=e.at(d),j=n[v],J=mI(d,L,v,j,t);if(J!==0){J<0&&e.updateValue(d,j),d--,v--;continue}let re=t(o,x),be=t(d,L),xe=t(o,D);if(Object.is(xe,be)){let Pe=t(v,j);Object.is(Pe,re)?(e.swap(o,d),e.updateValue(d,j),v--,d--):e.move(d,o),e.updateValue(o,D),o++;continue}if(i??=new ww,r??=q2(e,o,d,t),sD(e,i,o,xe))e.updateValue(o,D),o++,d++;else if(r.has(xe))i.set(re,e.detach(o)),d--;else{let Pe=e.create(o,n[o]);e.attach(o,Pe),o++,d++}}for(;o<=v;)G2(e,i,t,o,n[o]),o++}else if(n!=null){let v=n[Symbol.iterator](),x=v.next();for(;!x.done&&o<=d;){let D=e.at(o),R=x.value,L=mI(o,D,o,R,t);if(L!==0)L<0&&e.updateValue(o,R),o++,x=v.next();else{i??=new ww,r??=q2(e,o,d,t);let j=t(o,R);if(sD(e,i,o,j))e.updateValue(o,R),o++,d++,x=v.next();else if(!r.has(j))e.attach(o,e.create(o,R)),o++,d++,x=v.next();else{let J=t(o,D);i.set(J,e.detach(o)),d--}}}for(;!x.done;)G2(e,i,t,e.length,x.value),x=v.next()}for(;o<=d;)e.destroy(e.detach(d--));i?.forEach(v=>{e.destroy(v)})}function sD(e,n,t,i){return n!==void 0&&n.has(i)?(e.attach(t,n.get(i)),n.delete(i),!0):!1}function G2(e,n,t,i,r){if(sD(e,n,i,t(i,r)))e.updateValue(i,r);else{let o=e.create(i,r);e.attach(i,o)}}function q2(e,n,t,i){let r=new Set;for(let o=n;o<=t;o++)r.add(i(o,e.at(o)));return r}var ww=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let t=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(n,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,t){if(this.kvMap.has(n)){let i=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(n,t)}forEach(n){for(let[t,i]of this.kvMap)if(n(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),n(i,t)}}};function dh(e,n){gc("NgControlFlow");let t=rn(),i=sh(),r=t[i]!==vs?t[i]:-1,o=r!==-1?xw(t,Jr+r):void 0,d=0;if(gs(t,i,e)){let g=wn(null);try{if(o!==void 0&&XF(o,d),e!==-1){let v=Jr+e,x=xw(t,v),D=uD(t[an],v),R=If(x,D.tView.ssrId),L=jy(t,D,n,{dehydratedView:R});Hy(x,L,d,Ef(D,R))}}finally{wn(g)}}else if(o!==void 0){let g=JF(o,d);g!==void 0&&(g[mo]=n)}}var aD=class{constructor(n,t,i){this.lContainer=n,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-go}};function $y(e){return e}var lD=class{constructor(n,t,i){this.hasEmptyBlock=n,this.trackByFn=t,this.liveCollection=i}};function Gy(e,n,t,i,r,o,d,g,v,x,D,R,L){gc("NgControlFlow");let j=rn(),J=Hi(),re=v!==void 0,be=rn(),xe=g?d.bind(be[ms][mo]):d,Pe=new lD(re,xe);be[Jr+e]=Pe,vw(j,J,e+1,n,t,i,r,Tu(J.consts,o)),re&&vw(j,J,e+2,v,x,D,R,Tu(J.consts,L))}var cD=class extends oD{constructor(n,t,i){super(),this.lContainer=n,this.hostLView=t,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-go}at(n){return this.getLView(n)[mo].$implicit}attach(n,t){let i=t[xf];this.needsIndexUpdate||=n!==this.length,Hy(this.lContainer,t,n,Ef(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,JX(this.lContainer,n)}create(n,t){let i=If(this.lContainer,this.templateTNode.tView.ssrId),r=jy(this.hostLView,this.templateTNode,new aD(this.lContainer,t,n),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(n){Ww(n[an],n),this.operationsCounter?.recordDestroy()}updateValue(n,t){this.getLView(n)[mo].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[mo].$index=n}getLView(n){return XX(this.lContainer,n)}};function qy(e){let n=wn(null),t=mc();try{let i=rn(),r=i[an],o=i[t],d=t+1,g=xw(i,d);if(o.liveCollection===void 0){let x=uD(r,d);o.liveCollection=new cD(g,i,x)}else o.liveCollection.reset();let v=o.liveCollection;if(YX(v,e,o.trackByFn),v.updateIndexes(),o.hasEmptyBlock){let x=sh(),D=v.length===0;if(gs(i,x,D)){let R=t+2,L=xw(i,R);if(D){let j=uD(r,R),J=If(L,j.tView.ssrId),re=jy(i,j,void 0,{dehydratedView:J});Hy(L,re,0,Ef(j,J))}else XF(L,0)}}}finally{wn(n)}}function xw(e,n){return e[n]}function JX(e,n){return Oy(e,n)}function XX(e,n){return JF(e,n)}function uD(e,n){return DD(e,n)}function QX(e,n,t,i,r,o){let d=n.consts,g=Tu(d,r),v=Of(n,e,2,i,g);return YD(n,t,v,Tu(d,o)),v.attrs!==null&&pw(v,v.attrs,!1),v.mergedAttrs!==null&&pw(v,v.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,v),v}function Y(e,n,t,i){let r=rn(),o=Hi(),d=Jr+e,g=r[ji],v=o.firstCreatePass?QX(d,o,r,n,t,i):o.data[d],x=eQ(o,r,v,g,n,e);r[d]=x;let D=Lw(v);return oh(v,!0),FF(g,x,v),!wX(v)&&jw()&&Zw(o,r,x,v),lK()===0&&Au(x,r),cK(),D&&(qD(o,r,v),GD(o,v,r)),i!==null&&WD(r,v),Y}function Z(){let e=Qr();AD()?MD():(e=e.parent,oh(e,!1));let n=e;dK(n)&&hK(),uK();let t=Hi();return t.firstCreatePass&&($w(t,e),ID(e)&&t.queries.elementEnd(e)),n.classesWithoutHost!=null&&TK(n)&&rD(t,n,rn(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&AK(n)&&rD(t,n,rn(),n.stylesWithoutHost,!1),Z}function Qe(e,n,t,i){return Y(e,n,t,i),Z(),Qe}var eQ=(e,n,t,i,r,o)=>(Hw(!0),IF(i,r,CK()));function tQ(e,n,t,i,r){let o=n.consts,d=Tu(o,i),g=Of(n,e,8,"ng-container",d);d!==null&&pw(g,d,!0);let v=Tu(o,r);return YD(n,t,g,v),n.queries!==null&&n.queries.elementStart(n,g),g}function ia(e,n,t){let i=rn(),r=Hi(),o=e+Jr,d=r.firstCreatePass?tQ(o,r,i,n,t):r.data[o];oh(d,!0);let g=nQ(r,i,d,e);return i[o]=g,jw()&&Zw(r,i,g,d),Au(g,i),Lw(d)&&(qD(r,i,d),GD(r,d,i)),t!=null&&WD(i,d),ia}function ra(){let e=Qr(),n=Hi();return AD()?MD():(e=e.parent,oh(e,!1)),n.firstCreatePass&&($w(n,e),ID(e)&&n.queries.elementEnd(e)),ra}function e1(e,n,t){return ia(e,n,t),ra(),e1}var nQ=(e,n,t,i)=>(Hw(!0),bY(n[ji],""));function Lr(){return rn()}function t1(e,n,t){let i=rn(),r=sh();if(gs(i,r,n)){let o=Hi(),d=Vw();KD(o,d,i,e,n,i[ji],t,!0)}return t1}var Sw="en-US";var iQ=Sw;function rQ(e){typeof e=="string"&&(iQ=e.toLowerCase().replace(/_/g,"-"))}var oQ=(e,n,t)=>{};function dt(e,n,t,i){let r=rn(),o=Hi(),d=Qr();return kL(o,r,r[ji],d,e,n,i),dt}function sQ(e,n,t,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let d=r[o];if(d===t&&r[o+1]===i){let g=n[Xb],v=r[o+2];return g.length>v?g[v]:null}typeof d=="string"&&(o+=2)}return null}function kL(e,n,t,i,r,o,d){let g=Lw(i),x=e.firstCreatePass&&ZF(e),D=n[mo],R=WF(n),L=!0;if(i.type&3||d){let re=Qs(i,n),be=d?d(re):re,xe=R.length,Pe=d?Ve=>d(fl(Ve[i.index])):i.index,Ne=null;if(!d&&g&&(Ne=sQ(e,n,r,i.index)),Ne!==null){let Ve=Ne.__ngLastListenerFn__||Ne;Ve.__ngNextListenerFn__=o,Ne.__ngLastListenerFn__=o,L=!1}else{o=Z2(i,n,D,o),oQ(re,r,o);let Ve=t.listen(be,r,o);R.push(o,Ve),x&&x.push(r,Pe,xe,xe+1)}}else o=Z2(i,n,D,o);let j=i.outputs,J;if(L&&j!==null&&(J=j[r])){let re=J.length;if(re)for(let be=0;be<re;be+=2){let xe=J[be],Pe=J[be+1],We=n[xe][Pe].subscribe(o),rt=R.length;R.push(o,We),x&&x.push(r,i.index,rt,-(rt+1))}}}function W2(e,n,t,i){let r=wn(null);try{return ul(6,n,t),t(i)!==!1}catch(o){return KF(e,o),!1}finally{ul(7,n,t),wn(r)}}function Z2(e,n,t,i){return function r(o){if(o===Function)return i;let d=e.componentOffset>-1?Pu(e.index,n):n;QD(d,5);let g=W2(n,t,i,o),v=r.__ngNextListenerFn__;for(;v;)g=W2(n,t,v,o)&&g,v=v.__ngNextListenerFn__;return g}}function ut(e=1){return xK(e)}function aQ(e,n){let t=null,i=PZ(e);for(let r=0;r<n.length;r++){let o=n[r];if(o==="*"){t=r;continue}if(i===null?yN(e,o,!0):kZ(i,o))return r}return t}function bs(e){let n=rn()[ms][qo];if(!n.projection){let t=e?e.length:1,i=n.projection=xZ(t,null),r=i.slice(),o=n.child;for(;o!==null;){if(o.type!==128){let d=e?aQ(o,e):0;d!==null&&(r[d]?r[d].projectionNext=o:i[d]=o,r[d]=o)}o=o.next}}}function ws(e,n=0,t,i,r,o){let d=rn(),g=Hi(),v=i?e+1:null;v!==null&&vw(d,g,v,i,r,o,null,t);let x=Of(g,Jr+e,16,null,t||null);x.projection===null&&(x.projection=n),MD();let R=!d[xf]||HN();d[ms][qo].projection[x.projection]===null&&v!==null?lQ(d,g,v):R&&(x.flags&32)!==32&&RY(g,d,x)}function lQ(e,n,t){let i=Jr+t,r=n.data[i],o=e[i],d=If(o,r.tView.ssrId),g=jy(e,r,void 0,{dehydratedView:d});Hy(o,g,0,Ef(r,d))}function Wy(e,n,t,i){KJ(e,n,t,i)}function Zy(e,n,t){dL(e,n,t)}function yc(e){let n=rn(),t=Hi(),i=RD();zw(i+1);let r=iT(t,i);if(e.dirty&&rK(n)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let o=pL(n,i);e.reset(o,hF),e.notifyOnChanges()}return!0}return!1}function _c(){return nT(rn(),RD())}function lT(e,n,t,i){tX(e,dL(n,t,i))}function cT(e=1){zw(RD()+e)}function cQ(e,n,t,i){t>=e.data.length&&(e.data[t]=null,e.blueprint[t]=null),n[t]=i}function xs(e){let n=fK();return LN(n,Jr+e)}function me(e,n=""){let t=rn(),i=Hi(),r=e+Jr,o=i.firstCreatePass?Of(i,r,1,n,null):i.data[r],d=uQ(i,t,o,n,e);t[r]=d,jw()&&Zw(i,t,d,o),oh(o,!1)}var uQ=(e,n,t,i,r)=>(Hw(!0),_Y(n[ji],i));function Ji(e){return Mt("",e,""),Ji}function Mt(e,n,t){let i=rn(),r=IX(i,e,n,t);return r!==vs&&YF(i,mc(),r),Mt}function n1(e,n,t,i,r){let o=rn(),d=DX(o,e,n,t,i,r);return d!==vs&&YF(o,mc(),d),n1}function Nf(e,n,t){mL(n)&&(n=n());let i=rn(),r=sh();if(gs(i,r,n)){let o=Hi(),d=Vw();KD(o,d,i,e,n,i[ji],t,!1)}return Nf}function Ky(e,n){let t=mL(e);return t&&e.set(n),t}function Ff(e,n){let t=rn(),i=Hi(),r=Qr();return kL(i,t,t[ji],r,e,n),Ff}function dQ(e,n,t){let i=Hi();if(i.firstCreatePass){let r=Du(e);dD(t,i.data,i.blueprint,r,!0),dD(n,i.data,i.blueprint,r,!1)}}function dD(e,n,t,i,r){if(e=Yr(e),Array.isArray(e))for(let o=0;o<e.length;o++)dD(e[o],n,t,i,r);else{let o=Hi(),d=rn(),g=Qr(),v=wf(e)?e:Yr(e.provide),x=DN(e),D=g.providerIndexes&1048575,R=g.directiveStart,L=g.providerIndexes>>20;if(wf(e)||!e.multi){let j=new eh(x,r,Je),J=yI(v,n,r?D:D+L,R);J===-1?(RI(rw(g,d),o,v),gI(o,e,n.length),n.push(v),g.directiveStart++,g.directiveEnd++,r&&(g.providerIndexes+=1048576),t.push(j),d.push(j)):(t[J]=j,d[J]=j)}else{let j=yI(v,n,D+L,R),J=yI(v,n,D,D+L),re=j>=0&&t[j],be=J>=0&&t[J];if(r&&!be||!r&&!re){RI(rw(g,d),o,v);let xe=fQ(r?pQ:hQ,t.length,r,i,x);!r&&be&&(t[J].providerFactory=xe),gI(o,e,n.length,0),n.push(v),g.directiveStart++,g.directiveEnd++,r&&(g.providerIndexes+=1048576),t.push(xe),d.push(xe)}else{let xe=NL(t[r?J:j],x,!r&&i);gI(o,e,j>-1?j:J,xe)}!r&&i&&be&&t[J].componentProviders++}}}function gI(e,n,t,i){let r=wf(n),o=GZ(n);if(r||o){let v=(o?Yr(n.useClass):n).prototype.ngOnDestroy;if(v){let x=e.destroyHooks||(e.destroyHooks=[]);if(!r&&n.multi){let D=x.indexOf(t);D===-1?x.push(t,[i,v]):x[D+1].push(i,v)}else x.push(t,v)}}}function NL(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function yI(e,n,t,i){for(let r=t;r<i;r++)if(n[r]===e)return r;return-1}function hQ(e,n,t,i){return hD(this.multi,[])}function pQ(e,n,t,i){let r=this.multi,o;if(this.providerFactory){let d=this.providerFactory.componentProviders,g=th(t,t[an],this.providerFactory.index,i);o=g.slice(0,d),hD(r,o);for(let v=d;v<g.length;v++)o.push(g[v])}else o=[],hD(r,o);return o}function hD(e,n){for(let t=0;t<e.length;t++){let i=e[t];n.push(i())}return n}function fQ(e,n,t,i,r){let o=new eh(e,t,Je);return o.multi=[],o.index=n,o.componentProviders=0,NL(o,r,i&&!t),o}function eo(e,n=[]){return t=>{t.providersResolver=(i,r)=>dQ(i,r?r(e):e,n)}}var mQ=(()=>{class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=CN(!1,t.type),r=i.length>0?Xw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Be({token:e,providedIn:"environment",factory:()=>new e(Re(ur))})}}return e})();function Zo(e){gc("NgStandalone"),e.getStandaloneInjector=n=>n.get(mQ).getOrCreateStandaloneInjector(e)}function yl(e,n,t){let i=Uy()+e,r=rn();return r[i]===vs?Qw(r,i,t?n.call(t):n()):vX(r,i)}function hh(e,n,t,i){return FL(rn(),Uy(),e,n,t,i)}function uT(e,n,t,i,r){return gQ(rn(),Uy(),e,n,t,i,r)}function i1(e,n,t,i,r,o){return yQ(rn(),Uy(),e,n,t,i,r,o)}function dT(e,n){let t=e[n];return t===vs?void 0:t}function FL(e,n,t,i,r,o){let d=n+t;return gs(e,d,r)?Qw(e,d+1,o?i.call(o,r):i(r)):dT(e,d+1)}function gQ(e,n,t,i,r,o,d){let g=n+t;return aT(e,g,r,o)?Qw(e,g+2,d?i.call(d,r,o):i(r,o)):dT(e,g+2)}function yQ(e,n,t,i,r,o,d,g){let v=n+t;return bX(e,v,r,o,d)?Qw(e,v+3,g?i.call(g,r,o,d):i(r,o,d)):dT(e,v+3)}function hT(e,n){let t=Hi(),i,r=e+Jr;t.firstCreatePass?(i=_Q(n,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Kd(i.type,!0)),d,g=Go(Je);try{let v=iw(!1),x=o();return iw(v),cQ(t,rn(),r,x),x}finally{Go(g)}}function _Q(e,n){if(n)for(let t=n.length-1;t>=0;t--){let i=n[t];if(e===i.name)return i}}function pT(e,n,t){let i=e+Jr,r=rn(),o=LN(r,i);return vQ(r,i)?FL(r,Uy(),n,o.transform,t,o):o.transform(t)}function vQ(e,n){return e[an].data[n].pure}var Vb=null;function bQ(e){Vb!==null&&(e.defaultEncapsulation!==Vb.defaultEncapsulation||e.preserveWhitespaces!==Vb.preserveWhitespaces)||(Vb=e)}var r1=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var fT=new ct(""),Yy=new ct(""),o1=(()=>{class e{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,mT||(wQ(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(t)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==o),t()},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||e)(Re(jt),Re(s1),Re(Yy))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),s1=(()=>{class e{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return mT?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function wQ(e){mT=e}var mT;function ph(e){return!!e&&typeof e.then=="function"}function LL(e){return!!e&&typeof e.subscribe=="function"}var a1=new ct(""),BL=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=Me(a1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(ph(o))t.push(o);else if(LL(o)){let d=new Promise((g,v)=>{o.subscribe({complete:g,error:v})});t.push(d)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),l1=new ct("");function xQ(){Ok(()=>{throw new vt(600,!1)})}function SQ(e){return e.isBoundToModule}var CQ=10;function EQ(e,n,t){try{let i=t();return ph(i)?i.catch(r=>{throw n.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>e.handleError(i)),i}}function UL(e,n){return Array.isArray(n)?n.reduce(UL,e):q(q({},e),n)}var Ss=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Me(KK),this.afterRenderManager=Me(vL),this.zonelessEnabled=Me(tT),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Bt,this.afterTick=new Bt,this.componentTypes=[],this.components=[],this.isStable=Me(Ru).hasPendingTasks.pipe(Vt(t=>!t)),this._injector=Me(ur)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof hw;if(!this._injector.get(BL).done){let L=!r&&bN(t),j=!1;throw new vt(405,j)}let d;r?d=t:d=this._injector.get(gl).resolveComponentFactory(t),this.componentTypes.push(d.componentType);let g=SQ(d)?void 0:this._injector.get(Mu),v=i||d.selector,x=d.create(Un.NULL,[],v,g),D=x.location.nativeElement,R=x.injector.get(fT,null);return R?.registerApplication(D),x.onDestroy(()=>{this.detachView(x.hostView),Wb(this.components,x),R?.unregisterApplication(D)}),this._loadComponent(x),x}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new vt(101,!1);let t=wn(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,wn(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Tf,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<CQ;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)IQ(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Bw(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Wb(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(l1,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Wb(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new vt(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Wb(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function IQ(e,n,t,i){if(!t&&!Bw(e))return;tL(e,n,t&&!i?0:1)}var pD=class{constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}},c1=(()=>{class e{compileModuleSync(t){return new _w(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=wN(t),o=CF(r.declarations).reduce((d,g)=>{let v=uc(g);return v&&d.push(new ih(v)),d},[]);return new pD(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),DQ=new ct("");function TQ(e,n,t){let i=new _w(t);return Promise.resolve(i)}function K2(e){for(let n=e.length-1;n>=0;n--)if(e[n]!==void 0)return e[n]}var AQ=(()=>{class e{constructor(){this.zone=Me(jt),this.changeDetectionScheduler=Me(Df),this.applicationRef=Me(Ss)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function MQ({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new jt(Ie(q({},zL()),{scheduleInRootZone:t})),[{provide:jt,useFactory:e},{provide:bf,multi:!0,useFactory:()=>{let i=Me(AQ,{optional:!0});return()=>i.initialize()}},{provide:bf,multi:!0,useFactory:()=>{let i=Me(PQ);return()=>{i.initialize()}}},n===!0?{provide:oL,useValue:!0}:[],{provide:sL,useValue:t??cF}]}function zL(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var PQ=(()=>{class e{constructor(){this.subscription=new gi,this.initialized=!1,this.zone=Me(jt),this.pendingTasks=Me(Ru)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{jt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{jt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var RQ=(()=>{class e{constructor(){this.appRef=Me(Ss),this.taskService=Me(Ru),this.ngZone=Me(jt),this.zonelessEnabled=Me(tT),this.disableScheduling=Me(oL,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new gi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sw):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Me(sL,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof aw||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?E2:uF;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,E2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function OQ(){return typeof $localize<"u"&&$localize.locale||Sw}var u1=new ct("",{providedIn:"root",factory:()=>Me(u1,xn.Optional|xn.SkipSelf)||OQ()});var Cw=new ct("");function jb(e){return!e.moduleRef}function kQ(e){let n=jb(e)?e.r3Injector:e.moduleRef.injector,t=n.get(jt);return t.run(()=>{jb(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=n.get(ml,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),jb(e)){let o=()=>n.destroy(),d=e.platformInjector.get(Cw);d.add(o),n.onDestroy(()=>{r.unsubscribe(),d.delete(o)})}else{let o=()=>e.moduleRef.destroy(),d=e.platformInjector.get(Cw);d.add(o),e.moduleRef.onDestroy(()=>{Wb(e.allPlatformModules,e.moduleRef),r.unsubscribe(),d.delete(o)})}return EQ(i,t,()=>{let o=n.get(BL);return o.runInitializers(),o.donePromise.then(()=>{let d=n.get(u1,Sw);if(rQ(d||Sw),jb(e)){let g=n.get(Ss);return e.rootComponent!==void 0&&g.bootstrap(e.rootComponent),g}else return NQ(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function NQ(e,n){let t=e.injector.get(Ss);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(t);else throw new vt(-403,!1);n.push(e)}var VL=(()=>{class e{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){let r=i?.scheduleInRootZone,o=()=>ZK(i?.ngZone,Ie(q({},zL({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:r})),d=i?.ignoreChangesOutsideZone,g=[MQ({ngZoneFactory:o,ignoreChangesOutsideZone:d}),{provide:Df,useExisting:RQ}],v=yX(t.moduleType,this.injector,g);return kQ({moduleRef:v,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,i=[]){let r=UL({},i);return TQ(this.injector,r,t).then(o=>this.bootstrapModuleFactory(o,r))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new vt(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let t=this._injector.get(Cw,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||e)(Re(Un))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Ty=null,jL=new ct("");function FQ(e){if(Ty&&!Ty.get(jL,!1))throw new vt(400,!1);xQ(),Ty=e;let n=e.get(VL);return UQ(e),n}function gT(e,n,t=[]){let i=`Platform: ${n}`,r=new ct(i);return(o=[])=>{let d=HL();if(!d||d.injector.get(jL,!1)){let g=[...t,...o,{provide:r,useValue:!0}];e?e(g):FQ(LQ(g,i))}return BQ(r)}}function LQ(e=[],n){return Un.create({name:n,providers:[{provide:Rw,useValue:"platform"},{provide:Cw,useValue:new Set([()=>Ty=null])},...e]})}function BQ(e){let n=HL();if(!n)throw new vt(401,!1);return n}function HL(){return Ty?.get(VL)??null}function UQ(e){e.get(BD,null)?.forEach(t=>t())}var Ko=(()=>{class e{static{this.__NG_ELEMENT_ID__=zQ}}return e})();function zQ(e){return VQ(Qr(),rn(),(e&16)===16)}function VQ(e,n,t){if(Fw(e)&&!t){let i=Pu(e.index,n);return new nh(i,i)}else if(e.type&175){let i=n[ms];return new nh(i,n)}return null}var fD=class{constructor(){}supports(n){return _L(n)}create(n){return new mD(n)}},jQ=(e,n)=>n,mD=class{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||jQ}forEachItem(n){let t;for(t=this._itHead;t!==null;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let d=!i||t&&t.currentIndex<Y2(i,r,o)?t:i,g=Y2(d,r,o),v=d.currentIndex;if(d===i)r--,i=i._nextRemoved;else if(t=t._next,d.previousIndex==null)r++;else{o||(o=[]);let x=g-r,D=v-r;if(x!=D){for(let L=0;L<x;L++){let j=L<o.length?o[L]:o[L]=0,J=j+L;D<=J&&J<x&&(o[L]=j+1)}let R=d.previousIndex;o[R]=D-x}}g!==v&&n(d,g,v)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)n(t)}diff(n){if(n==null&&(n=[]),!_L(n))throw new vt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._itHead,i=!1,r,o,d;if(Array.isArray(n)){this.length=n.length;for(let g=0;g<this.length;g++)o=n[g],d=this._trackByFn(g,o),t===null||!Object.is(t.trackById,d)?(t=this._mismatch(t,o,d,g),i=!0):(i&&(t=this._verifyReinsertion(t,o,d,g)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,_X(n,g=>{d=this._trackByFn(r,g),t===null||!Object.is(t.trackById,d)?(t=this._mismatch(t,g,d,r),i=!0):(i&&(t=this._verifyReinsertion(t,g,d,r)),Object.is(t.item,g)||this._addIdentityChange(t,g)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,i,r){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,o,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,o,r)):n=this._addAfter(new gD(t,i),o,r)),n}_verifyReinsertion(n,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let t=n._next;this._addToRemovals(this._unlink(n)),n=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,o=n._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,t,i),this._addToMoves(n,i),n}_moveAfter(n,t,i){return this._unlink(n),this._insertAfter(n,t,i),this._addToMoves(n,i),n}_addAfter(n,t,i){return this._insertAfter(n,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,t,i){let r=t===null?this._itHead:t._next;return n._next=r,n._prev=t,r===null?this._itTail=n:r._prev=n,t===null?this._itHead=n:t._next=n,this._linkedRecords===null&&(this._linkedRecords=new Ew),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let t=n._prev,i=n._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ew),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},gD=class{constructor(n,t){this.item=n,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yD=class{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let t=n._prevDup,i=n._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Ew=class{constructor(){this.map=new Map}put(n){let t=n.trackById,i=this.map.get(t);i||(i=new yD,this.map.set(t,i)),i.add(n)}get(n,t){let i=n,r=this.map.get(i);return r?r.get(n,t):null}remove(n){let t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Y2(e,n,t){let i=e.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+n+r}var _D=class{constructor(){}supports(n){return n instanceof Map||sT(n)}create(){return new vD}},vD=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(n){let t;for(t=this._mapHead;t!==null;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)n(t)}diff(n){if(!n)n=new Map;else if(!(n instanceof Map||sT(n)))throw new vt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let o=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){let i=n._prev;return t._next=n,t._prev=i,n._prev=t,i&&(i._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){let r=this._records.get(n);this._maybeAddToChanges(r,t);let o=r._prev,d=r._next;return o&&(o._next=d),d&&(d._prev=o),r._next=null,r._prev=null,r}let i=new bD(n);return this._records.set(n,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;n!==null;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;n!=null;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){this._additionsHead===null?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){this._changesHead===null?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(i=>t(n[i],i))}},bD=class{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function J2(){return new d1([new fD])}var d1=(()=>{class e{static{this.\u0275prov=Be({token:e,providedIn:"root",factory:J2})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||J2()),deps:[[e,new Aw,new Ly]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new vt(901,!1)}}return e})();function X2(){return new yT([new _D])}var yT=(()=>{class e{static{this.\u0275prov=Be({token:e,providedIn:"root",factory:X2})}constructor(t){this.factories=t}static create(t,i){if(i){let r=i.factories.slice();t=t.concat(r)}return new e(t)}static extend(t){return{provide:e,useFactory:i=>e.create(t,i||X2()),deps:[[e,new Aw,new Ly]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i)return i;throw new vt(901,!1)}}return e})();var $L=gT(null,"core",[]),GL=(()=>{class e{constructor(t){}static{this.\u0275fac=function(i){return new(i||e)(Re(Ss))}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();function _l(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Lf(e,n){gc("NgSignals");let t=BE(e);return n?.equal&&(t[Ks].equal=n.equal),t}function oa(e){let n=wn(null);try{return e()}finally{wn(n)}}function h1(e,n){let t=uc(e),i=n.elementInjector||Ow();return new ih(t).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}function qL(e){let n=uc(e);if(!n)return null;let t=new ih(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}var XL=null;function vl(){return XL}function QL(e){XL??=e}var p1=class{};var pn=new ct(""),ST=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me($Q),providedIn:"platform"})}}return e})(),eB=new ct(""),$Q=(()=>{class e extends ST{constructor(){super(),this._doc=Me(pn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vl().getBaseHref(this._doc)}onPopState(t){let i=vl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=vl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function CT(e,n){if(e.length==0)return n;if(n.length==0)return e;let t=0;return e.endsWith("/")&&t++,n.startsWith("/")&&t++,t==2?e+n.substring(1):t==1?e+n:e+"/"+n}function WL(e){let n=e.match(/#|\?|$/),t=n&&n.index||e.length,i=t-(e[t-1]==="/"?1:0);return e.slice(0,i)+e.slice(t)}function vc(e){return e&&e[0]!=="?"?"?"+e:e}var bc=(()=>{class e{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me(ET),providedIn:"root"})}}return e})(),tB=new ct(""),ET=(()=>{class e extends bc{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Me(pn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CT(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+vc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let d=this.prepareExternalUrl(r+vc(o));this._platformLocation.pushState(t,i,d)}replaceState(t,i,r,o){let d=this.prepareExternalUrl(r+vc(o));this._platformLocation.replaceState(t,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||e)(Re(ST),Re(tB,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),nB=(()=>{class e extends bc{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=CT(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let d=this.prepareExternalUrl(r+vc(o));d.length==0&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,i,d)}replaceState(t,i,r,o){let d=this.prepareExternalUrl(r+vc(o));d.length==0&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||e)(Re(ST),Re(tB,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),Ou=(()=>{class e{constructor(t){this._subject=new kn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=WQ(WL(ZL(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+vc(i))}normalize(t){return e.stripTrailingSlash(qQ(this._basePath,ZL(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=vc}static{this.joinWithSlash=CT}static{this.stripTrailingSlash=WL}static{this.\u0275fac=function(i){return new(i||e)(Re(bc))}}static{this.\u0275prov=Be({token:e,factory:()=>GQ(),providedIn:"root"})}}return e})();function GQ(){return new Ou(Re(bc))}function qQ(e,n){if(!e||!n.startsWith(e))return n;let t=n.substring(e.length);return t===""||["/",";","?","#"].includes(t[0])?t:n}function ZL(e){return e.replace(/\/index.html$/,"")}function WQ(e){if(new RegExp("^(https?:)?//").test(e)){let[,t]=e.split(/\/\/[^\/]+/);return t}return e}function f1(e,n){n=encodeURIComponent(n);for(let t of e.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}var _T=class{constructor(n,t,i,r){this.$implicit=n,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ku=(()=>{class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,d)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new _T(r.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)i.remove(o===null?void 0:o);else if(o!==null){let g=i.get(o);i.move(g,d),KL(g,r)}});for(let r=0,o=i.length;r<o;r++){let g=i.get(r).context;g.index=r,g.count=o,g.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);KL(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(Je(Wo),Je(Xr),Je(d1))}}static{this.\u0275dir=Ln({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function KL(e,n){e.context.$implicit=n.item}var Li=(()=>{class e{constructor(t,i){this._viewContainer=t,this._context=new vT,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){YL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){YL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(Je(Wo),Je(Xr))}}static{this.\u0275dir=Ln({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),vT=class{constructor(){this.$implicit=null,this.ngIf=null}};function YL(e,n){if(!!!(!n||n.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Mo(n)}'.`)}var IT=(()=>{class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||e)(Je(Wo))}}static{this.\u0275dir=Ln({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Sr]})}}return e})();function ZQ(e,n){return{key:e,value:n}}var iB=(()=>{class e{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=JL}transform(t,i=JL){if(!t||!(t instanceof Map)&&typeof t!="object")return null;this.differ??=this.differs.find(t).create();let r=this.differ.diff(t),o=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(d=>{this.keyValues.push(ZQ(d.key,d.currentValue))})),(r||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}static{this.\u0275fac=function(i){return new(i||e)(Je(yT,16))}}static{this.\u0275pipe=_N({name:"keyvalue",type:e,pure:!1,standalone:!0})}}return e})();function JL(e,n){let t=e.key,i=n.key;if(t===i)return 0;if(t===void 0)return 1;if(i===void 0)return-1;if(t===null)return 1;if(i===null)return-1;if(typeof t=="string"&&typeof i=="string")return t<i?-1:1;if(typeof t=="number"&&typeof i=="number")return t-i;if(typeof t=="boolean"&&typeof i=="boolean")return t<i?-1:1;let r=String(t),o=String(i);return r==o?0:r<o?-1:1}var m1=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})(),DT="browser",KQ="server";function g1(e){return e===DT}function y1(e){return e===KQ}var rB=(()=>{class e{static{this.\u0275prov=Be({token:e,providedIn:"root",factory:()=>g1(Me(_s))?new bT(Me(pn),window):new wT})}}return e})(),bT=class{constructor(n,t){this.document=n,this.window=t,this.offset=()=>[0,0]}setOffset(n){Array.isArray(n)?this.offset=()=>n:this.offset=n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n){this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){let t=YQ(this.document,n);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(n){this.window.history.scrollRestoration=n}scrollToElement(n){let t=n.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function YQ(e,n){let t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let i=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let d=o.getElementById(n)||o.querySelector(`[name="${n}"]`);if(d)return d}r=i.nextNode()}}return null}var wT=class{setOffset(n){}getScrollPosition(){return[0,0]}scrollToPosition(n){}scrollToAnchor(n){}setHistoryScrollRestoration(n){}},Bf=class{};var Xy=class{},v1=class{},La=class e{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),d=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(d):this.headers.set(o,[d])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let t=this.headers.get(n.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,t){return this.clone({name:n,value:t,op:"a"})}set(n,t){return this.clone({name:n,value:t,op:"s"})}delete(n,t){return this.clone({name:n,value:t,op:"d"})}maybeSetNormalizedName(n,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,n)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(t=>{this.headers.set(t,n.headers.get(t)),this.normalizedNames.set(t,n.normalizedNames.get(t))})}clone(n){let t=new e;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([n]),t}applyUpdate(n){let t=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,t);let r=(n.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=n.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let d=this.headers.get(t);if(!d)return;d=d.filter(g=>o.indexOf(g)===-1),d.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}break}}setHeaderEntries(n,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>n(this.normalizedNames.get(t),this.headers.get(t)))}};var AT=class{encodeKey(n){return oB(n)}encodeValue(n){return oB(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function JQ(e,n){let t=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[d,g]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],v=t.get(d)||[];v.push(g),t.set(d,v)}),t}var XQ=/%(\d[a-f0-9])/gi,QQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oB(e){return encodeURIComponent(e).replace(XQ,(n,t)=>QQ[t]??n)}function _1(e){return`${e}`}var Fu=class e{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new AT,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=JQ(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(t=>{let i=n.fromObject[t],r=Array.isArray(i)?i.map(_1):[_1(i)];this.map.set(t,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let t=this.map.get(n);return t?t[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,t){return this.clone({param:n,value:t,op:"a"})}appendAll(n){let t=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(n,t){return this.clone({param:n,value:t,op:"s"})}delete(n,t){return this.clone({param:n,value:t,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let t=this.encoder.encodeKey(n);return this.map.get(n).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let t=new e({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(n),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let t=(n.op==="a"?this.map.get(n.param):void 0)||[];t.push(_1(n.value)),this.map.set(n.param,t);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(_1(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var MT=class{constructor(){this.map=new Map}set(n,t){return this.map.set(n,t),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function eee(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function sB(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function aB(e){return typeof Blob<"u"&&e instanceof Blob}function lB(e){return typeof FormData<"u"&&e instanceof FormData}function tee(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Jy=class e{constructor(n,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase();let o;if(eee(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new La,this.context??=new MT,!this.params)this.params=new Fu,this.urlWithParams=t;else{let d=this.params.toString();if(d.length===0)this.urlWithParams=t;else{let g=t.indexOf("?"),v=g===-1?"?":g<t.length-1?"&":"";this.urlWithParams=t+v+d}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||sB(this.body)||aB(this.body)||lB(this.body)||tee(this.body)?this.body:this.body instanceof Fu?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lB(this.body)?null:aB(this.body)?this.body.type||null:sB(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fu?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(n={}){let t=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,d=n.body!==void 0?n.body:this.body,g=n.withCredentials??this.withCredentials,v=n.reportProgress??this.reportProgress,x=n.headers||this.headers,D=n.params||this.params,R=n.context??this.context;return n.setHeaders!==void 0&&(x=Object.keys(n.setHeaders).reduce((L,j)=>L.set(j,n.setHeaders[j]),x)),n.setParams&&(D=Object.keys(n.setParams).reduce((L,j)=>L.set(j,n.setParams[j]),D)),new e(t,i,d,{params:D,headers:x,context:R,reportProgress:v,responseType:r,withCredentials:g,transferCache:o})}},Lu=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(Lu||{}),Qy=class{constructor(n,t=200,i="OK"){this.headers=n.headers||new La,this.status=n.status!==void 0?n.status:t,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},b1=class e extends Qy{constructor(n={}){super(n),this.type=Lu.ResponseHeader}clone(n={}){return new e({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},e_=class e extends Qy{constructor(n={}){super(n),this.type=Lu.Response,this.body=n.body!==void 0?n.body:null}clone(n={}){return new e({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Nu=class extends Qy{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},hB=200,nee=204;function TT(e,n){return{body:n,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var t_=(()=>{class e{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Jy)o=t;else{let v;r.headers instanceof La?v=r.headers:v=new La(r.headers);let x;r.params&&(r.params instanceof Fu?x=r.params:x=new Fu({fromObject:r.params})),o=new Jy(t,i,r.body!==void 0?r.body:null,{headers:v,context:r.context,params:x,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let d=Dt(o).pipe(ac(v=>this.handler.handle(v)));if(t instanceof Jy||r.observe==="events")return d;let g=d.pipe(jn(v=>v instanceof e_));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return g.pipe(Vt(v=>{if(v.body!==null&&!(v.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return v.body}));case"blob":return g.pipe(Vt(v=>{if(v.body!==null&&!(v.body instanceof Blob))throw new Error("Response is not a Blob.");return v.body}));case"text":return g.pipe(Vt(v=>{if(v.body!==null&&typeof v.body!="string")throw new Error("Response is not a string.");return v.body}));case"json":default:return g.pipe(Vt(v=>v.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Fu().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,TT(r,i))}post(t,i,r={}){return this.request("POST",t,TT(r,i))}put(t,i,r={}){return this.request("PUT",t,TT(r,i))}static{this.\u0275fac=function(i){return new(i||e)(Re(Xy))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),iee=/^\)\]\}',?\n/,ree="X-Request-URL";function cB(e){if(e.url)return e.url;let n=ree.toLocaleLowerCase();return e.headers.get(n)}var oee=(()=>{class e{constructor(){this.fetchImpl=Me(PT,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=Me(jt)}handle(t){return new Zt(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(RT,o=>i.error(new Nu({error:o}))),()=>r.abort()})}doRequest(t,i,r){return ne(this,null,function*(){let o=this.createRequestInit(t),d;try{let j=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,q({signal:i},o)));see(j),r.next({type:Lu.Sent}),d=yield j}catch(j){r.error(new Nu({error:j,status:j.status??0,statusText:j.statusText,url:t.urlWithParams,headers:j.headers}));return}let g=new La(d.headers),v=d.statusText,x=cB(d)??t.urlWithParams,D=d.status,R=null;if(t.reportProgress&&r.next(new b1({headers:g,status:D,statusText:v,url:x})),d.body){let j=d.headers.get("content-length"),J=[],re=d.body.getReader(),be=0,xe,Pe,Ne=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ne(this,null,function*(){for(;;){let{done:We,value:rt}=yield re.read();if(We)break;if(J.push(rt),be+=rt.length,t.reportProgress){Pe=t.responseType==="text"?(Pe??"")+(xe??=new TextDecoder).decode(rt,{stream:!0}):void 0;let gt=()=>r.next({type:Lu.DownloadProgress,total:j?+j:void 0,loaded:be,partialText:Pe});Ne?Ne.run(gt):gt()}}}));let Ve=this.concatChunks(J,be);try{let We=d.headers.get("Content-Type")??"";R=this.parseBody(t,Ve,We)}catch(We){r.error(new Nu({error:We,headers:new La(d.headers),status:d.status,statusText:d.statusText,url:cB(d)??t.urlWithParams}));return}}D===0&&(D=R?hB:0),D>=200&&D<300?(r.next(new e_({body:R,headers:g,status:D,statusText:v,url:x})),r.complete()):r.error(new Nu({error:R,headers:g,status:D,statusText:v,url:x}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(iee,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,d)=>i[o]=d.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let d of t)r.set(d,o),o+=d.length;return r}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),PT=class{};function RT(){}function see(e){e.then(RT,RT)}function aee(e,n){return n(e)}function lee(e,n,t){return(i,r)=>Xs(t,()=>n(i,o=>e(o,r)))}var pB=new ct(""),cee=new ct(""),uee=new ct("",{providedIn:"root",factory:()=>!0});var uB=(()=>{class e extends Xy{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=Me(Ru),this.contributeToStability=Me(uee)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(pB),...this.injector.get(cee,[])]));this.chain=i.reduceRight((r,o)=>lee(r,o,this.injector),aee)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(xu(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||e)(Re(v1),Re(ur))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();var dee=/^\)\]\}',?\n/;function hee(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var dB=(()=>{class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new vt(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?bi(i.\u0275loadImpl()):Dt(null)).pipe(Yi(()=>new Zt(o=>{let d=i.build();if(d.open(t.method,t.urlWithParams),t.withCredentials&&(d.withCredentials=!0),t.headers.forEach((re,be)=>d.setRequestHeader(re,be.join(","))),t.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let re=t.detectContentTypeHeader();re!==null&&d.setRequestHeader("Content-Type",re)}if(t.responseType){let re=t.responseType.toLowerCase();d.responseType=re!=="json"?re:"text"}let g=t.serializeBody(),v=null,x=()=>{if(v!==null)return v;let re=d.statusText||"OK",be=new La(d.getAllResponseHeaders()),xe=hee(d)||t.url;return v=new b1({headers:be,status:d.status,statusText:re,url:xe}),v},D=()=>{let{headers:re,status:be,statusText:xe,url:Pe}=x(),Ne=null;be!==nee&&(Ne=typeof d.response>"u"?d.responseText:d.response),be===0&&(be=Ne?hB:0);let Ve=be>=200&&be<300;if(t.responseType==="json"&&typeof Ne=="string"){let We=Ne;Ne=Ne.replace(dee,"");try{Ne=Ne!==""?JSON.parse(Ne):null}catch(rt){Ne=We,Ve&&(Ve=!1,Ne={error:rt,text:Ne})}}Ve?(o.next(new e_({body:Ne,headers:re,status:be,statusText:xe,url:Pe||void 0})),o.complete()):o.error(new Nu({error:Ne,headers:re,status:be,statusText:xe,url:Pe||void 0}))},R=re=>{let{url:be}=x(),xe=new Nu({error:re,status:d.status||0,statusText:d.statusText||"Unknown Error",url:be||void 0});o.error(xe)},L=!1,j=re=>{L||(o.next(x()),L=!0);let be={type:Lu.DownloadProgress,loaded:re.loaded};re.lengthComputable&&(be.total=re.total),t.responseType==="text"&&d.responseText&&(be.partialText=d.responseText),o.next(be)},J=re=>{let be={type:Lu.UploadProgress,loaded:re.loaded};re.lengthComputable&&(be.total=re.total),o.next(be)};return d.addEventListener("load",D),d.addEventListener("error",R),d.addEventListener("timeout",R),d.addEventListener("abort",R),t.reportProgress&&(d.addEventListener("progress",j),g!==null&&d.upload&&d.upload.addEventListener("progress",J)),d.send(g),o.next({type:Lu.Sent}),()=>{d.removeEventListener("error",R),d.removeEventListener("abort",R),d.removeEventListener("load",D),d.removeEventListener("timeout",R),t.reportProgress&&(d.removeEventListener("progress",j),g!==null&&d.upload&&d.upload.removeEventListener("progress",J)),d.readyState!==d.DONE&&d.abort()}})))}static{this.\u0275fac=function(i){return new(i||e)(Re(Bf))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),fB=new ct(""),pee="XSRF-TOKEN",fee=new ct("",{providedIn:"root",factory:()=>pee}),mee="X-XSRF-TOKEN",gee=new ct("",{providedIn:"root",factory:()=>mee}),w1=class{},yee=(()=>{class e{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=f1(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||e)(Re(pn),Re(_s),Re(fee))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();function _ee(e,n){let t=e.url.toLowerCase();if(!Me(fB)||e.method==="GET"||e.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return n(e);let i=Me(w1).getToken(),r=Me(gee);return i!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,i)})),n(e)}function mB(...e){let n=[t_,dB,uB,{provide:Xy,useExisting:uB},{provide:v1,useFactory:()=>Me(oee,{optional:!0})??Me(dB)},{provide:pB,useValue:_ee,multi:!0},{provide:fB,useValue:!0},{provide:w1,useClass:yee}];for(let t of e)n.push(...t.\u0275providers);return Pw(n)}var NT=class extends p1{constructor(){super(...arguments),this.supportsDOMEvents=!0}},FT=class e extends NT{static makeCurrent(){QL(new e)}onAndCancel(n,t,i){return n.addEventListener(t,i),()=>{n.removeEventListener(t,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return t=t||this.getDefaultDocument(),t.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return t==="window"?window:t==="document"?n:t==="body"?n.body:null}getBaseHref(n){let t=vee();return t==null?null:bee(t)}resetBaseElement(){n_=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return f1(document.cookie,n)}},n_=null;function vee(){return n_=n_||document.querySelector("base"),n_?n_.getAttribute("href"):null}function bee(e){return new URL(e,document.baseURI).pathname}var LT=class{addToWindow(n){ka.getAngularTestability=(i,r=!0)=>{let o=n.findTestabilityInTree(i,r);if(o==null)throw new vt(5103,!1);return o},ka.getAllAngularTestabilities=()=>n.getAllTestabilities(),ka.getAllAngularRootElements=()=>n.getAllRootElements();let t=i=>{let r=ka.getAllAngularTestabilities(),o=r.length,d=function(){o--,o==0&&i()};r.forEach(g=>{g.whenStable(d)})};ka.frameworkStabilizers||(ka.frameworkStabilizers=[]),ka.frameworkStabilizers.push(t)}findTestabilityInTree(n,t,i){if(t==null)return null;let r=n.getTestability(t);return r??(i?vl().isShadowRoot(t)?this.findTestabilityInTree(n,t.host,!0):this.findTestabilityInTree(n,t.parentElement,!0):null)}},wee=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),BT=new ct(""),bB=(()=>{class e{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new vt(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||e)(Re(BT),Re(jt))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),x1=class{constructor(n){this._doc=n}},OT="ng-app-id",wB=(()=>{class e{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=y1(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${OT}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(OT),o;{let d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute(OT,this.appId),t.appendChild(d),d}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,d=o.get(i)?.elements;d?d.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(Re(pn),Re(zy),Re(Vy,8),Re(_s))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),kT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},zT=/%COMP%/g,xB="%COMP%",xee=`_nghost-${xB}`,See=`_ngcontent-${xB}`,Cee=!0,Eee=new ct("",{providedIn:"root",factory:()=>Cee});function Iee(e){return See.replace(zT,e)}function Dee(e){return xee.replace(zT,e)}function SB(e,n){return n.map(t=>t.replace(zT,e))}var yB=(()=>{class e{constructor(t,i,r,o,d,g,v,x=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=d,this.platformId=g,this.ngZone=v,this.nonce=x,this.rendererByCompId=new Map,this.platformIsServer=y1(g),this.defaultRenderer=new i_(t,d,v,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===hl.ShadowDom&&(i=Ie(q({},i),{encapsulation:hl.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof S1?r.applyToHost(t):r instanceof r_&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let d=this.doc,g=this.ngZone,v=this.eventManager,x=this.sharedStylesHost,D=this.removeStylesOnCompDestroy,R=this.platformIsServer;switch(i.encapsulation){case hl.Emulated:o=new S1(v,x,i,this.appId,D,d,g,R);break;case hl.ShadowDom:return new UT(v,x,t,i,d,g,this.nonce,R);default:o=new r_(v,x,i,D,d,g,R);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(Re(bB),Re(wB),Re(zy),Re(Eee),Re(pn),Re(_s),Re(jt),Re(Vy))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),i_=class{constructor(n,t,i,r){this.eventManager=n,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,t){return t?this.doc.createElementNS(kT[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(_B(n)?n.content:n).appendChild(t)}insertBefore(n,t,i){n&&(_B(n)?n.content:n).insertBefore(t,i)}removeChild(n,t){t.remove()}selectRootElement(n,t){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new vt(-5104,!1);return t||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,i,r){if(r){t=r+":"+t;let o=kT[r];o?n.setAttributeNS(o,t,i):n.setAttribute(t,i)}else n.setAttribute(t,i)}removeAttribute(n,t,i){if(i){let r=kT[i];r?n.removeAttributeNS(r,t):n.removeAttribute(`${i}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,i,r){r&(hc.DashCase|hc.Important)?n.style.setProperty(t,i,r&hc.Important?"important":""):n.style[t]=i}removeStyle(n,t,i){i&hc.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,i){n!=null&&(n[t]=i)}setValue(n,t){n.nodeValue=t}listen(n,t,i){if(typeof n=="string"&&(n=vl().getGlobalEventTarget(this.doc,n),!n))throw new Error(`Unsupported event target ${n} for event ${t}`);return this.eventManager.addEventListener(n,t,this.decoratePreventDefault(i))}decoratePreventDefault(n){return t=>{if(t==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(t)):n(t))===!1&&t.preventDefault()}}};function _B(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var UT=class extends i_{constructor(n,t,i,r,o,d,g,v){super(n,o,d,v),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let x=SB(r.id,r.styles);for(let D of x){let R=document.createElement("style");g&&R.setAttribute("nonce",g),R.textContent=D,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,i){return super.insertBefore(this.nodeOrShadowRoot(n),t,i)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},r_=class extends i_{constructor(n,t,i,r,o,d,g,v){super(n,o,d,g),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=v?SB(v,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},S1=class extends r_{constructor(n,t,i,r,o,d,g,v){let x=r+"-"+i.id;super(n,t,i,o,d,g,v,x),this.contentAttr=Iee(x),this.hostAttr=Dee(x)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){let i=super.createElement(n,t);return super.setAttribute(i,this.contentAttr,""),i}},Tee=(()=>{class e extends x1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||e)(Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})(),vB=["alt","control","meta","shift"],Aee={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mee={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Pee=(()=>{class e extends x1{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,i,r){let o=e.parseEventName(i),d=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vl().onAndCancel(t,o.domEventName,d))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),d="",g=i.indexOf("code");if(g>-1&&(i.splice(g,1),d="code."),vB.forEach(x=>{let D=i.indexOf(x);D>-1&&(i.splice(D,1),d+=x+".")}),d+=o,i.length!=0||o.length===0)return null;let v={};return v.domEventName=r,v.fullKey=d,v}static matchEventFullKeyCode(t,i){let r=Aee[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),vB.forEach(d=>{if(d!==r){let g=Mee[d];g(t)&&(o+=d+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{e.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||e)(Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();function Ree(){FT.makeCurrent()}function Oee(){return new ml}function kee(){return _F(document),document}var Nee=[{provide:_s,useValue:DT},{provide:BD,useValue:Ree,multi:!0},{provide:pn,useFactory:kee,deps:[]}],CB=gT($L,"browser",Nee),Fee=new ct(""),Lee=[{provide:Yy,useClass:LT,deps:[]},{provide:fT,useClass:o1,deps:[jt,s1,Yy]},{provide:o1,useClass:o1,deps:[jt,s1,Yy]}],Bee=[{provide:Rw,useValue:"root"},{provide:ml,useFactory:Oee,deps:[]},{provide:BT,useClass:Tee,multi:!0,deps:[pn,jt,_s]},{provide:BT,useClass:Pee,multi:!0,deps:[pn]},yB,wB,bB,{provide:Tf,useExisting:yB},{provide:Bf,useClass:wee,deps:[]},[]],EB=(()=>{class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:zy,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||e)(Re(Fee,12))}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({providers:[...Bee,...Lee],imports:[m1,GL]})}}return e})();var IB=(()=>{class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||e)(Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var NB=(()=>{class e{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||e)(Je(ch),Je(yi))}}static{this.\u0275dir=Ln({type:e})}}return e})(),FB=(()=>{class e extends NB{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,features:[Cr]})}}return e})(),HT=new ct("");var Uee={provide:HT,useExisting:ys(()=>P1),multi:!0};function zee(){let e=vl()?vl().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var Vee=new ct(""),P1=(()=>{class e extends NB{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zee())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||e)(Je(ch),Je(yi),Je(Vee,8))}}static{this.\u0275dir=Ln({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&dt("input",function(d){return r._handleInput(d.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(d){return r._compositionEnd(d.target.value)})},features:[eo([Uee]),Cr]})}}return e})();function Vf(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var $f=new ct(""),LB=new ct("");function jee(e){return n=>{if(Vf(n.value)||Vf(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t<e?{min:{min:e,actual:n.value}}:null}}function Hee(e){return n=>{if(Vf(n.value)||Vf(e))return null;let t=parseFloat(n.value);return!isNaN(t)&&t>e?{max:{max:e,actual:n.value}}:null}}function $ee(e){return Vf(e.value)?{required:!0}:null}function Gee(e){if(!e)return VT;let n,t;return typeof e=="string"?(t="",e.charAt(0)!=="^"&&(t+="^"),t+=e,e.charAt(e.length-1)!=="$"&&(t+="$"),n=new RegExp(t)):(t=e.toString(),n=e),i=>{if(Vf(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function VT(e){return null}function BB(e){return e!=null}function UB(e){return ph(e)?bi(e):e}function zB(e){let n={};return e.forEach(t=>{n=t!=null?q(q({},n),t):n}),Object.keys(n).length===0?null:n}function VB(e,n){return n.map(t=>t(e))}function qee(e){return!e.validate}function jB(e){return e.map(n=>qee(n)?n:t=>n.validate(t))}function Wee(e){if(!e)return null;let n=e.filter(BB);return n.length==0?null:function(t){return zB(VB(t,n))}}function $T(e){return e!=null?Wee(jB(e)):null}function Zee(e){if(!e)return null;let n=e.filter(BB);return n.length==0?null:function(t){let i=VB(t,n).map(UB);return XE(i).pipe(Vt(zB))}}function GT(e){return e!=null?Zee(jB(e)):null}function TB(e,n){return e===null?[n]:Array.isArray(e)?[...e,n]:[e,n]}function Kee(e){return e._rawValidators}function Yee(e){return e._rawAsyncValidators}function jT(e){return e?Array.isArray(e)?e:[e]:[]}function E1(e,n){return Array.isArray(e)?e.includes(n):e===n}function AB(e,n){let t=jT(n);return jT(e).forEach(r=>{E1(t,r)||t.push(r)}),t}function MB(e,n){return jT(n).filter(t=>!E1(e,t))}var I1=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=$T(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=GT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,t){return this.control?this.control.hasError(n,t):!1}getError(n,t){return this.control?this.control.getError(n,t):null}},jf=class extends I1{get formDirective(){return null}get path(){return null}},u_=class extends I1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},D1=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Jee={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},kAe=Ie(q({},Jee),{"[class.ng-submitted]":"isSubmitted"}),HB=(()=>{class e extends D1{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(Je(u_,2))}}static{this.\u0275dir=Ln({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&na("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Cr]})}}return e})(),$B=(()=>{class e extends D1{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||e)(Je(jf,10))}}static{this.\u0275dir=Ln({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&na("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Cr]})}}return e})();var o_="VALID",C1="INVALID",Uf="PENDING",s_="DISABLED",Hf=class{},T1=class extends Hf{constructor(n,t){super(),this.value=n,this.source=t}},l_=class extends Hf{constructor(n,t){super(),this.pristine=n,this.source=t}},c_=class extends Hf{constructor(n,t){super(),this.touched=n,this.source=t}},zf=class extends Hf{constructor(n,t){super(),this.status=n,this.source=t}};function GB(e){return(R1(e)?e.validators:e)||null}function Xee(e){return Array.isArray(e)?$T(e):e||null}function qB(e,n){return(R1(n)?n.asyncValidators:e)||null}function Qee(e){return Array.isArray(e)?GT(e):e||null}function R1(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function ete(e,n,t){let i=e.controls;if(!(n?Object.keys(i):i).length)throw new vt(1e3,"");if(!i[t])throw new vt(1001,"")}function tte(e,n,t){e._forEachChild((i,r)=>{if(t[r]===void 0)throw new vt(1002,"")})}var A1=class{constructor(n,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Lf(()=>this.statusReactive()),this.statusReactive=Fr(void 0),this._pristine=Lf(()=>this.pristineReactive()),this.pristineReactive=Fr(!0),this._touched=Lf(()=>this.touchedReactive()),this.touchedReactive=Fr(!1),this._events=new Bt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return oa(this.statusReactive)}set status(n){oa(()=>this.statusReactive.set(n))}get valid(){return this.status===o_}get invalid(){return this.status===C1}get pending(){return this.status==Uf}get disabled(){return this.status===s_}get enabled(){return this.status!==s_}get pristine(){return oa(this.pristineReactive)}set pristine(n){oa(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return oa(this.touchedReactive)}set touched(n){oa(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(AB(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(AB(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(MB(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(MB(n,this._rawAsyncValidators))}hasValidator(n){return E1(this._rawValidators,n)}hasAsyncValidator(n){return E1(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let t=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(Ie(q({},n),{sourceControl:i})),t&&n.emitEvent!==!1&&this._events.next(new c_(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(n))}markAsUntouched(n={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),t&&n.emitEvent!==!1&&this._events.next(new c_(!1,i))}markAsDirty(n={}){let t=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(Ie(q({},n),{sourceControl:i})),t&&n.emitEvent!==!1&&this._events.next(new l_(!1,i))}markAsPristine(n={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),t&&n.emitEvent!==!1&&this._events.next(new l_(!0,i))}markAsPending(n={}){this.status=Uf;let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new zf(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(Ie(q({},n),{sourceControl:t}))}disable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=s_,this.errors=null,this._forEachChild(r=>{r.disable(Ie(q({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new T1(this.value,i)),this._events.next(new zf(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(q({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let t=this._parentMarkedDirty(n.onlySelf);this.status=o_,this._forEachChild(i=>{i.enable(Ie(q({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Ie(q({},n),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,t){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===o_||this.status===Uf)&&this._runAsyncValidator(i,n.emitEvent)}let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new T1(this.value,t)),this._events.next(new zf(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(Ie(q({},n),{sourceControl:t}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?s_:o_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,t){if(this.asyncValidator){this.status=Uf,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=UB(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,t={}){this.errors=n,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(n){let t=n;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(n,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[n]:null}hasError(n,t){return!!this.getError(n,t)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,t,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new zf(this.status,t)),this._parent&&this._parent._updateControlsErrors(n,t,i)}_initObservables(){this.valueChanges=new kn,this.statusChanges=new kn}_calculateStatus(){return this._allControlsDisabled()?s_:this.errors?C1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uf)?Uf:this._anyControlsHaveStatus(C1)?C1:o_}_anyControlsHaveStatus(n){return this._anyControls(t=>t.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),r&&this._events.next(new l_(this.pristine,t))}_updateTouched(n={},t){this.touched=this._anyControlsTouched(),this._events.next(new c_(this.touched,t)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){R1(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let t=this._parent&&this._parent.dirty;return!n&&!!t&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Xee(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Qee(this._rawAsyncValidators)}},M1=class extends A1{constructor(n,t,i){super(GB(t),qB(i,t)),this.controls=n,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,t){return this.controls[n]?this.controls[n]:(this.controls[n]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(n,t,i={}){this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,t={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(n,t,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],t&&this.registerControl(n,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,t={}){tte(this,!0,n),Object.keys(n).forEach(i=>{ete(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(n,t={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(n={},t={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(n,t,i)=>(n[i]=t.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&n(i,t)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(n,t){let i=n;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var qT=new ct("CallSetDisabledState",{providedIn:"root",factory:()=>WT}),WT="always";function nte(e,n){return[...n.path,e]}function WB(e,n,t=WT){ZB(e,n),n.valueAccessor.writeValue(e.value),(e.disabled||t==="always")&&n.valueAccessor.setDisabledState?.(e.disabled),rte(e,n),ste(e,n),ote(e,n),ite(e,n)}function PB(e,n){e.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(n)})}function ite(e,n){if(n.valueAccessor.setDisabledState){let t=i=>{n.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(t),n._registerOnDestroy(()=>{e._unregisterOnDisabledChange(t)})}}function ZB(e,n){let t=Kee(e);n.validator!==null?e.setValidators(TB(t,n.validator)):typeof t=="function"&&e.setValidators([t]);let i=Yee(e);n.asyncValidator!==null?e.setAsyncValidators(TB(i,n.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();PB(n._rawValidators,r),PB(n._rawAsyncValidators,r)}function rte(e,n){n.valueAccessor.registerOnChange(t=>{e._pendingValue=t,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&KB(e,n)})}function ote(e,n){n.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&KB(e,n),e.updateOn!=="submit"&&e.markAsTouched()})}function KB(e,n){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ste(e,n){let t=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};e.registerOnChange(t),n._registerOnDestroy(()=>{e._unregisterOnChange(t)})}function ate(e,n){e==null,ZB(e,n)}function lte(e,n){if(!e.hasOwnProperty("model"))return!1;let t=e.model;return t.isFirstChange()?!0:!Object.is(n,t.currentValue)}function cte(e){return Object.getPrototypeOf(e.constructor)===FB}function ute(e,n){e._syncPendingControls(),n.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dte(e,n){if(!n)return null;Array.isArray(n);let t,i,r;return n.forEach(o=>{o.constructor===P1?t=o:cte(o)?i=o:r=o}),r||i||t||null}var hte={provide:jf,useExisting:ys(()=>ZT)},a_=Promise.resolve(),ZT=(()=>{class e extends jf{get submitted(){return oa(this.submittedReactive)}constructor(t,i,r){super(),this.callSetDisabledState=r,this._submitted=Lf(()=>this.submittedReactive()),this.submittedReactive=Fr(!1),this._directives=new Set,this.ngSubmit=new kn,this.form=new M1({},$T(t),GT(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){a_.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),WB(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){a_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){a_.then(()=>{let i=this._findContainer(t.path),r=new M1({});ate(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){a_.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){a_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),ute(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(i){return new(i||e)(Je($f,10),Je(LB,10),Je(qT,8))}}static{this.\u0275dir=Ln({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&dt("submit",function(d){return r.onSubmit(d)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[eo([hte]),Cr]})}}return e})();function RB(e,n){let t=e.indexOf(n);t>-1&&e.splice(t,1)}function OB(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var pte=class extends A1{constructor(n=null,t,i){super(GB(t),qB(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),R1(t)&&(t.nonNullable||t.initialValueIsDefault)&&(OB(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,t={}){this.value=this._pendingValue=n,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(n,t={}){this.setValue(n,t)}reset(n=this.defaultValue,t={}){this._applyFormState(n),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){RB(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){RB(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){OB(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var fte={provide:u_,useExisting:ys(()=>KT)},kB=Promise.resolve(),KT=(()=>{class e extends u_{constructor(t,i,r,o,d,g){super(),this._changeDetectorRef=d,this.callSetDisabledState=g,this.control=new pte,this._registered=!1,this.name="",this.update=new kn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dte(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lte(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){WB(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){kB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&_l(i);kB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nte(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||e)(Je(jf,9),Je($f,10),Je(LB,10),Je(HT,10),Je(Ko,8),Je(qT,8))}}static{this.\u0275dir=Ln({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[eo([fte]),Cr,Sr]})}}return e})(),YB=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=Ln({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),mte={provide:HT,useExisting:ys(()=>YT),multi:!0},YT=(()=>{class e extends FB{writeValue(t){let i=t??"";this.setProperty("value",i)}registerOnChange(t){this.onChange=i=>{t(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&dt("input",function(d){return r.onChange(d.target.value)})("blur",function(){return r.onTouched()})},features:[eo([mte]),Cr]})}}return e})();function JB(e){return typeof e=="number"?e:parseFloat(e)}var O1=(()=>{class e{constructor(){this._validator=VT}ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):VT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=Ln({type:e,features:[Sr]})}}return e})(),gte={provide:$f,useExisting:ys(()=>JT),multi:!0},JT=(()=>{class e extends O1{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>JB(t),this.createValidator=t=>Hee(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&In("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[eo([gte]),Cr]})}}return e})(),yte={provide:$f,useExisting:ys(()=>XT),multi:!0},XT=(()=>{class e extends O1{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>JB(t),this.createValidator=t=>jee(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&In("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[eo([yte]),Cr]})}}return e})(),_te={provide:$f,useExisting:ys(()=>QT),multi:!0};var QT=(()=>{class e extends O1{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_l,this.createValidator=t=>$ee}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&In("required",r._enabled?"":null)},inputs:{required:"required"},features:[eo([_te]),Cr]})}}return e})();var vte={provide:$f,useExisting:ys(()=>eA),multi:!0},eA=(()=>{class e extends O1{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>Gee(t)}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275dir=Ln({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&In("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[eo([vte]),Cr]})}}return e})();var bte=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var XB=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:qT,useValue:t.callSetDisabledState??WT}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({imports:[bte]})}}return e})();var gn="primary",C_=Symbol("RouteTitle"),oA=class{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){let t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Yf(e){return new oA(e)}function xte(e,n,t){let i=t.path.split("/");if(i.length>e.length||t.pathMatch==="full"&&(n.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let d=i[o],g=e[o];if(d[0]===":")r[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function Ste(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!bl(e[t],n[t]))return!1;return!0}function bl(e,n){let t=e?sA(e):void 0,i=n?sA(n):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!cU(e[r],n[r]))return!1;return!0}function sA(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function cU(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;let t=[...e].sort(),i=[...n].sort();return t.every((r,o)=>i[o]===r)}else return e===n}function uU(e){return e.length>0?e[e.length-1]:null}function Uu(e){return wy(e)?e:ph(e)?bi(Promise.resolve(e)):Dt(e)}var Cte={exact:hU,subset:pU},dU={exact:Ete,subset:Ite,ignored:()=>!0};function QB(e,n,t){return Cte[t.paths](e.root,n.root,t.matrixParams)&&dU[t.queryParams](e.queryParams,n.queryParams)&&!(t.fragment==="exact"&&e.fragment!==n.fragment)}function Ete(e,n){return bl(e,n)}function hU(e,n,t){if(!gh(e.segments,n.segments)||!F1(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!e.children[i]||!hU(e.children[i],n.children[i],t))return!1;return!0}function Ite(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>cU(e[t],n[t]))}function pU(e,n,t){return fU(e,n,n.segments,t)}function fU(e,n,t,i){if(e.segments.length>t.length){let r=e.segments.slice(0,t.length);return!(!gh(r,t)||n.hasChildren()||!F1(r,t,i))}else if(e.segments.length===t.length){if(!gh(e.segments,t)||!F1(e.segments,t,i))return!1;for(let r in n.children)if(!e.children[r]||!pU(e.children[r],n.children[r],i))return!1;return!0}else{let r=t.slice(0,e.segments.length),o=t.slice(e.segments.length);return!gh(e.segments,r)||!F1(e.segments,r,i)||!e.children[gn]?!1:fU(e.children[gn],n,o,i)}}function F1(e,n,t){return n.every((i,r)=>dU[t](e[r].parameters,i.parameters))}var xc=class{constructor(n=new ei([],{}),t={},i=null){this.root=n,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Yf(this.queryParams),this._queryParamMap}toString(){return Ate.serialize(this)}},ei=class{constructor(n,t){this.segments=n,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return L1(this)}},mh=class{constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Yf(this.parameters),this._parameterMap}toString(){return gU(this)}};function Dte(e,n){return gh(e,n)&&e.every((t,i)=>bl(t.parameters,n[i].parameters))}function gh(e,n){return e.length!==n.length?!1:e.every((t,i)=>t.path===n[i].path)}function Tte(e,n){let t=[];return Object.entries(e.children).forEach(([i,r])=>{i===gn&&(t=t.concat(n(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==gn&&(t=t.concat(n(r,i)))}),t}var E_=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>new Jf,providedIn:"root"})}}return e})(),Jf=class{parse(n){let t=new lA(n);return new xc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){let t=`/${d_(n.root,!0)}`,i=Rte(n.queryParams),r=typeof n.fragment=="string"?`#${Mte(n.fragment)}`:"";return`${t}${i}${r}`}},Ate=new Jf;function L1(e){return e.segments.map(n=>gU(n)).join("/")}function d_(e,n){if(!e.hasChildren())return L1(e);if(n){let t=e.children[gn]?d_(e.children[gn],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==gn&&i.push(`${r}:${d_(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Tte(e,(i,r)=>r===gn?[d_(e.children[gn],!1)]:[`${r}:${d_(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[gn]!=null?`${L1(e)}/${t[0]}`:`${L1(e)}/(${t.join("//")})`}}function mU(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function k1(e){return mU(e).replace(/%3B/gi,";")}function Mte(e){return encodeURI(e)}function aA(e){return mU(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function B1(e){return decodeURIComponent(e)}function eU(e){return B1(e.replace(/\+/g,"%20"))}function gU(e){return`${aA(e.path)}${Pte(e.parameters)}`}function Pte(e){return Object.entries(e).map(([n,t])=>`;${aA(n)}=${aA(t)}`).join("")}function Rte(e){let n=Object.entries(e).map(([t,i])=>Array.isArray(i)?i.map(r=>`${k1(t)}=${k1(r)}`).join("&"):`${k1(t)}=${k1(i)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}var Ote=/^[^\/()?;#]+/;function tA(e){let n=e.match(Ote);return n?n[0]:""}var kte=/^[^\/()?;=#]+/;function Nte(e){let n=e.match(kte);return n?n[0]:""}var Fte=/^[^=?&#]+/;function Lte(e){let n=e.match(Fte);return n?n[0]:""}var Bte=/^[^&#]+/;function Ute(e){let n=e.match(Bte);return n?n[0]:""}var lA=class{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ei([],{}):new ei([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(i[gn]=new ei(n,t)),i}parseSegment(){let n=tA(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new vt(4009,!1);return this.capture(n),new mh(B1(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let t=Nte(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=tA(this.remaining);r&&(i=r,this.capture(i))}n[B1(t)]=B1(i)}parseQueryParam(n){let t=Lte(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let d=Ute(this.remaining);d&&(i=d,this.capture(i))}let r=eU(t),o=eU(i);if(n.hasOwnProperty(r)){let d=n[r];Array.isArray(d)||(d=[d],n[r]=d),d.push(o)}else n[r]=o}parseParens(n){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=tA(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new vt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=gn);let d=this.parseChildren();t[o]=Object.keys(d).length===1?d[gn]:new ei([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new vt(4011,!1)}};function yU(e){return e.segments.length>0?new ei([],{[gn]:e}):e}function _U(e){let n={};for(let[i,r]of Object.entries(e.children)){let o=_U(r);if(i===gn&&o.segments.length===0&&o.hasChildren())for(let[d,g]of Object.entries(o.children))n[d]=g;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let t=new ei(e.segments,n);return zte(t)}function zte(e){if(e.numberOfChildren===1&&e.children[gn]){let n=e.children[gn];return new ei(e.segments.concat(n.segments),n.children)}return e}function yh(e){return e instanceof xc}function Vte(e,n,t=null,i=null){let r=vU(e);return bU(r,n,t,i)}function vU(e){let n;function t(o){let d={};for(let v of o.children){let x=t(v);d[v.outlet]=x}let g=new ei(o.url,d);return o===e&&(n=g),g}let i=t(e.root),r=yU(i);return n??r}function bU(e,n,t,i){let r=e;for(;r.parent;)r=r.parent;if(n.length===0)return nA(r,r,r,t,i);let o=jte(n);if(o.toRoot())return nA(r,r,new ei([],{}),t,i);let d=Hte(o,r,e),g=d.processChildren?f_(d.segmentGroup,d.index,o.commands):xU(d.segmentGroup,d.index,o.commands);return nA(r,d.segmentGroup,g,t,i)}function U1(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function y_(e){return typeof e=="object"&&e!=null&&e.outlets}function nA(e,n,t,i,r){let o={};i&&Object.entries(i).forEach(([v,x])=>{o[v]=Array.isArray(x)?x.map(D=>`${D}`):`${x}`});let d;e===n?d=t:d=wU(e,n,t);let g=yU(_U(d));return new xc(g,o,r)}function wU(e,n,t){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===n?i[r]=t:i[r]=wU(o,n,t)}),new ei(e.segments,i)}var z1=class{constructor(n,t,i){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=i,n&&i.length>0&&U1(i[0]))throw new vt(4003,!1);let r=i.find(y_);if(r&&r!==uU(i))throw new vt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function jte(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new z1(!0,0,e);let n=0,t=!1,i=e.reduce((r,o,d)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let g={};return Object.entries(o.outlets).forEach(([v,x])=>{g[v]=typeof x=="string"?x.split("/"):x}),[...r,{outlets:g}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:d===0?(o.split("/").forEach((g,v)=>{v==0&&g==="."||(v==0&&g===""?t=!0:g===".."?n++:g!=""&&r.push(g))}),r):[...r,o]},[]);return new z1(t,n,i)}var Wf=class{constructor(n,t,i){this.segmentGroup=n,this.processChildren=t,this.index=i}};function Hte(e,n,t){if(e.isAbsolute)return new Wf(n,!0,0);if(!t)return new Wf(n,!1,NaN);if(t.parent===null)return new Wf(t,!0,0);let i=U1(e.commands[0])?0:1,r=t.segments.length-1+i;return $te(t,r,e.numberOfDoubleDots)}function $te(e,n,t){let i=e,r=n,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new vt(4005,!1);r=i.segments.length}return new Wf(i,!1,r-o)}function Gte(e){return y_(e[0])?e[0].outlets:{[gn]:e}}function xU(e,n,t){if(e??=new ei([],{}),e.segments.length===0&&e.hasChildren())return f_(e,n,t);let i=qte(e,n,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new ei(e.segments.slice(0,i.pathIndex),{});return o.children[gn]=new ei(e.segments.slice(i.pathIndex),e.children),f_(o,0,r)}else return i.match&&r.length===0?new ei(e.segments,{}):i.match&&!e.hasChildren()?cA(e,n,t):i.match?f_(e,0,r):cA(e,n,t)}function f_(e,n,t){if(t.length===0)return new ei(e.segments,{});{let i=Gte(t),r={};if(Object.keys(i).some(o=>o!==gn)&&e.children[gn]&&e.numberOfChildren===1&&e.children[gn].segments.length===0){let o=f_(e.children[gn],n,t);return new ei(e.segments,o.children)}return Object.entries(i).forEach(([o,d])=>{typeof d=="string"&&(d=[d]),d!==null&&(r[o]=xU(e.children[o],n,d))}),Object.entries(e.children).forEach(([o,d])=>{i[o]===void 0&&(r[o]=d)}),new ei(e.segments,r)}}function qte(e,n,t){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=t.length)return o;let d=e.segments[r],g=t[i];if(y_(g))break;let v=`${g}`,x=i<t.length-1?t[i+1]:null;if(r>0&&v===void 0)break;if(v&&x&&typeof x=="object"&&x.outlets===void 0){if(!nU(v,x,d))return o;i+=2}else{if(!nU(v,{},d))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function cA(e,n,t){let i=e.segments.slice(0,n),r=0;for(;r<t.length;){let o=t[r];if(y_(o)){let v=Wte(o.outlets);return new ei(i,v)}if(r===0&&U1(t[0])){let v=e.segments[n];i.push(new mh(v.path,tU(t[0]))),r++;continue}let d=y_(o)?o.outlets[gn]:`${o}`,g=r<t.length-1?t[r+1]:null;d&&g&&U1(g)?(i.push(new mh(d,tU(g))),r+=2):(i.push(new mh(d,{})),r++)}return new ei(i,{})}function Wte(e){let n={};return Object.entries(e).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[t]=cA(new ei([],{}),0,i))}),n}function tU(e){let n={};return Object.entries(e).forEach(([t,i])=>n[t]=`${i}`),n}function nU(e,n,t){return e==t.path&&bl(n,t.parameters)}var m_="imperative",Br=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Br||{}),sa=class{constructor(n,t){this.id=n,this.url=t}},Xf=class extends sa{constructor(n,t,i="imperative",r=null){super(n,t),this.type=Br.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},aa=class extends sa{constructor(n,t,i){super(n,t),this.urlAfterRedirects=i,this.type=Br.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Es=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Es||{}),V1=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(V1||{}),wc=class extends sa{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=Br.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bu=class extends sa{constructor(n,t,i,r){super(n,t),this.reason=i,this.code=r,this.type=Br.NavigationSkipped}},__=class extends sa{constructor(n,t,i,r){super(n,t),this.error=i,this.target=r,this.type=Br.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},j1=class extends sa{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Br.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uA=class extends sa{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Br.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dA=class extends sa{constructor(n,t,i,r,o){super(n,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Br.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hA=class extends sa{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Br.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pA=class extends sa{constructor(n,t,i,r){super(n,t),this.urlAfterRedirects=i,this.state=r,this.type=Br.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fA=class{constructor(n){this.route=n,this.type=Br.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mA=class{constructor(n){this.route=n,this.type=Br.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gA=class{constructor(n){this.snapshot=n,this.type=Br.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yA=class{constructor(n){this.snapshot=n,this.type=Br.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_A=class{constructor(n){this.snapshot=n,this.type=Br.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vA=class{constructor(n){this.snapshot=n,this.type=Br.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},H1=class{constructor(n,t,i){this.routerEvent=n,this.position=t,this.anchor=i,this.type=Br.Scroll}toString(){let n=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${n}')`}},v_=class{},Qf=class{constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}};function Zte(e,n){return e.providers&&!e._injector&&(e._injector=Xw(e.providers,n,`Route: ${e.path}`)),e._injector??n}function Ba(e){return e.outlet||gn}function Kte(e,n){let t=e.filter(i=>Ba(i)===n);return t.push(...e.filter(i=>Ba(i)!==n)),t}function I_(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){let t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var bA=class{get injector(){return I_(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new D_(this.rootInjector),this.attachRef=null}},D_=(()=>{class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new bA(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||e)(Re(ur))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),$1=class{constructor(n){this._root=n}get root(){return this._root.value}parent(n){let t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){let t=wA(n,this._root);return t?t.children.map(i=>i.value):[]}firstChild(n){let t=wA(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){let t=xA(n,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return xA(n,this._root).map(t=>t.value)}};function wA(e,n){if(e===n.value)return n;for(let t of n.children){let i=wA(e,t);if(i)return i}return null}function xA(e,n){if(e===n.value)return[n];for(let t of n.children){let i=xA(e,t);if(i.length)return i.unshift(n),i}return[]}var Cs=class{constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}};function qf(e){let n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}var G1=class extends $1{constructor(n,t){super(n),this.snapshot=t,PA(this,n)}toString(){return this.snapshot.toString()}};function SU(e){let n=Yte(e),t=new cr([new mh("",{})]),i=new cr({}),r=new cr({}),o=new cr({}),d=new cr(""),g=new _h(t,i,o,d,r,gn,e,n.root);return g.snapshot=n.root,new G1(new Cs(g,[]),n)}function Yte(e){let n={},t={},i={},r="",o=new Zf([],n,i,r,t,gn,e,null,{});return new W1("",new Cs(o,[]))}var _h=class{constructor(n,t,i,r,o,d,g,v){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=d,this.component=g,this._futureSnapshot=v,this.title=this.dataSubject?.pipe(Vt(x=>x[C_]))??Dt(void 0),this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Vt(n=>Yf(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Vt(n=>Yf(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function q1(e,n,t="emptyOnly"){let i,{routeConfig:r}=e;return n!==null&&(t==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:q(q({},n.params),e.params),data:q(q({},n.data),e.data),resolve:q(q(q(q({},e.data),n.data),r?.data),e._resolvedData)}:i={params:q({},e.params),data:q({},e.data),resolve:q(q({},e.data),e._resolvedData??{})},r&&EU(r)&&(i.resolve[C_]=r.title),i}var Zf=class{get title(){return this.data?.[C_]}constructor(n,t,i,r,o,d,g,v,x){this.url=n,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=d,this.component=g,this.routeConfig=v,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yf(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${t}')`}},W1=class extends $1{constructor(n,t){super(t),this.url=n,PA(this,t)}toString(){return CU(this._root)}};function PA(e,n){n.value._routerState=e,n.children.forEach(t=>PA(e,t))}function CU(e){let n=e.children.length>0?` { ${e.children.map(CU).join(", ")} } `:"";return`${e.value}${n}`}function iA(e){if(e.snapshot){let n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,bl(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),bl(n.params,t.params)||e.paramsSubject.next(t.params),Ste(n.url,t.url)||e.urlSubject.next(t.url),bl(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function SA(e,n){let t=bl(e.params,n.params)&&Dte(e.url,n.url),i=!e.parent!=!n.parent;return t&&!i&&(!e.parent||SA(e.parent,n.parent))}function EU(e){return typeof e.title=="string"||e.title===null}var RA=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=gn,this.activateEvents=new kn,this.deactivateEvents=new kn,this.attachEvents=new kn,this.detachEvents=new kn,this.parentContexts=Me(D_),this.location=Me(Wo),this.changeDetector=Me(Ko),this.inputBinder=Me(X1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new vt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new vt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new vt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new vt(4013,!1);this._activatedRoute=t;let r=this.location,d=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new CA(t,g,r.injector);this.activated=r.createComponent(d,{index:r.length,injector:v,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=Ln({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]})}}return e})(),CA=class e{__ngOutletInjector(n){return new e(this.route,this.childContexts,n)}constructor(n,t,i){this.route=n,this.childContexts=t,this.parent=i}get(n,t){return n===_h?this.route:n===D_?this.childContexts:this.parent.get(n,t)}},X1=new ct(""),iU=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=_u([i.queryParams,i.params,i.data]).pipe(Yi(([o,d,g],v)=>(g=q(q(q({},o),d),g),v===0?Dt(g):Promise.resolve(g)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let d=qL(i.component);if(!d){this.unsubscribeFromRouteData(t);return}for(let{templateName:g}of d.inputs)t.activatedComponentRef.setInput(g,o[g])});this.outletDataSubscriptions.set(t,r)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();function Jte(e,n,t){let i=b_(e,n._root,t?t._root:void 0);return new G1(i,n)}function b_(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=n.value;let r=Xte(e,n,t);return new Cs(i,r)}else{if(e.shouldAttach(n.value)){let o=e.retrieve(n.value);if(o!==null){let d=o.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(g=>b_(e,g)),d}}let i=Qte(n.value),r=n.children.map(o=>b_(e,o));return new Cs(i,r)}}function Xte(e,n,t){return n.children.map(i=>{for(let r of t.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return b_(e,i,r);return b_(e,i)})}function Qte(e){return new _h(new cr(e.url),new cr(e.params),new cr(e.queryParams),new cr(e.fragment),new cr(e.data),e.outlet,e.component,e)}var w_=class{constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}},IU="ngNavigationCancelingError";function Z1(e,n){let{redirectTo:t,navigationBehaviorOptions:i}=yh(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=DU(!1,Es.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function DU(e,n){let t=new Error(`NavigationCancelingError: ${e||""}`);return t[IU]=!0,t.cancellationCode=n,t}function ene(e){return TU(e)&&yh(e.url)}function TU(e){return!!e&&e[IU]}var tne=(e,n,t,i)=>Vt(r=>(new EA(n,r.targetRouterState,r.currentRouterState,t,i).activate(e),r)),EA=class{constructor(n,t,i,r,o){this.routeReuseStrategy=n,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,n),iA(this.futureState.root),this.activateChildRoutes(t,i,n)}deactivateChildRoutes(n,t,i){let r=qf(t);n.children.forEach(o=>{let d=o.value.outlet;this.deactivateRoutes(o,r[d],i),delete r[d]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(r===o)if(r.component){let d=i.getContext(r.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=qf(n);for(let d of Object.values(o))this.deactivateRouteAndItsChildren(d,r);if(i&&i.outlet){let d=i.outlet.detach(),g=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:g})}}deactivateRouteAndOutlet(n,t){let i=t.getContext(n.value.outlet),r=i&&n.value.component?i.children:t,o=qf(n);for(let d of Object.values(o))this.deactivateRouteAndItsChildren(d,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,t,i){let r=qf(t);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new vA(o.value.snapshot))}),n.children.length&&this.forwardEvent(new yA(n.value.snapshot))}activateRoutes(n,t,i){let r=n.value,o=t?t.value:null;if(iA(r),r===o)if(r.component){let d=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,i);else if(r.component){let d=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let g=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),iA(g.route.value),this.activateChildRoutes(n,null,d.children)}else d.attachRef=null,d.route=r,d.outlet&&d.outlet.activateWith(r,d.injector),this.activateChildRoutes(n,null,d.children)}else this.activateChildRoutes(n,null,i)}},K1=class{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Kf=class{constructor(n,t){this.component=n,this.route=t}};function nne(e,n,t){let i=e._root,r=n?n._root:null;return h_(i,r,t,[i.value])}function ine(e){let n=e.routeConfig?e.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:e,guards:n}}function tm(e,n){let t=Symbol(),i=n.get(e,t);return i===t?typeof e=="function"&&!rN(e)?e:n.get(e):i}function h_(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=qf(n);return e.children.forEach(d=>{rne(d,o[d.value.outlet],t,i.concat([d.value]),r),delete o[d.value.outlet]}),Object.entries(o).forEach(([d,g])=>g_(g,t.getContext(d),r)),r}function rne(e,n,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,d=n?n.value:null,g=t?t.getContext(e.value.outlet):null;if(d&&o.routeConfig===d.routeConfig){let v=one(d,o,o.routeConfig.runGuardsAndResolvers);v?r.canActivateChecks.push(new K1(i)):(o.data=d.data,o._resolvedData=d._resolvedData),o.component?h_(e,n,g?g.children:null,i,r):h_(e,n,t,i,r),v&&g&&g.outlet&&g.outlet.isActivated&&r.canDeactivateChecks.push(new Kf(g.outlet.component,d))}else d&&g_(n,g,r),r.canActivateChecks.push(new K1(i)),o.component?h_(e,null,g?g.children:null,i,r):h_(e,null,t,i,r);return r}function one(e,n,t){if(typeof t=="function")return t(e,n);switch(t){case"pathParamsChange":return!gh(e.url,n.url);case"pathParamsOrQueryParamsChange":return!gh(e.url,n.url)||!bl(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!SA(e,n)||!bl(e.queryParams,n.queryParams);case"paramsChange":default:return!SA(e,n)}}function g_(e,n,t){let i=qf(e),r=e.value;Object.entries(i).forEach(([o,d])=>{r.component?n?g_(d,n.children.getContext(o),t):g_(d,null,t):g_(d,n,t)}),r.component?n&&n.outlet&&n.outlet.isActivated?t.canDeactivateChecks.push(new Kf(n.outlet.component,r)):t.canDeactivateChecks.push(new Kf(null,r)):t.canDeactivateChecks.push(new Kf(null,r))}function T_(e){return typeof e=="function"}function sne(e){return typeof e=="boolean"}function ane(e){return e&&T_(e.canLoad)}function lne(e){return e&&T_(e.canActivate)}function cne(e){return e&&T_(e.canActivateChild)}function une(e){return e&&T_(e.canDeactivate)}function dne(e){return e&&T_(e.canMatch)}function AU(e){return e instanceof Pa||e?.name==="EmptyError"}var N1=Symbol("INITIAL_VALUE");function em(){return Yi(e=>_u(e.map(n=>n.pipe(fo(1),Ys(N1)))).pipe(Vt(n=>{for(let t of n)if(t!==!0){if(t===N1)return N1;if(t===!1||hne(t))return t}return!0}),jn(n=>n!==N1),fo(1)))}function hne(e){return yh(e)||e instanceof w_}function pne(e,n){return Vi(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:d}}=t;return d.length===0&&o.length===0?Dt(Ie(q({},t),{guardsResult:!0})):fne(d,i,r,e).pipe(Vi(g=>g&&sne(g)?mne(i,o,e,n):Dt(g)),Vt(g=>Ie(q({},t),{guardsResult:g})))})}function fne(e,n,t,i){return bi(e).pipe(Vi(r=>bne(r.component,r.route,t,n,i)),cl(r=>r!==!0,!0))}function mne(e,n,t,i){return bi(n).pipe(ac(r=>ll(yne(r.route.parent,i),gne(r.route,i),vne(e,r.path,t),_ne(e,r.route,t))),cl(r=>r!==!0,!0))}function gne(e,n){return e!==null&&n&&n(new _A(e)),Dt(!0)}function yne(e,n){return e!==null&&n&&n(new gA(e)),Dt(!0)}function _ne(e,n,t){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return Dt(!0);let r=i.map(o=>uf(()=>{let d=I_(n)??t,g=tm(o,d),v=lne(g)?g.canActivate(n,e):Xs(d,()=>g(n,e));return Uu(v).pipe(cl())}));return Dt(r).pipe(em())}function vne(e,n,t){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(d=>ine(d)).filter(d=>d!==null).map(d=>uf(()=>{let g=d.guards.map(v=>{let x=I_(d.node)??t,D=tm(v,x),R=cne(D)?D.canActivateChild(i,e):Xs(x,()=>D(i,e));return Uu(R).pipe(cl())});return Dt(g).pipe(em())}));return Dt(o).pipe(em())}function bne(e,n,t,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Dt(!0);let d=o.map(g=>{let v=I_(n)??r,x=tm(g,v),D=une(x)?x.canDeactivate(e,n,t,i):Xs(v,()=>x(e,n,t,i));return Uu(D).pipe(cl())});return Dt(d).pipe(em())}function wne(e,n,t,i){let r=n.canLoad;if(r===void 0||r.length===0)return Dt(!0);let o=r.map(d=>{let g=tm(d,e),v=ane(g)?g.canLoad(n,t):Xs(e,()=>g(n,t));return Uu(v)});return Dt(o).pipe(em(),MU(i))}function MU(e){return GE(Kn(n=>{if(typeof n!="boolean")throw Z1(e,n)}),Vt(n=>n===!0))}function xne(e,n,t,i){let r=n.canMatch;if(!r||r.length===0)return Dt(!0);let o=r.map(d=>{let g=tm(d,e),v=dne(g)?g.canMatch(n,t):Xs(e,()=>g(n,t));return Uu(v)});return Dt(o).pipe(em(),MU(i))}var x_=class{constructor(n){this.segmentGroup=n||null}},S_=class extends Error{constructor(n){super(),this.urlTree=n}};function Gf(e){return lf(new x_(e))}function Sne(e){return lf(new vt(4e3,!1))}function Cne(e){return lf(DU(!1,Es.GuardRejected))}var IA=class{constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Dt(i);if(r.numberOfChildren>1||!r.children[gn])return Sne(`${n.redirectTo}`);r=r.children[gn]}}applyRedirectCommands(n,t,i,r,o){if(typeof t!="string"){let g=t,{queryParams:v,fragment:x,routeConfig:D,url:R,outlet:L,params:j,data:J,title:re}=r,be=Xs(o,()=>g({params:j,data:J,queryParams:v,fragment:x,routeConfig:D,url:R,outlet:L,title:re}));if(be instanceof xc)throw new S_(be);t=be}let d=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),n,i);if(t[0]==="/")throw new S_(d);return d}applyRedirectCreateUrlTree(n,t,i,r){let o=this.createSegmentGroup(n,t.root,i,r);return new xc(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let g=o.substring(1);i[r]=t[g]}else i[r]=o}),i}createSegmentGroup(n,t,i,r){let o=this.createSegments(n,t.segments,i,r),d={};return Object.entries(t.children).forEach(([g,v])=>{d[g]=this.createSegmentGroup(n,v,i,r)}),new ei(o,d)}createSegments(n,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,t,i){let r=i[t.path.substring(1)];if(!r)throw new vt(4001,!1);return r}findOrReturn(n,t){let i=0;for(let r of t){if(r.path===n.path)return t.splice(i),r;i++}return n}},DA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ene(e,n,t,i,r){let o=PU(e,n,t);return o.matched?(i=Zte(n,i),xne(i,n,t,r).pipe(Vt(d=>d===!0?o:q({},DA)))):Dt(o)}function PU(e,n,t){if(n.path==="**")return Ine(t);if(n.path==="")return n.pathMatch==="full"&&(e.hasChildren()||t.length>0)?q({},DA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(n.matcher||xte)(t,e,n);if(!r)return q({},DA);let o={};Object.entries(r.posParams??{}).forEach(([g,v])=>{o[g]=v.path});let d=r.consumed.length>0?q(q({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:d,positionalParamSegments:r.posParams??{}}}function Ine(e){return{matched:!0,parameters:e.length>0?uU(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function rU(e,n,t,i){return t.length>0&&Ane(e,t,i)?{segmentGroup:new ei(n,Tne(i,new ei(t,e.children))),slicedSegments:[]}:t.length===0&&Mne(e,t,i)?{segmentGroup:new ei(e.segments,Dne(e,t,i,e.children)),slicedSegments:t}:{segmentGroup:new ei(e.segments,e.children),slicedSegments:t}}function Dne(e,n,t,i){let r={};for(let o of t)if(Q1(e,n,o)&&!i[Ba(o)]){let d=new ei([],{});r[Ba(o)]=d}return q(q({},i),r)}function Tne(e,n){let t={};t[gn]=n;for(let i of e)if(i.path===""&&Ba(i)!==gn){let r=new ei([],{});t[Ba(i)]=r}return t}function Ane(e,n,t){return t.some(i=>Q1(e,n,i)&&Ba(i)!==gn)}function Mne(e,n,t){return t.some(i=>Q1(e,n,i))}function Q1(e,n,t){return(e.hasChildren()||n.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Pne(e,n,t){return n.length===0&&!e.children[t]}var TA=class{};function Rne(e,n,t,i,r,o,d="emptyOnly"){return new AA(e,n,t,i,r,d,o).recognize()}var One=31,AA=class{constructor(n,t,i,r,o,d,g){this.injector=n,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=d,this.urlSerializer=g,this.applyRedirects=new IA(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new vt(4002,`'${n.segmentGroup}'`)}recognize(){let n=rU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Vt(({children:t,rootSnapshot:i})=>{let r=new Cs(i,t),o=new W1("",r),d=Vte(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(d),{state:o,tree:d}}))}match(n){let t=new Zf([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),gn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,gn,t).pipe(Vt(i=>({children:i,rootSnapshot:t})),bu(i=>{if(i instanceof S_)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof x_?this.noMatchError(i):i}))}processSegmentGroup(n,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,t,i,o):this.processSegment(n,t,i,i.segments,r,!0,o).pipe(Vt(d=>d instanceof Cs?[d]:[]))}processChildren(n,t,i,r){let o=[];for(let d of Object.keys(i.children))d==="primary"?o.unshift(d):o.push(d);return bi(o).pipe(ac(d=>{let g=i.children[d],v=Kte(t,d);return this.processSegmentGroup(n,v,g,d,r)}),iI((d,g)=>(d.push(...g),d)),wu(null),nI(),Vi(d=>{if(d===null)return Gf(i);let g=RU(d);return kne(g),Dt(g)}))}processSegment(n,t,i,r,o,d,g){return bi(t).pipe(ac(v=>this.processSegmentAgainstRoute(v._injector??n,t,v,i,r,o,d,g).pipe(bu(x=>{if(x instanceof x_)return Dt(null);throw x}))),cl(v=>!!v),bu(v=>{if(AU(v))return Pne(i,r,o)?Dt(new TA):Gf(i);throw v}))}processSegmentAgainstRoute(n,t,i,r,o,d,g,v){return Ba(i)!==d&&(d===gn||!Q1(r,o,i))?Gf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,d,v):this.allowRedirects&&g?this.expandSegmentAgainstRouteUsingRedirect(n,r,t,i,o,d,v):Gf(r)}expandSegmentAgainstRouteUsingRedirect(n,t,i,r,o,d,g){let{matched:v,parameters:x,consumedSegments:D,positionalParamSegments:R,remainingSegments:L}=PU(t,r,o);if(!v)return Gf(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>One&&(this.allowRedirects=!1));let j=new Zf(o,x,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,oU(r),Ba(r),r.component??r._loadedComponent??null,r,sU(r)),J=q1(j,g,this.paramsInheritanceStrategy);j.params=Object.freeze(J.params),j.data=Object.freeze(J.data);let re=this.applyRedirects.applyRedirectCommands(D,r.redirectTo,R,j,n);return this.applyRedirects.lineralizeSegments(r,re).pipe(Vi(be=>this.processSegment(n,i,t,be.concat(L),d,!1,g)))}matchSegmentAgainstRoute(n,t,i,r,o,d){let g=Ene(t,i,r,n,this.urlSerializer);return i.path==="**"&&(t.children={}),g.pipe(Yi(v=>v.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(Yi(({routes:x})=>{let D=i._loadedInjector??n,{parameters:R,consumedSegments:L,remainingSegments:j}=v,J=new Zf(L,R,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,oU(i),Ba(i),i.component??i._loadedComponent??null,i,sU(i)),re=q1(J,d,this.paramsInheritanceStrategy);J.params=Object.freeze(re.params),J.data=Object.freeze(re.data);let{segmentGroup:be,slicedSegments:xe}=rU(t,L,j,x);if(xe.length===0&&be.hasChildren())return this.processChildren(D,x,be,J).pipe(Vt(Ne=>new Cs(J,Ne)));if(x.length===0&&xe.length===0)return Dt(new Cs(J,[]));let Pe=Ba(i)===o;return this.processSegment(D,x,be,xe,Pe?gn:o,!0,J).pipe(Vt(Ne=>new Cs(J,Ne instanceof Cs?[Ne]:[])))}))):Gf(t)))}getChildConfig(n,t,i){return t.children?Dt({routes:t.children,injector:n}):t.loadChildren?t._loadedRoutes!==void 0?Dt({routes:t._loadedRoutes,injector:t._loadedInjector}):wne(n,t,i,this.urlSerializer).pipe(Vi(r=>r?this.configLoader.loadChildren(n,t).pipe(Kn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Cne(t))):Dt({routes:[],injector:n})}};function kne(e){e.sort((n,t)=>n.value.outlet===gn?-1:t.value.outlet===gn?1:n.value.outlet.localeCompare(t.value.outlet))}function Nne(e){let n=e.value.routeConfig;return n&&n.path===""}function RU(e){let n=[],t=new Set;for(let i of e){if(!Nne(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):n.push(i)}for(let i of t){let r=RU(i.children);n.push(new Cs(i.value,r))}return n.filter(i=>!t.has(i))}function oU(e){return e.data||{}}function sU(e){return e.resolve||{}}function Fne(e,n,t,i,r,o){return Vi(d=>Rne(e,n,t,i,d.extractedUrl,r,o).pipe(Vt(({state:g,tree:v})=>Ie(q({},d),{targetSnapshot:g,urlAfterRedirects:v}))))}function Lne(e,n){return Vi(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Dt(t);let o=new Set(r.map(v=>v.route)),d=new Set;for(let v of o)if(!d.has(v))for(let x of OU(v))d.add(x);let g=0;return bi(d).pipe(ac(v=>o.has(v)?Bne(v,i,e,n):(v.data=q1(v,v.parent,e).resolve,Dt(void 0))),Kn(()=>g++),hf(1),Vi(v=>g===d.size?Dt(t):wr))})}function OU(e){let n=e.children.map(t=>OU(t)).flat();return[e,...n]}function Bne(e,n,t,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!EU(r)&&(o[C_]=r.title),Une(o,e,n,i).pipe(Vt(d=>(e._resolvedData=d,e.data=q1(e,e.parent,t).resolve,null)))}function Une(e,n,t,i){let r=sA(e);if(r.length===0)return Dt({});let o={};return bi(r).pipe(Vi(d=>zne(e[d],n,t,i).pipe(cl(),Kn(g=>{if(g instanceof w_)throw Z1(new Jf,g);o[d]=g}))),hf(1),eI(o),bu(d=>AU(d)?wr:lf(d)))}function zne(e,n,t,i){let r=I_(n)??i,o=tm(e,r),d=o.resolve?o.resolve(n,t):Xs(r,()=>o(n,t));return Uu(d)}function rA(e){return Yi(n=>{let t=e(n);return t?bi(t).pipe(Vt(()=>n)):Dt(n)})}var kU=(()=>{class e{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===gn);return i}getResolvedTitleForRoute(t){return t.data[C_]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me(Vne),providedIn:"root"})}}return e})(),Vne=(()=>{class e extends kU{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)(Re(IB))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),A_=new ct("",{providedIn:"root",factory:()=>({})}),jne=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zo],decls:1,vars:0,template:function(i,r){i&1&&Qe(0,"router-outlet")},dependencies:[RA],encapsulation:2})}}return e})();function OA(e){let n=e.children&&e.children.map(OA),t=n?Ie(q({},e),{children:n}):q({},e);return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==gn&&(t.component=jne),t}var Y1=new ct(""),kA=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Me(c1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=Uu(t.loadComponent()).pipe(Vt(NU),Kn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),xu(()=>{this.componentLoaders.delete(t)})),r=new rf(i,()=>new Bt).pipe(nf());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Dt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Hne(i,this.compiler,t,this.onLoadEndListener).pipe(xu(()=>{this.childrenLoaders.delete(i)})),d=new rf(o,()=>new Bt).pipe(nf());return this.childrenLoaders.set(i,d),d}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Hne(e,n,t,i){return Uu(e.loadChildren()).pipe(Vt(NU),Vi(r=>r instanceof ky||Array.isArray(r)?Dt(r):bi(n.compileModuleAsync(r))),Vt(r=>{i&&i(e);let o,d,g=!1;return Array.isArray(r)?(d=r,g=!0):(o=r.create(t).injector,d=o.get(Y1,[],{optional:!0,self:!0}).flat()),{routes:d.map(OA),injector:o}}))}function $ne(e){return e&&typeof e=="object"&&"default"in e}function NU(e){return $ne(e)?e.default:e}var NA=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me(Gne),providedIn:"root"})}}return e})(),Gne=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),FU=new ct(""),LU=new ct("");function qne(e,n,t){let i=e.get(LU),r=e.get(pn);return e.get(jt).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(x=>setTimeout(x));let o,d=new Promise(x=>{o=x}),g=r.startViewTransition(()=>(o(),Wne(e))),{onViewTransitionCreated:v}=i;return v&&Xs(e,()=>v({transition:g,from:n,to:t})),d})}function Wne(e){return new Promise(n=>{Po({read:()=>setTimeout(n)},{injector:e})})}var Zne=new ct(""),FA=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Bt,this.transitionAbortSubject=new Bt,this.configLoader=Me(kA),this.environmentInjector=Me(ur),this.urlSerializer=Me(E_),this.rootContexts=Me(D_),this.location=Me(Ou),this.inputBindingEnabled=Me(X1,{optional:!0})!==null,this.titleStrategy=Me(kU),this.options=Me(A_,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Me(NA),this.createViewTransition=Me(FU,{optional:!0}),this.navigationErrorHandler=Me(Zne,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Dt(void 0),this.rootComponentType=null;let t=r=>this.events.next(new fA(r)),i=r=>this.events.next(new mA(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(Ie(q(q({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new cr({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:m_,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jn(o=>o.id!==0),Vt(o=>Ie(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Yi(o=>{let d=!1,g=!1;return Dt(o).pipe(Yi(v=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Es.SupersededByNewNavigation),wr;this.currentTransition=o,this.currentNavigation={id:v.id,initialUrl:v.rawUrl,extractedUrl:v.extractedUrl,targetBrowserUrl:typeof v.extras.browserUrl=="string"?this.urlSerializer.parse(v.extras.browserUrl):v.extras.browserUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let x=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),D=v.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!x&&D!=="reload"){let R="";return this.events.next(new Bu(v.id,this.urlSerializer.serialize(v.rawUrl),R,V1.IgnoredSameUrlNavigation)),v.resolve(!1),wr}if(this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return Dt(v).pipe(Yi(R=>{let L=this.transitions?.getValue();return this.events.next(new Xf(R.id,this.urlSerializer.serialize(R.extractedUrl),R.source,R.restoredState)),L!==this.transitions?.getValue()?wr:Promise.resolve(R)}),Fne(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Kn(R=>{o.targetSnapshot=R.targetSnapshot,o.urlAfterRedirects=R.urlAfterRedirects,this.currentNavigation=Ie(q({},this.currentNavigation),{finalUrl:R.urlAfterRedirects});let L=new j1(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(L)}));if(x&&this.urlHandlingStrategy.shouldProcessUrl(v.currentRawUrl)){let{id:R,extractedUrl:L,source:j,restoredState:J,extras:re}=v,be=new Xf(R,this.urlSerializer.serialize(L),j,J);this.events.next(be);let xe=SU(this.rootComponentType).snapshot;return this.currentTransition=o=Ie(q({},v),{targetSnapshot:xe,urlAfterRedirects:L,extras:Ie(q({},re),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=L,Dt(o)}else{let R="";return this.events.next(new Bu(v.id,this.urlSerializer.serialize(v.extractedUrl),R,V1.IgnoredByUrlHandlingStrategy)),v.resolve(!1),wr}}),Kn(v=>{let x=new uA(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(x)}),Vt(v=>(this.currentTransition=o=Ie(q({},v),{guards:nne(v.targetSnapshot,v.currentSnapshot,this.rootContexts)}),o)),pne(this.environmentInjector,v=>this.events.next(v)),Kn(v=>{if(o.guardsResult=v.guardsResult,v.guardsResult&&typeof v.guardsResult!="boolean")throw Z1(this.urlSerializer,v.guardsResult);let x=new dA(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.events.next(x)}),jn(v=>v.guardsResult?!0:(this.cancelNavigationTransition(v,"",Es.GuardRejected),!1)),rA(v=>{if(v.guards.canActivateChecks.length)return Dt(v).pipe(Kn(x=>{let D=new hA(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(D)}),Yi(x=>{let D=!1;return Dt(x).pipe(Lne(this.paramsInheritanceStrategy,this.environmentInjector),Kn({next:()=>D=!0,complete:()=>{D||this.cancelNavigationTransition(x,"",Es.NoDataFromResolver)}}))}),Kn(x=>{let D=new pA(x.id,this.urlSerializer.serialize(x.extractedUrl),this.urlSerializer.serialize(x.urlAfterRedirects),x.targetSnapshot);this.events.next(D)}))}),rA(v=>{let x=D=>{let R=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&R.push(this.configLoader.loadComponent(D.routeConfig).pipe(Kn(L=>{D.component=L}),Vt(()=>{})));for(let L of D.children)R.push(...x(L));return R};return _u(x(v.targetSnapshot.root)).pipe(wu(null),fo(1))}),rA(()=>this.afterPreactivation()),Yi(()=>{let{currentSnapshot:v,targetSnapshot:x}=o,D=this.createViewTransition?.(this.environmentInjector,v.root,x.root);return D?bi(D).pipe(Vt(()=>o)):Dt(o)}),Vt(v=>{let x=Jte(t.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return this.currentTransition=o=Ie(q({},v),{targetRouterState:x}),this.currentNavigation.targetRouterState=x,o}),Kn(()=>{this.events.next(new v_)}),tne(this.rootContexts,t.routeReuseStrategy,v=>this.events.next(v),this.inputBindingEnabled),fo(1),Kn({next:v=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new aa(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects))),this.titleStrategy?.updateTitle(v.targetRouterState.snapshot),v.resolve(!0)},complete:()=>{d=!0}}),Ii(this.transitionAbortSubject.pipe(Kn(v=>{throw v}))),xu(()=>{!d&&!g&&this.cancelNavigationTransition(o,"",Es.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),bu(v=>{if(g=!0,TU(v))this.events.next(new wc(o.id,this.urlSerializer.serialize(o.extractedUrl),v.message,v.cancellationCode)),ene(v)?this.events.next(new Qf(v.url,v.navigationBehaviorOptions)):o.resolve(!1);else{let x=new __(o.id,this.urlSerializer.serialize(o.extractedUrl),v,o.targetSnapshot??void 0);try{let D=Xs(this.environmentInjector,()=>this.navigationErrorHandler?.(x));if(D instanceof w_){let{message:R,cancellationCode:L}=Z1(this.urlSerializer,D);this.events.next(new wc(o.id,this.urlSerializer.serialize(o.extractedUrl),R,L)),this.events.next(new Qf(D.redirectTo,D.navigationBehaviorOptions))}else{this.events.next(x);let R=t.errorHandler(v);o.resolve(!!R)}}catch(D){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(D)}}return wr}))}))}cancelNavigationTransition(t,i,r){let o=new wc(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Kne(e){return e!==m_}var Yne=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me(Jne),providedIn:"root"})}}return e})(),MA=class{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}},Jne=(()=>{class e extends MA{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),BU=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:()=>Me(Xne),providedIn:"root"})}}return e})(),Xne=(()=>{class e extends BU{constructor(){super(...arguments),this.location=Me(Ou),this.urlSerializer=Me(E_),this.options=Me(A_,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Me(NA),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=SU(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Xf)this.stateMemento=this.createStateMemento();else if(t instanceof Bu)this.rawUrlTree=i.initialUrl;else if(t instanceof j1){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof v_?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof wc&&(t.code===Es.GuardRejected||t.code===Es.NoDataFromResolver)?this.restoreHistory(i):t instanceof __?this.restoreHistory(i,!0):t instanceof aa&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof xc?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,d=q(q({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",d)}else{let o=q(q({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=ea(e)))(r||e)}})()}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),p_=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(p_||{});function UU(e,n){e.events.pipe(jn(t=>t instanceof aa||t instanceof wc||t instanceof __||t instanceof Bu),Vt(t=>t instanceof aa||t instanceof Bu?p_.COMPLETE:(t instanceof wc?t.code===Es.Redirect||t.code===Es.SupersededByNewNavigation:!1)?p_.REDIRECTING:p_.FAILED),jn(t=>t!==p_.REDIRECTING),fo(1)).subscribe(()=>{n()})}function Qne(e){throw e}var eie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},la=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Me(r1),this.stateManager=Me(BU),this.options=Me(A_,{optional:!0})||{},this.pendingTasks=Me(Ru),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Me(FA),this.urlSerializer=Me(E_),this.location=Me(Ou),this.urlHandlingStrategy=Me(NA),this._events=new Bt,this.errorHandler=this.options.errorHandler||Qne,this.navigated=!1,this.routeReuseStrategy=Me(Yne),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Me(Y1,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Me(X1,{optional:!0}),this.eventsSubscription=new gi,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof wc&&i.code!==Es.Redirect&&i.code!==Es.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof aa)this.navigated=!0;else if(i instanceof Qf){let d=i.navigationBehaviorOptions,g=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),v=q({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Kne(r.source)},d);this.scheduleNavigation(g,m_,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}iie(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),m_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},d=r?.navigationId?r:null;if(r){let v=q({},r);delete v.navigationId,delete v.\u0275routerPageId,Object.keys(v).length!==0&&(o.state=v)}let g=this.parseUrl(t);this.scheduleNavigation(g,i,d,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(OA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:d,queryParamsHandling:g,preserveFragment:v}=i,x=v?this.currentUrlTree.fragment:d,D=null;switch(g??this.options.defaultQueryParamsHandling){case"merge":D=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=o||null}D!==null&&(D=this.removeEmptyProps(D));let R;try{let L=r?r.snapshot:this.routerState.snapshot.root;R=vU(L)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),R=this.currentUrlTree.root}return bU(R,t,D,x??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=yh(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,m_,null,i)}navigate(t,i={skipLocationChange:!1}){return nie(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=q({},eie):i===!1?r=q({},tie):r=i,yh(t))return QB(this.currentUrlTree,t,r);let o=this.parseUrl(t);return QB(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,d){if(this.disposed)return Promise.resolve(!1);let g,v,x;d?(g=d.resolve,v=d.reject,x=d.promise):x=new Promise((R,L)=>{g=R,v=L});let D=this.pendingTasks.add();return UU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(D))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:g,reject:v,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(R=>Promise.reject(R))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function nie(e){for(let n=0;n<e.length;n++)if(e[n]==null)throw new vt(4008,!1)}function iie(e){return!(e instanceof v_)&&!(e instanceof Qf)}var nm=(()=>{class e{constructor(t,i,r,o,d,g){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=d,this.locationStrategy=g,this.href=null,this.onChanges=new Bt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let v=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement=v==="a"||v==="area",this.isAnchorElement?this.subscription=t.events.subscribe(x=>{x instanceof aa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(yh(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,d){let g=this.urlTree;if(g===null||this.isAnchorElement&&(t!==0||i||r||o||d||typeof this.target=="string"&&this.target!="_self"))return!0;let v={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(g,v),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:xF(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:yh(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||e)(Je(la),Je(_h),Gw("tabindex"),Je(ch),Je(yi),Je(bc))}}static{this.\u0275dir=Ln({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&dt("click",function(d){return r.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),i&2&&In("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_l],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_l],replaceUrl:[2,"replaceUrl","replaceUrl",_l],routerLink:"routerLink"},standalone:!0,features:[uh,Sr]})}}return e})();var J1=class{};var rie=(()=>{class e{constructor(t,i,r,o,d){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(jn(t=>t instanceof aa),ac(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Xw(o.providers,t,`Route: ${o.path}`));let d=o._injector??t,g=o._loadedInjector??d;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(d,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(g,o.children??o._loadedRoutes))}return bi(r).pipe(vu())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Dt(null);let o=r.pipe(Vi(d=>d===null?Dt(void 0):(i._loadedRoutes=d.routes,i._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(i.loadComponent&&!i._loadedComponent){let d=this.loader.loadComponent(i);return bi([o,d]).pipe(vu())}else return o})}static{this.\u0275fac=function(i){return new(i||e)(Re(la),Re(c1),Re(ur),Re(J1),Re(kA))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),zU=new ct(""),oie=(()=>{class e{constructor(t,i,r,o,d={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof aa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Bu&&t.code===V1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof H1&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new H1(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){BF()}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();function sie(e){return e.routerState.root}function M_(e,n){return{\u0275kind:e,\u0275providers:n}}function aie(){let e=Me(Un);return n=>{let t=e.get(Ss);if(n!==t.components[0])return;let i=e.get(la),r=e.get(VU);e.get(LA)===1&&i.initialNavigation(),e.get(jU,null,xn.Optional)?.setUpPreloading(),e.get(zU,null,xn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var VU=new ct("",{factory:()=>new Bt}),LA=new ct("",{providedIn:"root",factory:()=>1});function lie(){return M_(2,[{provide:LA,useValue:0},{provide:a1,multi:!0,deps:[Un],useFactory:n=>{let t=n.get(eB,Promise.resolve());return()=>t.then(()=>new Promise(i=>{let r=n.get(la),o=n.get(VU);UU(r,()=>{i(!0)}),n.get(FA).afterPreactivation=()=>(i(!0),o.closed?Dt(void 0):o),r.initialNavigation()}))}}])}function cie(){return M_(3,[{provide:a1,multi:!0,useFactory:()=>{let n=Me(la);return()=>{n.setUpLocationChangeListener()}}},{provide:LA,useValue:2}])}var jU=new ct("");function uie(e){return M_(0,[{provide:jU,useExisting:rie},{provide:J1,useExisting:e}])}function die(){return M_(8,[iU,{provide:X1,useExisting:iU}])}function hie(e){let n=[{provide:FU,useValue:qne},{provide:LU,useValue:q({skipNextTransition:!!e?.skipInitialTransition},e)}];return M_(9,n)}var aU=new ct("ROUTER_FORROOT_GUARD"),pie=[Ou,{provide:E_,useClass:Jf},la,D_,{provide:_h,useFactory:sie,deps:[la]},kA,[]],BA=(()=>{class e{constructor(t){}static forRoot(t,i){return{ngModule:e,providers:[pie,[],{provide:Y1,multi:!0,useValue:t},{provide:aU,useFactory:yie,deps:[[la,new Ly,new Aw]]},{provide:A_,useValue:i||{}},i?.useHash?mie():gie(),fie(),i?.preloadingStrategy?uie(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?_ie(i):[],i?.bindToComponentInputs?die().\u0275providers:[],i?.enableViewTransitions?hie().\u0275providers:[],vie()]}}static forChild(t){return{ngModule:e,providers:[{provide:Y1,multi:!0,useValue:t}]}}static{this.\u0275fac=function(i){return new(i||e)(Re(aU,8))}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();function fie(){return{provide:zU,useFactory:()=>{let e=Me(rB),n=Me(jt),t=Me(A_),i=Me(FA),r=Me(E_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new oie(r,i,e,n,t)}}}function mie(){return{provide:bc,useClass:nB}}function gie(){return{provide:bc,useClass:ET}}function yie(e){return"guarded"}function _ie(e){return[e.initialNavigation==="disabled"?cie().\u0275providers:[],e.initialNavigation==="enabledBlocking"?lie().\u0275providers:[]]}var lU=new ct("");function vie(){return[{provide:lU,useFactory:aie},{provide:l1,multi:!0,useExisting:lU}]}var tx=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Pt({type:e,selectors:[["app-about-us"]],decls:30,vars:0,consts:[[1,"container","about-container","py-4"],[1,"text-center"],[1,"text-justify"],[1,"list-unstyled"],[1,"text-center","mt-4"],["type","button","routerLink","/map",1,"btn","btn-primary","gas-button"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"h1",1),me(2,"About Us"),Z(),Y(3,"p",2),me(4," GRASP (Gas Refill Application for a Sustainable Puerto Rico) is a platform designed to provide Puerto Rican drivers with accurate, real-time gas price information to help them save on fuel costs. Addressing the financial challenges faced by students and low-income residents, GRASP gathers and consolidates data from Puerto Rico\u2019s Department of Consumer Affairs (DACO) to provide transparent, user-friendly price comparisons of nearby gas stations. Built with a serverless architecture for cost efficiency and scalability, the app offers an essential resource in emergencies by highlighting gas stations with available fuel. GRASP is not only a tool for economic relief but also fosters transparency, promotes smarter spending, and supports market competition in Puerto Rico\u2019s fuel industry. "),Z(),Y(5,"h3"),me(6,"Developer Team:"),Z(),Y(7,"ul",3)(8,"li")(9,"b"),me(10,"Yeran L. Concepci\xF3n Concepci\xF3n"),Z(),me(11,": yeran.concepcion@upr.edu"),Z(),Y(12,"li")(13,"b"),me(14,"Sebastian Rodr\xEDguez Irizarry"),Z(),me(15,": sebastian.rodriguez29@upr.edu"),Z(),Y(16,"li")(17,"b"),me(18,"I\xE1n G. Col\xF3n Rosado"),Z(),me(19,": ian.colon6@upr.edu"),Z()(),Y(20,"h3"),me(21,"Team Supervisor:"),Z(),Y(22,"ul",3)(23,"li")(24,"b"),me(25,"Prof. Wilson Rivera Gallego"),Z(),me(26,": wilson.riveragallego@upr.edu"),Z()(),Y(27,"div",4)(28,"button",5),me(29,"\xAB Back to Map"),Z()()())},dependencies:[nm],styles:[".about-container[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}@media (max-width: 768px){.about-container[_ngcontent-%COMP%]{padding:0 1rem}h1[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{font-size:1.25rem}p[_ngcontent-%COMP%]{font-size:.9rem}}"]})};var Is=63710088e-1,bie={centimeters:Is*100,centimetres:Is*100,degrees:360/(2*Math.PI),feet:Is*3.28084,inches:Is*39.37,kilometers:Is/1e3,kilometres:Is/1e3,meters:Is,metres:Is,miles:Is/1609.344,millimeters:Is*1e3,millimetres:Is*1e3,nauticalmiles:Is/1852,radians:1,yards:Is*1.0936};function $U(e,n,t={}){let i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=n||{},i.geometry=e,i}function GU(e,n,t={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!HU(e[0])||!HU(e[1]))throw new Error("coordinates must contain numbers");return $U({type:"Point",coordinates:e},n,t)}function qU(e,n,t={}){for(let r of e){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return $U({type:"Polygon",coordinates:e},n,t)}function WU(e,n="kilometers"){let t=bie[n];if(!t)throw new Error(n+" units is invalid");return e/t}function UA(e){return e%(2*Math.PI)*180/Math.PI}function nx(e){return e%360*Math.PI/180}function HU(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function ZU(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function KU(e,n,t,i={}){let r=ZU(e),o=nx(r[0]),d=nx(r[1]),g=nx(t),v=WU(n,i.units),x=Math.asin(Math.sin(d)*Math.cos(v)+Math.cos(d)*Math.sin(v)*Math.cos(g)),D=o+Math.atan2(Math.sin(g)*Math.sin(v)*Math.cos(d),Math.cos(v)-Math.sin(d)*Math.sin(x)),R=UA(D),L=UA(x);return GU([R,L],i.properties)}function YU(e,n,t={}){let i=t.steps||64,r=t.properties?t.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},o=[];for(let d=0;d<i;d++)o.push(KU(e,n,d*-360/i,t).geometry.coordinates);return o.push(o[0]),qU([o],r)}var Ua={production:!0,apiUrl:"http://localhost:3000/api",cognitoConfig:{userPoolId:"us-west-2_4he9oppIC",clientId:"4e7edvk2hpk7vkt5fk4soed8r"},GETGASSTATIONS:"https://6jf7u35vyl.execute-api.us-west-2.amazonaws.com/NP/getgasstations",UPDATEGASPRICE:"https://6jf7u35vyl.execute-api.us-west-2.amazonaws.com/NP/updategasprice",GETCLOSESTGASSTATION:"https://6jf7u35vyl.execute-api.us-west-2.amazonaws.com/NP/getcloseststation",GETADMINS:"https://6jf7u35vyl.execute-api.us-west-2.amazonaws.com/NP/getadmins",UPDATERATINGS:"https://6jf7u35vyl.execute-api.us-west-2.amazonaws.com/NP/stations/rating"};var im=class e{constructor(n){this.http=n}apiUrl="https://affordable-gas-map-web-server-64d80cf2ea37.herokuapp.com/";getGasStations(n,t,i){return this.http.get(`${this.apiUrl}`,{params:{lng:n,lat:t,rad:i}})}sendData(n){return this.http.post(`${this.apiUrl}/submit-endpoint`,n)}getGasStations_aws(n,t){return this.http.get(Ua.GETCLOSESTGASSTATION,{params:{lng:n,lat:t}})}getallGasStations(){return this.http.get(Ua.GETGASSTATIONS)}updateRatings(n,t){let i={Station_ID:n,rating:t};return this.http.post(Ua.UPDATERATINGS,i)}static \u0275fac=function(t){return new(t||e)(Re(t_))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})};var bq=gy(jA());var bh=class{constructor(n,t,i,r,o,d,g,v,x){this.Station_ID=n;this.Station_City=t;this.Station_Gas_Price=i;this.Station_Lattitude=r;this.Station_Longitude=o;this.Station_Name=d;this.Station_Diesel_Price=g;this.Station_Premium_Price=v;this.priceHighlight=x}};var ix=class e{constructor(n){this.http=n}GETGASSTATIONS=Ua.GETGASSTATIONS;UPDATEGASPRICE=Ua.UPDATEGASPRICE;GETADMINS=Ua.GETADMINS;getGasStations(){return this.http.get(this.GETGASSTATIONS)}getAdmins(){return this.http.get(this.GETADMINS).pipe(Vt(n=>JSON.parse(n)))}updateGasPrice(n){let t=new La({"Content-Type":"application/json"});return console.log(n,"in service"),this.http.post(this.UPDATEGASPRICE,JSON.stringify(n),{headers:t}).pipe(Kn(i=>console.log("Updated Gas Station Price")))}static \u0275fac=function(t){return new(t||e)(Re(t_))};static \u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})};var zu=e=>e.context.actorRef?.getSnapshot(),Vu=e=>zu(e)?.context;var QU="Logging",HA="x-amz-user-agent",ez="NoHubcallbackProvidedException";var Ds=function(e){return e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE",e}(Ds||{});var tz={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6},ui=(()=>{class e{constructor(t,i=Ds.WARN){this.name=t,this.level=i,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){let t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...i){let r=this.level;e.LOG_LEVEL&&(r=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);let o=tz[r];if(!(tz[t]>=o))return;let g=console.log.bind(console);t===Ds.ERROR&&console.error&&(g=console.error.bind(console)),t===Ds.WARN&&console.warn&&(g=console.warn.bind(console)),e.BIND_ALL_LOG_LEVELS&&(t===Ds.INFO&&console.info&&(g=console.info.bind(console)),t===Ds.DEBUG&&console.debug&&(g=console.debug.bind(console)));let v=`[${t}] ${this._ts()} ${this.name}`,x="";if(i.length===1&&typeof i[0]=="string")x=`${v} - ${i[0]}`,g(x);else if(i.length===1)x=`${v} ${i[0]}`,g(v,i[0]);else if(typeof i[0]=="string"){let D=i.slice(1);D.length===1&&(D=D[0]),x=`${v} - ${i[0]} ${D}`,g(`${v} - ${i[0]}`,D)}else x=`${v} ${i}`,g(v,i);for(let D of this._pluggables){let R={message:x,timestamp:Date.now()};D.pushLogs([R])}}log(...t){this._log(Ds.INFO,...t)}info(...t){this._log(Ds.INFO,...t)}warn(...t){this._log(Ds.WARN,...t)}error(...t){this._log(Ds.ERROR,...t)}debug(...t){this._log(Ds.DEBUG,...t)}verbose(...t){this._log(Ds.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===QU&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}return e.LOG_LEVEL=null,e.BIND_ALL_LOG_LEVELS=!1,e})();var $i=class e extends Error{constructor({message:n,name:t,recoverySuggestion:i,underlyingError:r}){super(n),this.name=t,this.underlyingError=r,this.recoverySuggestion=i,this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var Yo=function(e){return e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError",e}(Yo||{});var za=(e,n=$i)=>(t,i,r)=>{let{message:o,recoverySuggestion:d}=e[i];if(!t)throw new n({name:i,message:r?`${o} ${r}`:o,recoverySuggestion:d})};var Ur=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",P_=new ui("Hub"),rx=class{constructor(n){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=n}_remove(n,t){let i=this.listeners.get(n);if(!i){P_.warn(`No listeners for ${n}`);return}this.listeners.set(n,[...i.filter(({callback:r})=>r!==t)])}dispatch(n,t,i,r){typeof n=="string"&&this.protectedChannels.indexOf(n)>-1&&(r===Ur||P_.warn(`WARNING: ${n} is protected and dispatching on it can have unintended consequences`));let o={channel:n,payload:q({},t),source:i,patternInfo:[]};try{this._toListeners(o)}catch(d){P_.error(d)}}listen(n,t,i="noname"){let r;if(typeof t!="function")throw new $i({name:ez,message:"No callback supplied to Hub"});r=t;let o=this.listeners.get(n);return o||(o=[],this.listeners.set(n,o)),o.push({name:i,callback:r}),()=>{this._remove(n,r)}}_toListeners(n){let{channel:t,payload:i}=n,r=this.listeners.get(t);r&&r.forEach(o=>{P_.debug(`Dispatching to ${t} with `,i);try{o.callback(n)}catch(d){P_.error(d)}})}},Xi=new rx("__default__"),wh=new rx("internal-hub");var R_=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new $i({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},nz=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new $i({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},iz=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new $i({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})};var xh={convert(e,n){let t=e;return n?.urlSafe&&(t=t.replace(/-/g,"+").replace(/_/g,"/")),iz()(t)}};var wl=function(e){return e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException",e}(wl||{}),xie={[wl.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[wl.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[wl.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[wl.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[wl.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},ox=za(xie);function Tt(e){let n=!0;e?n=!!e.userPoolId&&!!e.userPoolClientId:n=!1,ox(n,wl.AuthUserPoolException)}function Sc(e){let n=!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType;ox(n,wl.OAuthNotConfigureException)}function Sh(e){let n=!!e?.identityPoolId;ox(n,wl.InvalidIdentityPoolIdException)}function _o(e){let n=e.split(".");if(n.length!==3)throw new Error("Invalid token");try{let i=n[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(xh.convert(i).split("").map(d=>`%${`00${d.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(r);return{toString:()=>e,payload:o}}catch{throw new Error("Invalid token payload")}}var $A=e=>{let n=Reflect.ownKeys(e);for(let t of n){let i=e[t];(i&&typeof i=="object"||typeof i=="function")&&$A(i)}return Object.freeze(e)};var Sie=new ui("parseAWSExports"),Cie={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},oz=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new $i({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:n,aws_appsync_authenticationType:t,aws_appsync_graphqlEndpoint:i,aws_appsync_region:r,aws_bots_config:o,aws_cognito_identity_pool_id:d,aws_cognito_sign_up_verification_method:g,aws_cognito_mfa_configuration:v,aws_cognito_mfa_types:x,aws_cognito_password_protection_settings:D,aws_cognito_verification_mechanisms:R,aws_cognito_signup_attributes:L,aws_cognito_social_providers:j,aws_cognito_username_attributes:J,aws_mandatory_sign_in:re,aws_mobile_analytics_app_id:be,aws_mobile_analytics_app_region:xe,aws_user_files_s3_bucket:Pe,aws_user_files_s3_bucket_region:Ne,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:Ve,aws_user_pools_id:We,aws_user_pools_web_client_id:rt,geo:gt,oauth:Gt,predictions:st,aws_cloud_logic_custom:Gn,Notifications:Et,modelIntrospection:en}=e,Qt={};be&&(Qt.Analytics={Pinpoint:{appId:be,region:xe}});let{InAppMessaging:Ei,Push:qi}=Et??{};if(Ei?.AWSPinpoint||qi?.AWSPinpoint){if(Ei?.AWSPinpoint){let{appId:un,region:Xn}=Ei.AWSPinpoint;Qt.Notifications={InAppMessaging:{Pinpoint:{appId:un,region:Xn}}}}if(qi?.AWSPinpoint){let{appId:un,region:Xn}=qi.AWSPinpoint;Qt.Notifications=Ie(q({},Qt.Notifications),{PushNotification:{Pinpoint:{appId:un,region:Xn}}})}}if(Array.isArray(o)&&(Qt.Interactions={LexV1:Object.fromEntries(o.map(un=>[un.name,un]))}),i){let un=Cie[t];un||Sie.debug(`Invalid authentication type ${t}. Falling back to IAM.`),Qt.API={GraphQL:{endpoint:i,apiKey:n,region:r,defaultAuthMode:un??"iam"}},en&&(Qt.API.GraphQL.modelIntrospection=en)}let Ls=v?{status:v&&v.toLowerCase(),totpEnabled:x?.includes("TOTP")??!1,smsEnabled:x?.includes("SMS")??!1}:void 0,mr=D?{minLength:D.passwordPolicyMinLength,requireLowercase:D.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:D.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:D.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:D.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,Jn=Array.from(new Set([...R??[],...L??[]])).reduce((un,Xn)=>Ie(q({},un),{[Xn.toLowerCase()]:{required:!0}}),{}),gr=J?.includes("EMAIL")??!1,Bi=J?.includes("PHONE_NUMBER")??!1;(d||We)&&(Qt.Auth={Cognito:{identityPoolId:d,allowGuestAccess:re!=="enable",signUpVerificationMethod:g,userAttributes:Jn,userPoolClientId:rt,userPoolId:We,mfa:Ls,passwordFormat:mr,loginWith:{username:!(gr||Bi),email:gr,phone:Bi}}});let ko=Gt?Object.keys(Gt).length>0:!1,io=j?j.length>0:!1;if(Qt.Auth&&ko&&(Qt.Auth.Cognito.loginWith=Ie(q({},Qt.Auth.Cognito.loginWith),{oauth:q(q({},Eie(Gt)),io&&{providers:Iie(j)})})),Pe&&(Qt.Storage={S3:{bucket:Pe,region:Ne,dangerouslyConnectToHttpEndpointForTesting:Ve}}),gt){let{amazon_location_service:un}=gt;Qt.Geo={LocationService:{maps:un.maps,geofenceCollections:un.geofenceCollections,searchIndices:un.search_indices,region:un.region}}}if(Gn&&(Qt.API=Ie(q({},Qt.API),{REST:Gn.reduce((un,Xn)=>{let{name:bo,endpoint:wa,region:Bs,service:Wa}=Xn;return Ie(q({},un),{[bo]:q(q({endpoint:wa},Wa?{service:Wa}:void 0),Bs?{region:Bs}:void 0)})},{})})),st){let{VoiceId:un}=st?.convert?.speechGenerator?.defaults??{};Qt.Predictions=un?Ie(q({},st),{convert:Ie(q({},st.convert),{speechGenerator:Ie(q({},st.convert.speechGenerator),{defaults:{voiceId:un}})})}):st}return Qt},rz=e=>e?.split(",")??[],Eie=({domain:e,scope:n,redirectSignIn:t,redirectSignOut:i,responseType:r})=>({domain:e,scopes:n,redirectSignIn:rz(t),redirectSignOut:rz(i),responseType:r}),Iie=e=>e.map(n=>{let t=n.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)});var O_=Symbol("oauth-listener");function az(e){let{version:n}=e;return n?n.startsWith("1"):!1}function Die(e){if(!e)return;let{bucket_name:n,aws_region:t,buckets:i}=e;return{S3:{bucket:n,region:t,buckets:i&&Lie(i)}}}function Tie(e){if(!e)return;let{user_pool_id:n,user_pool_client_id:t,identity_pool_id:i,password_policy:r,mfa_configuration:o,mfa_methods:d,unauthenticated_identities_enabled:g,oauth:v,username_attributes:x,standard_required_attributes:D,groups:R}=e,L={Cognito:{userPoolId:n,userPoolClientId:t,groups:R}};return i&&(L.Cognito=Ie(q({},L.Cognito),{identityPoolId:i})),r&&(L.Cognito.passwordFormat={requireLowercase:r.require_lowercase,requireNumbers:r.require_numbers,requireUppercase:r.require_uppercase,requireSpecialCharacters:r.require_symbols,minLength:r.min_length??6}),o&&(L.Cognito.mfa={status:Fie(o),smsEnabled:d?.includes("SMS"),totpEnabled:d?.includes("TOTP")}),g&&(L.Cognito.allowGuestAccess=g),v&&(L.Cognito.loginWith={oauth:{domain:v.domain,redirectSignIn:v.redirect_sign_in_uri,redirectSignOut:v.redirect_sign_out_uri,responseType:v.response_type==="token"?"token":"code",scopes:v.scopes,providers:Nie(v.identity_providers)}}),x&&(L.Cognito.loginWith=Ie(q({},L.Cognito.loginWith),{email:x.includes("email"),phone:x.includes("phone_number"),username:x.includes("username")})),D&&(L.Cognito.userAttributes=D.reduce((j,J)=>Ie(q({},j),{[J]:{required:!0}}),{})),L}function Aie(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:n}=e;return{Pinpoint:{appId:n.app_id,region:n.aws_region}}}function Mie(e){if(!e)return;let{aws_region:n,geofence_collections:t,maps:i,search_indices:r}=e;return{LocationService:{region:n,searchIndices:r,geofenceCollections:t,maps:i}}}function Pie(e){if(!e)return;let{aws_region:n,default_authorization_type:t,url:i,api_key:r,model_introspection:o}=e;return{GraphQL:{endpoint:i,defaultAuthMode:cz(t),region:n,apiKey:r,modelIntrospection:o}}}function Rie(e){if(!e?.events)return;let{url:n,aws_region:t,api_key:i,default_authorization_type:r}=e.events;return{Events:{endpoint:n,defaultAuthMode:cz(r),region:t,apiKey:i}}}function Oie(e){if(!e)return;let{aws_region:n,channels:t,amazon_pinpoint_app_id:i}=e,r=t.includes("IN_APP_MESSAGING"),o=t.includes("APNS")||t.includes("FCM");if(!(r||o))return;let d={};return r&&(d.InAppMessaging={Pinpoint:{appId:i,region:n}}),o&&(d.PushNotification={Pinpoint:{appId:i,region:n}}),d}function lz(e){let n={};if(e.storage&&(n.Storage=Die(e.storage)),e.auth&&(n.Auth=Tie(e.auth)),e.analytics&&(n.Analytics=Aie(e.analytics)),e.geo&&(n.Geo=Mie(e.geo)),e.data&&(n.API=Pie(e.data)),e.custom){let t=Rie(e.custom);t&&"Events"in t&&(n.API=q(q({},n.API),t))}return e.notifications&&(n.Notifications=Oie(e.notifications)),n}var kie={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function cz(e){return kie[e]}var sz={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function Nie(e=[]){return e.reduce((n,t)=>(sz[t]!==void 0&&n.push(sz[t]),n),[])}function Fie(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function Lie(e){let n={};return e.forEach(({name:t,bucket_name:i,aws_region:r,paths:o})=>{if(t in n)throw new Error(`Duplicate friendly name found: ${t}. Name must be unique.`);n[t]={bucketName:i,region:r,paths:o}}),n}var k_=e=>Object.keys(e).some(n=>n.startsWith("aws_"))?oz(e):az(e)?lz(e):e;function ax({expiresAt:e,clockDrift:n}){return Date.now()+n>e}var sx=class{configure(n,t){this.authConfig=n,this.authOptions=t}fetchAuthSession(){return ne(this,arguments,function*(n={}){let t,i,r=yield this.getTokens(n);return r?(i=r.accessToken?.payload?.sub,t=yield this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:r,authenticated:!0,forceRefresh:n.forceRefresh})):t=yield this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:n.forceRefresh}),{tokens:r,credentials:t?.credentials,identityId:t?.identityId,userSub:i}})}clearCredentials(){return ne(this,null,function*(){yield this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()})}getTokens(n){return ne(this,null,function*(){return(yield this.authOptions?.tokenProvider?.getTokens(n))??void 0})}};var Jo=64,uz=32,dz=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hz=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],pz=Math.pow(2,53)-1;var N_=function(){function e(){this.state=Int32Array.from(hz),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,i=n.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>pz)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=n[t++],i--,this.bufferLength===Jo&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(t.setUint8(this.bufferLength++,128),i%Jo>=Jo-8){for(var r=this.bufferLength;r<Jo;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(var r=this.bufferLength;r<Jo-8;r++)t.setUint8(r,0);t.setUint32(Jo-8,Math.floor(n/4294967296),!0),t.setUint32(Jo-4,n),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(uz),r=0;r<8;r++)o[r*4]=this.state[r]>>>24&255,o[r*4+1]=this.state[r]>>>16&255,o[r*4+2]=this.state[r]>>>8&255,o[r*4+3]=this.state[r]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var n=this,t=n.buffer,i=n.state,r=i[0],o=i[1],d=i[2],g=i[3],v=i[4],x=i[5],D=i[6],R=i[7],L=0;L<Jo;L++){if(L<16)this.temp[L]=(t[L*4]&255)<<24|(t[L*4+1]&255)<<16|(t[L*4+2]&255)<<8|t[L*4+3]&255;else{var j=this.temp[L-2],J=(j>>>17|j<<15)^(j>>>19|j<<13)^j>>>10;j=this.temp[L-15];var re=(j>>>7|j<<25)^(j>>>18|j<<14)^j>>>3;this.temp[L]=(J+this.temp[L-7]|0)+(re+this.temp[L-16]|0)}var be=(((v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&x^~v&D)|0)+(R+(dz[L]+this.temp[L]|0)|0)|0,xe=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&o^r&d^o&d)|0;R=D,D=x,x=v,v=g+be|0,g=d,d=o,o=r,r=be+xe|0}i[0]+=r,i[1]+=o,i[2]+=d,i[3]+=g,i[4]+=v,i[5]+=x,i[6]+=D,i[7]+=R},e}();var GA=e=>new TextEncoder().encode(e);var Bie=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:GA;function lx(e){return e instanceof Uint8Array?e:typeof e=="string"?Bie(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function qA(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Cc=function(){function e(n){this.secret=n,this.hash=new N_,this.reset()}return e.prototype.update=function(n){if(!(qA(n)||this.error))try{this.hash.update(lx(n))}catch(t){this.error=t}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return vb(this,void 0,void 0,function(){return qk(this,function(n){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new N_,this.secret){this.outer=new N_;var n=Uie(this.secret),t=new Uint8Array(Jo);t.set(n);for(var i=0;i<Jo;i++)n[i]^=54,t[i]^=92;this.hash.update(n),this.outer.update(t);for(var i=0;i<n.byteLength;i++)n[i]=0}},e}();function Uie(e){var n=lx(e);if(n.byteLength>Jo){var t=new N_;t.update(n),n=t.digest()}var i=new Uint8Array(Jo);return i.set(n),i}var zie={},Vie={};for(let e=0;e<256;e++){let n=e.toString(16).toLowerCase();n.length===1&&(n=`0${n}`),zie[e]=n,Vie[n]=e}var Pi=function(e){return e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202",e}(Pi||{}),Ts=function(e){return e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage",e}(Ts||{}),xl=function(e){return e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9",e}(xl||{});var Ct=function(e){return e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40",e}(Ct||{});var rm=function(e){return e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7",e}(rm||{}),cx=function(e){return e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3",e}(cx||{});var F_=function(e){return e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9",e}(F_||{});var WA="6.10.2";var ju=()=>typeof global<"u";var ca=()=>typeof window<"u",ux=()=>typeof document<"u",om=()=>typeof process<"u",Hu=(e,n)=>!!Object.keys(e).find(t=>t.startsWith(n));function fz(){let e=i=>i.startsWith("_react")||i.startsWith("__react"),n=i=>Object.keys(i).find(e),t=()=>Array.from(document.querySelectorAll("[id]"));return ux()&&t().some(n)}function mz(){return om()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("react"))}function gz(){return ca()&&Hu(window,"__VUE")}function yz(){return ju()&&Hu(global,"__VUE")}function _z(){return ca()&&Hu(window,"__SVELTE")}function vz(){return om()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}function bz(){return ca()&&window.next&&typeof window.next=="object"}function wz(){return ju()&&(Hu(global,"__next")||Hu(global,"__NEXT"))}function xz(){return ca()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Sz(){return ju()&&typeof global.__NUXT_PATHS__<"u"}function Cz(){let e=!!(ux()&&document.querySelector("[ng-version]")),n=!!(ca()&&typeof window.ng<"u");return e||n}function Ez(){return om()&&typeof process.env=="object"&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}function Iz(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function Dz(){return ju()&&typeof global.expo<"u"}function Tz(){return ca()}var jie=[{platform:Pi.Expo,detectionMethod:Dz},{platform:Pi.ReactNative,detectionMethod:Iz},{platform:Pi.NextJs,detectionMethod:bz},{platform:Pi.Nuxt,detectionMethod:xz},{platform:Pi.Angular,detectionMethod:Cz},{platform:Pi.React,detectionMethod:fz},{platform:Pi.VueJs,detectionMethod:gz},{platform:Pi.Svelte,detectionMethod:_z},{platform:Pi.WebUnknown,detectionMethod:Tz},{platform:Pi.NextJsSSR,detectionMethod:wz},{platform:Pi.NuxtSSR,detectionMethod:Sz},{platform:Pi.ReactSSR,detectionMethod:mz},{platform:Pi.VueJsSSR,detectionMethod:yz},{platform:Pi.AngularSSR,detectionMethod:Ez},{platform:Pi.SvelteSSR,detectionMethod:vz}];function Az(){return jie.find(e=>e.detectionMethod())?.platform||Pi.ServerSideUnknown}var L_,dx=[],hx=!1,Hie=10,$ie=10,Gie=1e3,px=()=>{if(!L_){if(L_=Az(),hx)for(;dx.length;)dx.pop()?.();else dx.forEach(e=>{e()});Mz(Pi.ServerSideUnknown,Hie),Mz(Pi.WebUnknown,$ie)}return L_},fx=e=>{hx||dx.push(e)};function qie(){L_=void 0}function Mz(e,n){L_===e&&!hx&&setTimeout(()=>{qie(),hx=!0,setTimeout(px,Gie)},n)}var $u={},Sl=e=>{$u[e.category]=e.apis.reduce((i,r)=>Ie(q({},i),{[r]:{refCount:i[r]?.refCount?i[r].refCount+1:1,additionalDetails:e.additionalDetails}}),$u[e.category]??{});let n=!1;return()=>{n||(n=!0,e.apis.forEach(i=>{let r=$u[e.category][i].refCount;r>1?$u[e.category][i].refCount=r-1:(delete $u[e.category][i],Object.keys($u[e.category]).length||delete $u[e.category])}))}},Pz=(e,n)=>$u[e]?.[n]?.additionalDetails;var Rz="aws-amplify",Oz=e=>e.replace(/\+.*/,""),ZA=class{constructor(){this.userAgent=`${Rz}/${Oz(WA)}`}get framework(){return px()}get isReactNative(){return this.framework===Pi.ReactNative||this.framework===Pi.Expo}observeFrameworkChanges(n){fx(n)}},Wie=new ZA,kz=({category:e,action:n}={})=>{let t=[[Rz,Oz(WA)]];if(e&&t.push([e,n]),t.push(["framework",px()]),e&&n){let i=Pz(e,n);i&&i.forEach(r=>{t.push(r)})}return t},Gu=e=>kz(e).map(([i,r])=>i&&r?`${i}/${r}`:i).join(" ");var Ec=()=>typeof window<"u"&&typeof window.document<"u";var mx=class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new sx}configure(n,t){let i=k_(n);this.resourcesConfig=i,t&&(this.libraryOptions=t),this.resourcesConfig=$A(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),Xi.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Ur),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[O_](n){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?n(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=n}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},Ht=new mx;var B_=(e,n)=>e.Auth.fetchAuthSession(n);var U_=e=>B_(Ht,e);function z_(){return Ht.Auth.clearCredentials()}var Ch=e=>{let{headers:n,statusCode:t}=e;return Ie(q({},Zie(e)?e.$metadata:{}),{httpStatusCode:t,requestId:n["x-amzn-requestid"]??n["x-amzn-request-id"]??n["x-amz-request-id"],extendedRequestId:n["x-amz-id-2"],cfId:n["x-amz-cf-id"]})},Zie=e=>typeof e?.$metadata=="object";var As=e=>ne(void 0,null,function*(){if(!e||e.statusCode<300)return;let n=yield Cl(e),i=(d=>{let[g]=d.toString().split(/[,:]+/);return g.includes("#")?g.split("#")[1]:g})(e.headers["x-amzn-errortype"]??n.code??n.__type??"UnknownError"),r=n.message??n.Message??"Unknown error",o=new Error(r);return Object.assign(o,{name:i,$metadata:Ch(e)})}),Cl=e=>ne(void 0,null,function*(){if(!e.body)throw new Error("Missing response payload");let n=yield e.body.json();return Object.assign(n,{$metadata:Ch(e)})});var Nn=(e,n,t,i)=>(r,o)=>ne(void 0,null,function*(){let d=q(q({},i),r),g=yield d.endpointResolver(d,o),v=yield n(o,g),x=yield e(v,q({},d));return t(x)});var KA={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Nz={partitions:[KA,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]};var V_=e=>{let{partitions:n}=Nz;for(let{regions:t,outputs:i,regionRegex:r}of n){let o=new RegExp(r);if(t.includes(e)||o.test(e))return i.dnsSuffix}return KA.outputs.dnsSuffix};var Lz=({maxAttempts:e=3,retryDecider:n,computeDelay:t,abortSignal:i})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(r,o)=>function(g){return ne(this,null,function*(){let v,x=o.attemptsCount??0,D,R=()=>{if(D)return Fz(D,x),D;throw Fz(v,x),v};for(;!i?.aborted&&x<e;){try{D=yield r(g),v=void 0}catch(J){v=J,D=void 0}x=(o.attemptsCount??0)>x?o.attemptsCount??0:x+1,o.attemptsCount=x;let{isCredentialsExpiredError:L,retryable:j}=yield n(D,v,o);if(j){if(o.isCredentialsExpired=!!L,!i?.aborted&&x<e){let J=t(x);yield Kie(J,i)}continue}else return R()}if(i?.aborted)throw new Error("Request aborted.");return R()})}},Kie=(e,n)=>{if(n?.aborted)return Promise.resolve();let t,i,r=new Promise(o=>{i=o,t=setTimeout(o,e)});return n?.addEventListener("abort",function o(d){clearTimeout(t),n?.removeEventListener("abort",o),i()}),r},Fz=(e,n)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata=Ie(q({},e.$metadata??{}),{attempts:n}))};var Bz=({userAgentHeader:e="x-amz-user-agent",userAgentValue:n=""})=>t=>function(r){return ne(this,null,function*(){if(n.trim().length===0)return yield t(r);{let o=e.toLowerCase();return r.headers[o]=r.headers[o]?`${r.headers[o]} ${n}`:n,yield t(r)}})};var Eh=(e,n)=>(t,i)=>{let r={},o=d=>e(d,i);for(let d=n.length-1;d>=0;d--){let g=n[d];o=g(i)(o,r)}return o(t)};var gx=e=>{let n;return()=>(n||(n=e()),n)};var Yie=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Uz=(g,v)=>ne(void 0,[g,v],function*({url:e,method:n,headers:t,body:i},{abortSignal:r,cache:o,withCrossDomainCredentials:d}){let x;try{x=yield fetch(e,{method:n,headers:t,body:Yie(n)?i:void 0,signal:r,cache:o,credentials:d?"include":"same-origin"})}catch(j){throw j instanceof TypeError?new $i({name:Yo.NetworkError,message:"A network error has occurred.",underlyingError:j}):j}let D={};x.headers?.forEach((j,J)=>{D[J.toLowerCase()]=j});let R={statusCode:x.status,headers:D,body:null},L=Object.assign(x.body??{},{text:gx(()=>x.text()),blob:gx(()=>x.blob()),json:gx(()=>x.json())});return Ie(q({},R),{body:L})});var j_=Eh(Uz,[Bz,Lz]);function zz(e=3e5){return i=>{let r=2**i*100+100*Math.random();return r>e?!1:r}}var Vz=5*60*1e3,H_=e=>{let t=zz(Vz)(e);return t===!1?Vz:t};var Jie=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],jz=e=>!!e&&Jie.includes(e);var $_=e=>(n,t)=>ne(void 0,null,function*(){let i=t??(yield e(n))??void 0,r=i?.code||i?.name,o=n?.statusCode;return{retryable:tre(t)||ere(o,r)||jz(r)||nre(o,r)}}),Xie=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Qie=["TimeoutError","RequestTimeout","RequestTimeoutException"],ere=(e,n)=>e===429||!!n&&Xie.includes(n),tre=e=>[Yo.NetworkError,"ERR_NETWORK"].includes(e?.name),nre=(e,n)=>!!e&&[500,502,503,504].includes(e)||!!n&&Qie.includes(n);var Ms=URL;var ire="cognito-identity",rre=({region:e})=>({url:new Ms(`https://cognito-identity.${e}.${V_(e)}`)}),ore=()=>e=>function(t){return ne(this,null,function*(){return t.headers["cache-control"]="no-store",e(t)})},yx=Eh(j_,[ore]),G_={service:ire,endpointResolver:rre,retryDecider:$_(As),computeDelay:H_,userAgentValue:Gu(),cache:"no-store"};fx(()=>{G_.userAgentValue=Gu()});var _x=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),vx=({url:e},n,t)=>({headers:n,url:e,body:t,method:"POST"});var sre=(e,n)=>{let t=_x("GetId"),i=JSON.stringify(e);return vx(n,t,i)},are=e=>ne(void 0,null,function*(){if(e.statusCode>=300)throw yield As(e);return{IdentityId:(yield Cl(e)).IdentityId,$metadata:Ch(e)}}),YA=Nn(yx,sre,are,G_);var lre=(e,n)=>{let t=_x("GetCredentialsForIdentity"),i=JSON.stringify(e);return vx(n,t,i)},cre=e=>ne(void 0,null,function*(){if(e.statusCode>=300)throw yield As(e);{let n=yield Cl(e);return{IdentityId:n.IdentityId,Credentials:ure(n.Credentials),$metadata:Ch(e)}}}),ure=({AccessKeyId:e,SecretKey:n,SessionToken:t,Expiration:i}={})=>({AccessKeyId:e,SecretKey:n,SessionToken:t,Expiration:i&&new Date(i*1e3)}),bx=Nn(yx,lre,cre,G_);var Ih=class extends $i{constructor(){super({name:Yo.PlatformNotSupported,message:"Function not supported on current platform"})}};var El=class{constructor(n){this.storage=n}setItem(n,t){return ne(this,null,function*(){if(!this.storage)throw new Ih;this.storage.setItem(n,t)})}getItem(n){return ne(this,null,function*(){if(!this.storage)throw new Ih;return this.storage.getItem(n)})}removeItem(n){return ne(this,null,function*(){if(!this.storage)throw new Ih;this.storage.removeItem(n)})}clear(){return ne(this,null,function*(){if(!this.storage)throw new Ih;this.storage.clear()})}};var Dh=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(n){return n>this.length-1?null:Array.from(this.storage.keys())[n]}setItem(n,t){this.storage.set(n,t)}getItem(n){return this.storage.get(n)??null}removeItem(n){this.storage.delete(n)}clear(){this.storage.clear()}};var Hz=new ui("CoreStorageUtils"),wx=()=>{try{if(typeof window<"u"&&window.localStorage)return window.localStorage}catch{Hz.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new Dh},$z=()=>{try{if(typeof window<"u"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch{return Hz.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new Dh}};var xx=class extends El{constructor(){super(wx())}};var Sx=class extends El{constructor(){super($z())}};function Cx(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)e[i]=t[i]}return e}var dre={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function JA(e,n){function t(r,o,d){if(!(typeof document>"u")){d=Cx({},n,d),typeof d.expires=="number"&&(d.expires=new Date(Date.now()+d.expires*864e5)),d.expires&&(d.expires=d.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var g="";for(var v in d)d[v]&&(g+="; "+v,d[v]!==!0&&(g+="="+d[v].split(";")[0]));return document.cookie=r+"="+e.write(o,r)+g}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var o=document.cookie?document.cookie.split("; "):[],d={},g=0;g<o.length;g++){var v=o[g].split("="),x=v.slice(1).join("=");try{var D=decodeURIComponent(v[0]);if(d[D]=e.read(x,D),r===D)break}catch{}}return r?d[r]:d}}return Object.create({set:t,get:i,remove:function(r,o){t(r,"",Cx({},o,{expires:-1}))},withAttributes:function(r){return JA(this.converter,Cx({},this.attributes,r))},withConverter:function(r){return JA(Cx({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}var q_=JA(dre,{path:"/"});var Th=class{constructor(n={}){let{path:t,domain:i,expires:r,sameSite:o,secure:d}=n;if(this.domain=i,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(n,"expires")?r:365,this.secure=Object.prototype.hasOwnProperty.call(n,"secure")?d:!0,Object.prototype.hasOwnProperty.call(n,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(o==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}setItem(n,t){return ne(this,null,function*(){q_.set(n,t,this.getData())})}getItem(n){return ne(this,null,function*(){return q_.get(n)??null})}removeItem(n){return ne(this,null,function*(){q_.remove(n,this.getData())})}clear(){return ne(this,null,function*(){let n=q_.get(),t=Object.keys(n).map(i=>this.removeItem(i));yield Promise.all(t)})}getData(){return q({path:this.path,expires:this.expires,domain:this.domain,secure:this.secure},this.sameSite&&{sameSite:this.sameSite})}};var Ps=new xx,Gz=new Sx,qz=new El(new Dh);var qu={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8},Ic="CurSize";function XA(e){let n=0;n=e.length;for(let t=e.length;t>=0;t-=1){let i=e.charCodeAt(t);i>127&&i<=2047?n+=1:i>2047&&i<=65535&&(n+=2),i>=56320&&i<=57343&&(t-=1)}return n}function Wu(){return new Date().getTime()}var Ah=e=>`${e}${Ic}`;var Mh=function(e){return e.NoCacheItem="NoCacheItem",e.NullNextNode="NullNextNode",e.NullPreviousNode="NullPreviousNode",e}(Mh||{}),hre={[Mh.NoCacheItem]:{message:"Item not found in the cache storage."},[Mh.NullNextNode]:{message:"Next node is null."},[Mh.NullPreviousNode]:{message:"Previous node is null."}},QA=za(hre);var Qi=new ui("StorageCache"),Ex=class{constructor({config:n,keyValueStorage:t}){this.config=q(q({},qu),n),this.keyValueStorage=t,this.sanitizeConfig()}getModuleName(){return"Cache"}configure(n){return n&&(n.keyPrefix&&Qi.warn("keyPrefix can not be re-configured on an existing Cache instance."),this.config=q(q({},this.config),n)),this.sanitizeConfig(),this.config}getCurrentCacheSize(){return ne(this,null,function*(){let n=yield this.getStorage().getItem(Ah(this.config.keyPrefix));return n||(yield this.getStorage().setItem(Ah(this.config.keyPrefix),"0"),n="0"),Number(n)})}setItem(n,t,i){return ne(this,null,function*(){if(Qi.debug(`Set item: key is ${n}, value is ${t} with options: ${i}`),!n||n===Ic){Qi.warn(`Invalid key: should not be empty or reserved key: '${Ic}'`);return}if(typeof t>"u"){Qi.warn("The value of item should not be undefined!");return}let r={priority:i?.priority!==void 0?i.priority:this.config.defaultPriority,expires:i?.expires!==void 0?i.expires:this.config.defaultTTL+Wu()};if(r.priority<1||r.priority>5){Qi.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}let o=`${this.config.keyPrefix}${n}`,d=this.fillCacheItem(o,t,r);if(d.byteSize>this.config.itemMaxSize){Qi.warn(`Item with key: ${n} you are trying to put into is too big!`);return}try{let g=yield this.getStorage().getItem(o);if(g&&(yield this.removeCacheItem(o,JSON.parse(g).byteSize)),yield this.isCacheFull(d.byteSize)){let v=yield this.clearInvalidAndGetRemainingKeys();if(yield this.isCacheFull(d.byteSize)){let x=yield this.sizeToPop(d.byteSize);yield this.popOutItems(v,x)}}return this.setCacheItem(o,d)}catch(g){Qi.warn(`setItem failed! ${g}`)}})}getItem(n,t){return ne(this,null,function*(){Qi.debug(`Get item: key is ${n} with options ${t}`);let i;if(!n||n===Ic)return Qi.warn(`Invalid key: should not be empty or reserved key: '${Ic}'`),null;let r=`${this.config.keyPrefix}${n}`;try{if(i=yield this.getStorage().getItem(r),i!=null)if(yield this.isExpired(r))yield this.removeCacheItem(r,JSON.parse(i).byteSize);else return(yield this.updateVisitedTime(JSON.parse(i),r)).data;if(t?.callback){let o=t.callback();return o!==null&&(yield this.setItem(n,o,t)),o}return null}catch(o){return Qi.warn(`getItem failed! ${o}`),null}})}removeItem(n){return ne(this,null,function*(){if(Qi.debug(`Remove item: key is ${n}`),!n||n===Ic){Qi.warn(`Invalid key: should not be empty or reserved key: '${Ic}'`);return}let t=`${this.config.keyPrefix}${n}`;try{let i=yield this.getStorage().getItem(t);i&&(yield this.removeCacheItem(t,JSON.parse(i).byteSize))}catch(i){Qi.warn(`removeItem failed! ${i}`)}})}getAllKeys(){return ne(this,null,function*(){try{return yield this.getAllCacheKeys()}catch(n){return Qi.warn(`getAllkeys failed! ${n}`),[]}})}getStorage(){return this.keyValueStorage}isExpired(n){return ne(this,null,function*(){let t=yield this.getStorage().getItem(n);QA(t!==null,Mh.NoCacheItem,`Key: ${n}`);let i=JSON.parse(t);return Wu()>=i.expires})}removeCacheItem(n,t){return ne(this,null,function*(){let i=yield this.getStorage().getItem(n);QA(i!==null,Mh.NoCacheItem,`Key: ${n}`);let r=t??JSON.parse(i).byteSize;yield this.decreaseCurrentSizeInBytes(r);try{yield this.getStorage().removeItem(n)}catch(o){yield this.increaseCurrentSizeInBytes(r),Qi.error(`Failed to remove item: ${o}`)}})}fillCacheItem(n,t,i){let r={key:n,data:t,timestamp:Wu(),visitedTime:Wu(),priority:i.priority??0,expires:i.expires??0,type:typeof t,byteSize:0};return r.byteSize=XA(JSON.stringify(r)),r.byteSize=XA(JSON.stringify(r)),r}sanitizeConfig(){this.config.itemMaxSize>this.config.capacityInBytes&&(Qi.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=qu.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(Qi.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=qu.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(Qi.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=qu.warningThreshold);let n=5*1024*1024;this.config.capacityInBytes>n&&(Qi.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=qu.capacityInBytes)}increaseCurrentSizeInBytes(n){return ne(this,null,function*(){let t=yield this.getCurrentCacheSize();yield this.getStorage().setItem(Ah(this.config.keyPrefix),(t+n).toString())})}decreaseCurrentSizeInBytes(n){return ne(this,null,function*(){let t=yield this.getCurrentCacheSize();yield this.getStorage().setItem(Ah(this.config.keyPrefix),(t-n).toString())})}updateVisitedTime(n,t){return ne(this,null,function*(){return n.visitedTime=Wu(),yield this.getStorage().setItem(t,JSON.stringify(n)),n})}setCacheItem(n,t){return ne(this,null,function*(){yield this.increaseCurrentSizeInBytes(t.byteSize);try{yield this.getStorage().setItem(n,JSON.stringify(t))}catch(i){yield this.decreaseCurrentSizeInBytes(t.byteSize),Qi.error(`Failed to set item ${i}`)}})}sizeToPop(n){return ne(this,null,function*(){let i=(yield this.getCurrentCacheSize())+n-this.config.capacityInBytes,r=(1-this.config.warningThreshold)*this.config.capacityInBytes;return i>r?i:r})}isCacheFull(n){return ne(this,null,function*(){let t=yield this.getCurrentCacheSize();return n+t>this.config.capacityInBytes})}popOutItems(n,t){return ne(this,null,function*(){let i=[],r=t;for(let o of n){let d=yield this.getStorage().getItem(o);if(d!=null){let g=JSON.parse(d);i.push(g)}}i.sort((o,d)=>o.priority>d.priority?-1:o.priority<d.priority?1:o.visitedTime<d.visitedTime?-1:1);for(let o of i)if(yield this.removeCacheItem(o.key,o.byteSize),r-=o.byteSize,r<=0)return})}clearInvalidAndGetRemainingKeys(){return ne(this,null,function*(){let n=[],t=yield this.getAllCacheKeys({omitSizeKey:!0});for(let i of t)(yield this.isExpired(i))?yield this.removeCacheItem(i):n.push(i);return n})}clear(){return ne(this,null,function*(){Qi.debug("Clear Cache");try{let n=yield this.getAllKeys();for(let t of n){let i=`${this.config.keyPrefix}${t}`;yield this.getStorage().removeItem(i)}}catch(n){Qi.warn(`clear failed! ${n}`)}})}};var pre=new ui("StorageCache"),Ix=class e extends Ex{constructor(n){let t=wx();super({config:n,keyValueStorage:new El(t)}),this.storage=t,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this)}getAllCacheKeys(n){return ne(this,null,function*(){let{omitSizeKey:t}=n??{},i=[];for(let r=0;r<this.storage.length;r++){let o=this.storage.key(r);t&&o===Ah(this.config.keyPrefix)||o?.startsWith(this.config.keyPrefix)&&i.push(o.substring(this.config.keyPrefix.length))}return i})}createInstance(n){return(!n.keyPrefix||n.keyPrefix===qu.keyPrefix)&&(pre.error("invalid keyPrefix, setting keyPrefix with timeStamp"),n.keyPrefix=Wu.toString()),new e(n)}};var Wz=new Ix;var fre=new ui("I18n"),Zz=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),fre.debug(this._lang)}setLanguage(n){this._lang=n}get(n,t=void 0){if(this.setDefaultLanguage(),!this._lang)return typeof t<"u"?t:n;let i=this._lang,r=this.getByLanguage(n,i);return r||(i.indexOf("-")>0&&(r=this.getByLanguage(n,i.split("-")[0])),r)?r:typeof t<"u"?t:n}getByLanguage(n,t,i=null){if(!t)return i;let r=this._dict[t];return r?r[n]:i}putVocabulariesForLanguage(n,t){let i=this._dict[n];i||(i=this._dict[n]={}),this._dict[n]=q(q({},i),t)}putVocabularies(n){Object.keys(n).forEach(t=>{this.putVocabulariesForLanguage(t,n[t])})}};var Ph=function(e){return e.NotConfigured="NotConfigured",e}(Ph||{}),mre={[Ph.NotConfigured]:{message:"i18n is not configured."}},W_=za(mre);var Kz=new ui("I18n"),Dx={language:null},Va=null,Rh=class e{static configure(n){return Kz.debug("configure I18n"),n&&(Dx=Object.assign({},Dx,n.I18n||n),e.createInstance()),Dx}static getModuleName(){return"I18n"}static createInstance(){Kz.debug("create I18n instance"),!Va&&(Va=new Zz)}static setLanguage(n){e.checkConfig(),W_(!!Va,Ph.NotConfigured),Va.setLanguage(n)}static get(n,t){return e.checkConfig()?(W_(!!Va,Ph.NotConfigured),Va.get(n,t)):typeof t>"u"?n:t}static putVocabulariesForLanguage(n,t){e.checkConfig(),W_(!!Va,Ph.NotConfigured),Va.putVocabulariesForLanguage(n,t)}static putVocabularies(n){e.checkConfig(),W_(!!Va,Ph.NotConfigured),Va.putVocabularies(n)}static checkConfig(){return Va||e.createInstance(),!0}};Rh.createInstance();var eM=e=>{let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="";for(let i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t};function tM(e){return(e.match(/.{2}/g)||[]).map(t=>String.fromCharCode(parseInt(t,16))).join("")}function nM(e){return e.split("").map(n=>n.charCodeAt(0).toString(16).padStart(2,"0")).join("")}var iM=e=>{let n;return(...t)=>ne(void 0,null,function*(){return n||(n=new Promise((i,r)=>{e(...t).then(o=>{i(o)}).catch(o=>{r(o)}).finally(()=>{n=void 0})}),n)})};var rM=()=>ne(void 0,null,function*(){let{userAgentData:e}=navigator;if(!e)return navigator.userAgent;let{platform:n="",platformVersion:t="",model:i="",architecture:r="",fullVersionList:o=[]}=yield e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),d=o.map(v=>`${v.brand}/${v.version}`).join(";");return[n,t,r,i,n,d].filter(v=>v).join(" ")});function Yz(e){return Array.from(e,n=>String.fromCodePoint(n)).join("")}var ua={convert(e,n={urlSafe:!1,skipPadding:!1}){let t=typeof e=="string"?e:Yz(e),i=nz()(t);return n.urlSafe&&(i=i.replace(/\+/g,"-").replace(/\//g,"_")),n.skipPadding&&(i=i.replace(/=/g,"")),i}};function Jz(){return R_().getRandomValues(new Uint32Array(1))[0]}function gre(e){let{words:n}=e,{sigBytes:t}=e,i=[];for(let r=0;r<t;r++){let o=n[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((o&15).toString(16))}return i.join("")}var Z_=class e{constructor(n,t){this.words=[];let i=n;i=this.words=i||[],t!==void 0?this.sigBytes=t:this.sigBytes=i.length*4}random(n){let t=[];for(let i=0;i<n;i+=4)t.push(Jz());return new e(t,n)}toString(){return gre(this)}};var Xz={category:Ts.AI,apis:[xl.CreateConversation,xl.DeleteConversation,xl.ListConversations,xl.UpdateConversation,xl.OnMessage,xl.SendMessage,xl.Generation]},Qz={apis:[Ct.DeleteUser,Ct.UpdatePassword],category:Ts.Auth},e3={apis:[Ct.SignUp,Ct.ConfirmSignUp,Ct.ResendSignUpCode,Ct.SignIn,Ct.ConfirmSignIn,Ct.FetchUserAttributes,Ct.SignOut,Ct.ResetPassword,Ct.ConfirmResetPassword,Ct.SignInWithRedirect],category:Ts.Auth},t3={apis:[F_.UploadData],category:Ts.Storage},n3={apis:[cx.NotifyMessageInteraction],category:Ts.InAppMessaging},i3={category:Ts.Geo,apis:[rm.SearchByText,rm.SearchForSuggestions,rm.SearchByPlaceId]},r3={category:Ts.Geo,apis:[]},o3={apis:[F_.UploadData],category:Ts.Storage};function Oh(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function K_(e){return typeof e=="string"||typeof e=="object"&&Object.prototype.toString.call(e)==="[object String]"}function yre(e){return Oh(e)&&Object.prototype.toString.call(e)==="[object Map]"}function _re(e){return Oh(e)&&Object.prototype.toString.call(e)==="[object Set]"}function oM(e){if(e==null)return!0;if(Oh(e)&&(yre(e)||_re(e)))return!e.size;if(Oh(e)&&(K_(e)||Array.isArray(e)))return!e.length;for(let n in e)if(sM(e,n))return!1;return!0}function s3(e){return Oh(e)&&oM(e)}function sM(e,n){return e!=null&&Object.prototype.hasOwnProperty.call(e,n)}function aM(e){return typeof e=="function"}function a3(...e){}var Tx=({payload:e},n,t)=>{let{event:i}=e,{send:r}=n,{onSignIn:o,onSignOut:d}=t??{};switch(i){case"signedIn":{aM(o)&&o(e);break}case"signInWithRedirect":{r("SIGN_IN_WITH_REDIRECT");break}case"signedOut":case"tokenRefresh_failure":{i==="signedOut"&&aM(d)&&d(),r("SIGN_OUT");break}}},lM=(e,n=Tx)=>{let t=i=>n(i,e);return Xi.listen("auth",t,"authenticator-hub-handler")};var sm=["+1","+7","+20","+27","+30","+31","+32","+33","+34","+36","+39","+40","+41","+43","+44","+45","+46","+47","+48","+49","+51","+52","+53","+54","+55","+56","+57","+58","+60","+61","+62","+63","+64","+65","+66","+81","+82","+84","+86","+90","+91","+92","+93","+94","+95","+98","+212","+213","+216","+218","+220","+221","+222","+223","+224","+225","+226","+227","+228","+229","+230","+231","+232","+233","+234","+235","+236","+237","+238","+239","+240","+241","+242","+243","+244","+245","+246","+248","+249","+250","+251","+252","+253","+254","+255","+256","+257","+258","+260","+261","+262","+263","+264","+265","+266","+267","+268","+269","+290","+291","+297","+298","+299","+345","+350","+351","+352","+353","+354","+355","+356","+357","+358","+359","+370","+371","+372","+373","+374","+375","+376","+377","+378","+379","+380","+381","+382","+385","+386","+387","+389","+420","+421","+423","+500","+501","+502","+503","+504","+505","+506","+507","+508","+509","+537","+590","+591","+593","+594","+595","+596","+597","+598","+599","+670","+672","+673","+674","+675","+676","+677","+678","+679","+680","+681","+682","+683","+685","+686","+687","+688","+689","+690","+691","+692","+850","+852","+853","+855","+856","+872","+880","+886","+960","+961","+962","+963","+964","+965","+966","+967","+968","+970","+971","+972","+973","+974","+975","+976","+977","+992","+993","+994","+995","+996","+998"];var Zu={birthdate:{label:"Birthdate",placeholder:"Enter your Birthdate",type:"date",autocomplete:"bday",isRequired:!0},confirmation_code:{label:"Confirmation Code",placeholder:"Enter your Confirmation Code",type:"text",autocomplete:"one-time-code",isRequired:!0},confirm_password:{label:"Confirm Password",placeholder:"Please confirm your Password",type:"password",autocomplete:"new-password",isRequired:!0},email:{label:"Email",placeholder:"Enter your Email",type:"email",autocomplete:"username",isRequired:!0},family_name:{label:"Family Name",placeholder:"Enter your Family Name",type:"text",autocomplete:"family-name",isRequired:!0},given_name:{label:"Given Name",placeholder:"Enter your Given Name",type:"text",autocomplete:"given-name",isRequired:!0},middle_name:{label:"Middle Name",placeholder:"Enter your Middle Name",type:"text",autocomplete:"additional-name",isRequired:!0},name:{label:"Name",placeholder:"Enter your Name",type:"text",autocomplete:"name",isRequired:!0},nickname:{label:"Nickname",placeholder:"Enter your Nickname",type:"text",autocomplete:"tel",isRequired:!0},password:{label:"Password",placeholder:"Enter your Password",type:"password",autocomplete:"new-password",isRequired:!0},phone_number:{label:"Phone Number",placeholder:"Enter your Phone Number",type:"tel",autocomplete:"tel",dialCode:"+1",dialCodeList:sm,isRequired:!0},preferred_username:{label:"Preferred Username",placeholder:"Enter your Preferred Username",type:"text",isRequired:!0},profile:{label:"Profile",placeholder:"Add your Profile",type:"url",autocomplete:"url",isRequired:!0},website:{label:"Website",placeholder:"Add your Website",type:"url",autocomplete:"url",isRequired:!0},username:{label:"Username",placeholder:"Enter your Username",type:"text",autocomplete:"username",isRequired:!0}},cM=["^","$","*",".","[","]","{","}","(",")","?",'"',"!","@","#","%","&","/","\\",",",">","<","'",":",";","|","_","~","`","=","+","-"," "];var l3=(e,n)=>{if(n?.matches("federatedSignIn")){if(e.matches("signUpActor"))return"signUp";if(e.matches("signInActor"))return"signIn"}switch(!0){case e.matches("idle"):return"idle";case e.matches("setup"):return"setup";case e.matches("signOut"):return"signOut";case e.matches("authenticated"):return"authenticated";case n?.matches("confirmSignUp"):case n?.matches("resendSignUpCode"):return"confirmSignUp";case n?.matches("confirmSignIn"):return"confirmSignIn";case n?.matches("setupTotp.edit"):case n?.matches("setupTotp.submit"):return"setupTotp";case n?.matches("signIn"):return"signIn";case n?.matches("signUp"):case n?.matches("autoSignIn"):return"signUp";case n?.matches("forceChangePassword"):return"forceNewPassword";case n?.matches("forgotPassword"):return"forgotPassword";case n?.matches("confirmResetPassword"):return"confirmResetPassword";case n?.matches("selectUserAttributes"):return"verifyUser";case n?.matches("confirmVerifyUserAttribute"):return"confirmVerifyUser";case e.matches("getCurrentUser"):case n?.matches("fetchUserAttributes"):return"transition";default:return null}};var c3=e=>{let n=t=>i=>e({type:t,data:i});return{initializeMachine:n("INIT"),resendCode:n("RESEND"),signOut:n("SIGN_OUT"),submitForm:n("SUBMIT"),updateForm:n("CHANGE"),updateBlur:n("BLUR"),toFederatedSignIn:n("FEDERATED_SIGN_IN"),toForgotPassword:n("FORGOT_PASSWORD"),toSignIn:n("SIGN_IN"),toSignUp:n("SIGN_UP"),skipVerification:n("SKIP")}};var u3=e=>{let n=Vu(e)??{},{challengeName:t,codeDeliveryDetails:i,remoteError:r,validationError:o,totpSecretCode:d=null,unverifiedUserAttributes:g,username:v}=n,{socialProviders:x=[]}=e.context?.config??{},D=n?.user??e.context?.user,R=!!(o&&Object.keys(o).length>0),L=zu(e),j=e.hasTag("pending")||L?.hasTag("pending"),J=l3(e,L);return{authStatus:(xe=>{switch(xe){case"idle":case"setup":return"configuring";case"authenticated":return"authenticated";default:return"unauthenticated"}})(J),challengeName:t,codeDeliveryDetails:i,error:r,hasValidationErrors:R,isPending:j,route:J,socialProviders:x,totpSecretCode:d,unverifiedUserAttributes:g,user:D,username:v,validationErrors:o}};var uM=({send:e,state:n})=>{let t=c3(e),i=u3(n);return q(q({},t),i)};var Ax=function(e){return e.Apple="Apple",e.Amazon="Amazon",e.Facebook="Facebook",e.Google="Google",e}(Ax||{});var vre=["birthdate","email","family_name","given_name","middle_name","name","nickname","phone_number","preferred_username","profile","website"];var bre=["username","email","phone_number"],dM=[...bre,...vre,"confirmation_code","password","confirm_password"],d3=e=>dM.includes(e);var da=e=>{let n=new FormData(e.target);return Object.fromEntries(n)};var Mx=e=>dM.includes(e),wre=e=>Array.isArray(e),hM=e=>e?wre(e)?e:[e]:null;var h3=e=>{let n=e.trim().split("");for(let t=0;t<n.length;t++)t>0&&t<n.length-1&&(n[t]="*");return n.join("")},p3=e=>{if(e.length<4)return e;let n=e.split("");for(let t=0;t<n.length-4;t++)n[t]="*";return n.join("")},f3=e=>{let n=e.split("@");return`${h3(n[0])}@${n[1]}`},pM=(e,n)=>e==="Phone Number"?p3(n):f3(n),fM=e=>cM.some(n=>e.includes(n)),mM=(e,n,t)=>encodeURI(`otpauth://totp/${e}:${n}?secret=${t}&issuer=${e}`);function gM(e,...n){return Object.entries(e).reduce((t,[i,r])=>Ie(q({},t),{[i]:n.includes(i)?r:r?.trim()}),{})}var m3={"Account recovery requires verified contact information":"Zur\xFCcksetzen des Accounts ben\xF6tigt einen verifizierten Account","Add your Profile":"Ihr Profil hinzuf\xFCgen","Add your Website":"Ihre Website hinzuf\xFCgen","Back to Sign In":"Zur\xFCck zur Anmeldung","Change Password":"Passwort \xE4ndern",Changing:"\xC4ndern von",Code:"Code","Confirm Password":"Passwort best\xE4tigen","Please confirm your Password":"Bitte best\xE4tigen Sie Ihr Passwort","Confirm Sign Up":"Registrierung best\xE4tigen","Confirm SMS Code":"SMS-Code best\xE4tigen","Confirm TOTP Code":"TOTP-Code best\xE4tigen",Confirm:"Best\xE4tigen","Confirmation Code":"Best\xE4tigungs-Code",Confirming:"Wird best\xE4tigt","Create a new account":"Einen neuen Account erstellen","Create Account":"Account erstellen","Creating Account":"Account wird erstellt","Dismiss alert":"Warnung verwerfen",Email:"E-Mail","Enter your Birthdate":"Geben Sie Ihr Geburtsdatum ein","Enter your code":"Geben Sie Ihren Code ein","Enter your Confirmation Code":"Geben Sie Ihren Best\xE4tigungs-Code ein","Enter your Email":"Geben Sie Ihre E-Mail ein","Enter your Family Name":"Geben Sie Ihren Nachnamen ein","Enter your Given Name":"Geben Sie Ihren Vornamen ein","Enter your Middle Name":"Geben Sie Ihren zweiten Vornamen ein","Enter your Name":"Geben Sie Ihren Namen ein","Enter your Nickname":"Geben Sie Ihren Spitznamen ein","Enter your Password":"Geben Sie Ihr Passwort ein","Enter your password":"Geben Sie Ihr Passwort ein","Enter your email":"Geben Sie Ihre E-Mail ein","Enter your phone number":"Geben Sie Ihre Telefonnummer ein","Enter your Preferred Username":"Geben Sie Ihren bevorzugten Benutzernamen ein","Enter your username":"Geben Sie Ihren Benutzernamen ein","Forgot password?":"Passwort vergessen?","Forgot your password?":"Passwort vergessen? ","Hide password":"Passwort verbergen","It may take a minute to arrive":"Es kann eine Minute dauern, bis er ankommt",Loading:"Wird geladen","New password":"Neues Passwort",or:"oder",Password:"Passwort","Phone Number":"Telefonnummer","Resend Code":"Code erneut senden","Reset your Password":"Zur\xFCcksetzen des Passworts","Reset your password":"Zur\xFCcksetzen des passworts","Send code":"Code senden","Send Code":"Code senden",Sending:"Wird gesendet","Setup TOTP":"TOTP einrichten","Show password":"Passwort anzeigen","Sign in to your account":"Melden Sie sich mit Ihrem Account an","Sign In with Amazon":"Mit Amazon anmelden","Sign In with Apple":"Mit Apple anmelden","Sign In with Facebook":"Mit Facebook anmelden","Sign In with Google":"Mit Google anmelden","Sign in":"Anmelden","Sign In":"Anmelden","Signing in":"Wird angemeldet",Skip:"\xDCberspringen",Submit:"Abschicken",Submitting:"Wird gesendet",Username:"Benutzername","Verify Contact":"Kontakt verifizieren",Verify:"Verifizieren","We Emailed You":"E-Mail wurde versendet","We Sent A Code":"Wir haben einen Code gesendet","We Texted You":"Wir haben Ihnen eine SMS gesendet","Your code is on the way. To log in, enter the code we emailed to":"Ihr Best\xE4tigungscode ist unterwegs. Um sich einzuloggen geben Sie den Code ein, den wir per E-Mail verschickt haben","Your code is on the way. To log in, enter the code we sent you":"Ihr Code ist unterwegs. Um sich anzumelden, geben Sie den Code ein, den wir Ihnen gesendet haben","Your code is on the way. To log in, enter the code we texted to":"Ihr Best\xE4tigungscode ist unterwegs. Um sich einzuloggen geben Sie den Code ein, den wir per SMS verschickt haben","An account with the given email already exists.":"Ein Account mit dieser E-Mail existiert bereits.","Confirm a Code":"Code best\xE4tigen","Confirm Sign In":"Anmeldung best\xE4tigen","Create account":"Hier registrieren","Sign Up with Facebook":"Mit Facebook registrieren","Sign Up with Google":"Mit Google registrieren","Forgot Password":"Passwort vergessen","Have an account? ":"Schon registriert? ","Incorrect username or password":"Falscher Benutzername oder falsches Passwort","Invalid password format":"Ung\xFCltiges Passwort-Format","Invalid phone number format":"Ung\xFCltiges Telefonummern-Format. Benutze eine Nummer im Format: +12345678900","It may take a minute to arrive.":"Es k\xF6nnte eine Minute dauern, bis der Code eintrifft.","Lost your code? ":"Code verloren? ","New Password":"Neues Passwort","No account? ":"Kein Account? ","Password attempts exceeded":"Die maximale Anzahl der fehlerhaften Anmeldeversuche wurde erreicht","Reset password":"Passwort zur\xFCcksetzen","Reset Password":"Passwort Zur\xFCcksetzen","Sign Out":"Abmelden","Sign Up":"Registrieren","User already exists":"Dieser Benutzer existiert bereits","User does not exist":"Dieser Benutzer existiert nicht","Username cannot be empty":"Benutzername darf nicht leer sein"};var g3={"Account recovery requires verified contact information":"Account recovery requires verified contact information","Add your Profile":"Add your Profile","Add your Website":"Add your Website","Back to Sign In":"Back to Sign In","Change Password":"Change Password",Changing:"Changing",Code:"Code","Confirm Password":"Confirm Password","Confirm Sign Up":"Confirm Sign Up","Confirm SMS Code":"Confirm SMS Code","Confirm MFA Code":"Confirm MFA Code","Confirm TOTP Code":"Confirm TOTP Code",Confirm:"Confirm","Confirmation Code":"Confirmation Code",Confirming:"Confirming","Create a new account":"Create a new account","Create Account":"Create Account","Creating Account":"Creating Account","Dismiss alert":"Dismiss alert",Email:"Email","Enter your Birthdate":"Enter your Birthdate","Enter your code":"Enter your code","Enter your Confirmation Code":"Enter your Confirmation Code","Enter your Email":"Enter your Email","Enter your Family Name":"Enter your Family Name","Enter your Given Name":"Enter your Given Name","Enter your Middle Name":"Enter your Middle Name","Enter your Name":"Enter your Name","Enter your Nickname":"Enter your Nickname","Enter your Password":"Enter your Password","Enter your phone number":"Enter your phone number","Enter your Preferred Username":"Enter your Preferred Username","Enter your username":"Enter your username","Forgot password?":"Forgot password?","Forgot your password?":"Forgot your password?","Hide password":"Hide password","It may take a minute to arrive":"It may take a minute to arrive",Loading:"Loading","New password":"New password",or:"or",Password:"Password","Phone Number":"Phone Number","Please confirm your Password":"Please confirm your Password","Resend Code":"Resend Code","Reset your password":"Reset your password","Reset your Password":"Reset your Password","Send code":"Send code","Send Code":"Send Code",Sending:"Sending","Setup TOTP":"Setup TOTP","Show password":"Show password","Sign in to your account":"Sign in to your account","Sign In with Amazon":"Sign In with Amazon","Sign In with Apple":"Sign In with Apple","Sign In with Facebook":"Sign In with Facebook","Sign In with Google":"Sign In with Google","Sign in":"Sign in","Sign In":"Sign In","Signing in":"Signing in",Skip:"Skip",Submit:"Submit",Submitting:"Submitting",Username:"Username","Verify Contact":"Verify Contact",Verify:"Verify","We Emailed You":"We Emailed You","We Sent A Code":"We Sent A Code","We Texted You":"We Texted You","Your code is on the way. To log in, enter the code we emailed to":"Your code is on the way. To log in, enter the code we emailed to","Your code is on the way. To log in, enter the code we sent you":"Your code is on the way. To log in, enter the code we sent you","Your code is on the way. To log in, enter the code we texted to":"Your code is on the way. To log in, enter the code we texted to"};var y3={"Account recovery requires verified contact information":"La recuperaci\xF3n de la cuenta requiere informaci\xF3n de contacto verificada","Back to Sign In":"Volver a inicio de sesi\xF3n","Change Password":"Cambiar contrase\xF1a",Changing:"Cambiando",Code:"C\xF3digo","Code *":"C\xF3digo *","Confirm Password":"Confirmar contrase\xF1a","Confirm Sign Up":"Confirmar registro","Confirm SMS Code":"Confirmar el c\xF3digo de SMS","Confirm TOTP Code":"Confirmar c\xF3digo TOTP",Confirm:"Confirmar","Confirmation Code":"C\xF3digo de confirmaci\xF3n",Confirming:"Confirmando","Create a new account":"Crear una cuenta nueva","Create Account":"Crear cuenta","Creating Account":"Creando cuenta","Dismiss alert":"Descartar alerta",Email:"Email","Enter your code":"Ingrese el c\xF3digo","Enter your Email":"Escriba su Email","Enter your email":"Escriba su email","Enter your Password":"Escriba su Contrase\xF1a","Enter your phone number":"Ingrese el n\xFAmero de tel\xE9fono","Enter your username":"Ingrese el nombre de usuario","Forgot your password?":"\xBFOlvid\xF3 su contrase\xF1a?","Hide password":"Ocultar contrase\xF1a","It may take a minute to arrive":"Es posible que tarde un minuto en llegar",Loading:"Cargando","New password":"Nueva contrase\xF1a",or:"o",Password:"Contrase\xF1a","Phone Number":"N\xFAmero de tel\xE9fono","Resend Code":"Reenviar c\xF3digo","Reset your password":"Restablecer su contrase\xF1a","Reset your Password":"Restablecer su Contrase\xF1a","Send code":"Enviar c\xF3digo","Send Code":"Enviar c\xF3digo",Sending:"Enviando","Setup TOTP":"Configurar TOTP","Show password":"Mostrar contrase\xF1a","Sign in to your account":"Iniciar sesi\xF3n en tu cuenta","Sign In with Amazon":"Iniciar Sesi\xF3n con Amazon","Sign In with Apple":"Iniciar Sesi\xF3n con Apple","Sign In with Facebook":"Iniciar Sesi\xF3n con Facebook","Sign In with Google":"Iniciar Sesi\xF3n con Google","Sign in":"Iniciar sesi\xF3n","Sign In":"Iniciar Sesi\xF3n","Signing in":"Iniciando sesi\xF3n",Skip:"Omitir",Submit:"Enviar",Submitting:"Enviando",Username:"Nombre de usuario","Verify Contact":"Verificar contacto",Verify:"Verificar","We Emailed You":"Le hemos enviado un correo electr\xF3nico","We Sent A Code":"Hemos enviado un c\xF3digo","We Texted You":"Le hemos enviado un mensaje de texto","Your code is on the way. To log in, enter the code we emailed to":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que hemos enviado por correo electr\xF3nico a","Your code is on the way. To log in, enter the code we sent you":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que le hemos enviado","Your code is on the way. To log in, enter the code we texted to":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que hemos enviado por mensaje de texto a","An account with the given email already exists.":"Ya existe una cuenta con el correo ingresado.","Confirm a Code":"Confirmar un c\xF3digo","Confirm Sign In":"Confirmar inicio de sesi\xF3n","Forgot Password":"Olvid\xE9 mi contrase\xF1a","Incorrect username or password.":"Nombre de usuario o contrase\xF1a incorrecta","Enter your Family Name":"Escriba su apellido","Enter your Given Name":"Escriba su nombre","Given Name":"Nombre","Family Name":"Apellido","Reset Password":"Restablecer contrase\xF1a","Please confirm your Password":"Confirme su contrase\xF1a","Invalid password format":"Formato de contrase\xF1a inv\xE1lido","Invalid phone number format":"Formato de n\xFAmero de tel\xE9fono inv\xE1lido","Loading...":"Cargando...","New Password":"Nueva contrase\xF1a","Resend a Code":"Reenviar un c\xF3digo","Sign Out":"Cerrar sesi\xF3n","Sign Up with Amazon":"Crear cuenta con Amazon","Sign Up with Apple":"Crear cuenta con Apple","Sign Up with Facebook":"Crear cuenta con Facebook","Sign Up with Google":"Crear cuenta con Google","Sign Up":"Crear cuenta","User already exists":"El usuario ya existe","User does not exist":"El usuario no existe","Username/client id combination not found.":"El usuario no existe","Username cannot be empty":"El nombre de usuario no puede estar vac\xEDo","Your passwords must match":"Las contrase\xF1as deben coincidir","Password must have at least 8 characters":"La contrase\xF1a debe tener al menos 8 caracteres","Password did not conform with policy: Password must have uppercase characters":"La contrase\xF1a debe tener al menos un car\xE1cter en may\xFAscula","Password did not conform with policy: Password must have numeric characters":"La contrase\xF1a debe tener al menos un car\xE1cter num\xE9rico","Password did not conform with policy: Password must have symbol characters":"La contrase\xF1a debe tener al menos un s\xEDmbolo","Password did not conform with policy: Password must have lowercase characters":"La contrase\xF1a debe tener al menos un car\xE1cter en min\xFAsculas","Invalid verification code provided, please try again.":"C\xF3digo de verificaci\xF3n no v\xE1lido, int\xE9ntelo de nuevo.","Attempt limit exceeded, please try after some time.":"N\xFAmero m\xE1ximo de intentos excedido, por favor int\xE9ntelo de nuevo m\xE1s tarde.","A network error has occurred.":"Se ha producido un error de red."};var _3={"Account recovery requires verified contact information":"La r\xE9cup\xE9ration du compte n\xE9cessite des informations de contact v\xE9rifi\xE9es","Back to Sign In":"Retour \xE0 la connexion","Change Password":"Modifier le mot de passe",Changing:"Modification en cours",Code:"Code","Confirm Password":"Confirmez le mot de passe","Confirm Sign Up":"Confirmer l'inscription","Confirm SMS Code":"Confirmer le code SMS","Confirm TOTP Code":"Confirmer le code TOTP",Confirm:"Confirmer","Confirmation Code":"Code de confirmation",Confirming:"Confirmation","Create a new account":"Cr\xE9er un nouveau compte","Create Account":"Cr\xE9er un compte","Creating Account":"Cr\xE9ation d'un compte","Dismiss alert":"Supprimer l'alerte",Email:"Email","Enter your code":"Saisissez cotre code de confirmation","Enter your Email":"Saisissez votre adresse e-mail","Enter your email":"Saisissez votre adresse e-mail","Enter your phone number":"Saisissez votre num\xE9ro de t\xE9l\xE9phone","Enter your username":"Saisissez votre nom d'utilisateur","Forgot your password?":"Mot de passe oubli\xE9 ? ","Hide password":"Masquer le mot de passe","It may take a minute to arrive":"Cela peut prendre une minute",Loading:"Chargement en cours","New password":"Nouveau mot de passe",or:"ou",Password:"Mot de passe","Phone Number":"Num\xE9ro de t\xE9l\xE9phone","Resend Code":"Renvoyer le code","Reset your Password":"R\xE9initialiser votre mot de passe","Reset your password":"R\xE9initialisez votre mot de passe","Send code":"Envoyer le code","Send Code":"M'envoyer un code",Sending:"Envoi en cours","Setup TOTP":"Configuration de TOTP","Show password":"Afficher le mot de passe","Sign in to your account":"Connexion \xE0 votre compte","Sign In with Amazon":"Se connecter avec Amazon","Sign In with Apple":"Se connecter avec Apple","Sign In with Facebook":"Se connecter avec Facebook","Sign In with Google":"Se connecter avec Google","Sign in":"Se connecter","Sign In":"Se connecter","Signing in":"Connexion en cours",Skip:"Passer",Submit:"Soumettre",Submitting:"Envoi en cours",Username:"Nom d'utilisateur","Verify Contact":"V\xE9rifier le contact",Verify:"V\xE9rifier","We Sent A Code":"Nous avons envoy\xE9 un code","We Texted You":"Nous vous avons envoy\xE9 un SMS","Your code is on the way. To log in, enter the code we sent you":"Votre code est en cours d'envoi. Pour vous connecter, saisissez le code que nous vous avons envoy\xE9","Add your Profile":"Ajoutez votre profil","Add your Website":"Ajoutez votre site web","An account with the given email already exists.":"Un utilisateur avec cette adresse email existe d\xE9j\xE0.",Birthdate:"Date de naissance",Change:"Modifier","Confirm a Code":"Confirmer un code","Confirm Sign In":"Confirmer la connexion","Create account":"Cr\xE9er un compte","Enter your Birthdate":"Saisissez votre date de naissance","Enter your Confirmation Code":"Saisissez votre code de confirmation","Enter your Family Name":"Saisissez votre nom de famille","Enter your Given Name":"Saisissez votre pr\xE9nom","Enter your Middle Name":"Saisissez votre deuxi\xE8me pr\xE9nom","Enter your Name":"Saisissez votre nom","Enter your Nickname":"Saisissez votre surnom","Enter your Password":"Saisissez votre mot de passe","Enter your Phone Number":"Saisissez votre num\xE9ro de t\xE9l\xE9phone","Enter your Preferred Username":"Saisissez votre nom d'utilisateur","Enter your password":"Saisissez votre mot de passe","Given Name":"Pr\xE9nom","Family Name":"Nom de famille","Forgot Password":"Mot de passe oubli\xE9","Forgot Password?":"Mot de passe oubli\xE9 ?","Incorrect username or password.":"Identifiant ou mot de passe incorrect.","Have an account? ":"D\xE9j\xE0 un compte ? ",Hello:"Bonjour","Incorrect username or password":"Identifiant ou mot de passe incorrect","Invalid password format":"Format de mot de passe invalide","Invalid phone number format":"Format de num\xE9ro de t\xE9l\xE9phone invalide. Veuillez utiliser un format +12345678900","Loading...":"Chargement...","Lost your code? ":"Vous avez perdu votre code ? ","Network error":"Erreur r\xE9seau","New Password":"Nouveau mot de passe",Name:"Nom","No account? ":"Pas de compte ? ","Please confirm your Password":"Confirmez votre mot de passe","Preferred Username":"Nom d'utilisateur pr\xE9f\xE9r\xE9",Profile:"Profil","Resend a Code":"Renvoyer un code","Reset password":"R\xE9initialiser le mot de passe","Reset Password":"R\xE9initialiser le mot de passe",Send:"Envoyer","Sign In with AWS":"Se connecter avec AWS","Sign Out":"D\xE9connexion","Sign Up":"S'inscrire",SMS:"SMS","User already exists":"L'utilisateur existe d\xE9j\xE0","User does not exist":"L'utilisateur n'existe pas","Username cannot be empty":"Le nom d'utilisateur doit \xEAtre renseign\xE9","Username/client id combination not found.":"L'utilisateur n'existe pas","We Emailed You":"Nous vous avons envoy\xE9 un code","Your code is on the way. To log in, enter the code we emailed to":"Votre code est en route. Pour vous connecter entrez le code re\xE7u sur cette adresse email","Your code is on the way. To log in, enter the code we texted to":"Votre code est en route. Pour vous connecter entrez le code re\xE7u sur ce num\xE9ro de t\xE9l\xE9phone","Your passwords must match":"Vos mots de passe doivent \xEAtre identiques","It may take a minute to arrive.":"Cela peut prendre quelques minutes.",Website:"Site web","Password must have at least 8 characters":"Le mot de passe doit comporter au moins 8 caract\xE8res","Password did not conform with policy: Password must have uppercase characters":"Le mot de passe doit comporter des caract\xE8res majuscules","Password did not conform with policy: Password must have numeric characters":"Le mot de passe doit comporter des caract\xE8res num\xE9riques","Password did not conform with policy: Password must have symbol characters":"Le mot de passe doit comporter des symboles","Password did not conform with policy: Password must have lowercase characters":"Le mot de passe doit comporter des caract\xE8res minuscules","Invalid verification code provided, please try again.":"Code de v\xE9rification invalide, veuillez r\xE9essayer.","Attempt limit exceeded, please try after some time.":"Nombre maximum de tentatives d\xE9pass\xE9, veuillez r\xE9essayer plus tard.","A network error has occurred.":"Une erreur de r\xE9seau s'est produite."};var v3={"Account recovery requires verified contact information":"Il ripristino dell'account richiede informazioni di contatto verificate","Back to Sign In":"Torna alla schermata di accesso","Change Password":"Cambia la password",Changing:"Modifica in corso",Code:"Codice","Confirm Password":"Conferma la password","Confirm Sign Up":"Conferma registrazione","Confirm SMS Code":"Conferma codice SMS","Confirm TOTP Code":"Conferma codice TOTP",Confirm:"Conferma","Confirmation Code":"Codice di verifica",Confirming:"Conferma in corso","Create a new account":"Crea un nuovo account","Create Account":"Crea Account","Creating Account":"Creazione account in corso","Dismiss alert":"Ignora l'avviso",Email:"Email","Enter your code":"Inserisci il tuo codice","Enter your Email":"Inserisci la tua e-mail","Enter your phone number":'Inserisci il tuo numero di telefono"',"Enter your username":"Inserisci il tuo nome utente","Forgot your password?":"Password dimenticata?","Hide password":"Nascondi password","It may take a minute to arrive":"L'arrivo potrebbe richiedere qualche minuto",Loading:"Caricamento in corso","New password":"Nuova password",or:"oppure",Password:"Password","Phone Number":"Numero di telefono","Resend Code":"Invia nuovamente il codice","Reset your Password":"Reimposta la tua Password","Reset your password":"Reimposta la tua password","Send code":"Invia codice","Send Code":"Invia codice",Sending:"Invio in corso","Setup TOTP":"Configura TOTP","Show password":"Mostra password","Sign in to your account":"Accedi al tuo account","Sign In with Amazon":"Accedi con Amazon","Sign In with Apple":"Accedi con Apple","Sign In with Facebook":"Accedi con Facebook","Sign In with Google":"Accedi con Google","Sign in":"Accedi","Sign In":"Accedi","Signing in":"Accesso in corso",Skip:"Salta",Submit:"Invia",Submitting:"Invio in corso",Username:"Nome utente","Verify Contact":"Verifica contatto",Verify:"Verifica","We Emailed You":"Ti abbiamo inviato un'e-mail","We Sent A Code":"Ti abbiamo inviato un codice","We Texted You":"Ti abbiamo inviato un SMS","Your code is on the way. To log in, enter the code we emailed to":"Il codice \xE8 in arrivo. Per effettuare l'accesso, immetti il codice che ti abbiamo inviato via e-mail","Your code is on the way. To log in, enter the code we sent you":"Il codice \xE8 in arrivo. Per accedere, immetti il codice che ti abbiamo inviato","Your code is on the way. To log in, enter the code we texted to":"Il codice \xE8 in arrivo. Per accedere, immetti il codice che abbiamo inviato tramite SMS","An account with the given email already exists.":"Questa email \xE8 gi\xE0 utilizzata da un altro account.","Confirm a Code":"Conferma un codice","Confirm Sign In":"Conferma l'accesso","Create account":"Crea account","Enter your password":"Inserisci la tua password","Forgot Password?":"Password dimenticata?","Have an account? ":"Gi\xE0 registrato?","Incorrect username or password":"Nome utente o password errati","Invalid password format":"Formato della password non valido","Invalid phone number format":"Formato del numero di telefono non valido","Lost your code?":"Codice smarrito?","New Password":"Nuova password","No account? ":"Non hai un account?","Password attempts exceeded":"Il numero massimo di tentativi di accesso falliti \xE8 stato raggiunto","Reset password":"Reimposta password","Sign Out":"Esci","Sign Up":"Registrati","User already exists":"Utente gi\xE0 esistente","User does not exist":"Utente inesistente","Username cannot be empty":"Il nome utente non pu\xF2 essere vuoto"};var b3={"Account recovery requires verified contact information":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u5FA9\u65E7\u306B\u306F\u78BA\u8A8D\u6E08\u307F\u306E\u9023\u7D61\u5148\u304C\u5FC5\u8981\u3067\u3059","Back to Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3\u306B\u623B\u308B","Change Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5909\u3048\u308B ",Changing:"\u5909\u66F4\u4E2D",Code:"\u30B3\u30FC\u30C9","Confirm Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u78BA\u8A8D","Confirm Sign Up":"\u767B\u9332\u3059\u308B","Confirm SMS Code":"SMS \u30B3\u30FC\u30C9\u3092\u78BA\u8A8D","Confirm TOTP Code":"TOTP \u30B3\u30FC\u30C9\u3092\u78BA\u8A8D",Confirm:"\u78BA\u5B9A","Confirmation Code":"\u78BA\u8A8D\u30B3\u30FC\u30C9",Confirming:"\u78BA\u8A8D\u4E2D","Create a new account":"\u65B0\u3057\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B","Create Account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B","Creating Account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210\u4E2D","Dismiss alert":"\u30A2\u30E9\u30FC\u30C8\u3092\u9589\u3058\u308B",Email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9","Enter your code":"\u30B3\u30FC\u30C9\u3092\u5165\u529B","Enter your Email":"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B","Enter your phone number":"\u96FB\u8A71\u756A\u53F7\u3092\u5165\u529B","Enter your username":"\u30E6\u30FC\u30B6\u30FC\u540D\u3092\u5165\u529B ","Enter your Username":"\u30E6\u30FC\u30B6\u30FC\u540D\u3092\u5165\u529B ","Forgot your password?":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5FD8\u308C\u307E\u3057\u305F\u304B\uFF1F ","Hide password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u975E\u8868\u793A","It may take a minute to arrive":"\u5230\u7740\u3059\u308B\u307E\u3067\u306B 1 \u5206\u304B\u304B\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059",Loading:"\u30ED\u30FC\u30C9\u4E2D","New password":"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",or:"\u53C8\u306F",Password:"\u30D1\u30B9\u30EF\u30FC\u30C9 ","Phone Number":"\u96FB\u8A71\u756A\u53F7","Resend Code":"\u30B3\u30FC\u30C9\u3092\u518D\u9001\u4FE1","Reset your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8","Reset your password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8\u3059\u308B","Send code":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1","Send Code":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1",Sending:"\u9001\u4FE1\u4E2D","Setup TOTP":"TOTP \u3092\u30BB\u30C3\u30C8\u30A2\u30C3\u30D7","Show password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8868\u793A","Sign in to your account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u30B5\u30A4\u30F3\u30A4\u30F3 ","Sign In with Amazon":"Amazon\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Apple":"Apple \u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Facebook":"Facebook\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Google":"Google\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3 ","Sign in":"\u30B5\u30A4\u30F3\u30A4\u30F3","Signing in":"\u30B5\u30A4\u30F3\u30A4\u30F3\u4E2D",Skip:"\u30B9\u30AD\u30C3\u30D7",Submit:"\u9001\u4FE1",Submitting:"\u9001\u4FE1\u4E2D",Username:"\u30E6\u30FC\u30B6\u30FC\u540D ","Verify Contact":"\u9023\u7D61\u5148\u3092\u78BA\u8A8D",Verify:"\u78BA\u8A8D","We Sent A Code":"\u30B3\u30FC\u30C9\u304C\u9001\u4FE1\u3055\u308C\u307E\u3057\u305F","We Texted You":"\u30C6\u30AD\u30B9\u30C8\u304C\u9001\u4FE1\u3055\u308C\u307E\u3057\u305F","Your code is on the way. To log in, enter the code we sent you":"\u30B3\u30FC\u30C9\u304C\u9014\u4E2D\u3067\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u9001\u4FE1\u3057\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044","An account with the given email already exists.":"\u5165\u529B\u3055\u308C\u305F\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u65E2\u306B\u5B58\u5728\u3057\u307E\u3059","Confirm a Code":"\u30B3\u30FC\u30C9\u3092\u78BA\u8A8D","Confirm Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3\u3059\u308B","Create account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B ","Enter your password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B ","Enter your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B","Please confirm your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B","Forgot Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5FD8\u308C\u305F ","Have an account? ":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6301\u3063\u3066\u3044\u307E\u3059\u304B\uFF1F","Incorrect username or password":"\u30E6\u30FC\u30B6\u30FC\u540D\u304B\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u7570\u306A\u308A\u307E\u3059 ","Invalid password format":"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u5F62\u5F0F\u304C\u7121\u52B9\u3067\u3059 ","Invalid phone number format":`\u4E0D\u6B63\u306A\u96FB\u8A71\u756A\u53F7\u306E\u5F62\u5F0F\u3067\u3059\u3002
+12345678900 \u306E\u5F62\u5F0F\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044`,"It may take a minute to arrive.":"\u30B3\u30FC\u30C9\u3092\u53D7\u4FE1\u3059\u308B\u307E\u3067\u6570\u5206\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002","Lost your code? ":"\u30B3\u30FC\u30C9\u3092\u5931\u304F\u3057\u307E\u3057\u305F\u304B\uFF1F","New Password":"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9","No account? ":"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u7121\u3044\u3068\u304D ","Password attempts exceeded":"\u30B5\u30A4\u30F3\u30A4\u30F3\u306E\u8A66\u884C\u56DE\u6570\u304C\u4E0A\u9650\u306B\u9054\u3057\u307E\u3057\u305F","Reset password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8 ","Reset Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8","Sign Out":"\u30B5\u30A4\u30F3\u30A2\u30A6\u30C8 ","Sign Up":"\u767B\u9332 ","User already exists":"\u65E2\u306B\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3057\u3066\u3044\u307E\u3059 ","User does not exist":"\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3057\u307E\u305B\u3093 ","Username cannot be empty":"\u30E6\u30FC\u30B6\u30FC\u540D\u306F\u5165\u529B\u5FC5\u9808\u3067\u3059","We Emailed You":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F","Your code is on the way. To log in, enter the code we emailed to":"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u30E1\u30FC\u30EB\u306B\u8A18\u8F09\u3055\u308C\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u9001\u4FE1\u5148:","Your code is on the way. To log in, enter the code we texted to":"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u30C6\u30AD\u30B9\u30C8\u30E1\u30C3\u30BB\u30FC\u30B8\u306B\u8A18\u8F09\u3055\u308C\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u9001\u4FE1\u5148:"};var w3={"Account recovery requires verified contact information":"\uACC4\uC815 \uBCF5\uAD6C\uB97C \uC704\uD574 \uC5F0\uB77D\uCC98 \uD655\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4","Back to Sign In":"\uB85C\uADF8\uC778\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30","Change Password":"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD\uD558\uAE30",Changing:"\uBCC0\uACBD\uC911",Code:"\uCF54\uB4DC","Confirm Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uD655\uC778","Confirm Sign Up":"\uD68C\uC6D0\uAC00\uC785 \uD655\uC778","Confirm SMS Code":"\uD734\uB300\uD3F0 \uBCF8\uC778 \uD655\uC778","Confirm TOTP Code":"TOTP \uC778\uC99D\uBC88\uD638 \uD655\uC778",Confirm:"\uD655\uC778","Confirmation Code":"\uC778\uC99D\uBC88\uD638",Confirming:"\uD655\uC778\uC911","Create a new account":"\uD68C\uC6D0\uAC00\uC785","Create Account":"\uD68C\uC6D0\uAC00\uC785","Creating Account":"\uD68C\uC6D0\uAC00\uC785\uC911","Dismiss alert":"\uC54C\uB9BC \uBB34\uC2DC",Email:"\uC774\uBA54\uC77C","Enter your Birthdate":"\uC0DD\uB144\uC6D4\uC77C \uC785\uB825","Enter your code":"\uC778\uC99D\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694","Enter your Confirmation Code":"\uD655\uC778 \uCF54\uB4DC \uC785\uB825","Enter your Email":"\uC774\uBA54\uC77C \uC785\uB825","Enter your Family Name":"\uC131 \uC785\uB825","Enter your Given Name":"\uC0AC\uC6A9\uC7A5 \uC774\uB984 \uC785\uB825","Enter your Name":"\uC774\uB984 \uC785\uB825","Enter your Nickname":"\uB2C9\uB124\uC784 \uC785\uB825","Enter your Password":"\uBE44\uBC00\uBC88\uD638 \uC785\uB825","Enter your phone number":"\uC804\uD654\uBC88\uD638 \uC785\uB825","Enter your Preferred Username":"\uC120\uD638\uD558\uB294 \uC544\uC774\uB514 \uC785\uB825","Enter your username":"\uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694","Forgot password?":"\uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694?","Hide password":"\uBE44\uBC00\uBC88\uD638 \uC228\uAE30\uAE30","It may take a minute to arrive":"\uB3C4\uCC29\uD558\uB294 \uB370 1\uBD84 \uC815\uB3C4 \uAC78\uB9B4 \uC218 \uC788\uC2B5\uB2C8\uB2E4",Loading:"\uB85C\uB529\uC911","New password":"\uC0C8 \uBE44\uBC00\uBC88\uD638",or:"\uB610\uB294",Password:"\uBE44\uBC00\uBC88\uD638","Phone Number":"\uC804\uD654\uBC88\uD638","Please confirm your Password":"\uBE44\uBC00\uBC88\uD638\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.","Resend Code":"\uC778\uC99D\uBC88\uD638 \uC7AC\uC804\uC1A1","Reset your password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815","Reset your Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815","Send code":"\uC778\uC99D\uCF54\uB4DC \uBCF4\uB0B4\uAE30","Send Code":"\uCF54\uB4DC \uC804\uC1A1",Sending:"\uC804\uC1A1\uC911","Setup TOTP":"TOTP \uC124\uC815\uD558\uAE30","Show password":"\uBE44\uBC00\uBC88\uD638 \uBCF4\uC774\uAE30","Sign in to your account":"\uB85C\uADF8\uC778","Sign In with Amazon":"Amazon \uB85C\uADF8\uC778","Sign In with Apple":"Apple \uB85C\uADF8\uC778","Sign In with Facebook":"Facebook \uB85C\uADF8\uC778","Sign In with Google":"Google \uB85C\uADF8\uC778","Sign in":"\uB85C\uADF8\uC778","Sign In":"\uB85C\uADF8\uC778","Signing in":"\uB85C\uADF8\uC778\uC911",Skip:"\uB2E4\uC74C\uC5D0 \uD558\uAE30",Submit:"\uD655\uC778",Submitting:"\uD655\uC778\uC911",Username:"\uC544\uC774\uB514","Verify Contact":"\uC5F0\uB77D\uCC98 \uD655\uC778",Verify:"\uC778\uC99D","We Emailed You":"\uC774\uBA54\uC77C\uC744 \uBCF4\uB0C4","We Sent A Code":"\uCF54\uB4DC\uB97C \uBCF4\uB0C4","We Texted You":"\uBB38\uC790 \uBA54\uC2DC\uC9C0\uB97C \uBCF4\uB0C4","Your code is on the way. To log in, enter the code we emailed to":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uC774\uBA54\uC77C\uB85C \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694","Your code is on the way. To log in, enter the code we sent you":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694","Your code is on the way. To log in, enter the code we texted to":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uBB38\uC790 \uBA54\uC2DC\uC9C0\uB85C \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694",Birthdate:"\uC0DD\uB144\uC6D4\uC77C","Family Name":"\uC131","Forgot your password?":"\uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694?","Given Name":"\uC774\uB984",Name:"\uC131\uD568",Nickname:"\uB2C9\uB124\uC784","Preferred Username":"\uB2C9\uB124\uC784",Profile:"\uD504\uB85C\uD544","Reset Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815",Website:"\uC6F9\uC0AC\uC774\uD2B8"};var x3={"Account recovery requires verified contact information":"Gjenoppretting av konto krever verifisert kontaktinformajson","Add your Profile":"Legg til profilen din","Add your Website":"Legg til nettsiden din","Back to Sign In":"Tilbake til innlogging","Change Password":"Bytt passord",Changing:"Endre",Code:"Kode","Confirm Password":"Bekreft passordet","Confirm Sign Up":"Bekreft registrering","Confirm SMS Code":"Bekreft SMS-kode","Confirm TOTP Code":"Bekreft TOTP-kode",Confirm:"Bekreft","Confirmation Code":"Bekreftelseskode",Confirming:"Bekrefter","Create a new account":"Opprett en ny konto","Create Account":"Opprett konto","Creating Account":"Oppretter konto","Dismiss alert":"Avvis varsel",Email:"E-post","Enter your Birthdate":"Skriv inn f\xF8dselsdatoen din","Enter your code":"Skriv inn koden din","Enter your Confirmation Code":"Skriv inn bekreftelseskoden din","Enter your Email":"Skriv inn e-postadressen din","Enter your Family Name":"Skriv inn etternavnet ditt","Enter your Given Name":"Skriv inn fornavnet ditt","Enter your Middle Name":"Skriv inn mellomnavnet ditt","Enter your Name":"Skriv inn navnet ditt","Enter your Nickname":"Skriv inn kallenavnet ditt","Enter your Password":"Skriv inn passordet ditt","Enter your phone number":"Skriv inn telefonnummeret ditt","Enter your Preferred Username":"Skriv inn det foretrukne brukernavnet ditt","Enter your username":"Skriv inn brukernavnet ditt","Forgot password?":"Glemt passord?","Forgot your password?":"Glemt passordet ditt?","Hide password":"Skjul passordet","It may take a minute to arrive":"Det kan ta et minutt for \xE5 komme frem",Loading:"Laster inn","New password":"Nytt passord",or:"eller",Password:"Passord","Phone Number":"Telefonnummer","Please confirm your Password":"Vennligst bekreft passordet ditt","Resend Code":"Send koden p\xE5 nytt","Reset your password":"Nullstill passordet ditt","Reset your Password":"Nullstill passordet ditt","Send code":"Send kode","Send Code":"Send kode",Sending:"Sender","Setup TOTP":"Konfigurer TOTP","Show password":"Vis passordet","Sign in to your account":"Logg inn p\xE5 kontoen din","Sign In with Amazon":"Logg inn med Amazon","Sign In with Apple":"Logg inn med Apple","Sign In with Facebook":"Logg inn med Facebook","Sign In with Google":"Logg inn med Google","Sign in":"Logg inn","Sign In":"Logg inn","Signing in":"Logger inn",Skip:"Hopp over",Submit:"Send inn",Submitting:"Sender inn",Username:"Brukernavn","Verify Contact":"Bekreft kontakt",Verify:"Bekreft","We Emailed You":"Vi sendte deg en e-post","We Sent A Code":"Vi sendte en kode","We Texted You":"Vi sendte deg en tekstmelding","Your code is on the way. To log in, enter the code we emailed to":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte e-post til","Your code is on the way. To log in, enter the code we sent you":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte deg","Your code is on the way. To log in, enter the code we texted to":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte tekstmelding til","An account with the given email already exists.":"Det finnes allerede en konto med denne e-postadressen","Confirm a Code":"Bekreft koden","Confirm Sign In":"Bekreft innlogging","Create account":"Opprett konto","Enter your password":"Skriv inn passordet ditt","Forgot Password":"Glemt passordet","Have an account? ":"Har en konto allerede? ","Incorrect username or password":"Feil brukernavn eller passord","Invalid password format":"Ugyldig passordformat","Invalid phone number format":"Ugyldig telefonnummerformat","Lost your code? ":"Mistet koden? ","New Password":"Nytt passord","No account? ":"Ingen konto? ","Password attempts exceeded":"For mange mislykkede passordfors\xF8k","Reset password":"Nullstill passord","Sign Out":"Logg ut","Sign Up":"Registrering","User already exists":"Brukeren finnes allerede","User does not exist":"Brukeren finnes ikke","Username cannot be empty":"Brukernavnet kan ikke v\xE6re tomt"};var S3={"Account recovery requires verified contact information":"Accountherstel vereist geverifieerde contactgegevens","Back to Sign In":"Terug naar inloggen","Change Password":"Wachtwoord wijzigen",Changing:"Wordt aangepast",Code:"Code","Confirm Password":"Bevestig Wachtwoord","Confirm Sign Up":"Bevestig inschrijving","Confirm SMS Code":"Bevestig SMS Code","Confirm TOTP Code":"Bevestig TOTP Code",Confirm:"Bevestig","Confirmation Code":"Bevestigingscode",Confirming:"Bevestigen","Create a new account":"Nieuw account aanmaken","Create Account":"Account aanmaken","Creating Account":"Account wordt aangemaakt","Dismiss alert":"Waarschuwing sluiten",Email:"E-mail","Enter your code":"Vul je code in","Enter your Email":"Vul je e-mail in","Enter your Password":"Vul je wachtwoord in","Enter your phone number":"Vul je telefoonnummer in","Enter your username":"Vul je gebruikersnaam in","Enter your Username":"Vul je gebruikersnaam in","Forgot your password?":"Wachtwoord vergeten? ","Hide password":"Verberg wachtwoord","It may take a minute to arrive":"Het kan even duren voordat deze aankomt",Loading:"Laden","New password":"Nieuw wachtwoord","New Password":"Nieuw Wachtwoord",or:"of",Password:"Wachtwoord","Phone Number":"Telefoonnummer","Please confirm your Password":"Bevestig je wachtwoord","Resend Code":"Verstuur code nogmaals","Reset Password":"Wachtwoord resetten","Reset your password":"Reset je wachtwoord","Reset your Password":"Wachtwoord resetten","Send code":"Verstuur code","Send Code":"Verstuur Code",Sending:"Versturen","Setup TOTP":"TOTP Instellingen","Show password":"Toon wachtwoord","Sign in to your account":"Inloggen op je account","Sign In with Amazon":"Inloggen met Amazon","Sign In with Apple":"Inloggen met Apple","Sign In with Facebook":"Inloggen met Facebook","Sign In with Google":"Inloggen met Google","Sign in":"Inloggen","Sign In":"Inloggen","Signing in":"Inloggen",Skip:"Overslaan",Submit:"Versturen",Submitting:"Wordt verstuurd",Username:"Gebruikersnaam","Verify Contact":"Verifieer Contact",Verify:"Verifieer","We Emailed You":"We hebben u een e-mail gestuurd","We Sent A Code":"We hebben een code gestuurd","We Texted You":"We hebben u een sms gestuurd","Your code is on the way. To log in, enter the code we emailed to":"Uw code is onderweg. Om in te loggen, voer de code in die we gemaild hebben naar","Your code is on the way. To log in, enter the code we sent you":"Uw code is onderweg. Om in te loggen, voer de code in die we u hebben gestuurd","Your code is on the way. To log in, enter the code we texted to":"Uw code is onderweg. Om in te loggen, voer de code in die we hebben gestuurd naar","Your passwords must match":"Je wachtwoorden moeten overeenkomen"};var C3={"Account recovery requires verified contact information":"Odzyskanie konta wymaga zweryfikowanych danych kontaktowych","Back to Sign In":"Powr\xF3t do logowania","Change Password":"Zmie\u0144 has\u0142o",Changing:"Zmienianie",Code:"Kod","Confirm Password":"Potwierd\u017A Has\u0142o","Confirm Sign Up":"Potwierd\u017A rejestracj\u0119","Confirm SMS Code":"Potwierd\u017A kod SMS","Confirm TOTP Code":"Potwierd\u017A has\u0142o jednorazowe",Confirm:"Potwierd\u017A","Confirmation Code":"Kod potwierdzenia",Confirming:"Potwierdzanie","Create a new account":"Utw\xF3rz nowe konto","Create Account":"Utw\xF3rz konto","Creating Account":"Tworzenie konta","Dismiss alert":"Odrzu\u0107 alert",Email:"E-mail","Enter your code":"Wprowad\u017A sw\xF3j kod","Enter your Email":"Wpisz sw\xF3j adres e-mail","Enter your phone number":"Wpisz sw\xF3j numer telefonu","Enter your username":"Wprowad\u017A swoj\u0105 nazw\u0119 u\u017Cytkownika","Forgot your password?":"Zapomnia\u0142e\u015B has\u0142a? ","Hide password":"Ukryj has\u0142o","It may take a minute to arrive":"Mo\u017Ce to chwil\u0119 potrwa\u0107",Loading:"\u0141adowanie","New password":"Nowe has\u0142o",or:"albo",Password:"Has\u0142o","Phone Number":"Numer telefonu","Resend Code":"Wy\u015Blij kod ponownie","Reset your password":"Zresetuj swoje has\u0142o","Reset your Password":"Zresetuj swoje has\u0142o","Send code":"Wy\u015Blij kod","Send Code":"Zresetuj has\u0142o",Sending:"Wysy\u0142anie","Setup TOTP":"Konfiguruj TOTP","Show password":"Poka\u017C has\u0142o","Sign in to your account":"Zaloguj si\u0119 na swoje konto","Sign In with Amazon":"Zaloguj z Amazon","Sign In with Apple":"Zaloguj z Apple","Sign In with Facebook":"Zaloguj z Facebook","Sign In with Google":"Zaloguj z Google","Sign In":"Logowanie","Sign in":"Zaloguj","Signing in":"Logowanie",Skip:"Pomi\u0144",Submit:"Wy\u015Blij",Submitting:"Wysy\u0142anie",Username:"Nazwa u\u017Cytkownika","Verify Contact":"Weryfikacja danych kontaktowych",Verify:"Zweryfikuj",Birthdate:"Data urodzenia","Family Name":"Nazwisko","Given Name":"Pierwsze imi\u0119","Middle Name":"Drugie imi\u0119",Name:"Imi\u0119 i nazwisko",Nickname:"Pseudonim","Preferred Username":"Preferowana nazwa u\u017Cytkownika",Profile:"Profil",Website:"Strona internetowa","We Emailed You":"Wys\u0142ali\u015Bmy Ci wiadomo\u015B\u0107 e-mail","We Sent A Code":"Wys\u0142ali\u015Bmy kod","We Texted You":"Wys\u0142ali\u015Bmy Ci wiadomo\u015B\u0107 SMS","Your code is on the way. To log in, enter the code we emailed to":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A kod wys\u0142any na adres e-mail","Your code is on the way. To log in, enter the code we sent you":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A wys\u0142any do Ciebie kod","Your code is on the way. To log in, enter the code we texted to":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A kod wys\u0142any do Ciebie w wiadomo\u015Bci SMS pod numer"};var E3={"Account recovery requires verified contact information":"A recupera\xE7\xE3o da conta requer informa\xE7\xF5es de contato verificadas","Add your Profile":"Adicione seu Perfil","Add your Website":"Adicione seu Website","Back to Sign In":"Voltar para Entrar","Change Password":"Mudar senha",Changing:"Mudando",Code:"C\xF3digo","Confirm Password":"Confirme a Senha","Confirm Sign Up":"Confirmar inscri\xE7\xE3o","Confirm SMS Code":"Confirme o c\xF3digo SMS","Confirm MFA Code":"Confirme o c\xF3digo MFA","Confirm TOTP Code":"Confirme o c\xF3digo TOTP",Confirm:"confirme","Confirmation Code":"C\xF3digo de confirma\xE7\xE3o",Confirming:"Confirmando","Create a new account":"Criar uma nova conta","Create Account":"Criar Conta","Creating Account":"Criando conta","Dismiss alert":"Descartar alerta",Email:"O email","Enter your Birthdate":"Digite sua Data de Nascimento","Enter your code":"Insira seu c\xF3digo","Enter your Confirmation Code":"Digite seu c\xF3digo de confirma\xE7\xE3o","Enter your Email":"Digite seu e-mail","Enter your Family Name":"Digite seu Sobrenome","Enter your Given Name":"Digite seu Primeiro Nome","Enter your Middle Name":"Digite seu Nome do Meio","Enter your Name":"Digite seu Nome","Enter your Nickname":"Digite seu Apelido","Enter your Password":"Digite sua senha","Enter your phone number":"Digite seu n\xFAmero de telefone","Enter your Preferred Username":"Digite seu nome de usu\xE1rio preferido","Enter your username":"Digite seu nome de usu\xE1rio","Forgot password?":"Esqueceu a senha?","Forgot your password?":"Esqueceu sua senha?","Hide password":"Esconder a senha","It may take a minute to arrive":"Pode levar um minuto para chegar",Loading:"Carregando","New password":"Nova Senha",or:"ou",Password:"Senha","Phone Number":"N\xFAmero de telefone","Please confirm your Password":"Por favor confirme sua Senha","Resend Code":"Reenviar c\xF3digo","Reset your password":"Redefina sua senha","Reset your Password":"Redefina sua senha","Send code":"Enviar c\xF3digo","Send Code":"Enviar c\xF3digo",Sending:"Enviando","Setup TOTP":"Configurar TOTP","Show password":"Mostrar senha","Sign in to your account":"Fa\xE7a login em sua conta","Sign In with Amazon":"Entrar com a Amazon","Sign In with Apple":"Entrar com a Apple","Sign In with Facebook":"Entrar com o Facebook","Sign In with Google":"Fa\xE7a login no Google","Sign in":"Entrar","Sign In":"Entrar","Signing in":"Entrando",Skip:"Pular",Submit:"Enviar",Submitting:"Enviando",Username:"Nome do usu\xE1rio","Verify Contact":"Verificar contato",Verify:"Verificar","We Emailed You":"Enviamos um e-mail para voc\xEA","We Sent A Code":"Enviamos um c\xF3digo","We Texted You":"Enviamos um SMS para voc\xEA","Your code is on the way. To log in, enter the code we emailed to":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo para o qual enviamos um e-mail","Your code is on the way. To log in, enter the code we sent you":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo que enviamos para voc\xEA","Your code is on the way. To log in, enter the code we texted to":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo para o qual enviamos uma mensagem de texto","An account with the given email already exists.":"J\xE1 existe uma conta com o email utilizado.","Confirm a Code":"Confirmar um C\xF3digo","Confirm Sign In":"Confirmar In\xEDcio de Sess\xE3o","Forgot Password":"Esqueci Minha Senha","Incorrect username or password.":"Nome de usu\xE1rio ou senha incorreta","Invalid password format":"Formato de senha inv\xE1lido","Invalid phone number format":"Formato de n\xFAmero de telefone inv\xE1lido","Loading...":"Carregando...","New Password":"Nova Senha","Resend a Code":"Reenviar um C\xF3digo","Sign Out":"Sair","Sign Up with Amazon":"Criar Conta com a Amazon","Sign Up with Apple":"Criar Conta com a Apple","Sign Up with Facebook":"Criar Conta com o Facebook","Sign Up with Google":"Criar Conta com o Google","Sign Up":"Criar Conta","User already exists":"Usu\xE1rio j\xE1 existe","User does not exist":"Usu\xE1rio n\xE3o existe","Username cannot be empty":"Nome de usu\xE1rio n\xE3o pode estar vazio","Your passwords must match":"Suas senhas devem ser iguais"};var I3={"Account recovery requires verified contact information":"\u8D26\u6237\u6062\u590D\u9700\u8981\u9A8C\u8BC1\u8FC7\u7684\u8054\u7CFB\u65B9\u5F0F","Back to Sign In":"\u56DE\u5230\u767B\u5F55","Change Password":"\u66F4\u6539\u5BC6\u7801",Changing:"\u6B63\u5728\u4FEE\u6539",Code:"\u786E\u8BA4\u7801","Confirm Password":"\u786E\u8BA4\u5BC6\u7801","Confirm Sign Up":"\u786E\u8BA4\u6CE8\u518C","Confirm SMS Code":"\u786E\u8BA4\u77ED\u4FE1\u9A8C\u8BC1\u7801","Confirm TOTP Code":"\u786E\u8BA4 TOTP \u4EE3\u7801",Confirm:"\u786E\u8BA4","Confirmation Code":"\u786E\u8BA4\u7801",Confirming:"\u6B63\u5728\u786E\u8BA4","Create a new account":"\u521B\u5EFA\u65B0\u8D26\u6237","Create Account":"\u521B\u5EFA\u8D26\u6237","Creating Account":"\u6B63\u5728\u521B\u5EFA\u8D26\u6237","Dismiss alert":"\u5173\u95ED\u8B66\u62A5",Email:"\u90AE\u7BB1","Enter your code":"\u8F93\u5165\u9A8C\u8BC1\u7801","Enter your Email":"\u8F93\u5165\u7535\u5B50\u90AE\u4EF6","Enter your phone number":"\u8F93\u5165\u7535\u8BDD\u53F7\u7801","Enter your username":"\u8F93\u5165\u7528\u6237\u540D","Forgot your password?":"\u5FD8\u8BB0\u5BC6\u7801\u4E86\uFF1F","Hide password":"\u9690\u85CF\u5BC6\u7801","It may take a minute to arrive":"\u53EF\u80FD\u9700\u8981\u4E00\u5206\u949F\u624D\u80FD\u5230\u8FBE",Loading:"\u6B63\u5728\u52A0\u8F7D","New password":"\u65B0\u5BC6\u7801",or:"\u6216\u8005",Password:"\u5BC6\u7801","Phone Number":"\u7535\u8BDD","Resend Code":"\u91CD\u53D1\u9A8C\u8BC1\u7801","Reset your password":"\u91CD\u7F6E\u5BC6\u7801","Reset your Password":"\u91CD\u7F6E\u5BC6\u7801","Send Code":"\u53D1\u9001\u786E\u8BA4\u7801","Send code":"\u53D1\u9001\u9A8C\u8BC1\u7801",Sending:"\u6B63\u5728\u53D1\u9001","Setup TOTP":"\u8BBE\u7F6E TOTP","Show password":"\u663E\u793A\u5BC6\u7801","Sign in to your account":"\u767B\u5F55\u8D26\u6237","Sign In with Amazon":"\u901A\u8FC7 Amazon \u767B\u5F55","Sign In with Apple":"\u901A\u8FC7 Apple \u767B\u5F55","Sign In with Facebook":"\u901A\u8FC7 Facebook \u767B\u5F55","Sign In with Google":"\u901A\u8FC7 Google \u767B\u5F55","Sign in":"\u767B\u5F55","Sign In":"\u767B\u5F55","Signing in":"\u6B63\u5728\u767B\u5F55",Skip:"\u8DF3\u8FC7",Submit:"\u63D0\u4EA4",Submitting:"\u6B63\u5728\u63D0\u4EA4",Username:"\u7528\u6237\u540D","Verify Contact":"\u9A8C\u8BC1\u8054\u7CFB\u65B9\u5F0F",Verify:"\u9A8C\u8BC1","We Emailed You":"\u6211\u4EEC\u7ED9\u60A8\u53D1\u9001\u4E86\u7535\u5B50\u90AE\u4EF6","We Sent A Code":"\u6211\u4EEC\u53D1\u9001\u4E86\u4EE3\u7801","We Texted You":"\u6211\u4EEC\u7ED9\u60A8\u53D1\u9001\u4E86\u77ED\u4FE1","Your code is on the way. To log in, enter the code we emailed to":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u901A\u8FC7\u7535\u5B50\u90AE\u4EF6\u53D1\u9001\u7ED9\u4EE5\u4E0B\u4EBA\u5458\u7684\u4EE3\u7801\uFF1A","Your code is on the way. To log in, enter the code we sent you":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u53D1\u9001\u7ED9\u60A8\u7684\u4EE3\u7801","Your code is on the way. To log in, enter the code we texted to":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u901A\u8FC7\u77ED\u4FE1\u53D1\u9001\u7ED9\u4EE5\u4E0B\u4EBA\u5458\u7684\u4EE3\u7801\uFF1A","Confirm a Code":"\u786E\u8BA4\u7801","Confirm Sign In":"\u786E\u8BA4\u767B\u5F55","Forgot Password":"\u5FD8\u8BB0\u5BC6\u7801","Incorrect username or password":"\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF","Invalid password format":"\u5BC6\u7801\u683C\u5F0F\u9519\u8BEF","Invalid phone number format":"\u7535\u8BDD\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u4F7F\u7528\u683C\u5F0F +12345678900","New Password":"\u65B0\u5BC6\u7801","Resend a Code":"\u91CD\u53D1\u786E\u8BA4\u7801","Sign Out":"\u9000\u51FA","Sign Up":"\u6CE8\u518C","User already exists":"\u7528\u6237\u5DF2\u7ECF\u5B58\u5728","User does not exist":"\u7528\u6237\u4E0D\u5B58\u5728"};var D3={"Account recovery requires verified contact information":"F\xF6r att \xE5terst\xE4lla kontot beh\xF6ver du ett verifierat konto","Back to Sign In":"Tillbaka till inloggningen","Change Password":"Byt l\xF6senord",Changing:"\xC4ndra",Code:"Kod","Confirm Password":"Bekr\xE4fta l\xF6senord","Confirm Sign Up":"Bekr\xE4fta registrering","Confirm SMS Code":"Bekr\xE4fta SMS-kod","Confirm TOTP Code":"Bekr\xE4fta TOTP-kod",Confirm:"Bekr\xE4fta","Confirmation Code":"Verifikationskod",Confirming:"Bekr\xE4ftar","Create a new account":"Skapa ett nytt konto","Create Account":"Skapa konto","Creating Account":"Skapar konto","Dismiss alert":"Avvisa varning",Email:"E-post","Enter your code":"Skriv din kod","Enter your Email":"Fyll i din e-post","Enter your phone number":"Ange ditt telefonnummer","Enter your username":"Ange ditt anv\xE4ndarnamn","Forgot your password?":"Gl\xF6mt ditt l\xF6senord? ","Hide password":"D\xF6lj l\xF6senord","It may take a minute to arrive":"Det kan ta en minut att komma fram",Loading:"Laddar","New password":"Nytt l\xF6senord",or:"eller",Password:"L\xF6senord","Phone Number":"Telefonnummer","Resend Code":"Skicka koden igen","Reset your password":"\xC5terst\xE4ll ditt l\xF6senord","Reset your Password":"\xC5terst\xE4ll ditt l\xF6senord","Send code":"Skicka kod","Send Code":"Skicka kod",Sending:"Skickar","Setup TOTP":"Konfigurera TOTP","Show password":"Visa l\xF6senord","Sign in to your account":"Logga in till ditt konto","Sign In with Amazon":"Logga in med Amazon","Sign In with Apple":"Logga in med Apple","Sign In with Facebook":"Logga in med Facebook","Sign In with Google":"Logga in med Google","Sign in":"Logga in","Sign In":"Logga in","Signing in":"Loggar in",Skip:"Hoppa \xF6ver",Submit:"Skicka",Submitting:"Skickar in",Username:"Anv\xE4ndarnamn","Verify Contact":"Verifiera kontakt",Verify:"Verifiera","We Sent A Code":"Vi skickade en kod","We Texted You":"Vi sms:ade dig","Your code is on the way. To log in, enter the code we emailed to":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi mejlade till","Your code is on the way. To log in, enter the code we sent you":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi skickade till dig","Your code is on the way. To log in, enter the code we texted to":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi sms:ade till","An account with the given email already exists.":"Det finns redan ett konto med denna e-postadress","Confirm a Code":"Bekr\xE4fta koden","Confirm Sign In":"Bekr\xE4fta inloggning","Create account":"Skapa konto","Enter your password":"Ange ditt l\xF6senord","Forgot Password":"Gl\xF6mt l\xF6senordet","Have an account? ":"Redan registrerad? ","Incorrect username or password":"Felaktigt anv\xE4ndarnamn eller l\xF6senord","Invalid password format":"Ogiltigt l\xF6senordsformat","Invalid phone number format":"Ogiltigt format f\xF6r telefonnummer","Lost your code? ":"F\xF6rlorat koden? ","New Password":"Nytt l\xF6senord","No account? ":"Inget konto? ","Password attempts exceeded":"Maximalt antal felaktiga inloggningsf\xF6rs\xF6k har uppn\xE5tts","Reset password":"\xC5terst\xE4ll l\xF6senord","Sign Out":"Logga ut","Sign Up":"Registrering","User already exists":"Anv\xE4ndaren finns redan","User does not exist":"Anv\xE4ndaren finns inte","Username cannot be empty":"Anv\xE4ndarnamnet kan inte vara tomt","We Emailed You":"Vi har skickat e-post till dig"};var T3={"Account recovery requires verified contact information":"Pemulihan akun memerlukan informasi kontak terverifikasi","Back to Sign In":"Kembali ke Masuk","Change Password":"Ubah kata sandi",Changing:"Mengubah",Code:"Kode","Confirm Password":"Konfirmasi kata sandi","Confirm Sign Up":"Konfirmasi Pendaftaran","Confirm SMS Code":"Konfirmasi Kode SMS","Confirm TOTP Code":"Konfirmasi Kode TOTP",Confirm:"Konfirmasi","Confirmation Code":"Kode Konfirmasi",Confirming:"Mengkonfirmasi","Create a new account":"Buat akun baru","Create Account":"Buat Akun","Creating Account":"Membuat Akun","Dismiss alert":"Hentikan pemberitahuan",Email:"Email","Enter your code":"Masukkan kode anda","Enter your Email":"Masukkan email anda","Enter your phone number":"Masukkan nomor telepon anda","Enter your username":"Masukkan nama akun anda","Forgot your password?":"Lupa kata sandi? ","Hide password":"Sembunyikan kata sandi","It may take a minute to arrive":"Mungkin perlu waktu satu menit untuk tiba",Loading:"Memuat","New password":"Kata sandi baru",or:"atau",Password:"Kata sandi","Phone Number":"Nomor telepon","Resend Code":"Kirim ulang kodenya","Reset your Password":"Reset Kata Sandi","Reset your password":"Ubah kata sandi anda","Send code":"Kirim kode","Send Code":"Kirim Kode",Sending:"Mengirim","Setup TOTP":"Siapkan TOTP","Show password":"Tampilkan kata sandi","Sign in to your account":"Masuk akun anda","Sign In with Amazon":"Masuk dengan Amazon","Sign In with Apple":"Masuk dengan Apple","Sign In with Facebook":"Masuk dengan Facebook","Sign In with Google":"Masuk dengan Google","Sign in":"Masuk","Sign In":"Masuk","Signing in":"Memasuki",Skip:"Lewati",Submit:"Ajukan",Submitting:"Mengajukan",Username:"Nama akun","Verify Contact":"Verifikasi Kontak",Verify:"Verifikasi","We Sent A Code":"Kami Mengirim Kode","We Texted You":"Kami mengirim SMS kepada Anda","Your code is on the way. To log in, enter the code we sent you":"Kode Anda segera hadir. Untuk masuk, masukkan kode yang kami kirimkan kepada Anda","An account with the given email already exists.":"Akun dengan email tersebut sudah terdaftar.","Attempt limit exceeded, please try after some time.":"Batas percobaan terlampaui, mohon coba lagi setelah beberapa waktu.","Cannot reset password for the user as there is no registered/verified email or phone_number":"Tidak dapat mengatur ulang kata sandi karena tidak ada email terdaftar / terverifikasi atau nomor telepon",Change:"Ubah","Confirm a Code":"Konfirmasi kode","Create account":"Buat akun","Enter your password":"Masukkan kata sandi anda","Forgot Password":"Lupa kata sandi","Have an account? ":"Sudah punya akun? ",Hello:"Halo","Incorrect username or password.":"Nama akun atau kata sandi salah.","Invalid phone number format":"Nomor telepon tidak sesuai dengan format.","Invalid verification code provided, please try again.":"Kode verifikasi tidak sesuai, mohon coba lagi.","It may take a minute to arrive.":"Mungkin perlu beberapa waktu untuk tiba.","Lost your code? ":"Kode anda hilang?",Name:"Nama","Network error":"Galat jaringan","No account? ":"Tidak ada akun?","Password did not conform with policy: Password not long enough":"Kata sandi tidak sesuai dengan aturan: Kata sandi kurang panjang","Resend a Code":"Renvoyer un code","Reset password":"Ubah kata sandi anda",Send:"Kirim","Sign In with AWS":"Masuk dengan AWS","Sign Up with Amazon":"Daftar dengan Amazon","Sign Up with AWS":"Daftar dengan AWS","Sign Up with Facebook":"Daftar dengan Facebook","Sign Up with Google":"Daftar dengan Google",SMS:"SMS","User already exists":"Akun sudah terdaftar","User does not exist.":"Akun tidak terdaftar.","User is disabled.":"Akun dinonaktifkan.","Username cannot be empty":"Nama akun tidak boleh kosong","Username/client id combination not found.":"Nama akun atau id tidak ditemukan.","We Emailed You":"Kami mengirimkanmu email","Your code is on the way. To log in, enter the code we emailed to":"Kode anda dalam pengiriman. Untuk masuk, masukkan kode yang kami emailkan ke","Your code is on the way. To log in, enter the code we texted to":"Kode anda dalam pengiriman. Untuk masuk, masukkan kode yang kami tuliskan ke","Your passwords must match":"Kata sandi harus sama"};var A3={"Account recovery requires verified contact information":"Hesap kurtarma, do\u011Frulanm\u0131\u015F ileti\u015Fim bilgilerini gerektirir","Add your Profile":"Profilinizi ekleyin","Add your Website":"Web sitenizi ekleyin","Back to Sign In":"Oturum A\xE7maya Geri D\xF6n","Change Password":"\u015Eifreyi De\u011Fi\u015Ftir",Changing:"De\u011Fi\u015Ftiriliyor",Code:"Kod","Confirm Password":"\u015Eifreyi Do\u011Frula","Confirm Sign Up":"Kay\u0131t \u0130\u015Flemini Do\u011Frula","Confirm SMS Code":"SMS Kodunu Do\u011Frula","Confirm MFA Code":"\xC7oklu Fakt\xF6rl\xFC Do\u011Frulama Kodunu Do\u011Frula","Confirm TOTP Code":"Tek Kullan\u0131ml\u0131k \u015Eifreyi Do\u011Frula",Confirm:"Do\u011Frula","Confirmation Code":"Do\u011Frulama Kodu",Confirming:"Do\u011Frulan\u0131yor","Create a new account":"Yeni bir hesap olu\u015Ftur","Create Account":"Hesap Olu\u015Ftur","Creating Account":"Hesap Olu\u015Fturuluyor","Dismiss alert":"Uyar\u0131y\u0131 reddet",Email:"E-posta","Enter your Birthdate":"Do\u011Fum g\xFCn\xFCn\xFCz\xFC girin","Enter your code":"Kodu girin","Enter your Confirmation Code":"Do\u011Frulama Kodunuzu Girin","Enter your Email":"E-posta adresinizi girin","Enter your email":"E-posta adresinizi girin","Enter your Family Name":"Ad Soyad\u0131n\u0131z\u0131 girin","Enter your Given Name":"Ad\u0131n\u0131z\u0131 girin","Enter your Middle Name":"Soyad\u0131n\u0131z\u0131 girin","Enter your Name":"Ad\u0131n\u0131z\u0131 girin","Enter your Nickname":"Takma ad\u0131n\u0131z\u0131 girin","Enter your Password":"\u015Eifrenizi girin","Enter your phone number":"Telefon numaran\u0131z\u0131 girin","Enter your Preferred Username":"Tercih etti\u011Finiz kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin","Enter your username":"Kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin","Forgot Password?":"\u015Eifrenizi Mi Unuttunuz?","Forgot password?":"\u015Eifrenizi mi unuttunuz?","Forgot your password?":"\u015Eifrenizi mi unuttunuz?","Hide password":"\u015Eifreyi gizle","It may take a minute to arrive":"Kodun gelmesi bir dakika s\xFCrebilir",Loading:"Y\xFCkleniyor","New password":"Yeni \u015Fifre",or:"veya",Password:"\u015Eifre","Phone Number":"Telefon Numaras\u0131","Please confirm your Password":"L\xFCtfen \u015Fifrenizi do\u011Frulay\u0131n","Resend Code":"Kodu Yeniden G\xF6nder","Reset your password":"\u015Eifrenizi s\u0131f\u0131rlay\u0131n","Reset your Password":"\u015Eifrenizi S\u0131f\u0131rlay\u0131n","Reset Password":"\u015Eifreyi S\u0131f\u0131rla","Send code":"Kod g\xF6nder","Send Code":"Kod G\xF6nder",Sending:"G\xF6nderiliyor","Setup TOTP":"Tek kullan\u0131ml\u0131k \u015Fifre kurulumu yap","Show password":"\u015Eifreyi g\xF6ster","Sign in to your account":"Hesab\u0131n\u0131zda oturum a\xE7\u0131n","Sign In with Amazon":"Amazon ile Oturum A\xE7","Sign In with Apple":"Apple ile Oturum A\xE7","Sign In with Facebook":"Facebook ile Oturum A\xE7","Sign In with Google":"Google ile Oturum A\xE7","Sign in":"Oturum a\xE7","Sign In":"Oturum A\xE7","Sign Up with Facebook":"Facebook ile Kay\u0131t Ol","Sign Up with Google":"Google ile Kay\u0131t Ol","Signing in":"Oturum a\xE7\u0131l\u0131yor",Skip:"Atla",Submit:"G\xF6nder",Submitting:"G\xF6nderiliyor",Username:"Kullan\u0131c\u0131 ad\u0131","Verify Contact":"Ki\u015Fiyi Do\u011Frula",Verify:"Do\u011Frula","We Emailed You":"Size E-posta G\xF6nderdik","We Sent A Code":"Bir Kod G\xF6nderdik","We Texted You":"Size Mesaj G\xF6nderdik","Your code is on the way. To log in, enter the code we emailed to":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, g\xF6nderdi\u011Fimiz e-postadaki kodu girin","Your code is on the way. To log in, enter the code we sent you":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, size g\xF6nderdi\u011Fimiz kodu girin","Your code is on the way. To log in, enter the code we texted to":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, g\xF6nderdi\u011Fimiz mesajdaki kodu girin","An account with the given email already exists.":"Bu e-postaya ait zaten bir hesap var.","Confirm Sign In":"Oturum A\xE7may\u0131 Do\u011Frula","Have an account? ":"Hesab\u0131n\u0131z var m\u0131? ","Incorrect username or password":"Yanl\u0131\u015F kullan\u0131c\u0131 ad\u0131 ya da \u015Fifre","Invalid password format":"Ge\xE7ersiz parola format\u0131","Invalid phone number format":"Ge\xE7ersiz telefon numaras\u0131 format\u0131","Lost your code? ":"Kodu mu kaybettiniz? ","No account? ":"Hesab\u0131n\u0131z yok mu? ","Password attempts exceeded":"Maksimum oturum a\xE7ma giri\u015Fimi a\u015F\u0131ld\u0131","Sign Out":"\xC7\u0131k\u0131\u015F yap","Sign Up":"Kay\u0131t Ol","User already exists":"Bu kullan\u0131c\u0131 zaten var","User does not exist":"B\xF6yle bir kullan\u0131c\u0131 mevcut de\u011Fil","Username cannot be empty":"Kullan\u0131c\u0131 ad\u0131 bo\u015F olamaz"};var M3={"Account recovery requires verified contact information":"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0447\u0435\u0442\u043D\u043E\u0439 \u0437\u0430\u043F\u0438\u0441\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u043E\u0439 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438","Back to Sign In":"\u041D\u0430\u0437\u0430\u0434, \u0447\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438","Change Password":"\u0438\u0437\u043C\u0435\u043D\u044F\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",Changing:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435",Code:"\u041A\u043E\u0434","Confirm Password":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F","Confirm Sign Up":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F","Confirm SMS Code":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 CMC-\u041A\u043E\u0434","Confirm TOTP Code":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 TOTP-\u041A\u043E\u0434",Confirm:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0442\u044C","Confirmation Code":"\u043A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F",Confirming:"\u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435","Create a new account":"\u0421\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C","Create Account":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C","Creating Account":"\u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0443\u0447\u0435\u0442\u043D\u0430\u044F \u0437\u0430\u043F\u0438\u0441\u044C","Dismiss alert":"\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u043E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u0435",Email:"\u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430","Enter your code":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u041A\u043E\u0434","Enter your Email":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430","Enter your phone number":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","Enter your username":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F","Forgot your password?":"\u0417\u0430\u0431\u044B\u043B\u0438 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C?","Hide password":"\u0421\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","It may take a minute to arrive":"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430 \u043C\u043E\u0436\u0435\u0442 \u0437\u0430\u043D\u044F\u0442\u044C \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u0432\u0440\u0435\u043C\u044F",Loading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430","New password":"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",or:"\u0438\u043B\u0438",Password:"\u041F\u0430\u0440\u043E\u043B\u044C","Phone Number":"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","Resend Code":"\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u0435\u0449\u0435 \u0440\u0430\u0437 \u041A\u043E\u0434","Reset your password":"\u0441\u0431\u0440\u043E\u0441 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C","Reset your Password":"\u0441\u0431\u0440\u043E\u0441 \u0432\u0430\u0448 \u041F\u0430\u0440\u043E\u043B\u044C","Send code":"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u041A\u043E\u0434","Send Code":"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u041A\u043E\u0434",Sending:"\u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0430","Setup TOTP":"\u041D\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044C TOTP","Show password":"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","Sign in to your account":"\u0437\u043D\u0430\u043A \u0432 \u0441\u0432\u043E\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442","Sign In with Amazon":"\u0437\u043D\u0430\u043A \u0432 \u0441 Amazon","Sign In with Apple":"\u0437\u043D\u0430\u043A \u0432 \u0441 Apple","Sign In with Facebook":"\u0437\u043D\u0430\u043A \u0432 \u0441 Facebook","Sign In with Google":"\u0437\u043D\u0430\u043A \u0432 \u0441 Google","Sign in":"\u0437\u043D\u0430\u043A \u0432","Sign In":"\u0437\u043D\u0430\u043A \u0432","Signing in":"\u043F\u043E\u0434\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432",Skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u0442\u044C",Submit:"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0442\u044C \u043D\u0430 \u0440\u0430\u0441\u0441\u043C\u043E\u0442\u0440\u0435\u043D\u0438\u0435",Submitting:"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0432",Username:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F","Verify Contact":"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043A\u043E\u043D\u0442\u0430\u043A\u0442",Verify:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C","We Emailed You":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u043E","We Sent A Code":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043A\u043E\u0434","We Texted You":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435","Your code is on the way. To log in, enter the code we emailed to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043F\u043E \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0439 \u043F\u043E\u0447\u0442\u0435","Your code is on the way. To log in, enter the code we sent you":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043F\u043E\u0441\u043B\u0430\u043B\u0438 \u0432\u0430\u043C","Your code is on the way. To log in, enter the code we texted to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u043C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C"};var P3={"Account recovery requires verified contact information":"\u05E9\u05D7\u05D6\u05D5\u05E8 \u05DC\u05E7\u05D5\u05D7 \u05D3\u05D5\u05E8\u05E9 \u05E2\u05D5\u05D3 \u05DE\u05D9\u05D3\u05E2","Back to Sign In":"\u05D7\u05D6\u05D5\u05E8 \u05DC\u05D4\u05E8\u05E9\u05DE\u05D4","Change Password":"\u05E2\u05D3\u05DB\u05D5\u05DF \u05E1\u05D9\u05E1\u05DE\u05D0",Changing:"\u05DE\u05E2\u05D3\u05DB\u05DF",Code:"\u05E7\u05D5\u05D3","Confirm Password":"\u05D0\u05E9\u05E8 \u05E1\u05D9\u05E1\u05DE\u05D0","Confirm Sign Up":"\u05D0\u05E9\u05E8 \u05D4\u05E8\u05E9\u05DE\u05D4","Confirm SMS Code":"\u05D0\u05E9\u05E8 sms \u05E7\u05D5\u05D3","Confirm TOTP Code":"\u05D0\u05E9\u05E8 totp \u05E7\u05D5\u05D3",Confirm:"\u05D0\u05D9\u05E9\u05D5\u05E8","Confirmation Code":"\u05D0\u05D9\u05E9\u05D5\u05E8 \u05E7\u05D5\u05D3",Confirming:"\u05DE\u05D0\u05E9\u05E8","Create a new account":"\u05E6\u05D5\u05E8 \u05DE\u05E9\u05EA\u05DE\u05E9 \u05D7\u05D3\u05E9","Create Account":"\u05E6\u05D5\u05E8 \u05DE\u05E9\u05EA\u05DE\u05E9","Creating Account":"\u05D9\u05E6\u05D9\u05E8\u05EA \u05DE\u05E9\u05EA\u05DE\u05E9","Dismiss alert":"\u05D4\u05E1\u05E8 \u05D4\u05EA\u05E8\u05D0\u05D4",Email:"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC","Enter your code":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05D4\u05E7\u05D5\u05D3","Enter your Email":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05D4\u05DE\u05D9\u05D9\u05DC \u05E9\u05DC\u05DA","Enter your phone number":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05DE\u05E1\u05E4\u05E8 \u05D4\u05D8\u05DC\u05E4\u05D5\u05DF \u05E9\u05DC\u05DA","Enter your username":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05E9\u05DD \u05D4\u05DE\u05EA\u05DE\u05E9 \u05E9\u05DC\u05DA","Forgot your password?":"\u05E9\u05DB\u05D7\u05EA \u05E1\u05D9\u05E1\u05DE\u05D0 ?","Hide password":"\u05D4\u05E1\u05EA\u05E8 \u05E1\u05D9\u05E1\u05DE\u05D0",Loading:"\u05D8\u05D5\u05E2\u05DF","New password":"\u05E1\u05D9\u05E1\u05DE\u05D0 \u05D7\u05D3\u05E9\u05D4",or:"\u05D0\u05D5\u05B9",Password:"\u05E1\u05D9\u05E1\u05DE\u05D0","Phone Number":"\u05DE\u05E1\u05E4\u05E8 \u05D8\u05DC\u05E4\u05D5\u05DF","Resend Code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3 \u05E9\u05D5\u05D1","Reset your password":"\u05D0\u05E4\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0","Reset your Password":"\u05D0\u05E4\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0","Send code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3","Send Code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3",Sending:"\u05E9\u05D5\u05DC\u05D7","Setup TOTP":"Setup TOTP","Show password":"\u05D4\u05E6\u05D2 \u05E1\u05D9\u05E1\u05DE\u05D0","Sign in to your account":"\u05D4\u05EA\u05D7\u05D1\u05E8 \u05DC\u05D7\u05E9\u05D1\u05D5\u05DF \u05E9\u05DC\u05DA","Sign In with Amazon":"Sign In with Amazon","Sign In with Apple":"Sign In with Apple","Sign In with Facebook":"Sign In with Facebook","Sign In with Google":"Sign In with Google","Sign in":"\u05D4\u05EA\u05D7\u05D1\u05E8","Sign In":"\u05D4\u05EA\u05D7\u05D1\u05E8","Signing in":"\u05DE\u05EA\u05D7\u05D1\u05E8",Skip:"\u05D3\u05DC\u05D2",Submit:"\u05E9\u05DC\u05D7",Submitting:"\u05E9\u05D5\u05DC\u05D7",Username:"\u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9","Verify Contact":"\u05D0\u05DE\u05EA \u05D0\u05D9\u05E9 \u05E7\u05E9\u05E8",Verify:"\u05D0\u05DE\u05EA"};var R3={"Account recovery requires verified contact information":"\u0412\u0456\u0434\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F \u043E\u0431\u043B\u0456\u043A\u043E\u0432\u043E\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0443 \u043F\u043E\u0442\u0440\u0435\u0431\u0443\u0454 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u043E\u0457 \u0456\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0456\u0457","Back to Sign In":"\u041D\u0430\u0437\u0430\u0434 \u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443 \u0432\u0445\u043E\u0434\u0443","Change Password":"\u0417\u043C\u0456\u043D\u0438\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C",Changing:"\u0417\u043C\u0456\u043D\u044E\u0454\u043C\u043E",Code:"\u041A\u043E\u0434","Confirm Password":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","Confirm Sign Up":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044E","Confirm SMS Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C SMS \u043A\u043E\u0434","Confirm TOTP Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C TOTP \u043A\u043E\u0434",Confirm:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438","Confirmation Code":"\u041A\u043E\u0434 \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F",Confirming:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0443\u0454\u043C\u043E","Create a new account":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","Create Account":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","Creating Account":"\u0420\u0435\u0454\u0441\u0442\u0440\u0443\u0454\u043C\u043E","Dismiss alert":"\u0412\u0456\u0434\u0445\u0438\u043B\u0438\u0442\u0438 \u0441\u043F\u043E\u0432\u0456\u0449\u0435\u043D\u043D\u044F",Email:"Email","Enter your code":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434","Enter your Email":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 email","Enter your phone number":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Enter your username":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448\u0435 \u0456\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","Forgot password?":"\u0417\u0430\u0431\u0443\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?","Forgot your password?":"\u0417\u0430\u0431\u0443\u043B\u0438 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C?","Hide password":"\u0421\u0445\u043E\u0432\u0430\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","It may take a minute to arrive":"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430 \u043C\u043E\u0436\u0435 \u0442\u0440\u0438\u0432\u0430\u0442\u0438 \u0445\u0432\u0438\u043B\u0438\u043D\u0443",Loading:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0454\u043C\u043E","New password":"\u041D\u043E\u0432\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",or:"\u0430\u0431\u043E",Password:"\u041F\u0430\u0440\u043E\u043B\u044C","Phone Number":"\u041D\u043E\u043C\u0435\u0440 \u0422\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Resend Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E","Reset your password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Reset your Password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Send code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434","Send Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434",Sending:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u044F\u0454\u043C\u043E","Setup TOTP":"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u0442\u0438 TOTP","Show password":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Sign in to your account":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0443 \u0432\u0430\u0448 \u043E\u0431\u043B\u0456\u043A\u043E\u0432\u0438\u0439 \u0437\u0430\u043F\u0438\u0441","Sign In with Amazon":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Amazon","Sign In with Apple":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Apple","Sign In with Facebook":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Facebook","Sign In with Google":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Google","Sign in":"\u0423\u0432\u0456\u0439\u0442\u0438","Sign In":"\u0423\u0432\u0456\u0439\u0442\u0438","Signing in":"\u0412\u0445\u043E\u0434\u0438\u043C\u043E",Skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438",Submit:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438",Submitting:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u044F\u0454\u043C\u043E",Username:"\u0406\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","Verify Contact":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u041A\u043E\u043D\u0442\u0430\u043A\u0442",Verify:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438","We Emailed You":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C Email","We Sent A Code":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043A\u043E\u0434","We Texted You":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u0435 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","Your code is on the way. To log in, enter the code we emailed to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u043D\u0430 Email","Your code is on the way. To log in, enter the code we sent you":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0430\u043C \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438","Your code is on the way. To log in, enter the code we texted to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u0438\u043C \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F\u043C","An account with the given email already exists.":"\u041E\u0431\u043B\u0456\u043A\u043E\u0432\u0438\u0439 \u0437\u0430\u043F\u0438\u0441 \u0437 \u0446\u0438\u043C Email \u0432\u0436\u0435 \u0456\u0441\u043D\u0443\u0454.","Confirm a Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u043A\u043E\u0434","Confirm Sign In":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u0432\u0445\u0456\u0434","Forgot Password":"\u0417\u0430\u0431\u0443\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Incorrect username or password.":"\u041D\u0435\u0432\u0456\u0440\u043D\u0435 \u0456\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0430\u0431\u043E \u043F\u0430\u0440\u043E\u043B\u044C","Invalid password format":"\u041D\u0435\u0432\u0456\u0440\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043F\u0430\u0440\u043E\u043B\u044E","Invalid phone number format":"\u041D\u0435\u0432\u0456\u0440\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u043E\u043C\u0435\u0440\u0443 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Loading...":"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0454\u043C\u043E...","New Password":"\u041D\u043E\u0432\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","Resend a Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E","Reset Password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Sign Out":"\u0412\u0438\u0439\u0442\u0438","Sign Up with Amazon":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Amazon","Sign Up with Apple":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Apple","Sign Up with Facebook":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Facebook","Sign Up with Google":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Google","Sign Up":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","User already exists":"\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u0432\u0436\u0435 \u0456\u0441\u043D\u0443\u0454","User does not exist":"\u0422\u0430\u043A\u0438\u0439 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043D\u0435 \u0456\u0441\u043D\u0443\u0454","Username cannot be empty":"\u0406\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043D\u0435 \u043C\u043E\u0436\u0435 \u0431\u0443\u0442\u0438 \u043F\u0443\u0441\u0442\u0438\u043C","Your passwords must match":"\u041F\u0430\u0440\u043E\u043B\u0456 \u043C\u0430\u044E\u0442\u044C \u0437\u0431\u0456\u0433\u0430\u0442\u0438\u0441\u044F"};var O3={"Account recovery requires verified contact information":"\u0E01\u0E32\u0E23\u0E01\u0E39\u0E49\u0E04\u0E37\u0E19\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E41\u0E25\u0E49\u0E27","Add your Profile":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E42\u0E1B\u0E23\u0E44\u0E1F\u0E25\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Add your Website":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Back to Sign In":"\u0E01\u0E25\u0E31\u0E1A\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Change Password":"\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",Changing:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19",Code:"\u0E23\u0E2B\u0E31\u0E2A","Confirm Password":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Please confirm your Password":"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Confirm Sign Up":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19","Confirm SMS Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A SMS","Confirm MFA Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A MFA","Confirm TOTP Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A TOTP",Confirm:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","Confirmation Code":"\u0E23\u0E2B\u0E31\u0E2A\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19",Confirming:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","Create a new account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E43\u0E2B\u0E21\u0E48","Create Account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Creating Account":"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Dismiss alert":"\u0E1B\u0E34\u0E14\u0E01\u0E32\u0E23\u0E41\u0E08\u0E49\u0E07\u0E40\u0E15\u0E37\u0E2D\u0E19",Email:"\u0E2D\u0E35\u0E40\u0E21\u0E25","Enter your Birthdate":"\u0E01\u0E23\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your code":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Confirmation Code":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Email":"\u0E01\u0E23\u0E2D\u0E01\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Family Name":"\u0E01\u0E23\u0E2D\u0E01\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Given Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Middle Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E01\u0E25\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Nickname":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E48\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Password":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your email":"\u0E01\u0E23\u0E2D\u0E01\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your phone number":"\u0E01\u0E23\u0E2D\u0E01\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Preferred Username":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E17\u0E35\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23","Enter your username":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Forgot password?":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19?","Forgot your password?":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?","Hide password":"\u0E0B\u0E48\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","It may take a minute to arrive":"\u0E2D\u0E32\u0E08\u0E43\u0E0A\u0E49\u0E40\u0E27\u0E25\u0E32\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48",Loading:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14","New password":"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E21\u0E48",or:"\u0E2B\u0E23\u0E37\u0E2D",Password:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Phone Number":"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C","Resend Code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07","Reset your Password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Reset your password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Send code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A","Send Code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A",Sending:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E48\u0E07","Setup TOTP":"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32 TOTP","Show password":"\u0E41\u0E2A\u0E14\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Sign in to your account":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Sign In with Amazon":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Amazon","Sign In with Apple":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Apple","Sign In with Facebook":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Facebook","Sign In with Google":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Google","Sign in":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Sign In":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Signing in":"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A",Skip:"\u0E02\u0E49\u0E32\u0E21",Submit:"\u0E2A\u0E48\u0E07",Submitting:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E48\u0E07",Username:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49","Verify Contact":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D",Verify:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","We Emailed You":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E16\u0E36\u0E07\u0E04\u0E38\u0E13\u0E41\u0E25\u0E49\u0E27","We Sent A Code":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E41\u0E25\u0E49\u0E27","We Texted You":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07 SMS \u0E16\u0E36\u0E07\u0E04\u0E38\u0E13\u0E41\u0E25\u0E49\u0E27","Your code is on the way. To log in, enter the code we emailed to":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E2D\u0E35\u0E40\u0E21\u0E25","Your code is on the way. To log in, enter the code we sent you":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E43\u0E2B\u0E49\u0E04\u0E38\u0E13","Your code is on the way. To log in, enter the code we texted to":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07 SMS","An account with the given email already exists.":"\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27","Confirm a Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A","Confirm Sign In":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Create account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Sign Up with Facebook":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Facebook","Sign Up with Google":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Google","Sign Up with Apple":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Apple","Sign Up with Line":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Line","Forgot Password":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Have an account? ":"\u0E21\u0E35\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27? ","Incorrect username or password":"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E2B\u0E23\u0E37\u0E2D\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07","Invalid password format":"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07","It may take a minute to arrive.":"\u0E2D\u0E32\u0E08\u0E43\u0E0A\u0E49\u0E40\u0E27\u0E25\u0E32\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E43\u0E19\u0E01\u0E32\u0E23\u0E21\u0E32\u0E16\u0E36\u0E07","Lost your code? ":"\u0E2B\u0E32\u0E23\u0E2B\u0E31\u0E2A\u0E44\u0E21\u0E48\u0E40\u0E08\u0E2D? ","New Password":"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E21\u0E48","No account? ":"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1A\u0E31\u0E0D\u0E0A\u0E35? ","Password attempts exceeded":"\u0E40\u0E01\u0E34\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15\u0E43\u0E2B\u0E49\u0E43\u0E2A\u0E48\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Reset password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Reset Password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Sign Out":"\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E23\u0E30\u0E1A\u0E1A","Sign Up":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19","User already exists":"\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27","User does not exist":"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49","Username cannot be empty":"\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E2A\u0E48\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"};var k3={ADD_PROFILE:"Add your Profile",ADD_WEBSITE:"Add your Website",BACK_SIGN_IN:"Back to Sign In",BIRTHDATE:"Birthdate",CHANGE_PASSWORD:"Change Password",CHANGING_PASSWORD:"Changing",CODE:"Code",CODE_ARRIVAL:"It may take a minute to arrive",CODE_EMAILED:"Your code is on the way. To log in, enter the code we emailed to",CODE_SENT:"Your code is on the way. To log in, enter the code we sent you",CODE_TEXTED:"Your code is on the way. To log in, enter the code we texted to",CONFIRM_PASSWORD:"Confirm Password",CONFIRM_PASSWORD_PLACEHOLDER:"Please confirm your Password",CONFIRM_RESET_PASSWORD_HEADING:"Reset your Password",CONFIRM_SIGNUP_HEADING:"Confirm Sign Up",CONFIRM_SMS:"Confirm SMS Code",CONFIRM_MFA_DEFAULT:"Confirm MFA Code",CONFIRM_TOTP:"Confirm TOTP Code",CONFIRM:"Confirm",CONFIRMATION_CODE:"Confirmation Code",CONFIRMING:"Confirming",CREATE_ACCOUNT:"Create Account",CREATING_ACCOUNT:"Creating Account",EMAIL_ADDRESS:"Email",ENTER_BIRTHDATE:"Enter your Birthdate",ENTER_CODE:"Enter your code",ENTER_CONFIRMATION_CODE:"Enter your Confirmation Code",ENTER_EMAIL:"Enter your Email",ENTER_FAMILY_NAME:"Enter your Family Name",ENTER_GIVEN_NAME:"Enter your Given Name",ENTER_MIDDLE_NAME:"Enter your Middle Name",ENTER_NAME:"Enter your Name",ENTER_NICK_NAME:"Enter your Nickname",ENTER_PASSWORD:"Enter your Password",ENTER_PHONE_NUMBER:"Enter your Phone Number",ENTER_PREFERRED_USERNAME:"Enter your Preferred Username",ENTER_USERNAME:"Enter your username",FAMILY_NAME:"Family Name",GIVEN_NAME:"Given Name",FORGOT_PASSWORD:"Forgot Password?",FORGOT_YOUR_PASSWORD:"Forgot your password?",HIDE_PASSWORD:"Hide password",LOADING:"Loading",LOGIN_NAME:"Username",MIDDLE_NAME:"Middle Name",NAME:"Name",NICKNAME:"Nickname",NEW_PASSWORD:"New password",OR:"or",PASSWORD:"Password",PHONE_NUMBER:"Phone Number",PREFERRED_USERNAME:"Preferred Username",PROFILE:"Profile",RESEND_CODE:"Resend Code",RESET_PASSWORD_HEADING:"Reset your password",RESET_PASSWORD:"Reset Password",SEND_CODE:"Send code",SENDING:"Sending",SETUP_TOTP:"Setup TOTP",SHOW_PASSWORD:"Show password",SIGN_IN_BUTTON:"Sign in",SIGN_IN_TAB:"Sign In",SIGN_IN_WITH_AMAZON:"Sign In with Amazon",SIGN_IN_WITH_APPLE:"Sign In with Apple",SIGN_IN_WITH_FACEBOOK:"Sign In with Facebook",SIGN_IN_WITH_GOOGLE:"Sign In with Google",SIGN_IN:"Sign in to your account",SIGN_UP_BUTTON:"Create a new account",SIGNING_IN_BUTTON:"Signing in",SKIP:"Skip",SUBMIT:"Submit",SUBMITTING:"Submitting",UPPERCASE_COPY:"COPY",VERIFY_CONTACT:"Verify Contact",VERIFY_HEADING:"Account recovery requires verified contact information",VERIFY:"Verify",WE_EMAILED:"We Emailed You",WE_SENT_CODE:"We Sent A Code",WE_TEXTED:"We Texted You",WEBSITE:"Website"};var Sre=q({},m3),Cre=q({},g3),Ere=q({},y3),Ire=q({},_3),Dre=q({},v3),Tre=q({},b3),Are=q({},w3),Mre=q({},x3),Pre=q({},S3),Rre=q({},C3),Ore=q({},E3),kre=q({},I3),Nre=q({},D3),Fre=q({},T3),Lre=q({},A3),Bre=q({},M3),Ure=q({},P3),zre=q({},R3),Vre=q({},O3),N3=q({},k3);var yn=q({},N3);function Ft(e){return Rh.get(e)}var Px=e=>{let n=e?.context.config?.loginMechanisms,[t]=n??["username"];return t},F3=e=>{let n=q({},e);for(let[t,i]of Object.entries(e)){let{label:r,placeholder:o}=i;n[t]=Ie(q({},i),{label:r?Ft(r):void 0,placeholder:o?Ft(o):void 0})}return n},L3=e=>Object.entries(e).sort((n,t)=>{let i=n[1].order||Number.MAX_VALUE,r=t[1].order||Number.MAX_VALUE;return i-r}).filter(n=>n[1]!==void 0);var jre="+1",Ku=e=>{let n=Zu[e],{type:t}=n;return t==="tel"&&(n=Ie(q({},n),{dialCode:jre})),n},Y_=e=>{let n=Px(e);return Ie(q({},Ku(n)),{autocomplete:"username"})},Rx=e=>({confirmation_code:Ie(q({},Ku("confirmation_code")),{label:"Code *",placeholder:"Code"})}),Hre=e=>({username:q({},Y_(e)),password:Ie(q({},Ku("password")),{autocomplete:"current-password"})}),$re=e=>{let{loginMechanisms:n,signUpAttributes:t}=e.context.config,i=Px(e),r=Array.from(new Set([...n,"password","confirm_password",...t])),o={};for(let d of r)if(Mx(d)){let g=d===i?Y_(e):Ku(d);o[d]=q({},g)}else console.debug(`Authenticator does not have a default implementation for ${d}. Customize SignUp FormFields to add your own.`);return o},Gre=e=>({confirmation_code:Ie(q({},Ku("confirmation_code")),{placeholder:"Enter your code"})}),qre=e=>{let n=Px(e),{label:t}=Zu[n];return{username:Ie(q({},Y_(e)),{label:`Enter your ${t.toLowerCase()}`,placeholder:`Enter your ${t.toLowerCase()}`})}},Wre=e=>Ie(q({},Rx()),{password:Ie(q({},Ku("password")),{label:"New Password",placeholder:"New Password"}),confirm_password:Ie(q({},Ku("confirm_password")),{label:"Confirm Password",placeholder:"Confirm Password"})}),Zre=e=>{let n=zu(e),{missingAttributes:t}=n.context,i=Array.from(new Set(["password","confirm_password",...t??[]])),r={};for(let o of i)Mx(o)?r[o]=q({},Ku(o)):console.debug(`Authenticator does not have a default implementation for ${o}. Customize ForceNewPassword FormFields to add your own.`);return r},B3={signIn:Hre,signUp:$re,confirmSignUp:Gre,confirmSignIn:Rx,forceNewPassword:Zre,forgotPassword:qre,confirmResetPassword:Wre,confirmVerifyUser:Rx,setupTotp:Rx};var U3=(e,n)=>{let t=B3[e];return t(n)},z3=(e,n)=>{let t=Vu(n)?.formFields?.[e];return!t||Object.keys(t).length===0?{}:Object.entries(t).reduce((i,[r,o])=>{if((e==="signIn"||e==="forgotPassword")&&r==="username"){let d=Y_(n),g=q(q({},d),o);return Ie(q({},i),{[r]:g})}else if(d3(r)){let d=Zu[r],g=q(q({},d),o);return Ie(q({},i),{[r]:g})}else return Ie(q({},i),{[r]:o})},{})},V3=(e,n)=>{let t=U3(e,n),i=z3(e,n),r=q(q({},t),i);return delete r.QR,F3(r)},j3=e=>e.map(n=>{let t=n[0],i=Ie(q({},n[1]),{order:void 0});return[t,i]}),yM=(e,n)=>{let t=V3(e,n);return j3(L3(t))};var Kre=e=>{switch(e){case"SMS_MFA":return Ft(yn.CONFIRM_SMS);case"SOFTWARE_TOKEN_MFA":return Ft(yn.CONFIRM_TOTP);default:return Ft(yn.CONFIRM_MFA_DEFAULT)}},Yre=e=>{let{DeliveryMedium:n,Destination:t}=e??{},i=n==="EMAIL",r=n==="SMS",o=Ft(yn.CODE_ARRIVAL);return i||r?`${i?Ft(yn.CODE_EMAILED):Ft(yn.CODE_TEXTED)} ${t}. ${o}.`:`${Ft(yn.CODE_SENT)}. ${o}.`},Jre=e=>{let{DeliveryMedium:n}=e??{},t=n==="EMAIL";return!t&&n==="SMS"?Ft(yn.WE_SENT_CODE):t?Ft(yn.WE_EMAILED):Ft(yn.WE_TEXTED)},Xre={amazon:"Amazon",apple:"Apple",facebook:"Facebook",google:"Google"},Qre=(e,n)=>Ft(`Sign ${e==="signIn"?"In":"Up"} with ${Xre[n]}`),Xo={getBackToSignInText:()=>Ft(yn.BACK_SIGN_IN),getChangePasswordText:()=>Ft(yn.CHANGE_PASSWORD),getChangingText:()=>Ft(yn.CHANGING_PASSWORD),getConfirmText:()=>Ft(yn.CONFIRM),getConfirmingText:()=>Ft(yn.CONFIRMING),getCopyText:()=>Ft(yn.UPPERCASE_COPY),getHidePasswordText:()=>Ft(yn.HIDE_PASSWORD),getLoadingText:()=>Ft(yn.LOADING),getOrText:()=>Ft(yn.OR),getResendCodeText:()=>Ft(yn.RESEND_CODE),getSendCodeText:()=>Ft(yn.SEND_CODE),getSendingText:()=>Ft(yn.SENDING),getShowPasswordText:()=>Ft(yn.SHOW_PASSWORD),getSubmitText:()=>Ft(yn.SUBMIT),getSubmittingText:()=>Ft(yn.SUBMITTING),getSignInTabText:()=>Ft(yn.SIGN_IN_TAB),getSignUpTabText:()=>Ft(yn.CREATE_ACCOUNT),getForgotPasswordText:e=>Ft(e?yn.FORGOT_PASSWORD:yn.FORGOT_YOUR_PASSWORD),getSigningInText:()=>Ft(yn.SIGNING_IN_BUTTON),getSignInText:()=>Ft(yn.SIGN_IN_BUTTON),getCreatingAccountText:()=>Ft(yn.CREATING_ACCOUNT),getCreateAccountText:()=>Ft(yn.CREATE_ACCOUNT),getDeliveryMessageText:Yre,getDeliveryMethodText:Jre,getChallengeText:Kre,getResetYourPasswordText:()=>Ft(yn.RESET_PASSWORD),getSetupTotpText:()=>Ft(yn.SETUP_TOTP),getSetupTotpInstructionsText:()=>Ft("Copy and paste the secret key below into an authenticator app and then enter the code in the text field below."),getCopiedText:()=>Ft("COPIED"),getSignInWithFederationText:Qre,getSkipText:()=>Ft(yn.SKIP),getVerifyText:()=>Ft(yn.VERIFY),getVerifyContactText:()=>Ft(yn.VERIFY_CONTACT),getAccountRecoveryInfoText:()=>Ft(yn.VERIFY_HEADING),getInvalidEmailText:()=>Ft("Please enter a valid email"),getRequiredFieldText:()=>Ft("This field is required")};var Rt=function(e){return e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword",e}(Rt||{});var Ox={[Rt.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[Rt.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[Rt.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[Rt.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[Rt.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[Rt.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[Rt.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[Rt.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[Rt.EmptySignInPassword]:{message:"password is required to signIn"},[Rt.EmptySignInUsername]:{message:"username is required to signIn"},[Rt.EmptySignUpPassword]:{message:"password is required to signUp"},[Rt.EmptySignUpUsername]:{message:"username is required to signUp"},[Rt.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[Rt.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[Rt.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[Rt.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[Rt.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}},zr=function(e){return e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",e}(zr||{}),Rs=function(e){return e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException",e}(Rs||{});var _t=class e extends $i{constructor(n){super(n),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};function Mn(e,n){let{message:t,recoverySuggestion:i}=Ox[n];if(!e)throw new _t({name:n,message:t,recoverySuggestion:i})}function Jt(e){let n=e?.split("_")[0];if(!e||e.indexOf("_")<0||!n||typeof n!="string")throw new _t({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return n}function J_(e){if(!e||!e.includes(":"))throw new _t({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function _M(e){return Object.entries(e).map(([n,t])=>({Name:n,Value:t}))}function H3(e){let n={};return e?.forEach(t=>{t.Name&&(n[t.Name]=t.Value)}),n}var kx=function(e){return e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException",e}(kx||{});var vM=function(e){return e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException",e}(vM||{});var am="UserUnAuthenticatedException",$3="UserAlreadyAuthenticatedException",G3="DeviceMetadataNotFoundException",Nx="AutoSignInException",eoe="InvalidRedirectException",toe="InvalidAppSchemeException",noe="InvalidPreferredRedirectUrlException",q3=new _t({name:eoe,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),yLe=new _t({name:toe,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),W3=new _t({name:noe,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),ioe="InvalidOriginException",Z3=new _t({name:ioe,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),K3="OAuthSignOutException",Y3="TokenRefreshException",J3="UnexpectedSignInInterruptionException";function Il(e){if(!e||!e.accessToken)throw new _t({name:am,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function X3(e){if(!e||!e.idToken)throw new _t({name:am,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}var roe=new _t({name:Y3,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),ooe=new _t({name:am,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function Fx(e){if(aoe(e))throw roe;if(!soe(e))throw ooe}function bM(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new _t({name:G3,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}var Q3={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function eV(e){return e?.accessToken||e?.idToken}function soe(e){return eV(e)&&e?.refreshToken}function aoe(e){return eV(e)&&!e?.refreshToken}var tV=e=>ne(void 0,null,function*(){let n=e.getConfig().Auth?.Cognito;Tt(n);let t=yield e.Auth.getTokens({forceRefresh:!1});Il(t);let{"cognito:username":i,sub:r}=t.idToken?.payload??{},o={username:i,userId:r},d=loe(t);return d&&(o.signInDetails=d),o});function loe(e){return e?.signInDetails}var Os=()=>ne(void 0,null,function*(){return tV(Ht)});var on=(e,n)=>Gu(q({category:Ts.Auth,action:e},n));var ti=e=>(n,t)=>{let i=coe(e),r=JSON.stringify(n);return uoe(t,i,r)},coe=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),uoe=({url:e},n,t)=>({headers:n,url:e,body:t,method:"POST"});function Vr(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new _t({name:Yo.Unknown,message:"An unknown error has occurred.",underlyingError:e})}var _i=()=>e=>ne(void 0,null,function*(){if(e.statusCode>=300){let n=yield As(e);throw Vr(n),new _t({name:n.name,message:n.message})}return Cl(e)});var doe=()=>(e,n)=>function(i){return ne(this,null,function*(){return i.headers["cache-control"]="no-store",e(i)})},ni=Eh(j_,[doe]);var Lx="cognito-idp";var ii={service:Lx,retryDecider:$_(As),computeDelay:H_,userAgentValue:Gu(),cache:"no-store"};var Dl=e=>Nn(ni,ti("InitiateAuth"),_i(),q(q({},ii),e));var jr=e=>Nn(ni,ti("RespondToAuthChallenge"),_i(),q(q({},ii),e));var nV=e=>Nn(ni,ti("VerifySoftwareToken"),_i(),q(q({},ii),e));var iV=e=>Nn(ni,ti("AssociateSoftwareToken"),_i(),q(q({},ii),e));var rV=e=>Nn(ni,ti("ConfirmDevice"),_i(),q(q({},ii),e));var oV=({region:e})=>({url:new Ms(`https://${Lx}.${e}.${V_(e)}`)});var Xt=({endpointOverride:e})=>n=>e?{url:new Ms(e)}:oV(n);function ri({username:e,userPoolId:n,userPoolClientId:t}){if(typeof window>"u")return;let i=window.AmazonCognitoAdvancedSecurityData;if(typeof i>"u")return;let r=i.getData(e,n,t);return r?{EncodedData:r}:{}}var hoe=i=>ne(void 0,[i],function*({tokens:e,authConfig:n,username:t}){Tt(n?.Cognito);let{userPoolId:r,userPoolClientId:o,userPoolEndpoint:d}=n.Cognito,g=Jt(r);Fx(e);let v=e.refreshToken,x={REFRESH_TOKEN:v};e.deviceMetadata?.deviceKey&&(x.DEVICE_KEY=e.deviceMetadata.deviceKey);let D=ri({username:t,userPoolId:r,userPoolClientId:o}),R=Dl({endpointResolver:Xt({endpointOverride:d})}),{AuthenticationResult:L}=yield R({region:g},{ClientId:o,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:x,UserContextData:D}),j=_o(L?.AccessToken??""),J=L?.IdToken?_o(L.IdToken):void 0,{iat:re}=j.payload;if(!re)throw new _t({name:"iatNotFoundException",message:"iat not found in access token"});let be=re*1e3-new Date().getTime();return{accessToken:j,idToken:J,clockDrift:be,refreshToken:v,username:t}}),sV=iM(hoe);var aV={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var Bx=function(e){return e.InvalidAuthTokens="InvalidAuthTokens",e}(Bx||{}),poe={[Bx.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},lV=za(poe);var Ux=class{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new _t({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(n){this.keyValueStorage=n}setAuthConfig(n){this.authConfig=n}loadTokens(){return ne(this,null,function*(){try{let n=yield this.getAuthKeys(),t=yield this.getKeyValueStorage().getItem(n.accessToken);if(!t)throw new _t({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let i=_o(t),r=yield this.getKeyValueStorage().getItem(n.idToken),o=r?_o(r):void 0,d=(yield this.getKeyValueStorage().getItem(n.refreshToken))??void 0,g=(yield this.getKeyValueStorage().getItem(n.clockDrift))??"0",v=Number.parseInt(g),x=yield this.getKeyValueStorage().getItem(n.signInDetails),D={accessToken:i,idToken:o,refreshToken:d,deviceMetadata:(yield this.getDeviceMetadata())??void 0,clockDrift:v,username:yield this.getLastAuthUser()};return x&&(D.signInDetails=JSON.parse(x)),D}catch{return null}})}storeTokens(n){return ne(this,null,function*(){lV(n!==void 0,Bx.InvalidAuthTokens),yield this.clearTokens();let t=n.username;yield this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let i=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(i.accessToken,n.accessToken.toString()),n.idToken&&(yield this.getKeyValueStorage().setItem(i.idToken,n.idToken.toString())),n.refreshToken&&(yield this.getKeyValueStorage().setItem(i.refreshToken,n.refreshToken)),n.deviceMetadata&&(n.deviceMetadata.deviceKey&&(yield this.getKeyValueStorage().setItem(i.deviceKey,n.deviceMetadata.deviceKey)),n.deviceMetadata.deviceGroupKey&&(yield this.getKeyValueStorage().setItem(i.deviceGroupKey,n.deviceMetadata.deviceGroupKey)),yield this.getKeyValueStorage().setItem(i.randomPasswordKey,n.deviceMetadata.randomPassword)),n.signInDetails&&(yield this.getKeyValueStorage().setItem(i.signInDetails,JSON.stringify(n.signInDetails))),yield this.getKeyValueStorage().setItem(i.clockDrift,`${n.clockDrift}`)})}clearTokens(){return ne(this,null,function*(){let n=yield this.getAuthKeys();yield Promise.all([this.getKeyValueStorage().removeItem(n.accessToken),this.getKeyValueStorage().removeItem(n.idToken),this.getKeyValueStorage().removeItem(n.clockDrift),this.getKeyValueStorage().removeItem(n.refreshToken),this.getKeyValueStorage().removeItem(n.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(n.oauthMetadata)])})}getDeviceMetadata(n){return ne(this,null,function*(){let t=yield this.getAuthKeys(n),i=yield this.getKeyValueStorage().getItem(t.deviceKey),r=yield this.getKeyValueStorage().getItem(t.deviceGroupKey),o=yield this.getKeyValueStorage().getItem(t.randomPasswordKey);return o&&r&&i?{deviceKey:i,deviceGroupKey:r,randomPassword:o}:null})}clearDeviceMetadata(n){return ne(this,null,function*(){let t=yield this.getAuthKeys(n);yield Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])})}getAuthKeys(n){return ne(this,null,function*(){Tt(this.authConfig?.Cognito);let t=n??(yield this.getLastAuthUser());return foe(this.name,`${this.authConfig.Cognito.userPoolClientId}.${t}`)})}getLastAuthUserKey(){Tt(this.authConfig?.Cognito);let n=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${n}.LastAuthUser`}getLastAuthUser(){return ne(this,null,function*(){return(yield this.getKeyValueStorage().getItem(this.getLastAuthUserKey()))??"username"})}setOAuthMetadata(n){return ne(this,null,function*(){let{oauthMetadata:t}=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(t,JSON.stringify(n))})}getOAuthMetadata(){return ne(this,null,function*(){let{oauthMetadata:n}=yield this.getAuthKeys(),t=yield this.getKeyValueStorage().getItem(n);return t&&JSON.parse(t)})}},foe=(e,n)=>X_(aV)(`${e}`,n);function X_(e){let n=Object.values(q({},e));return(t,i)=>n.reduce((r,o)=>Ie(q({},r),{[o]:`${t}.${i}.${o}`}),{})}var cV="amplify-signin-with-hostedUI",Tl="CognitoIdentityServiceProvider",lm=class{constructor(n){this.keyValueStorage=n}clearOAuthInflightData(){return ne(this,null,function*(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId);yield Promise.all([this.keyValueStorage.removeItem(n.inflightOAuth),this.keyValueStorage.removeItem(n.oauthPKCE),this.keyValueStorage.removeItem(n.oauthState)])})}clearOAuthData(){return ne(this,null,function*(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId);return yield this.clearOAuthInflightData(),yield this.keyValueStorage.removeItem(cV),this.keyValueStorage.removeItem(n.oauthSignIn)})}loadOAuthState(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(n.oauthState)}storeOAuthState(n){Tt(this.cognitoConfig);let t=Al(Tl,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,n)}loadPKCE(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(n.oauthPKCE)}storePKCE(n){Tt(this.cognitoConfig);let t=Al(Tl,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,n)}setAuthConfig(n){this.cognitoConfig=n}loadOAuthInFlight(){return ne(this,null,function*(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId);return(yield this.keyValueStorage.getItem(n.inflightOAuth))==="true"})}storeOAuthInFlight(n){return ne(this,null,function*(){Tt(this.cognitoConfig);let t=Al(Tl,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(t.inflightOAuth,`${n}`)})}loadOAuthSignIn(){return ne(this,null,function*(){Tt(this.cognitoConfig);let n=Al(Tl,this.cognitoConfig.userPoolClientId),t=yield this.keyValueStorage.getItem(cV),[i,r]=(yield this.keyValueStorage.getItem(n.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:i==="true"||t==="true",preferPrivateSession:r==="true"}})}storeOAuthSignIn(n,t=!1){return ne(this,null,function*(){Tt(this.cognitoConfig);let i=Al(Tl,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(i.oauthSignIn,`${n},${t}`)})}},Al=(e,n)=>X_(Q3)(e,n);var dr=new lm(Ps);var wM=[],uV=e=>{wM.push(e)},zx=()=>{for(;wM.length;)wM.pop()?.()};var Vx=class{constructor(){this.waitForInflightOAuth=Ec()?()=>ne(this,null,function*(){if(yield dr.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((n,t)=>{uV(n)}),this.inflightPromise)}):()=>ne(this,null,function*(){})}setAuthConfig(n){dr.setAuthConfig(n.Cognito),this.authConfig=n}setTokenRefresher(n){this.tokenRefresher=n}setAuthTokenStore(n){this.tokenStore=n}getTokenStore(){if(!this.tokenStore)throw new _t({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new _t({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}getTokens(n){return ne(this,null,function*(){let t;try{Tt(this.authConfig?.Cognito)}catch{return null}yield this.waitForInflightOAuth(),this.inflightPromise=void 0,t=yield this.getTokenStore().loadTokens();let i=yield this.getTokenStore().getLastAuthUser();if(t===null)return null;let r=!!t?.idToken&&ax({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),o=ax({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(n?.forceRefresh||r||o)&&(t=yield this.refreshTokens({tokens:t,username:i}),t===null)?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}})}refreshTokens(i){return ne(this,arguments,function*({tokens:n,username:t}){try{let{signInDetails:r}=n,o=yield this.getTokenRefresher()({tokens:n,authConfig:this.authConfig,username:t});return o.signInDetails=r,yield this.setTokens({tokens:o}),Xi.dispatch("auth",{event:"tokenRefresh"},"Auth",Ur),o}catch(r){return this.handleErrors(r)}})}handleErrors(n){if(Vr(n),n.name!==Yo.NetworkError&&this.clearTokens(),Xi.dispatch("auth",{event:"tokenRefresh_failure",data:{error:n}},"Auth",Ur),n.name.startsWith("NotAuthorizedException"))return null;throw n}setTokens(t){return ne(this,arguments,function*({tokens:n}){return this.getTokenStore().storeTokens(n)})}clearTokens(){return ne(this,null,function*(){return this.getTokenStore().clearTokens()})}getDeviceMetadata(n){return this.getTokenStore().getDeviceMetadata(n)}clearDeviceMetadata(n){return this.getTokenStore().clearDeviceMetadata(n)}setOAuthMetadata(n){return this.getTokenStore().setOAuthMetadata(n)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}};var jx=class{constructor(){this.authTokenStore=new Ux,this.authTokenStore.setKeyValueStorage(Ps),this.tokenOrchestrator=new Vx,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(sV)}getTokens({forceRefresh:n}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:n})}setKeyValueStorage(n){this.authTokenStore.setKeyValueStorage(n)}setAuthConfig(n){this.authTokenStore.setAuthConfig(n),this.tokenOrchestrator.setAuthConfig(n)}};var kh=new jx,{tokenOrchestrator:Ri}=kh;function to(e){return ne(this,null,function*(){if(e.AccessToken){let n=_o(e.AccessToken),t=(n.payload.iat||0)*1e3,i=new Date().getTime(),r=t>0?t-i:0,o,d,g;e.RefreshToken&&(d=e.RefreshToken),e.IdToken&&(o=_o(e.IdToken)),e?.NewDeviceMetadata&&(g=e.NewDeviceMetadata);let v={accessToken:n,idToken:o,refreshToken:d,clockDrift:r,deviceMetadata:g,username:e.username};e?.signInDetails&&(v.signInDetails=e.signInDetails),yield Ri.setTokens({tokens:v})}else throw new $i({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})})}var moe="Unable to get user session following successful sign-in.",vo=()=>ne(void 0,null,function*(){try{Xi.dispatch("auth",{event:"signedIn",data:yield Os()},"Auth",Ur)}catch(e){throw e.name===am?new _t({name:J3,message:moe,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}});function dV(){return{active:!1}}var goe=(e,n)=>{switch(n.type){case"SET_USERNAME":return Ie(q({},e),{username:n.value});case"SET_SESSION":return Ie(q({},e),{session:n.value});case"START":return Ie(q({},e),{active:!0});case"RESET":return dV();default:return e}},yoe=e=>{let n=e(dV(),{type:"RESET"});return{getState:()=>n,dispatch:t=>{n=e(n,t)}}},ha=yoe(goe);var _oe=(e,n)=>{switch(n.type){case"SET_SIGN_IN_SESSION":return Ie(q({},e),{signInSession:n.value});case"SET_SIGN_IN_STATE":return q({},n.value);case"SET_CHALLENGE_NAME":return Ie(q({},e),{challengeName:n.value});case"SET_USERNAME":return Ie(q({},e),{username:n.value});case"SET_INITIAL_STATE":return hV();default:return e}};function hV(){return{username:void 0,challengeName:void 0,signInSession:void 0}}var voe=e=>{let n=e(hV(),{type:"SET_INITIAL_STATE"});return{getState:()=>n,dispatch:t=>{n=e(n,t)}}},pa=voe(_oe);function Qo(e){pa.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function Er(){pa.dispatch({type:"SET_INITIAL_STATE"})}var Yu=class e extends $i{constructor(n){super(n),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}},Gi=function(e){return e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted",e}(Gi||{}),pV="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",xM="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",fV="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",Hx={[Gi.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:pV},[Gi.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:fV},[Gi.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:fV},[Gi.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:pV},[Gi.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[Gi.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[Gi.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:xM},[Gi.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:xM},[Gi.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:xM},[Gi.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},cm=za(Hx,Yu),mV=e=>{if(e instanceof Yu)return e;if(e instanceof Error&&e.name==="NotAllowedError"){let{message:n,recoverySuggestion:t}=Hx[Gi.PasskeyAuthenticationCanceled];return new Yu({name:Gi.PasskeyAuthenticationCanceled,message:n,recoverySuggestion:t,underlyingError:e})}return boe(e)};var boe=e=>{if(e instanceof Error){if(e.name==="AbortError"){let{message:n,recoverySuggestion:t}=Hx[Gi.PasskeyOperationAborted];return new Yu({name:Gi.PasskeyOperationAborted,message:n,recoverySuggestion:t,underlyingError:e})}if(e.name==="SecurityError"){let{message:n,recoverySuggestion:t}=Hx[Gi.RelyingPartyMismatch];return new Yu({name:Gi.RelyingPartyMismatch,message:n,recoverySuggestion:t,underlyingError:e})}}return new Yu({name:Yo.Unknown,message:"An unknown error has occurred.",underlyingError:e})};var gV=()=>Ec()&&window.isSecureContext&&"credentials"in navigator&&typeof window.PublicKeyCredential=="function";var um=e=>ua.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0});var SM=e=>Uint8Array.from(xh.convert(e,{urlSafe:!0}),n=>n.charCodeAt(0)).buffer;var yV=e=>{let n=SM(e.challenge),t=(e.allowCredentials||[]).map(i=>Ie(q({},i),{id:SM(i.id)}));return Ie(q({},e),{challenge:n,allowCredentials:t})},_V=e=>{let n={clientDataJSON:um(e.response.clientDataJSON),authenticatorData:um(e.response.authenticatorData),signature:um(e.response.signature)};e.response.userHandle&&(n.userHandle=um(e.response.userHandle));let t={id:e.id,rawId:um(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:n};return e.authenticatorAttachment&&(t.authenticatorAttachment=e.authenticatorAttachment),t};function vV(e){cm(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,Gi.PasskeyRetrievalFailed)}var bV=e=>ne(void 0,null,function*(){try{let n=gV();cm(n,Gi.PasskeyNotSupported);let t=yV(e),i=yield navigator.credentials.get({publicKey:t});return vV(i),_V(i)}catch(n){throw mV(n)}});function wV(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n);let{username:t,signInSession:i,signInDetails:r,challengeName:o}=pa.getState();if(o!=="WEB_AUTHN"||!t)throw new _t({name:Rs.SignInException,message:"Unable to proceed due to invalid sign in state."});let{CREDENTIAL_REQUEST_OPTIONS:d}=e;cm(!!d,Gi.InvalidPasskeyAuthenticationOptions);let g=yield bV(JSON.parse(d)),v=jr({endpointResolver:Xt({endpointOverride:n.userPoolEndpoint})}),{ChallengeName:x,ChallengeParameters:D,AuthenticationResult:R,Session:L}=yield v({region:Jt(n.userPoolId),userAgentValue:on(Ct.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:t,CREDENTIAL:JSON.stringify(g)},ClientId:n.userPoolClientId,Session:i});if(Qo({signInSession:L,username:t,challengeName:x,signInDetails:r}),R)return yield to(Ie(q({},R),{username:t,NewDeviceMetadata:yield ts({userPoolId:n.userPoolId,userPoolEndpoint:n.userPoolEndpoint,newDeviceMetadata:R.NewDeviceMetadata,accessToken:R.AccessToken}),signInDetails:r})),Er(),yield vo(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if(x==="WEB_AUTHN")throw new _t({name:Rs.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return es({challengeName:x,challengeParameters:D})})}var dm={convert(e){return new TextEncoder().encode(e)}};function ft(e,n){e!=null&&this.fromString(e,n)}function Oo(){return new ft(null,null)}var Ju,woe=0xdeadbeefcafe,xV=(woe&16777215)===15715070;function xoe(e,n,t,i,r,o){for(;--o>=0;){let d=n*this[e++]+t[i]+r;r=Math.floor(d/67108864),t[i++]=d&67108863}return r}function Soe(e,n,t,i,r,o){let d=n&32767,g=n>>15;for(;--o>=0;){let v=this[e]&32767,x=this[e++]>>15,D=g*v+x*d;v=d*v+((D&32767)<<15)+t[i]+(r&1073741823),r=(v>>>30)+(D>>>15)+g*x+(r>>>30),t[i++]=v&1073741823}return r}function Coe(e,n,t,i,r,o){let d=n&16383,g=n>>14;for(;--o>=0;){let v=this[e]&16383,x=this[e++]>>14,D=g*v+x*d;v=d*v+((D&16383)<<14)+t[i]+r,r=(v>>28)+(D>>14)+g*x,t[i++]=v&268435455}return r}var SV=typeof navigator<"u";SV&&xV&&navigator.appName==="Microsoft Internet Explorer"?(ft.prototype.am=Soe,Ju=30):SV&&xV&&navigator.appName!=="Netscape"?(ft.prototype.am=xoe,Ju=26):(ft.prototype.am=Coe,Ju=28);ft.prototype.DB=Ju;ft.prototype.DM=(1<<Ju)-1;ft.prototype.DV=1<<Ju;var CM=52;ft.prototype.FV=Math.pow(2,CM);ft.prototype.F1=CM-Ju;ft.prototype.F2=2*Ju-CM;var Eoe="0123456789abcdefghijklmnopqrstuvwxyz",$x=[],hm,fa;hm=48;for(fa=0;fa<=9;++fa)$x[hm++]=fa;hm=97;for(fa=10;fa<36;++fa)$x[hm++]=fa;hm=65;for(fa=10;fa<36;++fa)$x[hm++]=fa;function CV(e){return Eoe.charAt(e)}function Ioe(e,n){let t=$x[e.charCodeAt(n)];return t??-1}function Doe(e){for(let n=this.t-1;n>=0;--n)e[n]=this[n];e.t=this.t,e.s=this.s}function Toe(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function EM(e){let n=Oo();return n.fromInt(e),n}function Aoe(e,n){let t;if(n===16)t=4;else if(n===8)t=3;else if(n===2)t=1;else if(n===32)t=5;else if(n===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let i=e.length,r=!1,o=0;for(;--i>=0;){let d=Ioe(e,i);if(d<0){e.charAt(i)==="-"&&(r=!0);continue}r=!1,o===0?this[this.t++]=d:o+t>this.DB?(this[this.t-1]|=(d&(1<<this.DB-o)-1)<<o,this[this.t++]=d>>this.DB-o):this[this.t-1]|=d<<o,o+=t,o>=this.DB&&(o-=this.DB)}this.clamp(),r&&ft.ZERO.subTo(this,this)}function Moe(){let e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function Poe(e){if(this.s<0)return"-"+this.negate().toString(e);let n;if(e==16)n=4;else if(e===8)n=3;else if(e===2)n=1;else if(e===32)n=5;else if(e===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");let t=(1<<n)-1,i,r=!1,o="",d=this.t,g=this.DB-d*this.DB%n;if(d-- >0)for(g<this.DB&&(i=this[d]>>g)>0&&(r=!0,o=CV(i));d>=0;)g<n?(i=(this[d]&(1<<g)-1)<<n-g,i|=this[--d]>>(g+=this.DB-n)):(i=this[d]>>(g-=n)&t,g<=0&&(g+=this.DB,--d)),i>0&&(r=!0),r&&(o+=CV(i));return r?o:"0"}function Roe(){let e=Oo();return ft.ZERO.subTo(this,e),e}function Ooe(){return this.s<0?this.negate():this}function koe(e){let n=this.s-e.s;if(n!=0)return n;let t=this.t;if(n=t-e.t,n!=0)return this.s<0?-n:n;for(;--t>=0;)if((n=this[t]-e[t])!=0)return n;return 0}function IM(e){let n=1,t;return(t=e>>>16)!==0&&(e=t,n+=16),(t=e>>8)!==0&&(e=t,n+=8),(t=e>>4)!==0&&(e=t,n+=4),(t=e>>2)!==0&&(e=t,n+=2),(t=e>>1)!==0&&(e=t,n+=1),n}function Noe(){return this.t<=0?0:this.DB*(this.t-1)+IM(this[this.t-1]^this.s&this.DM)}function Foe(e,n){let t;for(t=this.t-1;t>=0;--t)n[t+e]=this[t];for(t=e-1;t>=0;--t)n[t]=0;n.t=this.t+e,n.s=this.s}function Loe(e,n){for(let t=e;t<this.t;++t)n[t-e]=this[t];n.t=Math.max(this.t-e,0),n.s=this.s}function Boe(e,n){let t=e%this.DB,i=this.DB-t,r=(1<<i)-1,o=Math.floor(e/this.DB),d=this.s<<t&this.DM,g;for(g=this.t-1;g>=0;--g)n[g+o+1]=this[g]>>i|d,d=(this[g]&r)<<t;for(g=o-1;g>=0;--g)n[g]=0;n[o]=d,n.t=this.t+o+1,n.s=this.s,n.clamp()}function Uoe(e,n){n.s=this.s;let t=Math.floor(e/this.DB);if(t>=this.t){n.t=0;return}let i=e%this.DB,r=this.DB-i,o=(1<<i)-1;n[0]=this[t]>>i;for(let d=t+1;d<this.t;++d)n[d-t-1]|=(this[d]&o)<<r,n[d-t]=this[d]>>i;i>0&&(n[this.t-t-1]|=(this.s&o)<<r),n.t=this.t-t,n.clamp()}function zoe(e,n){let t=0,i=0,r=Math.min(e.t,this.t);for(;t<r;)i+=this[t]-e[t],n[t++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;t<this.t;)i+=this[t],n[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<e.t;)i-=e[t],n[t++]=i&this.DM,i>>=this.DB;i-=e.s}n.s=i<0?-1:0,i<-1?n[t++]=this.DV+i:i>0&&(n[t++]=i),n.t=t,n.clamp()}function Voe(e,n){let t=this.abs(),i=e.abs(),r=t.t;for(n.t=r+i.t;--r>=0;)n[r]=0;for(r=0;r<i.t;++r)n[r+t.t]=t.am(0,i[r],n,r,0,t.t);n.s=0,n.clamp(),this.s!==e.s&&ft.ZERO.subTo(n,n)}function joe(e){let n=this.abs(),t=e.t=2*n.t;for(;--t>=0;)e[t]=0;for(t=0;t<n.t-1;++t){let i=n.am(t,n[t],e,2*t,0,1);(e[t+n.t]+=n.am(t+1,2*n[t],e,2*t+1,i,n.t-t-1))>=n.DV&&(e[t+n.t]-=n.DV,e[t+n.t+1]=1)}e.t>0&&(e[e.t-1]+=n.am(t,n[t],e,2*t,0,1)),e.s=0,e.clamp()}function Hoe(e,n,t){let i=e.abs();if(i.t<=0)return;let r=this.abs();if(r.t<i.t){n?.fromInt(0),t!=null&&this.copyTo(t);return}t===null&&(t=Oo());let o=Oo(),d=this.s,g=e.s,v=this.DB-IM(i[i.t-1]);v>0?(i.lShiftTo(v,o),r.lShiftTo(v,t)):(i.copyTo(o),r.copyTo(t));let x=o.t,D=o[x-1];if(D===0)return;let R=D*(1<<this.F1)+(x>1?o[x-2]>>this.F2:0),L=this.FV/R,j=(1<<this.F1)/R,J=1<<this.F2,re=t.t,be=re-x,xe=n===null?Oo():n;for(o.dlShiftTo(be,xe),t.compareTo(xe)>=0&&(t[t.t++]=1,t.subTo(xe,t)),ft.ONE.dlShiftTo(x,xe),xe.subTo(o,o);o.t<x;)o[o.t++]=0;for(;--be>=0;){let Pe=t[--re]===D?this.DM:Math.floor(t[re]*L+(t[re-1]+J)*j);if((t[re]+=o.am(0,Pe,t,be,0,x))<Pe)for(o.dlShiftTo(be,xe),t.subTo(xe,t);t[re]<--Pe;)t.subTo(xe,t)}n!==null&&(t.drShiftTo(x,n),d!==g&&ft.ZERO.subTo(n,n)),t.t=x,t.clamp(),v>0&&t.rShiftTo(v,t),d<0&&ft.ZERO.subTo(t,t)}function $oe(e){let n=Oo();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(ft.ZERO)>0&&e.subTo(n,n),n}function Goe(){if(this.t<1)return 0;let e=this[0];if(!(e&1))return 0;let n=e&3;return n=n*(2-(e&15)*n)&15,n=n*(2-(e&255)*n)&255,n=n*(2-((e&65535)*n&65535))&65535,n=n*(2-e*n%this.DV)%this.DV,n>0?this.DV-n:-n}function qoe(e){return this.compareTo(e)===0}function Woe(e,n){let t=0,i=0,r=Math.min(e.t,this.t);for(;t<r;)i+=this[t]+e[t],n[t++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;t<this.t;)i+=this[t],n[t++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;t<e.t;)i+=e[t],n[t++]=i&this.DM,i>>=this.DB;i+=e.s}n.s=i<0?-1:0,i>0?n[t++]=i:i<-1&&(n[t++]=this.DV+i),n.t=t,n.clamp()}function Zoe(e){let n=Oo();return this.addTo(e,n),n}function Koe(e){let n=Oo();return this.subTo(e,n),n}function Yoe(e){let n=Oo();return this.multiplyTo(e,n),n}function Joe(e){let n=Oo();return this.divRemTo(e,n,null),n}function pm(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Xoe(e){let n=Oo();return e.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),e.s<0&&n.compareTo(ft.ZERO)>0&&this.m.subTo(n,n),n}function Qoe(e){let n=Oo();return e.copyTo(n),this.reduce(n),n}function ese(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let n=0;n<this.m.t;++n){let t=e[n]&32767,i=t*this.mpl+((t*this.mph+(e[n]>>15)*this.mpl&this.um)<<15)&e.DM;for(t=n+this.m.t,e[t]+=this.m.am(0,i,e,n,0,this.m.t);e[t]>=e.DV;)e[t]-=e.DV,e[++t]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function tse(e,n){e.squareTo(n),this.reduce(n)}function nse(e,n,t){e.multiplyTo(n,t),this.reduce(t)}pm.prototype.convert=Xoe;pm.prototype.revert=Qoe;pm.prototype.reduce=ese;pm.prototype.mulTo=nse;pm.prototype.sqrTo=tse;function ise(e,n,t){let i=e.bitLength(),r,o=EM(1),d=new pm(n);if(i<=0)return o;i<18?r=1:i<48?r=3:i<144?r=4:i<768?r=5:r=6;let g=[],v=3,x=r-1,D=(1<<r)-1;if(g[1]=d.convert(this),r>1){let xe=Oo();for(d.sqrTo(g[1],xe);v<=D;)g[v]=Oo(),d.mulTo(xe,g[v-2],g[v]),v+=2}let R=e.t-1,L,j=!0,J=Oo(),re;for(i=IM(e[R])-1;R>=0;){for(i>=x?L=e[R]>>i-x&D:(L=(e[R]&(1<<i+1)-1)<<x-i,R>0&&(L|=e[R-1]>>this.DB+i-x)),v=r;!(L&1);)L>>=1,--v;if((i-=v)<0&&(i+=this.DB,--R),j)g[L].copyTo(o),j=!1;else{for(;v>1;)d.sqrTo(o,J),d.sqrTo(J,o),v-=2;v>0?d.sqrTo(o,J):(re=o,o=J,J=re),d.mulTo(J,g[L],o)}for(;R>=0&&!(e[R]&1<<i);)d.sqrTo(o,J),re=o,o=J,J=re,--i<0&&(i=this.DB-1,--R)}let be=d.revert(o);return t(null,be),be}ft.prototype.copyTo=Doe;ft.prototype.fromInt=Toe;ft.prototype.fromString=Aoe;ft.prototype.clamp=Moe;ft.prototype.dlShiftTo=Foe;ft.prototype.drShiftTo=Loe;ft.prototype.lShiftTo=Boe;ft.prototype.rShiftTo=Uoe;ft.prototype.subTo=zoe;ft.prototype.multiplyTo=Voe;ft.prototype.squareTo=joe;ft.prototype.divRemTo=Hoe;ft.prototype.invDigit=Goe;ft.prototype.addTo=Woe;ft.prototype.toString=Poe;ft.prototype.negate=Roe;ft.prototype.abs=Ooe;ft.prototype.compareTo=koe;ft.prototype.bitLength=Noe;ft.prototype.mod=$oe;ft.prototype.equals=qoe;ft.prototype.add=Zoe;ft.prototype.subtract=Koe;ft.prototype.multiply=Yoe;ft.prototype.divide=Joe;ft.prototype.modPow=ise;ft.ZERO=EM(0);ft.ONE=EM(1);var EV=g=>ne(void 0,[g],function*({a:e,g:n,k:t,x:i,B:r,N:o,U:d}){return new Promise((v,x)=>{n.modPow(i,o,(D,R)=>{if(D){x(D);return}r.subtract(t.multiply(R)).modPow(e.add(d.multiply(i)),o,(L,j)=>{if(L){x(L);return}v(j.mod(o))})})})});var IV="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",DM={},Gx={};for(let e=0;e<256;e++){let n=e.toString(16).toLowerCase();n.length===1&&(n=`0${n}`),DM[e]=n,Gx[n]=e}var Ml=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2){let i=e.slice(t,t+2).toLowerCase();if(i in Gx)n[t/2]=Gx[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return n};var fm=e=>{let n="";for(let t=0;t<e.byteLength;t++)n+=DM[e[t]];return n};var Q_=e=>{let n=new Cc;n.update(e);let t=n.digestSync(),i=fm(t);return new Array(64-i.length).join("0")+i};var mm=e=>Q_(Ml(e));var rse=/^[89a-f]/i,ja=e=>{if(!(e instanceof ft))throw new Error("Not a BigInteger");let n=e.compareTo(ft.ZERO)<0,t=e.abs().toString(16);if(t=t.length%2!==0?`0${t}`:t,t=rse.test(t)?`00${t}`:t,n){let i=t.split("").map(o=>{let d=~parseInt(o,16)&15;return"0123456789ABCDEF".charAt(d)}).join("");t=new ft(i,16).add(ft.ONE).toString(16),t.toUpperCase().startsWith("FF8")&&(t=t.substring(2))}return t};var DV=({A:e,B:n})=>{let t=new ft(mm(ja(e)+ja(n)),16);if(t.equals(ft.ZERO))throw new Error("U cannot be zero.");return t};var TV=(e,n,t)=>{let i=new Cc(n);i.update(e);let r=i.digestSync(),o=new Cc(r);return o.update(t),o.digestSync().slice(0,16)};var gm=e=>{let n=new Z_().random(e).toString();return Ml(n)};var AV=()=>ua.convert(gm(40));var qx=class{constructor({userPoolName:n,a:t,g:i,A:r,N:o}){this.encoder=dm,this.userPoolName=n,this.a=t,this.g=i,this.A=r,this.N=o,this.k=new ft(mm(`${ja(o)}${ja(i)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new _t({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new _t({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new _t({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}generateHashDevice(n,t){return ne(this,null,function*(){this.randomPassword=AV();let i=`${n}${t}:${this.randomPassword}`,r=Q_(i),o=fm(gm(16));return this.saltToHashDevices=ja(new ft(o,16)),new Promise((d,g)=>{this.g.modPow(new ft(mm(this.saltToHashDevices+r),16),this.N,(v,x)=>{if(v){g(v);return}this.verifierDevices=ja(x),d()})})})}getPasswordAuthenticationKey(o){return ne(this,arguments,function*({username:n,password:t,serverBValue:i,salt:r}){if(i.mod(this.N).equals(ft.ZERO))throw new Error("B cannot be zero.");let d=DV({A:this.A,B:i}),g=`${this.userPoolName}${n}:${t}`,v=Q_(g),x=new ft(mm(ja(r)+v),16),D=yield EV({a:this.a,g:this.g,k:this.k,x,B:i,N:this.N,U:d}),R=this.encoder.convert("Caldera Derived Key"),L=this.encoder.convert(""),j=new Uint8Array(R.byteLength+L.byteLength);return j.set(R,0),j.set(L,R.byteLength),TV(Ml(ja(D)),Ml(ja(d)),j)})}};var MV=i=>ne(void 0,[i],function*({a:e,g:n,N:t}){return new Promise((r,o)=>{n.modPow(e,t,(d,g)=>{if(d){o(d);return}if(g.mod(t).equals(ft.ZERO)){o(new Error("Illegal parameter. A mod N cannot be 0."));return}r(g)})})});var Xu=e=>ne(void 0,null,function*(){let n=new ft(IV,16),t=new ft("2",16),i=ose(),r=yield MV({a:i,g:t,N:n});return new qx({userPoolName:e,a:i,g:t,A:r,N:n})}),ose=()=>{let e=fm(gm(128));return new ft(e,16)};function Wx(g){return ne(this,arguments,function*({username:e,password:n,clientMetadata:t,config:i,tokenOrchestrator:r,authFlow:o,preferredChallenge:d}){let{userPoolId:v,userPoolClientId:x,userPoolEndpoint:D}=i,R=v?.split("_")[1]||"",L=yield Xu(R),j={USERNAME:e,SRP_A:L.A.toString(16)};o==="USER_AUTH"&&d&&(j.PREFERRED_CHALLENGE=d);let J=ri({username:e,userPoolId:v,userPoolClientId:x}),re={AuthFlow:o,AuthParameters:j,ClientMetadata:t,ClientId:x,UserContextData:J},xe=yield Dl({endpointResolver:Xt({endpointOverride:D})})({region:Jt(v),userAgentValue:on(Ct.SignIn)},re),{ChallengeParameters:Pe,Session:Ne}=xe,Ve=Pe?.USERNAME??e;return Ha(Ve),xe.ChallengeName==="PASSWORD_VERIFIER"?Pl(ev,[n,Pe,t,Ne,L,i,r],Ve,r):xe})}function PV(o){return ne(this,arguments,function*({username:e,session:n,selectedChallenge:t,config:i,clientMetadata:r}){return jr({endpointResolver:Xt({endpointOverride:i.userPoolEndpoint})})({region:Jt(i.userPoolId),userAgentValue:on(Ct.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:{USERNAME:e,ANSWER:t},ClientId:i.userPoolClientId,Session:n,ClientMetadata:r})})}function RV(e,n,t,i,r){return ne(this,null,function*(){let{userPoolId:o,userPoolClientId:d,userPoolEndpoint:g}=i,v={ANSWER:"PASSWORD",USERNAME:e,PASSWORD:n},x=ri({username:e,userPoolId:o,userPoolClientId:d}),R=yield jr({endpointResolver:Xt({endpointOverride:g})})({region:Jt(o),userAgentValue:on(Ct.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:v,ClientId:d,ClientMetadata:t,Session:r,UserContextData:x}),L=R.ChallengeParameters?.USERNAME??e;return Ha(L),R})}function OV(e,n,t,i,r,o){return ne(this,null,function*(){let{userPoolId:d,userPoolClientId:g,userPoolEndpoint:v}=i,x=d.split("_")[1]||"",D=yield Xu(x),R={ANSWER:"PASSWORD_SRP",USERNAME:e,SRP_A:D.A.toString(16)},L=ri({username:e,userPoolId:d,userPoolClientId:g}),J=yield jr({endpointResolver:Xt({endpointOverride:v})})({region:Jt(d),userAgentValue:on(Ct.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:R,ClientId:g,ClientMetadata:t,Session:r,UserContextData:L}),re=J.ChallengeParameters?.USERNAME??e;return Ha(re),J.ChallengeName==="PASSWORD_VERIFIER"?Pl(ev,[n,J.ChallengeParameters,t,J.Session,D,i,o],re,o):J})}var sse=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ase=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],TM=()=>{let e=new Date,n=ase[e.getUTCDay()],t=sse[e.getUTCMonth()],i=e.getUTCDate(),r=e.getUTCHours();r<10&&(r=`0${r}`);let o=e.getUTCMinutes();o<10&&(o=`0${o}`);let d=e.getUTCSeconds();d<10&&(d=`0${d}`);let g=e.getUTCFullYear();return`${n} ${t} ${i} ${r}:${o}:${d} UTC ${g}`};var AM=({userPoolName:e,username:n,challengeParameters:t,dateNow:i,hkdf:r})=>{let o=dm.convert(e),d=dm.convert(n),g=lse(t.SECRET_BLOCK),v=dm.convert(i),x=new Uint8Array(o.byteLength+d.byteLength+g.byteLength+v.byteLength);x.set(o,0),x.set(d,o.byteLength),x.set(g,o.byteLength+d.byteLength),x.set(v,o.byteLength+d.byteLength+g.byteLength);let D=new Cc(r);D.update(x);let R=D.digestSync();return ua.convert(R)},lse=e=>{let n="=".repeat((4-e.length%4)%4),t=(e+n).replace(/-/g,"+").replace(/_/g,"/"),i=xh.convert(t),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r};var MM="userAttributes.";function cse(d){return ne(this,arguments,function*({challengeResponse:e,clientMetadata:n,session:t,username:i,config:r,tokenOrchestrator:o}){let{userPoolId:g,userPoolClientId:v,userPoolEndpoint:x}=r,D={USERNAME:i,ANSWER:e},R=yield o?.getDeviceMetadata(i);R&&R.deviceKey&&(D.DEVICE_KEY=R.deviceKey);let L=ri({username:i,userPoolId:g,userPoolClientId:v}),j={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:D,Session:t,ClientMetadata:n,ClientId:v,UserContextData:L},re=yield jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},j);return re.ChallengeName==="DEVICE_SRP_AUTH"?Zx({username:i,config:r,clientMetadata:n,session:re.Session,tokenOrchestrator:o}):re})}function use(d){return ne(this,arguments,function*({challengeResponse:e,username:n,clientMetadata:t,session:i,deviceName:r,config:o}){let{userPoolId:g,userPoolClientId:v,userPoolEndpoint:x}=o;if(e==="EMAIL")return{ChallengeName:"MFA_SETUP",Session:i,ChallengeParameters:{MFAS_CAN_SETUP:'["EMAIL_OTP"]'},$metadata:{}};if(e==="TOTP")return{ChallengeName:"MFA_SETUP",Session:i,ChallengeParameters:{MFAS_CAN_SETUP:'["SOFTWARE_TOKEN_MFA"]'},$metadata:{}};let D={USERNAME:n};if(/^\d+$/.test(e)){let j=nV({endpointResolver:Xt({endpointOverride:x})}),{Session:J}=yield j({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},{UserCode:e,Session:i,FriendlyDeviceName:r});pa.dispatch({type:"SET_SIGN_IN_SESSION",value:J});let re={ChallengeName:"MFA_SETUP",ChallengeResponses:D,Session:J,ClientMetadata:t,ClientId:v};return jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},re)}if(e.includes("@")){D.EMAIL=e;let j={ChallengeName:"MFA_SETUP",ChallengeResponses:D,Session:i,ClientMetadata:t,ClientId:v};return jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},j)}throw new _t({name:Rs.SignInException,message:`Cannot proceed with MFA setup using challengeResponse: ${e}`,recoverySuggestion:'Try passing "EMAIL", "TOTP", a valid email, or OTP code as the challengeResponse.'})})}function dse(o){return ne(this,arguments,function*({challengeResponse:e,username:n,clientMetadata:t,session:i,config:r}){let{userPoolId:d,userPoolClientId:g,userPoolEndpoint:v}=r;Mn(e==="TOTP"||e==="SMS"||e==="EMAIL",Rt.IncorrectMFAMethod);let x={USERNAME:n,ANSWER:yse(e)},D=ri({username:n,userPoolId:d,userPoolClientId:g}),R={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:x,Session:i,ClientMetadata:t,ClientId:g,UserContextData:D};return jr({endpointResolver:Xt({endpointOverride:v})})({region:Jt(d),userAgentValue:on(Ct.ConfirmSignIn)},R)})}function hse(d){return ne(this,arguments,function*({challengeResponse:e,clientMetadata:n,session:t,username:i,requiredAttributes:r,config:o}){let{userPoolId:g,userPoolClientId:v,userPoolEndpoint:x}=o,D=Ie(q({},gse(r)),{NEW_PASSWORD:e,USERNAME:i}),R=ri({username:i,userPoolId:g,userPoolClientId:v}),L={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:D,ClientMetadata:n,Session:t,ClientId:v,UserContextData:R};return jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},L)})}function FV(e,n,t,i,r){return ne(this,null,function*(){let{userPoolClientId:o,userPoolId:d,userPoolEndpoint:g}=i,v={USERNAME:e,PASSWORD:n},x=yield r.getDeviceMetadata(e);x&&x.deviceKey&&(v.DEVICE_KEY=x.deviceKey);let D=ri({username:e,userPoolId:d,userPoolClientId:o}),R={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:v,ClientMetadata:t,ClientId:o,UserContextData:D},j=yield Dl({endpointResolver:Xt({endpointOverride:g})})({region:Jt(d),userAgentValue:on(Ct.SignIn)},R),J=j.ChallengeParameters?.USERNAME??j.ChallengeParameters?.USER_ID_FOR_SRP??e;return Ha(J),j.ChallengeName==="DEVICE_SRP_AUTH"?Zx({username:J,config:i,clientMetadata:t,session:j.Session,tokenOrchestrator:r}):j})}function LV(e,n,t,i,r){return ne(this,null,function*(){return Wx({username:e,password:n,clientMetadata:t,config:i,tokenOrchestrator:r,authFlow:"USER_SRP_AUTH"})})}function BV(e,n,t,i){return ne(this,null,function*(){let{userPoolClientId:r,userPoolId:o,userPoolEndpoint:d}=t,g={USERNAME:e},v=yield i.getDeviceMetadata(e);v&&v.deviceKey&&(g.DEVICE_KEY=v.deviceKey);let x=ri({username:e,userPoolId:o,userPoolClientId:r}),D={AuthFlow:"CUSTOM_AUTH",AuthParameters:g,ClientMetadata:n,ClientId:r,UserContextData:x},L=yield Dl({endpointResolver:Xt({endpointOverride:d})})({region:Jt(o),userAgentValue:on(Ct.SignIn)},D),j=L.ChallengeParameters?.USERNAME??e;return Ha(j),L.ChallengeName==="DEVICE_SRP_AUTH"?Zx({username:j,config:t,clientMetadata:n,session:L.Session,tokenOrchestrator:i}):L})}function UV(e,n,t,i,r){return ne(this,null,function*(){Tt(i);let{userPoolId:o,userPoolClientId:d,userPoolEndpoint:g}=i,v=o?.split("_")[1]||"",x=yield Xu(v),D={USERNAME:e,SRP_A:x.A.toString(16),CHALLENGE_NAME:"SRP_A"},R=ri({username:e,userPoolId:o,userPoolClientId:d}),L={AuthFlow:"CUSTOM_AUTH",AuthParameters:D,ClientMetadata:t,ClientId:d,UserContextData:R},j=Dl({endpointResolver:Xt({endpointOverride:g})}),{ChallengeParameters:J,Session:re}=yield j({region:Jt(o),userAgentValue:on(Ct.SignIn)},L),be=J?.USERNAME??e;return Ha(be),Pl(ev,[n,J,t,re,x,i,r],be,r)})}function Zx(o){return ne(this,arguments,function*({username:e,config:n,clientMetadata:t,session:i,tokenOrchestrator:r}){let{userPoolId:d,userPoolEndpoint:g}=n,v=n.userPoolClientId,x=yield r?.getDeviceMetadata(e);bM(x);let D=yield Xu(x.deviceGroupKey),R={USERNAME:e,SRP_A:D.A.toString(16),DEVICE_KEY:x.deviceKey},L={ChallengeName:"DEVICE_SRP_AUTH",ClientId:v,ChallengeResponses:R,ClientMetadata:t,Session:i},j=jr({endpointResolver:Xt({endpointOverride:g})}),{ChallengeParameters:J,Session:re}=yield j({region:Jt(d)},L);return pse(e,J,t,re,D,n,r)})}function pse(x,D,R,L,j,J,re){return ne(this,arguments,function*(e,n,t,i,r,{userPoolId:o,userPoolClientId:d,userPoolEndpoint:g},v){let be=yield v?.getDeviceMetadata(e);bM(be);let xe=new ft(n?.SRP_B,16),Pe=new ft(n?.SALT,16),{deviceKey:Ne}=be,{deviceGroupKey:Ve}=be,We=yield r.getPasswordAuthenticationKey({username:be.deviceKey,password:be.randomPassword,serverBValue:xe,salt:Pe}),rt=TM(),gt={USERNAME:n?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:n?.SECRET_BLOCK,TIMESTAMP:rt,PASSWORD_CLAIM_SIGNATURE:AM({username:Ne,userPoolName:Ve,challengeParameters:n,dateNow:rt,hkdf:We}),DEVICE_KEY:Ne},Gt=ri({username:e,userPoolId:o,userPoolClientId:d}),st={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:d,ChallengeResponses:gt,Session:i,ClientMetadata:t,UserContextData:Gt};return jr({endpointResolver:Xt({endpointOverride:g})})({region:Jt(o)},st)})}function ev(e,n,t,i,r,o,d){return ne(this,null,function*(){let{userPoolId:g,userPoolClientId:v,userPoolEndpoint:x}=o,D=g?.split("_")[1]||"",R=new ft(n?.SRP_B,16),L=new ft(n?.SALT,16),j=n?.USER_ID_FOR_SRP;if(!j)throw new _t({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});let J=yield r.getPasswordAuthenticationKey({username:j,password:e,serverBValue:R,salt:L}),re=TM(),be={USERNAME:j,PASSWORD_CLAIM_SECRET_BLOCK:n?.SECRET_BLOCK,TIMESTAMP:re,PASSWORD_CLAIM_SIGNATURE:AM({username:j,userPoolName:D,challengeParameters:n,dateNow:re,hkdf:J})},xe=yield d.getDeviceMetadata(j);xe&&xe.deviceKey&&(be.DEVICE_KEY=xe.deviceKey);let Pe=ri({username:j,userPoolId:g,userPoolClientId:v}),Ne={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:be,ClientMetadata:t,Session:i,ClientId:v,UserContextData:Pe},We=yield jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g)},Ne);return We.ChallengeName==="DEVICE_SRP_AUTH"?Zx({username:j,config:o,clientMetadata:t,session:We.Session,tokenOrchestrator:d}):We})}function es(e){return ne(this,null,function*(){let{challengeName:n,challengeParameters:t,availableChallenges:i}=e,r=Ht.getConfig().Auth?.Cognito;switch(Tt(r),n){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:t}};case"MFA_SETUP":{let{signInSession:o,username:d}=pa.getState(),g=kV(NV(t.MFAS_CAN_SETUP))||[],v=vse(g),x=v.includes("TOTP"),D=v.includes("EMAIL");if(x&&D)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:v}};if(D)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(x){let R=iV({endpointResolver:Xt({endpointOverride:r.userPoolEndpoint})}),{Session:L,SecretCode:j}=yield R({region:Jt(r.userPoolId)},{Session:o});return pa.dispatch({type:"SET_SIGN_IN_SESSION",value:L}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:fse(j,d)}}}throw new _t({name:Rs.SignInException,message:`Cannot initiate MFA setup from available types: ${g}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:mse(t.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:kV(NV(t.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:t.CODE_DELIVERY_DELIVERY_MEDIUM,destination:t.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:t.CODE_DELIVERY_DELIVERY_MEDIUM,destination:t.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":return wV(t);case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:i}}}throw new _t({name:Rs.SignInException,message:`An error occurred during the sign in process. ${n} challengeName returned by the underlying service was not addressed.`})})}function fse(e,n){return{sharedSecret:e,getSetupUri:(t,i)=>{let r=`otpauth://totp/${t}:${i??n}?secret=${e}&issuer=${t}`;return new Ms(r)}}}function ma(e){if(e===kx.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===kx.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function mse(e){return e?JSON.parse(e).map(t=>t.includes(MM)?t.replace(MM,""):t):[]}function gse(e){if(!e)return{};let n={};return Object.entries(e).forEach(([t,i])=>{i&&(n[`${MM}${t}`]=i)}),n}function zV(e,n,t,i,r,o,d,g){return ne(this,null,function*(){let v=g?.userAttributes,x=g?.friendlyDeviceName;switch(n){case"WEB_AUTHN":case"SELECT_CHALLENGE":return i==="PASSWORD_SRP"||i==="PASSWORD"?{ChallengeName:i,Session:t,$metadata:{}}:PV({username:e,session:t,selectedChallenge:i,config:r,clientMetadata:d});case"SELECT_MFA_TYPE":return dse({challengeResponse:i,clientMetadata:d,session:t,username:e,config:r});case"MFA_SETUP":return use({challengeResponse:i,clientMetadata:d,session:t,username:e,deviceName:x,config:r});case"NEW_PASSWORD_REQUIRED":return hse({challengeResponse:i,clientMetadata:d,session:t,username:e,requiredAttributes:v,config:r});case"CUSTOM_CHALLENGE":return Pl(cse,[{challengeResponse:i,clientMetadata:d,session:t,username:e,config:r,tokenOrchestrator:o}],e,o);case"SMS_MFA":case"SOFTWARE_TOKEN_MFA":case"SMS_OTP":case"EMAIL_OTP":return bse({challengeName:n,challengeResponse:i,clientMetadata:d,session:t,username:e,config:r});case"PASSWORD":return RV(e,i,d,r,t);case"PASSWORD_SRP":return OV(e,i,d,r,t,o)}throw new _t({name:Rs.SignInException,message:`An error occurred during the sign in process.
		${n} challengeName returned by the underlying service was not addressed.`})})}function yse(e){let n="SMS_MFA";return e==="TOTP"&&(n="SOFTWARE_TOKEN_MFA"),e==="EMAIL"&&(n="EMAIL_OTP"),n}function _se(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP";if(e==="EMAIL_OTP")return"EMAIL"}function kV(e){if(e)return e.map(_se).filter(Boolean)}function NV(e){return e?JSON.parse(e):[]}function vse(e){return e.filter(n=>n==="EMAIL"||n==="TOTP")}function Kx(){return ne(this,null,function*(){let e;try{e=yield Os()}catch{}if(e&&e.userId&&e.username)throw new _t({name:$3,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})})}function ts(r){return ne(this,arguments,function*({userPoolId:e,userPoolEndpoint:n,newDeviceMetadata:t,accessToken:i}){if(!t)return;let o=e.split("_")[1]||"",d=yield Xu(o),g=t?.DeviceKey,v=t?.DeviceGroupKey;try{yield d.generateHashDevice(v??"",g??"")}catch{return}let x={Salt:ua.convert(Ml(d.getSaltToHashDevices())),PasswordVerifier:ua.convert(Ml(d.getVerifierDevices()))},D=d.getRandomPassword();try{return yield rV({endpointResolver:Xt({endpointOverride:n})})({region:Jt(e)},{AccessToken:i,DeviceName:yield rM(),DeviceKey:t?.DeviceKey,DeviceSecretVerifierConfig:x}),{deviceKey:g,deviceGroupKey:v,randomPassword:D}}catch{return}})}function Pl(e,n,t,i){return ne(this,null,function*(){try{return yield e(...n)}catch(r){if(r instanceof _t&&r.name==="ResourceNotFoundException"&&r.message.includes("Device does not exist."))return yield i.clearDeviceMetadata(t),e(...n);throw r}})}function Ha(e){let{dispatch:n}=pa;n({type:"SET_USERNAME",value:e})}function Rl(e){return pa.getState().username??e}function bse(d){return ne(this,arguments,function*({challengeName:e,challengeResponse:n,clientMetadata:t,session:i,username:r,config:o}){let{userPoolId:g,userPoolClientId:v,userPoolEndpoint:x}=o,D={USERNAME:r};e==="EMAIL_OTP"&&(D.EMAIL_OTP_CODE=n),e==="SMS_MFA"&&(D.SMS_MFA_CODE=n),e==="SMS_OTP"&&(D.SMS_OTP_CODE=n),e==="SOFTWARE_TOKEN_MFA"&&(D.SOFTWARE_TOKEN_MFA_CODE=n);let R=ri({username:r,userPoolId:g,userPoolClientId:v}),L={ChallengeName:e,ChallengeResponses:D,Session:i,ClientMetadata:t,ClientId:v,UserContextData:R};return jr({endpointResolver:Xt({endpointOverride:x})})({region:Jt(g),userAgentValue:on(Ct.ConfirmSignIn)},L)})}function VV(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n);let{username:t,password:i,options:r}=e,o={loginId:t,authFlowType:"CUSTOM_WITHOUT_SRP"},d=r?.clientMetadata;Mn(!!t,Rt.EmptySignInUsername),Mn(!i,Rt.CustomAuthSignInPassword);try{let{ChallengeName:g,ChallengeParameters:v,AuthenticationResult:x,Session:D}=yield Pl(BV,[t,d,n,Ri],t,Ri),R=Rl(t);return Qo({signInSession:D,username:R,challengeName:g,signInDetails:o}),x?(Er(),yield to(Ie(q({username:R},x),{NewDeviceMetadata:yield ts({userPoolId:n.userPoolId,userPoolEndpoint:n.userPoolEndpoint,newDeviceMetadata:x.NewDeviceMetadata,accessToken:x.AccessToken}),signInDetails:o})),yield vo(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:g,challengeParameters:v})}catch(g){Er(),Vr(g);let v=ma(g.name);if(v)return v;throw g}})}function jV(e){return ne(this,null,function*(){let{username:n,password:t,options:i}=e,r={loginId:n,authFlowType:"CUSTOM_WITH_SRP"},o=Ht.getConfig().Auth?.Cognito;Tt(o);let d=i?.clientMetadata;Mn(!!n,Rt.EmptySignInUsername),Mn(!!t,Rt.EmptySignInPassword);try{let{ChallengeName:g,ChallengeParameters:v,AuthenticationResult:x,Session:D}=yield UV(n,t,d,o,Ri),R=Rl(n);return Qo({signInSession:D,username:R,challengeName:g,signInDetails:r}),x?(yield to(Ie(q({username:R},x),{NewDeviceMetadata:yield ts({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:x.NewDeviceMetadata,accessToken:x.AccessToken}),signInDetails:r})),Er(),yield vo(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:g,challengeParameters:v})}catch(g){Er(),Vr(g);let v=ma(g.name);if(v)return v;throw g}})}var HV=()=>ne(void 0,null,function*(){throw new _t({name:Nx,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})}),tv=HV;function nv(e){tv=e}function hr(e=!0){e&&(tv=HV),ha.dispatch({type:"RESET"})}function PM(e){return ne(this,null,function*(){let{username:n,password:t}=e,i=Ht.getConfig().Auth?.Cognito,r={loginId:n,authFlowType:"USER_SRP_AUTH"};Tt(i);let o=e.options?.clientMetadata;Mn(!!n,Rt.EmptySignInUsername),Mn(!!t,Rt.EmptySignInPassword);try{let{ChallengeName:d,ChallengeParameters:g,AuthenticationResult:v,Session:x}=yield LV(n,t,o,i,Ri),D=Rl(n);return Qo({signInSession:x,username:D,challengeName:d,signInDetails:r}),v?(Er(),yield to(Ie(q({username:D},v),{NewDeviceMetadata:yield ts({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:v.NewDeviceMetadata,accessToken:v.AccessToken}),signInDetails:r})),yield vo(),hr(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:d,challengeParameters:g})}catch(d){Er(),hr(),Vr(d);let g=ma(d.name);if(g)return g;throw d}})}function $V(e){return ne(this,null,function*(){let{username:n,password:t,options:i}=e,r=Ht.getConfig().Auth?.Cognito,o={loginId:n,authFlowType:"USER_PASSWORD_AUTH"};Tt(r);let d=i?.clientMetadata;Mn(!!n,Rt.EmptySignInUsername),Mn(!!t,Rt.EmptySignInPassword);try{let{ChallengeName:g,ChallengeParameters:v,AuthenticationResult:x,Session:D}=yield Pl(FV,[n,t,d,r,Ri],n,Ri),R=Rl(n);return Qo({signInSession:D,username:R,challengeName:g,signInDetails:o}),x?(Er(),yield to(Ie(q({},x),{username:R,NewDeviceMetadata:yield ts({userPoolId:r.userPoolId,userPoolEndpoint:r.userPoolEndpoint,newDeviceMetadata:x.NewDeviceMetadata,accessToken:x.AccessToken}),signInDetails:o})),yield vo(),hr(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:g,challengeParameters:v})}catch(g){Er(),hr(),Vr(g);let v=ma(g.name);if(v)return v;throw g}})}function GV(g){return ne(this,arguments,function*({username:e,clientMetadata:n,config:t,tokenOrchestrator:i,preferredChallenge:r,password:o,session:d}){let{userPoolId:v,userPoolClientId:x,userPoolEndpoint:D}=t,R=ri({username:e,userPoolId:v,userPoolClientId:x}),L={USERNAME:e};if(r){if(r==="PASSWORD_SRP")return Mn(!!o,Rt.EmptySignInPassword),Wx({username:e,password:o,clientMetadata:n,config:t,tokenOrchestrator:i,authFlow:"USER_AUTH",preferredChallenge:r});r==="PASSWORD"&&(Mn(!!o,Rt.EmptySignInPassword),L.PASSWORD=o),L.PREFERRED_CHALLENGE=r}let j={AuthFlow:"USER_AUTH",AuthParameters:L,ClientMetadata:n,ClientId:x,UserContextData:R};d&&(j.Session=d);let re=yield Dl({endpointResolver:Xt({endpointOverride:D})})({region:Jt(v),userAgentValue:on(Ct.SignIn)},j);return Ha(e),re})}function Yx(e){return ne(this,null,function*(){let{username:n,password:t,options:i}=e,r=Ht.getConfig().Auth?.Cognito,o={loginId:n,authFlowType:"USER_AUTH"};Tt(r);let d=i?.clientMetadata,g=i?.preferredChallenge;Mn(!!n,Rt.EmptySignInUsername);try{let v={username:n,config:r,tokenOrchestrator:Ri,clientMetadata:d,preferredChallenge:g,password:t},x=ha.getState();x.active&&x.username===n&&(v.session=x.session);let D=yield GV(v),R=Rl(n);return Qo({signInSession:D.Session,username:R,challengeName:D.ChallengeName,signInDetails:o}),D.AuthenticationResult?(Er(),yield to(Ie(q({username:R},D.AuthenticationResult),{NewDeviceMetadata:yield ts({userPoolId:r.userPoolId,userPoolEndpoint:r.userPoolEndpoint,newDeviceMetadata:D.AuthenticationResult.NewDeviceMetadata,accessToken:D.AuthenticationResult.AccessToken}),signInDetails:o})),yield vo(),hr(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:D.ChallengeName,challengeParameters:D.ChallengeParameters,availableChallenges:"AvailableChallenges"in D?D.AvailableChallenges:void 0})}catch(v){Er(),hr(),Vr(v);let x=ma(v.name);if(x)return x;throw v}})}function ym(e){return ne(this,null,function*(){hr(!1);let n=e.options?.authFlowType;switch(yield Kx(),n){case"USER_SRP_AUTH":return PM(e);case"USER_PASSWORD_AUTH":return $V(e);case"CUSTOM_WITHOUT_SRP":return VV(e);case"CUSTOM_WITH_SRP":return jV(e);case"USER_AUTH":return Yx(e);default:return PM(e)}})}var qV=3*60*1e3;function WV(e){let n=wh.listen("auth-internal",r=>ne(this,[r],function*({payload:i}){switch(i.event){case"confirmSignUp":i.data?.isSignUpComplete&&(wh.dispatch("auth-internal",{event:"autoSignIn"}),nv(YV(e)),n())}})),t=setTimeout(()=>{n(),clearTimeout(t),hr()},qV)}function ZV(e,n){let t;return i=>{t||e(...i),clearTimeout(t),t=setTimeout(()=>{t=void 0},n)}}function wse(e,n,t){let i=Date.now(),r=setInterval(()=>ne(this,null,function*(){if(Date.now()-i>qV)clearInterval(r),t(new _t({name:Nx,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),hr();else try{let g=yield ym(e);g.nextStep.signInStep!=="CONFIRM_SIGN_UP"&&(n(g),clearInterval(r),hr())}catch(g){clearInterval(r),t(g),hr()}}),5e3)}var xse=ZV(wse,300),Sse=ZV(Cse,300);function KV(e){return()=>ne(this,null,function*(){return new Promise((n,t)=>{xse([e,n,t])})})}function Cse(e,n,t){return ne(this,null,function*(){try{let i=e?.options?.authFlowType==="USER_AUTH"?yield Yx(e):yield ym(e);n(i),hr()}catch(i){t(i),hr()}})}function YV(e){return()=>ne(this,null,function*(){return new Promise((n,t)=>{Sse([e,n,t])})})}var JV=YV;var Ese=()=>e=>ne(void 0,null,function*(){if(e.statusCode>=300){let n=yield As(e);if(Vr(n),n.name===vM.InvalidParameterException&&/'password'/.test(n.message)&&/Member must not be null/.test(n.message)){let t=Rt.EmptySignUpPassword,{message:i,recoverySuggestion:r}=Ox[t];throw new _t({name:t,message:i,recoverySuggestion:r})}throw new _t({name:n.name,message:n.message})}return Cl(e)}),XV=e=>Nn(ni,ti("SignUp"),Ese(),q(q({},ii),e));function RM(e){return ne(this,null,function*(){let{username:n,password:t,options:i}=e,r=Ht.getConfig().Auth?.Cognito,o=r?.signUpVerificationMethod??"code",{clientMetadata:d,validationData:g,autoSignIn:v}=e.options??{};Tt(r),Mn(!!n,Rt.EmptySignUpUsername);let x=typeof v!="boolean"?v:void 0,D={username:n,options:x};x?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(D.password=t);let{userPoolId:R,userPoolClientId:L,userPoolEndpoint:j}=r,J=XV({endpointResolver:Xt({endpointOverride:j})}),re={Username:n,Password:void 0,UserAttributes:i?.userAttributes&&_M(i?.userAttributes),ClientMetadata:d,ValidationData:g&&_M(g),ClientId:L,UserContextData:ri({username:n,userPoolId:R,userPoolClientId:L})};t&&(re.Password=t);let{UserSub:be,CodeDeliveryDetails:xe,UserConfirmed:Pe,Session:Ne}=yield J({region:Jt(R),userAgentValue:on(Ct.SignUp)},re);(x||v===!0)&&(ha.dispatch({type:"START"}),ha.dispatch({type:"SET_USERNAME",value:n}),ha.dispatch({type:"SET_SESSION",value:Ne}));let Ve={destination:xe?.Destination,deliveryMedium:xe?.DeliveryMedium,attributeName:xe?.AttributeName},We=!!Pe,rt=ha.getState().active;if(We)return rt?(nv(JV(D)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:be}):{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:be};if(rt){if(o==="link")return nv(KV(D)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:Ve},userId:be};WV(D)}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:Ve},userId:be}})}var QV=e=>Nn(ni,ti("ForgotPassword"),_i(),q(q({},ii),e));function iv(e){return ne(this,null,function*(){let{username:n}=e;Mn(!!n,Rt.EmptyResetPasswordUsername);let t=Ht.getConfig().Auth?.Cognito;Tt(t);let{userPoolClientId:i,userPoolId:r,userPoolEndpoint:o}=t,d=e.options?.clientMetadata,g=ri({username:n,userPoolId:r,userPoolClientId:i}),D=(yield QV({endpointResolver:Xt({endpointOverride:o})})({region:Jt(r),userAgentValue:on(Ct.ResetPassword)},{Username:n,ClientMetadata:d,ClientId:i,UserContextData:g})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:D?.DeliveryMedium,destination:D?.Destination,attributeName:D?.AttributeName}}}})}var ej=e=>Nn(ni,ti("ConfirmForgotPassword"),_i(),q(q({},ii),e));function OM(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n);let{userPoolClientId:t,userPoolId:i,userPoolEndpoint:r}=n,{username:o,newPassword:d}=e;Mn(!!o,Rt.EmptyConfirmResetPasswordUsername),Mn(!!d,Rt.EmptyConfirmResetPasswordNewPassword);let g=e.confirmationCode;Mn(!!g,Rt.EmptyConfirmResetPasswordConfirmationCode);let v=e.options?.clientMetadata,x=ri({username:o,userPoolId:i,userPoolClientId:t});yield ej({endpointResolver:Xt({endpointOverride:r})})({region:Jt(n.userPoolId),userAgentValue:on(Ct.ConfirmResetPassword)},{Username:o,ConfirmationCode:g,Password:d,ClientMetadata:v,ClientId:n.userPoolClientId,UserContextData:x})})}var tj=e=>Nn(ni,ti("ResendConfirmationCode"),_i(),q(q({},ii),e));function rv(e){return ne(this,null,function*(){let{username:n}=e;Mn(!!n,Rt.EmptySignUpUsername);let t=Ht.getConfig().Auth?.Cognito;Tt(t);let{userPoolClientId:i,userPoolId:r,userPoolEndpoint:o}=t,d=e.options?.clientMetadata,g=ri({username:n,userPoolId:r,userPoolClientId:i}),v=tj({endpointResolver:Xt({endpointOverride:o})}),{CodeDeliveryDetails:x}=yield v({region:Jt(t.userPoolId),userAgentValue:on(Ct.ResendSignUpCode)},{Username:n,ClientMetadata:d,ClientId:t.userPoolClientId,UserContextData:g}),{DeliveryMedium:D,AttributeName:R,Destination:L}=q({},x);return{destination:L,deliveryMedium:D,attributeName:R||void 0}})}var nj=e=>Nn(ni,ti("ConfirmSignUp"),_i(),q(q({},ii),e));function kM(e){return ne(this,null,function*(){let{username:n,confirmationCode:t,options:i}=e,r=Ht.getConfig().Auth?.Cognito;Tt(r);let{userPoolId:o,userPoolClientId:d,userPoolEndpoint:g}=r,v=i?.clientMetadata;Mn(!!n,Rt.EmptyConfirmSignUpUsername),Mn(!!t,Rt.EmptyConfirmSignUpCode);let x=ri({username:n,userPoolId:o,userPoolClientId:d}),D=nj({endpointResolver:Xt({endpointOverride:g})}),{Session:R}=yield D({region:Jt(r.userPoolId),userAgentValue:on(Ct.ConfirmSignUp)},{Username:n,ConfirmationCode:t,ClientMetadata:v,ForceAliasCreation:i?.forceAliasCreation,ClientId:r.userPoolClientId,UserContextData:x});return new Promise((L,j)=>{try{let J={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},re=ha.getState();if(!re.active||re.username!==n){L(J),hr();return}ha.dispatch({type:"SET_SESSION",value:R});let be=wh.listen("auth-internal",({payload:xe})=>{switch(xe.event){case"autoSignIn":L({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),be()}});wh.dispatch("auth-internal",{event:"confirmSignUp",data:J})}catch(J){j(J)}})})}function ov(e){return ne(this,null,function*(){let{challengeResponse:n,options:t}=e,{username:i,challengeName:r,signInSession:o,signInDetails:d}=pa.getState(),g=Ht.getConfig().Auth?.Cognito;Tt(g);let v=t?.clientMetadata;if(Mn(!!n,Rt.EmptyChallengeResponse),!i||!r||!o)throw new _t({name:Rs.SignInException,message:`
			An error occurred during the sign in process.

			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the page is not refreshed until the sign in process is done."});try{let{Session:x,ChallengeName:D,AuthenticationResult:R,ChallengeParameters:L}=yield zV(i,r,o,n,g,Ri,v,t);return Qo({signInSession:x,username:i,challengeName:D,signInDetails:d}),R?(Er(),yield to(Ie(q({username:i},R),{NewDeviceMetadata:yield ts({userPoolId:g.userPoolId,userPoolEndpoint:g.userPoolEndpoint,newDeviceMetadata:R.NewDeviceMetadata,accessToken:R.AccessToken}),signInDetails:d})),yield vo(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):es({challengeName:D,challengeParameters:L})}catch(x){Vr(x);let D=ma(x.name);if(D)return D;throw x}})}var ij=e=>Nn(ni,ti("GetUser"),_i(),q(q({},ii),e));var rj=e=>Nn(ni,ti("VerifyUserAttribute"),_i(),q(q({},ii),e));function NM(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n);let{userPoolEndpoint:t,userPoolId:i}=n,{confirmationCode:r,userAttributeKey:o}=e;Mn(!!r,Rt.EmptyConfirmUserAttributeCode);let{tokens:d}=yield U_({forceRefresh:!1});Il(d),yield rj({endpointResolver:Xt({endpointOverride:t})})({region:Jt(i),userAgentValue:on(Ct.ConfirmUserAttribute)},{AccessToken:d.accessToken.toString(),AttributeName:o,Code:r})})}var T8e=new ui("AuthError");var oj={oauthSignInError:{message:zr.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:zr.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:zr.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:zr.EMPTY_USERNAME},invalidUsername:{message:zr.INVALID_USERNAME},emptyPassword:{message:zr.EMPTY_PASSWORD},emptyCode:{message:zr.EMPTY_CODE},signUpError:{message:zr.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:zr.NO_MFA},invalidMFA:{message:zr.INVALID_MFA},emptyChallengeResponse:{message:zr.EMPTY_CHALLENGE},noUserSession:{message:zr.NO_USER_SESSION},deviceConfig:{message:zr.DEVICE_CONFIG},networkError:{message:zr.NETWORK_ERROR},autoSignInError:{message:zr.AUTOSIGNIN_ERROR},default:{message:zr.DEFAULT_MSG}};var Ol=(e,n)=>new _t({message:e??"An error has occurred during the oauth process.",name:Rs.OAuthSignInError,recoverySuggestion:n??oj.oauthSignInError.log});var FM=function(e){return e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError",e}(FM||{});var Ise="`signInWithRedirect` has been canceled.",Dse="An error occurred while validating the state.",Tse="Try to initiate an OAuth flow from Amplify",LM=e=>ne(void 0,null,function*(){let n=yield dr.loadOAuthState(),t=e===n?n:void 0;if(!t)throw new _t({name:FM.OAuthSignInError,message:e===null?Ise:Dse,recoverySuggestion:e===null?void 0:Tse});return t});var Jx=g=>ne(void 0,[g],function*({currentUrl:e,userAgentValue:n,clientId:t,redirectUri:i,responseType:r,domain:o,preferPrivateSession:d}){let v=new Ms(e),x=v.searchParams.get("error"),D=v.searchParams.get("error_description");if(x)throw Ol(D??x);return r==="code"?Ase({currentUrl:e,userAgentValue:n,clientId:t,redirectUri:i,domain:o,preferPrivateSession:d}):Mse({currentUrl:e,redirectUri:i,preferPrivateSession:d})}),Ase=d=>ne(void 0,[d],function*({currentUrl:e,userAgentValue:n,clientId:t,redirectUri:i,domain:r,preferPrivateSession:o}){let g=new Ms(e),v=g.searchParams.get("code"),x=g.searchParams.get("state");if(!v||!x)throw Ol("User cancelled OAuth flow.");let D=yield LM(x),R="https://"+r+"/oauth2/token",L=yield dr.loadPKCE(),j=q({grant_type:"authorization_code",code:v,client_id:t,redirect_uri:i},L?{code_verifier:L}:{}),J=Object.entries(j).map(([gt,Gt])=>`${encodeURIComponent(gt)}=${encodeURIComponent(Gt)}`).join("&"),{access_token:re,refresh_token:be,id_token:xe,error:Pe,error_message:Ne,token_type:Ve,expires_in:We}=yield(yield fetch(R,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[HA]:n},body:J})).json();if(Pe)throw Ol(Ne??Pe);let rt=(re&&_o(re).payload.username)??"username";return yield to({username:rt,AccessToken:re,IdToken:xe,RefreshToken:be,TokenType:Ve,ExpiresIn:We}),sj({redirectUri:i,state:D,preferPrivateSession:o})}),Mse=i=>ne(void 0,[i],function*({currentUrl:e,redirectUri:n,preferPrivateSession:t}){let r=new Ms(e),{id_token:o,access_token:d,state:g,token_type:v,expires_in:x,error_description:D,error:R}=(r.hash??"#").substring(1).split("&").map(J=>J.split("=")).reduce((J,[re,be])=>Ie(q({},J),{[re]:be}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(R)throw Ol(D??R);if(!d)throw Ol("No access token returned from OAuth flow.");let L=yield LM(g),j=(d&&_o(d).payload.username)??"username";return yield to({username:j,AccessToken:d,IdToken:o,TokenType:v,ExpiresIn:x}),sj({redirectUri:n,state:L,preferPrivateSession:t})}),sj=i=>ne(void 0,[i],function*({redirectUri:e,state:n,preferPrivateSession:t}){yield Ri.setOAuthMetadata({oauthSignIn:!0}),yield dr.clearOAuthData(),yield dr.storeOAuthSignIn(!0,t),zx(),Pse(n)&&Xi.dispatch("auth",{event:"customOAuthState",data:tM(Rse(n))},"Auth",Ur),Xi.dispatch("auth",{event:"signInWithRedirect"},"Auth",Ur),yield vo(),Ose(e)}),Pse=e=>/-/.test(e),Rse=e=>e.split("-").splice(1).join("-"),Ose=e=>{typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",e)};function _m(e,n){if(n){let t=e?.find(i=>i===n);if(!t)throw W3;return t}else{let t=e?.find(kse)??e?.find(Nse),i=e?.find(Lse)??e?.find(Fse);if(t)return t;throw i?Z3:q3}}var kse=e=>e.startsWith(String(window.location.origin+window.location.pathname)),Nse=e=>e.includes(String(window.location.hostname)),Fse=e=>e.startsWith("http://"),Lse=e=>e.startsWith("https://");var vm=e=>ne(void 0,null,function*(){zx(),yield dr.clearOAuthInflightData(),Xi.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",Ur)});var aj=e=>ne(void 0,null,function*(){try{Tt(e),Sc(e),dr.setAuthConfig(e)}catch{return}if(yield dr.loadOAuthInFlight())try{let n=window.location.href,{loginWith:t,userPoolClientId:i}=e,{domain:r,redirectSignIn:o,responseType:d}=t.oauth,g=_m(o);yield Jx({currentUrl:n,clientId:i,domain:r,redirectUri:g,responseType:d,userAgentValue:on(Ct.SignInWithRedirect)})}catch(n){yield vm(n)}});Ec()&&Ht[O_](aj);var lj={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"};var Xx=e=>ne(void 0,null,function*(){window?.location&&(window.location.href=e.replace("http://","https://"))});var cj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",uj=e=>{let n=new Uint8Array(e);R_().getRandomValues(n);let t="",i;for(let r of n)t+=cj.charAt(r%cj.length);return{value:t,method:"S256",toCodeChallenge(){return i||(i=Bse(t),i)}}};function Bse(e){let n=new Cc;return n.update(e),Use(ua.convert(n.digestSync(),{urlSafe:!0}))}function Use(e){return e.replace(/=/g,"")}var dj=()=>eM(32);var hj=e=>{function n(t){return ne(this,null,function*(){if(t.persisted&&(yield e.loadOAuthInFlight())){let r=Ol("User cancelled OAuth flow.");yield vm(r)}window.removeEventListener("pageshow",n)})}window.addEventListener("pageshow",n)};function bm(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n),Sc(n),dr.setAuthConfig(n),yield Kx();let t="COGNITO";return typeof e?.provider=="string"?t=lj[e.provider]:e?.provider?.custom&&(t=e.provider.custom),zse({oauthConfig:n.loginWith.oauth,clientId:n.userPoolClientId,provider:t,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession})})}var zse=o=>ne(void 0,[o],function*({oauthConfig:e,provider:n,clientId:t,customState:i,preferPrivateSession:r}){let{domain:d,redirectSignIn:g,responseType:v,scopes:x}=e,D=dj(),R=i?`${D}-${nM(i)}`:D,{value:L,method:j,toCodeChallenge:J}=uj(128),re=_m(e.redirectSignIn);Ec()&&dr.storeOAuthInFlight(!0),dr.storeOAuthState(R),dr.storePKCE(L);let be=Object.entries(q({redirect_uri:re,response_type:v,client_id:t,identity_provider:n,scope:x.join(" "),state:R},v==="code"&&{code_challenge:J(),code_challenge_method:j})).map(([We,rt])=>`${encodeURIComponent(We)}=${encodeURIComponent(rt)}`).join("&"),xe=`https://${d}/oauth2/authorize?${be}`;hj(dr);let{type:Pe,error:Ne,url:Ve}=(yield Xx(xe))??{};try{if(Pe==="error")throw Ol(String(Ne));Pe==="success"&&Ve&&(yield Jx({currentUrl:Ve,clientId:t,domain:d,redirectUri:re,responseType:v,userAgentValue:on(Ct.SignInWithRedirect),preferPrivateSession:r}))}catch(We){throw yield vm(We),We}});var pj=e=>ne(void 0,null,function*(){let n=e.getConfig().Auth?.Cognito;Tt(n);let{userPoolEndpoint:t,userPoolId:i}=n,{tokens:r}=yield B_(e,{forceRefresh:!1});Il(r);let o=ij({endpointResolver:Xt({endpointOverride:t})}),{UserAttributes:d}=yield o({region:Jt(i),userAgentValue:on(Ct.FetchUserAttributes)},{AccessToken:r.accessToken.toString()});return H3(d)});var Dc=()=>pj(Ht);var fj=e=>ne(void 0,null,function*(){yield e.clearOAuthData(),Ri.clearTokens(),yield z_(),Xi.dispatch("auth",{event:"signedOut"},"Auth",Ur)});var mj=(e,n=!1,t)=>ne(void 0,null,function*(){Sc(e);let{loginWith:i,userPoolClientId:r}=e,{domain:o,redirectSignOut:d}=i.oauth,g=_m(d,t),v=`https://${o}/logout?${Object.entries({client_id:r,logout_uri:encodeURIComponent(g)}).map(([x,D])=>`${x}=${D}`).join("&")}`;return Xx(v)});var gj=(e,n,t,i)=>ne(void 0,null,function*(){let{isOAuthSignIn:r}=yield n.loadOAuthSignIn(),o=yield t.getOAuthMetadata();if(yield fj(n),r||o?.oauthSignIn)return mj(e,!1,i)});var yj=e=>Nn(ni,ti("RevokeToken"),_i(),q(q({},ii),e));var _j=e=>Nn(ni,ti("GlobalSignOut"),_i(),q(q({},ii),e));var vj=new ui("Auth");function BM(e){return ne(this,null,function*(){let n=Ht.getConfig().Auth?.Cognito;Tt(n),e?.global?yield jse(n):yield Vse(n);let t;try{Sc(n),t=!0}catch{t=!1}if(t){let i=new lm(Ps);i.setAuthConfig(n);let{type:r}=(yield gj(n,i,Ri,e?.oauth?.redirectUrl))??{};if(r==="error")throw new _t({name:K3,message:"An error occurred when attempting to log out from OAuth provider."})}else Ri.clearTokens(),yield z_(),Xi.dispatch("auth",{event:"signedOut"},"Auth",Ur)})}function Vse(e){return ne(this,null,function*(){try{let{userPoolEndpoint:n,userPoolId:t,userPoolClientId:i}=e,r=yield Ri.getTokenStore().loadTokens();Fx(r),Hse(r.accessToken)&&(yield yj({endpointResolver:Xt({endpointOverride:n})})({region:Jt(t),userAgentValue:on(Ct.SignOut)},{ClientId:i,Token:r.refreshToken}))}catch{vj.debug("Client signOut error caught but will proceed with token removal")}})}function jse(e){return ne(this,null,function*(){try{let{userPoolEndpoint:n,userPoolId:t}=e,i=yield Ri.getTokenStore().loadTokens();Il(i),yield _j({endpointResolver:Xt({endpointOverride:n})})({region:Jt(t),userAgentValue:on(Ct.SignOut)},{AccessToken:i.accessToken.toString()})}catch{vj.debug("Global signOut error caught but will proceed with token removal")}})}var Hse=e=>!!e?.payload?.origin_jti;var bj=e=>Nn(ni,ti("GetUserAttributeVerificationCode"),_i(),q(q({},ii),e));var UM=e=>ne(void 0,null,function*(){let{userAttributeKey:n,options:t}=e,i=Ht.getConfig().Auth?.Cognito,r=t?.clientMetadata;Tt(i);let{userPoolEndpoint:o,userPoolId:d}=i,{tokens:g}=yield U_({forceRefresh:!1});Il(g);let v=bj({endpointResolver:Xt({endpointOverride:o})}),{CodeDeliveryDetails:x}=yield v({region:Jt(d),userAgentValue:on(Ct.SendUserAttributeVerificationCode)},{AccessToken:g.accessToken.toString(),ClientMetadata:r,AttributeName:n}),{DeliveryMedium:D,AttributeName:R,Destination:L}=q({},x);return{destination:L,deliveryMedium:D,attributeName:R}});var wj={identityId:"identityId"};var $se=new ui("DefaultIdentityIdStore"),Qx=class{setAuthConfig(n){Sh(n.Cognito),this.authConfig=n,this._authKeys=Gse("Cognito",n.Cognito.identityPoolId)}constructor(n){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=n}loadIdentityId(){return ne(this,null,function*(){Sh(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let n=yield this.keyValueStorage.getItem(this._authKeys.identityId);return n?(this._hasGuestIdentityId=!0,{id:n,type:"guest"}):null}}catch(n){return $se.log("Error getting stored IdentityId.",n),null}})}storeIdentityId(n){return ne(this,null,function*(){Sh(this.authConfig?.Cognito),n.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,n.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=n.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))})}clearIdentityId(){return ne(this,null,function*(){this._primaryIdentityId=void 0,yield this.keyValueStorage.removeItem(this._authKeys.identityId)})}},Gse=(e,n)=>X_(wj)(`com.amplify.${e}`,n);function eS(e){let n=_o(e).payload.iss,t={};if(!n)throw new _t({name:"InvalidIdTokenException",message:"Invalid Idtoken."});let i=n.replace(/(^\w+:|^)\/\//,"");return t[i]=e,t}var qse=new ui("CognitoIdentityIdProvider");function Sj(i){return ne(this,arguments,function*({tokens:e,authConfig:n,identityIdStore:t}){t.setAuthConfig({Cognito:n});let r=yield t.loadIdentityId();if(e){if(r&&r.type==="primary")return r.id;{let o=e.idToken?eS(e.idToken.toString()):{},d=yield xj(o,n);r&&r.id===d&&qse.debug(`The guest identity ${r.id} has become the primary identity.`),r={id:d,type:"primary"}}}else{if(r&&r.type==="guest")return r.id;r={id:yield xj({},n),type:"guest"}}return t.storeIdentityId(r),r.id})}function xj(e,n){return ne(this,null,function*(){let t=n?.identityPoolId,i=J_(t),r=(yield YA({region:i},{IdentityPoolId:t,Logins:e})).IdentityId;if(!r)throw new _t({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return r})}var tS=new ui("CognitoCredentialsProvider"),Cj=50*60*1e3,nS=class{constructor(n){this._nextCredentialsRefresh=0,this._identityIdStore=n}clearCredentialsAndIdentityId(){return ne(this,null,function*(){tS.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,yield this._identityIdStore.clearIdentityId()})}clearCredentials(){return ne(this,null,function*(){tS.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0})}getCredentialsAndIdentityId(n){return ne(this,null,function*(){let t=n.authenticated,{tokens:i}=n,{authConfig:r}=n;try{Sh(r?.Cognito)}catch{return}if(!t&&!r.Cognito.allowGuestAccess)return;let{forceRefresh:o}=n,d=this.hasTokenChanged(i),g=yield Sj({tokens:i,authConfig:r.Cognito,identityIdStore:this._identityIdStore});return(o||d)&&this.clearCredentials(),t?(X3(i),this.credsForOIDCTokens(r.Cognito,i,g)):this.getGuestCredentials(g,r.Cognito)})}getGuestCredentials(n,t){return ne(this,null,function*(){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return tS.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=J_(t.identityPoolId),r=yield bx({region:i},{IdentityId:n});if(r.Credentials&&r.Credentials.AccessKeyId&&r.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+Cj;let o={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:n},d=r.IdentityId;return d&&(o.identityId=d,this._identityIdStore.storeIdentityId({id:d,type:"guest"})),this._credentialsAndIdentityId=Ie(q({},o),{isAuthenticatedCreds:!1}),o}else throw new _t({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}credsForOIDCTokens(n,t,i){return ne(this,null,function*(){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return tS.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let r=t.idToken?eS(t.idToken.toString()):{},o=J_(n.identityPoolId),d=yield bx({region:o},{IdentityId:i,Logins:r});if(d.Credentials&&d.Credentials.AccessKeyId&&d.Credentials.SecretKey){let g={credentials:{accessKeyId:d.Credentials.AccessKeyId,secretAccessKey:d.Credentials.SecretKey,sessionToken:d.Credentials.SessionToken,expiration:d.Credentials.Expiration},identityId:i};this._credentialsAndIdentityId=Ie(q({},g),{isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()}),this._nextCredentialsRefresh=new Date().getTime()+Cj;let v=d.IdentityId;return v&&(g.identityId=v,this._identityIdStore.storeIdentityId({id:v,type:"primary"})),g}else throw new _t({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(n){return!!n&&!!this._credentialsAndIdentityId?.associatedIdToken&&n.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}};var zM=new nS(new Qx(Ps));var sv={configure(e,n){let t=k_(e);if(!t.Auth){Ht.configure(t,n);return}if(n?.Auth){Ht.configure(t,n);return}if(!Ht.libraryOptions.Auth){kh.setAuthConfig(t.Auth),kh.setKeyValueStorage(n?.ssr?new Th({sameSite:"lax"}):Ps),Ht.configure(t,Ie(q({},n),{Auth:{tokenProvider:kh,credentialsProvider:zM}}));return}if(n){n.ssr!==void 0&&kh.setKeyValueStorage(n.ssr?new Th({sameSite:"lax"}):Ps),Ht.configure(t,q({Auth:Ht.libraryOptions.Auth},n));return}Ht.configure(t)},getConfig(){return Ht.getConfig()}};var Mm={};xk(Mm,{actionTypes:()=>GM,after:()=>QM,assign:()=>XM,cancel:()=>fS,choose:()=>qj,done:()=>Am,doneInvoke:()=>td,error:()=>nd,escalate:()=>eae,forwardTo:()=>eP,getActionFunction:()=>mv,initEvent:()=>Fl,isActionObject:()=>Qse,log:()=>jj,pure:()=>Gj,raise:()=>hS,resolveActions:()=>Uh,resolveLog:()=>Hj,resolveRaise:()=>Uj,resolveSend:()=>zj,resolveStop:()=>$j,respond:()=>Jse,send:()=>ed,sendParent:()=>pS,sendTo:()=>Vj,sendUpdate:()=>YM,start:()=>JM,stop:()=>mS,toActionObject:()=>zh,toActionObjects:()=>$a,toActivityDefinition:()=>gv});var Ue=function(){return Ue=Object.assign||function(n){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},Ue.apply(this,arguments)};function wm(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(t[i[r]]=e[i[r]]);return t}function bn(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],i=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sn(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var i=t.call(e),r,o=[],d;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(g){d={error:g}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(d)throw d.error}}return o}function Hn(e,n,t){if(t||arguments.length===2)for(var i=0,r=n.length,o;i<r;i++)(o||!(i in n))&&(o||(o=Array.prototype.slice.call(n,0,i)),o[i]=n[i]);return e.concat(o||Array.prototype.slice.call(n))}var $n=function(e){return e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose",e}($n||{}),kl=function(e){return e.Parent="#_parent",e.Internal="#_internal",e}(kl||{});var GM={};xk(GM,{after:()=>Wse,assign:()=>lv,cancel:()=>av,choose:()=>HM,doneState:()=>Zse,error:()=>cv,errorExecution:()=>Kse,errorPlatform:()=>iS,init:()=>jM,invoke:()=>Cm,log:()=>Sm,nullEvent:()=>VM,pure:()=>$M,raise:()=>Tc,send:()=>Qu,start:()=>xm,stop:()=>Nh,update:()=>Fh});var xm=$n.Start,Nh=$n.Stop,Tc=$n.Raise,Qu=$n.Send,av=$n.Cancel,VM=$n.NullEvent,lv=$n.Assign,Wse=$n.After,Zse=$n.DoneState,Sm=$n.Log,jM=$n.Init,Cm=$n.Invoke,Kse=$n.ErrorExecution,iS=$n.ErrorPlatform,cv=$n.ErrorCustom,Fh=$n.Update,HM=$n.Choose,$M=$n.Pure;var rS=".",qM={},oS="xstate.guard",Ej="";var oi=!0;var sS;function dv(e,n,t){t===void 0&&(t=rS);var i=Em(e,t),r=Em(n,t);return Dn(r)?Dn(i)?r===i:!1:Dn(i)?i in r:Object.keys(i).every(function(o){return o in r?dv(i[o],r[o]):!1})}function aS(e){try{return Dn(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function lS(e,n){try{return Ac(e)?e:e.toString().split(n)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function Yse(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function Em(e,n){if(Yse(e))return e.value;if(Ac(e))return uv(e);if(typeof e!="string")return e;var t=lS(e,n);return uv(t)}function uv(e){if(e.length===1)return e[0];for(var n={},t=n,i=0;i<e.length-1;i++)i===e.length-2?t[e[i]]=e[i+1]:(t[e[i]]={},t=t[e[i]]);return n}function Im(e,n){for(var t={},i=Object.keys(e),r=0;r<i.length;r++){var o=i[r];t[o]=n(e[o],o,e,r)}return t}function WM(e,n,t){var i,r,o={};try{for(var d=bn(Object.keys(e)),g=d.next();!g.done;g=d.next()){var v=g.value,x=e[v];t(x)&&(o[v]=n(x,v,e))}}catch(D){i={error:D}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}return o}var Ij=function(e){return function(n){var t,i,r=n;try{for(var o=bn(e),d=o.next();!d.done;d=o.next()){var g=d.value;r=r[g]}}catch(v){t={error:v}}finally{try{d&&!d.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return r}};function Dj(e,n){return function(t){var i,r,o=t;try{for(var d=bn(e),g=d.next();!g.done;g=d.next()){var v=g.value;o=o[n][v]}}catch(x){i={error:x}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}return o}}function hv(e){if(!e)return[[]];if(Dn(e))return[[e]];var n=Ci(Object.keys(e).map(function(t){var i=e[t];return typeof i!="string"&&(!i||!Object.keys(i).length)?[[t]]:hv(e[t]).map(function(r){return[t].concat(r)})}));return n}function Ci(e){var n;return(n=[]).concat.apply(n,Hn([],Sn(e),!1))}function Tj(e){return Ac(e)?e:[e]}function ks(e){return e===void 0?[]:Tj(e)}function Lh(e,n,t){var i,r;if(Pn(e))return e(n,t.data);var o={};try{for(var d=bn(Object.keys(e)),g=d.next();!g.done;g=d.next()){var v=g.value,x=e[v];Pn(x)?o[v]=x(n,t.data):o[v]=x}}catch(D){i={error:D}}finally{try{g&&!g.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}return o}function Aj(e){return/^(done|error)\./.test(e)}function ZM(e){return!!(e instanceof Promise||e!==null&&(Pn(e)||typeof e=="object")&&Pn(e.then))}function Mj(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function Pj(e,n){var t,i,r=Sn([[],[]],2),o=r[0],d=r[1];try{for(var g=bn(e),v=g.next();!v.done;v=g.next()){var x=v.value;n(x)?o.push(x):d.push(x)}}catch(D){t={error:D}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(t)throw t.error}}return[o,d]}function Rj(e,n){return Im(e.states,function(t,i){if(t){var r=(Dn(n)?void 0:n[i])||(t?t.current:void 0);if(r)return{current:r,states:Rj(t,r)}}})}function Oj(e,n){return{current:n,states:Rj(e,n)}}function KM(e,n,t,i){oi||er(!!e,"Attempting to update undefined context");var r=e&&t.reduce(function(o,d){var g,v,x=d.assignment,D={state:i,action:d,_event:n},R={};if(Pn(x))R=x(o,n.data,D);else try{for(var L=bn(Object.keys(x)),j=L.next();!j.done;j=L.next()){var J=j.value,re=x[J];R[J]=Pn(re)?re(o,n.data,D):re}}catch(be){g={error:be}}finally{try{j&&!j.done&&(v=L.return)&&v.call(L)}finally{if(g)throw g.error}}return Object.assign({},o,R)},e);return r}var er=function(){};oi||(er=function(e,n){var t=e instanceof Error?e:void 0;if(!(!t&&e)&&console!==void 0){var i=["Warning: ".concat(n)];t&&i.push(t),console.warn.apply(console,i)}});function Ac(e){return Array.isArray(e)}function Pn(e){return typeof e=="function"}function Dn(e){return typeof e=="string"}function cS(e,n){if(e)return Dn(e)?{type:oS,name:e,predicate:n?n[e]:void 0}:Pn(e)?{type:oS,name:e.name,predicate:e}:e}function kj(e){try{return"subscribe"in e&&Pn(e.subscribe)}catch{return!1}}var Nl=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),bqe=(sS={},sS[Nl]=function(){return this},sS[Symbol.observable]=function(){return this},sS);function ga(e){return!!e&&"__xstatenode"in e}function Nj(e){return!!e&&typeof e.send=="function"}var Fj=function(){var e=0;return function(){return e++,e.toString(16)}}();function Dm(e,n){return Dn(e)||typeof e=="number"?Ue({type:e},n):e}function pr(e,n){if(!Dn(e)&&"$$type"in e&&e.$$type==="scxml")return e;var t=Dm(e);return Ue({name:t.type,data:t,$$type:"scxml",type:"external"},n)}function Bh(e,n){var t=Tj(n).map(function(i){return typeof i>"u"||typeof i=="string"||ga(i)?{target:i,event:e}:Ue(Ue({},i),{event:e})});return t}function Lj(e){if(!(e===void 0||e===Ej))return ks(e)}function Bj(e,n,t){if(!oi){var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===n)console.error("Missing onError handler for invocation '".concat(t,"', error was '").concat(e,"'.").concat(i));else{var r=n.stack?" Stacktrace was '".concat(n.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(t,"'. ")+"Original error: '".concat(e,"'. ").concat(i," Current error is '").concat(n,"'.").concat(r))}}}function uS(e,n,t,i,r){var o=e.options.guards,d={state:r,cond:n,_event:i};if(n.type===oS)return(o?.[n.name]||n.predicate)(t,i.data,d);var g=o?.[n.type];if(!g)throw new Error("Guard '".concat(n.type,"' is not implemented on machine '").concat(e.id,"'."));return g(t,i.data,d)}function dS(e){return typeof e=="string"?{type:e}:e}function Tm(e,n,t){var i=function(){},r=typeof e=="object",o=r?e:null;return{next:((r?e.next:e)||i).bind(o),error:((r?e.error:n)||i).bind(o),complete:((r?e.complete:t)||i).bind(o)}}function pv(e,n){return"".concat(e,":invocation[").concat(n,"]")}function fv(e){return(e.type===Tc||e.type===Qu&&e.to===kl.Internal)&&typeof e.delay!="number"}var Fl=pr({type:jM});function mv(e,n){return n&&n[e]||void 0}function zh(e,n){var t;if(Dn(e)||typeof e=="number"){var i=mv(e,n);Pn(i)?t={type:e,exec:i}:i?t=i:t={type:e,exec:void 0}}else if(Pn(e))t={type:e.name||e.toString(),exec:e};else{var i=mv(e.type,n);if(Pn(i))t=Ue(Ue({},e),{exec:i});else if(i){var r=i.type||e.type;t=Ue(Ue(Ue({},i),e),{type:r})}else t=e}return t}var $a=function(e,n){if(!e)return[];var t=Ac(e)?e:[e];return t.map(function(i){return zh(i,n)})};function gv(e){var n=zh(e);return Ue(Ue({id:Dn(e)?e:n.id},n),{type:n.type})}function hS(e,n){return{type:Tc,event:typeof e=="function"?e:Dm(e),delay:n?n.delay:void 0,id:n?.id}}function Uj(e,n,t,i){var r={_event:t},o=pr(Pn(e.event)?e.event(n,t.data,r):e.event),d;if(Dn(e.delay)){var g=i&&i[e.delay];d=Pn(g)?g(n,t.data,r):g}else d=Pn(e.delay)?e.delay(n,t.data,r):e.delay;return Ue(Ue({},e),{type:Tc,_event:o,delay:d})}function ed(e,n){return{to:n?n.to:void 0,type:Qu,event:Pn(e)?e:Dm(e),delay:n?n.delay:void 0,id:n&&n.id!==void 0?n.id:Pn(e)?e.name:aS(e)}}function zj(e,n,t,i){var r={_event:t},o=pr(Pn(e.event)?e.event(n,t.data,r):e.event),d;if(Dn(e.delay)){var g=i&&i[e.delay];d=Pn(g)?g(n,t.data,r):g}else d=Pn(e.delay)?e.delay(n,t.data,r):e.delay;var v=Pn(e.to)?e.to(n,t.data,r):e.to;return Ue(Ue({},e),{to:v,_event:o,event:o.data,delay:d})}function pS(e,n){return ed(e,Ue(Ue({},n),{to:kl.Parent}))}function Vj(e,n,t){return ed(n,Ue(Ue({},t),{to:e}))}function YM(){return pS(Fh)}function Jse(e,n){return ed(e,Ue(Ue({},n),{to:function(t,i,r){var o=r._event;return o.origin}}))}var Xse=function(e,n){return{context:e,event:n}};function jj(e,n){return e===void 0&&(e=Xse),{type:Sm,label:n,expr:e}}var Hj=function(e,n,t){return Ue(Ue({},e),{value:Dn(e.expr)?e.expr:e.expr(n,t.data,{_event:t})})},fS=function(e){return{type:av,sendId:e}};function JM(e){var n=gv(e);return{type:$n.Start,activity:n,exec:void 0}}function mS(e){var n=Pn(e)?e:gv(e);return{type:$n.Stop,activity:n,exec:void 0}}function $j(e,n,t){var i=Pn(e.activity)?e.activity(n,t.data):e.activity,r=typeof i=="string"?{id:i}:i,o={type:$n.Stop,activity:r};return o}var XM=function(e){return{type:lv,assignment:e}};function Qse(e){return typeof e=="object"&&"type"in e}function QM(e,n){var t=n?"#".concat(n):"";return"".concat($n.After,"(").concat(e,")").concat(t)}function Am(e,n){var t="".concat($n.DoneState,".").concat(e),i={type:t,data:n};return i.toString=function(){return t},i}function td(e,n){var t="".concat($n.DoneInvoke,".").concat(e),i={type:t,data:n};return i.toString=function(){return t},i}function nd(e,n){var t="".concat($n.ErrorPlatform,".").concat(e),i={type:t,data:n};return i.toString=function(){return t},i}function Gj(e){return{type:$n.Pure,get:e}}function eP(e,n){if(!oi&&(!e||typeof e=="function")){var t=e;e=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=typeof t=="function"?t.apply(void 0,Hn([],Sn(i),!1)):t;if(!o)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return o}}return ed(function(i,r){return r},Ue(Ue({},n),{to:e}))}function eae(e,n){return pS(function(t,i,r){return{type:cv,data:Pn(e)?e(t,i,r):e}},Ue(Ue({},n),{to:kl.Parent}))}function qj(e){return{type:$n.Choose,conds:e}}var tae=function(e){var n,t,i=[];try{for(var r=bn(e),o=r.next();!o.done;o=r.next())for(var d=o.value,g=0;g<d.actions.length;){if(d.actions[g].type===lv){i.push(d.actions[g]),d.actions.splice(g,1);continue}g++}}catch(v){n={error:v}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return i};function Uh(e,n,t,i,r,o,d){d===void 0&&(d=!1);var g=d?[]:tae(r),v=g.length?KM(t,i,g,n):t,x=d?[t]:void 0,D=[];function R(J,re){var be;switch(re.type){case Tc:{var xe=Uj(re,v,i,e.options.delays);return o&&typeof xe.delay=="number"&&o(xe,v,i),xe}case Qu:var Pe=zj(re,v,i,e.options.delays);if(!oi){var Ne=re.delay;er(!Dn(Ne)||typeof Pe.delay=="number","No delay reference for delay expression '".concat(Ne,"' was found on machine '").concat(e.id,"'"))}return o&&Pe.to!==kl.Internal&&(J==="entry"?D.push(Pe):o(Pe,v,i)),Pe;case Sm:{var Ve=Hj(re,v,i);return o?.(Ve,v,i),Ve}case HM:{var We=re,rt=(be=We.conds.find(function(mr){var tr=cS(mr.cond,e.options.guards);return!tr||uS(e,tr,v,i,o?void 0:n)}))===null||be===void 0?void 0:be.actions;if(!rt)return[];var gt=Sn(Uh(e,n,v,i,[{type:J,actions:$a(ks(rt),e.options.actions)}],o,d),2),Gt=gt[0],st=gt[1];return v=st,x?.push(v),Gt}case $M:{var rt=re.get(v,i.data);if(!rt)return[];var Gn=Sn(Uh(e,n,v,i,[{type:J,actions:$a(ks(rt),e.options.actions)}],o,d),2),Et=Gn[0],en=Gn[1];return v=en,x?.push(v),Et}case Nh:{var Ve=$j(re,v,i);return o?.(Ve,t,i),Ve}case lv:{v=KM(v,i,[re],o?void 0:n),x?.push(v);break}default:var Qt=zh(re,e.options.actions),Ei=Qt.exec;if(o)o(Qt,v,i);else if(Ei&&x){var qi=x.length-1,Ls=Ue(Ue({},Qt),{exec:function(mr){for(var tr=[],Jn=1;Jn<arguments.length;Jn++)tr[Jn-1]=arguments[Jn];Ei.apply(void 0,Hn([x[qi]],Sn(tr),!1))}});Qt=Ls}return Qt}}function L(J){var re,be,xe=[];try{for(var Pe=bn(J.actions),Ne=Pe.next();!Ne.done;Ne=Pe.next()){var Ve=Ne.value,We=R(J.type,Ve);We&&(xe=xe.concat(We))}}catch(rt){re={error:rt}}finally{try{Ne&&!Ne.done&&(be=Pe.return)&&be.call(Pe)}finally{if(re)throw re.error}}return D.forEach(function(rt){o(rt,v,i)}),D.length=0,xe}var j=Ci(r.map(L));return[j,v]}var gS=[],id=function(e,n){gS.push(e);var t=n(e);return gS.pop(),t},Wj=function(e){return e(gS[gS.length-1])};function Zj(e){var n;return n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},n[Nl]=function(){return this},n}function Kj(e,n,t,i){var r,o=dS(e.src),d=(r=n?.options.services)===null||r===void 0?void 0:r[o.type],g=e.data?Lh(e.data,t,i):void 0,v=d?yS(d,e.id,g):Zj(e.id);return v.meta=e,v}function yS(e,n,t){var i=Zj(n);if(i.deferred=!0,ga(e)){var r=i.state=id(void 0,function(){return(t?e.withContext(t):e).initialState});i.getSnapshot=function(){return r}}return i}function nae(e){try{return typeof e.send=="function"}catch{return!1}}function Yj(e){return nae(e)&&"id"in e}function Jj(e){var n;return Ue((n={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},n[Nl]=function(){return this},n),e)}var yv=function(e){return e.type==="atomic"||e.type==="final"};function nP(e){return Object.keys(e.states).map(function(n){return e.states[n]})}function Pm(e){return nP(e).filter(function(n){return n.type!=="history"})}function iP(e){var n=[e];return yv(e)?n:n.concat(Ci(Pm(e).map(iP)))}function Rm(e,n){var t,i,r,o,d,g,v,x,D=new Set(e),R=tP(D),L=new Set(n);try{for(var j=bn(L),J=j.next();!J.done;J=j.next())for(var re=J.value,be=re.parent;be&&!L.has(be);)L.add(be),be=be.parent}catch(st){t={error:st}}finally{try{J&&!J.done&&(i=j.return)&&i.call(j)}finally{if(t)throw t.error}}var xe=tP(L);try{for(var Pe=bn(L),Ne=Pe.next();!Ne.done;Ne=Pe.next()){var re=Ne.value;if(re.type==="compound"&&(!xe.get(re)||!xe.get(re).length))R.get(re)?R.get(re).forEach(function(Gn){return L.add(Gn)}):re.initialStateNodes.forEach(function(Gn){return L.add(Gn)});else if(re.type==="parallel")try{for(var Ve=(d=void 0,bn(Pm(re))),We=Ve.next();!We.done;We=Ve.next()){var rt=We.value;L.has(rt)||(L.add(rt),R.get(rt)?R.get(rt).forEach(function(Gn){return L.add(Gn)}):rt.initialStateNodes.forEach(function(Gn){return L.add(Gn)}))}}catch(Gn){d={error:Gn}}finally{try{We&&!We.done&&(g=Ve.return)&&g.call(Ve)}finally{if(d)throw d.error}}}}catch(st){r={error:st}}finally{try{Ne&&!Ne.done&&(o=Pe.return)&&o.call(Pe)}finally{if(r)throw r.error}}try{for(var gt=bn(L),Gt=gt.next();!Gt.done;Gt=gt.next())for(var re=Gt.value,be=re.parent;be&&!L.has(be);)L.add(be),be=be.parent}catch(st){v={error:st}}finally{try{Gt&&!Gt.done&&(x=gt.return)&&x.call(gt)}finally{if(v)throw v.error}}return L}function Xj(e,n){var t=n.get(e);if(!t)return{};if(e.type==="compound"){var i=t[0];if(i){if(yv(i))return i.key}else return{}}var r={};return t.forEach(function(o){r[o.key]=Xj(o,n)}),r}function tP(e){var n,t,i=new Map;try{for(var r=bn(e),o=r.next();!o.done;o=r.next()){var d=o.value;i.has(d)||i.set(d,[]),d.parent&&(i.has(d.parent)||i.set(d.parent,[]),i.get(d.parent).push(d))}}catch(g){n={error:g}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return i}function Qj(e,n){var t=Rm([e],n);return Xj(e,tP(t))}function Om(e,n){return Array.isArray(e)?e.some(function(t){return t===n}):e instanceof Set?e.has(n):!1}function e5(e){return Hn([],Sn(new Set(Ci(Hn([],Sn(e.map(function(n){return n.ownEvents})),!1)))),!1)}function _v(e,n){return n.type==="compound"?Pm(n).some(function(t){return t.type==="final"&&Om(e,t)}):n.type==="parallel"?Pm(n).every(function(t){return _v(e,t)}):!1}function t5(e){return e===void 0&&(e=[]),e.reduce(function(n,t){return t.meta!==void 0&&(n[t.id]=t.meta),n},{})}function rP(e){return new Set(Ci(e.map(function(n){return n.tags})))}function oP(e,n){if(e===n)return!0;if(e===void 0||n===void 0)return!1;if(Dn(e)||Dn(n))return e===n;var t=Object.keys(e),i=Object.keys(n);return t.length===i.length&&t.every(function(r){return oP(e[r],n[r])})}function n5(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function i5(e,n){var t=e.exec,i=Ue(Ue({},e),{exec:t!==void 0?function(){return t(n.context,n.event,{action:e,state:n,_event:n._event})}:void 0});return i}var ya=function(){function e(n){var t=this,i;this.actions=[],this.activities=qM,this.meta={},this.events=[],this.value=n.value,this.context=n.context,this._event=n._event,this._sessionid=n._sessionid,this.event=this._event.data,this.historyValue=n.historyValue,this.history=n.history,this.actions=n.actions||[],this.activities=n.activities||qM,this.meta=t5(n.configuration),this.events=n.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=n.configuration,this.transitions=n.transitions,this.children=n.children,this.done=!!n.done,this.tags=(i=Array.isArray(n.tags)?new Set(n.tags):n.tags)!==null&&i!==void 0?i:new Set,this.machine=n.machine,Object.defineProperty(this,"nextEvents",{get:function(){return e5(t.configuration)}})}return e.from=function(n,t){if(n instanceof e)return n.context!==t?new e({value:n.value,context:t,_event:n._event,_sessionid:null,historyValue:n.historyValue,history:n.history,actions:[],activities:n.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):n;var i=Fl;return new e({value:n,context:t,_event:i,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(n){return new e(n)},e.inert=function(n,t){if(n instanceof e){if(!n.actions.length)return n;var i=Fl;return new e({value:n.value,context:t,_event:i,_sessionid:null,historyValue:n.historyValue,history:n.history,activities:n.activities,configuration:n.configuration,transitions:[],children:{}})}return e.from(n,t)},e.prototype.toStrings=function(n,t){var i=this;if(n===void 0&&(n=this.value),t===void 0&&(t="."),Dn(n))return[n];var r=Object.keys(n);return r.concat.apply(r,Hn([],Sn(r.map(function(o){return i.toStrings(n[o],t).map(function(d){return o+t+d})})),!1))},e.prototype.toJSON=function(){var n=this;n.configuration,n.transitions;var t=n.tags;n.machine;var i=wm(n,["configuration","transitions","tags","machine"]);return Ue(Ue({},i),{tags:Array.from(t)})},e.prototype.matches=function(n){return dv(n,this.value)},e.prototype.hasTag=function(n){return this.tags.has(n)},e.prototype.can=function(n){var t;oi&&er(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var i=(t=this.machine)===null||t===void 0?void 0:t.getTransitionData(this,n);return!!i?.transitions.length&&i.transitions.some(function(r){return r.target!==void 0||r.actions.length})},e}();var iae={deferEvents:!1},sP=function(){function e(n){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=Ue(Ue({},iae),n)}return e.prototype.initialize=function(n){if(this.initialized=!0,n){if(!this.options.deferEvents){this.schedule(n);return}this.process(n)}this.flushEvents()},e.prototype.schedule=function(n){if(!this.initialized||this.processingEvent){this.queue.push(n);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(n),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var n=this.queue.shift();n;)this.process(n),n=this.queue.shift()},e.prototype.process=function(n){this.processingEvent=!0;try{n()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},e}();var aP=new Map,rae=0,km={bookId:function(){return"x:".concat(rae++)},register:function(e,n){return aP.set(e,n),e},get:function(e){return aP.get(e)},free:function(e){aP.delete(e)}};function _S(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;oi||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function oae(){var e=_S();if(e&&"__xstate__"in e)return e.__xstate__}function r5(e){if(_S()){var n=oae();n&&n.register(e)}}function o5(e,n){n===void 0&&(n={});var t=e.initialState,i=new Set,r=[],o=!1,d=function(){if(!o){for(o=!0;r.length>0;){var x=r.shift();t=e.transition(t,x,v),i.forEach(function(D){return D.next(t)})}o=!1}},g=Jj({id:n.id,send:function(x){r.push(x),d()},getSnapshot:function(){return t},subscribe:function(x,D,R){var L=Tm(x,D,R);return i.add(L),L.next(t),{unsubscribe:function(){i.delete(L)}}}}),v={parent:n.parent,self:g,id:n.id||"anonymous",observers:i};return t=e.start?e.start(v):t,g}var lP={sync:!1,autoForward:!1},Ir=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e}(Ir||{}),s5=function(){function e(n,t){t===void 0&&(t=e.defaultOptions);var i=this;this.machine=n,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Ir.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(D,R){if(Ac(D))return i.batch(D),i.state;var L=pr(Dm(D,R));if(i.status===Ir.Stopped)return oi||er(!1,'Event "'.concat(L.name,'" was sent to stopped service "').concat(i.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(L.data))),i.state;if(i.status!==Ir.Running&&!i.options.deferEvents)throw new Error('Event "'.concat(L.name,'" was sent to uninitialized service "').concat(i.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(L.data)));return i.scheduler.schedule(function(){i.forward(L);var j=i._nextState(L);i.update(j,L)}),i._state},this.sendTo=function(D,R,L){var j=i.parent&&(R===kl.Parent||i.parent.id===R),J=j?i.parent:Dn(R)?R===kl.Internal?i:i.children.get(R)||km.get(R):Nj(R)?R:void 0;if(!J){if(!j)throw new Error("Unable to send event to child '".concat(R,"' from service '").concat(i.id,"'."));oi||er(!1,"Service '".concat(i.id,"' has no parent: unable to send event ").concat(D.type));return}if("machine"in J){if(i.status!==Ir.Stopped||i.parent!==J||i.state.done){var re=Ue(Ue({},D),{name:D.name===cv?"".concat(nd(i.id)):D.name,origin:i.sessionId});!L&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([J,re]):J.send(re)}}else!L&&i.machine.config.predictableActionArguments?i._outgoingQueue.push([J,D.data]):J.send(D.data)},this._exec=function(D,R,L,j){j===void 0&&(j=i.machine.options.actions);var J=D.exec||mv(D.type,j),re=Pn(J)?J:J?J.exec:D.exec;if(re)try{return re(R,L.data,i.machine.config.predictableActionArguments?{action:D,_event:L}:{action:D,state:i.state,_event:L})}catch(Ei){throw i.parent&&i.parent.send({type:"xstate.error",data:Ei}),Ei}switch(D.type){case Tc:{var be=D;i.defer(be);break}case Qu:var xe=D;if(typeof xe.delay=="number"){i.defer(xe);return}else xe.to?i.sendTo(xe._event,xe.to,L===Fl):i.send(xe._event);break;case av:i.cancel(D.sendId);break;case xm:{if(i.status!==Ir.Running)return;var Pe=D.activity;if(!i.machine.config.predictableActionArguments&&!i.state.activities[Pe.id||Pe.type])break;if(Pe.type===$n.Invoke){var Ne=dS(Pe.src),Ve=i.machine.options.services?i.machine.options.services[Ne.type]:void 0,We=Pe.id,rt=Pe.data;oi||er(!("forward"in Pe),"`forward` property is deprecated (found in invocation of '".concat(Pe.src,"' in in machine '").concat(i.machine.id,"'). ")+"Please use `autoForward` instead.");var gt="autoForward"in Pe?Pe.autoForward:!!Pe.forward;if(!Ve){oi||er(!1,"No service found for invocation '".concat(Pe.src,"' in machine '").concat(i.machine.id,"'."));return}var Gt=rt?Lh(rt,R,L):void 0;if(typeof Ve=="string")return;var st=Pn(Ve)?Ve(R,L.data,{data:Gt,src:Ne,meta:Pe.meta}):Ve;if(!st)return;var Gn=void 0;ga(st)&&(st=Gt?st.withContext(Gt):st,Gn={autoForward:gt}),i.spawn(st,We,Gn)}else i.spawnActivity(Pe);break}case Nh:{i.stopChild(D.activity.id);break}case Sm:var Et=D,en=Et.label,Qt=Et.value;en?i.logger(en,Qt):i.logger(Qt);break;default:oi||er(!1,"No implementation found for action type '".concat(D.type,"'"));break}};var r=Ue(Ue({},e.defaultOptions),t),o=r.clock,d=r.logger,g=r.parent,v=r.id,x=v!==void 0?v:n.id;this.id=x,this.logger=d,this.clock=o,this.parent=g,this.options=r,this.scheduler=new sP({deferEvents:this.options.deferEvents}),this.sessionId=km.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var n=this;return this._initialState?this._initialState:id(this,function(){return n._initialState=n.machine.initialState,n._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return oi||er(this.status!==Ir.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(n,t){var i,r;try{for(var o=bn(n.actions),d=o.next();!d.done;d=o.next()){var g=d.value;this.exec(g,n,t)}}catch(v){i={error:v}}finally{try{d&&!d.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},e.prototype.update=function(n,t){var i,r,o,d,g,v,x,D,R=this;if(n._sessionid=this.sessionId,this._state=n,(!this.machine.config.predictableActionArguments||t===Fl)&&this.options.execute)this.execute(this.state);else for(var L=void 0;L=this._outgoingQueue.shift();)L[0].send(L[1]);if(this.children.forEach(function(st){R.state.children[st.id]=st}),this.devTools&&this.devTools.send(t.data,n),n.event)try{for(var j=bn(this.eventListeners),J=j.next();!J.done;J=j.next()){var re=J.value;re(n.event)}}catch(st){i={error:st}}finally{try{J&&!J.done&&(r=j.return)&&r.call(j)}finally{if(i)throw i.error}}try{for(var be=bn(this.listeners),xe=be.next();!xe.done;xe=be.next()){var re=xe.value;re(n,n.event)}}catch(st){o={error:st}}finally{try{xe&&!xe.done&&(d=be.return)&&d.call(be)}finally{if(o)throw o.error}}try{for(var Pe=bn(this.contextListeners),Ne=Pe.next();!Ne.done;Ne=Pe.next()){var Ve=Ne.value;Ve(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(st){g={error:st}}finally{try{Ne&&!Ne.done&&(v=Pe.return)&&v.call(Pe)}finally{if(g)throw g.error}}if(this.state.done){var We=n.configuration.find(function(st){return st.type==="final"&&st.parent===R.machine}),rt=We&&We.doneData?Lh(We.doneData,n.context,t):void 0;this._doneEvent=td(this.id,rt);try{for(var gt=bn(this.doneListeners),Gt=gt.next();!Gt.done;Gt=gt.next()){var re=Gt.value;re(this._doneEvent)}}catch(st){x={error:st}}finally{try{Gt&&!Gt.done&&(D=gt.return)&&D.call(gt)}finally{if(x)throw x.error}}this._stop(),this._stopChildren(),km.free(this.sessionId)}},e.prototype.onTransition=function(n){return this.listeners.add(n),this.status===Ir.Running&&n(this.state,this.state.event),this},e.prototype.subscribe=function(n,t,i){var r=this,o=Tm(n,t,i);this.listeners.add(o.next),this.status!==Ir.NotStarted&&o.next(this.state);var d=function(){r.doneListeners.delete(d),r.stopListeners.delete(d),o.complete()};return this.status===Ir.Stopped?o.complete():(this.onDone(d),this.onStop(d)),{unsubscribe:function(){r.listeners.delete(o.next),r.doneListeners.delete(d),r.stopListeners.delete(d)}}},e.prototype.onEvent=function(n){return this.eventListeners.add(n),this},e.prototype.onSend=function(n){return this.sendListeners.add(n),this},e.prototype.onChange=function(n){return this.contextListeners.add(n),this},e.prototype.onStop=function(n){return this.stopListeners.add(n),this},e.prototype.onDone=function(n){return this.status===Ir.Stopped&&this._doneEvent?n(this._doneEvent):this.doneListeners.add(n),this},e.prototype.off=function(n){return this.listeners.delete(n),this.eventListeners.delete(n),this.sendListeners.delete(n),this.stopListeners.delete(n),this.doneListeners.delete(n),this.contextListeners.delete(n),this},e.prototype.start=function(n){var t=this;if(this.status===Ir.Running)return this;this.machine._init(),km.register(this.sessionId,this),this.initialized=!0,this.status=Ir.Running;var i=n===void 0?this.initialState:id(this,function(){return n5(n)?t.machine.resolveState(n):t.machine.resolveState(ya.from(n,t.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){t.update(i,Fl)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(n){Pn(n.stop)&&n.stop()}),this.children.clear()},e.prototype._stop=function(){var n,t,i,r,o,d,g,v,x,D;try{for(var R=bn(this.listeners),L=R.next();!L.done;L=R.next()){var j=L.value;this.listeners.delete(j)}}catch(gt){n={error:gt}}finally{try{L&&!L.done&&(t=R.return)&&t.call(R)}finally{if(n)throw n.error}}try{for(var J=bn(this.stopListeners),re=J.next();!re.done;re=J.next()){var j=re.value;j(),this.stopListeners.delete(j)}}catch(gt){i={error:gt}}finally{try{re&&!re.done&&(r=J.return)&&r.call(J)}finally{if(i)throw i.error}}try{for(var be=bn(this.contextListeners),xe=be.next();!xe.done;xe=be.next()){var j=xe.value;this.contextListeners.delete(j)}}catch(gt){o={error:gt}}finally{try{xe&&!xe.done&&(d=be.return)&&d.call(be)}finally{if(o)throw o.error}}try{for(var Pe=bn(this.doneListeners),Ne=Pe.next();!Ne.done;Ne=Pe.next()){var j=Ne.value;this.doneListeners.delete(j)}}catch(gt){g={error:gt}}finally{try{Ne&&!Ne.done&&(v=Pe.return)&&v.call(Pe)}finally{if(g)throw g.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Ir.Stopped,this._initialState=void 0;try{for(var Ve=bn(Object.keys(this.delayedEventsMap)),We=Ve.next();!We.done;We=Ve.next()){var rt=We.value;this.clock.clearTimeout(this.delayedEventsMap[rt])}}catch(gt){x={error:gt}}finally{try{We&&!We.done&&(D=Ve.return)&&D.call(Ve)}finally{if(x)throw x.error}}this.scheduler.clear(),this.scheduler=new sP({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var n=this,t=this.scheduler;return this._stop(),t.schedule(function(){var i;if(!(!((i=n._state)===null||i===void 0)&&i.done)){var r=pr({type:"xstate.stop"}),o=id(n,function(){var d=Ci(Hn([],Sn(n.state.configuration),!1).sort(function(R,L){return L.order-R.order}).map(function(R){return $a(R.onExit,n.machine.options.actions)})),g=Sn(Uh(n.machine,n.state,n.state.context,r,[{type:"exit",actions:d}],n.machine.config.predictableActionArguments?n._exec:void 0,n.machine.config.predictableActionArguments||n.machine.config.preserveActionOrder),2),v=g[0],x=g[1],D=new ya({value:n.state.value,context:x,_event:r,_sessionid:n.sessionId,historyValue:void 0,history:n.state,actions:v.filter(function(R){return!fv(R)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:n.state.done,tags:n.state.tags,machine:n.machine});return D.changed=!0,D});n.update(o,r),n._stopChildren(),km.free(n.sessionId)}}),this},e.prototype.batch=function(n){var t=this;if(this.status===Ir.NotStarted&&this.options.deferEvents)oi||er(!1,"".concat(n.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==Ir.Running)throw new Error("".concat(n.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(n.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var r,o,d=t.state,g=!1,v=[],x=function(j){var J=pr(j);t.forward(J),d=id(t,function(){return t.machine.transition(d,J,void 0,i||void 0)}),v.push.apply(v,Hn([],Sn(t.machine.config.predictableActionArguments?d.actions:d.actions.map(function(re){return i5(re,d)})),!1)),g=g||!!d.changed};try{for(var D=bn(n),R=D.next();!R.done;R=D.next()){var L=R.value;x(L)}}catch(j){r={error:j}}finally{try{R&&!R.done&&(o=D.return)&&o.call(D)}finally{if(r)throw r.error}}d.changed=g,d.actions=v,t.update(d,pr(n[n.length-1]))})}},e.prototype.sender=function(n){return this.send.bind(this,n)},e.prototype._nextState=function(n,t){var i=this;t===void 0&&(t=!!this.machine.config.predictableActionArguments&&this._exec);var r=pr(n);if(r.name.indexOf(iS)===0&&!this.state.nextEvents.some(function(d){return d.indexOf(iS)===0}))throw r.data.data;var o=id(this,function(){return i.machine.transition(i.state,r,void 0,t||void 0)});return o},e.prototype.nextState=function(n){return this._nextState(n,!1)},e.prototype.forward=function(n){var t,i;try{for(var r=bn(this.forwardTo),o=r.next();!o.done;o=r.next()){var d=o.value,g=this.children.get(d);if(!g)throw new Error("Unable to forward event '".concat(n,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(d,"'."));g.send(n)}}catch(v){t={error:v}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},e.prototype.defer=function(n){var t=this,i=this.clock.setTimeout(function(){"to"in n&&n.to?t.sendTo(n._event,n.to,!0):t.send(n._event)},n.delay);n.id&&(this.delayedEventsMap[n.id]=i)},e.prototype.cancel=function(n){this.clock.clearTimeout(this.delayedEventsMap[n]),delete this.delayedEventsMap[n]},e.prototype.exec=function(n,t,i){i===void 0&&(i=this.machine.options.actions),this._exec(n,t.context,t._event,i)},e.prototype.removeChild=function(n){var t;this.children.delete(n),this.forwardTo.delete(n),(t=this.state)===null||t===void 0||delete t.children[n]},e.prototype.stopChild=function(n){var t=this.children.get(n);t&&(this.removeChild(n),Pn(t.stop)&&t.stop())},e.prototype.spawn=function(n,t,i){if(this.status!==Ir.Running)return yS(n,t);if(ZM(n))return this.spawnPromise(Promise.resolve(n),t);if(Pn(n))return this.spawnCallback(n,t);if(Yj(n))return this.spawnActor(n,t);if(kj(n))return this.spawnObservable(n,t);if(ga(n))return this.spawnMachine(n,Ue(Ue({},i),{id:t}));if(Mj(n))return this.spawnBehavior(n,t);throw new Error('Unable to spawn entity "'.concat(t,'" of type "').concat(typeof n,'".'))},e.prototype.spawnMachine=function(n,t){var i=this;t===void 0&&(t={});var r=new e(n,Ue(Ue({},this.options),{parent:this,id:t.id||n.id})),o=Ue(Ue({},lP),t);o.sync&&r.onTransition(function(g){i.send(Fh,{state:g,id:r.id})});var d=r;return this.children.set(r.id,d),o.autoForward&&this.forwardTo.add(r.id),r.onDone(function(g){i.removeChild(r.id),i.send(pr(g,{origin:r.id}))}).start(),d},e.prototype.spawnBehavior=function(n,t){var i=o5(n,{id:t,parent:this});return this.children.set(t,i),i},e.prototype.spawnPromise=function(n,t){var i,r=this,o=!1,d;n.then(function(v){o||(d=v,r.removeChild(t),r.send(pr(td(t,v),{origin:t})))},function(v){if(!o){r.removeChild(t);var x=nd(t,v);try{r.send(pr(x,{origin:t}))}catch(D){Bj(v,D,t),r.devTools&&r.devTools.send(x,r.state),r.machine.strict&&r.stop()}}});var g=(i={id:t,send:function(){},subscribe:function(v,x,D){var R=Tm(v,x,D),L=!1;return n.then(function(j){L||(R.next(j),!L&&R.complete())},function(j){L||R.error(j)}),{unsubscribe:function(){return L=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return d}},i[Nl]=function(){return this},i);return this.children.set(t,g),g},e.prototype.spawnCallback=function(n,t){var i,r=this,o=!1,d=new Set,g=new Set,v,x=function(L){v=L,g.forEach(function(j){return j(L)}),!o&&r.send(pr(L,{origin:t}))},D;try{D=n(x,function(L){d.add(L)})}catch(L){this.send(nd(t,L))}if(ZM(D))return this.spawnPromise(D,t);var R=(i={id:t,send:function(L){return d.forEach(function(j){return j(L)})},subscribe:function(L){var j=Tm(L);return g.add(j.next),{unsubscribe:function(){g.delete(j.next)}}},stop:function(){o=!0,Pn(D)&&D()},toJSON:function(){return{id:t}},getSnapshot:function(){return v}},i[Nl]=function(){return this},i);return this.children.set(t,R),R},e.prototype.spawnObservable=function(n,t){var i,r=this,o,d=n.subscribe(function(v){o=v,r.send(pr(v,{origin:t}))},function(v){r.removeChild(t),r.send(pr(nd(t,v),{origin:t}))},function(){r.removeChild(t),r.send(pr(td(t),{origin:t}))}),g=(i={id:t,send:function(){},subscribe:function(v,x,D){return n.subscribe(v,x,D)},stop:function(){return d.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:t}}},i[Nl]=function(){return this},i);return this.children.set(t,g),g},e.prototype.spawnActor=function(n,t){return this.children.set(t,n),n},e.prototype.spawnActivity=function(n){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[n.type]:void 0;if(!t){oi||er(!1,"No implementation found for activity '".concat(n.type,"'"));return}var i=t(this.state.context,n);this.spawnEffect(n.id,i)},e.prototype.spawnEffect=function(n,t){var i;this.children.set(n,(i={id:n,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:n}}},i[Nl]=function(){return this},i))},e.prototype.attachDev=function(){var n=_S();if(this.options.devTools&&n){if(n.__REDUX_DEVTOOLS_EXTENSION__){var t=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=n.__REDUX_DEVTOOLS_EXTENSION__.connect(Ue(Ue({name:this.id,autoPause:!0,stateSanitizer:function(i){return{value:i.value,context:i.context,actions:i.actions}}},t),{features:Ue({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}r5(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[Nl]=function(){return this},e.prototype.getSnapshot=function(){return this.status===Ir.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(n,t){return setTimeout(n,t)},clearTimeout:function(n){return clearTimeout(n)}},logger:console.log.bind(console),devTools:!1},e.interpret=vS,e}(),sae=function(e){return Dn(e)?Ue(Ue({},lP),{name:e}):Ue(Ue(Ue({},lP),{name:Fj()}),e)};function Vh(e,n){var t=sae(n);return Wj(function(i){if(!oi){var r=ga(e)||Pn(e);er(!!i||r,'Attempted to spawn an Actor (ID: "'.concat(ga(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return i?i.spawn(e,t.name,t):yS(e,t.name)})}function vS(e,n){var t=new s5(e,n);return t}function aae(e){if(typeof e=="string"){var n={type:e};return n.toString=function(){return e},n}return e}function vv(e){return Ue(Ue({type:Cm},e),{toJSON:function(){e.onDone,e.onError;var n=wm(e,["onDone","onError"]);return Ue(Ue({},n),{type:Cm,src:aae(e.src)})}})}var Lm="",cP="#",bv="*",Nm={},Fm=function(e){return e[0]===cP},lae=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},cae=function(e,n,t){var i=t.slice(0,-1).some(function(o){return!("cond"in o)&&!("in"in o)&&(Dn(o.target)||ga(o.target))}),r=n===Lm?"the transient event":"event '".concat(n,"'");er(!i,"One or more transitions for ".concat(r," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},a5=function(){function e(n,t,i,r){i===void 0&&(i="context"in n?n.context:void 0);var o=this,d;this.config=n,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(lae(),t),this.parent=r?.parent,this.key=this.config.key||r?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:rS),this.id=this.config.id||Hn([this.machine.key],Sn(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(d=this.config.schema)!==null&&d!==void 0?d:{},this.description=this.config.description,oi||er(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?Im(this.config.states,function(x,D){var R,L=new e(x,{},void 0,{parent:o,key:D});return Object.assign(o.idMap,Ue((R={},R[L.id]=L,R),L.idMap)),L}):Nm;var g=0;function v(x){var D,R;x.order=g++;try{for(var L=bn(nP(x)),j=L.next();!j.done;j=L.next()){var J=j.value;v(J)}}catch(re){D={error:re}}finally{try{j&&!j.done&&(R=L.return)&&R.call(L)}finally{if(D)throw D.error}}}v(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(x){var D=x.event;return D===Lm}):Lm in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=ks(this.config.entry||this.config.onEntry).map(function(x){return zh(x)}),this.onExit=ks(this.config.exit||this.config.onExit).map(function(x){return zh(x)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=ks(this.config.invoke).map(function(x,D){var R,L;if(ga(x)){var j=pv(o.id,D);return o.machine.options.services=Ue((R={},R[j]=x,R),o.machine.options.services),vv({src:j,id:j})}else if(Dn(x.src)){var j=x.id||pv(o.id,D);return vv(Ue(Ue({},x),{id:j,src:x.src}))}else if(ga(x.src)||Pn(x.src)){var j=x.id||pv(o.id,D);return o.machine.options.services=Ue((L={},L[j]=x.src,L),o.machine.options.services),vv(Ue(Ue({id:j},x),{src:j}))}else{var J=x.src;return vv(Ue(Ue({id:pv(o.id,D)},x),{src:J}))}}),this.activities=ks(this.config.activities).concat(this.invoke).map(function(x){return gv(x)}),this.transition=this.transition.bind(this),this.tags=ks(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||iP(this).forEach(function(n){return n.on})},e.prototype.withConfig=function(n,t){var i=this.options,r=i.actions,o=i.activities,d=i.guards,g=i.services,v=i.delays;return new e(this.config,{actions:Ue(Ue({},r),n.actions),activities:Ue(Ue({},o),n.activities),guards:Ue(Ue({},d),n.guards),services:Ue(Ue({},g),n.services),delays:Ue(Ue({},v),n.delays)},t??this.context)},e.prototype.withContext=function(n){return new e(this.config,this.options,n)},Object.defineProperty(e.prototype,"context",{get:function(){return Pn(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Im(this.states,function(n){return n.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var n=this.transitions;return this.__cache.on=n.reduce(function(t,i){return t[i.eventType]=t[i.eventType]||[],t[i.eventType].push(i),t},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(n){if(this.__cache.candidates[n])return this.__cache.candidates[n];var t=n===Lm,i=this.transitions.filter(function(r){var o=r.eventType===n;return t?o:o||r.eventType===bv});return this.__cache.candidates[n]=i,i},e.prototype.getDelayedTransitions=function(){var n=this,t=this.config.after;if(!t)return[];var i=function(o,d){var g=Pn(o)?"".concat(n.id,":delay[").concat(d,"]"):o,v=QM(g,n.id);return n.onEntry.push(ed(v,{delay:o})),n.onExit.push(fS(v)),v},r=Ac(t)?t.map(function(o,d){var g=i(o.delay,d);return Ue(Ue({},o),{event:g})}):Ci(Object.keys(t).map(function(o,d){var g=t[o],v=Dn(g)?{target:g}:g,x=isNaN(+o)?o:+o,D=i(x,d);return ks(v).map(function(R){return Ue(Ue({},R),{event:D,delay:x})})}));return r.map(function(o){var d=o.delay;return Ue(Ue({},n.formatTransition(o)),{delay:d})})},e.prototype.getStateNodes=function(n){var t,i=this;if(!n)return[];var r=n instanceof ya?n.value:Em(n,this.delimiter);if(Dn(r)){var o=this.getStateNode(r).initial;return o!==void 0?this.getStateNodes((t={},t[r]=o,t)):[this,this.states[r]]}var d=Object.keys(r),g=[this];return g.push.apply(g,Hn([],Sn(Ci(d.map(function(v){return i.getStateNode(v).getStateNodes(r[v])}))),!1)),g},e.prototype.handles=function(n){var t=aS(n);return this.events.includes(t)},e.prototype.resolveState=function(n){var t=n instanceof ya?n:ya.create(n),i=Array.from(Rm([],this.getStateNodes(t.value)));return new ya(Ue(Ue({},t),{value:this.resolve(t.value),configuration:i,done:_v(i,this),tags:rP(i),machine:this.machine}))},e.prototype.transitionLeafNode=function(n,t,i){var r=this.getStateNode(n),o=r.next(t,i);return!o||!o.transitions.length?this.next(t,i):o},e.prototype.transitionCompoundNode=function(n,t,i){var r=Object.keys(n),o=this.getStateNode(r[0]),d=o._transition(n[r[0]],t,i);return!d||!d.transitions.length?this.next(t,i):d},e.prototype.transitionParallelNode=function(n,t,i){var r,o,d={};try{for(var g=bn(Object.keys(n)),v=g.next();!v.done;v=g.next()){var x=v.value,D=n[x];if(D){var R=this.getStateNode(x),L=R._transition(D,t,i);L&&(d[x]=L)}}}catch(xe){r={error:xe}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}var j=Object.keys(d).map(function(xe){return d[xe]}),J=Ci(j.map(function(xe){return xe.transitions})),re=j.some(function(xe){return xe.transitions.length>0});if(!re)return this.next(t,i);var be=Ci(Object.keys(d).map(function(xe){return d[xe].configuration}));return{transitions:J,exitSet:Ci(j.map(function(xe){return xe.exitSet})),configuration:be,source:t,actions:Ci(Object.keys(d).map(function(xe){return d[xe].actions}))}},e.prototype._transition=function(n,t,i){return Dn(n)?this.transitionLeafNode(n,t,i):Object.keys(n).length===1?this.transitionCompoundNode(n,t,i):this.transitionParallelNode(n,t,i)},e.prototype.getTransitionData=function(n,t){return this._transition(n.value,n,pr(t))},e.prototype.next=function(n,t){var i,r,o=this,d=t.name,g=[],v=[],x;try{for(var D=bn(this.getCandidates(d)),R=D.next();!R.done;R=D.next()){var L=R.value,j=L.cond,J=L.in,re=n.context,be=J?Dn(J)&&Fm(J)?n.matches(Em(this.getStateNodeById(J).path,this.delimiter)):dv(Em(J,this.delimiter),Ij(this.path.slice(0,-2))(n.value)):!0,xe=!1;try{xe=!j||uS(this.machine,j,re,t,n)}catch(Ve){throw new Error("Unable to evaluate guard '".concat(j.name||j.type,"' in transition for event '").concat(d,"' in state node '").concat(this.id,`':
`).concat(Ve.message))}if(xe&&be){L.target!==void 0&&(v=L.target),g.push.apply(g,Hn([],Sn(L.actions),!1)),x=L;break}}}catch(Ve){i={error:Ve}}finally{try{R&&!R.done&&(r=D.return)&&r.call(D)}finally{if(i)throw i.error}}if(x){if(!v.length)return{transitions:[x],exitSet:[],configuration:n.value?[this]:[],source:n,actions:g};var Pe=Ci(v.map(function(Ve){return o.getRelativeStateNodes(Ve,n.historyValue)})),Ne=!!x.internal;return{transitions:[x],exitSet:Ne?[]:Ci(v.map(function(Ve){return o.getPotentiallyReenteringNodes(Ve)})),configuration:Pe,source:n,actions:g}}},e.prototype.getPotentiallyReenteringNodes=function(n){if(this.order<n.order)return[this];for(var t=[],i=this,r=n;i&&i!==r;)t.push(i),i=i.parent;return i!==r?[]:(t.push(r),t)},e.prototype.getActions=function(n,t,i,r,o,d,g){var v,x,D,R,L=this,j=d?Rm([],this.getStateNodes(d.value)):[],J=new Set;try{for(var re=bn(Array.from(n).sort(function(Et,en){return Et.order-en.order})),be=re.next();!be.done;be=re.next()){var xe=be.value;(!Om(j,xe)||Om(i.exitSet,xe)||xe.parent&&J.has(xe.parent))&&J.add(xe)}}catch(Et){v={error:Et}}finally{try{be&&!be.done&&(x=re.return)&&x.call(re)}finally{if(v)throw v.error}}try{for(var Pe=bn(j),Ne=Pe.next();!Ne.done;Ne=Pe.next()){var xe=Ne.value;(!Om(n,xe)||Om(i.exitSet,xe.parent))&&i.exitSet.push(xe)}}catch(Et){D={error:Et}}finally{try{Ne&&!Ne.done&&(R=Pe.return)&&R.call(Pe)}finally{if(D)throw D.error}}i.exitSet.sort(function(Et,en){return en.order-Et.order});var Ve=Array.from(J).sort(function(Et,en){return Et.order-en.order}),We=new Set(i.exitSet),rt=Ci(Ve.map(function(Et){var en=[];if(Et.type!=="final")return en;var Qt=Et.parent;if(!Qt.parent)return en;en.push(Am(Et.id,Et.doneData),Am(Qt.id,Et.doneData?Lh(Et.doneData,r,o):void 0));var Ei=Qt.parent;return Ei.type==="parallel"&&Pm(Ei).every(function(qi){return _v(i.configuration,qi)})&&en.push(Am(Ei.id)),en})),gt=Ve.map(function(Et){var en=Et.onEntry,Qt=Et.activities.map(function(Ei){return JM(Ei)});return{type:"entry",actions:$a(g?Hn(Hn([],Sn(en),!1),Sn(Qt),!1):Hn(Hn([],Sn(Qt),!1),Sn(en),!1),L.machine.options.actions)}}).concat({type:"state_done",actions:rt.map(function(Et){return hS(Et)})}),Gt=Array.from(We).map(function(Et){return{type:"exit",actions:$a(Hn(Hn([],Sn(Et.onExit),!1),Sn(Et.activities.map(function(en){return mS(en)})),!1),L.machine.options.actions)}}),st=Gt.concat({type:"transition",actions:$a(i.actions,this.machine.options.actions)}).concat(gt);if(t){var Gn=$a(Ci(Hn([],Sn(n),!1).sort(function(Et,en){return en.order-Et.order}).map(function(Et){return Et.onExit})),this.machine.options.actions).filter(function(Et){return!fv(Et)});return st.concat({type:"stop",actions:Gn})}return st},e.prototype.transition=function(n,t,i,r){n===void 0&&(n=this.initialState);var o=pr(t),d;if(n instanceof ya)d=i===void 0?n:this.resolveState(ya.from(n,i));else{var g=Dn(n)?this.resolve(uv(this.getResolvedPath(n))):this.resolve(n),v=i??this.machine.context;d=this.resolveState(ya.from(g,v))}if(!oi&&o.name===bv)throw new Error("An event cannot have the wildcard type ('".concat(bv,"')"));if(this.strict&&!this.events.includes(o.name)&&!Aj(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var x=this._transition(d.value,d,o)||{transitions:[],configuration:[],exitSet:[],source:d,actions:[]},D=Rm([],this.getStateNodes(d.value)),R=x.configuration.length?Rm(D,x.configuration):D;return x.configuration=Hn([],Sn(R),!1),this.resolveTransition(x,d,d.context,r,o)},e.prototype.resolveRaisedTransition=function(n,t,i,r){var o,d=n.actions;return n=this.transition(n,t,void 0,r),n._event=i,n.event=i.data,(o=n.actions).unshift.apply(o,Hn([],Sn(d),!1)),n},e.prototype.resolveTransition=function(n,t,i,r,o){var d,g,v,x,D=this;o===void 0&&(o=Fl);var R=n.configuration,L=!t||n.transitions.length>0,j=L?n.configuration:t?t.configuration:[],J=_v(j,this),re=L?Qj(this.machine,R):void 0,be=t?t.historyValue?t.historyValue:n.source?this.machine.historyValue(t.value):void 0:void 0,xe=this.getActions(new Set(j),J,n,i,o,t,r),Pe=t?Ue({},t.activities):{};try{for(var Ne=bn(xe),Ve=Ne.next();!Ve.done;Ve=Ne.next()){var We=Ve.value;try{for(var rt=(v=void 0,bn(We.actions)),gt=rt.next();!gt.done;gt=rt.next()){var Gt=gt.value;Gt.type===xm?Pe[Gt.activity.id||Gt.activity.type]=Gt:Gt.type===Nh&&(Pe[Gt.activity.id||Gt.activity.type]=!1)}}catch(un){v={error:un}}finally{try{gt&&!gt.done&&(x=rt.return)&&x.call(rt)}finally{if(v)throw v.error}}}}catch(un){d={error:un}}finally{try{Ve&&!Ve.done&&(g=Ne.return)&&g.call(Ne)}finally{if(d)throw d.error}}var st=Sn(Uh(this,t,i,o,xe,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),Gn=st[0],Et=st[1],en=Sn(Pj(Gn,fv),2),Qt=en[0],Ei=en[1],qi=Gn.filter(function(un){var Xn;return un.type===xm&&((Xn=un.activity)===null||Xn===void 0?void 0:Xn.type)===Cm}),Ls=qi.reduce(function(un,Xn){return un[Xn.activity.id]=Kj(Xn.activity,D.machine,Et,o),un},t?Ue({},t.children):{}),mr=new ya({value:re||t.value,context:Et,_event:o,_sessionid:t?t._sessionid:null,historyValue:re?be?Oj(be,re):void 0:t?t.historyValue:void 0,history:!re||n.source?t:void 0,actions:re?Ei:[],activities:re?Pe:t?t.activities:{},events:[],configuration:j,transitions:n.transitions,children:Ls,done:J,tags:rP(j),machine:this}),tr=i!==Et;mr.changed=o.name===Fh||tr;var Jn=mr.history;Jn&&delete Jn.history;var gr=!J&&(this._transient||R.some(function(un){return un._transient}));if(!L&&(!gr||o.name===Lm))return mr;var Bi=mr;if(!J)for(gr&&(Bi=this.resolveRaisedTransition(Bi,{type:VM},o,r));Qt.length;){var ko=Qt.shift();Bi=this.resolveRaisedTransition(Bi,ko._event,o,r)}var io=Bi.changed||(Jn?!!Bi.actions.length||tr||typeof Jn.value!=typeof Bi.value||!oP(Bi.value,Jn.value):void 0);return Bi.changed=io,Bi.history=Jn,Bi},e.prototype.getStateNode=function(n){if(Fm(n))return this.machine.getStateNodeById(n);if(!this.states)throw new Error("Unable to retrieve child state '".concat(n,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[n];if(!t)throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(n){var t=Fm(n)?n.slice(cP.length):n;if(t===this.id)return this;var i=this.machine.idMap[t];if(!i)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return i},e.prototype.getStateNodeByPath=function(n){if(typeof n=="string"&&Fm(n))try{return this.getStateNodeById(n.slice(1))}catch{}for(var t=lS(n,this.delimiter).slice(),i=this;t.length;){var r=t.shift();if(!r.length)break;i=i.getStateNode(r)}return i},e.prototype.resolve=function(n){var t,i=this;if(!n)return this.initialStateValue||Nm;switch(this.type){case"parallel":return Im(this.initialStateValue,function(o,d){return o?i.getStateNode(d).resolve(n[d]||o):Nm});case"compound":if(Dn(n)){var r=this.getStateNode(n);return r.type==="parallel"||r.type==="compound"?(t={},t[n]=r.initialStateValue,t):n}return Object.keys(n).length?Im(n,function(o,d){return o?i.getStateNode(d).resolve(o):Nm}):this.initialStateValue||{};default:return n||Nm}},e.prototype.getResolvedPath=function(n){if(Fm(n)){var t=this.machine.idMap[n.slice(cP.length)];if(!t)throw new Error("Unable to find state node '".concat(n,"'"));return t.path}return lS(n,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var n;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var t;if(this.type==="parallel")t=WM(this.states,function(i){return i.initialStateValue||Nm},function(i){return i.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=yv(this.states[this.initial])?this.initial:(n={},n[this.initial]=this.states[this.initial].initialStateValue,n)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(n,t){this._init();var i=this.getStateNodes(n);return this.resolveTransition({configuration:i,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,t??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var n=this.initialStateValue;if(!n)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var n;if(this.type==="history"){var t=this.config;Dn(t.target)?n=Fm(t.target)?uv(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target:n=t.target}return n},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(n,t,i){return i===void 0&&(i=!0),i?n.type==="history"?n.resolveHistory(t):n.initialStateNodes:[n]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var n=this;if(yv(this))return[this];if(this.type==="compound"&&!this.initial)return oi||er(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var t=hv(this.initialStateValue);return Ci(t.map(function(i){return n.getFromRelativePath(i)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(n){if(!n.length)return[this];var t=Sn(n),i=t[0],r=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(i,"' from node with no states"));var o=this.getStateNode(i);if(o.type==="history")return o.resolveHistory();if(!this.states[i])throw new Error("Child state '".concat(i,"' does not exist on '").concat(this.id,"'"));return this.states[i].getFromRelativePath(r)},e.prototype.historyValue=function(n){if(Object.keys(this.states).length)return{current:n||this.initialStateValue,states:WM(this.states,function(t,i){if(!n)return t.historyValue();var r=Dn(n)?void 0:n[i];return t.historyValue(r||t.initialStateValue)},function(t){return!t.history})}},e.prototype.resolveHistory=function(n){var t=this;if(this.type!=="history")return[this];var i=this.parent;if(!n){var r=this.target;return r?Ci(hv(r).map(function(d){return i.getFromRelativePath(d)})):i.initialStateNodes}var o=Dj(i.path,"states")(n).current;return Dn(o)?[i.getStateNode(o)]:Ci(hv(o).map(function(d){return t.history==="deep"?i.getFromRelativePath(d):[i.states[d[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var n=this,t=Ci(Object.keys(this.states).map(function(i){return n.states[i].stateIds}));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var n,t,i,r;if(this.__cache.events)return this.__cache.events;var o=this.states,d=new Set(this.ownEvents);if(o)try{for(var g=bn(Object.keys(o)),v=g.next();!v.done;v=g.next()){var x=v.value,D=o[x];if(D.states)try{for(var R=(i=void 0,bn(D.events)),L=R.next();!L.done;L=R.next()){var j=L.value;d.add("".concat(j))}}catch(J){i={error:J}}finally{try{L&&!L.done&&(r=R.return)&&r.call(R)}finally{if(i)throw i.error}}}}catch(J){n={error:J}}finally{try{v&&!v.done&&(t=g.return)&&t.call(g)}finally{if(n)throw n.error}}return this.__cache.events=Array.from(d)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var n=new Set(this.transitions.filter(function(t){return!(!t.target&&!t.actions.length&&t.internal)}).map(function(t){return t.eventType}));return Array.from(n)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(n){var t=this;if(n!==void 0)return n.map(function(i){if(!Dn(i))return i;var r=i[0]===t.delimiter;if(r&&!t.parent)return t.getStateNodeByPath(i.slice(1));var o=r?t.key+i:i;if(t.parent)try{var d=t.parent.getStateNodeByPath(o);return d}catch(g){throw new Error("Invalid transition definition for state node '".concat(t.id,`':
`).concat(g.message))}else return t.getStateNodeByPath(o)})},e.prototype.formatTransition=function(n){var t=this,i=Lj(n.target),r="internal"in n?n.internal:i?i.some(function(v){return Dn(v)&&v[0]===t.delimiter}):!0,o=this.machine.options.guards,d=this.resolveTarget(i),g=Ue(Ue({},n),{actions:$a(ks(n.actions)),cond:cS(n.cond,o),target:d,source:this,internal:r,eventType:n.event,toJSON:function(){return Ue(Ue({},g),{target:g.target?g.target.map(function(v){return"#".concat(v.id)}):void 0,source:"#".concat(t.id)})}});return g},e.prototype.formatTransitions=function(){var n,t,i=this,r;if(!this.config.on)r=[];else if(Array.isArray(this.config.on))r=this.config.on;else{var o=this.config.on,d=bv,g=o[d],v=g===void 0?[]:g,x=wm(o,[typeof d=="symbol"?d:d+""]);r=Ci(Object.keys(x).map(function(Pe){!oi&&Pe===Lm&&er(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(i.id,'".'));var Ne=Bh(Pe,x[Pe]);return oi||cae(i,Pe,Ne),Ne}).concat(Bh(bv,v)))}var D=this.config.always?Bh("",this.config.always):[],R=this.config.onDone?Bh(String(Am(this.id)),this.config.onDone):[];oi||er(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var L=Ci(this.invoke.map(function(Pe){var Ne=[];return Pe.onDone&&Ne.push.apply(Ne,Hn([],Sn(Bh(String(td(Pe.id)),Pe.onDone)),!1)),Pe.onError&&Ne.push.apply(Ne,Hn([],Sn(Bh(String(nd(Pe.id)),Pe.onError)),!1)),Ne})),j=this.after,J=Ci(Hn(Hn(Hn(Hn([],Sn(R),!1),Sn(L),!1),Sn(r),!1),Sn(D),!1).map(function(Pe){return ks(Pe).map(function(Ne){return i.formatTransition(Ne)})}));try{for(var re=bn(j),be=re.next();!be.done;be=re.next()){var xe=be.value;J.push(xe)}}catch(Pe){n={error:Pe}}finally{try{be&&!be.done&&(t=re.return)&&t.call(re)}finally{if(n)throw n.error}}return J},e}();var l5=!1;function Ns(e,n){return!oi&&!("predictableActionArguments"in e)&&!l5&&(l5=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new a5(e,n)}var Ll=XM;var rd=YM,c5=eP;var FH=gy(NH(),1);var eme=!0,tme="",Ov=(e,n)=>`${e}${n}`.replace(/[^A-Z0-9+]/gi,""),nme=(e,n)=>{switch(n){case"address":case"birthdate":case"email":case"family_name":case"gender":case"given_name":case"locale":case"middle_name":case"name":case"nickname":case"phone_number":case"picture":case"preferred_username":case"profile":case"updated_at":case"website":case"zoneinfo":return!0;default:return n.startsWith("custom:")}},ime=e=>{let i=(0,FH.default)(e,nme),{phone_number:n}=i,t=sc(i,["phone_number"]);if(K_(n)&&n!==tme){let{country_code:r}=e;return Ie(q({},t),{phone_number:Ov(r,n)})}return t},LH=(e,n,t)=>{let g=n,{password:i}=g,r=sc(g,["password"]),o=ime(r),d={autoSignIn:eme,userAttributes:q({},t==="phone_number"?Ie(q({},o),{phone_number:e}):o)};return{username:e,password:i,options:d}},BH=({formValues:e,loginMechanisms:n})=>{let t=n[0];if(t==="phone_number"){let{country_code:i,phone_number:r}=e;return Ov(i,r)}return e[t]};var{assign:Yn}=Mm,rme=Yn({actorDoneData:void 0}),ome=Yn({challengeName:void 0}),sme=Yn({missingAttributes:void 0}),ame=Yn({remoteError:void 0}),lme=Yn({formValues:{}}),cme=Yn({touched:{}}),ume=Yn({user:void 0}),dme=Yn({validationError:{}}),hme=Yn({totpSecretCode:(e,{data:n})=>{let{sharedSecret:t}=n.nextStep?.totpSetupDetails??{};return t}}),pme=Yn({step:"SIGN_IN"}),fme=Yn({step:"SHOULD_CONFIRM_USER_ATTRIBUTE"}),mme=Yn({step:"CONFIRM_ATTRIBUTE_COMPLETE"}),gme=Yn({challengeName:(e,{data:n})=>{let{signInStep:t}=n.nextStep;return t==="CONFIRM_SIGN_IN_WITH_SMS_CODE"?"SMS_MFA":t==="CONFIRM_SIGN_IN_WITH_TOTP_CODE"?"SOFTWARE_TOKEN_MFA":void 0}}),yme=Yn({username:({formValues:e,loginMechanisms:n})=>{let t=n[0],{username:i,country_code:r}=e;return t==="phone_number"?Ov(r,i):i}}),_me=Yn({username:BH}),vme=Yn({username:({formValues:e,loginMechanisms:n})=>{let t=n[0],{username:i,country_code:r}=e;return t==="phone_number"?Ov(r,i):i}}),bme=Yn({step:(e,{data:n})=>n.nextStep.signInStep==="DONE"?"SIGN_IN_COMPLETE":n.nextStep.signInStep}),wme=Yn({step:(e,{data:n})=>n.nextStep.signUpStep==="DONE"?"SIGN_UP_COMPLETE":n.nextStep.signUpStep}),xme=Yn({step:(e,{data:n})=>n.nextStep.resetPasswordStep==="DONE"?"RESET_PASSWORD_COMPLETE":n.nextStep.resetPasswordStep}),Sme=Yn({missingAttributes:(e,{data:n})=>n.nextStep?.missingAttributes}),Cme=Yn({validationError:(e,{data:n})=>n}),Eme=Yn({remoteError:(e,{data:n})=>n.name==="NoUserPoolError"?"Configuration error (see console) \u2013 please contact the administrator":n?.message||n}),Ime=Yn({user:(e,{data:n})=>n}),UH=e=>({Destination:e.destination,DeliveryMedium:e.deliveryMedium,AttributeName:e.attributName}),Dme=Yn({codeDeliveryDetails:(e,{data:n})=>n?.nextStep?.codeDeliveryDetails?UH(n.nextStep.codeDeliveryDetails):UH(n)}),Tme=Yn({formValues:(e,{data:n})=>{let{name:t,value:i}=n;return Ie(q({},e.formValues),{[t]:i})}}),Ame=Yn({formValues:(e,{data:n})=>gM(q(q({},e.formValues),n),"password")}),Mme=Yn({touched:(e,{data:n})=>Ie(q({},e.touched),{[n.name]:!0})}),Pme=Yn({unverifiedUserAttributes:(e,{data:n})=>{let{email:t,phone_number:i}=n;return q(q({},t&&{email:t}),i&&{phone_number:i})}}),Rme=Yn({selectedUserAttribute:void 0}),Ome=Yn({selectedUserAttribute:e=>e.formValues?.unverifiedAttr}),kme=Yn({step:"CONFIRM_SIGN_UP"}),zl={clearActorDoneData:rme,clearChallengeName:ome,clearError:ame,clearFormValues:lme,clearMissingAttributes:sme,clearSelectedUserAttribute:Rme,clearTouched:cme,clearUser:ume,clearValidationError:dme,handleBlur:Mme,handleInput:Tme,handleSubmit:Ame,setChallengeName:gme,setCodeDeliveryDetails:Dme,setFieldErrors:Cme,setMissingAttributes:Sme,setNextResetPasswordStep:xme,setNextSignInStep:bme,setNextSignUpStep:wme,setRemoteError:Eme,setConfirmAttributeCompleteStep:mme,setConfirmSignUpSignUpStep:kme,setShouldVerifyUserAttributeStep:fme,setSelectedUserAttribute:Ome,setSignInStep:pme,setTotpSecretCode:hme,setUser:Ime,setUnverifiedUserAttributes:Pme,setUsernameForgotPassword:yme,setUsernameSignIn:vme,setUsernameSignUp:_me};var Nme=["CONFIRM_SIGN_IN_WITH_SMS_CODE","CONFIRM_SIGN_IN_WITH_TOTP_CODE"],Fme=(e,{data:n})=>n?.nextStep.signInStep==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",Lme=(e,{data:n})=>n?.nextStep?.signInStep==="RESET_PASSWORD",Bme=(e,{data:n})=>n?.nextStep.signInStep==="CONFIRM_SIGN_UP",Ume=(e,{data:n})=>n?.nextStep.signUpStep==="COMPLETE_AUTO_SIGN_IN",zme=(e,{data:n})=>n?.nextStep.signInStep==="DONE",Vme=(e,{data:n})=>n?.nextStep.signUpStep==="DONE",jme=(e,{data:n})=>n?.nextStep.resetPasswordStep==="DONE",Hme=(e,{data:n})=>n?.step==="CONFIRM_ATTRIBUTE_COMPLETE",$me=(e,{data:n})=>n?.step==="CONFIRM_ATTRIBUTE_WITH_CODE",Gme=(e,{data:n})=>n?.step==="SHOULD_CONFIRM_USER_ATTRIBUTE",qme=(e,{data:n})=>n?.step==="RESET_PASSWORD",Wme=(e,{data:n})=>n?.step==="CONFIRM_SIGN_UP",Zme=({step:e})=>Nme.includes(e),Kme=({step:e})=>e==="CONTINUE_SIGN_IN_WITH_TOTP_SETUP",Yme=({step:e})=>e==="RESET_PASSWORD",Jme=({step:e})=>e==="CONFIRM_RESET_PASSWORD_WITH_CODE",Xme=({step:e})=>e==="CONFIRM_SIGN_UP",Qme=(e,{data:n})=>{let{phone_number_verified:t,email_verified:i}=n;return(i===void 0||i==="false")&&(t===void 0||t==="false")},ege=(e,{data:n})=>n.message==="User is already confirmed.",ad={hasCompletedAttributeConfirmation:Hme,hasCompletedResetPassword:jme,hasCompletedSignIn:zme,hasCompletedSignUp:Vme,isConfirmSignUpStep:Wme,isConfirmUserAttributeStep:$me,isResetPasswordStep:qme,isShouldConfirmUserAttributeStep:Gme,isUserAlreadyConfirmed:ege,shouldAutoSignIn:Ume,shouldConfirmResetPassword:Jme,shouldConfirmSignIn:Zme,shouldConfirmSignInWithNewPassword:Fme,shouldConfirmSignUp:Xme,shouldConfirmSignUpFromSignIn:Bme,shouldResetPassword:Yme,shouldResetPasswordFromSignIn:Lme,shouldSetupTotp:Kme,shouldVerifyAttribute:Qme};var K$=gy(Z$(),1);var ld=(e,n,t,i)=>ne(void 0,null,function*(){let r=yield Promise.all(i.map(d=>d(e,n,t))),o=(0,K$.default)({},...r);return oM(o)?Promise.resolve():Promise.reject(o)});var Oye=8,kye=e=>Array.isArray(e),Nye=e=>{if(e)return kye(e)?Object.entries(e).map(([n,t])=>Object.keys(t)[0]):Object.keys(e)},_a={getAmplifyConfig(){return ne(this,null,function*(){let e=sv.getConfig(),n=e.Auth?.Cognito,{loginWith:t,userAttributes:i}=e.Auth?.Cognito??{},r=t?Object.entries(t).filter(([g,v])=>g!=="oauth").filter(([g,v])=>!!v).map(g=>g[0]==="phone"?"phone_number":g[0]):void 0,o=Nye(i),d=t?.oauth?.providers?t.oauth.providers?.map(g=>g.toString().toLowerCase()):void 0;return Ie(q({},n),{loginMechanisms:r,signUpAttributes:o,socialProviders:d})})},getCurrentUser:Os,handleSignIn:ym,handleSignUp:RM,handleConfirmSignIn:ov,handleConfirmSignUp:kM,handleForgotPasswordSubmit:OM,handleForgotPassword:iv,validateCustomSignUp(e,n){return ne(this,null,function*(){})},validateFormPassword(e,n,t){return ne(this,null,function*(){let{password:i}=e,{password:r}=n;if(!r||!t)return null;let o=[],d=t.minLength??Oye;return i.length<d&&o.push(`Password must have at least ${d} characters`),t.requireLowercase&&!/[a-z]/.test(i)&&o.push("Password must have lower case letters"),t.requireUppercase&&!/[A-Z]/.test(i)&&o.push("Password must have upper case letters"),t.requireNumbers&&!/[0-9]/.test(i)&&o.push("Password must have numbers"),t.requireSpecialCharacters&&!fM(i)&&o.push("Password must have special characters"),o.length!==0?{password:o}:null})},validateConfirmPassword(e,n){return ne(this,null,function*(){let{password:t,confirm_password:i}=e,{confirm_password:r,password:o}=n;if(!t&&!i)return null;if((t||i)&&t!==i&&(r&&o||t?.length>=6&&i?.length>=6))return{confirm_password:"Your passwords must match"}})},validatePreferredUsername(e,n){return ne(this,null,function*(){})}};function Y$({services:e}){return Ns({id:"forgotPasswordActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldResetPassword",target:"confirmResetPassword"},{cond:"shouldConfirmResetPassword",target:"confirmResetPassword"},{target:"forgotPassword"}]},forgotPassword:{initial:"edit",entry:"sendUpdate",exit:["clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},submit:{tags:"pending",entry:["sendUpdate","clearError","setUsernameForgotPassword"],invoke:{src:"handleResetPassword",onDone:{actions:["setCodeDeliveryDetails","setNextResetPasswordStep"],target:"#forgotPasswordActor.confirmResetPassword"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmResetPassword:{type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"},RESEND:"resendCode",CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{target:"pending",actions:"clearValidationError"},onError:{target:"idle",actions:"setFieldErrors"}}},resendCode:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleResetPassword",onDone:{target:"idle"},onError:{actions:"setRemoteError",target:"idle"}}},pending:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleConfirmResetPassword",onDone:[{cond:"hasCompletedResetPassword",actions:"setNextResetPasswordStep",target:"#forgotPasswordActor.resolved"},{actions:"setSignInStep",target:"#forgotPasswordActor.resolved"}],onError:{actions:"setRemoteError",target:"idle"}}}}}}},resolved:{type:"final",data:({step:n})=>({step:n})}}},{actions:Ie(q({},zl),{sendUpdate:rd()}),guards:ad,services:{handleResetPassword({username:n}){return e.handleForgotPassword({username:n})},handleConfirmResetPassword({formValues:n,username:t}){let{confirmation_code:i,password:r}=n;return e.handleForgotPasswordSubmit({confirmationCode:i,newPassword:r,username:t})},validateFields(n){return ld(n.formValues,n.touched,n.passwordSettings,[_a.validateFormPassword,_a.validateConfirmPassword])}}})}var BS=e=>({entry:["sendUpdate","clearError"],invoke:{src:"signInWithRedirect",onDone:{target:e},onError:{actions:"setRemoteError",target:e}}});var US={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signInActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:["setMissingAttributes","setNextSignInStep"],target:"#signInActor.forceChangePassword"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resendSignUpCode"},{actions:["setChallengeName","setMissingAttributes","setNextSignInStep","setTotpSecretCode"],target:"#signInActor.init"}],onError:{actions:"setRemoteError",target:"edit"}},Fye={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signInActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}};function J$({services:e}){return Ns({id:"signInActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignIn",target:"confirmSignIn"},{cond:"shouldSetupTotp",target:"setupTotp"},{cond:({step:t})=>t==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",actions:"setActorDoneData",target:"forceChangePassword"},{target:"signIn"}]},federatedSignIn:BS("signIn"),fetchUserAttributes:{invoke:q({src:"fetchUserAttributes"},Fye)},resendSignUpCode:{invoke:{src:"handleResendSignUpCode",onDone:{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"},onError:{actions:"setRemoteError",target:"#signInActor.signIn"}}},resetPassword:{invoke:{src:"resetPassword",onDone:[{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}}},signIn:{initial:"edit",exit:"clearTouched",states:{edit:{entry:"sendUpdate",on:{CHANGE:{actions:"handleInput"},FEDERATED_SIGN_IN:{target:"#signInActor.federatedSignIn"},SUBMIT:{actions:"handleSubmit",target:"submit"}}},submit:{tags:"pending",entry:["clearError","sendUpdate","setUsernameSignIn"],exit:"clearFormValues",invoke:q({src:"handleSignIn"},US)}}},confirmSignIn:{initial:"edit",exit:["clearChallengeName","clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:q({src:"confirmSignIn"},US)}}},forceChangePassword:{entry:"sendUpdate",type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{SIGN_IN:{actions:"setSignInStep",target:"#signInActor.resolved"},CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submit:{initial:"edit",entry:"clearError",states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{actions:"clearValidationError",target:"pending"},onError:{actions:"setFieldErrors",target:"edit"}}},pending:{tags:"pending",entry:["sendUpdate","clearError"],invoke:q({src:"handleForceChangePassword"},US)}}}}},setupTotp:{initial:"edit",exit:["clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["sendUpdate","clearError"],invoke:q({src:"confirmSignIn"},US)}}},resolved:{type:"final",data:t=>({codeDeliveryDetails:t.codeDeliveryDetails,remoteError:t.remoteError,step:t.step,unverifiedUserAttributes:t.unverifiedUserAttributes,username:t.username})}}},{actions:Ie(q({},zl),{sendUpdate:rd()}),guards:ad,services:{fetchUserAttributes(){return ne(this,null,function*(){return Dc()})},resetPassword({username:t}){return iv({username:t})},handleResendSignUpCode({username:t}){return rv({username:t})},handleSignIn({formValues:t,username:i}){let{password:r}=t;return e.handleSignIn({username:i,password:r})},confirmSignIn({formValues:t}){let{confirmation_code:i}=t;return e.handleConfirmSignIn({challengeResponse:i})},handleForceChangePassword(i){return ne(this,arguments,function*({formValues:t}){let R=t,{password:r,phone_number:o,country_code:d,confirm_password:g}=R,v=sc(R,["password","phone_number","country_code","confirm_password"]),x;return o&&(x=`${d}${o}`.replace(/[^A-Z0-9+]/gi,""),v=Ie(q({},v),{phone_number:x})),ov({challengeResponse:r,options:{userAttributes:v}})})},signInWithRedirect(t,{data:i}){return bm(i)},validateFields(t){return ne(this,null,function*(){return ld(t.formValues,t.touched,t.passwordSettings,[_a.validateFormPassword,_a.validateConfirmPassword])})}}})}var Lye={onDone:[{actions:"setCodeDeliveryDetails",target:"#signUpActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}},Bye={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signUpActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:"setNextSignInStep",target:"#signUpActor.resolved"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resendSignUpCode"},{actions:["setNextSignInStep","setChallengeName","setMissingAttributes","setTotpSecretCode"],target:"#signUpActor.resolved"}],onError:{actions:"setRemoteError",target:"#signUpActor.resolved"}},Uye={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signUpActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}};function X$({services:e}){return Ns({id:"signUpActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignUp",target:"confirmSignUp"},{target:"signUp"}]},autoSignIn:{tags:"pending",invoke:q({src:"autoSignIn"},Bye)},fetchUserAttributes:{invoke:q({src:"fetchUserAttributes"},Uye)},federatedSignIn:BS("signUp"),resetPassword:{invoke:q({src:"resetPassword"},Lye)},resendSignUpCode:{tags:"pending",entry:"sendUpdate",exit:"sendUpdate",invoke:{src:"resendSignUpCode",onDone:{actions:["setCodeDeliveryDetails","sendUpdate"],target:"#signUpActor.confirmSignUp"},onError:[{cond:"isUserAlreadyConfirmed",target:"#signUpActor.resolved"},{actions:["setRemoteError","sendUpdate"]}]}},signUp:{type:"parallel",exit:"clearTouched",on:{FEDERATED_SIGN_IN:{target:"federatedSignIn"}},states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateSignUp",onDone:{actions:"clearValidationError",target:"valid"},onError:{actions:"setFieldErrors",target:"invalid"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{BLUR:{actions:"handleBlur",target:".pending"},CHANGE:{actions:"handleInput",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:["sendUpdate"],on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateSignUp",onDone:{target:"handleSignUp",actions:"clearValidationError"},onError:{actions:"setFieldErrors",target:"idle"}}},handleSignUp:{tags:"pending",entry:["setUsernameSignUp","clearError"],exit:"sendUpdate",invoke:{src:"handleSignUp",onDone:[{cond:"hasCompletedSignUp",actions:"setNextSignUpStep",target:"#signUpActor.resolved"},{cond:"shouldAutoSignIn",actions:"setNextSignUpStep",target:"#signUpActor.autoSignIn"},{actions:["setCodeDeliveryDetails","setNextSignUpStep"],target:"#signUpActor.init"}],onError:{actions:["sendUpdate","setRemoteError"],target:"idle"}}}}}}},confirmSignUp:{initial:"edit",entry:"sendUpdate",states:{edit:{on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"},RESEND:"#signUpActor.resendSignUpCode"}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignUp",onDone:[{cond:"shouldAutoSignIn",actions:["setNextSignUpStep","clearFormValues"],target:"#signUpActor.autoSignIn"},{actions:"setNextSignUpStep",target:"#signUpActor.init"}],onError:{actions:["setRemoteError","sendUpdate"],target:"edit"}}}}},resolved:{type:"final",data:t=>({challengeName:t.challengeName,missingAttributes:t.missingAttributes,remoteError:t.remoteError,step:t.step,totpSecretCode:t.totpSecretCode,username:t.username,unverifiedUserAttributes:t.unverifiedUserAttributes})}}},{actions:Ie(q({},zl),{sendUpdate:rd()}),guards:ad,services:{autoSignIn(){return tv()},fetchUserAttributes(){return ne(this,null,function*(){return Dc()})},confirmSignUp({formValues:t,username:i}){let{confirmation_code:r}=t,o={username:i,confirmationCode:r};return e.handleConfirmSignUp(o)},resendSignUpCode({username:t}){return rv({username:t})},signInWithRedirect(t,{data:i}){return bm(i)},handleSignUp(t){let{formValues:i,loginMechanisms:r,username:o}=t,d=r[0],g=LH(o,i,d);return e.handleSignUp(g)},validateSignUp(t){return ne(this,null,function*(){return ld(t.formValues,t.touched,t.passwordSettings,[e.validateFormPassword,e.validateConfirmPassword,e.validatePreferredUsername,e.validateCustomSignUp])})}}})}var Q$=()=>Ns({initial:"pending",id:"signOutActor",predictableActionArguments:!0,states:{pending:{tags:"pending",invoke:{src:"signOut",onDone:"resolved",onError:"rejected"}},resolved:{type:"final"},rejected:{type:"final"}}},{services:{signOut:()=>BM()}});function eG(){return Ns({id:"verifyUserAttributesActor",initial:"selectUserAttributes",predictableActionArguments:!0,states:{selectUserAttributes:{initial:"edit",exit:["clearError","clearTouched","sendUpdate"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:{target:"#verifyUserAttributesActor.resolved"},CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"sendUserAttributeVerificationCode",onDone:{actions:["setSelectedUserAttribute","setCodeDeliveryDetails"],target:"#verifyUserAttributesActor.confirmVerifyUserAttribute"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmVerifyUserAttribute:{initial:"edit",exit:["clearError","clearFormValues","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:"#verifyUserAttributesActor.resolved",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmVerifyUserAttribute",onDone:{actions:["setConfirmAttributeCompleteStep","clearSelectedUserAttribute"],target:"#verifyUserAttributesActor.resolved"},onError:{actions:"setRemoteError",target:"edit"}}}}},resolved:{type:"final",data:({step:n})=>({step:n})}}},{actions:Ie(q({},zl),{sendUpdate:rd()}),services:{sendUserAttributeVerificationCode({formValues:{unverifiedAttr:n}}){return UM({userAttributeKey:n})},confirmVerifyUserAttribute(i){return ne(this,arguments,function*({formValues:{confirmation_code:n},selectedUserAttribute:t}){return NM({confirmationCode:n,userAttributeKey:t})})},validateFields(n){return ne(this,null,function*(){return ld(n.formValues,n.touched,n.passwordSettings,[_a.validateFormPassword,_a.validateConfirmPassword])})}}})}var zS=(e,n)=>Ie(q({},e.actorDoneData),{step:e?.actorDoneData?.step??n,formValues:{},touched:{},validationError:{},formFields:e.config?.formFields,loginMechanisms:e.config?.loginMechanisms,passwordSettings:e.config?.passwordSettings,signUpAttributes:e.config?.signUpAttributes,socialProviders:e.config?.socialProviders}),{choose:zye,stop:Vye}=Mm,Nv=e=>Vye(e),jye={on:{INIT:{actions:"configure",target:"getConfig"},SIGN_OUT:"#authenticator.signOut"}},Hye={always:{actions:"configure",target:"getConfig"}};function UP(e){let r=e??{},{useNextWaitConfig:n}=r,t=sc(r,["useNextWaitConfig"]);return Ns({id:"authenticator",initial:"idle",context:{user:void 0,config:{},services:_a,actorRef:void 0,hasSetup:!1},predictableActionArguments:!0,states:{idle:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"setup"},onError:{target:"setup"}}},setup:{initial:"initConfig",states:{initConfig:n?Hye:jye,getConfig:{invoke:{src:"getAmplifyConfig",onDone:[{actions:["applyAmplifyConfig","setHasSetup"],cond:"hasUser",target:"#authenticator.authenticated"},{actions:["applyAmplifyConfig","setHasSetup"],target:"goToInitialState"}]}},goToInitialState:{always:[{cond:"isInitialStateSignUp",target:"#authenticator.signUpActor"},{cond:"isInitialStateResetPassword",target:"#authenticator.forgotPasswordActor"},{target:"#authenticator.signInActor"}]}}},getCurrentUser:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"#authenticator.authenticated"},onError:{target:"#authenticator.setup"}}},signInActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignInActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:Nv("signInActor")}},on:{FORGOT_PASSWORD:"forgotPasswordActor",SIGN_IN:"signInActor",SIGN_UP:"signUpActor","done.invoke.signInActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isResetPasswordStep",actions:"setActorDoneData",target:"#authenticator.forgotPasswordActor"},{cond:"isConfirmSignUpStep",actions:"setActorDoneData",target:"#authenticator.signUpActor"}]}},signUpActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignUpActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:Nv("signUpActor")}},on:{SIGN_IN:"signInActor","done.invoke.signUpActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isConfirmUserAttributeStep",target:"#authenticator.verifyUserAttributesActor"},{actions:"setActorDoneData",target:"#authenticator.signInActor"}]}},forgotPasswordActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnForgotPasswordActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:Nv("forgotPasswordActor")}},on:{SIGN_IN:"signInActor","done.invoke.forgotPasswordActor":[{target:"#authenticator.signInActor"}]}},verifyUserAttributesActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnVerifyUserAttributesActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:Nv("verifyUserAttributesActor")}},on:{"done.invoke.verifyUserAttributesActor":[{actions:"setActorDoneData",target:"#authenticator.getCurrentUser"}]}},authenticated:{initial:"idle",states:{idle:{on:{TOKEN_REFRESH:"refreshUser"}},refreshUser:{invoke:{src:"#authenticator.getCurrentUser",onDone:{actions:"setUser",target:"idle"},onError:{target:"#authenticator.signOut"}}}},on:{SIGN_OUT:"signOut"}},signOut:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignOutActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:Nv("signOutActor")}},on:{"done.invoke.signOutActor":{actions:"clearUser",target:"setup.getConfig"}}}},on:{SIGN_IN_WITH_REDIRECT:{target:"#authenticator.getCurrentUser"},CHANGE:{actions:"forwardToActor"},BLUR:{actions:"forwardToActor"},SUBMIT:{actions:"forwardToActor"},FEDERATED_SIGN_IN:{actions:"forwardToActor"},RESEND:{actions:"forwardToActor"},SIGN_IN:{actions:"forwardToActor"},SKIP:{actions:"forwardToActor"}}},{actions:Ie(q({},zl),{forwardToActor:zye([{cond:"hasActor",actions:c5(({actorRef:o})=>o)}]),setActorDoneData:Ll({actorDoneData:(o,d)=>({challengeName:d.data.challengeName,codeDeliveryDetails:d.data.codeDeliveryDetails,missingAttributes:d.data.missingAttributes,remoteError:d.data.remoteError,username:d.data.username,step:d.data.step,totpSecretCode:d.data.totpSecretCode,unverifiedUserAttributes:d.data.unverifiedUserAttributes})}),applyAmplifyConfig:Ll({config(o,{data:d}){let{loginMechanisms:g=d.loginMechanisms??[],signUpAttributes:v=d.signUpAttributes??[],socialProviders:x=d.socialProviders??[],initialState:D,formFields:R,passwordSettings:L=d.passwordFormat??{}}=o.config;return g.length===0&&g.push("username"),{formFields:$ye(R)??{},initialState:D,loginMechanisms:g,passwordSettings:L,signUpAttributes:v,socialProviders:x}}}),spawnSignInActor:Ll({actorRef:(o,d)=>{let{services:g}=o,v=J$({services:g}).withContext(zS(o,"SIGN_IN"));return Vh(v,{name:"signInActor"})}}),spawnSignUpActor:Ll({actorRef:(o,d)=>{let{services:g}=o,v=X$({services:g}).withContext(zS(o,"SIGN_UP"));return Vh(v,{name:"signUpActor"})}}),spawnForgotPasswordActor:Ll({actorRef:(o,d)=>{let{services:g}=o,v=Y$({services:g}).withContext(zS(o,"FORGOT_PASSWORD"));return Vh(v,{name:"forgotPasswordActor"})}}),spawnVerifyUserAttributesActor:Ll({actorRef:o=>{let d=eG().withContext(zS(o));return Vh(d,{name:"verifyUserAttributesActor"})}}),spawnSignOutActor:Ll({actorRef:o=>{let d=Q$().withContext({user:o?.user});return Vh(d,{name:"signOutActor"})}}),configure:Ll((o,d)=>{let x=s3(t)?d.data??{}:t,{services:g}=x,v=sc(x,["services"]);return{services:q(q({},_a),g),config:v}}),setHasSetup:Ll({hasSetup:!0})}),guards:Ie(q({},ad),{hasActor:({actorRef:o})=>!!o,isInitialStateSignUp:({config:o})=>o.initialState==="signUp",isInitialStateResetPassword:({config:o})=>o.initialState==="forgotPassword",shouldSetup:({hasSetup:o})=>!o,hasUser:({user:o})=>!!o}),services:{getAmplifyConfig:({services:o})=>o.getAmplifyConfig(),handleGetCurrentUser:({services:o})=>o.getCurrentUser()}})}function $ye(e){return e&&Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(t=>{let i=e[n][t];i.required=i.isRequired})}),e}var VS=(...e)=>{let n=[];for(let t of e)if(t){if(K_(t)){n.push(t);continue}if(typeof t=="number"){n.push(t.toString());continue}if(Array.isArray(t)){n.push(VS(...t));continue}if(Oh(t)){if(t.toString!==Object.prototype.toString&&t.toString()!=="[object Object]"){n.push(t.toString());continue}for(let i in t)sM(t,i)&&t[i]&&n.push(i)}}return n.join(" ")};var zP={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Avatar:"amplify-avatar",AvatarIcon:"amplify-avatar__icon",AvatarImage:"amplify-avatar__image",AvatarLoader:"amplify-avatar__loader",AIConversation:"amplify-ai-conversation",AIConversationAttachment:"amplify-ai-conversation__attachment",AIConversationAttachmentList:"amplify-ai-conversation__attachment__list",AIConversationAttachmentImage:"amplify-ai-conversation__attachment__image",AIConversationAttachmentName:"amplify-ai-conversation__attachment__name",AIConversationAttachmentSize:"amplify-ai-conversation__attachment__size",AIConversationAttachmentRemove:"amplify-ai-conversation__attachment__remove",AIConversationForm:"amplify-ai-conversation__form",AIConversationFormAttach:"amplify-ai-conversation__form__attach",AIConversationFormError:"amplify-ai-conversation__form__error",AIConversationFormSend:"amplify-ai-conversation__form__send",AIConversationFormField:"amplify-ai-conversation__form__field",AIConversationFormDropzone:"amplify-ai-conversation__form__dropzone",AIConversationMessage:"amplify-ai-conversation__message",AIConversationMessageAvatar:"amplify-ai-conversation__message__avatar",AIConversationMessageSender:"amplify-ai-conversation__message__sender",AIConversationMessageSenderUsername:"amplify-ai-conversation__message__sender__username",AIConversationMessageSenderTimestamp:"amplify-ai-conversation__message__sender__timestamp",AIConversationMessageBody:"amplify-ai-conversation__message__body",AIConversationMessageContent:"amplify-ai-conversation__message__content",AIConversationMessageActions:"amplify-ai-conversation__message__actions",AIConversationMessageList:"amplify-ai-conversation__message__list",AIConversationPrompt:"amplify-ai-conversation__prompt",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",FileUploader:"amplify-fileuploader",FileUploaderDropZone:"amplify-fileuploader__dropzone",FileUploaderDropZoneIcon:"amplify-fileuploader__dropzone__icon",FileUploaderDropZoneText:"amplify-fileuploader__dropzone__text",FileUploaderFilePicker:"amplify-fileuploader__file__picker",FileUploaderFile:"amplify-fileuploader__file",FileUploaderFileWrapper:"amplify-fileuploader__file__wrapper",FileUploaderFileList:"amplify-fileuploader__file__list",FileUploaderFileName:"amplify-fileuploader__file__name",FileUploaderFileSize:"amplify-fileuploader__file__size",FileUploaderFileInfo:"amplify-fileuploader__file__info",FileUploaderFileImage:"amplify-fileuploader__file__image",FileUploaderFileMain:"amplify-fileuploader__file__main",FileUploaderFileStatus:"amplify-fileuploader__file__status",FileUploaderLoader:"amplify-fileuploader__loader",FileUploaderPreviewer:"amplify-fileuploader__previewer",FileUploaderPreviewerText:"amplify-fileuploader__previewer__text",FileUploaderPreviewerActions:"amplify-fileuploader__previewer__actions",FileUploaderPreviewerFooter:"amplify-fileuploader__previewer__footer",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"};var VP=({componentName:e,packageName:n,version:t})=>{let i=[`ui-${n}`,t];switch(e){case"AIConversation":{Sl(Ie(q({},Xz),{additionalDetails:[[e],i]}));break}case"Authenticator":{Sl(Ie(q({},e3),{additionalDetails:[[e],i]}));break}case"ChangePassword":case"DeleteUser":{Sl(Ie(q({},Qz),{additionalDetails:[["AccountSettings"],i]}));break}case"FileUploader":{Sl(Ie(q({},t3),{additionalDetails:[[e],i]}));break}case"InAppMessaging":{Sl(Ie(q({},n3),{additionalDetails:[[e],i]}));break}case"LocationSearch":{Sl(Ie(q({},i3),{additionalDetails:[[e],i]}));break}case"MapView":{Sl(Ie(q({},r3),{additionalDetails:[[e],i]}));break}case"StorageManager":{Sl(Ie(q({},o3),{additionalDetails:[[e],i]}));break}}return a3};var Mc=(e=21)=>{let n="",t=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let i=t[e]&63;i<36?n+=i.toString(36):i<62?n+=(i-26).toString(36).toUpperCase():i<63?n+="_":n+="-"}return n};var aq=gy(nq(),1);var Zh=["*"];function U_e(e,n){e&1&&ws(0,0,["*ngIf","!isOverriden"])}function z_e(e,n){if(e&1&&e1(0,2),e&2){let t=ut();Ce("ngTemplateOutlet",t.overridingComponent)("ngTemplateOutletContext",t.context)}}var V_e=["amplify-button",""];function j_e(e,n){e&1&&(Na(),Y(0,"svg",4),Qe(1,"path",5),Z())}function H_e(e,n){e&1&&(Na(),Y(0,"svg",4),Qe(1,"path",6)(2,"path",7),Z())}function $_e(e,n){if(e&1&&(Y(0,"option",7),me(1),Z()),e&2){let t=n.$implicit,i=ut();Ce("value",t)("selected",t===i.defaultValue),he(),Mt(" ",t," ")}}function G_e(e,n){if(e&1&&Qe(0,"amplify-phone-number-field",5),e&2){let t=ut();Ce("name",t.name)("label",t.formField.label)("defaultCountryCode",t.formField.dialCode)("dialCodeList",t.formField.dialCodeList)("placeholder",t.formField.placeholder)("required",t.formField.isRequired)("labelHidden",t.formField.labelHidden)("autocomplete",t.formField.autocomplete)("hasError",t.hasError)("describedBy",t.ariaDescribedBy)}}function q_e(e,n){if(e&1){let t=Lr();Y(0,"amplify-password-field",6),dt("setBlur",function(r){xi(t);let o=ut();return Si(o.onBlur(r))}),Z()}if(e&2){let t=ut();Ce("name",t.name)("label",t.formField.label)("placeholder",t.formField.placeholder)("required",t.formField.isRequired)("labelHidden",t.formField.labelHidden)("autocomplete",t.formField.autocomplete)("hasError",t.hasError)("describedBy",t.ariaDescribedBy)}}function W_e(e,n){if(e&1&&Qe(0,"amplify-text-field",7),e&2){let t=ut();Ce("name",t.name)("label",t.formField.label)("placeholder",t.formField.placeholder)("required",t.formField.isRequired)("labelHidden",t.formField.labelHidden)("autocomplete",t.formField.autocomplete)("type",t.formField.type)("hasError",t.hasError)("describedBy",t.ariaDescribedBy)}}function Z_e(e,n){if(e&1&&(Y(0,"div",10),me(1),Z()),e&2){let t=n.$implicit,i=ut(2);he(),Mt(" ",i.translate(t)," ")}}function K_e(e,n){if(e&1&&(Y(0,"div",8),Nt(1,Z_e,2,1,"div",9),Z()),e&2){let t=ut();Ce("id",t.errorId),he(),Ce("ngForOf",t.errors)}}function Y_e(e,n){if(e&1&&(ia(0),Qe(1,"amplify-form-field",1),ra()),e&2){let t=n.$implicit;he(),Ce("name",t[0])("formField",t[1])}}function J_e(e,n){if(e&1){let t=Lr();Y(0,"div",1)(1,"div",2),Na(),Y(2,"svg",3),Qe(3,"path",4),Z(),ah(),Y(4,"div"),ws(5),Z()(),Y(6,"button",5),dt("click",function(){xi(t);let r=ut();return Si(r.close())}),Na(),Y(7,"svg",3),Qe(8,"path",6),Z()()()}if(e&2){let t=ut();he(2),In("aria-hidden",!0),he(4),Ce("fullWidth",!1),In("aria-label",t.dismissAriaLabel),he(),In("aria-hidden",!0)}}function X_e(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function Q_e(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function eve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function tve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function nve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function ive(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function rve(e,n){e&1&&(Y(0,"p"),me(1,"Loading..."),Z())}function ove(e,n){if(e&1&&Qe(0,"img",15),e&2){let t=ut();Ce("src",t.qrCodeSource,VD)}}function sve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function ave(e,n){if(e&1&&(Y(0,"amplify-federated-sign-in-button",5),Na(),Y(1,"svg",6),Qe(2,"path",7),Z(),ah(),Y(3,"p",8),me(4),Z()()),e&2){let t=ut(2);Ce("text",t.signInAmazonText)("provider",t.FederatedProviders.Amazon),he(4),Mt(" ",t.signInAmazonText," ")}}function lve(e,n){if(e&1&&(Y(0,"amplify-federated-sign-in-button",9),Na(),Y(1,"svg",10),Qe(2,"path",11),Z(),ah(),Y(3,"p",8),me(4),Z()()),e&2){let t=ut(2);Ce("provider",t.FederatedProviders.Apple),he(4),Mt(" ",t.signInAppleText," ")}}function cve(e,n){if(e&1&&(Y(0,"amplify-federated-sign-in-button",5),Na(),Y(1,"svg",12),Qe(2,"path",13),Z(),ah(),Y(3,"p",8),me(4),Z()()),e&2){let t=ut(2);Ce("text",t.signInFacebookText)("provider",t.FederatedProviders.Facebook),he(4),Mt(" ",t.signInFacebookText," ")}}function uve(e,n){if(e&1&&(Y(0,"amplify-federated-sign-in-button",9),Na(),Y(1,"svg",14),Qe(2,"path",15)(3,"path",16)(4,"path",17)(5,"path",18),Z(),ah(),Y(6,"p",8),me(7),Z()()),e&2){let t=ut(2);Ce("provider",t.FederatedProviders.Google),he(7),Mt(" ",t.signInGoogleText," ")}}function dve(e,n){if(e&1&&(Y(0,"div",1),Nt(1,ave,5,3,"amplify-federated-sign-in-button",2)(2,lve,5,2,"amplify-federated-sign-in-button",3)(3,cve,5,3,"amplify-federated-sign-in-button",2)(4,uve,8,2,"amplify-federated-sign-in-button",3),Qe(5,"hr",4),Z()),e&2){let t=ut();he(),Ce("ngIf",t.includeAmazon),he(),Ce("ngIf",t.includeApple),he(),Ce("ngIf",t.includeFacebook),he(),Ce("ngIf",t.includeGoogle),he(),In("data-label",t.orText)}}function hve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function pve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function fve(e,n){e&1&&ws(0,0,["*ngIf","active"])}function mve(e,n){if(e&1){let t=Lr();Y(0,"button",3),dt("click",function(){let r=xi(t).$implicit,o=ut();return Si(o.handleTabClick(r))}),me(1),Z()}if(e&2){let t=n.$implicit;Ro(t.active?"amplify-tabs__item--active":""),Ce("id",t.labelledById)("tabindex",t.active?"0":"-1"),In("aria-selected",t.active)("aria-controls",t.id),he(),Mt(" ",t.title," ")}}function gve(e,n){if(e&1&&(Y(0,"div"),Qe(1,"input",9),Y(2,"label",10),me(3),Z()()),e&2){let t=n.$implicit,i=n.index,r=ut();he(),Ce("value",t.key)("id",r.labelId)("checked",i===0),he(),Ce("for",r.labelId),he(),Ji(r.getLabel(t.key,t.value))}}function yve(e,n){if(e&1&&(Y(0,"amplify-error"),me(1),Z()),e&2){let t=ut();he(),Mt(" ",t.authenticator.error," ")}}function _ve(e,n){if(e&1&&(Y(0,"amplify-slot",20),Qe(1,"amplify-sign-in"),Z()),e&2){let t=ut(3);Ce("context",t.context)}}function vve(e,n){if(e&1&&(Y(0,"amplify-slot",21),Qe(1,"amplify-sign-up"),Z()),e&2){let t=ut(3);Ce("context",t.context)}}function bve(e,n){if(e&1){let t=Lr();Y(0,"amplify-tabs",17),dt("tabChange",function(){xi(t);let r=ut(2);return Si(r.onTabChange())}),Y(1,"amplify-tab-item",18),Nt(2,_ve,2,1,"amplify-slot",7),Z(),Y(3,"amplify-tab-item",18),Nt(4,vve,2,1,"amplify-slot",19),Z()()}if(e&2){let t=ut(2);he(),Ce("title",t.signInTitle)("active",t.route==="signIn"),he(),Ce("ngIf",t.route==="signIn"),he(),Ce("title",t.signUpTitle)("active",t.route==="signUp"),he(),Ce("ngIf",t.route==="signUp")}}function wve(e,n){if(e&1&&(Y(0,"amplify-slot",20),Qe(1,"amplify-sign-in"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function xve(e,n){if(e&1&&(Y(0,"amplify-slot",22),Qe(1,"amplify-confirm-sign-up"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Sve(e,n){if(e&1&&(Y(0,"amplify-slot",23),Qe(1,"amplify-confirm-sign-in"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Cve(e,n){if(e&1&&(Y(0,"amplify-slot",24),Qe(1,"amplify-setup-totp"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Eve(e,n){if(e&1&&(Y(0,"amplify-slot",25),Qe(1,"amplify-force-new-password"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Ive(e,n){if(e&1&&(Y(0,"amplify-slot",26),Qe(1,"amplify-forgot-password"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Dve(e,n){if(e&1&&(Y(0,"amplify-slot",27),Qe(1,"amplify-confirm-reset-password"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Tve(e,n){if(e&1&&(Y(0,"amplify-slot",28),Qe(1,"amplify-verify-user"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Ave(e,n){if(e&1&&(Y(0,"amplify-slot",29),Qe(1,"amplify-confirm-verify-user"),Z()),e&2){let t=ut(2);Ce("context",t.context)}}function Mve(e,n){if(e&1&&(Y(0,"div",2)(1,"div",3),Qe(2,"amplify-slot",4),Y(3,"div",5),Nt(4,bve,5,6,"amplify-tabs",6)(5,wve,2,1,"amplify-slot",7)(6,xve,2,1,"amplify-slot",8)(7,Sve,2,1,"amplify-slot",9)(8,Cve,2,1,"amplify-slot",10)(9,Eve,2,1,"amplify-slot",11)(10,Ive,2,1,"amplify-slot",12)(11,Dve,2,1,"amplify-slot",13)(12,Tve,2,1,"amplify-slot",14)(13,Ave,2,1,"amplify-slot",15),Z(),Qe(14,"amplify-slot",16),Z()()),e&2){let t=ut();In("data-variation",t.variation),he(2),Ce("context",t.context),he(),In("data-amplify-router-content",t.hasTabs()?void 0:""),he(),Ce("ngIf",(t.route==="signIn"||t.route==="signUp")&&!t.hideSignUp),he(),Ce("ngIf",t.route==="signIn"&&t.hideSignUp),he(),Ce("ngIf",t.route==="confirmSignUp"),he(),Ce("ngIf",t.route==="confirmSignIn"),he(),Ce("ngIf",t.route==="setupTotp"),he(),Ce("ngIf",t.route==="forceNewPassword"),he(),Ce("ngIf",t.route==="forgotPassword"),he(),Ce("ngIf",t.route==="confirmResetPassword"),he(),Ce("ngIf",t.route==="verifyUser"),he(),Ce("ngIf",t.route==="confirmVerifyUser"),he(),Ce("context",t.context)}}function Pve(e,n){if(e&1&&(Y(0,"amplify-slot",30),ws(1),Z()),e&2){let t=ut();Ce("context",t.context)}}var hR=(()=>{class e{constructor(t){this.template=t}set amplifySlot(t){this.name=t}}return e.\u0275fac=function(t){return new(t||e)(Je(Xr))},e.\u0275dir=Ln({type:e,selectors:[["","amplifySlot",""]],inputs:{amplifySlot:"amplifySlot"}}),e})(),dR=(()=>{class e{constructor(){this._customComponents={}}get customComponents(){return this._customComponents}set customComponents(t){this._customComponents=q(q({},this._customComponents),t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rve="5.0.33",Ove=new ui("state-machine"),ir=(()=>{class e{constructor(){this._authStatus="configuring";let t=UP();this._authService=vS(t).start(),this.getInitialAuthStatus(),this.setupMachineSubscription(),this.setupHubListener()}get error(){return Ft(this._facade?.error)}get hasValidationErrors(){return this._facade?.hasValidationErrors}get isPending(){return this._facade?.isPending}get route(){return this._facade?.route}get authStatus(){return this._authStatus}get user(){return this._facade?.user}get username(){return this._facade?.username}get validationErrors(){return this._facade?.validationErrors}get codeDeliveryDetails(){return this._facade?.codeDeliveryDetails}get totpSecretCode(){return this._facade?.totpSecretCode}get initializeMachine(){return this._facade.initializeMachine}get updateForm(){return this._facade.updateForm}get updateBlur(){return this._facade.updateBlur}get resendCode(){return this._facade.resendCode}get signOut(){return this._facade.signOut}get submitForm(){return this._facade.submitForm}get toFederatedSignIn(){return this._facade.toFederatedSignIn}get toForgotPassword(){return this._facade.toForgotPassword}get toSignIn(){return this._facade.toSignIn}get toSignUp(){return this._facade.toSignUp}get skipVerification(){return this._facade.skipVerification}get authState(){return this._authState}get authService(){return this._authService}get context(){return this._authState.context}get slotContext(){return Ie(q({},this._facade),{$implicit:this._facade})}get hubSubject(){return this._hubSubject}subscribe(t){return this._authService||Ove.error("Subscription attempted before machine was created. This is likely a bug on the library, please consider filing a bug."),this._authService.subscribe(()=>{t(this._facade)})}ngOnDestroy(){this._machineSubscription&&this._machineSubscription.unsubscribe(),this._unsubscribeHub&&this._unsubscribeHub()}send(t){this.authService.send(t)}getInitialAuthStatus(){return ne(this,null,function*(){try{yield Os(),this._authStatus="authenticated"}catch{this._authStatus="unauthenticated"}})}setupHubListener(){this._hubSubject=new Bt;let t=()=>{this._authStatus="authenticated"},i=()=>{this._authStatus="unauthenticated"};this._unsubscribeHub=lM(this._authService,(r,o)=>{Tx(r,o,{onSignIn:t,onSignOut:i}),this._hubSubject.next()})}setupMachineSubscription(){this._machineSubscription=this._authService.subscribe(t=>{let i=t;this._authState=i,this._facade=uM({send:this._authService.send,state:i})})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qa=(()=>{class e{constructor(t){this.propService=t,this.display="contents",this.isOverriden=!1}ngAfterContentInit(){let{customComponents:t}=this.propService,i=t[this.name];i&&(this.overridingComponent=i,this.isOverriden=!0)}}return e.\u0275fac=function(t){return new(t||e)(Je(dR))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-slot"]],hostVars:2,hostBindings:function(t,i){t&2&&Fa("display",i.display)},inputs:{name:"name",context:"context"},ngContentSelectors:Zh,decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&(bs(),Nt(0,U_e,1,0,"ng-content",0)(1,z_e,1,2,"ng-container",1)),t&2&&(Ce("ngIf",!i.isOverriden),he(),Ce("ngIf",i.isOverriden))},dependencies:[Li,IT],encapsulation:2}),e})(),Fs=(()=>{class e{constructor(){this.type="button",this.fullWidth=!1,this.isDisabled=!1,this.size="medium",this.variation="default",this.fontWeight="normal"}get getDisabled(){return this.isDisabled?"":null}get classNames(){let t="amplify-button";return this.variation&&(t+=` amplify-button--${this.variation}`),this.size&&(t+=` amplify-button--${this.size}`),this.fullWidth&&(t+=" amplify-button--fullwidth"),this.isDisabled&&(t+=" amplify-button--disabled amplify-button--loading"),t}ngOnInit(){this.typeAttr=this.type,this.fullWidthAttr=this.fullWidth,this.sizeAttr=this.size,this.variationAttr=this.variation,this.fontWeightAttr=this.fontWeight}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["button","amplify-button",""]],hostVars:9,hostBindings:function(t,i){t&2&&(t1("type",i.typeAttr),In("data-fullwidth",i.fullWidthAttr)("data-size",i.sizeAttr)("data-variation",i.variationAttr)("disabled",i.getDisabled),Ro(i.classNames),Fa("font-weight",i.fontWeightAttr))},inputs:{type:"type",fullWidth:"fullWidth",isDisabled:"isDisabled",size:"size",variation:"variation",fontWeight:"fontWeight"},attrs:V_e,ngContentSelectors:Zh,decls:1,vars:0,template:function(t,i){t&1&&(bs(),ws(0))},encapsulation:2}),e})(),kve=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.fieldId=`amplify-field-${Mc(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.setBlur=new kn,this.type="password",this.showPassword=!1,this.showPasswordButtonlabel=Ft("Show password"),this.classnames=VS,this.ComponentClassName=zP}togglePasswordText(){this.showPassword=!this.showPassword,this.showPasswordButtonlabel=this.showPassword?Ft("Hide password"):Ft("Show password"),this.type=this.showPassword?"text":"password"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-password-field"]],inputs:{autocomplete:"autocomplete",disabled:"disabled",fieldId:"fieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",labelHidden:"labelHidden",hasError:"hasError",describedBy:"describedBy"},outputs:{setBlur:"setBlur"},decls:10,vars:30,consts:[[1,"amplify-label",3,"for"],["autocapitalize","off",3,"blur","id","type","name","placeholder","required","value","autocomplete"],["amplify-button","","role","switch",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24","class","amplify-icon",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"amplify-icon"],["d","M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"],["d","M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z","fill","none"],["d","M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"]],template:function(t,i){t&1&&(Y(0,"div")(1,"label",0),me(2),Z(),Y(3,"div")(4,"div")(5,"input",1),dt("blur",function(o){return i.setBlur.emit(o)}),Z()(),Y(6,"div")(7,"button",2),dt("click",function(){return i.togglePasswordText()}),Nt(8,j_e,2,0,"svg",3)(9,H_e,3,0,"svg",3),Z()()()()),t&2&&(Ro(i.classnames(i.ComponentClassName.Flex,i.ComponentClassName.Field,i.ComponentClassName.TextField,i.ComponentClassName.PasswordField)),he(),na("amplify-visually-hidden",i.labelHidden),Ce("for",i.fieldId),he(),Mt(" ",i.label," "),he(),Ro(i.classnames(i.ComponentClassName.Flex,i.ComponentClassName.FieldGroup)),he(),Ro(i.ComponentClassName.FieldGroupFieldWrapper),he(),Ro(i.classnames(i.ComponentClassName.Input,i.ComponentClassName.FieldGroupControl,i.ComponentClassName.FieldShowPassword)),Ce("id",i.fieldId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("required",i.required)("value",i.initialValue)("autocomplete",i.autocomplete),In("disabled",i.disabled?"":null)("aria-invalid",i.hasError?"true":"false")("aria-describedby",i.describedBy),he(),Ro(i.ComponentClassName.FieldGroupOuterEnd),he(),Ro(i.classnames(i.ComponentClassName.Input,i.ComponentClassName.FieldGroupControl)),In("aria-checked",i.type!=="password")("aria-label",i.showPasswordButtonlabel),he(),Ce("ngIf",!i.showPassword),he(),Ce("ngIf",i.showPassword))},dependencies:[Li,Fs],encapsulation:2}),e})(),Nve=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-form-select"]],inputs:{items:"items",name:"name",label:"label",id:"id",defaultValue:"defaultValue"},decls:8,vars:5,consts:[[1,"amplify-label","amplify-visually-hidden",3,"for"],[1,"amplify-select__wrapper"],["autocomplete","tel-country-code",1,"amplify-select","amplify-field-group__control",3,"id","name"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"amplify-flex","amplify-select__icon",2,"align-items","center","justify-content","center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","data-size","large","fill","currentColor",1,"amplify-icon"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"],[3,"value","selected"]],template:function(t,i){t&1&&(Y(0,"label",0),me(1),Z(),Y(2,"div",1)(3,"select",2),Nt(4,$_e,2,3,"option",3),Z(),Y(5,"div",4),Na(),Y(6,"svg",5),Qe(7,"path",6),Z()()()),t&2&&(Ce("for",i.id),he(),Ji(i.label),he(2),Ce("id",i.id)("name",i.name),he(),Ce("ngForOf",i.items))},dependencies:[ku],encapsulation:2}),e})(),Fve=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.selectFieldId=`amplify-field-${Mc(12)}`,this.textFieldId=`amplify-field-${Mc(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.display="contents"}ngOnInit(){this.countryDialCodesValues=this.dialCodeList??sm}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-phone-number-field"]],hostVars:2,hostBindings:function(t,i){t&2&&Fa("display",i.display)},inputs:{autocomplete:"autocomplete",disabled:"disabled",defaultCountryCode:"defaultCountryCode",selectFieldId:"selectFieldId",textFieldId:"textFieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",type:"type",labelHidden:"labelHidden",dialCodeList:"dialCodeList",hasError:"hasError",describedBy:"describedBy"},decls:9,vars:17,consts:[[1,"amplify-flex","amplify-field","amplify-textfield","amplify-phonenumberfield"],[1,"amplify-label",3,"for"],[1,"amplify-flex","amplify-field-group","amplify-field-group--horizontal"],[1,"amplify-field-group__outer-start"],[1,"amplify-flex","amplify-field","amplify-selectfield","amplify-dialcodeselect",2,"flex-direction","column"],["name","country_code","label","Country Code",3,"id","items","defaultValue"],[1,"amplify-field-group__field-wrapper","amplify-field-group__field-wrapper--horizontal"],[1,"amplify-input","amplify-field-group__control",3,"id","type","name","placeholder","required","value","autocomplete"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"label",1),me(2),Z(),Y(3,"div",2)(4,"div",3)(5,"div",4),Qe(6,"amplify-form-select",5),Z()(),Y(7,"div",6),Qe(8,"input",7),Z()()()),t&2&&(he(),na("amplify-visually-hidden",i.labelHidden),Ce("for",i.textFieldId),he(),Mt(" ",i.label," "),he(4),Ce("id",i.selectFieldId)("items",i.countryDialCodesValues)("defaultValue",i.defaultCountryCode),he(2),Ce("id",i.textFieldId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("required",i.required)("value",i.initialValue)("autocomplete",i.autocomplete),In("disabled",i.disabled?"":null)("aria-invalid",i.hasError?"true":"false")("aria-describedby",i.describedBy))},dependencies:[Nve],encapsulation:2}),e})(),Lve=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.fieldId=`amplify-field-${Mc(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.display="contents"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-text-field"]],hostVars:2,hostBindings:function(t,i){t&2&&Fa("display",i.display)},inputs:{autocomplete:"autocomplete",disabled:"disabled",fieldId:"fieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",type:"type",labelHidden:"labelHidden",hasError:"hasError",describedBy:"describedBy"},decls:3,vars:14,consts:[[1,"amplify-label",3,"for"],["autocapitalize","off",1,"amplify-input",3,"id","type","name","placeholder","required","value","autocomplete"]],template:function(t,i){t&1&&(Y(0,"label",0),me(1),Z(),Qe(2,"input",1)),t&2&&(na("amplify-visually-hidden",i.labelHidden),Ce("for",i.fieldId),he(),Mt(" ",i.label,`
`),he(),Ce("id",i.fieldId)("type",i.type)("name",i.name)("placeholder",i.placeholder)("required",i.required)("value",i.initialValue)("autocomplete",i.autocomplete),In("disabled",i.disabled?"":null)("aria-invalid",i.hasError?"true":"false")("aria-describedby",i.describedBy))},encapsulation:2}),e})(),Bve=(()=>{class e{constructor(t){this.authenticator=t,this.countryDialCodesValue=sm,this.errorId=Mc(12)}get ariaDescribedBy(){return this.hasError()?this.errorId:void 0}get errors(){let{validationErrors:t}=this.authenticator;return hM(t[this.name])}onBlur(t){let{name:i}=t.target;this.authenticator.updateBlur({name:i})}isPasswordField(){return this.formField.type==="password"}isPhoneField(){return this.formField.type==="tel"}hasError(){return this.errors?.length>0}translate(t){return Ft(t)}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-form-field"]],inputs:{name:"name",formField:"formField"},decls:5,vars:4,consts:[[1,"amplify-flex","amplify-field","amplify-authenticator__column"],["type","tel",3,"name","label","defaultCountryCode","dialCodeList","placeholder","required","labelHidden","autocomplete","hasError","describedBy",4,"ngIf"],[3,"name","label","placeholder","required","labelHidden","autocomplete","hasError","describedBy","setBlur",4,"ngIf"],[3,"name","label","placeholder","required","labelHidden","autocomplete","type","hasError","describedBy",4,"ngIf"],["data-amplify-sign-up-errors","",3,"id",4,"ngIf"],["type","tel",3,"name","label","defaultCountryCode","dialCodeList","placeholder","required","labelHidden","autocomplete","hasError","describedBy"],[3,"setBlur","name","label","placeholder","required","labelHidden","autocomplete","hasError","describedBy"],[3,"name","label","placeholder","required","labelHidden","autocomplete","type","hasError","describedBy"],["data-amplify-sign-up-errors","",3,"id"],["class","amplify-text amplify-text--error","data-variation","error",4,"ngFor","ngForOf"],["data-variation","error",1,"amplify-text","amplify-text--error"]],template:function(t,i){t&1&&(Y(0,"div",0),Nt(1,G_e,1,10,"amplify-phone-number-field",1)(2,q_e,1,8,"amplify-password-field",2)(3,W_e,1,9,"amplify-text-field",3)(4,K_e,2,2,"div",4),Z()),t&2&&(he(),Ce("ngIf",i.isPhoneField()),he(),Ce("ngIf",i.isPasswordField()),he(),Ce("ngIf",!i.isPasswordField()&&!i.isPhoneField()),he(),Ce("ngIf",i.hasError()))},dependencies:[ku,Li,kve,Fve,Lve],encapsulation:2}),e})(),Rc=(()=>{class e{constructor(t){this.authenticator=t,this.display="contents",this.formFields=[]}ngOnInit(){let t=this.authenticator.authState;this.formFields=yM(this.route,t)}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-base-form-fields"]],hostVars:2,hostBindings:function(t,i){t&2&&Fa("display",i.display)},inputs:{route:"route"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"name","formField"]],template:function(t,i){t&1&&Nt(0,Y_e,2,2,"ng-container",0),t&2&&Ce("ngForOf",i.formFields)},dependencies:[ku,Bve],encapsulation:2}),e})(),Vl=(()=>{class e{constructor(){this.isVisible=!0,this.dismissAriaLabel=Ft("Dismiss alert")}close(){this.isVisible=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-error"]],ngContentSelectors:Zh,decls:1,vars:1,consts:[["class","amplify-flex amplify-alert amplify-alert--error","data-variation","error","style","align-items: center; justify-content: space-between","role","alert",4,"ngIf"],["data-variation","error","role","alert",1,"amplify-flex","amplify-alert","amplify-alert--error",2,"align-items","center","justify-content","space-between"],[1,"amplify-flex",2,"align-items","center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"amplify-icon"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["amplify-button","","variation","link",3,"click","fullWidth"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"]],template:function(t,i){t&1&&(bs(),Nt(0,J_e,9,4,"div",0)),t&2&&Ce("ngIf",i.isVisible)},dependencies:[Li,Fs],encapsulation:2}),e})(),{getBackToSignInText:Uve,getResendCodeText:zve,getSubmitText:Vve,getResetYourPasswordText:jve}=Xo,Hve=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=jve(),this.backToSignInText=Uve(),this.resendCodeText=zve(),this.submitText=Vve()}get context(){return this.authenticator.slotContext}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-confirm-reset-password"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-confirmsignin",i.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-reset-password-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmResetPassword"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true","type","button",3,"click"],[4,"ngIf"],["name","confirm-reset-password-footer",3,"context"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Qe(5,"amplify-base-form-fields",4),Y(6,"button",5),me(7),Z(),Y(8,"button",6),dt("click",function(){return i.authenticator.resendCode()}),me(9),Z(),Nt(10,X_e,2,1,"amplify-error",7),Z(),Qe(11,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.submitText," "),he(2),Mt(" ",i.resendCodeText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),{getConfirmText:$ve,getBackToSignInText:Gve,getChallengeText:qve}=Xo,Wve=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.confirmText=$ve(),this.backToSignInText=Gve()}get context(){return this.authenticator.slotContext}ngOnInit(){this.setHeaderText()}setHeaderText(){let t=this.authenticator.authState,i=Vu(t),{challengeName:r}=i;this.headerText=qve(r)}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-confirm-sign-in"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-confirmsignin",i.dataAttr)},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-sign-in-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmSignIn"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","confirm-sign-in-footer",3,"context"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Qe(5,"amplify-base-form-fields",4),Y(6,"button",5),me(7),Z(),Y(8,"button",6),dt("click",function(){return i.authenticator.toSignIn()}),me(9),Z(),Nt(10,Q_e,2,1,"amplify-error",7),Z(),Qe(11,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.confirmText," "),he(2),Mt(" ",i.backToSignInText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),{getResendCodeText:Zve,getConfirmText:Kve,getDeliveryMethodText:Yve,getDeliveryMessageText:Jve}=Xo,Xve=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.resendCodeText=Zve(),this.confirmText=Kve()}get context(){return this.authenticator.slotContext}get confirmSignUpHeading(){let{codeDeliveryDetails:t}=this.authenticator;return Yve(t)}get subtitleText(){let{codeDeliveryDetails:t}=this.authenticator;return Jve(t)}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-confirm-sign-up"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-confirmsignup",i.dataAttr)},decls:15,vars:9,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-sign-up-header",3,"context"],[1,"amplify-heading","amplify-authenticator__heading",2,"font-size","1.5rem"],[1,"amplify-authenticator__subtitle"],["route","confirmSignUp"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","fontWeight","normal",3,"click"],[4,"ngIf"],["name","confirm-sign-up-footer",3,"context"]],template:function(t,i){t&1&&(ia(0),Y(1,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(2,"fieldset",1)(3,"amplify-slot",2)(4,"h3",3),me(5),Z()(),Y(6,"span",4),me(7),Z(),Qe(8,"amplify-base-form-fields",5),Y(9,"button",6),me(10),Z(),Y(11,"button",7),dt("click",function(){return i.authenticator.resendCode()}),me(12),Z()(),Nt(13,eve,2,1,"amplify-error",8),Qe(14,"amplify-slot",9),Z(),ra()),t&2&&(he(2),Ce("disabled",i.context.isPending),he(),Ce("context",i.context),he(2),Mt(" ",i.confirmSignUpHeading," "),he(2),Mt(" ",i.subtitleText," "),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.confirmText," "),he(2),Mt(" ",i.resendCodeText," "),he(),Ce("ngIf",i.context.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),{getAccountRecoveryInfoText:Qve,getSkipText:e0e,getSubmitText:t0e}=Xo,n0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=Qve(),this.skipText=e0e(),this.submitText=t0e()}get context(){return this.authenticator.slotContext}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-confirm-verify-user"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-confirmverifyuser",i.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"input","submit"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-verify-user-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmVerifyUser"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","confirm-verify-user-footer",3,"context"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("input",function(o){return i.onInput(o)})("submit",function(o){return i.onSubmit(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Qe(5,"amplify-base-form-fields",4),Y(6,"button",5),me(7),Z(),Y(8,"button",6),dt("click",function(){return i.authenticator.skipVerification()}),me(9),Z(),Nt(10,tve,2,1,"amplify-error",7),Z(),Qe(11,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.submitText," "),he(2),Mt(" ",i.skipText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),i0e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-force-new-password-form-fields"]],decls:2,vars:0,consts:[["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column"],["route","forceNewPassword"]],template:function(t,i){t&1&&(Y(0,"div",0),Qe(1,"amplify-base-form-fields",1),Z())},dependencies:[Rc],encapsulation:2}),e})(),{getChangePasswordText:iq,getBackToSignInText:r0e}=Xo,o0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=iq(),this.changePasswordText=iq(),this.backToSignInText=r0e()}get context(){return this.authenticator.slotContext}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-force-new-password"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-forcenewpassword",i.dataAttr)},inputs:{headerText:"headerText"},decls:13,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","force-new-password-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["name","force-new-form-fields",3,"context"],["amplify-button","","variation","primary","fullWidth","true","type","submit"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","force-new-password-footer",3,"context"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Y(5,"amplify-slot",4),Qe(6,"amplify-force-new-password-form-fields"),Z(),Y(7,"button",5),me(8),Z(),Y(9,"button",6),dt("click",function(){return i.authenticator.toSignIn()}),me(10),Z(),Nt(11,nve,2,1,"amplify-error",7),Z(),Qe(12,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(),Ce("context",i.context),he(3),Mt(" ",i.changePasswordText," "),he(2),Mt(" ",i.backToSignInText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Fs,Vl,i0e],encapsulation:2}),e})(),{getResetYourPasswordText:s0e,getSendCodeText:a0e,getBackToSignInText:l0e}=Xo,c0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=s0e(),this.sendCodeText=a0e(),this.backToSignInText=l0e()}get context(){return this.authenticator.slotContext}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-forgot-password"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-forgotpassword",i.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","forgot-password-header",1,"amplify-flex",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","forgotPassword"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","forgot-password-footer",3,"context"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Qe(5,"amplify-base-form-fields",4),Y(6,"button",5),me(7),Z(),Y(8,"button",6),dt("click",function(){return i.authenticator.toSignIn()}),me(9),Z(),Nt(10,ive,2,1,"amplify-error",7),Z(),Qe(11,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.sendCodeText," "),he(2),Mt(" ",i.backToSignInText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),rq=new ui("SetupTotp"),{getSetupTotpText:u0e,getCopyText:d0e,getBackToSignInText:h0e,getConfirmText:p0e,getCopiedText:f0e}=Xo,m0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=u0e(),this.qrCodeSource="",this.totpSecretCode="",this.copyTextLabel=d0e(),this.backToSignInText=h0e(),this.confirmText=p0e()}get context(){return this.authenticator.slotContext}ngOnInit(){return ne(this,null,function*(){yield this.generateQRCode()})}generateQRCode(){return ne(this,null,function*(){let{authState:t,totpSecretCode:i,username:r}=this.authenticator,{formFields:o}=Vu(t),{totpIssuer:d="AWSCognito",totpUsername:g=r}=o?.setupTotp?.QR??{};this.totpSecretCode=i;try{let v=mM(d,g,this.totpSecretCode);rq.info("totp code was generated:",v),this.qrCodeSource=yield aq.default.toDataURL(v)}catch(v){rq.error(v)}})}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}copyText(){navigator.clipboard.writeText(this.totpSecretCode),this.copyTextLabel=f0e()}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-setup-totp"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-setup-totp",i.dataAttr)},decls:22,vars:12,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","setup-totp-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],[4,"ngIf"],["alt","qr code","data-amplify-qrcode","","width","228","height","228",3,"src",4,"ngIf"],["data-amplify-copy","",1,"amplify-flex"],["data-amplify-copy-svg","",3,"click"],["data-amplify-copy-tooltip",""],["width","24","height","24","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],["d","M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z"],["route","setupTotp"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],["name","setup-totp-footer",3,"context"],["alt","qr code","data-amplify-qrcode","","width","228","height","228",3,"src"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Nt(5,rve,2,0,"p",4)(6,ove,1,1,"img",5),Y(7,"div",6)(8,"div"),me(9),Z(),Y(10,"div",7),dt("click",function(){return i.copyText()}),Y(11,"div",8),me(12),Z(),Na(),Y(13,"svg",9),Qe(14,"path",10),Z()()(),ah(),Qe(15,"amplify-base-form-fields",11),Y(16,"button",12),me(17),Z(),Y(18,"button",13),dt("click",function(){return i.authenticator.toSignIn()}),me(19),Z(),Nt(20,sve,2,1,"amplify-error",4),Z(),Qe(21,"amplify-slot",14),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(),Ce("ngIf",!i.qrCodeSource),he(),Ce("ngIf",i.qrCodeSource),he(3),Ji(i.totpSecretCode),he(3),Ji(i.copyTextLabel),he(4),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.confirmText," "),he(2),Mt(" ",i.backToSignInText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[Li,qa,Rc,Fs,Vl],encapsulation:2}),e})(),g0e=(()=>{class e{constructor(t){this.authenticator=t,this.onClick=()=>{this.authenticator.send({type:"FEDERATED_SIGN_IN",data:{provider:this.provider}})}}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-federated-sign-in-button"]],inputs:{provider:"provider",text:"text"},ngContentSelectors:Zh,decls:3,vars:0,consts:[["amplify-button","","fullWidth","true","fontWeight","normal",1,"amplify-field-group__control","federated-sign-in-button",3,"click"],[1,"amplify-flex","federated-sign-in-button-row"]],template:function(t,i){t&1&&(bs(),Y(0,"button",0),dt("click",function(){return i.onClick()}),Y(1,"div",1),ws(2),Z()())},dependencies:[Fs],encapsulation:2}),e})(),{getSignInWithFederationText:QS,getOrText:y0e}=Xo,lq=(()=>{class e{constructor(t){this.authenticator=t,this.FederatedProviders=Ax,this.includeAmazon=!1,this.includeApple=!1,this.includeFacebook=!1,this.includeGoogle=!1,this.shouldShowFederatedSignIn=!1}ngOnInit(){let t=this.authenticator.context?.config?.socialProviders;this.setFederatedTexts(),this.includeAmazon=t?.includes("amazon"),this.includeApple=t?.includes("apple"),this.includeGoogle=t?.includes("google"),this.includeFacebook=t?.includes("facebook"),this.shouldShowFederatedSignIn=this.includeAmazon||this.includeApple||this.includeFacebook||this.includeGoogle}setFederatedTexts(){let{route:t}=this.authenticator;this.orText=y0e(),this.signInAmazonText=QS(t,"amazon"),this.signInAppleText=QS(t,"apple"),this.signInFacebookText=QS(t,"facebook"),this.signInGoogleText=QS(t,"google")}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-federated-sign-in"]],decls:1,vars:1,consts:[["class","amplify-flex federated-sign-in-container","data-orientation","horizontal","data-size","small",4,"ngIf"],["data-orientation","horizontal","data-size","small",1,"amplify-flex","federated-sign-in-container"],[3,"text","provider",4,"ngIf"],[3,"provider",4,"ngIf"],["aria-orientation","horizontal","data-size","small",1,"amplify-divider","amplify-divider--label","amplify-divider--small"],[3,"text","provider"],["aria-label","Amazon icon","viewBox","0 0 248 268",1,"amplify-icon","federated-sign-in-icon"],["d","M139.056521,147.024612 C133.548808,156.744524 124.782731,162.726926 115.087401,162.726926 C101.790721,162.726926 93.9937779,152.612964 93.9937779,137.68681 C93.9937779,108.224571 120.447551,102.879017 145.533369,102.879017 L145.533369,110.365976 C145.533369,123.831358 145.876354,135.063787 139.056521,147.024612 M207.206992,162.579655 C209.400505,165.692256 209.887066,169.437725 207.063416,171.770186 C199.996315,177.653081 187.429476,188.590967 180.513926,194.716661 L180.46208,194.621133 C178.176838,196.663031 174.862638,196.810303 172.27828,195.445057 C160.780281,185.9162 158.686473,181.494078 152.405048,172.403055 C133.405233,191.751331 119.909143,197.534719 95.309886,197.534719 C66.1281801,197.534719 43.4791563,179.599451 43.4791563,143.669212 C43.4791563,115.616003 58.6782107,96.5105248 80.4019706,87.1727225 C99.2063636,78.9096034 125.464714,77.4528107 145.533369,75.1641337 L145.533369,70.694248 C145.533369,62.4749122 146.167493,52.7510201 141.297893,45.6541312 C137.110277,39.2856386 129.018206,36.6586354 121.859376,36.6586354 C108.658413,36.6586354 96.9171331,43.4171982 94.0416364,57.4199213 C93.4593582,60.532522 91.1701278,63.5933787 88.003492,63.7406501 L54.4387473,60.1424518 C51.6150972,59.5095829 48.4484614,57.2248862 49.2740201,52.8982915 C56.9712583,12.2553679 93.7983558,0 126.732964,0 C143.587124,0 165.606011,4.47386604 178.902691,17.2148315 C195.760839,32.917146 194.149604,53.8694866 194.149604,76.6726704 L194.149604,130.542157 C194.149604,146.734049 200.87372,153.830938 207.206992,162.579655 Z M233.826346,208.038962 C230.467669,203.683255 211.550709,205.9821 203.056405,206.998432 C200.470662,207.321077 200.076227,205.042397 202.406981,203.404973 C217.475208,192.664928 242.201125,195.766353 245.081698,199.363845 C247.966255,202.981502 244.336653,228.071183 230.172839,240.049379 C228.001452,241.888455 225.929671,240.904388 226.89783,238.468418 C230.077218,230.430525 237.204944,212.418868 233.826346,208.038962 Z M126.768855,264 C74.0234043,264 42.0764048,241.955028 17.7852554,217.541992 C12.9733903,212.705982 6.71799208,206.295994 3.31151296,200.690918 C1.90227474,198.372135 5.59096074,195.021875 8.0442063,196.84375 C38.2390146,219.267578 82.1011654,239.538304 125.529506,239.538304 C154.819967,239.538304 191.046475,227.469543 220.66851,214.867659 C225.146771,212.966167 225.146771,219.180222 224.511585,221.060516 C224.183264,222.03242 209.514625,236.221149 189.247207,247.047411 C170.304273,257.166172 146.397132,264 126.768855,264 Z","fill","#FF9900"],[1,"amplify-text","amplify-authenticator__federated-text"],[3,"provider"],["aria-label","Apple icon","fill","#000","preserveAspectRatio","xMidYMid","stroke","#000","strokeWidth","0","viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg",1,"amplify-icon","federated-sign-in-icon"],["d","M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"],["aria-label","Facebook icon","viewBox","0 0 279 538",1,"amplify-icon","federated-sign-in-icon"],["d","M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z","fill","#1877F2"],["aria-label","Google icon","viewBox","0 0 256 262","xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid",1,"amplify-icon","federated-sign-in-icon"],["d","M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027","fill","#4285F4"],["d","M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1","fill","#34A853"],["d","M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782","fill","#FBBC05"],["d","M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251","fill","#EB4335"]],template:function(t,i){t&1&&Nt(0,dve,6,5,"div",0),t&2&&Ce("ngIf",i.shouldShowFederatedSignIn)},dependencies:[Li,g0e],encapsulation:2}),e})(),{getForgotPasswordText:_0e,getSignInText:v0e}=Xo,b0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.forgotPasswordText=_0e(),this.signInButtonText=v0e()}get context(){return this.authenticator.slotContext}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-sign-in"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-signin",i.dataAttr)},decls:14,vars:7,consts:[["name","sign-in-header",3,"context"],["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",2,"flex-direction","column",3,"disabled"],[1,"amplify-visually-hidden"],["route","signIn"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],[4,"ngIf"],["name","sign-in-footer",3,"context"],["data-amplify-footer",""],["amplify-button","","fontWeight","normal","size","small","variation","link","fullWidth","true",3,"click"]],template:function(t,i){t&1&&(Qe(0,"amplify-slot",0),Y(1,"form",1),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Qe(2,"amplify-federated-sign-in"),Y(3,"fieldset",2)(4,"legend",3),me(5,"Sign in"),Z(),Qe(6,"amplify-base-form-fields",4),Y(7,"button",5),me(8),Z(),Nt(9,hve,2,1,"amplify-error",6),Z()(),Y(10,"amplify-slot",7)(11,"div",8)(12,"button",9),dt("click",function(){return i.authenticator.toForgotPassword()}),me(13),Z()()()),t&2&&(Ce("context",i.context),he(3),Ce("disabled",i.authenticator.isPending),he(4),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.signInButtonText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context),he(3),Mt(" ",i.forgotPasswordText," "))},dependencies:[Li,qa,Rc,Fs,Vl,lq],encapsulation:2}),e})(),w0e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-sign-up-form-fields"]],decls:2,vars:0,consts:[["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column"],["route","signUp"]],template:function(t,i){t&1&&(Y(0,"div",0),Qe(1,"amplify-base-form-fields",1),Z())},dependencies:[Rc],encapsulation:2}),e})(),{getCreateAccountText:x0e}=Xo,S0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.createAccountText=x0e()}get context(){return this.authenticator.slotContext}onInput(t){let{checked:i,name:r,type:o,value:d}=t.target,g=o==="checkbox"&&!i;this.authenticator.updateForm({name:r,value:g?void 0:d})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-sign-up"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-signup",i.dataAttr)},decls:12,vars:7,consts:[["name","sign-up-header",3,"context"],["data-amplify-form","",3,"submit","input"],[1,"amplify-flex","amplify-authenticator__column"],["name","sign-up-form-fields",3,"context"],[4,"ngIf"],["name","sign-up-button",3,"context"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["name","sign-up-footer",3,"context"]],template:function(t,i){t&1&&(Qe(0,"amplify-slot",0),Y(1,"form",1),dt("submit",function(o){return i.onSubmit(o)})("input",function(o){return i.onInput(o)}),Qe(2,"amplify-federated-sign-in"),Y(3,"div",2)(4,"div",2)(5,"amplify-slot",3),Qe(6,"amplify-sign-up-form-fields"),Z(),Nt(7,pve,2,1,"amplify-error",4),Z(),Y(8,"amplify-slot",5)(9,"button",6),me(10),Z()()()(),Qe(11,"amplify-slot",7)),t&2&&(Ce("context",i.context),he(5),Ce("context",i.context),he(2),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context),he(),Ce("isDisabled",i.authenticator.isPending||i.authenticator.hasValidationErrors),he(),Mt(" ",i.createAccountText," "),he(),Ce("context",i.context))},dependencies:[Li,qa,Fs,Vl,lq,w0e],encapsulation:2}),e})(),cq=(()=>{class e{constructor(){this.active=!1,this.display="block"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-tab-item"]],hostVars:2,hostBindings:function(t,i){t&2&&Fa("display",i.display)},inputs:{title:"title",active:"active",id:"id",labelledById:"labelledById",tabIndex:"tabIndex"},ngContentSelectors:Zh,decls:2,vars:6,consts:[["role","tabpanel",1,"amplify-tabs__panel",3,"id"],[4,"ngIf"]],template:function(t,i){t&1&&(bs(),Y(0,"div",0),Nt(1,fve,1,0,"ng-content",1),Z()),t&2&&(Ro(i.active?"amplify-tabs__panel--active":""),Ce("id",i.id),In("aria-labelledby",i.labelledById)("tabindex",i.tabIndex),he(),Ce("ngIf",i.active))},dependencies:[Li],encapsulation:2}),e})(),C0e=(()=>{class e{constructor(){this.tabChange=new kn}ngAfterContentInit(){this.tabs.forEach((i,r)=>{i.id=`tab-${Mc(12)}-panel-${r}`,i.labelledById=`tab-${Mc(12)}-tab-${r}`}),this.tabs.filter(i=>i.active).length!==1&&this.selectTab(this.tabs.first)}selectTab(t){this.tabs.forEach(i=>{i.active=!1}),t.active=!0}handleTabClick(t){t.active||(this.tabChange.emit(),this.selectTab(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Pt({type:e,selectors:[["amplify-tabs"]],contentQueries:function(t,i,r){if(t&1&&Wy(r,cq,4),t&2){let o;yc(o=_c())&&(i.tabs=o)}},outputs:{tabChange:"tabChange"},ngContentSelectors:Zh,decls:4,vars:1,consts:[[1,"amplify-tabs"],["role","tablist",1,"amplify-tabs__list","amplify-tabs__list--top","amplify-tabs__list--equal"],["class","amplify-tabs__item","role","tab",3,"id","tabindex","class","click",4,"ngFor","ngForOf"],["role","tab",1,"amplify-tabs__item",3,"click","id","tabindex"]],template:function(t,i){t&1&&(bs(),Y(0,"div",0)(1,"div",1),Nt(2,mve,2,7,"button",2),Z()(),ws(3)),t&2&&(he(2),Ce("ngForOf",i.tabs))},dependencies:[ku],encapsulation:2}),e})(),E0e=()=>Zu,{getSkipText:I0e,getVerifyText:D0e,getAccountRecoveryInfoText:T0e}=Xo,A0e=(()=>{class e{constructor(t){this.authenticator=t,this.dataAttr="",this.headerText=T0e(),this.unverifiedUserAttributes={},this.labelId=Mc(12),this.skipText=I0e(),this.verifyText=D0e()}get context(){return this.authenticator.slotContext}ngOnInit(){let t=zu(this.authenticator.authState);this.unverifiedUserAttributes=t.context.unverifiedUserAttributes}getLabel(t,i){let r=E0e(),{label:o}=r[t],d=Ft(o),g=pM(o,i);return`${d}: ${g}`}onInput(t){t.preventDefault();let{name:i,value:r}=t.target;this.authenticator.updateForm({name:i,value:r})}onSubmit(t){t.preventDefault(),this.authenticator.submitForm(da(t))}}return e.\u0275fac=function(t){return new(t||e)(Je(ir))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-verify-user"]],hostVars:1,hostBindings:function(t,i){t&2&&In("data-amplify-authenticator-verifyuser",i.dataAttr)},inputs:{headerText:"headerText"},decls:13,vars:11,consts:[["data-amplify-form","",3,"input","submit"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","verify-user-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],[4,"ngFor","ngForOf"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","verify-user-footer",3,"context"],["name","unverifiedAttr","type","radio",3,"value","id","checked"],[3,"for"]],template:function(t,i){t&1&&(Y(0,"form",0),dt("input",function(o){return i.onInput(o)})("submit",function(o){return i.onSubmit(o)}),Y(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),me(4),Z()(),Nt(5,gve,4,5,"div",4),hT(6,"keyvalue"),Y(7,"button",5),me(8),Z(),Y(9,"button",6),dt("click",function(){return i.authenticator.skipVerification()}),me(10),Z(),Nt(11,yve,2,1,"amplify-error",7),Z(),Qe(12,"amplify-slot",8),Z()),t&2&&(he(),Ce("disabled",i.authenticator.isPending),he(),Ce("context",i.context),he(2),Ji(i.headerText),he(),Ce("ngForOf",pT(6,9,i.unverifiedUserAttributes)),he(2),Ce("isDisabled",i.authenticator.isPending),he(),Mt(" ",i.verifyText," "),he(2),Mt(" ",i.skipText," "),he(),Ce("ngIf",i.authenticator.error),he(),Ce("context",i.context))},dependencies:[ku,Li,qa,Fs,Vl,iB],encapsulation:2}),e})(),{getSignInTabText:oq,getSignUpTabText:sq}=Xo,uq=(()=>{class e{constructor(t,i,r){this.authenticator=t,this.contextService=i,this.changeDetector=r,this.customComponentQuery=null,this.signInTitle=oq(),this.signUpTitle=sq(),this.hasInitialized=!1,this.isHandlingHubEvent=!1}get context(){return this.authenticator.slotContext}get route(){return this.authenticator.route}ngOnInit(){let{initialState:t,loginMechanisms:i,services:r,signUpAttributes:o,socialProviders:d,formFields:g}=this;this.clearUserAgent=VP({componentName:"Authenticator",packageName:"angular",version:Rve});let{initializeMachine:v}=this.authenticator;this.authenticator.hubSubject.subscribe(()=>{this.changeDetector.detectChanges(),this.isHandlingHubEvent=!0}),this.unsubscribeMachine=this.authenticator.subscribe(()=>{let{route:x}=this.authenticator;this.isHandlingHubEvent&&(this.changeDetector.detectChanges(),x===(t??"signIn")&&(this.isHandlingHubEvent=!1)),!this.hasInitialized&&x==="setup"&&(v({initialState:t,loginMechanisms:i,services:r,signUpAttributes:o,socialProviders:d,formFields:g}),this.hasInitialized=!0)}).unsubscribe,this.signInTitle=oq(),this.signUpTitle=sq()}ngAfterContentInit(){this.contextService.customComponents=this.mapCustomComponents(this.customComponentQuery)}ngOnDestroy(){this.clearUserAgent(),this.unsubscribeMachine&&this.unsubscribeMachine()}onTabChange(){let{route:t}=this.authenticator;t==="signIn"?this.authenticator.toSignUp():this.authenticator.toSignIn()}hasTabs(){let{route:t}=this.authenticator;return t==="signIn"||t==="signUp"}hasRouteComponent(){let{route:t}=this.authenticator;switch(t){case"authenticated":case"idle":case"setup":case"signOut":case"transition":return!1;default:return!0}}mapCustomComponents(t){if(!t)return{};let i={};return t.forEach(r=>{i[r.name]=r.template}),i}}return e.\u0275fac=function(t){return new(t||e)(Je(ir),Je(dR),Je(Ko))},e.\u0275cmp=Pt({type:e,selectors:[["amplify-authenticator"]],contentQueries:function(t,i,r){if(t&1&&Wy(r,hR,4),t&2){let o;yc(o=_c())&&(i.customComponentQuery=o)}},inputs:{formFields:"formFields",initialState:"initialState",loginMechanisms:"loginMechanisms",services:"services",signUpAttributes:"signUpAttributes",socialProviders:"socialProviders",variation:"variation",hideSignUp:"hideSignUp"},features:[eo([dR])],ngContentSelectors:Zh,decls:2,vars:2,consts:[["data-amplify-authenticator","",4,"ngIf"],["name","authenticated",3,"context",4,"ngIf"],["data-amplify-authenticator",""],["data-amplify-container",""],["name","header",3,"context"],["data-amplify-router",""],[3,"tabChange",4,"ngIf"],["name","sign-in",3,"context",4,"ngIf"],["name","confirm-sign-up",3,"context",4,"ngIf"],["name","confirm-sign-in",3,"context",4,"ngIf"],["name","setup-totp",3,"context",4,"ngIf"],["name","force-new-password",3,"context",4,"ngIf"],["name","forgot-password",3,"context",4,"ngIf"],["name","confirm-reset-password",3,"context",4,"ngIf"],["name","verify-user",3,"context",4,"ngIf"],["name","confirm-verify-user",3,"context",4,"ngIf"],["name","footer",3,"context"],[3,"tabChange"],["data-amplify-router-content","",3,"title","active"],["name","sign-up",3,"context",4,"ngIf"],["name","sign-in",3,"context"],["name","sign-up",3,"context"],["name","confirm-sign-up",3,"context"],["name","confirm-sign-in",3,"context"],["name","setup-totp",3,"context"],["name","force-new-password",3,"context"],["name","forgot-password",3,"context"],["name","confirm-reset-password",3,"context"],["name","verify-user",3,"context"],["name","confirm-verify-user",3,"context"],["name","authenticated",3,"context"]],template:function(t,i){t&1&&(bs(),Nt(0,Mve,15,14,"div",0)(1,Pve,2,1,"amplify-slot",1)),t&2&&(Ce("ngIf",i.hasRouteComponent()),he(),Ce("ngIf",i.route==="authenticated"))},dependencies:[Li,qa,Hve,Wve,Xve,n0e,o0e,c0e,m0e,b0e,S0e,cq,C0e,A0e],encapsulation:2}),e})();var dq=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=kt({type:e}),e.\u0275inj=Ot({imports:[m1]}),e})();var ba=gy(jA(),1);function Kh(e){e||(kw(Kh),e=Me(ta));let n=new Zt(t=>e.onDestroy(t.next.bind(t)));return t=>t.pipe(Ii(n))}var P0e=["content"],R0e=["*"],O0e=["container"];var hq=e=>Object.keys(e).reduce((n,t)=>{let i=t;return e[i]===void 0?n:Ie(q({},n),{[i]:e[i]})},{}),Qm=(()=>{class e{constructor(){this.zone=Me(jt),this.subscriptionsPerInstance=new Map,this.mapCreated=new of,this.mapLoaded=new of,this.markersToRemove=Fr([]),this.popupsToRemove=Fr([]),this.imageIdsToRemove=Fr([]),this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(t){this.createMap(t.mapOptions),this.hookEvents(t.mapEvents),this.mapEvents=t.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),t.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(t.mapOptions.terrain)})}destroyMap(){this.mapInstance&&this.mapInstance.remove()}updateMinZoom(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(t)})}updateMaxZoom(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(t)})}updateMinPitch(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(t)})}updateMaxPitch(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(t)})}updateRenderWorldCopies(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(t)})}updateScrollZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(t){return this.zone.runOutsideAngular(()=>{t?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(t)})}updateMaxBounds(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(t)})}updateTerrain(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(t)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(t){let i=this.mapInstance.getCanvasContainer();i.style.cursor=t}queryRenderedFeatures(t,i){return this.mapInstance.queryRenderedFeatures(t,i)}panTo(t,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(t,i)})}move(t,i,r,o,d,g){return this.zone.runOutsideAngular(()=>{this.mapInstance[t](Ie(q({},i),{zoom:r??this.mapInstance.getZoom(),center:o??this.mapInstance.getCenter(),bearing:d??this.mapInstance.getBearing(),pitch:g??this.mapInstance.getPitch()}))})}addLayer(t,i,r){this.zone.runOutsideAngular(()=>{if(Object.keys(t.layerOptions).forEach(g=>{let v=g;t.layerOptions[v]===void 0&&delete t.layerOptions[v]}),this.mapInstance.addLayer(t.layerOptions,r),!i)return;let o=[];o.push(this.createSubscriptionForLayer(t.layerOptions.id,"click",t.layerEvents.layerClick)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"dblclick",t.layerEvents.layerDblClick)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mousedown",t.layerEvents.layerMouseDown)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mouseup",t.layerEvents.layerMouseUp)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mouseenter",t.layerEvents.layerMouseEnter)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mouseleave",t.layerEvents.layerMouseLeave)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mousemove",t.layerEvents.layerMouseMove)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mouseover",t.layerEvents.layerMouseOver)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"mouseout",t.layerEvents.layerMouseOut)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"contextmenu",t.layerEvents.layerContextMenu)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"touchstart",t.layerEvents.layerTouchStart)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"touchend",t.layerEvents.layerTouchEnd)),o.push(this.createSubscriptionForLayer(t.layerOptions.id,"touchcancel",t.layerEvents.layerTouchCancel));let d=this.mapInstance.getLayer(t.layerOptions.id);d&&this.subscriptionsPerInstance.set(d,o)})}removeLayer(t){this.zone.runOutsideAngular(()=>{let i=this.mapInstance.getLayer(t);if(i!=null){let r=this.subscriptionsPerInstance.get(i)||[];for(let o of r)o.unsubscribe();this.subscriptionsPerInstance.delete(i),this.mapInstance.removeLayer(t)}})}addMarker(t){let i={offset:t.markersOptions.offset,anchor:t.markersOptions.anchor,color:t.markersOptions.color,scale:t.markersOptions.scale,draggable:!!t.markersOptions.draggable,rotationAlignment:t.markersOptions.rotationAlignment,rotation:t.markersOptions.rotation,pitchAlignment:t.markersOptions.pitchAlignment,clickTolerance:t.markersOptions.clickTolerance,element:t.markersOptions.element.childNodes.length>0?t.markersOptions.element:void 0,opacity:t.markersOptions.opacity,opacityWhenCovered:t.markersOptions.opacityWhenCovered,subpixelPositioning:t.markersOptions.subpixelPositioning},r=new ba.Marker(i);r.on("dragstart",d=>{if(d){let{target:g}=d;this.zone.run(()=>{t.markersEvents.markerDragStart.emit(g)})}}),r.on("drag",d=>{if(d){let{target:g}=d;this.zone.run(()=>t.markersEvents.markerDrag.emit(g))}}),r.on("dragend",d=>{if(d){let{target:g}=d;this.zone.run(()=>t.markersEvents.markerDragEnd.emit(g))}});let o=t.markersOptions.feature?t.markersOptions.feature.geometry.coordinates:t.markersOptions.lngLat;return r.setLngLat(o),this.zone.runOutsideAngular(()=>(r.addTo(this.mapInstance),r))}removeMarker(t){this.markersToRemove.update(i=>[...i,t])}createPopup(t,i){return this.zone.runOutsideAngular(()=>{let r=hq(t.popupOptions),o=new ba.Popup(r);o.setDOMContent(i);let d=[];return d.push(this.createSubscriptionForPopup(o,"open",t.popupEvents.popupOpen)),d.push(this.createSubscriptionForPopup(o,"close",t.popupEvents.popupClose)),this.subscriptionsPerInstance.set(o,d),o})}addPopupToMap(t,i){return this.zone.runOutsideAngular(()=>{t.setLngLat(i),t.addTo(this.mapInstance)})}addPopupToMarker(t,i){return this.zone.runOutsideAngular(()=>{t.setPopup(i)})}removePopupFromMap(t){if(this.subscriptionsPerInstance.has(t)){let i=this.subscriptionsPerInstance.get(t)||[];for(let r of i)r.unsubscribe();this.subscriptionsPerInstance.delete(t)}this.popupsToRemove.update(i=>[...i,t])}removePopupFromMarker(t){return this.zone.runOutsideAngular(()=>{let i=t.getPopup();if(this.subscriptionsPerInstance.has(i)){let r=this.subscriptionsPerInstance.get(i)||[];for(let o of r)o.unsubscribe();this.subscriptionsPerInstance.delete(i)}t.setPopup(void 0)})}addControl(t,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(t,i)})}removeControl(t){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(t)})}loadAndAddImage(t,i,r){return ne(this,null,function*(){return this.zone.runOutsideAngular(()=>ne(this,null,function*(){let o=yield this.mapInstance.loadImage(i);this.addImage(t,o.data,r)}))})}addImage(t,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(t,i,r)})}removeImage(t){this.imageIdsToRemove.update(i=>[...i,t])}addSource(t,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>i[r]===void 0&&delete i[r]),this.mapInstance.addSource(t,i)})}getSource(t){return this.mapInstance.getSource(t)}removeSource(t){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(t).forEach(i=>this.mapInstance.removeLayer(i.id)),this.mapInstance.removeSource(t)})}setAllLayerPaintProperty(t,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setPaintProperty(t,r,i[r])})})}setAllLayerLayoutProperty(t,i){return this.zone.runOutsideAngular(()=>{Object.keys(i).forEach(r=>{this.mapInstance.setLayoutProperty(t,r,i[r])})})}setLayerFilter(t,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(t,i)})}setLayerBefore(t,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(t,i)})}setLayerZoomRange(t,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(t,i||0,r||20)})}fitBounds(t,i){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(t,i)})}fitScreenCoordinates(t,i,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(t[0],t[1],i,r)})}clearMapElements(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(t){jt.assertNotInAngularZone();let i=hq(t);this.mapInstance=new ba.Map(i),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(t.style)}removeMarkers(){for(let t of this.markersToRemove())t.remove();this.markersToRemove.set([])}removePopups(){for(let t of this.popupsToRemove())t.remove();this.popupsToRemove.set([])}removeImages(){for(let t of this.imageIdsToRemove())this.mapInstance.removeImage(t);this.imageIdsToRemove.set([])}findLayersBySourceId(t){let i=this.mapInstance.getStyle().layers;return i==null?[]:i.filter(r=>"source"in r?r.source===t:!1)}hookEvents(t){this.mapInstance.on("load",i=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{t.mapLoad.emit(i.target)})}),this.mapInstance.on("resize",i=>this.zone.run(()=>{t.mapResize.emit(i)})),this.mapInstance.on("remove",i=>this.zone.run(()=>{t.mapRemove.emit(i)})),this.mapInstance.on("mousedown",i=>this.zone.run(()=>{t.mapMouseDown.emit(i)})),this.mapInstance.on("mouseup",i=>this.zone.run(()=>{t.mapMouseUp.emit(i)})),this.mapInstance.on("mousemove",i=>this.zone.run(()=>{t.mapMouseMove.emit(i)})),this.mapInstance.on("click",i=>this.zone.run(()=>{t.mapClick.emit(i)})),this.mapInstance.on("dblclick",i=>this.zone.run(()=>{t.mapDblClick.emit(i)})),this.mapInstance.on("mouseover",i=>this.zone.run(()=>{t.mapMouseOver.emit(i)})),this.mapInstance.on("mouseout",i=>this.zone.run(()=>{t.mapMouseOut.emit(i)})),this.mapInstance.on("contextmenu",i=>this.zone.run(()=>{t.mapContextMenu.emit(i)})),this.mapInstance.on("touchstart",i=>this.zone.run(()=>{t.mapTouchStart.emit(i)})),this.mapInstance.on("touchend",i=>this.zone.run(()=>{t.mapTouchEnd.emit(i)})),this.mapInstance.on("touchmove",i=>this.zone.run(()=>{t.mapTouchMove.emit(i)})),this.mapInstance.on("touchcancel",i=>this.zone.run(()=>{t.mapTouchCancel.emit(i)})),this.mapInstance.on("wheel",i=>this.zone.run(()=>{t.mapWheel.emit(i)})),this.mapInstance.on("movestart",i=>this.zone.run(()=>t.moveStart.emit(i))),this.mapInstance.on("move",i=>this.zone.run(()=>t.move.emit(i))),this.mapInstance.on("moveend",i=>this.zone.run(()=>t.moveEnd.emit(i))),this.mapInstance.on("dragstart",i=>this.zone.run(()=>{t.mapDragStart.emit(i)})),this.mapInstance.on("drag",i=>this.zone.run(()=>{t.mapDrag.emit(i)})),this.mapInstance.on("dragend",i=>this.zone.run(()=>{t.mapDragEnd.emit(i)})),this.mapInstance.on("zoomstart",i=>this.zone.run(()=>t.zoomStart.emit(i))),this.mapInstance.on("zoom",i=>this.zone.run(()=>t.zoomEvt.emit(i))),this.mapInstance.on("zoomend",i=>this.zone.run(()=>t.zoomEnd.emit(i))),this.mapInstance.on("rotatestart",i=>this.zone.run(()=>t.rotateStart.emit(i))),this.mapInstance.on("rotate",i=>this.zone.run(()=>t.rotate.emit(i))),this.mapInstance.on("rotateend",i=>this.zone.run(()=>t.rotateEnd.emit(i))),this.mapInstance.on("pitchstart",i=>this.zone.run(()=>t.pitchStart.emit(i))),this.mapInstance.on("pitch",i=>this.zone.run(()=>t.pitchEvt.emit(i))),this.mapInstance.on("pitchend",i=>this.zone.run(()=>t.pitchEnd.emit(i))),this.mapInstance.on("boxzoomstart",i=>this.zone.run(()=>t.boxZoomStart.emit(i))),this.mapInstance.on("boxzoomend",i=>this.zone.run(()=>t.boxZoomEnd.emit(i))),this.mapInstance.on("boxzoomcancel",i=>this.zone.run(()=>t.boxZoomCancel.emit(i))),this.mapInstance.on("webglcontextlost",i=>this.zone.run(()=>t.webGlContextLost.emit(i))),this.mapInstance.on("webglcontextrestored",i=>this.zone.run(()=>t.webGlContextRestored.emit(i))),this.mapInstance.on("render",i=>this.zone.run(()=>t.render.emit(i))),this.mapInstance.on("error",i=>this.zone.run(()=>{t.mapError.emit(i)})),this.mapInstance.on("data",i=>this.zone.run(()=>t.data.emit(i))),this.mapInstance.on("styledata",i=>this.zone.run(()=>t.styleData.emit(i))),this.mapInstance.on("sourcedata",i=>this.zone.run(()=>t.sourceData.emit(i))),this.mapInstance.on("dataloading",i=>this.zone.run(()=>t.dataLoading.emit(i))),this.mapInstance.on("styledataloading",i=>this.zone.run(()=>t.styleDataLoading.emit(i))),this.mapInstance.on("sourcedataloading",i=>this.zone.run(()=>t.sourceDataLoading.emit(i))),this.mapInstance.on("styleimagemissing",i=>this.zone.run(()=>t.styleImageMissing.emit(i))),this.mapInstance.on("idle",i=>this.zone.run(()=>t.idle.emit(i)))}createSubscriptionForLayer(t,i,r){let o=d=>{this.zone.run(()=>{r.emit(d)})};return this.mapInstance.on(i,t,o),{unsubscribe:()=>{this.mapInstance.off(i,t,o)}}}createSubscriptionForPopup(t,i,r){let o=d=>{this.zone.run(()=>{r.emit(d)})};return t.on(i,o),{unsubscribe:()=>{t.off(i,o)}}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac})}}return e})();var pq=(()=>{class e{constructor(){this.mapService=Me(Qm),this.destroyRef=Me(ta),this.id=He.required(),this.sourceId=Fr(null),this.loadSourceSubject=new Bt,this.loadSource$=this.loadSourceSubject.asObservable()}ngOnInit(){this.mapService.mapLoaded$.pipe(Kn(()=>this.loadSourceSubject.next()),Yi(()=>Nr(this.mapService.mapInstance,"styledata").pipe(jn(()=>!this.mapService.mapInstance.getSource(this.id())),Kn(()=>this.loadSourceSubject.next()))),Kh(this.destroyRef)).subscribe()}ngOnDestroy(){this.removeSource()}refresh(){this.removeSource(),this.loadSourceSubject.next()}removeSource(){let t=this.sourceId();t&&(this.mapService.removeSource(t),this.sourceId.set(null))}addSource(t){this.mapService.addSource(this.id(),t),this.sourceId.set(this.id())}getSource(){return this.mapService.getSource(this.id())}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=Ln({type:e,inputs:{id:[1,"id"]},standalone:!0})}}return e})(),fq=(()=>{class e{constructor(){this.sourceDirective=Me(pq),this.ngZone=Me(jt),this.data=He({type:"FeatureCollection",features:[]}),this.maxzoom=He(),this.attribution=He(),this.buffer=He(),this.tolerance=He(),this.cluster=He(),this.clusterRadius=He(),this.clusterMaxZoom=He(),this.clusterMinPoints=He(),this.clusterProperties=He(),this.lineMetrics=He(),this.generateId=He(),this.promoteId=He(),this.filter=He(),this.updateFeatureDataSubject=new Bt,this.featureIdCounter=Fr(0),this.sourceDirective.loadSource$.pipe(Kn(()=>this.sourceDirective.addSource(this.getGeoJSONSourceSpecification())),Yi(()=>this.updateFeature()),Kh()).subscribe()}ngOnChanges(t){if(this.sourceDirective.sourceId()&&((t.maxzoom&&!t.maxzoom.isFirstChange()||t.attribution&&!t.attribution.isFirstChange()||t.buffer&&!t.buffer.isFirstChange()||t.tolerance&&!t.tolerance.isFirstChange()||t.cluster&&!t.cluster.isFirstChange()||t.clusterRadius&&!t.clusterRadius.isFirstChange()||t.clusterMaxZoom&&!t.clusterMaxZoom.isFirstChange()||t.clusterMinPoints&&!t.clusterMinPoints.isFirstChange()||t.clusterProperties&&!t.clusterProperties.isFirstChange()||t.lineMetrics&&!t.lineMetrics.isFirstChange()||t.generateId&&!t.generateId.isFirstChange()||t.promoteId&&!t.promoteId.isFirstChange()||t.filter&&!t.filter.isFirstChange())&&this.sourceDirective.refresh(),t.data&&!t.data.isFirstChange())){let i=this.sourceDirective.getSource();if(i===void 0)return;i.setData(t.data.currentValue)}}getClusterExpansionZoom(t){return ne(this,null,function*(){let i=this.sourceDirective.getSource();return this.ngZone.run(()=>ne(this,null,function*(){return i.getClusterExpansionZoom(t)}))})}getClusterChildren(t){return ne(this,null,function*(){let i=this.sourceDirective.getSource();return this.ngZone.run(()=>ne(this,null,function*(){return i.getClusterChildren(t)}))})}getClusterLeaves(t,i,r){return ne(this,null,function*(){let o=this.sourceDirective.getSource();return this.ngZone.run(()=>ne(this,null,function*(){return o.getClusterLeaves(t,i,r)}))})}_addFeature(t){this.data().features.push(t),this.updateFeatureDataSubject.next()}_removeFeature(t){let i=this.data(),r=i.features.indexOf(t);r>-1&&i.features.splice(r,1),this.updateFeatureDataSubject.next()}updateFeatureData(){this.updateFeatureDataSubject.next()}_getNewFeatureId(){return this.featureIdCounter.update(t=>++t),this.featureIdCounter()}getGeoJSONSourceSpecification(){return{type:"geojson",data:this.data(),maxzoom:this.maxzoom(),attribution:this.attribution(),buffer:this.buffer(),tolerance:this.tolerance(),cluster:this.cluster(),clusterRadius:this.clusterRadius(),clusterMaxZoom:this.clusterMaxZoom(),clusterMinPoints:this.clusterMinPoints(),clusterProperties:this.clusterProperties(),lineMetrics:this.lineMetrics(),generateId:this.generateId(),promoteId:this.promoteId(),filter:this.filter()}}updateFeature(){return this.updateFeatureDataSubject.pipe(df(0)).pipe(Kn(()=>{let t=this.sourceDirective.getSource();t!==void 0&&t.setData(this.data())}))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["mgl-geojson-source"]],inputs:{data:[1,"data"],maxzoom:[1,"maxzoom"],attribution:[1,"attribution"],buffer:[1,"buffer"],tolerance:[1,"tolerance"],cluster:[1,"cluster"],clusterRadius:[1,"clusterRadius"],clusterMaxZoom:[1,"clusterMaxZoom"],clusterMinPoints:[1,"clusterMinPoints"],clusterProperties:[1,"clusterProperties"],lineMetrics:[1,"lineMetrics"],generateId:[1,"generateId"],promoteId:[1,"promoteId"],filter:[1,"filter"]},standalone:!0,features:[oT([{directive:pq,inputs:["id","id"]}]),Sr,Zo],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return e})();var mq=(()=>{class e{constructor(){this.mapService=Me(Qm),this.destroyRef=Me(ta),this.zone=Me(jt),this.id=He.required(),this.data=He(),this.options=He(),this.url=He(),this.imageError=xt(),this.imageLoaded=xt(),this.isAdded=Fr(!1),this.isAdding=Fr(!1)}ngOnInit(){this.mapService.mapLoaded$.pipe(Yi(()=>Nr(this.mapService.mapInstance,"styledata").pipe(Ys(void 0),jn(()=>!this.isAdding()&&!this.mapService.mapInstance.hasImage(this.id())))),Kh(this.destroyRef)).subscribe(()=>this.addImage())}ngOnChanges(t){(t.data&&!t.data.isFirstChange()||t.options&&!t.options.isFirstChange()||t.url&&!t.url.isFirstChange())&&(this.removeImage(),this.ngOnInit())}ngOnDestroy(){this.removeImage()}removeImage(){this.isAdded()&&this.mapService.removeImage(this.id())}addImage(){return ne(this,null,function*(){this.isAdding.set(!0);let t=this.data(),i=this.url();if(t)this.mapService.addImage(this.id(),t,this.options()),this.isAdded.set(!0),this.isAdding.set(!1);else if(i)try{yield this.mapService.loadAndAddImage(this.id(),i,this.options()),this.isAdded.set(!0),this.isAdding.set(!1),this.zone.run(()=>{this.imageLoaded.emit()})}catch(r){this.zone.run(()=>{this.imageError.emit(r)})}})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["mgl-image"]],inputs:{id:[1,"id"],data:[1,"data"],options:[1,"options"],url:[1,"url"]},outputs:{imageError:"imageError",imageLoaded:"imageLoaded"},standalone:!0,features:[Sr,Zo],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return e})(),gq=(()=>{class e{constructor(){this.destroyRef=Me(ta),this.mapService=Me(Qm),this.id=He.required(),this.type=He.required(),this.source=He(),this.metadata=He(),this.sourceLayer=He(),this.removeSource=He(),this.filter=He(),this.layout=He(),this.paint=He(),this.before=He(),this.minzoom=He(),this.maxzoom=He(),this.layerClick=xt(),this.layerDblClick=xt(),this.layerMouseDown=xt(),this.layerMouseUp=xt(),this.layerMouseEnter=xt(),this.layerMouseLeave=xt(),this.layerMouseMove=xt(),this.layerMouseOver=xt(),this.layerMouseOut=xt(),this.layerContextMenu=xt(),this.layerTouchStart=xt(),this.layerTouchEnd=xt(),this.layerTouchCancel=xt(),this.layerAdded=Fr(!1),this.sourceIdAdded=Fr(null)}ngOnInit(){this.mapService.mapLoaded$.pipe(Yi(()=>Nr(this.mapService.mapInstance,"styledata").pipe(Vt(()=>!1),jn(()=>!this.mapService.mapInstance.getLayer(this.id())),Ys(!0))),Kh(this.destroyRef)).subscribe(t=>this.init(t))}ngOnChanges(t){this.layerAdded()&&(t.paint&&!t.paint.isFirstChange()&&this.mapService.setAllLayerPaintProperty(this.id(),t.paint.currentValue),t.layout&&!t.layout.isFirstChange()&&this.mapService.setAllLayerLayoutProperty(this.id(),t.layout.currentValue),t.filter&&!t.filter.isFirstChange()&&this.mapService.setLayerFilter(this.id(),t.filter.currentValue),t.before&&!t.before.isFirstChange()&&this.mapService.setLayerBefore(this.id(),t.before.currentValue),(t.minzoom&&!t.minzoom.isFirstChange()||t.maxzoom&&!t.maxzoom.isFirstChange())&&this.mapService.setLayerZoomRange(this.id(),this.minzoom(),this.maxzoom()))}ngOnDestroy(){if(this.layerAdded()){let t=this.sourceIdAdded();this.mapService.removeLayer(this.id()),t!==null&&this.mapService.getSource(t)&&this.mapService.removeSource(t)}}init(t){let i={layerOptions:{id:this.id(),type:this.type(),source:this.source(),metadata:this.metadata(),"source-layer":this.sourceLayer(),minzoom:this.minzoom(),maxzoom:this.maxzoom(),filter:this.filter(),layout:this.layout(),paint:this.paint()},layerEvents:{layerClick:this.layerClick,layerDblClick:this.layerDblClick,layerMouseDown:this.layerMouseDown,layerMouseUp:this.layerMouseUp,layerMouseEnter:this.layerMouseEnter,layerMouseLeave:this.layerMouseLeave,layerMouseMove:this.layerMouseMove,layerMouseOver:this.layerMouseOver,layerMouseOut:this.layerMouseOut,layerContextMenu:this.layerContextMenu,layerTouchStart:this.layerTouchStart,layerTouchEnd:this.layerTouchEnd,layerTouchCancel:this.layerTouchCancel}};this.removeSource()&&typeof this.source()!="string"&&this.mapService.getSource(this.id())===void 0&&this.sourceIdAdded.set(this.id()),this.mapService.addLayer(i,t,this.before());let r=this.sourceIdAdded();r!==null&&this.mapService.getSource(r)===void 0&&this.sourceIdAdded.set(null),this.layerAdded.set(!0)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["mgl-layer"]],inputs:{id:[1,"id"],type:[1,"type"],source:[1,"source"],metadata:[1,"metadata"],sourceLayer:[1,"sourceLayer"],removeSource:[1,"removeSource"],filter:[1,"filter"],layout:[1,"layout"],paint:[1,"paint"],before:[1,"before"],minzoom:[1,"minzoom"],maxzoom:[1,"maxzoom"]},outputs:{layerClick:"layerClick",layerDblClick:"layerDblClick",layerMouseDown:"layerMouseDown",layerMouseUp:"layerMouseUp",layerMouseEnter:"layerMouseEnter",layerMouseLeave:"layerMouseLeave",layerMouseMove:"layerMouseMove",layerMouseOver:"layerMouseOver",layerMouseOut:"layerMouseOut",layerContextMenu:"layerContextMenu",layerTouchStart:"layerTouchStart",layerTouchEnd:"layerTouchEnd",layerTouchCancel:"layerTouchCancel"},standalone:!0,features:[Sr,Zo],decls:0,vars:0,template:function(i,r){},encapsulation:2,changeDetection:0})}}return e})(),yq=(()=>{class e{get mapInstance(){return this.mapService.mapInstance}constructor(){this.mapService=Me(Qm),this.elementRef=Me(yi),this.collectResourceTiming=He(),this.crossSourceCollisions=He(),this.customMapboxApiUrl=He(),this.fadeDuration=He(),this.hash=He(),this.refreshExpiredTiles=He(),this.failIfMajorPerformanceCaveat=He(),this.bearingSnap=He(),this.interactive=He(),this.pitchWithRotate=He(),this.clickTolerance=He(),this.attributionControl=He(),this.logoPosition=He(),this.maxTileCacheSize=He(),this.localIdeographFontFamily=He(),this.preserveDrawingBuffer=He(),this.trackResize=He(),this.transformRequest=He(),this.bounds=He(),this.antialias=He(),this.locale=He(),this.cooperativeGestures=He(),this.minZoom=He(),this.maxZoom=He(),this.minPitch=He(),this.maxPitch=He(),this.scrollZoom=He(),this.dragRotate=He(),this.touchPitch=He(),this.touchZoomRotate=He(),this.doubleClickZoom=He(),this.keyboard=He(),this.dragPan=He(),this.boxZoom=He(),this.style=He.required(),this.center=He(),this.maxBounds=He(),this.zoom=He(),this.bearing=He(),this.pitch=He(),this.fitBoundsOptions=He(),this.renderWorldCopies=He(),this.terrain=He(),this.movingMethod=He("flyTo"),this.movingOptions=He(),this.fitBounds=He(),this.fitScreenCoordinates=He(),this.centerWithPanTo=He(),this.panToOptions=He(),this.cursorStyle=He(),this.mapResize=xt(),this.mapRemove=xt(),this.mapMouseDown=xt(),this.mapMouseUp=xt(),this.mapMouseMove=xt(),this.mapClick=xt(),this.mapDblClick=xt(),this.mapMouseOver=xt(),this.mapMouseOut=xt(),this.mapContextMenu=xt(),this.mapTouchStart=xt(),this.mapTouchEnd=xt(),this.mapTouchMove=xt(),this.mapTouchCancel=xt(),this.mapWheel=xt(),this.moveStart=xt(),this.move=xt(),this.moveEnd=xt(),this.mapDragStart=xt(),this.mapDrag=xt(),this.mapDragEnd=xt(),this.zoomStart=xt(),this.zoomEvt=xt(),this.zoomEnd=xt(),this.rotateStart=xt(),this.rotate=xt(),this.rotateEnd=xt(),this.pitchStart=xt(),this.pitchEvt=xt(),this.pitchEnd=xt(),this.boxZoomStart=xt(),this.boxZoomEnd=xt(),this.boxZoomCancel=xt(),this.webGlContextLost=xt(),this.webGlContextRestored=xt(),this.mapLoad=xt(),this.idle=xt(),this.render=xt(),this.mapError=xt(),this.data=xt(),this.styleData=xt(),this.sourceData=xt(),this.dataLoading=xt(),this.styleDataLoading=xt(),this.sourceDataLoading=xt(),this.styleImageMissing=xt(),this.mapContainer=rT.required("container"),Po(()=>{if(this.preserveDrawingBuffer()){let i=this.elementRef.nativeElement;i.setAttribute("data-cy","map"),this.mapLoad.subscribe(()=>{i.setAttribute("data-loaded","true")}),this.idle.subscribe(()=>{i.setAttribute("data-idle","true")}),this.render.subscribe(()=>{i.removeAttribute("data-idle")})}this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming(),container:this.mapContainer().nativeElement,crossSourceCollisions:this.crossSourceCollisions(),fadeDuration:this.fadeDuration(),minZoom:this.minZoom(),maxZoom:this.maxZoom(),minPitch:this.minPitch(),maxPitch:this.maxPitch(),style:this.style(),hash:this.hash(),interactive:this.interactive(),bearingSnap:this.bearingSnap(),pitchWithRotate:this.pitchWithRotate(),clickTolerance:this.clickTolerance(),attributionControl:this.attributionControl(),logoPosition:this.logoPosition(),failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat(),preserveDrawingBuffer:this.preserveDrawingBuffer(),refreshExpiredTiles:this.refreshExpiredTiles(),maxBounds:this.maxBounds(),scrollZoom:this.scrollZoom(),boxZoom:this.boxZoom(),dragRotate:this.dragRotate(),dragPan:this.dragPan(),keyboard:this.keyboard(),doubleClickZoom:this.doubleClickZoom(),touchPitch:this.touchPitch(),touchZoomRotate:this.touchZoomRotate(),trackResize:this.trackResize(),center:this.center(),zoom:this.zoom(),bearing:this.bearing(),pitch:this.pitch(),renderWorldCopies:this.renderWorldCopies(),maxTileCacheSize:this.maxTileCacheSize(),localIdeographFontFamily:this.localIdeographFontFamily(),transformRequest:this.transformRequest(),bounds:this.bounds()?this.bounds():this.fitBounds(),fitBoundsOptions:this.fitBoundsOptions(),antialias:this.antialias(),locale:this.locale,cooperativeGestures:this.cooperativeGestures(),terrain:this.terrain()},mapEvents:this});let t=this.cursorStyle();t&&this.mapService.changeCanvasCursor(t)}),kf(()=>{this.mapService.clearMapElements()})}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(t){return ne(this,null,function*(){yield JE(this.mapService.mapCreated$);let i=this.zoom(),r=this.bearing(),o=this.pitch(),d=this.center();t.cursorStyle&&!t.cursorStyle.isFirstChange()&&this.mapService.changeCanvasCursor(t.cursorStyle.currentValue),t.minZoom&&!t.minZoom.isFirstChange()&&this.mapService.updateMinZoom(t.minZoom.currentValue),t.maxZoom&&!t.maxZoom.isFirstChange()&&this.mapService.updateMaxZoom(t.maxZoom.currentValue),t.minPitch&&!t.minPitch.isFirstChange()&&this.mapService.updateMinPitch(t.minPitch.currentValue),t.maxPitch&&!t.maxPitch.isFirstChange()&&this.mapService.updateMaxPitch(t.maxPitch.currentValue),t.renderWorldCopies&&!t.renderWorldCopies.isFirstChange()&&this.mapService.updateRenderWorldCopies(t.renderWorldCopies.currentValue),t.scrollZoom&&!t.scrollZoom.isFirstChange()&&this.mapService.updateScrollZoom(t.scrollZoom.currentValue),t.dragRotate&&!t.dragRotate.isFirstChange()&&this.mapService.updateDragRotate(t.dragRotate.currentValue),t.touchPitch&&!t.touchPitch.isFirstChange()&&this.mapService.updateTouchPitch(t.touchPitch.currentValue),t.touchZoomRotate&&!t.touchZoomRotate.isFirstChange()&&this.mapService.updateTouchZoomRotate(t.touchZoomRotate.currentValue),t.doubleClickZoom&&!t.doubleClickZoom.isFirstChange()&&this.mapService.updateDoubleClickZoom(t.doubleClickZoom.currentValue),t.keyboard&&!t.keyboard.isFirstChange()&&this.mapService.updateKeyboard(t.keyboard.currentValue),t.dragPan&&!t.dragPan.isFirstChange()&&this.mapService.updateDragPan(t.dragPan.currentValue),t.boxZoom&&!t.boxZoom.isFirstChange()&&this.mapService.updateBoxZoom(t.boxZoom.currentValue),t.style&&!t.style.isFirstChange()&&this.mapService.updateStyle(t.style.currentValue),t.maxBounds&&!t.maxBounds.isFirstChange()&&this.mapService.updateMaxBounds(t.maxBounds.currentValue),t.fitBounds&&t.fitBounds.currentValue&&!t.fitBounds.isFirstChange()&&this.mapService.fitBounds(t.fitBounds.currentValue,this.fitBoundsOptions()),t.fitScreenCoordinates&&t.fitScreenCoordinates.currentValue&&((d||i||o||this.fitBounds())&&t.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.mapService.fitScreenCoordinates(t.fitScreenCoordinates.currentValue,r?r[0]:0,this.movingOptions())),this.centerWithPanTo()&&t.center&&!t.center.isFirstChange()&&!t.zoom&&!t.bearing&&!t.pitch?this.mapService.panTo(this.center(),this.panToOptions()):(t.center&&!t.center.isFirstChange()||t.zoom&&!t.zoom.isFirstChange()||t.bearing&&!t.bearing.isFirstChange()&&!t.fitScreenCoordinates||t.pitch&&!t.pitch.isFirstChange())&&this.mapService.move(this.movingMethod(),this.movingOptions(),t.zoom&&i?i[0]:void 0,t.center?d:void 0,t.bearing&&r?r[0]:void 0,t.pitch&&o?o[0]:void 0),t.terrain&&!t.terrain.isFirstChange()&&this.mapService.updateTerrain(t.terrain.currentValue)})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["mgl-map"]],viewQuery:function(i,r){i&1&&lT(r.mapContainer,O0e,5),i&2&&cT()},inputs:{collectResourceTiming:[1,"collectResourceTiming"],crossSourceCollisions:[1,"crossSourceCollisions"],customMapboxApiUrl:[1,"customMapboxApiUrl"],fadeDuration:[1,"fadeDuration"],hash:[1,"hash"],refreshExpiredTiles:[1,"refreshExpiredTiles"],failIfMajorPerformanceCaveat:[1,"failIfMajorPerformanceCaveat"],bearingSnap:[1,"bearingSnap"],interactive:[1,"interactive"],pitchWithRotate:[1,"pitchWithRotate"],clickTolerance:[1,"clickTolerance"],attributionControl:[1,"attributionControl"],logoPosition:[1,"logoPosition"],maxTileCacheSize:[1,"maxTileCacheSize"],localIdeographFontFamily:[1,"localIdeographFontFamily"],preserveDrawingBuffer:[1,"preserveDrawingBuffer"],trackResize:[1,"trackResize"],transformRequest:[1,"transformRequest"],bounds:[1,"bounds"],antialias:[1,"antialias"],locale:[1,"locale"],cooperativeGestures:[1,"cooperativeGestures"],minZoom:[1,"minZoom"],maxZoom:[1,"maxZoom"],minPitch:[1,"minPitch"],maxPitch:[1,"maxPitch"],scrollZoom:[1,"scrollZoom"],dragRotate:[1,"dragRotate"],touchPitch:[1,"touchPitch"],touchZoomRotate:[1,"touchZoomRotate"],doubleClickZoom:[1,"doubleClickZoom"],keyboard:[1,"keyboard"],dragPan:[1,"dragPan"],boxZoom:[1,"boxZoom"],style:[1,"style"],center:[1,"center"],maxBounds:[1,"maxBounds"],zoom:[1,"zoom"],bearing:[1,"bearing"],pitch:[1,"pitch"],fitBoundsOptions:[1,"fitBoundsOptions"],renderWorldCopies:[1,"renderWorldCopies"],terrain:[1,"terrain"],movingMethod:[1,"movingMethod"],movingOptions:[1,"movingOptions"],fitBounds:[1,"fitBounds"],fitScreenCoordinates:[1,"fitScreenCoordinates"],centerWithPanTo:[1,"centerWithPanTo"],panToOptions:[1,"panToOptions"],cursorStyle:[1,"cursorStyle"]},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},standalone:!0,features:[eo([Qm]),Sr,Zo],decls:2,vars:0,consts:[["container",""]],template:function(i,r){i&1&&Qe(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}}return e})();var _q=(()=>{class e{constructor(){this.destroyRef=Me(ta),this.mapService=Me(Qm),this.closeButton=He(),this.closeOnClick=He(),this.closeOnMove=He(),this.focusAfterOpen=He(),this.anchor=He(),this.className=He(),this.maxWidth=He(),this.subpixelPositioning=He(),this.feature=He(),this.lngLat=He(),this.marker=He(),this.offset=He(),this.popupClose=xt(),this.popupOpen=xt(),this.content=rT.required("content"),this.popupInstance=null,Po(()=>{this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance).pipe(Kh(this.destroyRef)).subscribe()})}ngOnInit(){if(this.lngLat()&&this.marker()||this.feature()&&this.lngLat()||this.feature()&&this.marker())throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(t){if(t.feature&&!t.feature.isFirstChange()){let i=this.getLngLat(this.lngLat(),this.feature());this.mapService.removePopupFromMap(this.popupInstance);let r=this.createPopup();this.mapService.addPopupToMap(r,i),this.popupInstance=r}if(t.lngLat&&!t.lngLat.isFirstChange()&&this.popupInstance.setLngLat(t.lngLat.currentValue),t.marker&&!t.marker.isFirstChange()){let r=t.marker.previousValue.markerInstance();r&&this.mapService.removePopupFromMarker(r);let o=this.marker()?.markerInstance();o&&this.popupInstance&&this.mapService.addPopupToMarker(o,this.popupInstance)}t.offset&&!t.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(t.offset.currentValue)}ngOnDestroy(){this.removePopupFromMarker()}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton(),closeOnClick:this.closeOnClick(),closeOnMove:this.closeOnMove(),focusAfterOpen:this.focusAfterOpen(),anchor:this.anchor(),offset:this.offset(),className:this.className(),maxWidth:this.maxWidth(),subpixelPositioning:this.subpixelPositioning()},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content().nativeElement)}addPopup(t){return this.mapService.mapCreated$.pipe(Kn(()=>{let i=this.lngLat(),r=this.feature(),o=this.marker()?.markerInstance();if(i||r)this.mapService.addPopupToMap(t,this.getLngLat(i,r));else if(o)this.mapService.addPopupToMarker(o,t);else throw new Error("mgl-popup need either lngLat/marker/feature to be set")}))}removePopupFromMarker(){if(this.popupInstance){let t=this.marker()?.markerInstance();this.lngLat()||this.feature()?this.mapService.removePopupFromMap(this.popupInstance):t?this.mapService.removePopupFromMarker(t):this.mapService.removePopupFromMap(this.popupInstance)}this.popupInstance=null}getLngLat(t,i){if(t)return t;if(i)return i.geometry.coordinates;throw new Error("lngLat or feature value is required")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["mgl-popup"]],viewQuery:function(i,r){i&1&&lT(r.content,P0e,5),i&2&&cT()},inputs:{closeButton:[1,"closeButton"],closeOnClick:[1,"closeOnClick"],closeOnMove:[1,"closeOnMove"],focusAfterOpen:[1,"focusAfterOpen"],anchor:[1,"anchor"],className:[1,"className"],maxWidth:[1,"maxWidth"],subpixelPositioning:[1,"subpixelPositioning"],feature:[1,"feature"],lngLat:[1,"lngLat"],marker:[1,"marker"],offset:[1,"offset"]},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},standalone:!0,features:[Sr,Zo],ngContentSelectors:R0e,decls:3,vars:0,consts:[["content",""],["data-cy","mgl-popup"]],template:function(i,r){i&1&&(bs(),Y(0,"div",1,0),ws(2),Z())},encapsulation:2,changeDetection:0})}}return e})();var vq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var N0e=()=>[7],F0e=e=>[e,18.33],L0e=e=>[e,16.8637],B0e=e=>[e,19.49178],U0e=(e,n)=>[e,n],z0e=()=>["get","priceHighlight"],V0e=()=>({"font-scale":1.1}),j0e=()=>["get","Station_Name"],H0e=(e,n,t)=>["format",e,n," ",t],$0e=()=>["Open Sans Semibold","Arial Unicode MS Bold"],G0e=()=>[0,1.25],q0e=(e,n,t)=>({"icon-image":"gas_icon","icon-size":.25,"symbol-placement":"point","text-field":e,"text-font":n,"text-offset":t,"text-anchor":"top"});function W0e(e,n){if(e&1){let t=Lr();Qe(0,"mgl-geojson-source",30),Y(1,"mgl-layer",31),dt("layerClick",function(r){xi(t);let o=ut();return Si(o.onLayerClick(r))}),Z()}if(e&2){let t=ut();Ce("data",t.gas_stations),he(),Ce("layout",i1(11,q0e,i1(5,H0e,yl(2,z0e),yl(3,V0e),yl(4,j0e)),yl(9,$0e),yl(10,G0e)))}}function Z0e(e,n){if(e&1&&(ia(0),Y(1,"span"),me(2),Z(),ra()),e&2){let t=n.$implicit;he(2),Mt(" ",t===1?"\u2605":t===.5?"\u2BEA":"\u2606"," ")}}function K0e(e,n){if(e&1){let t=Lr();Y(0,"button",42),dt("click",function(){xi(t);let r=ut(2);return Si(r.feedDataEditPrice(r.selectedFeature))}),me(1," Edit Price "),Z()}}function Y0e(e,n){if(e&1){let t=Lr();Y(0,"mgl-popup",32),dt("close",function(){xi(t);let r=ut();return Si(r.selectedFeature=null)}),Y(1,"h5",33),me(2),Z(),Y(3,"div",34)(4,"button",35),Nt(5,Z0e,3,1,"ng-container",36),Z(),Nt(6,K0e,2,0,"button",37),Z(),Y(7,"table",38)(8,"thead",39)(9,"tr")(10,"th",40),me(11,"Fuel Type"),Z(),Y(12,"th",40),me(13,"Price"),Z()()(),Y(14,"tbody")(15,"tr")(16,"td"),me(17,"Regular"),Z(),Y(18,"td"),me(19),Z()(),Y(20,"tr")(21,"td"),me(22,"Diesel"),Z(),Y(23,"td"),me(24),Z()(),Y(25,"tr")(26,"td"),me(27,"Premium"),Z(),Y(28,"td"),me(29),Z()()()(),Y(30,"button",41),dt("click",function(){xi(t);let r=ut();return Si(r.goToGMap())}),me(31),Z()()}if(e&2){let t=ut();Ce("className","popup")("feature",t.selectedFeature),he(2),Ji(t.selectedFeature.properties.Station_Name),he(3),Ce("ngForOf",t.stars),he(),Ce("ngIf",t.isAdmin),he(13),Ji(t.selectedFeature.properties.Station_Gas_Price),he(5),Ji(t.selectedFeature.properties.Station_Diesel_Price),he(5),Ji(t.selectedFeature.properties.Station_Premium_Price),he(2),Mt(" Located in ",t.selectedFeature.properties.Station_City," ")}}function J0e(e,n){e&1&&(Y(0,"div",15)(1,"div",43),Qe(2,"div",44),Z()())}function X0e(e,n){if(e&1&&(Y(0,"div",45),me(1),Qe(2,"button",46),Z()),e&2){let t=ut();he(),Mt(" ",t.updateMessage," ")}}function Q0e(e,n){e&1&&(Y(0,"div"),me(1,"Price is required."),Z())}function ebe(e,n){e&1&&(Y(0,"div"),me(1," Enter a valid price (e.g., 10.99). "),Z())}function tbe(e,n){if(e&1&&(Y(0,"div"),Nt(1,Q0e,2,0,"div",18)(2,ebe,2,0,"div",18),Z()),e&2){ut();let t=xs(9);he(),Ce("ngIf",t.errors==null?null:t.errors.required),he(),Ce("ngIf",t.errors==null?null:t.errors.pattern)}}function nbe(e,n){e&1&&(Y(0,"div"),me(1,"Price is required."),Z())}function ibe(e,n){e&1&&(Y(0,"div"),me(1," Enter a valid price (e.g., 10.99). "),Z())}function rbe(e,n){if(e&1&&(Y(0,"div"),Nt(1,nbe,2,0,"div",18)(2,ibe,2,0,"div",18),Z()),e&2){ut();let t=xs(15);he(),Ce("ngIf",t.errors==null?null:t.errors.required),he(),Ce("ngIf",t.errors==null?null:t.errors.pattern)}}function obe(e,n){e&1&&(Y(0,"div"),me(1,"Price is required."),Z())}function sbe(e,n){e&1&&(Y(0,"div"),me(1," Enter a valid price (e.g., 10.99). "),Z())}function abe(e,n){if(e&1&&(Y(0,"div"),Nt(1,obe,2,0,"div",18)(2,sbe,2,0,"div",18),Z()),e&2){ut();let t=xs(21);he(),Ce("ngIf",t.errors==null?null:t.errors.required),he(),Ce("ngIf",t.errors==null?null:t.errors.pattern)}}function lbe(e,n){if(e&1){let t=Lr();Y(0,"div")(1,"div")(2,"label",47)(3,"h5"),me(4),Z()()(),Y(5,"div")(6,"label",48),me(7,"Regular Price"),Z(),Y(8,"input",49,2),Ff("ngModelChange",function(r){xi(t);let o=ut();return Ky(o.selectedGasStaion.Station_Gas_Price,r)||(o.selectedGasStaion.Station_Gas_Price=r),Si(r)}),Z(),Nt(10,tbe,3,2,"div",18),Z(),Y(11,"div")(12,"label",50),me(13,"Premium Price"),Z(),Y(14,"input",51,3),Ff("ngModelChange",function(r){xi(t);let o=ut();return Ky(o.selectedGasStaion.Station_Premium_Price,r)||(o.selectedGasStaion.Station_Premium_Price=r),Si(r)}),Z(),Nt(16,rbe,3,2,"div",18),Z(),Y(17,"div")(18,"label",52),me(19,"Diesel Price"),Z(),Y(20,"input",53,4),Ff("ngModelChange",function(r){xi(t);let o=ut();return Ky(o.selectedGasStaion.Station_Diesel_Price,r)||(o.selectedGasStaion.Station_Diesel_Price=r),Si(r)}),Z(),Nt(22,abe,3,2,"div",18),Z()()}if(e&2){let t=xs(9),i=xs(15),r=xs(21),o=ut();he(4),Mt(" ",o.selectedGasStaion.Station_Name,""),he(4),Nf("ngModel",o.selectedGasStaion.Station_Gas_Price),he(2),Ce("ngIf",t.invalid&&t.touched),he(4),Nf("ngModel",o.selectedGasStaion.Station_Premium_Price),he(2),Ce("ngIf",i.invalid&&i.touched),he(4),Nf("ngModel",o.selectedGasStaion.Station_Diesel_Price),he(2),Ce("ngIf",r.invalid&&r.touched)}}var tC=class e{constructor(n,t,i){this.srvc=n;this.dynamoService=t;this.authenticator=i}gas_stations;imageLoaded=!1;selectedFeature;min_price;stars=[];userRating=5;selectedGasStaion=new bh;updatingPrices=!1;updatingComplete=!1;updateMessage="";admins=[];isAdmin=!1;gasPriceForm=new bh;map;emitter=new kn;ngOnInit(){this.dynamoService.getAdmins().subscribe(n=>{this.admins=n;let t=this.authenticator.user.userId;if(t)for(var i=0;i<this.admins.length;i++)console.log(this.admins[i]),t===this.admins[i].User_ID&&(this.isAdmin=!0)})}setup(n){this.map=n,this.loadGeolocateControl(),this.emitMap()}loadGeolocateControl(){let n=new bq.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});this.map.addControl(n),n.on("trackuserlocationend",t=>{console.log("A trackuserlocationend event has occurred."),console.log(t.target._userLocationDotMarker._lngLat.lat),console.log(t.target._userLocationDotMarker._lngLat.lng)})}onLayerClick(n){console.log("Clicked on feature:",n.features[0]);let t=n.features?.[0];if(t!=null){this.selectedFeature=t;let i=this.selectedFeature.properties.UserRatings!=0?this.selectedFeature.properties.UserRatings/this.selectedFeature.properties.RatingCount:5,r=Math.floor(i),o=i%1>=.5,d=5-r-(o?1:0);console.log(i,this.stars,r,o,d),this.stars=[...Array(r).fill(1),...o?[.5]:[],...Array(d).fill(0)]}}emitMap(){this.emitter.emit(this.map)}goToGMap(){this.selectedFeature._geometry&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${this.selectedFeature._geometry.coordinates[1]},${this.selectedFeature._geometry.coordinates[0]}`)}updatePrice(){this.updatingPrices=!0,this.updatingComplete=!1,this.dynamoService.updateGasPrice(this.selectedGasStaion).subscribe({next:n=>{console.log("Price Updated"),this.updatingPrices=!1,this.updateMessage="Succesfully updated gas prices.",this.updatingComplete=!0},error:n=>{console.log(n),this.updatingPrices=!1,window.confirm("Failed to update gas prices.")}})}onSubmit(n){n.valid?this.updatePrice():console.log("Form is invalid.")}feedDataEditPrice(n){this.updatingComplete=!1,this.selectedGasStaion.Station_Name=n.properties.Station_Name,this.selectedGasStaion.Station_ID=n.properties.Station_ID,this.selectedGasStaion.Station_Diesel_Price=n.properties.Station_Diesel_Price,this.selectedGasStaion.Station_Gas_Price=n.properties.Station_Gas_Price,this.selectedGasStaion.Station_Premium_Price=n.properties.Station_Premium_Price,this.selectedGasStaion.priceHighlight=n.properties.priceHighlight,this.selectedGasStaion.Station_City=n.properties.Station_City,console.log(this.selectedGasStaion)}closeEditGasPrice(n){this.updatingComplete=!1,n.resetForm(),this.gasPriceForm=new bh,this.selectedGasStaion=new bh}submitRating(n,t){this.srvc.updateRatings(n,t).subscribe(i=>{console.log("Rating updated successfully:",i)},i=>{console.error("Error updating rating:",i),alert("error submiting rating")})}static \u0275fac=function(t){return new(t||e)(Je(im),Je(ix),Je(ir))};static \u0275cmp=Pt({type:e,selectors:[["app-map"]],inputs:{gas_stations:"gas_stations"},outputs:{emitter:"emitter"},decls:41,vars:25,consts:[["updateGasPriceForm","ngForm"],["ratingForm","ngForm"],["priceField","ngModel"],["pricePremiumField","ngModel"],["priceDieselField","ngModel"],[3,"mapLoad","zoom","center","preserveDrawingBuffer","movingMethod","maxBounds"],["id","gas_icon","url","assets/images/gas_icon.png",3,"imageLoaded"],[3,"className","feature","close",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-body"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ngSubmit"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","ratingModal","tabindex","-1","aria-labelledby","ratingModalLabel","aria-hidden","true","role","dialog",1,"modal","fade"],["id","ratingModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"mb-3"],["for","userRating",1,"form-label"],["type","number","id","userRating","name","userRating","min","1","max","5","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled"],["id","gas_stations_geojson",3,"data"],["id","clickable-layer","type","symbol","source","gas_stations_geojson",3,"layerClick","layout"],[3,"close","className","feature"],[1,"card-title","text-center"],[1,"text-center"],["data-bs-toggle","modal","data-bs-target","#ratingModal",1,"btn","btn-outline-primary",2,"margin-bottom","5px"],[4,"ngFor","ngForOf"],["style","margin-bottom: 5%;","type","button","class","btn btn-primary","data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngIf"],[1,"table","table-bordered","text-center"],[1,"thead-light"],["scope","col"],["target","_blank",1,"btn","btn-outline-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",2,"margin-bottom","5%",3,"click"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["for","id",1,"form-label"],["for","Regularprice",1,"form-label"],["type","text","placeholder","$","aria-label","default input example","id","Regularprice","name","Regularprice","required","","pattern","^[0-9]+(\\.[0-9]{1,2})?$",1,"form-control",3,"ngModelChange","ngModel"],["for","Premiumprice",1,"form-label"],["type","text","placeholder","$","aria-label","default input example","id","Premiumprice","name","Premiumprice","required","","pattern","^[0-9]+(\\.[0-9]{1,2})?$",1,"form-control",3,"ngModelChange","ngModel"],["for","priceDieselField",1,"form-label"],["type","text","placeholder","$","aria-label","default input example","id","priceDieselField","name","priceDieselField","required","","pattern","^[0-9]+(\\.[0-9]{1,2})?$",1,"form-control",3,"ngModelChange","ngModel"]],template:function(t,i){if(t&1){let r=Lr();Y(0,"mgl-map",5),dt("mapLoad",function(d){return xi(r),Si(i.setup(d))}),Y(1,"mgl-image",6),dt("imageLoaded",function(){return xi(r),Si(i.imageLoaded=!0)}),Z(),Nt(2,W0e,2,15)(3,Y0e,32,9,"mgl-popup",7),Z(),Y(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"h5",12),me(9,"Update Gas Station Prices"),Z(),Y(10,"button",13),dt("click",function(){xi(r);let d=xs(15);return Si(i.closeEditGasPrice(d))}),Z()(),Nt(11,J0e,3,0,"div",14),Y(12,"div",15),Nt(13,X0e,3,1,"div",16),Y(14,"form",17,0),dt("ngSubmit",function(){xi(r);let d=xs(15);return Si(i.onSubmit(d))}),Nt(16,lbe,23,7,"div",18),Y(17,"div",19)(18,"button",20),dt("click",function(){xi(r);let d=xs(15);return Si(i.closeEditGasPrice(d))}),me(19,"Close"),Z(),Y(20,"button",21),me(21,"Save changes"),Z()()()()()()(),Y(22,"div",22)(23,"div",9)(24,"div",10)(25,"div",11)(26,"h5",23),me(27,"Rate This Station"),Z(),Qe(28,"button",24),Z(),Y(29,"div",15)(30,"form",17,1),dt("ngSubmit",function(){return xi(r),Si(i.submitRating(i.selectedFeature.properties.Station_ID,i.userRating))}),Y(32,"div",25)(33,"label",26),me(34,"Your Rating (1-5)"),Z(),Y(35,"input",27),Ff("ngModelChange",function(d){return xi(r),Ky(i.userRating,d)||(i.userRating=d),Si(d)}),Z()(),Y(36,"div",19)(37,"button",28),me(38," Close "),Z(),Y(39,"button",29),me(40," Submit Rating "),Z()()()()()()()}if(t&2){let r=xs(15),o=xs(31);IL("https://api.maptiler.com/maps/streets/style.json?key=n6S4rviWxFfTzUz0eHiO"),Ce("zoom",yl(15,N0e))("center",hh(16,F0e,-66.5))("preserveDrawingBuffer",!0)("movingMethod","flyTo")("maxBounds",uT(22,U0e,hh(18,L0e,-70.3503),hh(20,B0e,-63.27647))),he(2),dh(i.imageLoaded==!0&&i.gas_stations!=null?2:-1),he(),Ce("ngIf",i.selectedFeature),he(8),Ce("ngIf",i.updatingPrices),he(2),Ce("ngIf",i.updatingComplete),he(3),Ce("ngIf",!i.updatingPrices),he(4),Ce("disabled",r.invalid),he(15),Nf("ngModel",i.userRating),he(4),Ce("disabled",!o.form.valid)}},dependencies:[ku,Li,yq,gq,mq,fq,_q,YB,P1,YT,HB,$B,QT,eA,XT,JT,KT,ZT],styles:["mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     .popup{border-radius:16px;box-shadow:0 2px 18px #0562dc61;font-family:Roboto,sans-serif;font-size:14px;color:#212121;transform:scale(2);position:relative;opacity:.98;background-color:#fff0;width:10rem}[_nghost-%COMP%]     .popup p:last-of-type{font-weight:400;color:#5f6368;font-size:14px}"]})};function ube(e,n){if(e&1){let t=Lr();Y(0,"button",34),dt("click",function(){let r=xi(t).$implicit,o=ut(2);return Si(o.flyToStation(r.geometry.coordinates[0],r.geometry.coordinates[1]))}),me(1),Z()}if(e&2){let t=n.$implicit;he(),n1("",t.properties.Station_Name," ",t.properties.priceHighlight," ")}}function dbe(e,n){if(e&1&&Gy(0,ube,2,2,"button",33,$y),e&2){let t=ut();qy(t.filtered_gas_stations==null?null:t.filtered_gas_stations.features)}}function hbe(e,n){if(e&1){let t=Lr();Y(0,"button",36),dt("click",function(){let r=xi(t).$implicit,o=ut(2);return Si(o.flyToStation(r.geometry.coordinates[0],r.geometry.coordinates[1]))}),me(1),Z()}if(e&2){let t=n.$implicit;he(),n1(" ",t.properties.Station_Name," ",t.properties.priceHighlight," ")}}function pbe(e,n){if(e&1&&Gy(0,hbe,2,2,"button",35,$y),e&2){let t=ut();qy(t.filtered_gas_stations==null?null:t.filtered_gas_stations.features)}}var eg=class e{constructor(n){this.srvc=n}map;gas_stations;filtered_gas_stations;filters={price:"Lowest",brand:[],gasType:1};loadAllGasStations(){this.srvc.getallGasStations().subscribe(n=>{let t=n;this.gas_stations=t,this.applyFilters()})}receiveListFromChild(n){this.map=n,this.enableMapClickToLoadStations()}enableMapClickToLoadStations(){this.map.on("click",n=>{let[t,i]=n.lngLat.toArray();this.srvc.getGasStations_aws(t,i).subscribe(r=>{let o=r;this.gas_stations=o,this.applyFilters(),this.add_circle(this.map,t,i)})})}flyToStation(n,t){this.map.loaded()!=!1&&this.map.flyTo({center:[n,t],zoom:17})}onPriceFilterSelected(n){this.filters.price=n,this.applyFilters()}onBrandFilterToggled(n,t){t?this.filters.brand.push(n):this.filters.brand=this.filters.brand.filter(i=>i!==n),console.log(n,this.filters),this.applyFilters()}onGasTypeFilterToggled(n){this.filters.gasType=n,this.applyFilters()}applyFilters(){let n=structuredClone(this.gas_stations),t=n.features;t.forEach(i=>{let r=0;this.filters.gasType==1?r=i.properties.Station_Gas_Price:this.filters.gasType==2?r=i.properties.Station_Premium_Price:this.filters.gasType==3&&(r=i.properties.Station_Diesel_Price),i.properties.priceHighlight=r}),this.filters.price&&t.sort((i,r)=>this.filters.price==="Lowest"?parseFloat(i.properties.priceHighlight)-parseFloat(r.properties.priceHighlight):parseFloat(r.properties.priceHighlight)-parseFloat(i.properties.priceHighlight)),this.filters.brand.length>0&&(t=t.filter(i=>this.filters.brand.some(r=>i.properties.Station_Name.includes(r)))),t=t.filter(i=>parseFloat(i.properties.Station_Gas_Price)>0),n.features=t,this.filtered_gas_stations=n,console.log(this.gas_stations,this.filtered_gas_stations)}add_circle(n,t,i,r=5){let g=YU([t,i],r,{steps:64,units:"miles"}),v=n.getSource("circle-location");v?v.setData(g):n.addLayer({id:"circle-location",type:"fill",source:{type:"geojson",data:g},paint:{"fill-color":"#8CCFFF","fill-opacity":.2}})}static \u0275fac=function(t){return new(t||e)(Je(im))};static \u0275cmp=Pt({type:e,selectors:[["app-gas-map"]],decls:134,vars:3,consts:[[1,"container",2,"max-width","100vw","height","100vh","padding-left","0%","padding-right","0%"],[1,"left-panel",2,"overflow","auto"],["type","button","data-bs-toggle","modal","data-bs-target","#nearestGasModal",1,"btn","btn-light","gas-button-sm-screen","d-md-none"],["type","button","data-bs-toggle","modal","data-bs-target","#filtersModal",1,"btn","btn-light","gas-button-sm-screen","d-md-none"],[1,"d-none","d-md-inline"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-light","gas-button","dropdown-toggle"],[1,"dropdown-menu"],["type","radio","name","price","value","Lowest",1,"form-check-input",3,"change"],[1,"form-check-label"],["type","radio","name","price","value","Highest",1,"form-check-input",3,"change"],["type","checkbox","value","Texaco",1,"form-check-input",3,"change"],["type","checkbox","value","Gulf",1,"form-check-input",3,"change"],["type","checkbox","value","Puma",1,"form-check-input",3,"change"],["type","checkbox","value","Total",1,"form-check-input",3,"change"],["type","radio","name","gasType","value","Regular","checked","true",1,"form-check-input",3,"change"],["type","radio","name","gasType","value","Premium",1,"form-check-input",3,"change"],["type","radio","name","gasType","value","Diesel",1,"form-check-input",3,"change"],[1,"map-container"],[3,"emitter","gas_stations"],["id","filtersModal","tabindex","-1","aria-labelledby","filtersModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","filtersModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","nearestGasModal","tabindex","-1","aria-labelledby","nearestGasModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable"],["id","nearestGasModalLabel",1,"modal-title","fs-5"],[1,"modal-body",2,"max-height","70vh","overflow-y","auto"],["type","button",1,"btn","btn-light","gas-button"],["type","button",1,"btn","btn-light","gas-button",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","gas-button"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","gas-button",3,"click"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"div",1)(2,"button",2),me(3," Nearest Stations "),Z(),Y(4,"button",3),me(5," Filters "),Z(),Y(6,"div",4)(7,"h2"),me(8,"Filters"),Z(),Y(9,"div",5)(10,"button",6),me(11," By Price "),Z(),Y(12,"ul",7)(13,"div")(14,"input",8),dt("change",function(){return i.onPriceFilterSelected("Lowest")}),Z(),Y(15,"label",9),me(16,"Lowest - Highest"),Z()(),Y(17,"div")(18,"input",10),dt("change",function(){return i.onPriceFilterSelected("Highest")}),Z(),Y(19,"label",9),me(20,"Highest - Lowest"),Z()()()(),Y(21,"div",5)(22,"button",6),me(23," By Brand "),Z(),Y(24,"ul",7)(25,"div")(26,"input",11),dt("change",function(o){return i.onBrandFilterToggled("Texaco",o.target==null?null:o.target.checked)}),Z(),Y(27,"label",9),me(28,"Texaco"),Z()(),Y(29,"div")(30,"input",12),dt("change",function(o){return i.onBrandFilterToggled("Gulf",o.target==null?null:o.target.checked)}),Z(),Y(31,"label",9),me(32,"Gulf"),Z()(),Y(33,"div")(34,"input",13),dt("change",function(o){return i.onBrandFilterToggled("Puma",o.target==null?null:o.target.checked)}),Z(),Y(35,"label",9),me(36,"Puma"),Z()(),Y(37,"div")(38,"input",14),dt("change",function(o){return i.onBrandFilterToggled("Total",o.target==null?null:o.target.checked)}),Z(),Y(39,"label",9),me(40,"Total"),Z()()()(),Y(41,"div",5)(42,"button",6),me(43," By Gas Type "),Z(),Y(44,"ul",7)(45,"div")(46,"input",15),dt("change",function(){return i.onGasTypeFilterToggled(1)}),Z(),Y(47,"label",9),me(48,"Regular"),Z()(),Y(49,"div")(50,"input",16),dt("change",function(){return i.onGasTypeFilterToggled(2)}),Z(),Y(51,"label",9),me(52,"Premium"),Z()(),Y(53,"div")(54,"input",17),dt("change",function(){return i.onGasTypeFilterToggled(3)}),Z(),Y(55,"label",9),me(56,"Diesel"),Z()()()()(),Y(57,"div",4)(58,"h2"),me(59,"Nearest Stations"),Z(),Nt(60,dbe,2,0),Z()(),Y(61,"div",18)(62,"app-map",19),dt("emitter",function(o){return i.receiveListFromChild(o)}),Z()()(),Y(63,"div",20)(64,"div",21)(65,"div",22)(66,"div",23)(67,"h1",24),me(68,"Apply Filters"),Z(),Qe(69,"button",25),Z(),Y(70,"div",26)(71,"div",5)(72,"button",6),me(73," By Price "),Z(),Y(74,"ul",7)(75,"div")(76,"input",8),dt("change",function(){return i.onPriceFilterSelected("Lowest")}),Z(),Y(77,"label",9),me(78,"Lowest - Highest"),Z()(),Y(79,"div")(80,"input",10),dt("change",function(){return i.onPriceFilterSelected("Highest")}),Z(),Y(81,"label",9),me(82,"Highest - Lowest"),Z()()()(),Y(83,"div",5)(84,"button",6),me(85," By Brand "),Z(),Y(86,"ul",7)(87,"div")(88,"input",11),dt("change",function(o){return i.onBrandFilterToggled("Texaco",o.target==null?null:o.target.checked)}),Z(),Y(89,"label",9),me(90,"Texaco"),Z()(),Y(91,"div")(92,"input",12),dt("change",function(o){return i.onBrandFilterToggled("Gulf",o.target==null?null:o.target.checked)}),Z(),Y(93,"label",9),me(94,"Gulf"),Z()(),Y(95,"div")(96,"input",13),dt("change",function(o){return i.onBrandFilterToggled("Puma",o.target==null?null:o.target.checked)}),Z(),Y(97,"label",9),me(98,"Puma"),Z()(),Y(99,"div")(100,"input",14),dt("change",function(o){return i.onBrandFilterToggled("Total",o.target==null?null:o.target.checked)}),Z(),Y(101,"label",9),me(102,"Total"),Z()()()(),Y(103,"div",5)(104,"button",6),me(105," By Gas Type "),Z(),Y(106,"ul",7)(107,"div")(108,"input",15),dt("change",function(){return i.onGasTypeFilterToggled(1)}),Z(),Y(109,"label",9),me(110,"Regular"),Z()(),Y(111,"div")(112,"input",16),dt("change",function(){return i.onGasTypeFilterToggled(2)}),Z(),Y(113,"label",9),me(114,"Premium"),Z()(),Y(115,"div")(116,"input",17),dt("change",function(){return i.onGasTypeFilterToggled(3)}),Z(),Y(117,"label",9),me(118,"Diesel"),Z()()()()(),Y(119,"div",27)(120,"button",28),me(121,"Close"),Z()()()()(),Y(122,"div",29)(123,"div",30)(124,"div",22)(125,"div",23)(126,"h1",31),me(127,"Nearest Stations"),Z(),Qe(128,"button",25),Z(),Y(129,"div",32),Nt(130,pbe,2,0),Z(),Y(131,"div",27)(132,"button",28),me(133,"Close"),Z()()()()()),t&2&&(he(60),dh(i.map!=null?60:-1),he(2),Ce("gas_stations",i.filtered_gas_stations),he(68),dh(i.map!=null?130:-1))},dependencies:[tC],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}.gas-button[_ngcontent-%COMP%]{width:100%;margin-top:5%;margin-bottom:5%;font-size:100%}.gas-button-sm-screen[_ngcontent-%COMP%]{width:100%;margin-top:1%;margin-bottom:1%;font-size:100%}.left-panel[_ngcontent-%COMP%]{width:25%;background-color:#001f3f;justify-content:center;align-items:center;padding:20px;box-shadow:2px 0 5px #0000001a;height:100%;color:#fff}.map-container[_ngcontent-%COMP%]{width:100%;height:100%}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column}.map-container[_ngcontent-%COMP%]{width:100%;height:67vh;order:1}.left-panel[_ngcontent-%COMP%]{width:100%;height:33vh;box-shadow:none;order:2}}"]})};var nC=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Pt({type:e,selectors:[["home-component"]],decls:1,vars:0,template:function(t,i){t&1&&Qe(0,"app-gas-map")},dependencies:[eg]})};var fR;try{fR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fR=!1}var no=(()=>{class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?g1(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||fR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||e)(Re(_s))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var $v;function mbe(){if($v==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>$v=!0}))}finally{$v=$v||!1}return $v}function mR(e){return mbe()?e:!!e.capture}var Yh;function wq(){if(Yh==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Yh=!1,Yh;if("scrollBehavior"in document.documentElement.style)Yh=!0;else{let e=Element.prototype.scrollTo;e?Yh=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Yh=!1}}return Yh}var pR;function gbe(){if(pR==null){let e=typeof document<"u"?document.head:null;pR=!!(e&&(e.createShadowRoot||e.attachShadow))}return pR}function xq(e){if(gbe()){let n=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function Gv(){let e=typeof document<"u"&&document?document.activeElement:null;for(;e&&e.shadowRoot;){let n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}function Oc(e){return e.composedPath?e.composedPath()[0]:e.target}function gR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Sq(e,...n){return n.length?n.some(t=>e[t]):e.altKey||e.shiftKey||e.ctrlKey||e.metaKey}function tg(e){return Array.isArray(e)?e:[e]}function rr(e){return e==null?"":typeof e=="string"?e:`${e}px`}function ng(e){return e instanceof yi?e.nativeElement:e}var ybe=(()=>{class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Cq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({providers:[ybe]})}}return e})();var Eq=new Set,Jh,_be=(()=>{class e{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):bbe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&vbe(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(i){return new(i||e)(Re(no),Re(Vy,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function vbe(e,n){if(!Eq.has(e))try{Jh||(Jh=document.createElement("style"),n&&Jh.setAttribute("nonce",n),Jh.setAttribute("type","text/css"),document.head.appendChild(Jh)),Jh.sheet&&(Jh.sheet.insertRule(`@media ${e} {body{ }}`,0),Eq.add(e))}catch(t){console.error(t)}}function bbe(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var Dq=(()=>{class e{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Bt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Iq(tg(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let r=Iq(tg(t)).map(d=>this._registerQuery(d).observable),o=_u(r);return o=ll(o.pipe(fo(1)),o.pipe(pf(1),df(0))),o.pipe(Vt(d=>{let g={matches:!1,breakpoints:{}};return d.forEach(({matches:v,query:x})=>{g.matches=g.matches||v,g.breakpoints[x]=v}),g}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),o={observable:new Zt(d=>{let g=v=>this._zone.run(()=>d.next(v));return i.addListener(g),()=>{i.removeListener(g)}}).pipe(Ys(i),Vt(({matches:d})=>({query:t,matches:d})),Ii(this._destroySubject)),mql:i};return this._queries.set(t,o),o}static{this.\u0275fac=function(i){return new(i||e)(Re(_be),Re(jt))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Iq(e){return e.map(n=>n.split(",")).reduce((n,t)=>n.concat(t)).map(n=>n.trim())}var vR=(()=>{class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return xbe(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=wbe(Mbe(t));if(i&&(Tq(i)===-1||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=Tq(t);return t.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Tbe(t)?!1:r==="audio"?t.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return Abe(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static{this.\u0275fac=function(i){return new(i||e)(Re(no))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function wbe(e){try{return e.frameElement}catch{return null}}function xbe(e){return!!(e.offsetWidth||e.offsetHeight||typeof e.getClientRects=="function"&&e.getClientRects().length)}function Sbe(e){let n=e.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function Cbe(e){return Ibe(e)&&e.type=="hidden"}function Ebe(e){return Dbe(e)&&e.hasAttribute("href")}function Ibe(e){return e.nodeName.toLowerCase()=="input"}function Dbe(e){return e.nodeName.toLowerCase()=="a"}function Pq(e){if(!e.hasAttribute("tabindex")||e.tabIndex===void 0)return!1;let n=e.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function Tq(e){if(!Pq(e))return null;let n=parseInt(e.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function Tbe(e){let n=e.nodeName.toLowerCase(),t=n==="input"&&e.type;return t==="text"||t==="password"||n==="select"||n==="textarea"}function Abe(e){return Cbe(e)?!1:Sbe(e)||Ebe(e)||e.hasAttribute("contenteditable")||Pq(e)}function Mbe(e){return e.ownerDocument&&e.ownerDocument.defaultView||window}var _R=class{get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}constructor(n,t,i,r,o=!1,d){this._element=n,this._checker=t,this._ngZone=i,this._document=r,this._injector=d,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let n=this._startAnchor,t=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let t=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(n),!!i}return t.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let t=this._getRegionBoundary("start");return t&&t.focus(n),!!t}focusLastTabbableElement(n){let t=this._getRegionBoundary("end");return t&&t.focus(n),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let t=n.children;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let t=n.children;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,t){n?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?Po(n,{injector:this._injector}):setTimeout(n)}},Rq=(()=>{class e{constructor(t,i,r){this._checker=t,this._ngZone=i,this._injector=Me(Un),this._document=r}create(t,i=!1){return new _R(t,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||e)(Re(vR),Re(jt),Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Pbe(e){return e.buttons===0||e.detail===0}function Rbe(e){let n=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var Obe=new ct("cdk-input-modality-detector-options"),kbe={ignoreKeys:[18,17,224,91,16]},Oq=650,ig=mR({passive:!0,capture:!0}),Nbe=(()=>{class e{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new cr(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(g=>g===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Oc(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<Oq||(this._modality.next(Pbe(d)?"keyboard":"mouse"),this._mostRecentTarget=Oc(d))},this._onTouchstart=d=>{if(Rbe(d)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Oc(d)},this._options=q(q({},kbe),o),this.modalityDetected=this._modality.pipe(pf(1)),this.modalityChanged=this.modalityDetected.pipe(Ey()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,ig),r.addEventListener("mousedown",this._onMousedown,ig),r.addEventListener("touchstart",this._onTouchstart,ig)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ig),document.removeEventListener("mousedown",this._onMousedown,ig),document.removeEventListener("touchstart",this._onTouchstart,ig))}static{this.\u0275fac=function(i){return new(i||e)(Re(no),Re(jt),Re(pn),Re(Obe,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var oC=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}(oC||{}),Fbe=new ct("cdk-focus-monitor-default-options"),rC=mR({passive:!0,capture:!0}),kq=(()=>{class e{constructor(t,i,r,o,d){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Bt,this._rootNodeFocusAndBlurListener=g=>{let v=Oc(g);for(let x=v;x;x=x.parentElement)g.type==="focus"?this._onFocus(g,x):this._onBlur(g,x)},this._document=o,this._detectionMode=d?.detectionMode||oC.IMMEDIATE}monitor(t,i=!1){let r=ng(t);if(!this._platform.isBrowser||r.nodeType!==1)return Dt();let o=xq(r)||this._getDocument(),d=this._elementInfo.get(r);if(d)return i&&(d.checkChildren=!0),d.subject;let g={checkChildren:i,subject:new Bt,rootNode:o};return this._elementInfo.set(r,g),this._registerGlobalListeners(g),g.subject}stopMonitoring(t){let i=ng(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=ng(t),d=this._getDocument().activeElement;o===d?this._getClosestElementsInfo(o).forEach(([g,v])=>this._originChanged(g,i,v)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===oC.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===oC.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?Oq:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=Oc(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,rC),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,rC)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ii(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,rC),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,rC),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let d=0;d<o.length;d++)if(o[d].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||e)(Re(jt),Re(no),Re(Nbe),Re(pn,8),Re(Fbe,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Xh=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Xh||{}),Aq="cdk-high-contrast-black-on-white",Mq="cdk-high-contrast-white-on-black",yR="cdk-high-contrast-active",Lbe=(()=>{class e{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Me(Dq).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Xh.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Xh.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Xh.BLACK_ON_WHITE}return Xh.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(yR,Aq,Mq),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Xh.BLACK_ON_WHITE?t.add(yR,Aq):i===Xh.WHITE_ON_BLACK&&t.add(yR,Mq)}}static{this.\u0275fac=function(i){return new(i||e)(Re(no),Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Nq=(()=>{class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(i){return new(i||e)(Re(Lbe))}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({imports:[Cq]})}}return e})();var Ube=new ct("cdk-dir-doc",{providedIn:"root",factory:zbe});function zbe(){return Me(pn)}var Vbe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function jbe(e){let n=e?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Vbe.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var qv=(()=>{class e{constructor(t){if(this.value="ltr",this.change=new kn,t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=jbe(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||e)(Re(Ube,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Wv=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var $be=20,Lq=(()=>{class e{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Bt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=$be){return this._platform.isBrowser?new Zt(i=>{this._globalSubscription||this._addGlobalListener();let r=t>0?this._scrolled.pipe(kb(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(jn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=ng(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Nr(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||e)(Re(jt),Re(no),Re(pn,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Gbe=20,bR=(()=>{class e{constructor(t,i,r){this._platform=t,this._change=new Bt,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),d=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,g=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:d,left:g}}change(t=Gbe){return t>0?this._change.pipe(kb(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||e)(Re(no),Re(jt),Re(pn,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Fq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})(),wR=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({imports:[Wv,Fq,Wv,Fq]})}}return e})();var Zv=class{attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},rg=class extends Zv{constructor(n,t,i,r,o){super(),this.component=n,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},og=class extends Zv{constructor(n,t,i,r){super(),this.templateRef=n,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,t=this.context){return this.context=t,super.attach(n)}detach(){return this.context=void 0,super.detach()}},xR=class extends Zv{constructor(n){super(),this.element=n instanceof yi?n.nativeElement:n}},sg=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof rg)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof og)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof xR)return this._attachedPortal=n,this.attachDomPortal(n)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var sC=class extends sg{constructor(n,t,i,r,o){super(),this.outletElement=n,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=d=>{this._document;let g=d.element;g.parentNode;let v=this._document.createComment("dom-portal");g.parentNode.insertBefore(v,g),this.outletElement.appendChild(g),this._attachedPortal=d,super.setDisposeFn(()=>{v.parentNode&&v.parentNode.replaceChild(g,v)})},this._document=o}attachComponentPortal(n){let i=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),r;return n.viewContainerRef?(r=n.viewContainerRef.createComponent(i,n.viewContainerRef.length,n.injector||n.viewContainerRef.injector,n.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(n.injector||this._defaultInjector||Un.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=n,r}attachTemplatePortal(n){let t=n.viewContainerRef,i=t.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=n,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var SR=(()=>{class e extends sg{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new kn,this.attachDomPortal=o=>{this._document;let d=o.element;d.parentNode;let g=this._document.createComment("dom-portal");o.setAttachedHost(this),d.parentNode.insertBefore(g,d),this._getRootNode().appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(d,g)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static{this.\u0275fac=function(i){return new(i||e)(Je(gl),Je(Wo),Je(pn))}}static{this.\u0275dir=Ln({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Cr]})}}return e})();var Kv=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var Bq=wq(),CR=class{constructor(n,t){this._viewportRuler=n,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=rr(-this._previousScrollPosition.left),n.style.top=rr(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,t=this._document.body,i=n.style,r=t.style,o=i.scrollBehavior||"",d=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),Bq&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Bq&&(i.scrollBehavior=o,r.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var ER=class{constructor(n,t,i,r){this._scrollDispatcher=n,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(jn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},aC=class{enable(){}disable(){}attach(){}};function IR(e,n){return n.some(t=>{let i=e.bottom<t.top,r=e.top>t.bottom,o=e.right<t.left,d=e.left>t.right;return i||r||o||d})}function Uq(e,n){return n.some(t=>{let i=e.top<t.top,r=e.bottom>t.bottom,o=e.left<t.left,d=e.right>t.right;return i||r||o||d})}var DR=class{constructor(n,t,i,r){this._scrollDispatcher=n,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();IR(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Wbe=(()=>{class e{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new aC,this.close=d=>new ER(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new CR(this._viewportRuler,this._document),this.reposition=d=>new DR(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=o}static{this.\u0275fac=function(i){return new(i||e)(Re(Lq),Re(bR),Re(jt),Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Yv=class{constructor(n){if(this.scrollStrategy=new aC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,n){let t=Object.keys(n);for(let i of t)n[i]!==void 0&&(this[i]=n[i])}}};var TR=class{constructor(n,t){this.connectionPair=n,this.scrollableViewProperties=t}};var Gq=(()=>{class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||e)(Re(pn))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Zbe=(()=>{class e extends Gq{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{let o=this._attachedOverlays;for(let d=o.length-1;d>-1;d--)if(o[d]._keydownEvents.observers.length>0){let g=o[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>g.next(r)):g.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||e)(Re(pn),Re(jt,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Kbe=(()=>{class e extends Gq{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Oc(o)},this._clickListener=o=>{let d=Oc(o),g=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;let v=this._attachedOverlays.slice();for(let x=v.length-1;x>-1;x--){let D=v[x];if(D._outsidePointerEvents.observers.length<1||!D.hasAttached())continue;if(zq(D.overlayElement,d)||zq(D.overlayElement,g))break;let R=D._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>R.next(o)):R.next(o)}}}add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||e)(Re(pn),Re(no),Re(jt,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function zq(e,n){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=n;for(;i;){if(i===e)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var lC=(()=>{class e{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||gR()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(t),gR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||e)(Re(pn),Re(no))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ep=class{constructor(n,t,i,r,o,d,g,v,x,D=!1,R){this._portalOutlet=n,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=d,this._document=g,this._location=v,this._outsideClickDispatcher=x,this._animationsDisabled=D,this._injector=R,this._backdropElement=null,this._backdropClick=new Bt,this._attachments=new Bt,this._detachments=new Bt,this._locationChanges=gi.EMPTY,this._backdropClickHandler=L=>this._backdropClick.next(L),this._backdropTransitionendHandler=L=>{this._disposeBackdrop(L.target)},this._keydownEvents=new Bt,this._outsidePointerEvents=new Bt,this._renders=new Bt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=oa(()=>kf(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Po(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=q(q({},this._config),n),this._updateElementSize()}setDirection(n){this._config=Ie(q({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=rr(this._config.width),n.height=rr(this._config.height),n.minWidth=rr(this._config.minWidth),n.minHeight=rr(this._config.minHeight),n.maxWidth=rr(this._config.maxWidth),n.maxHeight=rr(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(n)})}):this._backdropElement.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let n=this._backdropElement;if(n){if(this._animationsDisabled){this._disposeBackdrop(n);return}n.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{n.addEventListener("transitionend",this._backdropTransitionendHandler)}),n.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(n)},500))}}_toggleClasses(n,t,i){let r=tg(t||[]).filter(o=>!!o);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(Ii(Sy(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n&&(n.disable(),n.detach&&n.detach())}_disposeBackdrop(n){n&&(n.removeEventListener("click",this._backdropClickHandler),n.removeEventListener("transitionend",this._backdropTransitionendHandler),n.remove(),this._backdropElement===n&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},Vq="cdk-overlay-connected-position-bounding-box",Ybe=/([A-Za-z%]+)$/,AR=class{get positions(){return this._preferredPositions}constructor(n,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Bt,this._resizeSubscription=gi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(Vq),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],d;for(let g of this._preferredPositions){let v=this._getOriginPoint(n,r,g),x=this._getOverlayPoint(v,t,g),D=this._getOverlayFit(x,t,i,g);if(D.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(g,v);return}if(this._canFitWithFlexibleDimensions(D,x,i)){o.push({position:g,origin:v,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(v,g)});continue}(!d||d.overlayFit.visibleArea<D.visibleArea)&&(d={overlayFit:D,overlayPoint:x,originPoint:v,position:g,overlayRect:t})}if(o.length){let g=null,v=-1;for(let x of o){let D=x.boundingBoxRect.width*x.boundingBoxRect.height*(x.position.weight||1);D>v&&(v=D,g=x)}this._isPushed=!1,this._applyPosition(g.position,g.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(d.position,d.originPoint);return}this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Qh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Vq),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,t)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,t,i){let r;if(i.originX=="center")r=n.left+n.width/2;else{let d=this._isRtl()?n.right:n.left,g=this._isRtl()?n.left:n.right;r=i.originX=="start"?d:g}t.left<0&&(r-=t.left);let o;return i.originY=="center"?o=n.top+n.height/2:o=i.originY=="top"?n.top:n.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(n,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:n.x+r,y:n.y+o}}_getOverlayFit(n,t,i,r){let o=Hq(t),{x:d,y:g}=n,v=this._getOffset(r,"x"),x=this._getOffset(r,"y");v&&(d+=v),x&&(g+=x);let D=0-d,R=d+o.width-i.width,L=0-g,j=g+o.height-i.height,J=this._subtractOverflows(o.width,D,R),re=this._subtractOverflows(o.height,L,j),be=J*re;return{visibleArea:be,isCompletelyWithinViewport:o.width*o.height===be,fitsInViewportVertically:re===o.height,fitsInViewportHorizontally:J==o.width}}_canFitWithFlexibleDimensions(n,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,o=i.right-t.x,d=jq(this._overlayRef.getConfig().minHeight),g=jq(this._overlayRef.getConfig().minWidth),v=n.fitsInViewportVertically||d!=null&&d<=r,x=n.fitsInViewportHorizontally||g!=null&&g<=o;return v&&x}return!1}_pushOverlayOnScreen(n,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let r=Hq(t),o=this._viewportRect,d=Math.max(n.x+r.width-o.width,0),g=Math.max(n.y+r.height-o.height,0),v=Math.max(o.top-i.top-n.y,0),x=Math.max(o.left-i.left-n.x,0),D=0,R=0;return r.width<=o.width?D=x||-d:D=n.x<this._viewportMargin?o.left-i.left-n.x:0,r.height<=o.height?R=v||-g:R=n.y<this._viewportMargin?o.top-i.top-n.y:0,this._previousPushAmount={x:D,y:R},{x:n.x+D,y:n.y+R}}_applyPosition(n,t){if(this._setTransformOrigin(n),this._setOverlayElementStyles(t,n),this._setBoundingBoxStyles(t,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!Jbe(this._lastScrollVisibility,i)){let r=new TR(n,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=n.overlayY;n.overlayX==="center"?i="center":this._isRtl()?i=n.overlayX==="start"?"right":"left":i=n.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,t){let i=this._viewportRect,r=this._isRtl(),o,d,g;if(t.overlayY==="top")d=n.y,o=i.height-d+this._viewportMargin;else if(t.overlayY==="bottom")g=i.height-n.y+this._viewportMargin*2,o=i.height-g+this._viewportMargin;else{let j=Math.min(i.bottom-n.y+i.top,n.y),J=this._lastBoundingBoxSize.height;o=j*2,d=n.y-j,o>J&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.y-J/2)}let v=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,x=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,D,R,L;if(x)L=i.width-n.x+this._viewportMargin*2,D=n.x-this._viewportMargin;else if(v)R=n.x,D=i.right-n.x;else{let j=Math.min(i.right-n.x+i.left,n.x),J=this._lastBoundingBoxSize.width;D=j*2,R=n.x-j,D>J&&!this._isInitialRender&&!this._growAfterOpen&&(R=n.x-J/2)}return{top:d,left:R,bottom:g,right:L,width:D,height:o}}_setBoundingBoxStyles(n,t){let i=this._calculateBoundingBoxRect(n,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;r.height=rr(i.height),r.top=rr(i.top),r.bottom=rr(i.bottom),r.width=rr(i.width),r.left=rr(i.left),r.right=rr(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=rr(o)),d&&(r.maxWidth=rr(d))}this._lastBoundingBoxSize=i,Qh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Qh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Qh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,t){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(r){let D=this._viewportRuler.getViewportScrollPosition();Qh(i,this._getExactOverlayY(t,n,D)),Qh(i,this._getExactOverlayX(t,n,D))}else i.position="static";let g="",v=this._getOffset(t,"x"),x=this._getOffset(t,"y");v&&(g+=`translateX(${v}px) `),x&&(g+=`translateY(${x}px)`),i.transform=g.trim(),d.maxHeight&&(r?i.maxHeight=rr(d.maxHeight):o&&(i.maxHeight="")),d.maxWidth&&(r?i.maxWidth=rr(d.maxWidth):o&&(i.maxWidth="")),Qh(this._pane.style,i)}_getExactOverlayY(n,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,n);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),n.overlayY==="bottom"){let d=this._document.documentElement.clientHeight;r.bottom=`${d-(o.y+this._overlayRect.height)}px`}else r.top=rr(o.y);return r}_getExactOverlayX(n,t,i){let r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,n);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let d;if(this._isRtl()?d=n.overlayX==="end"?"left":"right":d=n.overlayX==="end"?"right":"left",d==="right"){let g=this._document.documentElement.clientWidth;r.right=`${g-(o.x+this._overlayRect.width)}px`}else r.left=rr(o.x);return r}_getScrollVisibility(){let n=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Uq(n,i),isOriginOutsideView:IR(n,i),isOverlayClipped:Uq(t,i),isOverlayOutsideView:IR(t,i)}}_subtractOverflows(n,...t){return t.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:n-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,t){return t==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&tg(n).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof yi)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let t=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+t,height:i,width:t}}};function Qh(e,n){for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function jq(e){if(typeof e!="number"&&e!=null){let[n,t]=e.split(Ybe);return!t||t==="px"?parseFloat(n):null}return e||null}function Hq(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function Jbe(e,n){return e===n?!0:e.isOriginClipped===n.isOriginClipped&&e.isOriginOutsideView===n.isOriginOutsideView&&e.isOverlayClipped===n.isOverlayClipped&&e.isOverlayOutsideView===n.isOverlayOutsideView}var $q="cdk-global-overlay-wrapper",MR=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(n){let t=n.getConfig();this._overlayRef=n,this._width&&!t.width&&n.updateSize({width:this._width}),this._height&&!t.height&&n.updateSize({height:this._height}),n.hostElement.classList.add($q),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:d,maxHeight:g}=i,v=(r==="100%"||r==="100vw")&&(!d||d==="100%"||d==="100vw"),x=(o==="100%"||o==="100vh")&&(!g||g==="100%"||g==="100vh"),D=this._xPosition,R=this._xOffset,L=this._overlayRef.getConfig().direction==="rtl",j="",J="",re="";v?re="flex-start":D==="center"?(re="center",L?J=R:j=R):L?D==="left"||D==="end"?(re="flex-end",j=R):(D==="right"||D==="start")&&(re="flex-start",J=R):D==="left"||D==="start"?(re="flex-start",j=R):(D==="right"||D==="end")&&(re="flex-end",J=R),n.position=this._cssPosition,n.marginLeft=v?"0":j,n.marginTop=x?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=v?"0":J,t.justifyContent=re,t.alignItems=x?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove($q),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},Xbe=(()=>{class e{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new MR}flexibleConnectedTo(t){return new AR(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||e)(Re(bR),Re(pn),Re(no),Re(lC))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qbe=0,tp=(()=>{class e{constructor(t,i,r,o,d,g,v,x,D,R,L,j){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=d,this._injector=g,this._ngZone=v,this._document=x,this._directionality=D,this._location=R,this._outsideClickDispatcher=L,this._animationsModuleType=j}create(t){let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),d=new Yv(t);return d.direction=d.direction||this._directionality.value,new ep(o,i,r,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(ur))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=`cdk-overlay-${Qbe++}`,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Ss)),new sC(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||e)(Re(Wbe),Re(lC),Re(gl),Re(Xbe),Re(Zbe),Re(Un),Re(jt),Re(pn),Re(qv),Re(Ou),Re(Kbe),Re(vF,8))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ewe=new ct("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=Me(tp);return()=>e.scrollStrategies.reposition()}});function twe(e){return()=>e.scrollStrategies.reposition()}var nwe={provide:ewe,deps:[tp],useFactory:twe},qq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({providers:[tp,nwe],imports:[Wv,Kv,wR,wR]})}}return e})();function owe(e,n){}var Jv=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var swe=(()=>{class e extends sg{constructor(t,i,r,o,d,g,v,x){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=d,this._ngZone=g,this._overlayRef=v,this._focusMonitor=x,this._platform=Me(no),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Me(Ko),this._injector=Me(Un),this._isDestroyed=!1,this.attachDomPortal=D=>{this._portalOutlet.hasAttached();let R=this._portalOutlet.attachDomPortal(D);return this._contentAttached(),R},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||Po(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Gv(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,i=Gv();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Gv()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||e)(Je(yi),Je(Rq),Je(pn,8),Je(Jv),Je(vR),Je(jt),Je(ep),Je(kq))}}static{this.\u0275cmp=Pt({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Zy(SR,7),i&2){let o;yc(o=_c())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&In("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Cr,Zo],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Nt(0,owe,0,0,"ng-template",0)},dependencies:[SR],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return e})(),np=class{constructor(n,t){this.overlayRef=n,this.config=t,this.closed=new Bt,this.disableClose=t.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Sq(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(n,t){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",t=""){return this.overlayRef.updateSize({width:n,height:t}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},awe=new ct("DialogScrollStrategy",{providedIn:"root",factory:()=>{let e=Me(tp);return()=>e.scrollStrategies.block()}}),lwe=new ct("DialogData"),cwe=new ct("DefaultDialogConfig");var uwe=0,RR=(()=>{class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,o,d,g){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Bt,this._afterOpenedAtThisLevel=new Bt,this._ariaHiddenElements=new Map,this.afterAllClosed=uf(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ys(void 0))),this._scrollStrategy=g}open(t,i){let r=this._defaultOptions||new Jv;i=q(q({},r),i),i.id=i.id||`cdk-dialog-${uwe++}`,i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),d=this._overlay.create(o),g=new np(d,i),v=this._attachContainer(d,g,i);return g.containerInstance=v,this._attachDialogContent(t,g,v,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(g),g.closed.subscribe(()=>this._removeOpenDialog(g,!0)),this.afterOpened.next(g),g}closeAll(){PR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){PR(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),PR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new Yv({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){let o=r.injector||r.viewContainerRef?.injector,d=[{provide:Jv,useValue:r},{provide:np,useValue:i},{provide:ep,useValue:t}],g;r.container?typeof r.container=="function"?g=r.container:(g=r.container.type,d.push(...r.container.providers(r))):g=swe;let v=new rg(g,r.viewContainerRef,Un.create({parent:o||this._injector,providers:d}),r.componentFactoryResolver);return t.attach(v).instance}_attachDialogContent(t,i,r,o){if(t instanceof Xr){let d=this._createInjector(o,i,r,void 0),g={$implicit:o.data,dialogRef:i};o.templateContext&&(g=q(q({},g),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new og(t,null,g,d))}else{let d=this._createInjector(o,i,r,this._injector),g=r.attachComponentPortal(new rg(t,o.viewContainerRef,d,o.componentFactoryResolver));i.componentRef=g,i.componentInstance=g.instance}}_createInjector(t,i,r,o){let d=t.injector||t.viewContainerRef?.injector,g=[{provide:lwe,useValue:t.data},{provide:np,useValue:i}];return t.providers&&(typeof t.providers=="function"?g.push(...t.providers(i,t,r)):g.push(...t.providers)),t.direction&&(!d||!d.get(qv,null,{optional:!0}))&&g.push({provide:qv,useValue:{value:t.direction,change:Dt()}}),Un.create({parent:d||o,providers:g})}_removeOpenDialog(t,i){let r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,d)=>{o?d.setAttribute("aria-hidden",o):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==t&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||e)(Re(tp),Re(Un),Re(cwe,8),Re(e,12),Re(lC),Re(awe))}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function PR(e,n){let t=e.length;for(;t--;)n(e[t])}var Wq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({providers:[RR],imports:[qq,Kv,Nq,Kv]})}}return e})();function dwe(e,n){if(e&1&&(ia(0),Y(1,"ul")(2,"li"),me(3),Z(),Y(4,"li"),me(5),Z(),Y(6,"li"),me(7),Z(),Y(8,"li"),me(9),Z()(),ra()),e&2){let t=ut();he(3),Mt("Username: ",t.authenticator.user.username,""),he(2),Mt("UserID: ",t.authenticator.user.userId,""),he(2),Mt("Email: ",t.userInfo.email,""),he(2),Mt("Email Verified: ",t.userInfo.email_verified,"")}}var cC=class e{constructor(n,t){this.authenticator=n;this.dialogRef=t}userInfo={username:"",email:"",email_verified:"",sub:""};ngOnInit(){this.fetchUserInfo()}fetchUserInfo(){return ne(this,null,function*(){try{let n=yield Os();this.userInfo.username=n.username;let t=yield Dc();this.userInfo.email=t.email||"Email unavailable",this.userInfo.email_verified=t.email_verified}catch(n){console.error("Error fetching user info:",n)}})}closeModal(){console.log("Closing Modal..."),this.dialogRef.close()}static \u0275fac=function(t){return new(t||e)(Je(ir),Je(np))};static \u0275cmp=Pt({type:e,selectors:[["app-my-profile"]],decls:14,vars:1,consts:[["id","myProfileModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),me(5,"Profile"),Z(),Qe(6,"button",5),Z(),Y(7,"div",6)(8,"h1"),me(9,"My profile"),Z(),Nt(10,dwe,10,4,"ng-container",7),Z(),Y(11,"div",8)(12,"button",9),me(13,"Close"),Z()()()()()),t&2&&(he(10),Ce("ngIf",!!i.authenticator.user))},dependencies:[Li],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], app-root[_ngcontent-%COMP%]{height:100%;margin:0}.cdk-overlay-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1050;display:flex;justify-content:center;align-items:center}.cdk-overlay-backdrop[_ngcontent-%COMP%]{background:#00000080;z-index:1040}.cdk-overlay-pane[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1060;pointer-events:auto;width:auto;height:auto}[_nghost-%COMP%]{display:block;width:100%;max-width:500px;height:auto;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a;z-index:1070}"]})};var uC=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=Pt({type:e,selectors:[["app-how-to"]],decls:67,vars:0,consts:[[1,"container"],["src","assets/images/howto1.png","alt","Filter Options"],["src","assets\\images\\howto2.png","alt","Station Information Popup"],["type","button","routerLink","/map",1,"btn","btn-primary","gas-button"]],template:function(t,i){t&1&&(Y(0,"div",0)(1,"h1"),me(2,"How to Use GRASP"),Z(),Y(3,"p"),me(4," Welcome to GRASP, your go-to platform for finding nearby gas stations with up-to-date fuel prices in Puerto Rico. Whether you're trying to find the cheapest fuel or locate a specific gas station, GRASP makes it easy for you. "),Z(),Y(5,"h3"),me(6,"1. Filter the Results:"),Z(),Y(7,"p"),me(8," On the left side of the screen, you\u2019ll find three filters that help you refine your search: "),Z(),Y(9,"ul")(10,"li")(11,"strong"),me(12,"By Price:"),Z(),me(13," Select this option to sort the stations by fuel prices, from lowest to highest."),Z(),Y(14,"li")(15,"strong"),me(16,"By Brand:"),Z(),me(17," Choose a fuel station brand if you prefer a specific one."),Z(),Y(18,"li")(19,"strong"),me(20,"By Gas Type:"),Z(),me(21," Filter by the type of fuel you need, such as Regular, Diesel, or Premium."),Z()(),Qe(22,"img",1),Y(23,"h3"),me(24,"2. View Nearest Stations:"),Z(),Y(25,"p"),me(26," Below the filters, you\u2019ll see a list of the "),Y(27,"strong"),me(28,"Nearest Stations"),Z(),me(29," with their prices. These are the closest stations to your current location based on the filter you have selected. "),Z(),Y(30,"ul")(31,"li"),me(32,"Gulf & Garage Wilmar 91.2"),Z(),Y(33,"li"),me(34,"Mobil - Gas Station 92.7"),Z(),Y(35,"li"),me(36,"TotalEnergies Barrio Cacao Bajo 93.7"),Z(),Y(37,"li"),me(38,"Ecomaxx Patillas El Cerrito 93.9"),Z()(),Y(39,"h3"),me(40,"3. Click on a Station for More Information:"),Z(),Y(41,"p"),me(42," When you click on a station name from the list, a "),Y(43,"strong"),me(44,"popup"),Z(),me(45," will appear showing more details about the station. "),Z(),Y(46,"ul")(47,"li"),me(48,"You\u2019ll see the station\u2019s name, rating, and available fuel types with their prices."),Z(),Y(49,"li"),me(50,"In the popup, you can also click the "),Y(51,"strong"),me(52,"Edit Price"),Z(),me(53," button if you have permission to update the station prices."),Z()(),Qe(54,"img",2),Y(55,"h3"),me(56,"4. Get Directions to the Station:"),Z(),Y(57,"p"),me(58," To get directions to the station, simply click the "),Y(59,"strong"),me(60,"Located in [City Name]"),Z(),me(61," button at the bottom of the popup. This will redirect you to "),Y(62,"strong"),me(63,"Google Maps"),Z(),me(64,", showing you the station's location and guiding you there. "),Z(),Y(65,"button",3),me(66,"<< Back to Map"),Z()())},dependencies:[nm],styles:[".container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block;margin:20px auto}"]})};var hwe=[{path:"map",component:eg},{path:"about-us",component:tx},{path:"my-profile",component:cC},{path:"how-to",component:uC},{path:"**",component:nC}],dC=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=kt({type:e});static \u0275inj=Ot({imports:[BA.forRoot(hwe),BA]})};function pwe(e,n){if(e&1){let t=Lr();Y(0,"div",16)(1,"button",17)(2,"span",18),me(3),Z(),Qe(4,"i",19),Z(),Y(5,"ul",20)(6,"li")(7,"a",21),me(8,"Home"),Z()(),Y(9,"li")(10,"a",22),me(11," Profile "),Z()(),Y(12,"li")(13,"a",23),me(14,"About Us"),Z()(),Y(15,"li")(16,"a",24),me(17,"How To"),Z()(),Y(18,"li")(19,"a",25),dt("click",function(){xi(t);let r=ut();return Si(r.onSignOut())}),me(20,"Sign Out"),Z()()()()}if(e&2){let t=ut();he(3),Ji(t.authenticator.user.username)}}function fwe(e,n){if(e&1){let t=Lr();Y(0,"div",26)(1,"button",17)(2,"span",18),me(3),Z(),Qe(4,"i",19),Z(),Y(5,"ul",20)(6,"li")(7,"a",21),me(8,"Home"),Z()(),Y(9,"li")(10,"a",22),me(11," Profile "),Z()(),Y(12,"li")(13,"a",23),me(14,"About Us"),Z()(),Y(15,"li")(16,"a",24),me(17,"How To"),Z()(),Y(18,"li")(19,"a",25),dt("click",function(){xi(t);let r=ut();return Si(r.onSignOut())}),me(20,"Sign Out"),Z()()()()}if(e&2){let t=ut();he(3),Ji(t.authenticator.user.username)}}function mwe(e,n){if(e&1&&(ia(0),Y(1,"ul")(2,"li"),me(3),Z(),Y(4,"li"),me(5),Z(),Y(6,"li"),me(7),Z()(),ra()),e&2){let t=ut();he(3),Mt("Username: ",t.authenticator.user.username,""),he(2),Mt("Email: ",t.userInfo.email,""),he(2),Mt("Verified User: ",t.userInfo.email_verified,"")}}var hC=class e{constructor(n,t,i){this.authenticator=n;this.router=t;this.dialog=i}userInfo={username:"",email:"",email_verified:"",sub:""};ngOnInit(){this.fetchUserInfo()}onSignOut(){this.authenticator.signOut(),this.router.navigate(["/"])}fetchUserInfo(){return ne(this,null,function*(){try{let n=yield Os();this.userInfo.username=n.username;let t=yield Dc();this.userInfo.email=t.email||"Email unavailable",this.userInfo.email_verified=t.email_verified}catch(n){console.error("Error fetching user info:",n)}})}static \u0275fac=function(t){return new(t||e)(Je(ir),Je(la),Je(RR))};static \u0275cmp=Pt({type:e,selectors:[["navbar"]],decls:20,vars:3,consts:[[1,"navbar"],[1,"container-fluid"],[1,"logo-container"],["src","assets/images/grasp_logoBig.png","alt","Logo","width","70","height","70"],["class","dropdown d-none d-md-inline",4,"ngIf"],["class","btn-group dropstart d-md-none",4,"ngIf"],["id","myProfileModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"dropdown","d-none","d-md-inline"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-info","dropdown-toggle"],[1,"d-none","d-md-inline"],[1,"bi","bi-person-circle","d-md-none"],[1,"dropdown-menu"],["routerLink","/map",1,"dropdown-item"],["data-bs-toggle","modal","data-bs-target","#myProfileModal",1,"dropdown-item"],["routerLink","/about-us",1,"dropdown-item"],["routerLink","/how-to",1,"dropdown-item"],[1,"dropdown-item",3,"click"],[1,"btn-group","dropstart","d-md-none"]],template:function(t,i){t&1&&(Y(0,"nav",0)(1,"div",1)(2,"div",2),Qe(3,"img",3),Y(4,"h1"),me(5,"GRASP"),Z()(),Nt(6,pwe,21,1,"div",4)(7,fwe,21,1,"div",5),Z()(),Y(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h5",10),me(13," My profile"),Z(),Qe(14,"button",11),Z(),Y(15,"div",12),Nt(16,mwe,8,3,"ng-container",13),Z(),Y(17,"div",14)(18,"button",15),me(19,"Close"),Z()()()()()),t&2&&(he(6),Ce("ngIf",i.authenticator.route==="authenticated"),he(),Ce("ngIf",i.authenticator.route==="authenticated"),he(9),Ce("ngIf",!!i.authenticator.user))},dependencies:[Li,nm],styles:[".navbar[_ngcontent-%COMP%]{background-color:#001f3f;color:#fff}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:3px}.logo-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px;margin:0}"]})};var ywe=()=>["username"];function _we(e,n){e&1&&Qe(0,"router-outlet")}var pC=class e{constructor(n){this.router=n}title="GRASP-FrontEnd";showSidebarAndMap=!0;formFields={signUp:{username:{order:1},email:{order:2},password:{order:5},confirm_password:{order:6}}};ngOnInit(){Xi.listen("auth",n=>ne(this,null,function*(){let{event:t}=n.payload;t==="signedIn"&&this.router.navigate(["/map"])})),this.router.events.pipe(jn(n=>n instanceof aa)).subscribe(n=>{this.showSidebarAndMap=n.url!=="/about-us"})}static \u0275fac=function(t){return new(t||e)(Je(la))};static \u0275cmp=Pt({type:e,selectors:[["app-root"]],decls:3,vars:3,consts:[[3,"loginMechanisms","formFields"],["amplifySlot","authenticated"]],template:function(t,i){t&1&&(Qe(0,"navbar"),Y(1,"amplify-authenticator",0),Nt(2,_we,1,0,"ng-template",1),Z()),t&2&&(he(),Ce("loginMechanisms",yl(2,ywe))("formFields",i.formFields))},dependencies:[RA,hR,uq,hC]})};var vwe=["*"];var bwe=["dialog"];var Kq={animation:!0,transitionTimerDelayMs:5},wwe=(()=>{class e{constructor(){this.animation=Kq.animation}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function xwe(e){let{transitionDelay:n,transitionDuration:t}=window.getComputedStyle(e),i=parseFloat(n),r=parseFloat(t);return(i+r)*1e3}function Yq(e){return typeof e=="string"}function OR(e){return e!=null}function Swe(e){return e&&e.then}function Jq(e){return(e||document.body).getBoundingClientRect()}function Cwe(e){return n=>new Zt(t=>{let i=d=>e.run(()=>t.next(d)),r=d=>e.run(()=>t.error(d)),o=()=>e.run(()=>t.complete());return n.subscribe({next:i,error:r,complete:o})})}var Ewe=()=>{},{transitionTimerDelayMs:Iwe}=Kq,fC=new Map,ip=(e,n,t,i)=>{let r=i.context||{},o=fC.get(n);if(o)switch(i.runningTransition){case"continue":return wr;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),fC.delete(n)}let d=t(n,i.animation,r)||Ewe;if(!i.animation||window.getComputedStyle(n).transitionProperty==="none")return e.run(()=>d()),Dt(void 0).pipe(Cwe(e));let g=new Bt,v=new Bt,x=g.pipe(tI(!0));fC.set(n,{transition$:g,complete:()=>{v.next(),v.complete()},context:r});let D=xwe(n);return e.runOutsideAngular(()=>{let R=Nr(n,"transitionend").pipe(Ii(x),jn(({target:j})=>j===n)),L=xy(D+Iwe).pipe(Ii(x));QE(L,R,v).pipe(Ii(x)).subscribe(()=>{fC.delete(n),e.run(()=>{d(),g.next(),g.complete()})})}),g.asObservable()};var Xq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var Qq=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var e9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})(),t9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var Aet=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,n=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||n()):!1})();var Dwe=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function n9(e){let n=Array.from(e.querySelectorAll(Dwe)).filter(t=>t.tabIndex!==-1);return[n[0],n[n.length-1]]}var Twe=(e,n,t,i=!1)=>{e.runOutsideAngular(()=>{let r=Nr(n,"focusin").pipe(Ii(t),Vt(o=>o.target));Nr(n,"keydown").pipe(Ii(t),jn(o=>o.key==="Tab"),Fb(r)).subscribe(([o,d])=>{let[g,v]=n9(n);(d===g||d===n)&&o.shiftKey&&(v.focus(),o.preventDefault()),d===v&&!o.shiftKey&&(g.focus(),o.preventDefault())}),i&&Nr(n,"click").pipe(Ii(t),Fb(r),Vt(o=>o[1])).subscribe(o=>o.focus())})};var Met=new Date(1882,10,12),Pet=new Date(2174,10,25);var Ret=1e3*60*60*24;var FR=1080,Awe=24*FR,Mwe=12*FR+793,Oet=29*Awe+Mwe,ket=11*FR+204;var i9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var r9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})(),Pwe=(()=>{class e{constructor(){this._ngbConfig=Me(wwe),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(t){this._animation=t}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ag=class{constructor(n,t,i){this.nodes=n,this.viewRef=t,this.componentRef=i}};var Rwe=(()=>{class e{constructor(){this._document=Me(pn)}hide(){let t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:d}=r;if(t>0){let g=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${g+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=d),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Owe=(()=>{class e{constructor(){this._nativeElement=Me(yi).nativeElement,this._zone=Me(jt),this._injector=Me(Un)}ngOnInit(){Po(()=>ip(this._zone,this._nativeElement,(t,i)=>{i&&Jq(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"}),{injector:this._injector,phase:lc.MixedReadWrite})}hide(){return ip(this._zone,this._nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(Ro("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),na("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Zo],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})(),mC=class{update(n){}close(n){}dismiss(n){}},kwe=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Nwe=["animation","backdropClass"],kR=class{_applyWindowOptions(n,t){kwe.forEach(i=>{OR(t[i])&&(n[i]=t[i])})}_applyBackdropOptions(n,t){Nwe.forEach(i=>{OR(t[i])&&(n[i]=t[i])})}update(n){this._applyWindowOptions(this._windowCmptRef.instance,n),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,n)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Ii(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Ii(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(n,t,i,r){this._windowCmptRef=n,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Bt,this._dismissed=new Bt,this._hidden=new Bt,n.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,d)=>{this._resolve=o,this._reject=d}),this.result.then(null,()=>{})}close(n){this._windowCmptRef&&(this._closed.next(n),this._resolve(n),this._removeModalElements())}_dismiss(n){this._dismissed.next(n),this._reject(n),this._removeModalElements()}dismiss(n){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(n);else{let t=this._beforeDismiss();Swe(t)?t.then(i=>{i!==!1&&this._dismiss(n)},()=>{}):t!==!1&&this._dismiss(n)}}_removeModalElements(){let n=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Dt(void 0);n.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Cy(n,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},NR=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(NR||{}),Fwe=(()=>{class e{constructor(){this._document=Me(pn),this._elRef=Me(yi),this._zone=Me(jt),this._injector=Me(Un),this._closed$=new Bt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new kn,this.shown=new Bt,this.hidden=new Bt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Yq(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,Po(()=>this._show(),{injector:this._injector,phase:lc.MixedReadWrite})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=ip(this._zone,t,()=>t.classList.remove("show"),i),o=ip(this._zone,this._dialogEl.nativeElement,()=>{},i),d=Cy(r,o);return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){let t={animation:this.animation,runningTransition:"continue"},i=ip(this._zone,this._elRef.nativeElement,(o,d)=>{d&&Jq(o),o.classList.add("show")},t),r=ip(this._zone,this._dialogEl.nativeElement,()=>{},t);Cy(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Nr(t,"keydown").pipe(Ii(this._closed$),jn(r=>r.key==="Escape")).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(NR.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;Nr(this._dialogEl.nativeElement,"mousedown").pipe(Ii(this._closed$),Kn(()=>i=!1),Yi(()=>Nr(t,"mouseup").pipe(Ii(this._closed$),fo(1))),jn(({target:r})=>t===r)).subscribe(()=>{i=!0}),Nr(t,"click").pipe(Ii(this._closed$)).subscribe(({target:r})=>{t===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(NR.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){let i=t.querySelector("[ngbAutofocus]"),r=n9(t)[0];(i||r||t).focus()}}_restoreFocus(){let t=this._document.body,i=this._elWithFocus,r;i&&i.focus&&t.contains(i)?r=i:r=t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ip(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Pt({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&Zy(bwe,7),i&2){let o;yc(o=_c())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(In("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ro("modal d-block"+(r.windowClass?" "+r.windowClass:"")),na("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Zo],ngContentSelectors:vwe,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(bs(),Y(0,"div",1,0)(2,"div",2),ws(3),Z()()),i&2&&Ro("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return e})(),Lwe=(()=>{class e{constructor(){this._applicationRef=Me(Ss),this._injector=Me(Un),this._environmentInjector=Me(ur),this._document=Me(pn),this._scrollBar=Me(Rwe),this._activeWindowCmptHasChanged=new Bt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new kn;let t=Me(jt);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];Twe(t,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){let o=r.container instanceof HTMLElement?r.container:OR(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let d=new mC;t=r.injector||t;let g=t.get(ur,null)||this._environmentInjector,v=this._getContentRef(t,g,i,d,r),x=r.backdrop!==!1?this._attachBackdrop(o):void 0,D=this._attachWindowComponent(o,v.nodes),R=new kR(D,v,x,r.beforeDismiss);return this._registerModalRef(R),this._registerWindowCmpt(D),R.hidden.pipe(fo(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),d.close=L=>{R.close(L)},d.dismiss=L=>{R.dismiss(L)},d.update=L=>{R.update(L)},R.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),x&&x.instance&&x.changeDetectorRef.detectChanges(),D.changeDetectorRef.detectChanges(),R}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=h1(Owe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=h1(Fwe,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,o,d){return r?r instanceof Xr?this._createFromTemplateRef(r,o):Yq(r)?this._createFromString(r):this._createFromComponent(t,i,r,o,d):new ag([])}_createFromTemplateRef(t,i){let r={$implicit:i,close(d){i.close(d)},dismiss(d){i.dismiss(d)}},o=t.createEmbeddedView(r);return this._applicationRef.attachView(o),new ag([o.rootNodes],o)}_createFromString(t){let i=this._document.createTextNode(`${t}`);return new ag([[i]])}_createFromComponent(t,i,r,o,d){let g=Un.create({providers:[{provide:mC,useValue:o}],parent:t}),v=h1(r,{environmentInjector:i,elementInjector:g}),x=v.location.nativeElement;return d.scrollable&&x.classList.add("component-host-scrollable"),this._applicationRef.attachView(v.hostView),new ag([[x]],v.hostView,v)}_setAriaHidden(t){let i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){let i=()=>{let r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{let i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Bwe=(()=>{class e{constructor(){this._injector=Me(Un),this._modalStack=Me(Lwe),this._config=Me(Pwe)}open(t,i={}){let r=q(Ie(q({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=Be({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),o9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({providers:[Bwe]})}}return e})();var s9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var a9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var l9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var c9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var u9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var d9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var h9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var p9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var f9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var Net=new ct("live announcer delay",{providedIn:"root",factory:()=>100});var m9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})();var g9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({})}}return e})(),Uwe=[Xq,Qq,e9,t9,i9,r9,o9,s9,g9,a9,l9,c9,u9,d9,h9,p9,f9,m9],y9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=kt({type:e})}static{this.\u0275inj=Ot({imports:[Uwe,Xq,Qq,e9,t9,i9,r9,o9,s9,g9,a9,l9,c9,u9,d9,h9,p9,f9,m9]})}}return e})();sv.configure({Auth:{Cognito:{userPoolId:Ua.cognitoConfig.userPoolId,userPoolClientId:Ua.cognitoConfig.clientId}}});var gC=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=kt({type:e,bootstrap:[pC]});static \u0275inj=Ot({providers:[mB()],imports:[EB,dC,vq,dq,Wq,y9,XB]})};CB().bootstrapModule(gC,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
