var pq=Object.create;var h_=Object.defineProperty,fq=Object.defineProperties,mq=Object.getOwnPropertyDescriptor,gq=Object.getOwnPropertyDescriptors,yq=Object.getOwnPropertyNames,d_=Object.getOwnPropertySymbols,vq=Object.getPrototypeOf,d1=Object.prototype.hasOwnProperty,hP=Object.prototype.propertyIsEnumerable;var dP=(e,t,n)=>t in e?h_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Z=(e,t)=>{for(var n in t||={})d1.call(t,n)&&dP(e,n,t[n]);if(d_)for(var n of d_(t))hP.call(t,n)&&dP(e,n,t[n]);return e},Me=(e,t)=>fq(e,gq(t));var dl=(e,t)=>{var n={};for(var r in e)d1.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&d_)for(var r of d_(e))t.indexOf(r)<0&&hP.call(e,r)&&(n[r]=e[r]);return n};var fe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),pP=(e,t)=>{for(var n in t)h_(e,n,{get:t[n],enumerable:!0})},_q=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of yq(t))!d1.call(e,a)&&a!==n&&h_(e,a,{get:()=>t[a],enumerable:!(r=mq(t,a))||r.enumerable});return e};var qm=(e,t,n)=>(n=e!=null?pq(vq(e)):{},_q(t||!e||!e.__esModule?h_(n,"default",{value:e,enumerable:!0}):n,e));var se=(e,t,n)=>new Promise((r,a)=>{var s=w=>{try{_(n.next(w))}catch(C){a(C)}},h=w=>{try{_(n.throw(w))}catch(C){a(C)}},_=w=>w.done?r(w.value):Promise.resolve(w.value).then(s,h);_((n=n.apply(e,t)).next())});var tT=fe((QE,eT)=>{"use strict";(function(e,t){typeof QE=="object"&&typeof eT<"u"?eT.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.maplibregl=t())})(QE,function(){"use strict";var e={},t={};function n(a,s,h){if(t[a]=h,a==="index"){var _="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",w={};return t.shared(w),t.index(e,w),typeof window<"u"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([_],{type:"text/javascript"}))),e}}n("shared",["exports"],function(a){"use strict";function s(l,o,c,d){return new(c||(c=Promise))(function(m,v){function x(A){try{I(d.next(A))}catch(M){v(M)}}function b(A){try{I(d.throw(A))}catch(M){v(M)}}function I(A){var M;A.done?m(A.value):(M=A.value,M instanceof c?M:new c(function(R){R(M)})).then(x,b)}I((d=d.apply(l,o||[])).next())})}function h(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}typeof SuppressedError=="function"&&SuppressedError;var _=w;function w(l,o){this.x=l,this.y=o}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,c=l.y-this.y;return o*o+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),c=Math.sin(l),d=c*this.x+o*this.y;return this.x=o*this.x-c*this.y,this.y=d,this},_rotateAround:function(l,o){var c=Math.cos(l),d=Math.sin(l),m=o.y+d*(this.x-o.x)+c*(this.y-o.y);return this.x=o.x+c*(this.x-o.x)-d*(this.y-o.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(l){return l instanceof w?l:Array.isArray(l)?new w(l[0],l[1]):l};var C=h(_),T=F;function F(l,o,c,d){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=c,this.p2y=d}F.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(o===void 0&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,d=0;d<8;d++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<o)return c;var v=this.sampleCurveDerivativeX(c);if(Math.abs(v)<1e-6)break;c-=m/v}var x=0,b=1;for(c=l,d=0;d<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<o));d++)l>m?x=c:b=c,c=.5*(b-x)+x;return c},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var B=h(T);let $,ee;function ie(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function ye(){if(ee==null&&(ee=!1,ie())){let o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let d=0;d<5*5;d++){let m=4*d;o.fillStyle=`rgb(${m},${m+1},${m+2})`,o.fillRect(d%5,Math.floor(d/5),1,1)}let c=o.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){ee=!0;break}}}return ee||!1}function ve(l,o,c,d){let m=new B(l,o,c,d);return v=>m.solve(v)}let Ae=ve(.25,.1,.25,1);function ke(l,o,c){return Math.min(c,Math.max(o,l))}function Ve(l,o,c){let d=c-o,m=((l-o)%d+d)%d+o;return m===o?c:m}function Ge(l,...o){for(let c of o)for(let d in c)l[d]=c[d];return l}let it=1;function ut(l,o,c){let d={};for(let m in l)d[m]=o.call(this,l[m],m,l);return d}function Mt(l,o,c){let d={};for(let m in l)o.call(this,l[m],m,l)&&(d[m]=l[m]);return d}function nt(l){return Array.isArray(l)?l.map(nt):typeof l=="object"&&l?ut(l,nt):l}let Nn={};function vt(l){Nn[l]||(typeof console<"u"&&console.warn(l),Nn[l]=!0)}function Ut(l,o,c){return(c.y-l.y)*(o.x-l.x)>(o.y-l.y)*(c.x-l.x)}function Lt(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let ar=null;function Cr(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}let Xo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Zr(l,o,c,d,m){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let v=new VideoFrame(l,{timestamp:0});try{let x=v?.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);let b=x.startsWith("BGR"),I=new Uint8ClampedArray(d*m*4);if(yield v.copyTo(I,function(A,M,R,O,U){let j=4*Math.max(-M,0),q=(Math.max(0,R)-R)*O*4+j,Y=4*O,te=Math.max(0,M),ge=Math.max(0,R);return{rect:{x:te,y:ge,width:Math.min(A.width,M+O)-te,height:Math.min(A.height,R+U)-ge},layout:[{offset:q,stride:Y}]}}(l,o,c,d,m)),b)for(let A=0;A<I.length;A+=4){let M=I[A];I[A]=I[A+2],I[A+2]=M}return I}finally{v.close()}})}let Mr,Bn,Kr="AbortError";function _r(){return new Error(Kr)}let no={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ci(l){return no.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}let Kt="global-dispatcher";class Vn extends Error{constructor(o,c,d,m){super(`AJAXError: ${c} (${o}): ${d}`),this.status=o,this.statusText=c,this.url=d,this.body=m}}let Bi=()=>Lt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Cs=function(l,o){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){let d=Ci(l.url);if(d)return d(l,o);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:Kt},o)}if(!(/^file:/.test(c=l.url)||/^file:/.test(Bi())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return s(this,void 0,void 0,function*(){let v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Bi(),signal:m.signal});d.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");let x=yield fetch(v);if(!x.ok){let A=yield x.blob();throw new Vn(x.status,x.statusText,d.url,A)}let b;b=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();let I=yield b;if(m.signal.aborted)throw _r();return{data:I,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(l,o);if(Lt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:Kt},o)}var c;return function(d,m){return new Promise((v,x)=>{var b;let I=new XMLHttpRequest;I.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(I.responseType="arraybuffer");for(let A in d.headers)I.setRequestHeader(A,d.headers[A]);d.type==="json"&&(I.responseType="text",!((b=d.headers)===null||b===void 0)&&b.Accept||I.setRequestHeader("Accept","application/json")),I.withCredentials=d.credentials==="include",I.onerror=()=>{x(new Error(I.statusText))},I.onload=()=>{if(!m.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let A=I.response;if(d.type==="json")try{A=JSON.parse(I.response)}catch(M){return void x(M)}v({data:A,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{let A=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});x(new Vn(I.status,I.statusText,d.url,A))}},m.signal.addEventListener("abort",()=>{I.abort(),x(_r())}),I.send(d.body)})}(l,o)};function Jo(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;let o=new URL(l),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function Ws(l,o,c){c[l]&&c[l].indexOf(o)!==-1||(c[l]=c[l]||[],c[l].push(o))}function Is(l,o,c){if(c&&c[l]){let d=c[l].indexOf(o);d!==-1&&c[l].splice(d,1)}}class Zs{constructor(o,c={}){Ge(this,c),this.type=o}}class Ks extends Zs{constructor(o,c={}){super("error",Ge({error:o},c))}}class Ul{on(o,c){return this._listeners=this._listeners||{},Ws(o,c,this._listeners),this}off(o,c){return Is(o,c,this._listeners),Is(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Ws(o,c,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,c){typeof o=="string"&&(o=new Zs(o,c||{}));let d=o.type;if(this.listens(d)){o.target=this;let m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(let b of m)b.call(this,o);let v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(let b of v)Is(d,b,this._oneTimeListeners),b.call(this,o);let x=this._eventedParent;x&&(Ge(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof Ks&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Wa=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function mu(l,o){let c={};for(let d in l)d!=="ref"&&(c[d]=l[d]);return Wa.forEach(d=>{d in o&&(c[d]=o[d])}),c}function vn(l,o){if(Array.isArray(l)){if(!Array.isArray(o)||l.length!==o.length)return!1;for(let c=0;c<l.length;c++)if(!vn(l[c],o[c]))return!1;return!0}if(typeof l=="object"&&l!==null&&o!==null){if(typeof o!="object"||Object.keys(l).length!==Object.keys(o).length)return!1;for(let c in l)if(!vn(l[c],o[c]))return!1;return!0}return l===o}function ur(l,o){l.push(o)}function gu(l,o,c){ur(c,{command:"addSource",args:[l,o[l]]})}function Ys(l,o,c){ur(o,{command:"removeSource",args:[l]}),c[l]=!0}function Es(l,o,c,d){Ys(l,c,d),gu(l,o,c)}function Bl(l,o,c){let d;for(d in l[c])if(Object.prototype.hasOwnProperty.call(l[c],d)&&d!=="data"&&!vn(l[c][d],o[c][d]))return!1;for(d in o[c])if(Object.prototype.hasOwnProperty.call(o[c],d)&&d!=="data"&&!vn(l[c][d],o[c][d]))return!1;return!0}function ro(l,o,c,d,m,v){l=l||{},o=o||{};for(let x in l)Object.prototype.hasOwnProperty.call(l,x)&&(vn(l[x],o[x])||c.push({command:v,args:[d,x,o[x],m]}));for(let x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(l,x)&&(vn(l[x],o[x])||c.push({command:v,args:[d,x,o[x],m]}))}function yu(l){return l.id}function vu(l,o){return l[o.id]=o,l}class ze{constructor(o,c,d,m){this.message=(o?`${o}: `:"")+d,m&&(this.identifier=m),c!=null&&c.__line__&&(this.line=c.__line__)}}function Qo(l,...o){for(let c of o)for(let d in c)l[d]=c[d];return l}class gi extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class es{constructor(o,c=[]){this.parent=o,this.bindings={};for(let[d,m]of c)this.bindings[d]=m}concat(o){return new es(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}let Xs={kind:"null"},$e={kind:"number"},$t={kind:"string"},Ct={kind:"boolean"},Ii={kind:"color"},Io={kind:"object"},Rt={kind:"value"},ts={kind:"collator"},Ts={kind:"formatted"},Js={kind:"padding"},ns={kind:"resolvedImage"},Q={kind:"variableAnchorOffsetCollection"};function z(l,o){return{kind:"array",itemType:l,N:o}}function L(l){if(l.kind==="array"){let o=L(l.itemType);return typeof l.N=="number"?`array<${o}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${o}>`}return l.kind}let G=[Xs,$e,$t,Ct,Ii,Ts,Io,z(Rt),Js,ns,Q];function X(l,o){if(o.kind==="error")return null;if(l.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!X(l.itemType,o.itemType))&&(typeof l.N!="number"||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if(l.kind==="value"){for(let c of G)if(!X(c,o))return null}}return`Expected ${L(l)} but found ${L(o)} instead.`}function ce(l,o){return o.some(c=>c.kind===l.kind)}function de(l,o){return o.some(c=>c==="null"?l===null:c==="array"?Array.isArray(l):c==="object"?l&&!Array.isArray(l)&&typeof l=="object":c===typeof l)}function me(l,o){return l.kind==="array"&&o.kind==="array"?l.itemType.kind===o.itemType.kind&&typeof l.N=="number":l.kind===o.kind}let oe=.96422,Ee=.82521,Re=4/29,be=6/29,Ue=3*be*be,pt=be*be*be,yt=Math.PI/180,hn=180/Math.PI;function Nt(l){return(l%=360)<0&&(l+=360),l}function pn([l,o,c,d]){let m,v,x=Ir((.2225045*(l=Yt(l))+.7168786*(o=Yt(o))+.0606169*(c=Yt(c)))/1);l===o&&o===c?m=v=x:(m=Ir((.4360747*l+.3850649*o+.1430804*c)/oe),v=Ir((.0139322*l+.0971045*o+.7141733*c)/Ee));let b=116*x-16;return[b<0?0:b,500*(m-x),200*(x-v),d]}function Yt(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Ir(l){return l>pt?Math.pow(l,1/3):l/Ue+Re}function dr([l,o,c,d]){let m=(l+16)/116,v=isNaN(o)?m:m+o/500,x=isNaN(c)?m:m-c/200;return m=1*An(m),v=oe*An(v),x=Ee*An(x),[qt(3.1338561*v-1.6168667*m-.4906146*x),qt(-.9787684*v+1.9161415*m+.033454*x),qt(.0719453*v-.2289914*m+1.4052427*x),d]}function qt(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function An(l){return l>be?l*l*l:Ue*(l-Re)}function rr(l){return parseInt(l.padEnd(2,l),16)/255}function Lr(l,o){return Yr(o?l/100:l,0,1)}function Yr(l,o,c){return Math.min(Math.max(o,l),c)}function yi(l){return!l.some(Number.isNaN)}let Vl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Mn{constructor(o,c,d,m=1,v=!0){this.r=o,this.g=c,this.b=d,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[o,c,d,m]))}static parse(o){if(o instanceof Mn)return o;if(typeof o!="string")return;let c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];let m=Vl[d];if(m){let[x,b,I]=m;return[x/255,b/255,I/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){let x=d.length<6?1:2,b=1;return[rr(d.slice(b,b+=x)),rr(d.slice(b,b+=x)),rr(d.slice(b,b+=x)),rr(d.slice(b,b+x)||"ff")]}if(d.startsWith("rgb")){let x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){let[b,I,A,M,R,O,U,j,q,Y,te,ge]=x,le=[M||" ",U||" ",Y].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){let pe=[A,O,q].join(""),Ie=pe==="%%%"?100:pe===""?255:0;if(Ie){let Ne=[Yr(+I/Ie,0,1),Yr(+R/Ie,0,1),Yr(+j/Ie,0,1),te?Lr(+te,ge):1];if(yi(Ne))return Ne}}return}}let v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){let[x,b,I,A,M,R,O,U,j]=v,q=[I||" ",M||" ",O].join("");if(q==="  "||q==="  /"||q===",,"||q===",,,"){let Y=[+b,Yr(+A,0,100),Yr(+R,0,100),U?Lr(+U,j):1];if(yi(Y))return function([te,ge,le,pe]){function Ie(Ne){let Xe=(Ne+te/30)%12,_t=ge*Math.min(le,1-le);return le-_t*Math.max(-1,Math.min(Xe-3,9-Xe,1))}return te=Nt(te),ge/=100,le/=100,[Ie(0),Ie(8),Ie(4),pe]}(Y)}}}(o);return c?new Mn(...c,!1):void 0}get rgb(){let{r:o,g:c,b:d,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[o/v,c/v,d/v,m])}get hcl(){return this.overwriteGetter("hcl",function(o){let[c,d,m,v]=pn(o),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?Nt(Math.atan2(m,d)*hn):NaN,x,c,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",pn(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){let[o,c,d,m]=this.rgb;return`rgba(${[o,c,d].map(v=>Math.round(255*v)).join(",")},${m})`}}Mn.black=new Mn(0,0,0,1),Mn.white=new Mn(1,1,1,1),Mn.transparent=new Mn(0,0,0,0),Mn.red=new Mn(1,0,0,1);class Of{constructor(o,c,d){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lf{constructor(o,c,d,m,v){this.text=o,this.image=c,this.scale=d,this.fontStack=m,this.textColor=v}}class Vi{constructor(o){this.sections=o}static fromString(o){return new Vi([new Lf(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Vi?o:Vi.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class ji{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ji)return o;if(typeof o=="number")return new ji([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(let c of o)if(typeof c!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new ji(o)}}toString(){return JSON.stringify(this.values)}}let Yb=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class io{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof io)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){let d=o[c],m=o[c+1];if(typeof d!="string"||!Yb.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new io(o)}}toString(){return JSON.stringify(this.values)}}class $i{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new $i({name:o,available:!1}):null}}function jl(l,o,c,d){return typeof l=="number"&&l>=0&&l<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[l,o,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[l,o,c,d]:[l,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Za(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Mn||l instanceof Of||l instanceof Vi||l instanceof ji||l instanceof io||l instanceof $i)return!0;if(Array.isArray(l)){for(let o of l)if(!Za(o))return!1;return!0}if(typeof l=="object"){for(let o in l)if(!Za(l[o]))return!1;return!0}return!1}function Er(l){if(l===null)return Xs;if(typeof l=="string")return $t;if(typeof l=="boolean")return Ct;if(typeof l=="number")return $e;if(l instanceof Mn)return Ii;if(l instanceof Of)return ts;if(l instanceof Vi)return Ts;if(l instanceof ji)return Js;if(l instanceof io)return Q;if(l instanceof $i)return ns;if(Array.isArray(l)){let o=l.length,c;for(let d of l){let m=Er(d);if(c){if(c===m)continue;c=Rt;break}c=m}return z(c||Rt,o)}return Io}function _u(l){let o=typeof l;return l===null?"":o==="string"||o==="number"||o==="boolean"?String(l):l instanceof Mn||l instanceof Vi||l instanceof ji||l instanceof io||l instanceof $i?l.toString():JSON.stringify(l)}class Eo{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(o.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Za(o[1]))return c.error("invalid value");let d=o[1],m=Er(d),v=c.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new Eo(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xr{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}let Jd={string:$t,number:$e,boolean:Ct,object:Io};class To{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d,m=1,v=o[0];if(v==="array"){let b,I;if(o.length>2){let A=o[1];if(typeof A!="string"||!(A in Jd)||A==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);b=Jd[A],m++}else b=Rt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);I=o[2],m++}d=z(b,I)}else{if(!Jd[v])throw new Error(`Types doesn't contain name = ${v}`);d=Jd[v]}let x=[];for(;m<o.length;m++){let b=c.parse(o[m],m,Rt);if(!b)return null;x.push(b)}return new To(d,x)}evaluate(o){for(let c=0;c<this.args.length;c++){let d=this.args[c].evaluate(o);if(!X(this.type,Er(d)))return d;if(c===this.args.length-1)throw new xr(`Expected value to be of type ${L(this.type)}, but found ${L(Er(d))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}let zf={"to-boolean":Ct,"to-color":Ii,"to-number":$e,"to-string":$t};class Do{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d=o[0];if(!zf[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&o.length!==2)return c.error("Expected one argument.");let m=zf[d],v=[];for(let x=1;x<o.length;x++){let b=c.parse(o[x],x,Rt);if(!b)return null;v.push(b)}return new Do(m,v)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,d;for(let m of this.args){if(c=m.evaluate(o),d=null,c instanceof Mn)return c;if(typeof c=="string"){let v=o.parseColor(c);if(v)return v}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:jl(c[0],c[1],c[2],c[3]),!d))return new Mn(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new xr(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let d of this.args){c=d.evaluate(o);let m=ji.parse(c);if(m)return m}throw new xr(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let d of this.args){c=d.evaluate(o);let m=io.parse(c);if(m)return m}throw new xr(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let d of this.args){if(c=d.evaluate(o),c===null)return 0;let m=Number(c);if(!isNaN(m))return m}throw new xr(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Vi.fromString(_u(this.args[0].evaluate(o)));case"resolvedImage":return $i.fromString(_u(this.args[0].evaluate(o)));default:return _u(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}let Xb=["Unknown","Point","LineString","Polygon"];class Qd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xb[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache[o];return c||(c=this._parseColorCache[o]=Mn.parse(o)),c}}class Ka{constructor(o,c,d=[],m,v=new es,x=[]){this.registry=o,this.path=d,this.key=d.map(b=>`[${b}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=c}parse(o,c,d,m,v={}){return c?this.concat(c,d,m)._parse(o,v):this._parse(o,v)}_parse(o,c){function d(m,v,x){return x==="assert"?new To(v,[m]):x==="coerce"?new Do(v,[m]):m}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let m=o[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let v=this.registry[m];if(v){let x=v.parse(o,this);if(!x)return null;if(this.expectedType){let b=this.expectedType,I=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||I.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(b.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(b,I))return null}else x=d(x,b,c.typeAnnotation||"coerce");else x=d(x,b,c.typeAnnotation||"coerce");else x=d(x,b,c.typeAnnotation||"coerce");else x=d(x,b,c.typeAnnotation||"assert")}if(!(x instanceof Eo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){let b=new Qd;try{x=new Eo(x.type,x.evaluate(b))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,d){let m=typeof o=="number"?this.path.concat(o):this.path,v=d?this.scope.concat(d):this.scope;return new Ka(this.registry,this._isConstant,m,c||null,v,this.errors)}error(o,...c){let d=`${this.key}${c.map(m=>`[${m}]`).join("")}`;this.errors.push(new gi(d,o))}checkSubtype(o,c){let d=X(o,c);return d&&this.error(d),d}}class Qs{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(let c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);let d=[];for(let v=1;v<o.length-1;v+=2){let x=o[v];if(typeof x!="string")return c.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return c.error("Variable names must contain only alphanumeric characters or '_'.",v);let b=c.parse(o[v+1],v+1);if(!b)return null;d.push([x,b])}let m=c.parse(o[o.length-1],o.length-1,c.expectedType,d);return m?new Qs(d,m):null}outputDefined(){return this.result.outputDefined()}}class _n{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let d=o[1];return c.scope.has(d)?new _n(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Uf{constructor(o,c,d){this.type=o,this.index=c,this.input=d}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);let d=c.parse(o[1],1,$e),m=c.parse(o[2],2,z(c.expectedType||Rt));return d&&m?new Uf(m.type.itemType,d,m):null}evaluate(o){let c=this.index.evaluate(o),d=this.input.evaluate(o);if(c<0)throw new xr(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new xr(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new xr(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Bf{constructor(o,c){this.type=Ct,this.needle=o,this.haystack=c}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);let d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,Rt);return d&&m?ce(d.type,[Ct,$t,$e,Xs,Rt])?new Bf(d,m):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(d.type)} instead`):null}evaluate(o){let c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!d)return!1;if(!de(c,["boolean","string","number","null"]))throw new xr(`Expected first argument to be of type boolean, string, number or null, but found ${L(Er(c))} instead.`);if(!de(d,["string","array"]))throw new xr(`Expected second argument to be of type array or string, but found ${L(Er(d))} instead.`);return d.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class $l{constructor(o,c,d){this.type=$e,this.needle=o,this.haystack=c,this.fromIndex=d}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);let d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,Rt);if(!d||!m)return null;if(!ce(d.type,[Ct,$t,$e,Xs,Rt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${L(d.type)} instead`);if(o.length===4){let v=c.parse(o[3],3,$e);return v?new $l(d,m,v):null}return new $l(d,m)}evaluate(o){let c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!de(c,["boolean","string","number","null"]))throw new xr(`Expected first argument to be of type boolean, string, number or null, but found ${L(Er(c))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(o)),de(d,["string"])){let v=d.indexOf(c,m);return v===-1?-1:[...d.slice(0,v)].length}if(de(d,["array"]))return d.indexOf(c,m);throw new xr(`Expected second argument to be of type array or string, but found ${L(Er(d))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Vf{constructor(o,c,d,m,v,x){this.inputType=o,this.type=c,this.input=d,this.cases=m,this.outputs=v,this.otherwise=x}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let d,m;c.expectedType&&c.expectedType.kind!=="value"&&(m=c.expectedType);let v={},x=[];for(let A=2;A<o.length-1;A+=2){let M=o[A],R=o[A+1];Array.isArray(M)||(M=[M]);let O=c.concat(A);if(M.length===0)return O.error("Expected at least one branch label.");for(let j of M){if(typeof j!="number"&&typeof j!="string")return O.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return O.error("Numeric branch labels must be integer values.");if(d){if(O.checkSubtype(d,Er(j)))return null}else d=Er(j);if(v[String(j)]!==void 0)return O.error("Branch labels must be unique.");v[String(j)]=x.length}let U=c.parse(R,A,m);if(!U)return null;m=m||U.type,x.push(U)}let b=c.parse(o[1],1,Rt);if(!b)return null;let I=c.parse(o[o.length-1],o.length-1,m);return I?b.type.kind!=="value"&&c.concat(1).checkSubtype(d,b.type)?null:new Vf(d,m,b,v,x,I):null}evaluate(o){let c=this.input.evaluate(o);return(Er(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class eh{constructor(o,c,d){this.type=o,this.branches=c,this.otherwise=d}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);let m=[];for(let x=1;x<o.length-1;x+=2){let b=c.parse(o[x],x,Ct);if(!b)return null;let I=c.parse(o[x+1],x+1,d);if(!I)return null;m.push([b,I]),d=d||I.type}let v=c.parse(o[o.length-1],o.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new eh(d,m,v)}evaluate(o){for(let[c,d]of this.branches)if(c.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(let[c,d]of this.branches)o(c),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class xu{constructor(o,c,d,m){this.type=o,this.input=c,this.beginIndex=d,this.endIndex=m}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);let d=c.parse(o[1],1,Rt),m=c.parse(o[2],2,$e);if(!d||!m)return null;if(!ce(d.type,[z(Rt),$t,Rt]))return c.error(`Expected first argument to be of type array or string, but found ${L(d.type)} instead`);if(o.length===4){let v=c.parse(o[3],3,$e);return v?new xu(d.type,d,m,v):null}return new xu(d.type,d,m)}evaluate(o){let c=this.input.evaluate(o),d=this.beginIndex.evaluate(o),m;if(this.endIndex&&(m=this.endIndex.evaluate(o)),de(c,["string"]))return[...c].slice(d,m).join("");if(de(c,["array"]))return c.slice(d,m);throw new xr(`Expected first argument to be of type array or string, but found ${L(Er(c))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function th(l,o){let c=l.length-1,d,m,v=0,x=c,b=0;for(;v<=x;)if(b=Math.floor((v+x)/2),d=l[b],m=l[b+1],d<=o){if(b===c||o<m)return b;v=b+1}else{if(!(d>o))throw new xr("Input is not a number.");x=b-1}return 0}class ql{constructor(o,c,d){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(let[m,v]of d)this.labels.push(m),this.outputs.push(v)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");let d=c.parse(o[1],1,$e);if(!d)return null;let m=[],v=null;c.expectedType&&c.expectedType.kind!=="value"&&(v=c.expectedType);for(let x=1;x<o.length;x+=2){let b=x===1?-1/0:o[x],I=o[x+1],A=x,M=x+1;if(typeof b!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(m.length&&m[m.length-1][0]>=b)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);let R=c.parse(I,M,v);if(!R)return null;v=v||R.type,m.push([b,R])}return new ql(v,d,m)}evaluate(o){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);let m=this.input.evaluate(o);if(m<=c[0])return d[0].evaluate(o);let v=c.length;return m>=c[v-1]?d[v-1].evaluate(o):d[th(c,m)].evaluate(o)}eachChild(o){o(this.input);for(let c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function cv(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Jb=uv;function uv(l,o,c,d){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=o,this.p2x=c,this.p2y=d}uv.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,o){if(o===void 0&&(o=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,d=0;d<8;d++){var m=this.sampleCurveX(c)-l;if(Math.abs(m)<o)return c;var v=this.sampleCurveDerivativeX(c);if(Math.abs(v)<1e-6)break;c-=m/v}var x=0,b=1;for(c=l,d=0;d<20&&(m=this.sampleCurveX(c),!(Math.abs(m-l)<o));d++)l>m?x=c:b=c,c=.5*(b-x)+x;return c},solve:function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))}};var Qb=cv(Jb);function Ya(l,o,c){return l+c*(o-l)}function wu(l,o,c){return l.map((d,m)=>Ya(d,o[m],c))}let Ei={number:Ya,color:function(l,o,c,d="rgb"){switch(d){case"rgb":{let[m,v,x,b]=wu(l.rgb,o.rgb,c);return new Mn(m,v,x,b,!1)}case"hcl":{let[m,v,x,b]=l.hcl,[I,A,M,R]=o.hcl,O,U;if(isNaN(m)||isNaN(I))isNaN(m)?isNaN(I)?O=NaN:(O=I,x!==1&&x!==0||(U=A)):(O=m,M!==1&&M!==0||(U=v));else{let ge=I-m;I>m&&ge>180?ge-=360:I<m&&m-I>180&&(ge+=360),O=m+c*ge}let[j,q,Y,te]=function([ge,le,pe,Ie]){return ge=isNaN(ge)?0:ge*yt,dr([pe,Math.cos(ge)*le,Math.sin(ge)*le,Ie])}([O,U??Ya(v,A,c),Ya(x,M,c),Ya(b,R,c)]);return new Mn(j,q,Y,te,!1)}case"lab":{let[m,v,x,b]=dr(wu(l.lab,o.lab,c));return new Mn(m,v,x,b,!1)}}},array:wu,padding:function(l,o,c){return new ji(wu(l.values,o.values,c))},variableAnchorOffsetCollection:function(l,o,c){let d=l.values,m=o.values;if(d.length!==m.length)throw new xr(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${o.toString()}`);let v=[];for(let x=0;x<d.length;x+=2){if(d[x]!==m[x])throw new xr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${m[x]}`);v.push(d[x]);let[b,I]=d[x+1],[A,M]=m[x+1];v.push([Ya(b,A,c),Ya(I,M,c)])}return new io(v)}};class Ti{constructor(o,c,d,m,v){this.type=o,this.operator=c,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(let[x,b]of v)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(o,c,d,m){let v=0;if(o.name==="exponential")v=nh(c,o.base,d,m);else if(o.name==="linear")v=nh(c,1,d,m);else if(o.name==="cubic-bezier"){let x=o.controlPoints;v=new Qb(x[0],x[1],x[2],x[3]).solve(nh(c,1,d,m))}return v}static parse(o,c){let[d,m,v,...x]=o;if(!Array.isArray(m)||m.length===0)return c.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){let A=m[1];if(typeof A!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:A}}else{if(m[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(m[0])}`,1,0);{let A=m.slice(1);if(A.length!==4||A.some(M=>typeof M!="number"||M<0||M>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:A}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(v=c.parse(v,2,$e),!v)return null;let b=[],I=null;d==="interpolate-hcl"||d==="interpolate-lab"?I=Ii:c.expectedType&&c.expectedType.kind!=="value"&&(I=c.expectedType);for(let A=0;A<x.length;A+=2){let M=x[A],R=x[A+1],O=A+3,U=A+4;if(typeof M!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=M)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);let j=c.parse(R,U,I);if(!j)return null;I=I||j.type,b.push([M,j])}return me(I,$e)||me(I,Ii)||me(I,Js)||me(I,Q)||me(I,z($e))?new Ti(I,d,m,v,b):c.error(`Type ${L(I)} is not interpolatable.`)}evaluate(o){let c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);let m=this.input.evaluate(o);if(m<=c[0])return d[0].evaluate(o);let v=c.length;if(m>=c[v-1])return d[v-1].evaluate(o);let x=th(c,m),b=Ti.interpolationFactor(this.interpolation,m,c[x],c[x+1]),I=d[x].evaluate(o),A=d[x+1].evaluate(o);switch(this.operator){case"interpolate":return Ei[this.type.kind](I,A,b);case"interpolate-hcl":return Ei.color(I,A,b,"hcl");case"interpolate-lab":return Ei.color(I,A,b,"lab")}}eachChild(o){o(this.input);for(let c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function nh(l,o,c,d){let m=d-c,v=l-c;return m===0?0:o===1?v/m:(Math.pow(o,v)-1)/(Math.pow(o,m)-1)}class rh{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expectected at least one argument.");let d=null,m=c.expectedType;m&&m.kind!=="value"&&(d=m);let v=[];for(let b of o.slice(1)){let I=c.parse(b,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,v.push(I)}if(!d)throw new Error("No output type");let x=m&&v.some(b=>X(m,b.type));return new rh(x?Rt:d,v)}evaluate(o){let c,d=null,m=0;for(let v of this.args)if(m++,d=v.evaluate(o),d&&d instanceof $i&&!d.available&&(c||(c=d.name),d=null,m===this.args.length&&(d=c)),d!==null)break;return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function ih(l,o){return l==="=="||l==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function dv(l,o,c,d){return d.compare(o,c)===0}function Hl(l,o,c){let d=l!=="=="&&l!=="!=";return class cO{constructor(v,x,b){this.type=Ct,this.lhs=v,this.rhs=x,this.collator=b,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");let b=v[0],I=x.parse(v[1],1,Rt);if(!I)return null;if(!ih(b,I.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${L(I.type)}'.`);let A=x.parse(v[2],2,Rt);if(!A)return null;if(!ih(b,A.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${L(A.type)}'.`);if(I.type.kind!==A.type.kind&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${L(I.type)}' and '${L(A.type)}'.`);d&&(I.type.kind==="value"&&A.type.kind!=="value"?I=new To(A.type,[I]):I.type.kind!=="value"&&A.type.kind==="value"&&(A=new To(I.type,[A])));let M=null;if(v.length===4){if(I.type.kind!=="string"&&A.type.kind!=="string"&&I.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(M=x.parse(v[3],3,ts),!M)return null}return new cO(I,A,M)}evaluate(v){let x=this.lhs.evaluate(v),b=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){let I=Er(x),A=Er(b);if(I.kind!==A.kind||I.kind!=="string"&&I.kind!=="number")throw new xr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${I.kind}, ${A.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){let I=Er(x),A=Er(b);if(I.kind!=="string"||A.kind!=="string")return o(v,x,b)}return this.collator?c(v,x,b,this.collator.evaluate(v)):o(v,x,b)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}let eS=Hl("==",function(l,o,c){return o===c},dv),hv=Hl("!=",function(l,o,c){return o!==c},function(l,o,c,d){return!dv(0,o,c,d)}),pv=Hl("<",function(l,o,c){return o<c},function(l,o,c,d){return d.compare(o,c)<0}),tS=Hl(">",function(l,o,c){return o>c},function(l,o,c,d){return d.compare(o,c)>0}),nS=Hl("<=",function(l,o,c){return o<=c},function(l,o,c,d){return d.compare(o,c)<=0}),fv=Hl(">=",function(l,o,c){return o>=c},function(l,o,c,d){return d.compare(o,c)>=0});class bu{constructor(o,c,d){this.type=ts,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(o.length!==2)return c.error("Expected one argument.");let d=o[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");let m=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Ct);if(!m)return null;let v=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Ct);if(!v)return null;let x=null;return d.locale&&(x=c.parse(d.locale,1,$t),!x)?null:new bu(m,v,x)}evaluate(o){return new Of(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class jf{constructor(o,c,d,m,v){this.type=$t,this.number=o,this.locale=c,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(o,c){if(o.length!==3)return c.error("Expected two arguments.");let d=c.parse(o[1],1,$e);if(!d)return null;let m=o[2];if(typeof m!="object"||Array.isArray(m))return c.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=c.parse(m.locale,1,$t),!v))return null;let x=null;if(m.currency&&(x=c.parse(m.currency,1,$t),!x))return null;let b=null;if(m["min-fraction-digits"]&&(b=c.parse(m["min-fraction-digits"],1,$e),!b))return null;let I=null;return m["max-fraction-digits"]&&(I=c.parse(m["max-fraction-digits"],1,$e),!I)?null:new jf(d,v,x,b,I)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class oh{constructor(o){this.type=Ts,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d=o[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");let m=[],v=!1;for(let x=1;x<=o.length-1;++x){let b=o[x];if(v&&typeof b=="object"&&!Array.isArray(b)){v=!1;let I=null;if(b["font-scale"]&&(I=c.parse(b["font-scale"],1,$e),!I))return null;let A=null;if(b["text-font"]&&(A=c.parse(b["text-font"],1,z($t)),!A))return null;let M=null;if(b["text-color"]&&(M=c.parse(b["text-color"],1,Ii),!M))return null;let R=m[m.length-1];R.scale=I,R.font=A,R.textColor=M}else{let I=c.parse(o[x],1,Rt);if(!I)return null;let A=I.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:I,scale:null,font:null,textColor:null})}}return new oh(m)}evaluate(o){return new Vi(this.sections.map(c=>{let d=c.content.evaluate(o);return Er(d)===ns?new Lf("",d,null,null,null):new Lf(_u(d),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null)}))}eachChild(o){for(let c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor)}outputDefined(){return!1}}class $f{constructor(o){this.type=ns,this.input=o}static parse(o,c){if(o.length!==2)return c.error("Expected two arguments.");let d=c.parse(o[1],1,$t);return d?new $f(d):c.error("No image name provided.")}evaluate(o){let c=this.input.evaluate(o),d=$i.fromString(c);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(c)>-1),d}eachChild(o){o(this.input)}outputDefined(){return!1}}class qf{constructor(o){this.type=$e,this.input=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);let d=c.parse(o[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${L(d.type)} instead.`):new qf(d):null}evaluate(o){let c=this.input.evaluate(o);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new xr(`Expected value to be of type string or array, but found ${L(Er(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}let rs=8192;function rS(l,o){let c=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,m=Math.pow(2,o.z);return[Math.round(c*m*rs),Math.round(d*m*rs)]}function Hf(l,o){let c=Math.pow(2,o.z);return[(m=(l[0]/rs+o.x)/c,360*m-180),(d=(l[1]/rs+o.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function Xa(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function ea(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function Sn(l,o,c){let d=l[0]-o[0],m=l[1]-o[1],v=l[0]-c[0],x=l[1]-c[1];return d*x-v*m==0&&d*v<=0&&m*x<=0}function sh(l,o,c,d){return(m=[d[0]-c[0],d[1]-c[1]])[0]*(v=[o[0]-l[0],o[1]-l[1]])[1]-m[1]*v[0]!=0&&!(!gv(l,o,c,d)||!gv(c,d,l,o));var m,v}function iS(l,o,c){for(let d of c)for(let m=0;m<d.length-1;++m)if(sh(l,o,d[m],d[m+1]))return!0;return!1}function Gl(l,o,c=!1){let d=!1;for(let b of o)for(let I=0;I<b.length-1;I++){if(Sn(l,b[I],b[I+1]))return c;(v=b[I])[1]>(m=l)[1]!=(x=b[I+1])[1]>m[1]&&m[0]<(x[0]-v[0])*(m[1]-v[1])/(x[1]-v[1])+v[0]&&(d=!d)}var m,v,x;return d}function oS(l,o){for(let c of o)if(Gl(l,c))return!0;return!1}function mv(l,o){for(let c of l)if(!Gl(c,o))return!1;for(let c=0;c<l.length-1;++c)if(iS(l[c],l[c+1],o))return!1;return!0}function sS(l,o){for(let c of o)if(mv(l,c))return!0;return!1}function gv(l,o,c,d){let m=d[0]-c[0],v=d[1]-c[1],x=(l[0]-c[0])*v-m*(l[1]-c[1]),b=(o[0]-c[0])*v-m*(o[1]-c[1]);return x>0&&b<0||x<0&&b>0}function Gf(l,o,c){let d=[];for(let m=0;m<l.length;m++){let v=[];for(let x=0;x<l[m].length;x++){let b=rS(l[m][x],c);Xa(o,b),v.push(b)}d.push(v)}return d}function yv(l,o,c){let d=[];for(let m=0;m<l.length;m++){let v=Gf(l[m],o,c);d.push(v)}return d}function vv(l,o,c,d){if(l[0]<c[0]||l[0]>c[2]){let m=.5*d,v=l[0]-c[0]>m?-d:c[0]-l[0]>m?d:0;v===0&&(v=l[0]-c[2]>m?-d:c[2]-l[0]>m?d:0),l[0]+=v}Xa(o,l)}function _v(l,o,c,d){let m=Math.pow(2,d.z)*rs,v=[d.x*rs,d.y*rs],x=[];for(let b of l)for(let I of b){let A=[I.x+v[0],I.y+v[1]];vv(A,o,c,m),x.push(A)}return x}function xv(l,o,c,d){let m=Math.pow(2,d.z)*rs,v=[d.x*rs,d.y*rs],x=[];for(let I of l){let A=[];for(let M of I){let R=[M.x+v[0],M.y+v[1]];Xa(o,R),A.push(R)}x.push(A)}if(o[2]-o[0]<=m/2){(b=o)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(let I of x)for(let A of I)vv(A,o,c,m)}var b;return x}class Ja{constructor(o,c){this.type=Ct,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Za(o[1])){let d=o[1];if(d.type==="FeatureCollection"){let m=[];for(let v of d.features){let{type:x,coordinates:b}=v.geometry;x==="Polygon"&&m.push(b),x==="MultiPolygon"&&m.push(...b)}if(m.length)return new Ja(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){let m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ja(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ja(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){let m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){let b=Gf(d.coordinates,v,x),I=_v(c.geometry(),m,v,x);if(!ea(m,v))return!1;for(let A of I)if(!Gl(A,b))return!1}if(d.type==="MultiPolygon"){let b=yv(d.coordinates,v,x),I=_v(c.geometry(),m,v,x);if(!ea(m,v))return!1;for(let A of I)if(!oS(A,b))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){let m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=c.canonicalID();if(d.type==="Polygon"){let b=Gf(d.coordinates,v,x),I=xv(c.geometry(),m,v,x);if(!ea(m,v))return!1;for(let A of I)if(!mv(A,b))return!1}if(d.type==="MultiPolygon"){let b=yv(d.coordinates,v,x),I=xv(c.geometry(),m,v,x);if(!ea(m,v))return!1;for(let A of I)if(!sS(A,b))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let wv=class{constructor(l=[],o=(c,d)=>c<d?-1:c>d?1:0){if(this.data=l,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:o,compare:c}=this,d=o[l];for(;l>0;){let m=l-1>>1,v=o[m];if(c(d,v)>=0)break;o[l]=v,l=m}o[l]=d}_down(l){let{data:o,compare:c}=this,d=this.length>>1,m=o[l];for(;l<d;){let v=1+(l<<1),x=v+1;if(x<this.length&&c(o[x],o[v])<0&&(v=x),c(o[v],m)>=0)break;o[l]=o[v],l=v}o[l]=m}};function aS(l,o,c,d,m){bv(l,o,c,d||l.length-1,m||lS)}function bv(l,o,c,d,m){for(;d>c;){if(d-c>600){var v=d-c+1,x=o-c+1,b=Math.log(v),I=.5*Math.exp(2*b/3),A=.5*Math.sqrt(b*I*(v-I)/v)*(x-v/2<0?-1:1);bv(l,o,Math.max(c,Math.floor(o-x*I/v+A)),Math.min(d,Math.floor(o+(v-x)*I/v+A)),m)}var M=l[o],R=c,O=d;for(Su(l,c,o),m(l[d],M)>0&&Su(l,c,d);R<O;){for(Su(l,R,O),R++,O--;m(l[R],M)<0;)R++;for(;m(l[O],M)>0;)O--}m(l[c],M)===0?Su(l,c,O):Su(l,++O,d),O<=o&&(c=O+1),o<=O&&(d=O-1)}}function Su(l,o,c){var d=l[o];l[o]=l[c],l[c]=d}function lS(l,o){return l<o?-1:l>o?1:0}function ah(l,o){if(l.length<=1)return[l];let c=[],d,m;for(let v of l){let x=uS(v);x!==0&&(v.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&c.push(d),d=[v]):d.push(v))}if(d&&c.push(d),o>1)for(let v=0;v<c.length;v++)c[v].length<=o||(aS(c[v],o,1,c[v].length-1,cS),c[v]=c[v].slice(0,o));return c}function cS(l,o){return o.area-l.area}function uS(l){let o=0;for(let c,d,m=0,v=l.length,x=v-1;m<v;x=m++)c=l[m],d=l[x],o+=(d.x-c.x)*(c.y+d.y);return o}let Sv=1/298.257223563,Cv=Sv*(2-Sv),Iv=Math.PI/180;class Wf{constructor(o){let c=6378.137*Iv*1e3,d=Math.cos(o*Iv),m=1/(1-Cv*(1-d*d)),v=Math.sqrt(m);this.kx=c*v*d,this.ky=c*v*m*(1-Cv)}distance(o,c){let d=this.wrap(o[0]-c[0])*this.kx,m=(o[1]-c[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(o,c){let d,m,v,x,b=1/0;for(let I=0;I<o.length-1;I++){let A=o[I][0],M=o[I][1],R=this.wrap(o[I+1][0]-A)*this.kx,O=(o[I+1][1]-M)*this.ky,U=0;R===0&&O===0||(U=(this.wrap(c[0]-A)*this.kx*R+(c[1]-M)*this.ky*O)/(R*R+O*O),U>1?(A=o[I+1][0],M=o[I+1][1]):U>0&&(A+=R/this.kx*U,M+=O/this.ky*U)),R=this.wrap(c[0]-A)*this.kx,O=(c[1]-M)*this.ky;let j=R*R+O*O;j<b&&(b=j,d=A,m=M,v=I,x=U)}return{point:[d,m],index:v,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Ev(l,o){return o[0]-l[0]}function lh(l){return l[1]-l[0]+1}function Ds(l,o){return l[1]>=l[0]&&l[1]<o}function Zf(l,o){if(l[0]>l[1])return[null,null];let c=lh(l);if(o){if(c===2)return[l,null];let m=Math.floor(c/2);return[[l[0],l[0]+m],[l[0]+m,l[1]]]}if(c===1)return[l,null];let d=Math.floor(c/2)-1;return[[l[0],l[0]+d],[l[0]+d+1,l[1]]]}function Kf(l,o){if(!Ds(o,l.length))return[1/0,1/0,-1/0,-1/0];let c=[1/0,1/0,-1/0,-1/0];for(let d=o[0];d<=o[1];++d)Xa(c,l[d]);return c}function Yf(l){let o=[1/0,1/0,-1/0,-1/0];for(let c of l)for(let d of c)Xa(o,d);return o}function ch(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Xf(l,o,c){if(!ch(l)||!ch(o))return NaN;let d=0,m=0;return l[2]<o[0]&&(d=o[0]-l[2]),l[0]>o[2]&&(d=l[0]-o[2]),l[1]>o[3]&&(m=l[1]-o[3]),l[3]<o[1]&&(m=o[1]-l[3]),c.distance([0,0],[d,m])}function Qa(l,o,c){let d=c.pointOnLine(o,l);return c.distance(l,d.point)}function Jf(l,o,c,d,m){let v=Math.min(Qa(l,[c,d],m),Qa(o,[c,d],m)),x=Math.min(Qa(c,[l,o],m),Qa(d,[l,o],m));return Math.min(v,x)}function dS(l,o,c,d,m){if(!Ds(o,l.length)||!Ds(d,c.length))return 1/0;let v=1/0;for(let x=o[0];x<o[1];++x){let b=l[x],I=l[x+1];for(let A=d[0];A<d[1];++A){let M=c[A],R=c[A+1];if(sh(b,I,M,R))return 0;v=Math.min(v,Jf(b,I,M,R,m))}}return v}function mr(l,o,c,d,m){if(!Ds(o,l.length)||!Ds(d,c.length))return NaN;let v=1/0;for(let x=o[0];x<=o[1];++x)for(let b=d[0];b<=d[1];++b)if(v=Math.min(v,m.distance(l[x],c[b])),v===0)return v;return v}function hS(l,o,c){if(Gl(l,o,!0))return 0;let d=1/0;for(let m of o){let v=m[0],x=m[m.length-1];if(v!==x&&(d=Math.min(d,Qa(l,[x,v],c)),d===0))return d;let b=c.pointOnLine(m,l);if(d=Math.min(d,c.distance(l,b.point)),d===0)return d}return d}function Gt(l,o,c,d){if(!Ds(o,l.length))return NaN;for(let v=o[0];v<=o[1];++v)if(Gl(l[v],c,!0))return 0;let m=1/0;for(let v=o[0];v<o[1];++v){let x=l[v],b=l[v+1];for(let I of c)for(let A=0,M=I.length,R=M-1;A<M;R=A++){let O=I[R],U=I[A];if(sh(x,b,O,U))return 0;m=Math.min(m,Jf(x,b,O,U,d))}}return m}function uh(l,o){for(let c of l)for(let d of c)if(Gl(d,o,!0))return!0;return!1}function Yn(l,o,c,d=1/0){let m=Yf(l),v=Yf(o);if(d!==1/0&&Xf(m,v,c)>=d)return d;if(ea(m,v)){if(uh(l,o))return 0}else if(uh(o,l))return 0;let x=1/0;for(let b of l)for(let I=0,A=b.length,M=A-1;I<A;M=I++){let R=b[M],O=b[I];for(let U of o)for(let j=0,q=U.length,Y=q-1;j<q;Y=j++){let te=U[Y],ge=U[j];if(sh(R,O,te,ge))return 0;x=Math.min(x,Jf(R,O,te,ge,c))}}return x}function Fn(l,o,c,d,m,v){if(!v)return;let x=Xf(Kf(d,v),m,c);x<o&&l.push([x,v,[0,0]])}function el(l,o,c,d,m,v,x){if(!v||!x)return;let b=Xf(Kf(d,v),Kf(m,x),c);b<o&&l.push([b,v,x])}function Cu(l,o,c,d,m=1/0){let v=Math.min(d.distance(l[0],c[0][0]),m);if(v===0)return v;let x=new wv([[0,[0,l.length-1],[0,0]]],Ev),b=Yf(c);for(;x.length>0;){let I=x.pop();if(I[0]>=v)continue;let A=I[1],M=o?50:100;if(lh(A)<=M){if(!Ds(A,l.length))return NaN;if(o){let R=Gt(l,A,c,d);if(isNaN(R)||R===0)return R;v=Math.min(v,R)}else for(let R=A[0];R<=A[1];++R){let O=hS(l[R],c,d);if(v=Math.min(v,O),v===0)return 0}}else{let R=Zf(A,o);Fn(x,v,d,l,b,R[0]),Fn(x,v,d,l,b,R[1])}}return v}function Iu(l,o,c,d,m,v=1/0){let x=Math.min(v,m.distance(l[0],c[0]));if(x===0)return x;let b=new wv([[0,[0,l.length-1],[0,c.length-1]]],Ev);for(;b.length>0;){let I=b.pop();if(I[0]>=x)continue;let A=I[1],M=I[2],R=o?50:100,O=d?50:100;if(lh(A)<=R&&lh(M)<=O){if(!Ds(A,l.length)&&Ds(M,c.length))return NaN;let U;if(o&&d)U=dS(l,A,c,M,m),x=Math.min(x,U);else if(o&&!d){let j=l.slice(A[0],A[1]+1);for(let q=M[0];q<=M[1];++q)if(U=Qa(c[q],j,m),x=Math.min(x,U),x===0)return x}else if(!o&&d){let j=c.slice(M[0],M[1]+1);for(let q=A[0];q<=A[1];++q)if(U=Qa(l[q],j,m),x=Math.min(x,U),x===0)return x}else U=mr(l,A,c,M,m),x=Math.min(x,U)}else{let U=Zf(A,o),j=Zf(M,d);el(b,x,m,l,c,U[0],j[0]),el(b,x,m,l,c,U[0],j[1]),el(b,x,m,l,c,U[1],j[0]),el(b,x,m,l,c,U[1],j[1])}}return x}function Qf(l){return l.type==="MultiPolygon"?l.coordinates.map(o=>({type:"Polygon",coordinates:o})):l.type==="MultiLineString"?l.coordinates.map(o=>({type:"LineString",coordinates:o})):l.type==="MultiPoint"?l.coordinates.map(o=>({type:"Point",coordinates:o})):[l]}class tl{constructor(o,c){this.type=$e,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Za(o[1])){let d=o[1];if(d.type==="FeatureCollection")return new tl(d,d.features.map(m=>Qf(m.geometry)).flat());if(d.type==="Feature")return new tl(d,Qf(d.geometry));if("type"in d&&"coordinates"in d)return new tl(d,Qf(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){let m=c.geometry(),v=m.flat().map(I=>Hf([I.x,I.y],c.canonical));if(m.length===0)return NaN;let x=new Wf(v[0][1]),b=1/0;for(let I of d){switch(I.type){case"Point":b=Math.min(b,Iu(v,!1,[I.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,Iu(v,!1,I.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Cu(v,!1,I.coordinates,x,b))}if(b===0)return b}return b}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){let m=c.geometry(),v=m.flat().map(I=>Hf([I.x,I.y],c.canonical));if(m.length===0)return NaN;let x=new Wf(v[0][1]),b=1/0;for(let I of d){switch(I.type){case"Point":b=Math.min(b,Iu(v,!0,[I.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,Iu(v,!0,I.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,Cu(v,!0,I.coordinates,x,b))}if(b===0)return b}return b}(o,this.geometries);if(o.geometryType()==="Polygon")return function(c,d){let m=c.geometry();if(m.length===0||m[0].length===0)return NaN;let v=ah(m,0).map(I=>I.map(A=>A.map(M=>Hf([M.x,M.y],c.canonical)))),x=new Wf(v[0][0][0][1]),b=1/0;for(let I of d)for(let A of v){switch(I.type){case"Point":b=Math.min(b,Cu([I.coordinates],!1,A,x,b));break;case"LineString":b=Math.min(b,Cu(I.coordinates,!0,A,x,b));break;case"Polygon":b=Math.min(b,Yn(A,I.coordinates,x,b))}if(b===0)return b}return b}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let Wl={"==":eS,"!=":hv,">":tS,"<":pv,">=":fv,"<=":nS,array:To,at:Uf,boolean:To,case:eh,coalesce:rh,collator:bu,format:oh,image:$f,in:Bf,"index-of":$l,interpolate:Ti,"interpolate-hcl":Ti,"interpolate-lab":Ti,length:qf,let:Qs,literal:Eo,match:Vf,number:To,"number-format":jf,object:To,slice:xu,step:ql,string:To,"to-boolean":Do,"to-color":Do,"to-number":Do,"to-string":Do,var:_n,within:Ja,distance:tl};class oo{constructor(o,c,d,m){this.name=o,this.type=c,this._evaluate=d,this.args=m}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){let d=o[0],m=oo.definitions[d];if(!m)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);let v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,b=x.filter(([A])=>!Array.isArray(A)||A.length===o.length-1),I=null;for(let[A,M]of b){I=new Ka(c.registry,Eu,c.path,null,c.scope);let R=[],O=!1;for(let U=1;U<o.length;U++){let j=o[U],q=Array.isArray(A)?A[U-1]:A.type,Y=I.parse(j,1+R.length,q);if(!Y){O=!0;break}R.push(Y)}if(!O)if(Array.isArray(A)&&A.length!==R.length)I.error(`Expected ${A.length} arguments, but found ${R.length} instead.`);else{for(let U=0;U<R.length;U++){let j=Array.isArray(A)?A[U]:A.type,q=R[U];I.concat(U+1).checkSubtype(j,q.type)}if(I.errors.length===0)return new oo(d,v,M,R)}}if(b.length===1)c.errors.push(...I.errors);else{let A=(b.length?b:x).map(([R])=>{return O=R,Array.isArray(O)?`(${O.map(L).join(", ")})`:`(${L(O.type)}...)`;var O}).join(" | "),M=[];for(let R=1;R<o.length;R++){let O=c.parse(o[R],1+M.length);if(!O)return null;M.push(L(O.type))}c.error(`Expected arguments of type ${A}, but found (${M.join(", ")}) instead.`)}return null}static register(o,c){oo.definitions=c;for(let d in c)o[d]=oo}}function em(l,[o,c,d,m]){o=o.evaluate(l),c=c.evaluate(l),d=d.evaluate(l);let v=m?m.evaluate(l):1,x=jl(o,c,d,v);if(x)throw new xr(x);return new Mn(o/255,c/255,d/255,v,!1)}function tm(l,o){return l in o}function nm(l,o){let c=o[l];return c===void 0?null:c}function nl(l){return{type:l}}function Eu(l){if(l instanceof _n)return Eu(l.boundExpression);if(l instanceof oo&&l.name==="error"||l instanceof bu||l instanceof Ja||l instanceof tl)return!1;let o=l instanceof Do||l instanceof To,c=!0;return l.eachChild(d=>{c=o?c&&Eu(d):c&&d instanceof Eo}),!!c&&Tu(l)&&Du(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Tu(l){if(l instanceof oo&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ja||l instanceof tl)return!1;let o=!0;return l.eachChild(c=>{o&&!Tu(c)&&(o=!1)}),o}function Zl(l){if(l instanceof oo&&l.name==="feature-state")return!1;let o=!0;return l.eachChild(c=>{o&&!Zl(c)&&(o=!1)}),o}function Du(l,o){if(l instanceof oo&&o.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(d=>{c&&!Du(d,o)&&(c=!1)}),c}function dh(l){return{result:"success",value:l}}function Kl(l){return{result:"error",value:l}}function Yl(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Tv(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function rm(l){return!!l.expression&&l.expression.interpolated}function mn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function hh(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function pS(l){return l}function Dv(l,o){let c=o.type==="color",d=l.stops&&typeof l.stops[0][0]=="object",m=d||!(d||l.property!==void 0),v=l.type||(rm(o)?"exponential":"interval");if(c||o.type==="padding"){let M=c?Mn.parse:ji.parse;(l=Qo({},l)).stops&&(l.stops=l.stops.map(R=>[R[0],M(R[1])])),l.default=M(l.default?l.default:o.default)}if(l.colorSpace&&(x=l.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var x;let b,I,A;if(v==="exponential")b=Mv;else if(v==="interval")b=ph;else if(v==="categorical"){b=Av,I=Object.create(null);for(let M of l.stops)I[M[0]]=M[1];A=typeof l.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);b=Pv}if(d){let M={},R=[];for(let j=0;j<l.stops.length;j++){let q=l.stops[j],Y=q[0].zoom;M[Y]===void 0&&(M[Y]={zoom:Y,type:l.type,property:l.property,default:l.default,stops:[]},R.push(Y)),M[Y].stops.push([q[0].value,q[1]])}let O=[];for(let j of R)O.push([M[j].zoom,Dv(M[j],o)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Ti.interpolationFactor.bind(void 0,U),zoomStops:O.map(j=>j[0]),evaluate:({zoom:j},q)=>Mv({stops:O,base:l.base},o,j).evaluate(j,q)}}if(m){let M=v==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Ti.interpolationFactor.bind(void 0,M),zoomStops:l.stops.map(R=>R[0]),evaluate:({zoom:R})=>b(l,o,R,I,A)}}return{kind:"source",evaluate(M,R){let O=R&&R.properties?R.properties[l.property]:void 0;return O===void 0?Xl(l.default,o.default):b(l,o,O,I,A)}}}function Xl(l,o,c){return l!==void 0?l:o!==void 0?o:c!==void 0?c:void 0}function Av(l,o,c,d,m){return Xl(typeof c===m?d[c]:void 0,l.default,o.default)}function ph(l,o,c){if(mn(c)!=="number")return Xl(l.default,o.default);let d=l.stops.length;if(d===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[d-1][0])return l.stops[d-1][1];let m=th(l.stops.map(v=>v[0]),c);return l.stops[m][1]}function Mv(l,o,c){let d=l.base!==void 0?l.base:1;if(mn(c)!=="number")return Xl(l.default,o.default);let m=l.stops.length;if(m===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[m-1][0])return l.stops[m-1][1];let v=th(l.stops.map(M=>M[0]),c),x=function(M,R,O,U){let j=U-O,q=M-O;return j===0?0:R===1?q/j:(Math.pow(R,q)-1)/(Math.pow(R,j)-1)}(c,d,l.stops[v][0],l.stops[v+1][0]),b=l.stops[v][1],I=l.stops[v+1][1],A=Ei[o.type]||pS;return typeof b.evaluate=="function"?{evaluate(...M){let R=b.evaluate.apply(void 0,M),O=I.evaluate.apply(void 0,M);if(R!==void 0&&O!==void 0)return A(R,O,x,l.colorSpace)}}:A(b,I,x,l.colorSpace)}function Pv(l,o,c){switch(o.type){case"color":c=Mn.parse(c);break;case"formatted":c=Vi.fromString(c.toString());break;case"resolvedImage":c=$i.fromString(c.toString());break;case"padding":c=ji.parse(c);break;default:mn(c)===o.type||o.type==="enum"&&o.values[c]||(c=void 0)}return Xl(c,l.default,o.default)}oo.register(Wl,{error:[{kind:"error"},[$t],(l,[o])=>{throw new xr(o.evaluate(l))}],typeof:[$t,[Rt],(l,[o])=>L(Er(o.evaluate(l)))],"to-rgba":[z($e,4),[Ii],(l,[o])=>{let[c,d,m,v]=o.evaluate(l).rgb;return[255*c,255*d,255*m,v]}],rgb:[Ii,[$e,$e,$e],em],rgba:[Ii,[$e,$e,$e,$e],em],has:{type:Ct,overloads:[[[$t],(l,[o])=>tm(o.evaluate(l),l.properties())],[[$t,Io],(l,[o,c])=>tm(o.evaluate(l),c.evaluate(l))]]},get:{type:Rt,overloads:[[[$t],(l,[o])=>nm(o.evaluate(l),l.properties())],[[$t,Io],(l,[o,c])=>nm(o.evaluate(l),c.evaluate(l))]]},"feature-state":[Rt,[$t],(l,[o])=>nm(o.evaluate(l),l.featureState||{})],properties:[Io,[],l=>l.properties()],"geometry-type":[$t,[],l=>l.geometryType()],id:[Rt,[],l=>l.id()],zoom:[$e,[],l=>l.globals.zoom],"heatmap-density":[$e,[],l=>l.globals.heatmapDensity||0],"line-progress":[$e,[],l=>l.globals.lineProgress||0],accumulated:[Rt,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[$e,nl($e),(l,o)=>{let c=0;for(let d of o)c+=d.evaluate(l);return c}],"*":[$e,nl($e),(l,o)=>{let c=1;for(let d of o)c*=d.evaluate(l);return c}],"-":{type:$e,overloads:[[[$e,$e],(l,[o,c])=>o.evaluate(l)-c.evaluate(l)],[[$e],(l,[o])=>-o.evaluate(l)]]},"/":[$e,[$e,$e],(l,[o,c])=>o.evaluate(l)/c.evaluate(l)],"%":[$e,[$e,$e],(l,[o,c])=>o.evaluate(l)%c.evaluate(l)],ln2:[$e,[],()=>Math.LN2],pi:[$e,[],()=>Math.PI],e:[$e,[],()=>Math.E],"^":[$e,[$e,$e],(l,[o,c])=>Math.pow(o.evaluate(l),c.evaluate(l))],sqrt:[$e,[$e],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[$e,[$e],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[$e,[$e],(l,[o])=>Math.log(o.evaluate(l))],log2:[$e,[$e],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[$e,[$e],(l,[o])=>Math.sin(o.evaluate(l))],cos:[$e,[$e],(l,[o])=>Math.cos(o.evaluate(l))],tan:[$e,[$e],(l,[o])=>Math.tan(o.evaluate(l))],asin:[$e,[$e],(l,[o])=>Math.asin(o.evaluate(l))],acos:[$e,[$e],(l,[o])=>Math.acos(o.evaluate(l))],atan:[$e,[$e],(l,[o])=>Math.atan(o.evaluate(l))],min:[$e,nl($e),(l,o)=>Math.min(...o.map(c=>c.evaluate(l)))],max:[$e,nl($e),(l,o)=>Math.max(...o.map(c=>c.evaluate(l)))],abs:[$e,[$e],(l,[o])=>Math.abs(o.evaluate(l))],round:[$e,[$e],(l,[o])=>{let c=o.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[$e,[$e],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[$e,[$e],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[Ct,[$t,Rt],(l,[o,c])=>l.properties()[o.value]===c.value],"filter-id-==":[Ct,[Rt],(l,[o])=>l.id()===o.value],"filter-type-==":[Ct,[$t],(l,[o])=>l.geometryType()===o.value],"filter-<":[Ct,[$t,Rt],(l,[o,c])=>{let d=l.properties()[o.value],m=c.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Ct,[Rt],(l,[o])=>{let c=l.id(),d=o.value;return typeof c==typeof d&&c<d}],"filter->":[Ct,[$t,Rt],(l,[o,c])=>{let d=l.properties()[o.value],m=c.value;return typeof d==typeof m&&d>m}],"filter-id->":[Ct,[Rt],(l,[o])=>{let c=l.id(),d=o.value;return typeof c==typeof d&&c>d}],"filter-<=":[Ct,[$t,Rt],(l,[o,c])=>{let d=l.properties()[o.value],m=c.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Ct,[Rt],(l,[o])=>{let c=l.id(),d=o.value;return typeof c==typeof d&&c<=d}],"filter->=":[Ct,[$t,Rt],(l,[o,c])=>{let d=l.properties()[o.value],m=c.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Ct,[Rt],(l,[o])=>{let c=l.id(),d=o.value;return typeof c==typeof d&&c>=d}],"filter-has":[Ct,[Rt],(l,[o])=>o.value in l.properties()],"filter-has-id":[Ct,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[Ct,[z($t)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[Ct,[z(Rt)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[Ct,[$t,z(Rt)],(l,[o,c])=>c.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[Ct,[$t,z(Rt)],(l,[o,c])=>function(d,m,v,x){for(;v<=x;){let b=v+x>>1;if(m[b]===d)return!0;m[b]>d?x=b-1:v=b+1}return!1}(l.properties()[o.value],c.value,0,c.value.length-1)],all:{type:Ct,overloads:[[[Ct,Ct],(l,[o,c])=>o.evaluate(l)&&c.evaluate(l)],[nl(Ct),(l,o)=>{for(let c of o)if(!c.evaluate(l))return!1;return!0}]]},any:{type:Ct,overloads:[[[Ct,Ct],(l,[o,c])=>o.evaluate(l)||c.evaluate(l)],[nl(Ct),(l,o)=>{for(let c of o)if(c.evaluate(l))return!0;return!1}]]},"!":[Ct,[Ct],(l,[o])=>!o.evaluate(l)],"is-supported-script":[Ct,[$t],(l,[o])=>{let c=l.globals&&l.globals.isSupportedScript;return!c||c(o.evaluate(l))}],upcase:[$t,[$t],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[$t,[$t],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[$t,nl(Rt),(l,o)=>o.map(c=>_u(c.evaluate(l))).join("")],"resolved-locale":[$t,[ts],(l,[o])=>o.evaluate(l).resolvedLocale()]});class fh{constructor(o,c){var d;this.expression=o,this._warningHistory={},this._evaluator=new Qd,this._defaultValue=c?(d=c).type==="color"&&hh(d.default)?new Mn(0,0,0,0):d.type==="color"?Mn.parse(d.default)||null:d.type==="padding"?ji.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?io.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,c,d,m,v,x){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{let b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new xr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function mh(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Wl}function Jl(l,o){let c=new Ka(Wl,Eu,[],o?function(m){let v={color:Ii,string:$t,number:$e,enum:$t,boolean:Ct,formatted:Ts,padding:Js,resolvedImage:ns,variableAnchorOffsetCollection:Q};return m.type==="array"?z(v[m.value]||Rt,m.length):v[m.type]}(o):void 0),d=c.parse(l,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?dh(new fh(d,o)):Kl(c.errors)}class Ql{constructor(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!Zl(c.expression)}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,m,v,x)}evaluate(o,c,d,m,v,x){return this._styleExpression.evaluate(o,c,d,m,v,x)}}class ec{constructor(o,c,d,m){this.kind=o,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!Zl(c.expression),this.interpolationType=m}evaluateWithoutErrorHandling(o,c,d,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,m,v,x)}evaluate(o,c,d,m,v,x){return this._styleExpression.evaluate(o,c,d,m,v,x)}interpolationFactor(o,c,d){return this.interpolationType?Ti.interpolationFactor(this.interpolationType,o,c,d):0}}function im(l,o){let c=Jl(l,o);if(c.result==="error")return c;let d=c.value.expression,m=Tu(d);if(!m&&!Yl(o))return Kl([new gi("","data expressions not supported")]);let v=Du(d,["zoom"]);if(!v&&!Tv(o))return Kl([new gi("","zoom expressions not supported")]);let x=Au(d);return x||v?x instanceof gi?Kl([x]):x instanceof Ti&&!rm(o)?Kl([new gi("",'"interpolate" expressions cannot be used with this property')]):dh(x?new ec(m?"camera":"composite",c.value,x.labels,x instanceof Ti?x.interpolation:void 0):new Ql(m?"constant":"source",c.value)):Kl([new gi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class tc{constructor(o,c){this._parameters=o,this._specification=c,Qo(this,Dv(this._parameters,this._specification))}static deserialize(o){return new tc(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Au(l){let o=null;if(l instanceof Qs)o=Au(l.result);else if(l instanceof rh){for(let c of l.args)if(o=Au(c),o)break}else(l instanceof ql||l instanceof Ti)&&l.input instanceof oo&&l.input.name==="zoom"&&(o=l);return o instanceof gi||l.eachChild(c=>{let d=Au(c);d instanceof gi?o=d:!o&&d?o=new gi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&d&&o!==d&&(o=new gi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function gh(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(let o of l.slice(1))if(!gh(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}let yh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function om(l){if(l==null)return{filter:()=>!0,needGeometry:!1};gh(l)||(l=vh(l));let o=Jl(l,yh);if(o.result==="error")throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,m)=>o.value.evaluate(c,d,{},m),needGeometry:Rv(l)}}function fS(l,o){return l<o?-1:l>o?1:0}function Rv(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let o=1;o<l.length;o++)if(Rv(l[o]))return!0;return!1}function vh(l){if(!l)return!0;let o=l[0];return l.length<=1?o!=="any":o==="=="?sm(l[1],l[2],"=="):o==="!="?ri(sm(l[1],l[2],"==")):o==="<"||o===">"||o==="<="||o===">="?sm(l[1],l[2],o):o==="any"?(c=l.slice(1),["any"].concat(c.map(vh))):o==="all"?["all"].concat(l.slice(1).map(vh)):o==="none"?["all"].concat(l.slice(1).map(vh).map(ri)):o==="in"?Mu(l[1],l.slice(2)):o==="!in"?ri(Mu(l[1],l.slice(2))):o==="has"?Pu(l[1]):o!=="!has"||ri(Pu(l[1]));var c}function sm(l,o,c){switch(l){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,l,o]}}function Mu(l,o){if(o.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",l,["literal",o.sort(fS)]]:["filter-in-small",l,["literal",o]]}}function Pu(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function ri(l){return["!",l]}function rl(l){let o=typeof l;if(o==="number"||o==="boolean"||o==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let m="[";for(let v of l)m+=`${rl(v)},`;return`${m}]`}let c=Object.keys(l).sort(),d="{";for(let m=0;m<c.length;m++)d+=`${JSON.stringify(c[m])}:${rl(l[c[m]])},`;return`${d}}`}function kv(l){let o="";for(let c of Wa)o+=`/${rl(l[c])}`;return o}function Nv(l){let o=l.value;return o?[new ze(l.key,o,"constants have been deprecated as of v8")]:[]}function gr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Ao(l){if(Array.isArray(l))return l.map(Ao);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){let o={};for(let c in l)o[c]=Ao(l[c]);return o}return gr(l)}function qi(l){let o=l.key,c=l.value,d=l.valueSpec||{},m=l.objectElementValidators||{},v=l.style,x=l.styleSpec,b=l.validateSpec,I=[],A=mn(c);if(A!=="object")return[new ze(o,c,`object expected, ${A} found`)];for(let M in c){let R=M.split(".")[0],O=d[R]||d["*"],U;if(m[R])U=m[R];else if(d[R])U=b;else if(m["*"])U=m["*"];else{if(!d["*"]){I.push(new ze(o,c[M],`unknown property "${M}"`));continue}U=b}I=I.concat(U({key:(o&&`${o}.`)+M,value:c[M],valueSpec:O,style:v,styleSpec:x,object:c,objectKey:M,validateSpec:b},c))}for(let M in d)m[M]||d[M].required&&d[M].default===void 0&&c[M]===void 0&&I.push(new ze(o,c,`missing required property "${M}"`));return I}function Ru(l){let o=l.value,c=l.valueSpec,d=l.style,m=l.styleSpec,v=l.key,x=l.arrayElementValidator||l.validateSpec;if(mn(o)!=="array")return[new ze(v,o,`array expected, ${mn(o)} found`)];if(c.length&&o.length!==c.length)return[new ze(v,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new ze(v,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let b={type:c.value,values:c.values};m.$version<7&&(b.function=c.function),mn(c.value)==="object"&&(b=c.value);let I=[];for(let A=0;A<o.length;A++)I=I.concat(x({array:o,arrayIndex:A,value:o[A],valueSpec:b,validateSpec:l.validateSpec,style:d,styleSpec:m,key:`${v}[${A}]`}));return I}function am(l){let o=l.key,c=l.value,d=l.valueSpec,m=mn(c);return m==="number"&&c!=c&&(m="NaN"),m!=="number"?[new ze(o,c,`number expected, ${m} found`)]:"minimum"in d&&c<d.minimum?[new ze(o,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new ze(o,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function _h(l){let o=l.valueSpec,c=gr(l.value.type),d,m,v,x={},b=c!=="categorical"&&l.value.property===void 0,I=!b,A=mn(l.value.stops)==="array"&&mn(l.value.stops[0])==="array"&&mn(l.value.stops[0][0])==="object",M=qi({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(U){if(c==="identity")return[new ze(U.key,U.value,'identity function may not have a "stops" property')];let j=[],q=U.value;return j=j.concat(Ru({key:U.key,value:q,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:R})),mn(q)==="array"&&q.length===0&&j.push(new ze(U.key,q,"array must have at least one stop")),j},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:o,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return c==="identity"&&b&&M.push(new ze(l.key,l.value,'missing required property "property"')),c==="identity"||l.value.stops||M.push(new ze(l.key,l.value,'missing required property "stops"')),c==="exponential"&&l.valueSpec.expression&&!rm(l.valueSpec)&&M.push(new ze(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(I&&!Yl(l.valueSpec)?M.push(new ze(l.key,l.value,"property functions not supported")):b&&!Tv(l.valueSpec)&&M.push(new ze(l.key,l.value,"zoom functions not supported"))),c!=="categorical"&&!A||l.value.property!==void 0||M.push(new ze(l.key,l.value,'"property" property is required')),M;function R(U){let j=[],q=U.value,Y=U.key;if(mn(q)!=="array")return[new ze(Y,q,`array expected, ${mn(q)} found`)];if(q.length!==2)return[new ze(Y,q,`array length 2 expected, length ${q.length} found`)];if(A){if(mn(q[0])!=="object")return[new ze(Y,q,`object expected, ${mn(q[0])} found`)];if(q[0].zoom===void 0)return[new ze(Y,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new ze(Y,q,"object stop key must have value")];if(v&&v>gr(q[0].zoom))return[new ze(Y,q[0].zoom,"stop zoom values must appear in ascending order")];gr(q[0].zoom)!==v&&(v=gr(q[0].zoom),m=void 0,x={}),j=j.concat(qi({key:`${Y}[0]`,value:q[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:am,value:O}}))}else j=j.concat(O({key:`${Y}[0]`,value:q[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},q));return mh(Ao(q[1]))?j.concat([new ze(`${Y}[1]`,q[1],"expressions are not allowed in function stops.")]):j.concat(U.validateSpec({key:`${Y}[1]`,value:q[1],valueSpec:o,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function O(U,j){let q=mn(U.value),Y=gr(U.value),te=U.value!==null?U.value:j;if(d){if(q!==d)return[new ze(U.key,te,`${q} stop domain type must match previous stop domain type ${d}`)]}else d=q;if(q!=="number"&&q!=="string"&&q!=="boolean")return[new ze(U.key,te,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&c!=="categorical"){let ge=`number expected, ${q} found`;return Yl(o)&&c===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ze(U.key,te,ge)]}return c!=="categorical"||q!=="number"||isFinite(Y)&&Math.floor(Y)===Y?c!=="categorical"&&q==="number"&&m!==void 0&&Y<m?[new ze(U.key,te,"stop domain values must appear in ascending order")]:(m=Y,c==="categorical"&&Y in x?[new ze(U.key,te,"stop domain values must be unique")]:(x[Y]=!0,[])):[new ze(U.key,te,`integer expected, found ${Y}`)]}}function nc(l){let o=(l.expressionContext==="property"?im:Jl)(Ao(l.value),l.valueSpec);if(o.result==="error")return o.value.map(d=>new ze(`${l.key}${d.key}`,l.value,d.message));let c=o.value.expression||o.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!c.outputDefined())return[new ze(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Zl(c))return[new ze(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Zl(c))return[new ze(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Du(c,["zoom","feature-state"]))return[new ze(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Tu(c))return[new ze(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(l){let o=l.key,c=l.value,d=l.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(gr(c))===-1&&m.push(new ze(o,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(gr(c))===-1&&m.push(new ze(o,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),m}function lm(l){return gh(Ao(l.value))?nc(Qo({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xh(l)}function xh(l){let o=l.value,c=l.key;if(mn(o)!=="array")return[new ze(c,o,`array expected, ${mn(o)} found`)];let d=l.styleSpec,m,v=[];if(o.length<1)return[new ze(c,o,"filter array must have at least 1 element")];switch(v=v.concat(As({key:`${c}[0]`,value:o[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),gr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&gr(o[1])==="$type"&&v.push(new ze(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&v.push(new ze(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(m=mn(o[1]),m!=="string"&&v.push(new ze(`${c}[1]`,o[1],`string expected, ${m} found`)));for(let x=2;x<o.length;x++)m=mn(o[x]),gr(o[1])==="$type"?v=v.concat(As({key:`${c}[${x}]`,value:o[x],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new ze(`${c}[${x}]`,o[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)v=v.concat(xh({key:`${c}[${x}]`,value:o[x],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":m=mn(o[1]),o.length!==2?v.push(new ze(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new ze(`${c}[1]`,o[1],`string expected, ${m} found`))}return v}function cm(l,o){let c=l.key,d=l.validateSpec,m=l.style,v=l.styleSpec,x=l.value,b=l.objectKey,I=v[`${o}_${l.layerType}`];if(!I)return[];let A=b.match(/^(.*)-transition$/);if(o==="paint"&&A&&I[A[1]]&&I[A[1]].transition)return d({key:c,value:x,valueSpec:v.transition,style:m,styleSpec:v});let M=l.valueSpec||I[b];if(!M)return[new ze(c,x,`unknown property "${b}"`)];let R;if(mn(x)==="string"&&Yl(M)&&!M.tokens&&(R=/^{([^}]+)}$/.exec(x)))return[new ze(c,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];let O=[];return l.layerType==="symbol"&&(b==="text-field"&&m&&!m.glyphs&&O.push(new ze(c,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&hh(Ao(x))&&gr(x.type)==="identity"&&O.push(new ze(c,x,'"text-font" does not support identity functions'))),O.concat(d({key:l.key,value:x,valueSpec:M,style:m,styleSpec:v,expressionContext:"property",propertyType:o,propertyKey:b}))}function wh(l){return cm(l,"paint")}function um(l){return cm(l,"layout")}function dm(l){let o=[],c=l.value,d=l.key,m=l.style,v=l.styleSpec;c.type||c.ref||o.push(new ze(d,c,'either "type" or "ref" is required'));let x=gr(c.type),b=gr(c.ref);if(c.id){let I=gr(c.id);for(let A=0;A<l.arrayIndex;A++){let M=m.layers[A];gr(M.id)===I&&o.push(new ze(d,c.id,`duplicate layer id "${c.id}", previously used at line ${M.id.__line__}`))}}if("ref"in c){let I;["type","source","source-layer","filter","layout"].forEach(A=>{A in c&&o.push(new ze(d,c[A],`"${A}" is prohibited for ref layers`))}),m.layers.forEach(A=>{gr(A.id)===b&&(I=A)}),I?I.ref?o.push(new ze(d,c.ref,"ref cannot reference another ref layer")):x=gr(I.type):o.push(new ze(d,c.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(c.source){let I=m.sources&&m.sources[c.source],A=I&&gr(I.type);I?A==="vector"&&x==="raster"?o.push(new ze(d,c.source,`layer "${c.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?o.push(new ze(d,c.source,`layer "${c.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?o.push(new ze(d,c.source,`layer "${c.id}" requires a vector source`)):A!=="vector"||c["source-layer"]?A==="raster-dem"&&x!=="hillshade"?o.push(new ze(d,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!c.paint||!c.paint["line-gradient"]||A==="geojson"&&I.lineMetrics||o.push(new ze(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new ze(d,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new ze(d,c.source,`source "${c.source}" not found`))}else o.push(new ze(d,c,'missing required property "source"'));return o=o.concat(qi({key:d,value:c,valueSpec:v.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${d}.type`,value:c.type,valueSpec:v.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:lm,layout:I=>qi({layer:c,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":A=>um(Qo({layerType:x},A))}}),paint:I=>qi({layer:c,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":A=>wh(Qo({layerType:x},A))}})}})),o}function il(l){let o=l.value,c=l.key,d=mn(o);return d!=="string"?[new ze(c,o,`string expected, ${d} found`)]:[]}let bh={promoteId:function({key:l,value:o}){if(mn(o)==="string")return il({key:l,value:o});{let c=[];for(let d in o)c.push(...il({key:`${l}.${d}`,value:o[d]}));return c}}};function ku(l){let o=l.value,c=l.key,d=l.styleSpec,m=l.style,v=l.validateSpec;if(!o.type)return[new ze(c,o,'"type" is required')];let x=gr(o.type),b;switch(x){case"vector":case"raster":return b=qi({key:c,value:o,valueSpec:d[`source_${x.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:bh,validateSpec:v}),b;case"raster-dem":return b=function(I){var A;let M=(A=I.sourceName)!==null&&A!==void 0?A:"",R=I.value,O=I.styleSpec,U=O.source_raster_dem,j=I.style,q=[],Y=mn(R);if(R===void 0)return q;if(Y!=="object")return q.push(new ze("source_raster_dem",R,`object expected, ${Y} found`)),q;let te=gr(R.encoding)==="custom",ge=["redFactor","greenFactor","blueFactor","baseShift"],le=I.value.encoding?`"${I.value.encoding}"`:"Default";for(let pe in R)!te&&ge.includes(pe)?q.push(new ze(pe,R[pe],`In "${M}": "${pe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):U[pe]?q=q.concat(I.validateSpec({key:pe,value:R[pe],valueSpec:U[pe],validateSpec:I.validateSpec,style:j,styleSpec:O})):q.push(new ze(pe,R[pe],`unknown property "${pe}"`));return q}({sourceName:c,value:o,style:l.style,styleSpec:d,validateSpec:v}),b;case"geojson":if(b=qi({key:c,value:o,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:v,objectElementValidators:bh}),o.cluster)for(let I in o.clusterProperties){let[A,M]=o.clusterProperties[I],R=typeof A=="string"?[A,["accumulated"],["get",I]]:A;b.push(...nc({key:`${c}.${I}.map`,value:M,validateSpec:v,expressionContext:"cluster-map"})),b.push(...nc({key:`${c}.${I}.reduce`,value:R,validateSpec:v,expressionContext:"cluster-reduce"}))}return b;case"video":return qi({key:c,value:o,valueSpec:d.source_video,style:m,validateSpec:v,styleSpec:d});case"image":return qi({key:c,value:o,valueSpec:d.source_image,style:m,validateSpec:v,styleSpec:d});case"canvas":return[new ze(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return As({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:d})}}function hm(l){let o=l.value,c=l.styleSpec,d=c.light,m=l.style,v=[],x=mn(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new ze("light",o,`object expected, ${x} found`)]),v;for(let b in o){let I=b.match(/^(.*)-transition$/);v=v.concat(I&&d[I[1]]&&d[I[1]].transition?l.validateSpec({key:b,value:o[b],valueSpec:c.transition,validateSpec:l.validateSpec,style:m,styleSpec:c}):d[b]?l.validateSpec({key:b,value:o[b],valueSpec:d[b],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new ze(b,o[b],`unknown property "${b}"`)])}return v}function pm(l){let o=l.value,c=l.styleSpec,d=c.sky,m=l.style,v=mn(o);if(o===void 0)return[];if(v!=="object")return[new ze("sky",o,`object expected, ${v} found`)];let x=[];for(let b in o)x=x.concat(d[b]?l.validateSpec({key:b,value:o[b],valueSpec:d[b],style:m,styleSpec:c}):[new ze(b,o[b],`unknown property "${b}"`)]);return x}function fm(l){let o=l.value,c=l.styleSpec,d=c.terrain,m=l.style,v=[],x=mn(o);if(o===void 0)return v;if(x!=="object")return v=v.concat([new ze("terrain",o,`object expected, ${x} found`)]),v;for(let b in o)v=v.concat(d[b]?l.validateSpec({key:b,value:o[b],valueSpec:d[b],validateSpec:l.validateSpec,style:m,styleSpec:c}):[new ze(b,o[b],`unknown property "${b}"`)]);return v}function mm(l){let o=[],c=l.value,d=l.key;if(Array.isArray(c)){let m=[],v=[];for(let x in c)c[x].id&&m.includes(c[x].id)&&o.push(new ze(d,c,`all the sprites' ids must be unique, but ${c[x].id} is duplicated`)),m.push(c[x].id),c[x].url&&v.includes(c[x].url)&&o.push(new ze(d,c,`all the sprites' URLs must be unique, but ${c[x].url} is duplicated`)),v.push(c[x].url),o=o.concat(qi({key:`${d}[${x}]`,value:c[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return o}return il({key:d,value:c})}let Sh={"*":()=>[],array:Ru,boolean:function(l){let o=l.value,c=l.key,d=mn(o);return d!=="boolean"?[new ze(c,o,`boolean expected, ${d} found`)]:[]},number:am,color:function(l){let o=l.key,c=l.value,d=mn(c);return d!=="string"?[new ze(o,c,`color expected, ${d} found`)]:Mn.parse(String(c))?[]:[new ze(o,c,`color expected, "${c}" found`)]},constants:Nv,enum:As,filter:lm,function:_h,layer:dm,object:qi,source:ku,light:hm,sky:pm,terrain:fm,projection:function(l){let o=l.value,c=l.styleSpec,d=c.projection,m=l.style,v=mn(o);if(o===void 0)return[];if(v!=="object")return[new ze("projection",o,`object expected, ${v} found`)];let x=[];for(let b in o)x=x.concat(d[b]?l.validateSpec({key:b,value:o[b],valueSpec:d[b],style:m,styleSpec:c}):[new ze(b,o[b],`unknown property "${b}"`)]);return x},string:il,formatted:function(l){return il(l).length===0?[]:nc(l)},resolvedImage:function(l){return il(l).length===0?[]:nc(l)},padding:function(l){let o=l.key,c=l.value;if(mn(c)==="array"){if(c.length<1||c.length>4)return[new ze(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];let d={type:"number"},m=[];for(let v=0;v<c.length;v++)m=m.concat(l.validateSpec({key:`${o}[${v}]`,value:c[v],validateSpec:l.validateSpec,valueSpec:d}));return m}return am({key:o,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(l){let o=l.key,c=l.value,d=mn(c),m=l.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new ze(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<c.length;x+=2)v=v.concat(As({key:`${o}[${x}]`,value:c[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Ru({key:`${o}[${x+1}]`,value:c[x+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:m}));return v},sprite:mm};function rc(l){let o=l.value,c=l.valueSpec,d=l.styleSpec;return l.validateSpec=rc,c.expression&&hh(gr(o))?_h(l):c.expression&&mh(Ao(o))?nc(l):c.type&&Sh[c.type]?Sh[c.type](l):qi(Qo({},l,{valueSpec:c.type?d[c.type]:c}))}function Fv(l){let o=l.value,c=l.key,d=il(l);return d.length||(o.indexOf("{fontstack}")===-1&&d.push(new ze(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&d.push(new ze(c,o,'"glyphs" url must include a "{range}" token'))),d}function so(l,o=Ce){let c=[];return c=c.concat(rc({key:"",value:l,valueSpec:o.$root,styleSpec:o,style:l,validateSpec:rc,objectElementValidators:{glyphs:Fv,"*":()=>[]}})),l.constants&&(c=c.concat(Nv({key:"constants",value:l.constants,style:l,styleSpec:o,validateSpec:rc}))),gm(c)}function is(l){return function(o){return l(Me(Z({},o),{validateSpec:rc}))}}function gm(l){return[].concat(l).sort((o,c)=>o.line-c.line)}function Mo(l){return function(...o){return gm(l.apply(this,o))}}so.source=Mo(is(ku)),so.sprite=Mo(is(mm)),so.glyphs=Mo(is(Fv)),so.light=Mo(is(hm)),so.sky=Mo(is(pm)),so.terrain=Mo(is(fm)),so.layer=Mo(is(dm)),so.filter=Mo(is(lm)),so.paintProperty=Mo(is(wh)),so.layoutProperty=Mo(is(um));let ol=so,mS=ol.light,gS=ol.sky,Ov=ol.paintProperty,Lv=ol.layoutProperty;function ym(l,o){let c=!1;if(o&&o.length)for(let d of o)l.fire(new Ks(new Error(d.message))),c=!0;return c}class ic{constructor(o,c,d){let m=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;let x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(c=x[1])+2*(d=x[2]);for(let I=0;I<this.d*this.d;I++){let A=x[3+I],M=x[3+I+1];m.push(A===M?null:x.subarray(A,M))}let b=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=d,this.scale=c/o,this.uid=0;let v=d/c*o;this.min=-v,this.max=o+v}insert(o,c,d,m,v){this._forEachCell(c,d,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,d,m,v,x){this.cells[v].push(x)}query(o,c,d,m,v){let x=this.min,b=this.max;if(o<=x&&c<=x&&b<=d&&b<=m&&!v)return Array.prototype.slice.call(this.keys);{let I=[];return this._forEachCell(o,c,d,m,this._queryCell,I,{},v),I}}_queryCell(o,c,d,m,v,x,b,I){let A=this.cells[v];if(A!==null){let M=this.keys,R=this.bboxes;for(let O=0;O<A.length;O++){let U=A[O];if(b[U]===void 0){let j=4*U;(I?I(R[j+0],R[j+1],R[j+2],R[j+3]):o<=R[j+2]&&c<=R[j+3]&&d>=R[j+0]&&m>=R[j+1])?(b[U]=!0,x.push(M[U])):b[U]=!1}}}}_forEachCell(o,c,d,m,v,x,b,I){let A=this._convertToCellCoord(o),M=this._convertToCellCoord(c),R=this._convertToCellCoord(d),O=this._convertToCellCoord(m);for(let U=A;U<=R;U++)for(let j=M;j<=O;j++){let q=this.d*j+U;if((!I||I(this._convertFromCellCoord(U),this._convertFromCellCoord(j),this._convertFromCellCoord(U+1),this._convertFromCellCoord(j+1)))&&v.call(this,o,c,d,m,q,x,b,I))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let o=this.cells,c=3+this.cells.length+1+1,d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;let m=new Int32Array(c+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=c;for(let x=0;x<o.length;x++){let b=o[x];m[3+x]=v,m.set(b,v),v+=b.length}return m[3+o.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+o.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(o,c){let d=o.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(o){return new ic(o.buffer)}}let ao={};function rt(l,o,c={}){if(ao[l])throw new Error(`${l} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:l,writeable:!1}),ao[l]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}rt("Object",Object),rt("TransferableGridIndex",ic),rt("Color",Mn),rt("Error",Error),rt("AJAXError",Vn),rt("ResolvedImage",$i),rt("StylePropertyFunction",tc),rt("StyleExpression",fh,{omit:["_evaluator"]}),rt("ZoomDependentExpression",ec),rt("ZoomConstantExpression",Ql),rt("CompoundExpression",oo,{omit:["_evaluate"]});for(let l in Wl)Wl[l]._classRegistryKey||rt(`Expression_${l}`,Wl[l]);function Ch(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function vm(l){return l.$name||l.constructor._classRegistryKey}function zv(l){return!function(o){if(o===null||typeof o!="object")return!1;let c=vm(o);return!(!c||c==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||Ch(l)||Cr(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function oc(l,o){if(zv(l))return(Ch(l)||Cr(l))&&o&&o.push(l),ArrayBuffer.isView(l)&&o&&o.push(l.buffer),l instanceof ImageData&&o&&o.push(l.data.buffer),l;if(Array.isArray(l)){let v=[];for(let x of l)v.push(oc(x,o));return v}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);let c=vm(l);if(!c)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!ao[c])throw new Error(`${c} is not registered.`);let{klass:d}=ao[c],m=d.serialize?d.serialize(l,o):{};if(d.serialize){if(o&&m===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let v in l){if(!l.hasOwnProperty(v)||ao[c].omit.indexOf(v)>=0)continue;let x=l[v];m[v]=ao[c].shallow.indexOf(v)>=0?x:oc(x,o)}l instanceof Error&&(m.message=l.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(m.$name=c),m}function sc(l){if(zv(l))return l;if(Array.isArray(l))return l.map(sc);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);let o=vm(l)||"Object";if(!ao[o])throw new Error(`can't deserialize unregistered class ${o}`);let{klass:c}=ao[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(l);let d=Object.create(c.prototype);for(let m of Object.keys(l)){if(m==="$name")continue;let v=l[m];d[m]=ao[o].shallow.indexOf(m)>=0?v:sc(v)}return d}class _m{constructor(){this.first=!0}update(o,c){let d=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=d,!0))}}let nn={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function xm(l){for(let o of l)if(bm(o.charCodeAt(0)))return!0;return!1}function yS(l){for(let o of l)if(!ac(o.charCodeAt(0)))return!1;return!0}function wm(l){let o=l.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(o.join("|"),"u")}let vS=wm(["Arab","Dupl","Mong","Ougr","Syrc"]);function ac(l){return!vS.test(String.fromCodePoint(l))}let Uv=wm(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function bm(l){return!(l!==746&&l!==747&&(l<4352||!(nn["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||nn["CJK Compatibility"](l)||nn["CJK Strokes"](l)||!(!nn["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||nn["Enclosed CJK Letters and Months"](l)||nn["Ideographic Description Characters"](l)||nn.Kanbun(l)||nn.Katakana(l)&&l!==12540||!(!nn["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!nn["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||nn["Vertical Forms"](l)||nn["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||Uv.test(String.fromCodePoint(l)))))}function Bv(l){return!(bm(l)||function(o){return!!(nn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||nn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||nn["Letterlike Symbols"](o)||nn["Number Forms"](o)||nn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||nn["Control Pictures"](o)&&o!==9251||nn["Optical Character Recognition"](o)||nn["Enclosed Alphanumerics"](o)||nn["Geometric Shapes"](o)||nn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||nn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||nn["CJK Symbols and Punctuation"](o)||nn.Katakana(o)||nn["Private Use Area"](o)||nn["CJK Compatibility Forms"](o)||nn["Small Form Variants"](o)||nn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(l))}let _S=wm(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sm(l){return _S.test(String.fromCodePoint(l))}function xS(l,o){return!(!o&&Sm(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||nn.Khmer(l))}function wS(l){for(let o of l)if(Sm(o.charCodeAt(0)))return!0;return!1}let Hi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Jn{constructor(o,c){this.zoom=o,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new _m,this.transition={})}isSupportedScript(o){return function(c,d){for(let m of c)if(!xS(m.charCodeAt(0),d))return!1;return!0}(o,Hi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let o=this.zoom,c=o-Math.floor(o),d=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class lc{constructor(o,c){this.property=o,this.value=c,this.expression=function(d,m){if(hh(d))return new tc(d,m);if(mh(d)){let v=im(d,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return m.type==="color"&&typeof d=="string"?v=Mn.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=io.parse(d)):v=ji.parse(d),{kind:"constant",evaluate:()=>v}}}(c===void 0?o.specification.default:c,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,c,d){return this.property.possiblyEvaluate(this,o,c,d)}}class Ih{constructor(o){this.property=o,this.value=new lc(o,void 0)}transitioned(o,c){return new Vv(this.property,this.value,c,Ge({},o.transition,this.transition),o.now)}untransitioned(){return new Vv(this.property,this.value,null,{},0)}}class Eh{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return nt(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ih(this._values[o].property)),this._values[o].value=new lc(this._values[o].property,c===null?void 0:nt(c))}getTransition(o){return nt(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ih(this._values[o].property)),this._values[o].transition=nt(c)||void 0}serialize(){let o={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(o[c]=d);let m=this.getTransition(c);m!==void 0&&(o[`${c}-transition`]=m)}return o}transitioned(o,c){let d=new Nu(this._properties);for(let m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(o,c._values[m]);return d}untransitioned(){let o=new Nu(this._properties);for(let c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class Vv{constructor(o,c,d,m,v){this.property=o,this.value=c,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,o.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(o,c,d){let m=o.now||0,v=this.value.possiblyEvaluate(o,c,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(o,c,d);{let b=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,c,d),v,function(I){if(I<=0)return 0;if(I>=1)return 1;let A=I*I,M=A*I;return 4*(I<.5?M:3*(I-A)+M-.75)}(b))}}return v}}class Nu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,d){let m=new Ou(this._properties);for(let v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(o,c,d);return m}hasTransition(){for(let o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Fu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return nt(this._values[o].value)}setValue(o,c){this._values[o]=new lc(this._values[o].property,c===null?void 0:nt(c))}serialize(){let o={};for(let c of Object.keys(this._values)){let d=this.getValue(c);d!==void 0&&(o[c]=d)}return o}possiblyEvaluate(o,c,d){let m=new Ou(this._properties);for(let v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(o,c,d);return m}}class os{constructor(o,c,d){this.property=o,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,c,d,m){return this.property.evaluate(this.value,this.parameters,o,c,d,m)}}class Ou{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class st{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,d){let m=Ei[this.specification.type];return m?m(o,c,d):o}}class xt{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,d,m){return new os(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},d,m)}:o.expression,c)}interpolate(o,c,d){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new os(this,{kind:"constant",value:void 0},o.parameters);let m=Ei[this.specification.type];if(m){let v=m(o.value.value,c.value.value,d);return new os(this,{kind:"constant",value:v},o.parameters)}return o}evaluate(o,c,d,m,v,x){return o.kind==="constant"?o.value:o.evaluate(c,d,m,v,x)}}class Th extends xt{possiblyEvaluate(o,c,d,m){if(o.value===void 0)return new os(this,{kind:"constant",value:void 0},c);if(o.expression.kind==="constant"){let v=o.expression.evaluate(c,null,{},d,m),x=o.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,b=this._calculate(x,x,x,c);return new os(this,{kind:"constant",value:b},c)}if(o.expression.kind==="camera"){let v=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new os(this,{kind:"constant",value:v},c)}return new os(this,o.expression,c)}evaluate(o,c,d,m,v,x){if(o.kind==="source"){let b=o.evaluate(c,d,m,v,x);return this._calculate(b,b,b,c)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},d,m),o.evaluate({zoom:Math.floor(c.zoom)},d,m),o.evaluate({zoom:Math.floor(c.zoom)+1},d,m),c):o.value}_calculate(o,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class Dh{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,m){if(o.value!==void 0){if(o.expression.kind==="constant"){let v=o.expression.evaluate(c,null,{},d,m);return this._calculate(v,v,v,c)}return this._calculate(o.expression.evaluate(new Jn(Math.floor(c.zoom-1),c)),o.expression.evaluate(new Jn(Math.floor(c.zoom),c)),o.expression.evaluate(new Jn(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class Cm{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,m){return!!o.expression.evaluate(c,null,{},d,m)}interpolate(){return!1}}class y{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in o){let d=o[c];d.specification.overridable&&this.overridableProperties.push(c);let m=this.defaultPropertyValues[c]=new lc(d,void 0),v=this.defaultTransitionablePropertyValues[c]=new Ih(d);this.defaultTransitioningPropertyValues[c]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate({})}}}rt("DataDrivenProperty",xt),rt("DataConstantProperty",st),rt("CrossFadedDataDrivenProperty",Th),rt("CrossFadedProperty",Dh),rt("ColorRampProperty",Cm);let i="-transition";class u extends Ul{constructor(o,c){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),c.layout&&(this._unevaluatedLayout=new Fu(c.layout)),c.paint)){this._transitionablePaint=new Eh(c.paint);for(let d in o.paint)this.setPaintProperty(d,o.paint[d],{validate:!1});for(let d in o.layout)this.setLayoutProperty(d,o.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ou(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,c,d={}){c!=null&&this._validate(Lv,`layers.${this.id}.layout.${o}`,o,c,d)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,c):this.visibility=c)}getPaintProperty(o){return o.endsWith(i)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,d={}){if(c!=null&&this._validate(Ov,`layers.${this.id}.paint.${o}`,o,c,d))return!1;if(o.endsWith(i))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{let m=this._transitionablePaint._values[o],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),b=m.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);let I=this._transitionablePaint._values[o].value;return I.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(o,b,I)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){let o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Mt(o,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(o,c,d,m,v={}){return(!v||v.validate!==!1)&&ym(this,o.call(ol,{key:c,layerType:this.type,objectKey:d,value:m,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let o in this.paint._values){let c=this.paint.get(o);if(c instanceof os&&Yl(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class f{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class g{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){let c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function S(l,o=1){let c=0,d=0;return{members:l.map(m=>{let v=p[m.type].BYTES_PER_ELEMENT,x=c=E(c,Math.max(o,v)),b=m.components||1;return d=Math.max(d,v),c+=v*b,{name:m.name,type:m.type,components:b,offset:x}}),size:E(c,Math.max(d,o)),alignment:o}}function E(l,o){return Math.ceil(l/o)*o}class D extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){let d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){let m=2*o;return this.int16[m+0]=c,this.int16[m+1]=d,o}}D.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",D);class P extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d){let m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){let v=3*o;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=m,o}}P.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",P);class k extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m){let v=this.length;return this.resize(v+1),this.emplace(v,o,c,d,m)}emplace(o,c,d,m,v){let x=4*o;return this.int16[x+0]=c,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=v,o}}k.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",k);class N extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){let b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,b){let I=6*o;return this.int16[I+0]=c,this.int16[I+1]=d,this.int16[I+2]=m,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=b,o}}N.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",N);class V extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){let b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,b){let I=4*o,A=8*o;return this.int16[I+0]=c,this.int16[I+1]=d,this.uint8[A+4]=m,this.uint8[A+5]=v,this.uint8[A+6]=x,this.uint8[A+7]=b,o}}V.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",V);class H extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){let d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){let m=2*o;return this.float32[m+0]=c,this.float32[m+1]=d,o}}H.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",H);class W extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,b,I,A,M){let R=this.length;return this.resize(R+1),this.emplace(R,o,c,d,m,v,x,b,I,A,M)}emplace(o,c,d,m,v,x,b,I,A,M,R){let O=10*o;return this.uint16[O+0]=c,this.uint16[O+1]=d,this.uint16[O+2]=m,this.uint16[O+3]=v,this.uint16[O+4]=x,this.uint16[O+5]=b,this.uint16[O+6]=I,this.uint16[O+7]=A,this.uint16[O+8]=M,this.uint16[O+9]=R,o}}W.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",W);class J extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,b,I,A,M,R,O){let U=this.length;return this.resize(U+1),this.emplace(U,o,c,d,m,v,x,b,I,A,M,R,O)}emplace(o,c,d,m,v,x,b,I,A,M,R,O,U){let j=12*o;return this.int16[j+0]=c,this.int16[j+1]=d,this.int16[j+2]=m,this.int16[j+3]=v,this.uint16[j+4]=x,this.uint16[j+5]=b,this.uint16[j+6]=I,this.uint16[j+7]=A,this.int16[j+8]=M,this.int16[j+9]=R,this.int16[j+10]=O,this.int16[j+11]=U,o}}J.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",J);class ne extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){let m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){let v=3*o;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,o}}ne.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",ne);class re extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){let c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}re.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",re);class ae extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,b,I,A){let M=this.length;return this.resize(M+1),this.emplace(M,o,c,d,m,v,x,b,I,A)}emplace(o,c,d,m,v,x,b,I,A,M){let R=10*o,O=5*o;return this.int16[R+0]=c,this.int16[R+1]=d,this.int16[R+2]=m,this.int16[R+3]=v,this.int16[R+4]=x,this.int16[R+5]=b,this.uint32[O+3]=I,this.uint16[R+8]=A,this.uint16[R+9]=M,o}}ae.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",ae);class K extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){let b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,b){let I=6*o;return this.int16[I+0]=c,this.int16[I+1]=d,this.int16[I+2]=m,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=b,o}}K.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",K);class ue extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v){let x=this.length;return this.resize(x+1),this.emplace(x,o,c,d,m,v)}emplace(o,c,d,m,v,x){let b=4*o,I=8*o;return this.float32[b+0]=c,this.float32[b+1]=d,this.float32[b+2]=m,this.int16[I+6]=v,this.int16[I+7]=x,o}}ue.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",ue);class he extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x){let b=this.length;return this.resize(b+1),this.emplace(b,o,c,d,m,v,x)}emplace(o,c,d,m,v,x,b){let I=16*o,A=4*o,M=8*o;return this.uint8[I+0]=c,this.uint8[I+1]=d,this.float32[A+1]=m,this.float32[A+2]=v,this.int16[M+6]=x,this.int16[M+7]=b,o}}he.prototype.bytesPerElement=16,rt("StructArrayLayout2ub2f2i16",he);class _e extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){let m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){let v=3*o;return this.uint16[v+0]=c,this.uint16[v+1]=d,this.uint16[v+2]=m,o}}_e.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",_e);class Pe extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te){let ge=this.length;return this.resize(ge+1),this.emplace(ge,o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te)}emplace(o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te,ge){let le=24*o,pe=12*o,Ie=48*o;return this.int16[le+0]=c,this.int16[le+1]=d,this.uint16[le+2]=m,this.uint16[le+3]=v,this.uint32[pe+2]=x,this.uint32[pe+3]=b,this.uint32[pe+4]=I,this.uint16[le+10]=A,this.uint16[le+11]=M,this.uint16[le+12]=R,this.float32[pe+7]=O,this.float32[pe+8]=U,this.uint8[Ie+36]=j,this.uint8[Ie+37]=q,this.uint8[Ie+38]=Y,this.uint32[pe+10]=te,this.int16[le+22]=ge,o}}Pe.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Pe);class Le extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te,ge,le,pe,Ie,Ne,Xe,_t,Ze,He,dt,ot){let tt=this.length;return this.resize(tt+1),this.emplace(tt,o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te,ge,le,pe,Ie,Ne,Xe,_t,Ze,He,dt,ot)}emplace(o,c,d,m,v,x,b,I,A,M,R,O,U,j,q,Y,te,ge,le,pe,Ie,Ne,Xe,_t,Ze,He,dt,ot,tt){let De=32*o,ht=16*o;return this.int16[De+0]=c,this.int16[De+1]=d,this.int16[De+2]=m,this.int16[De+3]=v,this.int16[De+4]=x,this.int16[De+5]=b,this.int16[De+6]=I,this.int16[De+7]=A,this.uint16[De+8]=M,this.uint16[De+9]=R,this.uint16[De+10]=O,this.uint16[De+11]=U,this.uint16[De+12]=j,this.uint16[De+13]=q,this.uint16[De+14]=Y,this.uint16[De+15]=te,this.uint16[De+16]=ge,this.uint16[De+17]=le,this.uint16[De+18]=pe,this.uint16[De+19]=Ie,this.uint16[De+20]=Ne,this.uint16[De+21]=Xe,this.uint16[De+22]=_t,this.uint32[ht+12]=Ze,this.float32[ht+13]=He,this.float32[ht+14]=dt,this.uint16[De+30]=ot,this.uint16[De+31]=tt,o}}Le.prototype.bytesPerElement=64,rt("StructArrayLayout8i15ui1ul2f2ui64",Le);class We extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){let c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}We.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",We);class Je extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){let m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){let v=3*o;return this.uint16[6*o+0]=c,this.float32[v+1]=d,this.float32[v+2]=m,o}}Je.prototype.bytesPerElement=12,rt("StructArrayLayout1ui2f12",Je);class je extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){let m=this.length;return this.resize(m+1),this.emplace(m,o,c,d)}emplace(o,c,d,m){let v=4*o;return this.uint32[2*o+0]=c,this.uint16[v+2]=d,this.uint16[v+3]=m,o}}je.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",je);class Be extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){let d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){let m=2*o;return this.uint16[m+0]=c,this.uint16[m+1]=d,o}}Be.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",Be);class at extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){let c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}at.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",at);class Dt extends g{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,m){let v=this.length;return this.resize(v+1),this.emplace(v,o,c,d,m)}emplace(o,c,d,m,v){let x=4*o;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=v,o}}Dt.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",Dt);class qe extends f{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new C(this.anchorPointX,this.anchorPointY)}}qe.prototype.size=20;class Ke extends ae{get(o){return new qe(this,o)}}rt("CollisionBoxArray",Ke);class Et extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Et.prototype.size=48;class Qn extends Pe{get(o){return new Et(this,o)}}rt("PlacedSymbolArray",Qn);class Vt extends f{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Vt.prototype.size=64;class Xt extends Le{get(o){return new Vt(this,o)}}rt("SymbolInstanceArray",Xt);class er extends We{getoffsetX(o){return this.float32[1*o+0]}}rt("GlyphOffsetArray",er);class ii extends P{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}rt("SymbolLineVertexArray",ii);class Po extends f{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Po.prototype.size=12;class tr extends Je{get(o){return new Po(this,o)}}rt("TextAnchorOffsetArray",tr);class Di extends f{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Di.prototype.size=8;class vi extends je{get(o){return new Di(this,o)}}rt("FeatureIndexArray",vi);class oi extends D{}class _i extends D{}class ss extends D{}class cc extends N{}class Ah extends V{}class uc extends H{}class lo extends W{}class Mh extends J{}class Im extends ne{}class co extends re{}class uo extends K{}class ta extends he{}class Ro extends _e{}class Xr extends Be{}let si=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:Gi}=si;class rn{constructor(o=[]){this.segments=o}prepareSegment(o,c,d,m){let v=this.segments[this.segments.length-1];return o>rn.MAX_VERTEX_ARRAY_LENGTH&&vt(`Max vertices per segment is ${rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!v||v.vertexLength+o>rn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:c.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(let o of this.segments)for(let c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,d,m){return new rn([{vertexOffset:o,primitiveOffset:c,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function sl(l,o){return 256*(l=ke(Math.floor(l),0,255))+ke(Math.floor(o),0,255)}rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",rn);let dc=S([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var hc={exports:{}},jv={exports:{}};jv.exports=function(l,o){var c,d,m,v,x,b,I,A;for(d=l.length-(c=3&l.length),m=o,x=3432918353,b=461845907,A=0;A<d;)I=255&l.charCodeAt(A)|(255&l.charCodeAt(++A))<<8|(255&l.charCodeAt(++A))<<16|(255&l.charCodeAt(++A))<<24,++A,m=27492+(65535&(v=5*(65535&(m=(m^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*b+(((I>>>16)*b&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,c){case 3:I^=(255&l.charCodeAt(A+2))<<16;case 2:I^=(255&l.charCodeAt(A+1))<<8;case 1:m^=I=(65535&(I=(I=(65535&(I^=255&l.charCodeAt(A)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*b+(((I>>>16)*b&65535)<<16)&4294967295}return m^=l.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var bS=jv.exports,$v={exports:{}};$v.exports=function(l,o){for(var c,d=l.length,m=o^d,v=0;d>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(v)|(255&l.charCodeAt(++v))<<8|(255&l.charCodeAt(++v))<<16|(255&l.charCodeAt(++v))<<24))+((1540483477*(c>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:m^=(255&l.charCodeAt(v+2))<<16;case 2:m^=(255&l.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&l.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var na=bS,qv=$v.exports;hc.exports=na,hc.exports.murmur3=na,hc.exports.murmur2=qv;var Ph=h(hc.exports);class Lu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,d,m){this.ids.push(Rh(o)),this.positions.push(c,d,m)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=Rh(o),d=0,m=this.ids.length-1;for(;d<m;){let x=d+m>>1;this.ids[x]>=c?m=x:d=x+1}let v=[];for(;this.ids[d]===c;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(o,c){let d=new Float64Array(o.ids),m=new Uint32Array(o.positions);return kh(d,m,0,d.length-1),c&&c.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(o){let c=new Lu;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function Rh(l){let o=+l;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Ph(String(l))}function kh(l,o,c,d){for(;c<d;){let m=l[c+d>>1],v=c-1,x=d+1;for(;;){do v++;while(l[v]<m);do x--;while(l[x]>m);if(v>=x)break;pc(l,v,x),pc(o,3*v,3*x),pc(o,3*v+1,3*x+1),pc(o,3*v+2,3*x+2)}x-c<d-x?(kh(l,o,c,x),c=x+1):(kh(l,o,x+1,d),d=x)}}function pc(l,o,c){let d=l[o];l[o]=l[c],l[c]=d}rt("FeaturePositionMap",Lu);class zu{constructor(o,c){this.gl=o.gl,this.location=c}}class Hv extends zu{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class DA extends zu{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class AA extends zu{constructor(o,c){super(o,c),this.current=Mn.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}let w8=new Float32Array(16);function SS(l){return[sl(255*l.r,255*l.g),sl(255*l.b,255*l.a)]}class Em{constructor(o,c,d){this.value=o,this.uniformNames=c.map(m=>`u_${m}`),this.type=d}setUniform(o,c,d){o.set(d.constantOr(this.value))}getBinding(o,c,d){return this.type==="color"?new AA(o,c):new Hv(o,c)}}class Nh{constructor(o,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setUniform(o,c,d,m){let v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&o.set(v)}getBinding(o,c,d){return d.substr(0,9)==="u_pattern"?new DA(o,c):new Hv(o,c)}}class al{constructor(o,c,d,m){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(o,c,d,m,v){let x=this.paintVertexArray.length,b=this.expression.evaluate(new Jn(0),c,{},m,[],v);this.paintVertexArray.resize(o),this._setPaintValue(x,o,b)}updatePaintArray(o,c,d,m){let v=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(o,c,v)}_setPaintValue(o,c,d){if(this.type==="color"){let m=SS(d);for(let v=o;v<c;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=o;m<c;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ms{constructor(o,c,d,m,v,x){this.expression=o,this.uniformNames=c.map(b=>`u_${b}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=c.map(b=>({name:`a_${b}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,c,d,m,v){let x=this.expression.evaluate(new Jn(this.zoom),c,{},m,[],v),b=this.expression.evaluate(new Jn(this.zoom+1),c,{},m,[],v),I=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(I,o,x,b)}updatePaintArray(o,c,d,m){let v=this.expression.evaluate({zoom:this.zoom},d,m),x=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(o,c,v,x)}_setPaintValue(o,c,d,m){if(this.type==="color"){let v=SS(d),x=SS(m);for(let b=o;b<c;b++)this.paintVertexArray.emplace(b,v[0],v[1],x[0],x[1])}else{for(let v=o;v<c;v++)this.paintVertexArray.emplace(v,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){let d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,m=ke(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);o.set(m)}getBinding(o,c,d){return new Hv(o,c)}}class fc{constructor(o,c,d,m,v,x){this.expression=o,this.type=c,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(o,c,d){let m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(m,o,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(o,c,d,m,v){this._setPaintValues(o,c,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(o,c,d,m){if(!m||!d)return;let{min:v,mid:x,max:b}=d,I=m[v],A=m[x],M=m[b];if(I&&A&&M)for(let R=o;R<c;R++)this.zoomInPaintVertexArray.emplace(R,A.tl[0],A.tl[1],A.br[0],A.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],A.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,A.tl[0],A.tl[1],A.br[0],A.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],A.pixelRatio,M.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,dc.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,dc.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class MA{constructor(o,c,d){this.binders={},this._buffers=[];let m=[];for(let v in o.paint._values){if(!d(v))continue;let x=o.paint.get(v);if(!(x instanceof os&&Yl(x.property.specification)))continue;let b=b8(v,o.type),I=x.value,A=x.property.specification.type,M=x.property.useIntegerZoom,R=x.property.specification["property-type"],O=R==="cross-faded"||R==="cross-faded-data-driven";if(I.kind==="constant")this.binders[v]=O?new Nh(I.value,b):new Em(I.value,b,A),m.push(`/u_${v}`);else if(I.kind==="source"||O){let U=PA(v,A,"source");this.binders[v]=O?new fc(I,A,M,c,U,o.id):new al(I,b,A,U),m.push(`/a_${v}`)}else{let U=PA(v,A,"composite");this.binders[v]=new Ms(I,b,A,M,c,U),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(o){let c=this.binders[o];return c instanceof al||c instanceof Ms?c.maxValue:0}populatePaintArrays(o,c,d,m,v){for(let x in this.binders){let b=this.binders[x];(b instanceof al||b instanceof Ms||b instanceof fc)&&b.populatePaintArray(o,c,d,m,v)}}setConstantPatternPositions(o,c){for(let d in this.binders){let m=this.binders[d];m instanceof Nh&&m.setConstantPatternPositions(o,c)}}updatePaintArrays(o,c,d,m,v){let x=!1;for(let b in o){let I=c.getPositions(b);for(let A of I){let M=d.feature(A.index);for(let R in this.binders){let O=this.binders[R];if((O instanceof al||O instanceof Ms||O instanceof fc)&&O.expression.isStateDependent===!0){let U=m.paint.get(R);O.expression=U.value,O.updatePaintArray(A.start,A.end,M,o[b],v),x=!0}}}}return x}defines(){let o=[];for(let c in this.binders){let d=this.binders[c];(d instanceof Em||d instanceof Nh)&&o.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return o}getBinderAttributes(){let o=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof al||d instanceof Ms)for(let m=0;m<d.paintVertexAttributes.length;m++)o.push(d.paintVertexAttributes[m].name);else if(d instanceof fc)for(let m=0;m<dc.members.length;m++)o.push(dc.members[m].name)}return o}getBinderUniforms(){let o=[];for(let c in this.binders){let d=this.binders[c];if(d instanceof Em||d instanceof Nh||d instanceof Ms)for(let m of d.uniformNames)o.push(m)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){let d=[];for(let m in this.binders){let v=this.binders[m];if(v instanceof Em||v instanceof Nh||v instanceof Ms){for(let x of v.uniformNames)if(c[x]){let b=v.getBinding(o,c[x],x);d.push({name:x,property:m,binding:b})}}}return d}setUniforms(o,c,d,m){for(let{name:v,property:x,binding:b}of c)this.binders[x].setUniform(b,m,d.get(x),v)}updatePaintBuffers(o){this._buffers=[];for(let c in this.binders){let d=this.binders[c];if(o&&d instanceof fc){let m=o.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof al||d instanceof Ms)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(let c in this.binders){let d=this.binders[c];(d instanceof al||d instanceof Ms||d instanceof fc)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(let o in this.binders){let c=this.binders[o];(c instanceof al||c instanceof Ms||c instanceof fc)&&c.destroy()}}}class Uu{constructor(o,c,d=()=>!0){this.programConfigurations={};for(let m of o)this.programConfigurations[m.id]=new MA(m,c,d);this.needsUpload=!1,this._featureMap=new Lu,this._bufferOffset=0}populatePaintArrays(o,c,d,m,v,x){for(let b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(o,c,m,v,x);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,d,m){for(let v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(o,this._featureMap,c,v,m)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(let o in this.programConfigurations)this.programConfigurations[o].destroy()}}function b8(l,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}function PA(l,o,c){let d={color:{source:H,composite:Dt},number:{source:We,composite:H}},m=function(v){return{"line-pattern":{source:lo,composite:lo},"fill-pattern":{source:lo,composite:lo},"fill-extrusion-pattern":{source:lo,composite:lo}}[v]}(l);return m&&m[c]||d[o][c]}rt("ConstantBinder",Em),rt("CrossFadedConstantBinder",Nh),rt("SourceExpressionBinder",al),rt("CrossFadedCompositeBinder",fc),rt("CompositeExpressionBinder",Ms),rt("ProgramConfiguration",MA,{omit:["_buffers"]}),rt("ProgramConfigurationSet",Uu);let Tr=8192,CS=Math.pow(2,14)-1,RA=-CS-1;function Bu(l){let o=Tr/l.extent,c=l.loadGeometry();for(let d=0;d<c.length;d++){let m=c[d];for(let v=0;v<m.length;v++){let x=m[v],b=Math.round(x.x*o),I=Math.round(x.y*o);x.x=ke(b,RA,CS),x.y=ke(I,RA,CS),(b<x.x||b>x.x+1||I<x.y||I>x.y+1)&&vt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function Vu(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?Bu(l):[]}}function Gv(l,o,c,d,m){l.emplaceBack(2*o+(d+1)/2,2*c+(m+1)/2)}class IS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new _i,this.indexArray=new Ro,this.segments=new rn,this.programConfigurations=new Uu(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){let m=this.layers[0],v=[],x=null,b=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),b=!x.isConstant());for(let{feature:I,id:A,index:M,sourceLayerIndex:R}of o){let O=this.layers[0]._featureFilter.needGeometry,U=Vu(I,O);if(!this.layers[0]._featureFilter.filter(new Jn(this.zoom),U,d))continue;let j=b?x.evaluate(U,{},d):void 0,q={id:A,properties:I.properties,type:I.type,sourceLayerIndex:R,index:M,geometry:O?U.geometry:Bu(I),patterns:{},sortKey:j};v.push(q)}b&&v.sort((I,A)=>I.sortKey-A.sortKey);for(let I of v){let{geometry:A,index:M,sourceLayerIndex:R}=I,O=o[M].feature;this.addFeature(I,A,M,d),c.featureIndex.insert(O,A,M,R,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Gi),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,d,m){for(let v of c)for(let x of v){let b=x.x,I=x.y;if(b<0||b>=Tr||I<0||I>=Tr)continue;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),M=A.vertexLength;Gv(this.layoutVertexArray,b,I,-1,-1),Gv(this.layoutVertexArray,b,I,1,-1),Gv(this.layoutVertexArray,b,I,1,1),Gv(this.layoutVertexArray,b,I,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},m)}}function kA(l,o){for(let c=0;c<l.length;c++)if(Fh(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(Fh(l,o[c]))return!0;return!!ES(l,o)}function S8(l,o,c){return!!Fh(l,o)||!!TS(o,l,c)}function NA(l,o){if(l.length===1)return OA(o,l[0]);for(let c=0;c<o.length;c++){let d=o[c];for(let m=0;m<d.length;m++)if(Fh(l,d[m]))return!0}for(let c=0;c<l.length;c++)if(OA(o,l[c]))return!0;for(let c=0;c<o.length;c++)if(ES(l,o[c]))return!0;return!1}function C8(l,o,c){if(l.length>1){if(ES(l,o))return!0;for(let d=0;d<o.length;d++)if(TS(o[d],l,c))return!0}for(let d=0;d<l.length;d++)if(TS(l[d],o,c))return!0;return!1}function ES(l,o){if(l.length===0||o.length===0)return!1;for(let c=0;c<l.length-1;c++){let d=l[c],m=l[c+1];for(let v=0;v<o.length-1;v++)if(I8(d,m,o[v],o[v+1]))return!0}return!1}function I8(l,o,c,d){return Ut(l,c,d)!==Ut(o,c,d)&&Ut(l,o,c)!==Ut(l,o,d)}function TS(l,o,c){let d=c*c;if(o.length===1)return l.distSqr(o[0])<d;for(let m=1;m<o.length;m++)if(FA(l,o[m-1],o[m])<d)return!0;return!1}function FA(l,o,c){let d=o.distSqr(c);if(d===0)return l.distSqr(o);let m=((l.x-o.x)*(c.x-o.x)+(l.y-o.y)*(c.y-o.y))/d;return l.distSqr(m<0?o:m>1?c:c.sub(o)._mult(m)._add(o))}function OA(l,o){let c,d,m,v=!1;for(let x=0;x<l.length;x++){c=l[x];for(let b=0,I=c.length-1;b<c.length;I=b++)d=c[b],m=c[I],d.y>o.y!=m.y>o.y&&o.x<(m.x-d.x)*(o.y-d.y)/(m.y-d.y)+d.x&&(v=!v)}return v}function Fh(l,o){let c=!1;for(let d=0,m=l.length-1;d<l.length;m=d++){let v=l[d],x=l[m];v.y>o.y!=x.y>o.y&&o.x<(x.x-v.x)*(o.y-v.y)/(x.y-v.y)+v.x&&(c=!c)}return c}function E8(l,o,c){let d=c[0],m=c[2];if(l.x<d.x&&o.x<d.x||l.x>m.x&&o.x>m.x||l.y<d.y&&o.y<d.y||l.y>m.y&&o.y>m.y)return!1;let v=Ut(l,o,c[0]);return v!==Ut(l,o,c[1])||v!==Ut(l,o,c[2])||v!==Ut(l,o,c[3])}function Tm(l,o,c){let d=o.paint.get(l).value;return d.kind==="constant"?d.value:c.programConfigurations.get(o.id).getMaxValue(l)}function Wv(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function Zv(l,o,c,d,m){if(!o[0]&&!o[1])return l;let v=C.convert(o)._mult(m);c==="viewport"&&v._rotate(-d);let x=[];for(let b=0;b<l.length;b++)x.push(l[b].sub(v));return x}let LA,zA;rt("CircleBucket",IS,{omit:["layers"]});var T8={get paint(){return zA=zA||new y({"circle-radius":new xt(Ce.paint_circle["circle-radius"]),"circle-color":new xt(Ce.paint_circle["circle-color"]),"circle-blur":new xt(Ce.paint_circle["circle-blur"]),"circle-opacity":new xt(Ce.paint_circle["circle-opacity"]),"circle-translate":new st(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new st(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new st(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new st(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(Ce.paint_circle["circle-stroke-opacity"])})},get layout(){return LA=LA||new y({"circle-sort-key":new xt(Ce.layout_circle["circle-sort-key"])})}},Ai=1e-6,Oh=typeof Float32Array<"u"?Float32Array:Array;function DS(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function UA(l,o,c){var d=o[0],m=o[1],v=o[2],x=o[3],b=o[4],I=o[5],A=o[6],M=o[7],R=o[8],O=o[9],U=o[10],j=o[11],q=o[12],Y=o[13],te=o[14],ge=o[15],le=c[0],pe=c[1],Ie=c[2],Ne=c[3];return l[0]=le*d+pe*b+Ie*R+Ne*q,l[1]=le*m+pe*I+Ie*O+Ne*Y,l[2]=le*v+pe*A+Ie*U+Ne*te,l[3]=le*x+pe*M+Ie*j+Ne*ge,l[4]=(le=c[4])*d+(pe=c[5])*b+(Ie=c[6])*R+(Ne=c[7])*q,l[5]=le*m+pe*I+Ie*O+Ne*Y,l[6]=le*v+pe*A+Ie*U+Ne*te,l[7]=le*x+pe*M+Ie*j+Ne*ge,l[8]=(le=c[8])*d+(pe=c[9])*b+(Ie=c[10])*R+(Ne=c[11])*q,l[9]=le*m+pe*I+Ie*O+Ne*Y,l[10]=le*v+pe*A+Ie*U+Ne*te,l[11]=le*x+pe*M+Ie*j+Ne*ge,l[12]=(le=c[12])*d+(pe=c[13])*b+(Ie=c[14])*R+(Ne=c[15])*q,l[13]=le*m+pe*I+Ie*O+Ne*Y,l[14]=le*v+pe*A+Ie*U+Ne*te,l[15]=le*x+pe*M+Ie*j+Ne*ge,l}Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var Dm,D8=UA;function Kv(l,o,c){var d=o[0],m=o[1],v=o[2],x=o[3];return l[0]=c[0]*d+c[4]*m+c[8]*v+c[12]*x,l[1]=c[1]*d+c[5]*m+c[9]*v+c[13]*x,l[2]=c[2]*d+c[6]*m+c[10]*v+c[14]*x,l[3]=c[3]*d+c[7]*m+c[11]*v+c[15]*x,l}Dm=new Oh(4),Oh!=Float32Array&&(Dm[0]=0,Dm[1]=0,Dm[2]=0,Dm[3]=0);class A8 extends u{constructor(o){super(o,T8)}createBucket(o){return new IS(o)}queryRadius(o){let c=o;return Tm("circle-radius",this,c)+Tm("circle-stroke-width",this,c)+Wv(this.paint.get("circle-translate"))}queryIntersectsFeature(o,c,d,m,v,x,b,I){let A=Zv(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),M=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),R=this.paint.get("circle-pitch-alignment")==="map",O=R?A:function(j,q){return j.map(Y=>BA(Y,q))}(A,I),U=R?M*b:M;for(let j of m)for(let q of j){let Y=R?q:BA(q,I),te=U,ge=Kv([],[q.x,q.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?te*=ge[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(te*=x.cameraToCenterDistance/ge[3]),S8(O,Y,te))return!0}return!1}}function BA(l,o){let c=Kv([],[l.x,l.y,0,1],o);return new C(c[0]/c[3],c[1]/c[3])}class VA extends IS{}let jA;rt("HeatmapBucket",VA,{omit:["layers"]});var M8={get paint(){return jA=jA||new y({"heatmap-radius":new xt(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new st(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Cm(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new st(Ce.paint_heatmap["heatmap-opacity"])})}};function AS(l,{width:o,height:c},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==o*c*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${o*c*d}`)}else m=new Uint8Array(o*c*d);return l.width=o,l.height=c,l.data=m,l}function $A(l,{width:o,height:c},d){if(o===l.width&&c===l.height)return;let m=AS({},{width:o,height:c},d);MS(l,m,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,o),height:Math.min(l.height,c)},d),l.width=o,l.height=c,l.data=m.data}function MS(l,o,c,d,m,v){if(m.width===0||m.height===0)return o;if(m.width>l.width||m.height>l.height||c.x>l.width-m.width||c.y>l.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>o.width||m.height>o.height||d.x>o.width-m.width||d.y>o.height-m.height)throw new RangeError("out of range destination coordinates for image copy");let x=l.data,b=o.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<m.height;I++){let A=((c.y+I)*l.width+c.x)*v,M=((d.y+I)*o.width+d.x)*v;for(let R=0;R<m.width*v;R++)b[M+R]=x[A+R]}return o}class Am{constructor(o,c){AS(this,o,1,c)}resize(o){$A(this,o,1)}clone(){return new Am({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,m,v){MS(o,c,d,m,v,1)}}class ko{constructor(o,c){AS(this,o,4,c)}resize(o){$A(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,m,v){MS(o,c,d,m,v,4)}}function qA(l){let o={},c=l.resolution||256,d=l.clips?l.clips.length:1,m=l.image||new ko({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let v=(x,b,I)=>{o[l.evaluationKey]=I;let A=l.expression.evaluate(o);m.data[x+b+0]=Math.floor(255*A.r/A.a),m.data[x+b+1]=Math.floor(255*A.g/A.a),m.data[x+b+2]=Math.floor(255*A.b/A.a),m.data[x+b+3]=Math.floor(255*A.a)};if(l.clips)for(let x=0,b=0;x<d;++x,b+=4*c)for(let I=0,A=0;I<c;I++,A+=4){let M=I/(c-1),{start:R,end:O}=l.clips[x];v(b,A,R*(1-M)+O*M)}else for(let x=0,b=0;x<c;x++,b+=4)v(0,b,x/(c-1));return m}rt("AlphaImage",Am),rt("RGBAImage",ko);let PS="big-fb";class P8 extends u{createBucket(o){return new VA(o)}constructor(o){super(o,M8),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(PS)&&this.heatmapFbos.delete(PS)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let HA;var R8={get paint(){return HA=HA||new y({"hillshade-illumination-direction":new st(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new st(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new st(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new st(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new st(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new st(Ce.paint_hillshade["hillshade-accent-color"])})}};class k8 extends u{constructor(o){super(o,R8)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let N8=S([{name:"a_pos",components:2,type:"Int16"}],4),{members:F8}=N8;function GA(l,o,c=2){let d=o&&o.length,m=d?o[0]*c:l.length,v=WA(l,0,m,c,!0),x=[];if(!v||v.next===v.prev)return x;let b,I,A;if(d&&(v=function(M,R,O,U){let j=[];for(let q=0,Y=R.length;q<Y;q++){let te=WA(M,R[q]*U,q<Y-1?R[q+1]*U:M.length,U,!1);te===te.next&&(te.steiner=!0),j.push($8(te))}j.sort(B8);for(let q=0;q<j.length;q++)O=V8(j[q],O);return O}(l,o,v,c)),l.length>80*c){b=1/0,I=1/0;let M=-1/0,R=-1/0;for(let O=c;O<m;O+=c){let U=l[O],j=l[O+1];U<b&&(b=U),j<I&&(I=j),U>M&&(M=U),j>R&&(R=j)}A=Math.max(M-b,R-I),A=A!==0?32767/A:0}return Mm(v,x,c,b,I,A,0),x}function WA(l,o,c,d,m){let v;if(m===function(x,b,I,A){let M=0;for(let R=b,O=I-A;R<I;R+=A)M+=(x[O]-x[R])*(x[R+1]+x[O+1]),O=R;return M}(l,o,c,d)>0)for(let x=o;x<c;x+=d)v=YA(x/d|0,l[x],l[x+1],v);else for(let x=c-d;x>=o;x-=d)v=YA(x/d|0,l[x],l[x+1],v);return v&&Yv(v,v.next)&&(Rm(v),v=v.next),v}function ju(l,o){if(!l)return l;o||(o=l);let c,d=l;do if(c=!1,d.steiner||!Yv(d,d.next)&&wr(d.prev,d,d.next)!==0)d=d.next;else{if(Rm(d),d=o=d.prev,d===d.next)break;c=!0}while(c||d!==o);return o}function Mm(l,o,c,d,m,v,x){if(!l)return;!x&&v&&function(I,A,M,R){let O=I;do O.z===0&&(O.z=RS(O.x,O.y,A,M,R)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==I);O.prevZ.nextZ=null,O.prevZ=null,function(U){let j,q=1;do{let Y,te=U;U=null;let ge=null;for(j=0;te;){j++;let le=te,pe=0;for(let Ne=0;Ne<q&&(pe++,le=le.nextZ,le);Ne++);let Ie=q;for(;pe>0||Ie>0&&le;)pe!==0&&(Ie===0||!le||te.z<=le.z)?(Y=te,te=te.nextZ,pe--):(Y=le,le=le.nextZ,Ie--),ge?ge.nextZ=Y:U=Y,Y.prevZ=ge,ge=Y;te=le}ge.nextZ=null,q*=2}while(j>1)}(O)}(l,d,m,v);let b=l;for(;l.prev!==l.next;){let I=l.prev,A=l.next;if(v?L8(l,d,m,v):O8(l))o.push(I.i,l.i,A.i),Rm(l),l=A.next,b=A.next;else if((l=A)===b){x?x===1?Mm(l=z8(ju(l),o),o,c,d,m,v,2):x===2&&U8(l,o,c,d,m,v):Mm(ju(l),o,c,d,m,v,1);break}}}function O8(l){let o=l.prev,c=l,d=l.next;if(wr(o,c,d)>=0)return!1;let m=o.x,v=c.x,x=d.x,b=o.y,I=c.y,A=d.y,M=m<v?m<x?m:x:v<x?v:x,R=b<I?b<A?b:A:I<A?I:A,O=m>v?m>x?m:x:v>x?v:x,U=b>I?b>A?b:A:I>A?I:A,j=d.next;for(;j!==o;){if(j.x>=M&&j.x<=O&&j.y>=R&&j.y<=U&&Lh(m,b,v,I,x,A,j.x,j.y)&&wr(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function L8(l,o,c,d){let m=l.prev,v=l,x=l.next;if(wr(m,v,x)>=0)return!1;let b=m.x,I=v.x,A=x.x,M=m.y,R=v.y,O=x.y,U=b<I?b<A?b:A:I<A?I:A,j=M<R?M<O?M:O:R<O?R:O,q=b>I?b>A?b:A:I>A?I:A,Y=M>R?M>O?M:O:R>O?R:O,te=RS(U,j,o,c,d),ge=RS(q,Y,o,c,d),le=l.prevZ,pe=l.nextZ;for(;le&&le.z>=te&&pe&&pe.z<=ge;){if(le.x>=U&&le.x<=q&&le.y>=j&&le.y<=Y&&le!==m&&le!==x&&Lh(b,M,I,R,A,O,le.x,le.y)&&wr(le.prev,le,le.next)>=0||(le=le.prevZ,pe.x>=U&&pe.x<=q&&pe.y>=j&&pe.y<=Y&&pe!==m&&pe!==x&&Lh(b,M,I,R,A,O,pe.x,pe.y)&&wr(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;le&&le.z>=te;){if(le.x>=U&&le.x<=q&&le.y>=j&&le.y<=Y&&le!==m&&le!==x&&Lh(b,M,I,R,A,O,le.x,le.y)&&wr(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;pe&&pe.z<=ge;){if(pe.x>=U&&pe.x<=q&&pe.y>=j&&pe.y<=Y&&pe!==m&&pe!==x&&Lh(b,M,I,R,A,O,pe.x,pe.y)&&wr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function z8(l,o){let c=l;do{let d=c.prev,m=c.next.next;!Yv(d,m)&&ZA(d,c,c.next,m)&&Pm(d,m)&&Pm(m,d)&&(o.push(d.i,c.i,m.i),Rm(c),Rm(c.next),c=l=m),c=c.next}while(c!==l);return ju(c)}function U8(l,o,c,d,m,v){let x=l;do{let b=x.next.next;for(;b!==x.prev;){if(x.i!==b.i&&q8(x,b)){let I=KA(x,b);return x=ju(x,x.next),I=ju(I,I.next),Mm(x,o,c,d,m,v,0),void Mm(I,o,c,d,m,v,0)}b=b.next}x=x.next}while(x!==l)}function B8(l,o){return l.x-o.x}function V8(l,o){let c=function(m,v){let x=v,b=m.x,I=m.y,A,M=-1/0;do{if(I<=x.y&&I>=x.next.y&&x.next.y!==x.y){let q=x.x+(I-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(q<=b&&q>M&&(M=q,A=x.x<x.next.x?x:x.next,q===b))return A}x=x.next}while(x!==v);if(!A)return null;let R=A,O=A.x,U=A.y,j=1/0;x=A;do{if(b>=x.x&&x.x>=O&&b!==x.x&&Lh(I<U?b:M,I,O,U,I<U?M:b,I,x.x,x.y)){let q=Math.abs(I-x.y)/(b-x.x);Pm(x,m)&&(q<j||q===j&&(x.x>A.x||x.x===A.x&&j8(A,x)))&&(A=x,j=q)}x=x.next}while(x!==R);return A}(l,o);if(!c)return o;let d=KA(c,l);return ju(d,d.next),ju(c,c.next)}function j8(l,o){return wr(l.prev,l,o.prev)<0&&wr(o.next,l,l.next)<0}function RS(l,o,c,d,m){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*m|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*m|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function $8(l){let o=l,c=l;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==l);return c}function Lh(l,o,c,d,m,v,x,b){return(m-x)*(o-b)>=(l-x)*(v-b)&&(l-x)*(d-b)>=(c-x)*(o-b)&&(c-x)*(v-b)>=(m-x)*(d-b)}function q8(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(c,d){let m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==d.i&&m.next.i!==d.i&&ZA(m,m.next,c,d))return!0;m=m.next}while(m!==c);return!1}(l,o)&&(Pm(l,o)&&Pm(o,l)&&function(c,d){let m=c,v=!1,x=(c.x+d.x)/2,b=(c.y+d.y)/2;do m.y>b!=m.next.y>b&&m.next.y!==m.y&&x<(m.next.x-m.x)*(b-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==c);return v}(l,o)&&(wr(l.prev,l,o.prev)||wr(l,o.prev,o))||Yv(l,o)&&wr(l.prev,l,l.next)>0&&wr(o.prev,o,o.next)>0)}function wr(l,o,c){return(o.y-l.y)*(c.x-o.x)-(o.x-l.x)*(c.y-o.y)}function Yv(l,o){return l.x===o.x&&l.y===o.y}function ZA(l,o,c,d){let m=Jv(wr(l,o,c)),v=Jv(wr(l,o,d)),x=Jv(wr(c,d,l)),b=Jv(wr(c,d,o));return m!==v&&x!==b||!(m!==0||!Xv(l,c,o))||!(v!==0||!Xv(l,d,o))||!(x!==0||!Xv(c,l,d))||!(b!==0||!Xv(c,o,d))}function Xv(l,o,c){return o.x<=Math.max(l.x,c.x)&&o.x>=Math.min(l.x,c.x)&&o.y<=Math.max(l.y,c.y)&&o.y>=Math.min(l.y,c.y)}function Jv(l){return l>0?1:l<0?-1:0}function Pm(l,o){return wr(l.prev,l,l.next)<0?wr(l,o,l.next)>=0&&wr(l,l.prev,o)>=0:wr(l,o,l.prev)<0||wr(l,l.next,o)<0}function KA(l,o){let c=kS(l.i,l.x,l.y),d=kS(o.i,o.x,o.y),m=l.next,v=o.prev;return l.next=o,o.prev=l,c.next=m,m.prev=c,d.next=c,c.prev=d,v.next=d,d.prev=v,d}function YA(l,o,c,d){let m=kS(l,o,c);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function Rm(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function kS(l,o,c){return{i:l,x:o,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function NS(l,o,c){let d=c.patternDependencies,m=!1;for(let v of o){let x=v.paint.get(`${l}-pattern`);x.isConstant()||(m=!0);let b=x.constantOr(null);b&&(m=!0,d[b.to]=!0,d[b.from]=!0)}return m}function FS(l,o,c,d,m){let v=m.patternDependencies;for(let x of o){let b=x.paint.get(`${l}-pattern`).value;if(b.kind!=="constant"){let I=b.evaluate({zoom:d-1},c,{},m.availableImages),A=b.evaluate({zoom:d},c,{},m.availableImages),M=b.evaluate({zoom:d+1},c,{},m.availableImages);I=I&&I.name?I.name:I,A=A&&A.name?A.name:A,M=M&&M.name?M.name:M,v[I]=!0,v[A]=!0,v[M]=!0,c.patterns[x.id]={min:I,mid:A,max:M}}}return c}class OS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ss,this.indexArray=new Ro,this.indexArray2=new Xr,this.programConfigurations=new Uu(o.layers,o.zoom),this.segments=new rn,this.segments2=new rn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=NS("fill",this.layers,c);let m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(let{feature:b,id:I,index:A,sourceLayerIndex:M}of o){let R=this.layers[0]._featureFilter.needGeometry,O=Vu(b,R);if(!this.layers[0]._featureFilter.filter(new Jn(this.zoom),O,d))continue;let U=v?m.evaluate(O,{},d,c.availableImages):void 0,j={id:I,properties:b.properties,type:b.type,sourceLayerIndex:M,index:A,geometry:R?O.geometry:Bu(b),patterns:{},sortKey:U};x.push(j)}v&&x.sort((b,I)=>b.sortKey-I.sortKey);for(let b of x){let{geometry:I,index:A,sourceLayerIndex:M}=b;if(this.hasPattern){let R=FS("fill",this.layers,b,this.zoom,c);this.patternFeatures.push(R)}else this.addFeature(b,I,A,d,{});c.featureIndex.insert(o[A].feature,I,A,M,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,F8),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,d,m,v){for(let x of ah(c,500)){let b=0;for(let U of x)b+=U.length;let I=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),A=I.vertexLength,M=[],R=[];for(let U of x){if(U.length===0)continue;U!==x[0]&&R.push(M.length/2);let j=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),q=j.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(q+U.length-1,q),M.push(U[0].x),M.push(U[0].y);for(let Y=1;Y<U.length;Y++)this.layoutVertexArray.emplaceBack(U[Y].x,U[Y].y),this.indexArray2.emplaceBack(q+Y-1,q+Y),M.push(U[Y].x),M.push(U[Y].y);j.vertexLength+=U.length,j.primitiveLength+=U.length}let O=GA(M,R);for(let U=0;U<O.length;U+=3)this.indexArray.emplaceBack(A+O[U],A+O[U+1],A+O[U+2]);I.vertexLength+=b,I.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}}let XA,JA;rt("FillBucket",OS,{omit:["layers","patternFeatures"]});var H8={get paint(){return JA=JA||new y({"fill-antialias":new st(Ce.paint_fill["fill-antialias"]),"fill-opacity":new xt(Ce.paint_fill["fill-opacity"]),"fill-color":new xt(Ce.paint_fill["fill-color"]),"fill-outline-color":new xt(Ce.paint_fill["fill-outline-color"]),"fill-translate":new st(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new st(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new Th(Ce.paint_fill["fill-pattern"])})},get layout(){return XA=XA||new y({"fill-sort-key":new xt(Ce.layout_fill["fill-sort-key"])})}};class G8 extends u{constructor(o){super(o,H8)}recalculate(o,c){super.recalculate(o,c);let d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new OS(o)}queryRadius(){return Wv(this.paint.get("fill-translate"))}queryIntersectsFeature(o,c,d,m,v,x,b){return NA(Zv(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),m)}isTileClipped(){return!0}}let W8=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Z8=S([{name:"a_centroid",components:2,type:"Int16"}],4),{members:K8}=W8;var mc={},Y8=_,QA=zh;function zh(l,o,c,d,m){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=d,this._values=m,l.readFields(X8,this,o)}function X8(l,o,c){l==1?o.id=c.readVarint():l==2?function(d,m){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=m._keys[d.readVarint()],b=m._values[d.readVarint()];m.properties[x]=b}}(c,o):l==3?o.type=c.readVarint():l==4&&(o._geometry=c.pos)}function J8(l){for(var o,c,d=0,m=0,v=l.length,x=v-1;m<v;x=m++)d+=((c=l[x]).x-(o=l[m]).x)*(o.y+c.y);return d}zh.types=["Unknown","Point","LineString","Polygon"],zh.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,c=l.readVarint()+l.pos,d=1,m=0,v=0,x=0,b=[];l.pos<c;){if(m<=0){var I=l.readVarint();d=7&I,m=I>>3}if(m--,d===1||d===2)v+=l.readSVarint(),x+=l.readSVarint(),d===1&&(o&&b.push(o),o=[]),o.push(new Y8(v,x));else{if(d!==7)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&b.push(o),b},zh.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,c=1,d=0,m=0,v=0,x=1/0,b=-1/0,I=1/0,A=-1/0;l.pos<o;){if(d<=0){var M=l.readVarint();c=7&M,d=M>>3}if(d--,c===1||c===2)(m+=l.readSVarint())<x&&(x=m),m>b&&(b=m),(v+=l.readSVarint())<I&&(I=v),v>A&&(A=v);else if(c!==7)throw new Error("unknown command "+c)}return[x,I,b,A]},zh.prototype.toGeoJSON=function(l,o,c){var d,m,v=this.extent*Math.pow(2,c),x=this.extent*l,b=this.extent*o,I=this.loadGeometry(),A=zh.types[this.type];function M(U){for(var j=0;j<U.length;j++){var q=U[j];U[j]=[360*(q.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+b)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(d=0;d<I.length;d++)R[d]=I[d][0];M(I=R);break;case 2:for(d=0;d<I.length;d++)M(I[d]);break;case 3:for(I=function(U){var j=U.length;if(j<=1)return[U];for(var q,Y,te=[],ge=0;ge<j;ge++){var le=J8(U[ge]);le!==0&&(Y===void 0&&(Y=le<0),Y===le<0?(q&&te.push(q),q=[U[ge]]):q.push(U[ge]))}return q&&te.push(q),te}(I),d=0;d<I.length;d++)for(m=0;m<I[d].length;m++)M(I[d][m])}I.length===1?I=I[0]:A="Multi"+A;var O={type:"Feature",geometry:{type:A,coordinates:I},properties:this.properties};return"id"in this&&(O.id=this.id),O};var Q8=QA,eM=tM;function tM(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(e$,this,o),this.length=this._features.length}function e$(l,o,c){l===15?o.version=c.readVarint():l===1?o.name=c.readString():l===5?o.extent=c.readVarint():l===2?o._features.push(c.pos):l===3?o._keys.push(c.readString()):l===4&&o._values.push(function(d){for(var m=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;m=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return m}(c))}tM.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new Q8(this._pbf,o,this.extent,this._keys,this._values)};var t$=eM;function n$(l,o,c){if(l===3){var d=new t$(c,c.readVarint()+c.pos);d.length&&(o[d.name]=d)}}mc.VectorTile=function(l,o){this.layers=l.readFields(n$,{},o)},mc.VectorTileFeature=QA,mc.VectorTileLayer=eM;let r$=mc.VectorTileFeature.types,LS=Math.pow(2,13);function km(l,o,c,d,m,v,x,b){l.emplaceBack(o,c,2*Math.floor(d*LS)+x,m*LS*2,v*LS*2,Math.round(b))}class zS{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new cc,this.centroidVertexArray=new oi,this.indexArray=new Ro,this.programConfigurations=new Uu(o.layers,o.zoom),this.segments=new rn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.features=[],this.hasPattern=NS("fill-extrusion",this.layers,c);for(let{feature:m,id:v,index:x,sourceLayerIndex:b}of o){let I=this.layers[0]._featureFilter.needGeometry,A=Vu(m,I);if(!this.layers[0]._featureFilter.filter(new Jn(this.zoom),A,d))continue;let M={id:v,sourceLayerIndex:b,index:x,geometry:I?A.geometry:Bu(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(FS("fill-extrusion",this.layers,M,this.zoom,c)):this.addFeature(M,M.geometry,x,d,{}),c.featureIndex.insert(m,M.geometry,x,b,this.index,!0)}}addFeatures(o,c,d){for(let m of this.features){let{geometry:v}=m;this.addFeature(m,v,m.index,c,d)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,K8),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Z8.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,d,m,v){for(let x of ah(c,500)){let b={x:0,y:0,vertexCount:0},I=0;for(let j of x)I+=j.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let j of x){if(j.length===0||o$(j))continue;let q=0;for(let Y=0;Y<j.length;Y++){let te=j[Y];if(Y>=1){let ge=j[Y-1];if(!i$(te,ge)){A.vertexLength+4>rn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let le=te.sub(ge)._perp()._unit(),pe=ge.dist(te);q+pe>32768&&(q=0),km(this.layoutVertexArray,te.x,te.y,le.x,le.y,0,0,q),km(this.layoutVertexArray,te.x,te.y,le.x,le.y,0,1,q),b.x+=2*te.x,b.y+=2*te.y,b.vertexCount+=2,q+=pe,km(this.layoutVertexArray,ge.x,ge.y,le.x,le.y,0,0,q),km(this.layoutVertexArray,ge.x,ge.y,le.x,le.y,0,1,q),b.x+=2*ge.x,b.y+=2*ge.y,b.vertexCount+=2;let Ie=A.vertexLength;this.indexArray.emplaceBack(Ie,Ie+2,Ie+1),this.indexArray.emplaceBack(Ie+1,Ie+2,Ie+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+I>rn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),r$[o.type]!=="Polygon")continue;let M=[],R=[],O=A.vertexLength;for(let j of x)if(j.length!==0){j!==x[0]&&R.push(M.length/2);for(let q=0;q<j.length;q++){let Y=j[q];km(this.layoutVertexArray,Y.x,Y.y,0,0,1,1,0),b.x+=Y.x,b.y+=Y.y,b.vertexCount+=1,M.push(Y.x),M.push(Y.y)}}let U=GA(M,R);for(let j=0;j<U.length;j+=3)this.indexArray.emplaceBack(O+U[j],O+U[j+2],O+U[j+1]);A.primitiveLength+=U.length/3,A.vertexLength+=I;for(let j=0;j<b.vertexCount;j++){let q=Math.floor(b.x/b.vertexCount),Y=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(q,Y)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}}function i$(l,o){return l.x===o.x&&(l.x<0||l.x>Tr)||l.y===o.y&&(l.y<0||l.y>Tr)}function o$(l){return l.every(o=>o.x<0)||l.every(o=>o.x>Tr)||l.every(o=>o.y<0)||l.every(o=>o.y>Tr)}let nM;rt("FillExtrusionBucket",zS,{omit:["layers","features"]});var s$={get paint(){return nM=nM||new y({"fill-extrusion-opacity":new st(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new st(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new st(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Th(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new st(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class a$ extends u{constructor(o){super(o,s$)}createBucket(o){return new zS(o)}queryRadius(){return Wv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,c,d,m,v,x,b,I){let A=Zv(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),M=this.paint.get("fill-extrusion-height").evaluate(c,d),R=this.paint.get("fill-extrusion-base").evaluate(c,d),O=function(j,q,Y,te){let ge=[];for(let le of j){let pe=[le.x,le.y,0,1];Kv(pe,pe,q),ge.push(new C(pe[0]/pe[3],pe[1]/pe[3]))}return ge}(A,I),U=function(j,q,Y,te){let ge=[],le=[],pe=te[8]*q,Ie=te[9]*q,Ne=te[10]*q,Xe=te[11]*q,_t=te[8]*Y,Ze=te[9]*Y,He=te[10]*Y,dt=te[11]*Y;for(let ot of j){let tt=[],De=[];for(let ht of ot){let ct=ht.x,Tt=ht.y,jn=te[0]*ct+te[4]*Tt+te[12],Ln=te[1]*ct+te[5]*Tt+te[13],zr=te[2]*ct+te[6]*Tt+te[14],as=te[3]*ct+te[7]*Tt+te[15],li=zr+Ne,Ur=as+Xe,Mi=jn+_t,Pi=Ln+Ze,Ri=zr+He,yr=as+dt,Br=new C((jn+pe)/Ur,(Ln+Ie)/Ur);Br.z=li/Ur,tt.push(Br);let xi=new C(Mi/yr,Pi/yr);xi.z=Ri/yr,De.push(xi)}ge.push(tt),le.push(De)}return[ge,le]}(m,R,M,I);return function(j,q,Y){let te=1/0;NA(Y,q)&&(te=rM(Y,q[0]));for(let ge=0;ge<q.length;ge++){let le=q[ge],pe=j[ge];for(let Ie=0;Ie<le.length-1;Ie++){let Ne=le[Ie],Xe=[Ne,le[Ie+1],pe[Ie+1],pe[Ie],Ne];kA(Y,Xe)&&(te=Math.min(te,rM(Y,Xe)))}}return te!==1/0&&te}(U[0],U[1],O)}}function Nm(l,o){return l.x*o.x+l.y*o.y}function rM(l,o){if(l.length===1){let c=0,d=o[c++],m;for(;!m||d.equals(m);)if(m=o[c++],!m)return 1/0;for(;c<o.length;c++){let v=o[c],x=l[0],b=m.sub(d),I=v.sub(d),A=x.sub(d),M=Nm(b,b),R=Nm(b,I),O=Nm(I,I),U=Nm(A,b),j=Nm(A,I),q=M*O-R*R,Y=(O*U-R*j)/q,te=(M*j-R*U)/q,ge=d.z*(1-Y-te)+m.z*Y+v.z*te;if(isFinite(ge))return ge}return 1/0}{let c=1/0;for(let d of o)c=Math.min(c,d.z);return c}}let l$=S([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:c$}=l$,u$=S([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:d$}=u$,h$=mc.VectorTileFeature.types,p$=Math.cos(Math.PI/180*37.5),iM=Math.pow(2,14)/.5;class US{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Ah,this.layoutVertexArray2=new uc,this.indexArray=new Ro,this.programConfigurations=new Uu(o.layers,o.zoom),this.segments=new rn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=NS("line",this.layers,c);let m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(let{feature:b,id:I,index:A,sourceLayerIndex:M}of o){let R=this.layers[0]._featureFilter.needGeometry,O=Vu(b,R);if(!this.layers[0]._featureFilter.filter(new Jn(this.zoom),O,d))continue;let U=v?m.evaluate(O,{},d):void 0,j={id:I,properties:b.properties,type:b.type,sourceLayerIndex:M,index:A,geometry:R?O.geometry:Bu(b),patterns:{},sortKey:U};x.push(j)}v&&x.sort((b,I)=>b.sortKey-I.sortKey);for(let b of x){let{geometry:I,index:A,sourceLayerIndex:M}=b;if(this.hasPattern){let R=FS("line",this.layers,b,this.zoom,c);this.patternFeatures.push(R)}else this.addFeature(b,I,A,d,{});c.featureIndex.insert(o[A].feature,I,A,M,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(let m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,c,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,d$)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,c$),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,d,m,v){let x=this.layers[0].layout,b=x.get("line-join").evaluate(o,{}),I=x.get("line-cap"),A=x.get("line-miter-limit"),M=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(let R of c)this.addLine(R,o,b,I,A,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,v,m)}addLine(o,c,d,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let te=0;te<o.length-1;te++)this.totalDistance+=o[te].dist(o[te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let b=h$[c.type]==="Polygon",I=o.length;for(;I>=2&&o[I-1].equals(o[I-2]);)I--;let A=0;for(;A<I-1&&o[A].equals(o[A+1]);)A++;if(I<(b?3:2))return;d==="bevel"&&(v=1.05);let M=this.overscaling<=16?15*Tr/(512*this.overscaling):0,R=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray),O,U,j,q,Y;this.e1=this.e2=-1,b&&(O=o[I-2],Y=o[A].sub(O)._unit()._perp());for(let te=A;te<I;te++){if(j=te===I-1?b?o[A+1]:void 0:o[te+1],j&&o[te].equals(j))continue;Y&&(q=Y),O&&(U=O),O=o[te],Y=j?j.sub(O)._unit()._perp():q,q=q||Y;let ge=q.add(Y);ge.x===0&&ge.y===0||ge._unit();let le=q.x*Y.x+q.y*Y.y,pe=ge.x*Y.x+ge.y*Y.y,Ie=pe!==0?1/pe:1/0,Ne=2*Math.sqrt(2-2*pe),Xe=pe<p$&&U&&j,_t=q.x*Y.y-q.y*Y.x>0;if(Xe&&te>A){let dt=O.dist(U);if(dt>2*M){let ot=O.sub(O.sub(U)._mult(M/dt)._round());this.updateDistance(U,ot),this.addCurrentVertex(ot,q,0,0,R),U=ot}}let Ze=U&&j,He=Ze?d:b?"butt":m;if(Ze&&He==="round"&&(Ie<x?He="miter":Ie<=2&&(He="fakeround")),He==="miter"&&Ie>v&&(He="bevel"),He==="bevel"&&(Ie>2&&(He="flipbevel"),Ie<v&&(He="miter")),U&&this.updateDistance(U,O),He==="miter")ge._mult(Ie),this.addCurrentVertex(O,ge,0,0,R);else if(He==="flipbevel"){if(Ie>100)ge=Y.mult(-1);else{let dt=Ie*q.add(Y).mag()/q.sub(Y).mag();ge._perp()._mult(dt*(_t?-1:1))}this.addCurrentVertex(O,ge,0,0,R),this.addCurrentVertex(O,ge.mult(-1),0,0,R)}else if(He==="bevel"||He==="fakeround"){let dt=-Math.sqrt(Ie*Ie-1),ot=_t?dt:0,tt=_t?0:dt;if(U&&this.addCurrentVertex(O,q,ot,tt,R),He==="fakeround"){let De=Math.round(180*Ne/Math.PI/20);for(let ht=1;ht<De;ht++){let ct=ht/De;if(ct!==.5){let jn=ct-.5;ct+=ct*jn*(ct-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*jn*jn+(.848013+le*(.215638*le-1.06021)))}let Tt=Y.sub(q)._mult(ct)._add(q)._unit()._mult(_t?-1:1);this.addHalfVertex(O,Tt.x,Tt.y,!1,_t,0,R)}}j&&this.addCurrentVertex(O,Y,-ot,-tt,R)}else if(He==="butt")this.addCurrentVertex(O,ge,0,0,R);else if(He==="square"){let dt=U?1:-1;this.addCurrentVertex(O,ge,dt,dt,R)}else He==="round"&&(U&&(this.addCurrentVertex(O,q,0,0,R),this.addCurrentVertex(O,q,1,1,R,!0)),j&&(this.addCurrentVertex(O,Y,-1,-1,R,!0),this.addCurrentVertex(O,Y,0,0,R)));if(Xe&&te<I-1){let dt=O.dist(j);if(dt>2*M){let ot=O.add(j.sub(O)._mult(M/dt)._round());this.updateDistance(O,ot),this.addCurrentVertex(ot,Y,0,0,R),O=ot}}}}addCurrentVertex(o,c,d,m,v,x=!1){let b=c.y*m-c.x,I=-c.y-c.x*m;this.addHalfVertex(o,c.x+c.y*d,c.y-c.x*d,x,!1,d,v),this.addHalfVertex(o,b,I,x,!0,-m,v),this.distance>iM/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,d,m,v,x))}addHalfVertex({x:o,y:c},d,m,v,x,b,I){let A=.5*(this.lineClips?this.scaledDistance*(iM-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(v?1:0),(c<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(b===0?0:b<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),I.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}let oM,sM;rt("LineBucket",US,{omit:["layers","patternFeatures"]});var aM={get paint(){return sM=sM||new y({"line-opacity":new xt(Ce.paint_line["line-opacity"]),"line-color":new xt(Ce.paint_line["line-color"]),"line-translate":new st(Ce.paint_line["line-translate"]),"line-translate-anchor":new st(Ce.paint_line["line-translate-anchor"]),"line-width":new xt(Ce.paint_line["line-width"]),"line-gap-width":new xt(Ce.paint_line["line-gap-width"]),"line-offset":new xt(Ce.paint_line["line-offset"]),"line-blur":new xt(Ce.paint_line["line-blur"]),"line-dasharray":new Dh(Ce.paint_line["line-dasharray"]),"line-pattern":new Th(Ce.paint_line["line-pattern"]),"line-gradient":new Cm(Ce.paint_line["line-gradient"])})},get layout(){return oM=oM||new y({"line-cap":new st(Ce.layout_line["line-cap"]),"line-join":new xt(Ce.layout_line["line-join"]),"line-miter-limit":new st(Ce.layout_line["line-miter-limit"]),"line-round-limit":new st(Ce.layout_line["line-round-limit"]),"line-sort-key":new xt(Ce.layout_line["line-sort-key"])})}};class f$ extends xt{possiblyEvaluate(o,c){return c=new Jn(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,d,m){return c=Ge({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,d,m)}}let Qv;class m$ extends u{constructor(o){super(o,aM),this.gradientVersion=0,Qv||(Qv=new f$(aM.paint.properties["line-width"].specification),Qv.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof ql,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=Qv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new US(o)}queryRadius(o){let c=o,d=lM(Tm("line-width",this,c),Tm("line-gap-width",this,c)),m=Tm("line-offset",this,c);return d/2+Math.abs(m)+Wv(this.paint.get("line-translate"))}queryIntersectsFeature(o,c,d,m,v,x,b){let I=Zv(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),A=b/2*lM(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),M=this.paint.get("line-offset").evaluate(c,d);return M&&(m=function(R,O){let U=[];for(let j=0;j<R.length;j++){let q=R[j],Y=[];for(let te=0;te<q.length;te++){let ge=q[te-1],le=q[te],pe=q[te+1],Ie=te===0?new C(0,0):le.sub(ge)._unit()._perp(),Ne=te===q.length-1?new C(0,0):pe.sub(le)._unit()._perp(),Xe=Ie._add(Ne)._unit(),_t=Xe.x*Ne.x+Xe.y*Ne.y;_t!==0&&Xe._mult(1/_t),Y.push(Xe._mult(O)._add(le))}U.push(Y)}return U}(m,M*b)),function(R,O,U){for(let j=0;j<O.length;j++){let q=O[j];if(R.length>=3){for(let Y=0;Y<q.length;Y++)if(Fh(R,q[Y]))return!0}if(C8(R,q,U))return!0}return!1}(I,m,A)}isTileClipped(){return!0}}function lM(l,o){return o>0?o+2*l:l}let g$=S([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),y$=S([{name:"a_projected_pos",components:3,type:"Float32"}],4);S([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let v$=S([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);S([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let cM=S([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),_$=S([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function x$(l,o,c){return l.sections.forEach(d=>{d.text=function(m,v,x){let b=v.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?m=m.toLocaleUpperCase():b==="lowercase"&&(m=m.toLocaleLowerCase()),Hi.applyArabicShaping&&(m=Hi.applyArabicShaping(m)),m}(d.text,o,c)}),l}S([{name:"triangle",components:3,type:"Uint16"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),S([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),S([{type:"Float32",name:"offsetX"}]),S([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),S([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Fm={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Pr=24,uM=On,dM=function(l,o,c,d,m){var v,x,b=8*m-d-1,I=(1<<b)-1,A=I>>1,M=-7,R=c?m-1:0,O=c?-1:1,U=l[o+R];for(R+=O,v=U&(1<<-M)-1,U>>=-M,M+=b;M>0;v=256*v+l[o+R],R+=O,M-=8);for(x=v&(1<<-M)-1,v>>=-M,M+=d;M>0;x=256*x+l[o+R],R+=O,M-=8);if(v===0)v=1-A;else{if(v===I)return x?NaN:1/0*(U?-1:1);x+=Math.pow(2,d),v-=A}return(U?-1:1)*x*Math.pow(2,v-d)},hM=function(l,o,c,d,m,v){var x,b,I,A=8*v-m-1,M=(1<<A)-1,R=M>>1,O=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=d?0:v-1,j=d?1:-1,q=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(b=isNaN(o)?1:0,x=M):(x=Math.floor(Math.log(o)/Math.LN2),o*(I=Math.pow(2,-x))<1&&(x--,I*=2),(o+=x+R>=1?O/I:O*Math.pow(2,1-R))*I>=2&&(x++,I/=2),x+R>=M?(b=0,x=M):x+R>=1?(b=(o*I-1)*Math.pow(2,m),x+=R):(b=o*Math.pow(2,R-1)*Math.pow(2,m),x=0));m>=8;l[c+U]=255&b,U+=j,b/=256,m-=8);for(x=x<<m|b,A+=m;A>0;l[c+U]=255&x,U+=j,x/=256,A-=8);l[c+U-j]|=128*q};function On(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}On.Varint=0,On.Fixed64=1,On.Bytes=2,On.Fixed32=5;var BS=4294967296,pM=1/BS,fM=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function ll(l){return l.type===On.Bytes?l.readVarint()+l.pos:l.pos+1}function Uh(l,o,c){return c?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}function mM(l,o,c){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));c.realloc(d);for(var m=c.pos-1;m>=l;m--)c.buf[m+d]=c.buf[m]}function w$(l,o){for(var c=0;c<l.length;c++)o.writeVarint(l[c])}function b$(l,o){for(var c=0;c<l.length;c++)o.writeSVarint(l[c])}function S$(l,o){for(var c=0;c<l.length;c++)o.writeFloat(l[c])}function C$(l,o){for(var c=0;c<l.length;c++)o.writeDouble(l[c])}function I$(l,o){for(var c=0;c<l.length;c++)o.writeBoolean(l[c])}function E$(l,o){for(var c=0;c<l.length;c++)o.writeFixed32(l[c])}function T$(l,o){for(var c=0;c<l.length;c++)o.writeSFixed32(l[c])}function D$(l,o){for(var c=0;c<l.length;c++)o.writeFixed64(l[c])}function A$(l,o){for(var c=0;c<l.length;c++)o.writeSFixed64(l[c])}function e_(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function Bh(l,o,c){l[c]=o,l[c+1]=o>>>8,l[c+2]=o>>>16,l[c+3]=o>>>24}function gM(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}On.prototype={destroy:function(){this.buf=null},readFields:function(l,o,c){for(c=c||this.length;this.pos<c;){var d=this.readVarint(),m=d>>3,v=this.pos;this.type=7&d,l(m,o,this),this.pos===v&&this.skip(d)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=e_(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=gM(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=e_(this.buf,this.pos)+e_(this.buf,this.pos+4)*BS;return this.pos+=8,l},readSFixed64:function(){var l=e_(this.buf,this.pos)+gM(this.buf,this.pos+4)*BS;return this.pos+=8,l},readFloat:function(){var l=dM(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=dM(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,c,d=this.buf;return o=127&(c=d[this.pos++]),c<128?o:(o|=(127&(c=d[this.pos++]))<<7,c<128?o:(o|=(127&(c=d[this.pos++]))<<14,c<128?o:(o|=(127&(c=d[this.pos++]))<<21,c<128?o:function(m,v,x){var b,I,A=x.buf;if(b=(112&(I=A[x.pos++]))>>4,I<128||(b|=(127&(I=A[x.pos++]))<<3,I<128)||(b|=(127&(I=A[x.pos++]))<<10,I<128)||(b|=(127&(I=A[x.pos++]))<<17,I<128)||(b|=(127&(I=A[x.pos++]))<<24,I<128)||(b|=(1&(I=A[x.pos++]))<<31,I<128))return Uh(m,b,v);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(c=d[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&fM?function(c,d,m){return fM.decode(c.subarray(d,m))}(this.buf,o,l):function(c,d,m){for(var v="",x=d;x<m;){var b,I,A,M=c[x],R=null,O=M>239?4:M>223?3:M>191?2:1;if(x+O>m)break;O===1?M<128&&(R=M):O===2?(192&(b=c[x+1]))==128&&(R=(31&M)<<6|63&b)<=127&&(R=null):O===3?(I=c[x+2],(192&(b=c[x+1]))==128&&(192&I)==128&&((R=(15&M)<<12|(63&b)<<6|63&I)<=2047||R>=55296&&R<=57343)&&(R=null)):O===4&&(I=c[x+2],A=c[x+3],(192&(b=c[x+1]))==128&&(192&I)==128&&(192&A)==128&&((R=(15&M)<<18|(63&b)<<12|(63&I)<<6|63&A)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,O=1):R>65535&&(R-=65536,v+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),v+=String.fromCharCode(R),x+=O}return v}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==On.Bytes)return l.push(this.readVarint(o));var c=ll(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==On.Bytes)return l.push(this.readSVarint());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==On.Bytes)return l.push(this.readBoolean());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==On.Bytes)return l.push(this.readFloat());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==On.Bytes)return l.push(this.readDouble());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==On.Bytes)return l.push(this.readFixed32());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==On.Bytes)return l.push(this.readSFixed32());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==On.Bytes)return l.push(this.readFixed64());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==On.Bytes)return l.push(this.readSFixed64());var o=ll(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===On.Varint)for(;this.buf[this.pos++]>127;);else if(o===On.Bytes)this.pos=this.readVarint()+this.pos;else if(o===On.Fixed32)this.pos+=4;else{if(o!==On.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var c=new Uint8Array(o);c.set(this.buf),this.buf=c,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Bh(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Bh(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Bh(this.buf,-1&l,this.pos),Bh(this.buf,Math.floor(l*pM),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Bh(this.buf,-1&l,this.pos),Bh(this.buf,Math.floor(l*pM),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,c){var d,m;if(o>=0?(d=o%4294967296|0,m=o/4294967296|0):(m=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,m=m+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(v,x,b){b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,v>>>=7,b.buf[b.pos++]=127&v|128,b.buf[b.pos]=127&(v>>>=7)}(d,0,c),function(v,x){var b=(7&v)<<4;x.buf[x.pos++]|=b|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(d,m,v){for(var x,b,I=0;I<m.length;I++){if((x=m.charCodeAt(I))>55295&&x<57344){if(!b){x>56319||I+1===m.length?(d[v++]=239,d[v++]=191,d[v++]=189):b=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(d[v++]=239,d[v++]=191,d[v++]=189,b=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,l,this.pos);var c=this.pos-o;c>=128&&mM(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),hM(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),hM(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var c=0;c<o;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,o){this.pos++;var c=this.pos;l(o,this);var d=this.pos-c;d>=128&&mM(c,d,this),this.pos=c-1,this.writeVarint(d),this.pos+=d},writeMessage:function(l,o,c){this.writeTag(l,On.Bytes),this.writeRawMessage(o,c)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,w$,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,b$,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,I$,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,S$,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,C$,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,E$,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,T$,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,D$,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,A$,o)},writeBytesField:function(l,o){this.writeTag(l,On.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,On.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,On.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,On.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,On.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,On.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,On.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,On.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,On.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,On.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,!!o)}};var VS=h(uM);let jS=3;function M$(l,o,c){l===1&&c.readMessage(P$,o)}function P$(l,o,c){if(l===3){let{id:d,bitmap:m,width:v,height:x,left:b,top:I,advance:A}=c.readMessage(R$,{});o.push({id:d,bitmap:new Am({width:v+2*jS,height:x+2*jS},m),metrics:{width:v,height:x,left:b,top:I,advance:A}})}}function R$(l,o,c){l===1?o.id=c.readVarint():l===2?o.bitmap=c.readBytes():l===3?o.width=c.readVarint():l===4?o.height=c.readVarint():l===5?o.left=c.readSVarint():l===6?o.top=c.readSVarint():l===7&&(o.advance=c.readVarint())}let yM=jS;function vM(l){let o=0,c=0;for(let x of l)o+=x.w*x.h,c=Math.max(c,x.w);l.sort((x,b)=>b.h-x.h);let d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}],m=0,v=0;for(let x of l)for(let b=d.length-1;b>=0;b--){let I=d[b];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===I.w&&x.h===I.h){let A=d.pop();b<d.length&&(d[b]=A)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(d.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:m,h:v,fill:o/(m*v)||0}}let Wi=1;class $S{constructor(o,{pixelRatio:c,version:d,stretchX:m,stretchY:v,content:x,textFitWidth:b,textFitHeight:I}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=m,this.stretchY=v,this.content=x,this.version=d,this.textFitWidth=b,this.textFitHeight=I}get tl(){return[this.paddedRect.x+Wi,this.paddedRect.y+Wi]}get br(){return[this.paddedRect.x+this.paddedRect.w-Wi,this.paddedRect.y+this.paddedRect.h-Wi]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Wi)/this.pixelRatio,(this.paddedRect.h-2*Wi)/this.pixelRatio]}}class _M{constructor(o,c){let d={},m={};this.haveRenderCallbacks=[];let v=[];this.addImages(o,d,v),this.addImages(c,m,v);let{w:x,h:b}=vM(v),I=new ko({width:x||1,height:b||1});for(let A in o){let M=o[A],R=d[A].paddedRect;ko.copy(M.data,I,{x:0,y:0},{x:R.x+Wi,y:R.y+Wi},M.data)}for(let A in c){let M=c[A],R=m[A].paddedRect,O=R.x+Wi,U=R.y+Wi,j=M.data.width,q=M.data.height;ko.copy(M.data,I,{x:0,y:0},{x:O,y:U},M.data),ko.copy(M.data,I,{x:0,y:q-1},{x:O,y:U-1},{width:j,height:1}),ko.copy(M.data,I,{x:0,y:0},{x:O,y:U+q},{width:j,height:1}),ko.copy(M.data,I,{x:j-1,y:0},{x:O-1,y:U},{width:1,height:q}),ko.copy(M.data,I,{x:0,y:0},{x:O+j,y:U},{width:1,height:q})}this.image=I,this.iconPositions=d,this.patternPositions=m}addImages(o,c,d){for(let m in o){let v=o[m],x={x:0,y:0,w:v.data.width+2*Wi,h:v.data.height+2*Wi};d.push(x),c[m]=new $S(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let d in o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),c)}patchUpdatedImage(o,c,d){if(!o||!c||o.version===c.version)return;o.version=c.version;let[m,v]=o.tl;d.update(c.data,void 0,{x:m,y:v})}}var gc;rt("ImagePosition",$S),rt("ImageAtlas",_M),a.ah=void 0,(gc=a.ah||(a.ah={}))[gc.none=0]="none",gc[gc.horizontal=1]="horizontal",gc[gc.vertical=2]="vertical",gc[gc.horizontalOnly=3]="horizontalOnly";let Om=-17;class Lm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,c){let d=new Lm;return d.scale=o||1,d.fontStack=c,d}static forImage(o){let c=new Lm;return c.imageName=o,c}}class Vh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){let d=new Vh;for(let m=0;m<o.sections.length;m++){let v=o.sections[m];v.image?d.addImageSection(v):d.addTextSection(v,c)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let c="";for(let d=0;d<o.length;d++){let m=o.charCodeAt(d+1)||null,v=o.charCodeAt(d-1)||null;c+=m&&Bv(m)&&!Fm[o[d+1]]||v&&Bv(v)&&!Fm[o[d-1]]||!Fm[o[d]]?o[d]:Fm[o[d]]}return c}(this.text)}trim(){let o=0;for(let d=0;d<this.text.length&&n_[this.text.charCodeAt(d)];d++)o++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&n_[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){let d=new Vh;return d.text=this.text.substring(o,c),d.sectionIndex=this.sectionIndex.slice(o,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}addTextSection(o,c){this.text+=o.text,this.sections.push(Lm.forText(o.scale,o.fontStack||c));let d=this.sections.length-1;for(let m=0;m<o.text.length;++m)this.sectionIndex.push(d)}addImageSection(o){let c=o.image?o.image.name:"";if(c.length===0)return void vt("Can't add FormattedSection with an empty image.");let d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Lm.forImage(c)),this.sectionIndex.push(this.sections.length-1)):vt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function t_(l,o,c,d,m,v,x,b,I,A,M,R,O,U,j){let q=Vh.fromFeature(l,m),Y;R===a.ah.vertical&&q.verticalizePunctuation();let{processBidirectionalText:te,processStyledBidirectionalText:ge}=Hi;if(te&&q.sections.length===1){Y=[];let Ie=te(q.toString(),qS(q,A,v,o,d,U));for(let Ne of Ie){let Xe=new Vh;Xe.text=Ne,Xe.sections=q.sections;for(let _t=0;_t<Ne.length;_t++)Xe.sectionIndex.push(0);Y.push(Xe)}}else if(ge){Y=[];let Ie=ge(q.text,q.sectionIndex,qS(q,A,v,o,d,U));for(let Ne of Ie){let Xe=new Vh;Xe.text=Ne[0],Xe.sectionIndex=Ne[1],Xe.sections=q.sections,Y.push(Xe)}}else Y=function(Ie,Ne){let Xe=[],_t=Ie.text,Ze=0;for(let He of Ne)Xe.push(Ie.substring(Ze,He)),Ze=He;return Ze<_t.length&&Xe.push(Ie.substring(Ze,_t.length)),Xe}(q,qS(q,A,v,o,d,U));let le=[],pe={positionedLines:le,text:q.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(Ie,Ne,Xe,_t,Ze,He,dt,ot,tt,De,ht,ct){let Tt=0,jn=Om,Ln=0,zr=0,as=ot==="right"?1:ot==="left"?0:.5,li=0;for(let yr of Ze){yr.trim();let Br=yr.getMaxScale(),xi=(Br-1)*Pr,ci={positionedGlyphs:[],lineOffset:0};Ie.positionedLines[li]=ci;let ki=ci.positionedGlyphs,ui=0;if(!yr.length()){jn+=He,++li;continue}for(let Zi=0;Zi<yr.length();Zi++){let gn=yr.getSection(Zi),Xn=yr.getSectionIndex(Zi),nr=yr.getCharCode(Zi),ho=0,hr=null,Hh=null,ia=null,oa=Pr,ls=!(tt===a.ah.horizontal||!ht&&!bm(nr)||ht&&(n_[nr]||(Ur=nr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ur)))));if(gn.imageName){let Oo=_t[gn.imageName];if(!Oo)continue;ia=gn.imageName,Ie.iconsInText=Ie.iconsInText||!0,Hh=Oo.paddedRect;let Jr=Oo.displaySize;gn.scale=gn.scale*Pr/ct,hr={width:Jr[0],height:Jr[1],left:Wi,top:-yM,advance:ls?Jr[1]:Jr[0]},ho=xi+(Pr-Jr[1]*gn.scale),oa=hr.advance;let cl=ls?Jr[0]*gn.scale-Pr*Br:Jr[1]*gn.scale-Pr*Br;cl>0&&cl>ui&&(ui=cl)}else{let Oo=Xe[gn.fontStack],Jr=Oo&&Oo[nr];if(Jr&&Jr.rect)Hh=Jr.rect,hr=Jr.metrics;else{let cl=Ne[gn.fontStack],$m=cl&&cl[nr];if(!$m)continue;hr=$m.metrics}ho=(Br-gn.scale)*Pr}ls?(Ie.verticalizable=!0,ki.push({glyph:nr,imageName:ia,x:Tt,y:jn+ho,vertical:ls,scale:gn.scale,fontStack:gn.fontStack,sectionIndex:Xn,metrics:hr,rect:Hh}),Tt+=oa*gn.scale+De):(ki.push({glyph:nr,imageName:ia,x:Tt,y:jn+ho,vertical:ls,scale:gn.scale,fontStack:gn.fontStack,sectionIndex:Xn,metrics:hr,rect:Hh}),Tt+=hr.advance*gn.scale+De)}ki.length!==0&&(Ln=Math.max(Tt-De,Ln),O$(ki,0,ki.length-1,as,ui)),Tt=0;let Fo=He*Br+ui;ci.lineOffset=Math.max(ui,xi),jn+=Fo,zr=Math.max(Fo,zr),++li}var Ur;let Mi=jn-Om,{horizontalAlign:Pi,verticalAlign:Ri}=HS(dt);(function(yr,Br,xi,ci,ki,ui,Fo,Zi,gn){let Xn=(Br-xi)*ki,nr=0;nr=ui!==Fo?-Zi*ci-Om:(-ci*gn+.5)*Fo;for(let ho of yr)for(let hr of ho.positionedGlyphs)hr.x+=Xn,hr.y+=nr})(Ie.positionedLines,as,Pi,Ri,Ln,zr,He,Mi,Ze.length),Ie.top+=-Ri*Mi,Ie.bottom=Ie.top+Mi,Ie.left+=-Pi*Ln,Ie.right=Ie.left+Ln}(pe,o,c,d,Y,x,b,I,R,A,O,j),!function(Ie){for(let Ne of Ie)if(Ne.positionedGlyphs.length!==0)return!1;return!0}(le)&&pe}let n_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},k$={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},N$={40:!0};function xM(l,o,c,d,m,v){if(o.imageName){let x=d[o.imageName];return x?x.displaySize[0]*o.scale*Pr/v+m:0}{let x=c[o.fontStack],b=x&&x[l];return b?b.metrics.advance*o.scale+m:0}}function wM(l,o,c,d){let m=Math.pow(l-o,2);return d?l<o?m/2:2*m:m+Math.abs(c)*c}function F$(l,o,c){let d=0;return l===10&&(d-=1e4),c&&(d+=150),l!==40&&l!==65288||(d+=50),o!==41&&o!==65289||(d+=50),d}function bM(l,o,c,d,m,v){let x=null,b=wM(o,c,m,v);for(let I of d){let A=wM(o-I.x,c,m,v)+I.badness;A<=b&&(x=I,b=A)}return{index:l,x:o,priorBreak:x,badness:b}}function SM(l){return l?SM(l.priorBreak).concat(l.index):[]}function qS(l,o,c,d,m,v){if(!l)return[];let x=[],b=function(R,O,U,j,q,Y){let te=0;for(let ge=0;ge<R.length();ge++){let le=R.getSection(ge);te+=xM(R.getCharCode(ge),le,j,q,O,Y)}return te/Math.max(1,Math.ceil(te/U))}(l,o,c,d,m,v),I=l.text.indexOf("\u200B")>=0,A=0;for(let R=0;R<l.length();R++){let O=l.getSection(R),U=l.getCharCode(R);if(n_[U]||(A+=xM(U,O,d,m,o,v)),R<l.length()-1){let j=!((M=U)<11904)&&(!!nn["CJK Compatibility Forms"](M)||!!nn["CJK Compatibility"](M)||!!nn["CJK Strokes"](M)||!!nn["CJK Symbols and Punctuation"](M)||!!nn["Enclosed CJK Letters and Months"](M)||!!nn["Halfwidth and Fullwidth Forms"](M)||!!nn["Ideographic Description Characters"](M)||!!nn["Vertical Forms"](M)||Uv.test(String.fromCodePoint(M)));(k$[U]||j||O.imageName||R!==l.length()-2&&N$[l.getCharCode(R+1)])&&x.push(bM(R+1,A,b,x,F$(U,l.getCharCode(R+1),j&&I),!1))}}var M;return SM(bM(l.length(),A,b,x,0,!0))}function HS(l){let o=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function O$(l,o,c,d,m){if(!d&&!m)return;let v=l[c],x=(l[c].x+v.metrics.advance*v.scale)*d;for(let b=o;b<=c;b++)l[b].x-=x,l[b].y+=m}function L$(l,o,c){let{horizontalAlign:d,verticalAlign:m}=HS(c),v=o[0]-l.displaySize[0]*d,x=o[1]-l.displaySize[1]*m;return{image:l,top:x,bottom:x+l.displaySize[1],left:v,right:v+l.displaySize[0]}}function CM(l){var o,c;let d=l.left,m=l.top,v=l.right-d,x=l.bottom-m,b=(o=l.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",I=(c=l.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",A=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(I==="proportional"){if(b==="stretchOnly"&&v/x<A||b==="proportional"){let M=Math.ceil(x*A);d*=M/v,v=M}}else if(b==="proportional"&&I==="stretchOnly"&&A!==0&&v/x>A){let M=Math.ceil(v/A);m*=M/x,x=M}return{x1:d,y1:m,x2:d+v,y2:m+x}}function IM(l,o,c,d,m,v){let x=l.image,b;if(x.content){let Y=x.content,te=x.pixelRatio||1;b=[Y[0]/te,Y[1]/te,x.displaySize[0]-Y[2]/te,x.displaySize[1]-Y[3]/te]}let I=o.left*v,A=o.right*v,M,R,O,U;c==="width"||c==="both"?(U=m[0]+I-d[3],R=m[0]+A+d[1]):(U=m[0]+(I+A-x.displaySize[0])/2,R=U+x.displaySize[0]);let j=o.top*v,q=o.bottom*v;return c==="height"||c==="both"?(M=m[1]+j-d[0],O=m[1]+q+d[2]):(M=m[1]+(j+q-x.displaySize[1])/2,O=M+x.displaySize[1]),{image:x,top:M,right:R,bottom:O,left:U,collisionPadding:b}}let zm=255,ra=128,yc=zm*ra;function EM(l,o){let{expression:c}=o;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Jn(l+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:d,interpolationType:m}=c,v=0;for(;v<d.length&&d[v]<=l;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<l+1;)x++;x=Math.min(d.length-1,x);let b=d[v],I=d[x];return c.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:I,interpolationType:m}:{kind:"camera",minZoom:b,maxZoom:I,minSize:c.evaluate(new Jn(b)),maxSize:c.evaluate(new Jn(I)),interpolationType:m}}}function GS(l,o,c){let d="never",m=l.get(o);return m?d=m:l.get(c)&&(d="always"),d}let z$=mc.VectorTileFeature.types,U$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function r_(l,o,c,d,m,v,x,b,I,A,M,R,O){let U=b?Math.min(yc,Math.round(b[0])):0,j=b?Math.min(yc,Math.round(b[1])):0;l.emplaceBack(o,c,Math.round(32*d),Math.round(32*m),v,x,(U<<1)+(I?1:0),j,16*A,16*M,256*R,256*O)}function WS(l,o,c){l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c),l.emplaceBack(o.x,o.y,c)}function B$(l){for(let o of l.sections)if(wS(o.text))return!0;return!1}class ZS{constructor(o){this.layoutVertexArray=new Mh,this.indexArray=new Ro,this.programConfigurations=o,this.segments=new rn,this.dynamicLayoutVertexArray=new Im,this.opacityVertexArray=new co,this.hasVisibleVertices=!1,this.placedSymbolArray=new Qn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,c,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,g$.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,y$.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,U$,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rt("SymbolBuffers",ZS);class KS{constructor(o,c,d){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new d,this.segments=new rn,this.collisionVertexArray=new ta}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,v$.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rt("CollisionBuffers",KS);class jh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=DS([]),this.placementViewportMatrix=DS([]);let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=EM(this.zoom,c["text-size"]),this.iconSizeData=EM(this.zoom,c["icon-size"]);let d=this.layers[0].layout,m=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=GS(d,"text-overlap","text-allow-overlap")!=="never"||GS(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>a.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new ZS(new Uu(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new ZS(new Uu(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new er,this.lineVertexArray=new ii,this.symbolInstances=new Xt,this.textAnchorOffsets=new tr}calculateGlyphDependencies(o,c,d,m,v){for(let x=0;x<o.length;x++)if(c[o.charCodeAt(x)]=!0,(d||m)&&v){let b=Fm[o.charAt(x)];b&&(c[b.charCodeAt(0)]=!0)}}populate(o,c,d){let m=this.layers[0],v=m.layout,x=v.get("text-font"),b=v.get("text-field"),I=v.get("icon-image"),A=(b.value.kind!=="constant"||b.value.value instanceof Vi&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,R=v.get("symbol-sort-key");if(this.features=[],!A&&!M)return;let O=c.iconDependencies,U=c.glyphDependencies,j=c.availableImages,q=new Jn(this.zoom);for(let{feature:Y,id:te,index:ge,sourceLayerIndex:le}of o){let pe=m._featureFilter.needGeometry,Ie=Vu(Y,pe);if(!m._featureFilter.filter(q,Ie,d))continue;let Ne,Xe;if(pe||(Ie.geometry=Bu(Y)),A){let Ze=m.getValueAndResolveTokens("text-field",Ie,d,j),He=Vi.factory(Ze),dt=this.hasRTLText=this.hasRTLText||B$(He);(!dt||Hi.getRTLTextPluginStatus()==="unavailable"||dt&&Hi.isParsed())&&(Ne=x$(He,m,Ie))}if(M){let Ze=m.getValueAndResolveTokens("icon-image",Ie,d,j);Xe=Ze instanceof $i?Ze:$i.fromString(Ze)}if(!Ne&&!Xe)continue;let _t=this.sortFeaturesByKey?R.evaluate(Ie,{},d):void 0;if(this.features.push({id:te,text:Ne,icon:Xe,index:ge,sourceLayerIndex:le,geometry:Ie.geometry,properties:Y.properties,type:z$[Y.type],sortKey:_t}),Xe&&(O[Xe.name]=!0),Ne){let Ze=x.evaluate(Ie,{},d).join(","),He=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ah.vertical)>=0;for(let dt of Ne.sections)if(dt.image)O[dt.image.name]=!0;else{let ot=xm(Ne.toString()),tt=dt.fontStack||Ze,De=U[tt]=U[tt]||{};this.calculateGlyphDependencies(dt.text,De,He,this.allowVerticalPlacement,ot)}}}v.get("symbol-placement")==="line"&&(this.features=function(Y){let te={},ge={},le=[],pe=0;function Ie(Ze){le.push(Y[Ze]),pe++}function Ne(Ze,He,dt){let ot=ge[Ze];return delete ge[Ze],ge[He]=ot,le[ot].geometry[0].pop(),le[ot].geometry[0]=le[ot].geometry[0].concat(dt[0]),ot}function Xe(Ze,He,dt){let ot=te[He];return delete te[He],te[Ze]=ot,le[ot].geometry[0].shift(),le[ot].geometry[0]=dt[0].concat(le[ot].geometry[0]),ot}function _t(Ze,He,dt){let ot=dt?He[0][He[0].length-1]:He[0][0];return`${Ze}:${ot.x}:${ot.y}`}for(let Ze=0;Ze<Y.length;Ze++){let He=Y[Ze],dt=He.geometry,ot=He.text?He.text.toString():null;if(!ot){Ie(Ze);continue}let tt=_t(ot,dt),De=_t(ot,dt,!0);if(tt in ge&&De in te&&ge[tt]!==te[De]){let ht=Xe(tt,De,dt),ct=Ne(tt,De,le[ht].geometry);delete te[tt],delete ge[De],ge[_t(ot,le[ct].geometry,!0)]=ct,le[ht].geometry=null}else tt in ge?Ne(tt,De,dt):De in te?Xe(tt,De,dt):(Ie(Ze),te[tt]=pe-1,ge[De]=pe-1)}return le.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,te)=>Y.sortKey-te.sortKey)}update(o,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){let d=this.lineVertexArray.length;if(o.segment!==void 0){let m=o.dist(c[o.segment+1]),v=o.dist(c[o.segment]),x={};for(let b=o.segment+1;b<c.length;b++)x[b]={x:c[b].x,y:c[b].y,tileUnitDistanceFromAnchor:m},b<c.length-1&&(m+=c[b+1].dist(c[b]));for(let b=o.segment||0;b>=0;b--)x[b]={x:c[b].x,y:c[b].y,tileUnitDistanceFromAnchor:v},b>0&&(v+=c[b-1].dist(c[b]));for(let b=0;b<c.length;b++){let I=x[b];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,c,d,m,v,x,b,I,A,M,R,O){let U=o.indexArray,j=o.layoutVertexArray,q=o.segments.prepareSegment(4*c.length,j,U,this.canOverlap?x.sortKey:void 0),Y=this.glyphOffsetArray.length,te=q.vertexLength,ge=this.allowVerticalPlacement&&b===a.ah.vertical?Math.PI/2:0,le=x.text&&x.text.sections;for(let pe=0;pe<c.length;pe++){let{tl:Ie,tr:Ne,bl:Xe,br:_t,tex:Ze,pixelOffsetTL:He,pixelOffsetBR:dt,minFontScaleX:ot,minFontScaleY:tt,glyphOffset:De,isSDF:ht,sectionIndex:ct}=c[pe],Tt=q.vertexLength,jn=De[1];r_(j,I.x,I.y,Ie.x,jn+Ie.y,Ze.x,Ze.y,d,ht,He.x,He.y,ot,tt),r_(j,I.x,I.y,Ne.x,jn+Ne.y,Ze.x+Ze.w,Ze.y,d,ht,dt.x,He.y,ot,tt),r_(j,I.x,I.y,Xe.x,jn+Xe.y,Ze.x,Ze.y+Ze.h,d,ht,He.x,dt.y,ot,tt),r_(j,I.x,I.y,_t.x,jn+_t.y,Ze.x+Ze.w,Ze.y+Ze.h,d,ht,dt.x,dt.y,ot,tt),WS(o.dynamicLayoutVertexArray,I,ge),U.emplaceBack(Tt,Tt+1,Tt+2),U.emplaceBack(Tt+1,Tt+2,Tt+3),q.vertexLength+=4,q.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(De[0]),pe!==c.length-1&&ct===c[pe+1].sectionIndex||o.programConfigurations.populatePaintArrays(j.length,x,x.index,{},O,le&&le[ct])}o.placedSymbolArray.emplaceBack(I.x,I.y,Y,this.glyphOffsetArray.length-Y,te,A,M,I.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],b,0,!1,0,R)}_addCollisionDebugVertex(o,c,d,m,v,x){return c.emplaceBack(0,0),o.emplaceBack(d.x,d.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,c,d,m,v,x,b){let I=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),A=I.vertexLength,M=v.layoutVertexArray,R=v.collisionVertexArray,O=b.anchorX,U=b.anchorY;this._addCollisionDebugVertex(M,R,x,O,U,new C(o,c)),this._addCollisionDebugVertex(M,R,x,O,U,new C(d,c)),this._addCollisionDebugVertex(M,R,x,O,U,new C(d,m)),this._addCollisionDebugVertex(M,R,x,O,U,new C(o,m)),I.vertexLength+=4;let j=v.indexArray;j.emplaceBack(A,A+1),j.emplaceBack(A+1,A+2),j.emplaceBack(A+2,A+3),j.emplaceBack(A+3,A),I.primitiveLength+=4}addDebugCollisionBoxes(o,c,d,m){for(let v=o;v<c;v++){let x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new KS(uo,cM.members,Xr),this.iconCollisionBox=new KS(uo,cM.members,Xr);for(let o=0;o<this.symbolInstances.length;o++){let c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,d,m,v,x,b,I,A){let M={};for(let R=c;R<d;R++){let O=o.get(R);M.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.textFeatureIndex=O.featureIndex;break}for(let R=m;R<v;R++){let O=o.get(R);M.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalTextFeatureIndex=O.featureIndex;break}for(let R=x;R<b;R++){let O=o.get(R);M.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.iconFeatureIndex=O.featureIndex;break}for(let R=I;R<A;R++){let O=o.get(R);M.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},M.verticalIconFeatureIndex=O.featureIndex;break}return M}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){let d=o.placedSymbolArray.get(c),m=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<m;v+=4)o.indexArray.emplaceBack(v,v+1,v+2),o.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(o),d=Math.cos(o),m=[],v=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);let I=this.symbolInstances.get(b);m.push(0|Math.round(c*I.anchorX+d*I.anchorY)),v.push(I.featureIndex)}return x.sort((b,I)=>m[b]-m[I]||v[I]-v[b]),x}addToSortKeyRanges(o,c){let d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let TM,DM;rt("SymbolBucket",jh,{omit:["layers","collisionBoxArray","features","compareText"]}),jh.MAX_GLYPHS=65535,jh.addDynamicAttributes=WS;var YS={get paint(){return DM=DM||new y({"icon-opacity":new xt(Ce.paint_symbol["icon-opacity"]),"icon-color":new xt(Ce.paint_symbol["icon-color"]),"icon-halo-color":new xt(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new st(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new st(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(Ce.paint_symbol["text-opacity"]),"text-color":new xt(Ce.paint_symbol["text-color"],{runtimeType:Ii,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new xt(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new xt(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(Ce.paint_symbol["text-halo-blur"]),"text-translate":new st(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new st(Ce.paint_symbol["text-translate-anchor"])})},get layout(){return TM=TM||new y({"symbol-placement":new st(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new st(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new st(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new st(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new st(Ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new st(Ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new st(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new st(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new st(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(Ce.layout_symbol["icon-size"]),"icon-text-fit":new st(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new st(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(Ce.layout_symbol["icon-image"]),"icon-rotate":new xt(Ce.layout_symbol["icon-rotate"]),"icon-padding":new xt(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new st(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(Ce.layout_symbol["icon-offset"]),"icon-anchor":new xt(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new st(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new st(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new st(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new xt(Ce.layout_symbol["text-field"]),"text-font":new xt(Ce.layout_symbol["text-font"]),"text-size":new xt(Ce.layout_symbol["text-size"]),"text-max-width":new xt(Ce.layout_symbol["text-max-width"]),"text-line-height":new st(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new xt(Ce.layout_symbol["text-justify"]),"text-radial-offset":new xt(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new st(Ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xt(Ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xt(Ce.layout_symbol["text-anchor"]),"text-max-angle":new st(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new st(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new xt(Ce.layout_symbol["text-rotate"]),"text-padding":new st(Ce.layout_symbol["text-padding"]),"text-keep-upright":new st(Ce.layout_symbol["text-keep-upright"]),"text-transform":new xt(Ce.layout_symbol["text-transform"]),"text-offset":new xt(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new st(Ce.layout_symbol["text-allow-overlap"]),"text-overlap":new st(Ce.layout_symbol["text-overlap"]),"text-ignore-placement":new st(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new st(Ce.layout_symbol["text-optional"])})}};class AM{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Xs,this.defaultValue=o}evaluate(o){if(o.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rt("FormatSectionOverride",AM,{omit:["defaultValue"]});class i_ extends u{constructor(o){super(o,YS)}recalculate(o,c){if(super.recalculate(o,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let d=this.layout.get("text-writing-mode");if(d){let m=[];for(let v of d)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,d,m){let v=this.layout.get(o).evaluate(c,{},d,m),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||mh(x.value)||!v?v:function(b,I){return I.replace(/{([^{}]+)}/g,(A,M)=>b&&M in b?String(b[M]):"")}(c.properties,v)}createBucket(o){return new jh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let o of YS.paint.overridableProperties){if(!i_.hasPaintOverride(this.layout,o))continue;let c=this.paint.get(o),d=new AM(c),m=new fh(d,c.property.specification),v=null;v=c.value.kind==="constant"||c.value.kind==="source"?new Ql("source",m):new ec("composite",m,c.value.zoomStops),this.paint._values[o]=new os(c.property,v,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&i_.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){let d=o.get("text-field"),m=YS.paint.properties[c],v=!1,x=b=>{for(let I of b)if(m.overrides&&m.overrides.hasOverride(I))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Vi)x(d.value.value.sections);else if(d.value.kind==="source"){let b=A=>{v||(A instanceof Eo&&Er(A.value)===Ts?x(A.value.sections):A instanceof oh?x(A.sections):A.eachChild(b))},I=d.value;I._styleExpression&&b(I._styleExpression.expression)}return v}}let MM;var V$={get paint(){return MM=MM||new y({"background-color":new st(Ce.paint_background["background-color"]),"background-pattern":new Dh(Ce.paint_background["background-pattern"]),"background-opacity":new st(Ce.paint_background["background-opacity"])})}};class j$ extends u{constructor(o){super(o,V$)}}let PM;var $$={get paint(){return PM=PM||new y({"raster-opacity":new st(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new st(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new st(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new st(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new st(Ce.paint_raster["raster-saturation"]),"raster-contrast":new st(Ce.paint_raster["raster-contrast"]),"raster-resampling":new st(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new st(Ce.paint_raster["raster-fade-duration"])})}};class q$ extends u{constructor(o){super(o,$$)}}class H$ extends u{constructor(o){super(o,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class G${constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let XS=63710088e-1;class vc{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vc(Ve(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){let c=Math.PI/180,d=this.lat*c,m=o.lat*c,v=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((o.lng-this.lng)*c);return XS*Math.acos(Math.min(v,1))}static convert(o){if(o instanceof vc)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new vc(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new vc(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let RM=2*Math.PI*XS;function kM(l){return RM*Math.cos(l*Math.PI/180)}function NM(l){return(180+l)/360}function FM(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function OM(l,o){return l/kM(o)}function JS(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class Um{constructor(o,c,d=0){this.x=+o,this.y=+c,this.z=+d}static fromLngLat(o,c=0){let d=vc.convert(o);return new Um(NM(d.lng),FM(d.lat),OM(c,d.lat))}toLngLat(){return new vc(360*this.x-180,JS(this.y))}toAltitude(){return this.z*kM(JS(this.y))}meterInMercatorCoordinateUnits(){return 1/RM*(o=JS(this.y),1/Math.cos(o*Math.PI/180));var o}}function LM(l,o,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[l*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}class QS{constructor(o,c,d){if(!function(m,v,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||v<0||v>=Math.pow(2,m))}(o,c,d))throw new Error(`x=${c}, y=${d}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=d,this.key=Bm(0,o,o,c,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,d){let m=(x=this.y,b=this.z,I=LM(256*(v=this.x),256*(x=Math.pow(2,b)-x-1),b),A=LM(256*(v+1),256*(x+1),b),I[0]+","+I[1]+","+A[0]+","+A[1]);var v,x,b,I,A;let M=function(R,O,U){let j,q="";for(let Y=R;Y>0;Y--)j=1<<Y-1,q+=(O&j?1:0)+(U&j?2:0);return q}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,m)}isChildOf(o){let c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){let c=Math.pow(2,this.z);return new C((o.x*c-this.x)*Tr,(o.y*c-this.y)*Tr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class zM{constructor(o,c){this.wrap=o,this.canonical=c,this.key=Bm(o,c.z,c.z,c.x,c.y)}}class No{constructor(o,c,d,m,v){if(o<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${d}`);this.overscaledZ=o,this.wrap=c,this.canonical=new QS(d,+m,+v),this.key=Bm(c,o,d,m,v)}clone(){return new No(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-o;return o>this.canonical.z?new No(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new No(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);let d=this.canonical.z-o;return o>this.canonical.z?Bm(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):Bm(this.wrap*+c,o,o,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(o){if(o.wrap!==this.wrap)return!1;let c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new No(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new No(c,this.wrap,c,d,m),new No(c,this.wrap,c,d+1,m),new No(c,this.wrap,c,d,m+1),new No(c,this.wrap,c,d+1,m+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new No(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new No(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new zM(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Um(o.x-this.wrap,o.y))}}function Bm(l,o,c,d,m){(l*=2)<0&&(l=-1*l-1);let v=1<<c;return(v*v*l+v*m+d).toString(36)+c.toString(36)+o.toString(36)}rt("CanonicalTileID",QS),rt("OverscaledTileID",No,{omit:["posMatrix"]});class UM{constructor(o,c,d,m=1,v=1,x=1,b=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void vt(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let I=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<I;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(I,A)]=this.data[this._idx(I-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,I)]=this.data[this._idx(A,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<I;A++)for(let M=0;M<I;M++){let R=this.get(A,M);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(o,c){let d=new Uint8Array(this.data.buffer),m=4*this._idx(o,c);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}unpack(o,c,d){return o*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let m=c*this.dim,v=c*this.dim+this.dim,x=d*this.dim,b=d*this.dim+this.dim;switch(c){case-1:m=v-1;break;case 1:v=m+1}switch(d){case-1:x=b-1;break;case 1:b=x+1}let I=-c*this.dim,A=-d*this.dim;for(let M=x;M<b;M++)for(let R=m;R<v;R++)this.data[this._idx(R,M)]=o.data[this._idx(R+I,M+A)]}}rt("DEMData",UM);class BM{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){let d=o[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class VM{constructor(o,c,d,m,v){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=d,o._y=m,this.properties=o.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){let o={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(o[c]=this[c]);return o}}class jM{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ic(Tr,16,0),this.grid3D=new ic(Tr,16,0),this.featureIndexArray=new vi,this.promoteId=c}insert(o,c,d,m,v,x){let b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,v);let I=x?this.grid3D:this.grid;for(let A=0;A<c.length;A++){let M=c[A],R=[1/0,1/0,-1/0,-1/0];for(let O=0;O<M.length;O++){let U=M[O];R[0]=Math.min(R[0],U.x),R[1]=Math.min(R[1],U.y),R[2]=Math.max(R[2],U.x),R[3]=Math.max(R[3],U.y)}R[0]<Tr&&R[1]<Tr&&R[2]>=0&&R[3]>=0&&I.insert(b,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new mc.VectorTile(new VS(this.rawTileData)).layers,this.sourceLayerCoder=new BM(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,c,d,m){this.loadVTLayers();let v=o.params||{},x=Tr/o.tileSize/o.scale,b=om(v.filter),I=o.queryGeometry,A=o.queryPadding*x,M=qM(I),R=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),O=qM(o.cameraQueryGeometry),U=this.grid3D.query(O.minX-A,O.minY-A,O.maxX+A,O.maxY+A,(Y,te,ge,le)=>function(pe,Ie,Ne,Xe,_t){for(let He of pe)if(Ie<=He.x&&Ne<=He.y&&Xe>=He.x&&_t>=He.y)return!0;let Ze=[new C(Ie,Ne),new C(Ie,_t),new C(Xe,_t),new C(Xe,Ne)];if(pe.length>2){for(let He of Ze)if(Fh(pe,He))return!0}for(let He=0;He<pe.length-1;He++)if(E8(pe[He],pe[He+1],Ze))return!0;return!1}(o.cameraQueryGeometry,Y-A,te-A,ge+A,le+A));for(let Y of U)R.push(Y);R.sort(W$);let j={},q;for(let Y=0;Y<R.length;Y++){let te=R[Y];if(te===q)continue;q=te;let ge=this.featureIndexArray.get(te),le=null;this.loadMatchingFeature(j,ge.bucketIndex,ge.sourceLayerIndex,ge.featureIndex,b,v.layers,v.availableImages,c,d,m,(pe,Ie,Ne)=>(le||(le=Bu(pe)),Ie.queryIntersectsFeature(I,pe,Ne,le,this.z,o.transform,x,o.pixelPosMatrix)))}return j}loadMatchingFeature(o,c,d,m,v,x,b,I,A,M,R){let O=this.bucketLayerIDs[c];if(x&&!function(Y,te){for(let ge=0;ge<Y.length;ge++)if(te.indexOf(Y[ge])>=0)return!0;return!1}(x,O))return;let U=this.sourceLayerCoder.decode(d),j=this.vtLayers[U].feature(m);if(v.needGeometry){let Y=Vu(j,!0);if(!v.filter(new Jn(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!v.filter(new Jn(this.tileID.overscaledZ),j))return;let q=this.getId(j,U);for(let Y=0;Y<O.length;Y++){let te=O[Y];if(x&&x.indexOf(te)<0)continue;let ge=I[te];if(!ge)continue;let le={};q&&M&&(le=M.getState(ge.sourceLayer||"_geojsonTileLayer",q));let pe=Ge({},A[te]);pe.paint=$M(pe.paint,ge.paint,j,le,b),pe.layout=$M(pe.layout,ge.layout,j,le,b);let Ie=!R||R(j,ge,le);if(!Ie)continue;let Ne=new VM(j,this.z,this.x,this.y,q);Ne.layer=pe;let Xe=o[te];Xe===void 0&&(Xe=o[te]=[]),Xe.push({featureIndex:m,feature:Ne,intersectionZ:Ie})}}lookupSymbolFeatures(o,c,d,m,v,x,b,I){let A={};this.loadVTLayers();let M=om(v);for(let R of o)this.loadMatchingFeature(A,d,m,R,M,x,b,I,c);return A}hasLayer(o){for(let c of this.bucketLayerIDs)for(let d of c)if(o===d)return!0;return!1}getId(o,c){let d=o.id;return this.promoteId&&(d=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof d=="boolean"&&(d=Number(d))),d}}function $M(l,o,c,d,m){return ut(l,(v,x)=>{let b=o instanceof Ou?o.get(x):null;return b&&b.evaluate?b.evaluate(c,d,m):b})}function qM(l){let o=1/0,c=1/0,d=-1/0,m=-1/0;for(let v of l)o=Math.min(o,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return{minX:o,minY:c,maxX:d,maxY:m}}function W$(l,o){return o-l}function HM(l,o,c,d,m){let v=[];for(let x=0;x<l.length;x++){let b=l[x],I;for(let A=0;A<b.length-1;A++){let M=b[A],R=b[A+1];M.x<o&&R.x<o||(M.x<o?M=new C(o,M.y+(o-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x<o&&(R=new C(o,M.y+(o-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y<c&&R.y<c||(M.y<c?M=new C(M.x+(c-M.y)/(R.y-M.y)*(R.x-M.x),c)._round():R.y<c&&(R=new C(M.x+(c-M.y)/(R.y-M.y)*(R.x-M.x),c)._round()),M.x>=d&&R.x>=d||(M.x>=d?M=new C(d,M.y+(d-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x>=d&&(R=new C(d,M.y+(d-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y>=m&&R.y>=m||(M.y>=m?M=new C(M.x+(m-M.y)/(R.y-M.y)*(R.x-M.x),m)._round():R.y>=m&&(R=new C(M.x+(m-M.y)/(R.y-M.y)*(R.x-M.x),m)._round()),I&&M.equals(I[I.length-1])||(I=[M],v.push(I)),I.push(R)))))}}return v}rt("FeatureIndex",jM,{omit:["rawTileData","sourceLayerCoder"]});class _c extends C{constructor(o,c,d,m){super(o,c),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new _c(this.x,this.y,this.angle,this.segment)}}function GM(l,o,c,d,m){if(o.segment===void 0||c===0)return!0;let v=o,x=o.segment+1,b=0;for(;b>-c/2;){if(x--,x<0)return!1;b-=l[x].dist(v),v=l[x]}b+=l[x].dist(l[x+1]),x++;let I=[],A=0;for(;b<c/2;){let M=l[x],R=l[x+1];if(!R)return!1;let O=l[x-1].angleTo(M)-M.angleTo(R);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:b,angleDelta:O}),A+=O;b-I[0].distance>d;)A-=I.shift().angleDelta;if(A>m)return!1;x++,b+=M.dist(R)}return!0}function WM(l){let o=0;for(let c=0;c<l.length-1;c++)o+=l[c].dist(l[c+1]);return o}function ZM(l,o,c){return l?.6*o*c:0}function KM(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function Z$(l,o,c,d,m,v){let x=ZM(c,m,v),b=KM(c,d)*v,I=0,A=WM(l)/2;for(let M=0;M<l.length-1;M++){let R=l[M],O=l[M+1],U=R.dist(O);if(I+U>A){let j=(A-I)/U,q=Ei.number(R.x,O.x,j),Y=Ei.number(R.y,O.y,j),te=new _c(q,Y,O.angleTo(R),M);return te._round(),!x||GM(l,te,b,x,o)?te:void 0}I+=U}}function K$(l,o,c,d,m,v,x,b,I){let A=ZM(d,v,x),M=KM(d,m),R=M*x,O=l[0].x===0||l[0].x===I||l[0].y===0||l[0].y===I;return o-R<o/4&&(o=R+o/4),YM(l,O?o/2*b%o:(M/2+2*v)*x*b%o,o,A,c,R,O,!1,I)}function YM(l,o,c,d,m,v,x,b,I){let A=v/2,M=WM(l),R=0,O=o-c,U=[];for(let j=0;j<l.length-1;j++){let q=l[j],Y=l[j+1],te=q.dist(Y),ge=Y.angleTo(q);for(;O+c<R+te;){O+=c;let le=(O-R)/te,pe=Ei.number(q.x,Y.x,le),Ie=Ei.number(q.y,Y.y,le);if(pe>=0&&pe<I&&Ie>=0&&Ie<I&&O-A>=0&&O+A<=M){let Ne=new _c(pe,Ie,ge,j);Ne._round(),d&&!GM(l,Ne,v,d,m)||U.push(Ne)}}R+=te}return b||U.length||x||(U=YM(l,R/2,c,d,m,v,x,!0,I)),U}rt("Anchor",_c);let $h=Wi;function XM(l,o,c,d){let m=[],v=l.image,x=v.pixelRatio,b=v.paddedRect.w-2*$h,I=v.paddedRect.h-2*$h,A={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom},M=v.stretchX||[[0,b]],R=v.stretchY||[[0,I]],O=(De,ht)=>De+ht[1]-ht[0],U=M.reduce(O,0),j=R.reduce(O,0),q=b-U,Y=I-j,te=0,ge=U,le=0,pe=j,Ie=0,Ne=q,Xe=0,_t=Y;if(v.content&&d){let De=v.content,ht=De[2]-De[0],ct=De[3]-De[1];(v.textFitWidth||v.textFitHeight)&&(A=CM(l)),te=o_(M,0,De[0]),le=o_(R,0,De[1]),ge=o_(M,De[0],De[2]),pe=o_(R,De[1],De[3]),Ie=De[0]-te,Xe=De[1]-le,Ne=ht-ge,_t=ct-pe}let Ze=A.x1,He=A.y1,dt=A.x2-Ze,ot=A.y2-He,tt=(De,ht,ct,Tt)=>{let jn=s_(De.stretch-te,ge,dt,Ze),Ln=a_(De.fixed-Ie,Ne,De.stretch,U),zr=s_(ht.stretch-le,pe,ot,He),as=a_(ht.fixed-Xe,_t,ht.stretch,j),li=s_(ct.stretch-te,ge,dt,Ze),Ur=a_(ct.fixed-Ie,Ne,ct.stretch,U),Mi=s_(Tt.stretch-le,pe,ot,He),Pi=a_(Tt.fixed-Xe,_t,Tt.stretch,j),Ri=new C(jn,zr),yr=new C(li,zr),Br=new C(li,Mi),xi=new C(jn,Mi),ci=new C(Ln/x,as/x),ki=new C(Ur/x,Pi/x),ui=o*Math.PI/180;if(ui){let gn=Math.sin(ui),Xn=Math.cos(ui),nr=[Xn,-gn,gn,Xn];Ri._matMult(nr),yr._matMult(nr),xi._matMult(nr),Br._matMult(nr)}let Fo=De.stretch+De.fixed,Zi=ht.stretch+ht.fixed;return{tl:Ri,tr:yr,bl:xi,br:Br,tex:{x:v.paddedRect.x+$h+Fo,y:v.paddedRect.y+$h+Zi,w:ct.stretch+ct.fixed-Fo,h:Tt.stretch+Tt.fixed-Zi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ci,pixelOffsetBR:ki,minFontScaleX:Ne/x/dt,minFontScaleY:_t/x/ot,isSDF:c}};if(d&&(v.stretchX||v.stretchY)){let De=JM(M,q,U),ht=JM(R,Y,j);for(let ct=0;ct<De.length-1;ct++){let Tt=De[ct],jn=De[ct+1];for(let Ln=0;Ln<ht.length-1;Ln++)m.push(tt(Tt,ht[Ln],jn,ht[Ln+1]))}}else m.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:I+1}));return m}function o_(l,o,c){let d=0;for(let m of l)d+=Math.max(o,Math.min(c,m[1]))-Math.max(o,Math.min(c,m[0]));return d}function JM(l,o,c){let d=[{fixed:-$h,stretch:0}];for(let[m,v]of l){let x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return d.push({fixed:o+$h,stretch:c}),d}function s_(l,o,c,d){return l/o*c+d}function a_(l,o,c,d){return l-o*c/d}class l_{constructor(o,c,d,m,v,x,b,I,A,M){var R;if(this.boxStartIndex=o.length,A){let O=x.top,U=x.bottom,j=x.collisionPadding;j&&(O-=j[1],U+=j[3]);let q=U-O;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let O=!((R=x.image)===null||R===void 0)&&R.content&&(x.image.textFitWidth||x.image.textFitHeight)?CM(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};O.y1=O.y1*b-I[0],O.y2=O.y2*b+I[2],O.x1=O.x1*b-I[3],O.x2=O.x2*b+I[1];let U=x.collisionPadding;if(U&&(O.x1-=U[0]*b,O.y1-=U[1]*b,O.x2+=U[2]*b,O.y2+=U[3]*b),M){let j=new C(O.x1,O.y1),q=new C(O.x2,O.y1),Y=new C(O.x1,O.y2),te=new C(O.x2,O.y2),ge=M*Math.PI/180;j._rotate(ge),q._rotate(ge),Y._rotate(ge),te._rotate(ge),O.x1=Math.min(j.x,q.x,Y.x,te.x),O.x2=Math.max(j.x,q.x,Y.x,te.x),O.y1=Math.min(j.y,q.y,Y.y,te.y),O.y2=Math.max(j.y,q.y,Y.y,te.y)}o.emplaceBack(c.x,c.y,O.x1,O.y1,O.x2,O.y2,d,m,v)}this.boxEndIndex=o.length}}class Y${constructor(o=[],c=(d,m)=>d<m?-1:d>m?1:0){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;let o=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){let{data:c,compare:d}=this,m=c[o];for(;o>0;){let v=o-1>>1,x=c[v];if(d(m,x)>=0)break;c[o]=x,o=v}c[o]=m}_down(o){let{data:c,compare:d}=this,m=this.length>>1,v=c[o];for(;o<m;){let x=1+(o<<1),b=x+1;if(b<this.length&&d(c[b],c[x])<0&&(x=b),d(c[x],v)>=0)break;c[o]=c[x],o=x}c[o]=v}}function X$(l,o=1,c=!1){let d=1/0,m=1/0,v=-1/0,x=-1/0,b=l[0];for(let U=0;U<b.length;U++){let j=b[U];(!U||j.x<d)&&(d=j.x),(!U||j.y<m)&&(m=j.y),(!U||j.x>v)&&(v=j.x),(!U||j.y>x)&&(x=j.y)}let I=Math.min(v-d,x-m),A=I/2,M=new Y$([],J$);if(I===0)return new C(d,m);for(let U=d;U<v;U+=I)for(let j=m;j<x;j+=I)M.push(new qh(U+A,j+A,A,l));let R=function(U){let j=0,q=0,Y=0,te=U[0];for(let ge=0,le=te.length,pe=le-1;ge<le;pe=ge++){let Ie=te[ge],Ne=te[pe],Xe=Ie.x*Ne.y-Ne.x*Ie.y;q+=(Ie.x+Ne.x)*Xe,Y+=(Ie.y+Ne.y)*Xe,j+=3*Xe}return new qh(q/j,Y/j,0,U)}(l),O=M.length;for(;M.length;){let U=M.pop();(U.d>R.d||!R.d)&&(R=U,c&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,O)),U.max-R.d<=o||(A=U.h/2,M.push(new qh(U.p.x-A,U.p.y-A,A,l)),M.push(new qh(U.p.x+A,U.p.y-A,A,l)),M.push(new qh(U.p.x-A,U.p.y+A,A,l)),M.push(new qh(U.p.x+A,U.p.y+A,A,l)),O+=4)}return c&&(console.log(`num probes: ${O}`),console.log(`best distance: ${R.d}`)),R.p}function J$(l,o){return o.max-l.max}function qh(l,o,c,d){this.p=new C(l,o),this.h=c,this.d=function(m,v){let x=!1,b=1/0;for(let I=0;I<v.length;I++){let A=v[I];for(let M=0,R=A.length,O=R-1;M<R;O=M++){let U=A[M],j=A[O];U.y>m.y!=j.y>m.y&&m.x<(j.x-U.x)*(m.y-U.y)/(j.y-U.y)+U.x&&(x=!x),b=Math.min(b,FA(m,U,j))}}return(x?1:-1)*Math.sqrt(b)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var ai;a.aq=void 0,(ai=a.aq||(a.aq={}))[ai.center=1]="center",ai[ai.left=2]="left",ai[ai.right=3]="right",ai[ai.top=4]="top",ai[ai.bottom=5]="bottom",ai[ai["top-left"]=6]="top-left",ai[ai["top-right"]=7]="top-right",ai[ai["bottom-left"]=8]="bottom-left",ai[ai["bottom-right"]=9]="bottom-right";let xc=7,e1=Number.POSITIVE_INFINITY;function QM(l,o){return o[1]!==e1?function(c,d,m){let v=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),c){case"top-right":case"top-left":case"top":x=m-xc;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+xc}switch(c){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(l,o[0],o[1]):function(c,d){let m=0,v=0;d<0&&(d=0);let x=d/Math.SQRT2;switch(c){case"top-right":case"top-left":v=x-xc;break;case"bottom-right":case"bottom-left":v=-x+xc;break;case"bottom":v=-d+xc;break;case"top":v=d-xc}switch(c){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,v]}(l,o[0])}function eP(l,o,c){var d;let m=l.layout,v=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(o,{},c);if(v){let b=v.values,I=[];for(let A=0;A<b.length;A+=2){let M=I[A]=b[A],R=b[A+1].map(O=>O*Pr);M.startsWith("top")?R[1]-=xc:M.startsWith("bottom")&&(R[1]+=xc),I[A+1]=R}return new io(I)}let x=m.get("text-variable-anchor");if(x){let b;b=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(o,{},c)*Pr,e1]:m.get("text-offset").evaluate(o,{},c).map(A=>A*Pr);let I=[];for(let A of x)I.push(A,QM(A,b));return new io(I)}return null}function t1(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Q$(l,o,c,d,m,v,x,b,I,A,M){let R=v.textMaxSize.evaluate(o,{});R===void 0&&(R=x);let O=l.layers[0].layout,U=O.get("icon-offset").evaluate(o,{},M),j=nP(c.horizontal),q=x/24,Y=l.tilePixelRatio*q,te=l.tilePixelRatio*R/24,ge=l.tilePixelRatio*b,le=l.tilePixelRatio*O.get("symbol-spacing"),pe=O.get("text-padding")*l.tilePixelRatio,Ie=function(De,ht,ct,Tt=1){let jn=De.get("icon-padding").evaluate(ht,{},ct),Ln=jn&&jn.values;return[Ln[0]*Tt,Ln[1]*Tt,Ln[2]*Tt,Ln[3]*Tt]}(O,o,M,l.tilePixelRatio),Ne=O.get("text-max-angle")/180*Math.PI,Xe=O.get("text-rotation-alignment")!=="viewport"&&O.get("symbol-placement")!=="point",_t=O.get("icon-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",Ze=O.get("symbol-placement"),He=le/2,dt=O.get("icon-text-fit"),ot;d&&dt!=="none"&&(l.allowVerticalPlacement&&c.vertical&&(ot=IM(d,c.vertical,dt,O.get("icon-text-fit-padding"),U,q)),j&&(d=IM(d,j,dt,O.get("icon-text-fit-padding"),U,q)));let tt=(De,ht)=>{ht.x<0||ht.x>=Tr||ht.y<0||ht.y>=Tr||function(ct,Tt,jn,Ln,zr,as,li,Ur,Mi,Pi,Ri,yr,Br,xi,ci,ki,ui,Fo,Zi,gn,Xn,nr,ho,hr,Hh){let ia=ct.addToLineVertexArray(Tt,jn),oa,ls,Oo,Jr,cl=0,$m=0,sP=0,aP=0,c1=-1,u1=-1,ul={},lP=Ph("");if(ct.allowVerticalPlacement&&Ln.vertical){let wi=Ur.layout.get("text-rotate").evaluate(Xn,{},hr)+90;Oo=new l_(Mi,Tt,Pi,Ri,yr,Ln.vertical,Br,xi,ci,wi),li&&(Jr=new l_(Mi,Tt,Pi,Ri,yr,li,ui,Fo,ci,wi))}if(zr){let wi=Ur.layout.get("icon-rotate").evaluate(Xn,{}),Lo=Ur.layout.get("icon-text-fit")!=="none",$u=XM(zr,wi,ho,Lo),Rs=li?XM(li,wi,ho,Lo):void 0;ls=new l_(Mi,Tt,Pi,Ri,yr,zr,ui,Fo,!1,wi),cl=4*$u.length;let qu=ct.iconSizeData,sa=null;qu.kind==="source"?(sa=[ra*Ur.layout.get("icon-size").evaluate(Xn,{})],sa[0]>yc&&vt(`${ct.layerIds[0]}: Value for "icon-size" is >= ${zm}. Reduce your "icon-size".`)):qu.kind==="composite"&&(sa=[ra*nr.compositeIconSizes[0].evaluate(Xn,{},hr),ra*nr.compositeIconSizes[1].evaluate(Xn,{},hr)],(sa[0]>yc||sa[1]>yc)&&vt(`${ct.layerIds[0]}: Value for "icon-size" is >= ${zm}. Reduce your "icon-size".`)),ct.addSymbols(ct.icon,$u,sa,gn,Zi,Xn,a.ah.none,Tt,ia.lineStartIndex,ia.lineLength,-1,hr),c1=ct.icon.placedSymbolArray.length-1,Rs&&($m=4*Rs.length,ct.addSymbols(ct.icon,Rs,sa,gn,Zi,Xn,a.ah.vertical,Tt,ia.lineStartIndex,ia.lineLength,-1,hr),u1=ct.icon.placedSymbolArray.length-1)}let cP=Object.keys(Ln.horizontal);for(let wi of cP){let Lo=Ln.horizontal[wi];if(!oa){lP=Ph(Lo.text);let Rs=Ur.layout.get("text-rotate").evaluate(Xn,{},hr);oa=new l_(Mi,Tt,Pi,Ri,yr,Lo,Br,xi,ci,Rs)}let $u=Lo.positionedLines.length===1;if(sP+=tP(ct,Tt,Lo,as,Ur,ci,Xn,ki,ia,Ln.vertical?a.ah.horizontal:a.ah.horizontalOnly,$u?cP:[wi],ul,c1,nr,hr),$u)break}Ln.vertical&&(aP+=tP(ct,Tt,Ln.vertical,as,Ur,ci,Xn,ki,ia,a.ah.vertical,["vertical"],ul,u1,nr,hr));let nq=oa?oa.boxStartIndex:ct.collisionBoxArray.length,rq=oa?oa.boxEndIndex:ct.collisionBoxArray.length,iq=Oo?Oo.boxStartIndex:ct.collisionBoxArray.length,oq=Oo?Oo.boxEndIndex:ct.collisionBoxArray.length,sq=ls?ls.boxStartIndex:ct.collisionBoxArray.length,aq=ls?ls.boxEndIndex:ct.collisionBoxArray.length,lq=Jr?Jr.boxStartIndex:ct.collisionBoxArray.length,cq=Jr?Jr.boxEndIndex:ct.collisionBoxArray.length,Ps=-1,u_=(wi,Lo)=>wi&&wi.circleDiameter?Math.max(wi.circleDiameter,Lo):Lo;Ps=u_(oa,Ps),Ps=u_(Oo,Ps),Ps=u_(ls,Ps),Ps=u_(Jr,Ps);let uP=Ps>-1?1:0;uP&&(Ps*=Hh/Pr),ct.glyphOffsetArray.length>=jh.MAX_GLYPHS&&vt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Xn.sortKey!==void 0&&ct.addToSortKeyRanges(ct.symbolInstances.length,Xn.sortKey);let uq=eP(Ur,Xn,hr),[dq,hq]=function(wi,Lo){let $u=wi.length,Rs=Lo?.values;if(Rs?.length>0)for(let qu=0;qu<Rs.length;qu+=2){let sa=Rs[qu+1];wi.emplaceBack(a.aq[Rs[qu]],sa[0],sa[1])}return[$u,wi.length]}(ct.textAnchorOffsets,uq);ct.symbolInstances.emplaceBack(Tt.x,Tt.y,ul.right>=0?ul.right:-1,ul.center>=0?ul.center:-1,ul.left>=0?ul.left:-1,ul.vertical||-1,c1,u1,lP,nq,rq,iq,oq,sq,aq,lq,cq,Pi,sP,aP,cl,$m,uP,0,Br,Ps,dq,hq)}(l,ht,De,c,d,m,ot,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,Y,[pe,pe,pe,pe],Xe,I,ge,Ie,_t,U,o,v,A,M,x)};if(Ze==="line")for(let De of HM(o.geometry,0,0,Tr,Tr)){let ht=K$(De,le,Ne,c.vertical||j,d,24,te,l.overscaling,Tr);for(let ct of ht)j&&eq(l,j.text,He,ct)||tt(De,ct)}else if(Ze==="line-center"){for(let De of o.geometry)if(De.length>1){let ht=Z$(De,Ne,c.vertical||j,d,24,te);ht&&tt(De,ht)}}else if(o.type==="Polygon")for(let De of ah(o.geometry,0)){let ht=X$(De,16);tt(De[0],new _c(ht.x,ht.y,0))}else if(o.type==="LineString")for(let De of o.geometry)tt(De,new _c(De[0].x,De[0].y,0));else if(o.type==="Point")for(let De of o.geometry)for(let ht of De)tt([ht],new _c(ht.x,ht.y,0))}function tP(l,o,c,d,m,v,x,b,I,A,M,R,O,U,j){let q=function(ge,le,pe,Ie,Ne,Xe,_t,Ze){let He=Ie.layout.get("text-rotate").evaluate(Xe,{})*Math.PI/180,dt=[];for(let ot of le.positionedLines)for(let tt of ot.positionedGlyphs){if(!tt.rect)continue;let De=tt.rect||{},ht=yM+1,ct=!0,Tt=1,jn=0,Ln=(Ne||Ze)&&tt.vertical,zr=tt.metrics.advance*tt.scale/2;if(Ze&&le.verticalizable&&(jn=ot.lineOffset/2-(tt.imageName?-(Pr-tt.metrics.width*tt.scale)/2:(tt.scale-1)*Pr)),tt.imageName){let gn=_t[tt.imageName];ct=gn.sdf,Tt=gn.pixelRatio,ht=Wi/Tt}let as=Ne?[tt.x+zr,tt.y]:[0,0],li=Ne?[0,0]:[tt.x+zr+pe[0],tt.y+pe[1]-jn],Ur=[0,0];Ln&&(Ur=li,li=[0,0]);let Mi=tt.metrics.isDoubleResolution?2:1,Pi=(tt.metrics.left-ht)*tt.scale-zr+li[0],Ri=(-tt.metrics.top-ht)*tt.scale+li[1],yr=Pi+De.w/Mi*tt.scale/Tt,Br=Ri+De.h/Mi*tt.scale/Tt,xi=new C(Pi,Ri),ci=new C(yr,Ri),ki=new C(Pi,Br),ui=new C(yr,Br);if(Ln){let gn=new C(-zr,zr-Om),Xn=-Math.PI/2,nr=Pr/2-zr,ho=new C(5-Om-nr,-(tt.imageName?nr:0)),hr=new C(...Ur);xi._rotateAround(Xn,gn)._add(ho)._add(hr),ci._rotateAround(Xn,gn)._add(ho)._add(hr),ki._rotateAround(Xn,gn)._add(ho)._add(hr),ui._rotateAround(Xn,gn)._add(ho)._add(hr)}if(He){let gn=Math.sin(He),Xn=Math.cos(He),nr=[Xn,-gn,gn,Xn];xi._matMult(nr),ci._matMult(nr),ki._matMult(nr),ui._matMult(nr)}let Fo=new C(0,0),Zi=new C(0,0);dt.push({tl:xi,tr:ci,bl:ki,br:ui,tex:De,writingMode:le.writingMode,glyphOffset:as,sectionIndex:tt.sectionIndex,isSDF:ct,pixelOffsetTL:Fo,pixelOffsetBR:Zi,minFontScaleX:0,minFontScaleY:0})}return dt}(0,c,b,m,v,x,d,l.allowVerticalPlacement),Y=l.textSizeData,te=null;Y.kind==="source"?(te=[ra*m.layout.get("text-size").evaluate(x,{})],te[0]>yc&&vt(`${l.layerIds[0]}: Value for "text-size" is >= ${zm}. Reduce your "text-size".`)):Y.kind==="composite"&&(te=[ra*U.compositeTextSizes[0].evaluate(x,{},j),ra*U.compositeTextSizes[1].evaluate(x,{},j)],(te[0]>yc||te[1]>yc)&&vt(`${l.layerIds[0]}: Value for "text-size" is >= ${zm}. Reduce your "text-size".`)),l.addSymbols(l.text,q,te,b,v,x,A,o,I.lineStartIndex,I.lineLength,O,j);for(let ge of M)R[ge]=l.text.placedSymbolArray.length-1;return 4*q.length}function nP(l){for(let o in l)return l[o];return null}function eq(l,o,c,d){let m=l.compareText;if(o in m){let v=m[o];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<c)return!0}else m[o]=[];return m[o].push(d),!1}let rP=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class n1{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,d]=new Uint8Array(o,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);let v=rP[15&d];if(!v)throw new Error("Unrecognized array type.");let[x]=new Uint16Array(o,2,1),[b]=new Uint32Array(o,4,1);return new n1(b,x,v,o)}constructor(o,c=64,d=Float64Array,m){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;let v=rP.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,b=o*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-b%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+b+I,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+I),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+b+I,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){let d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=o,this.coords[this._pos++]=c,d}finish(){let o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return r1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:v,coords:x,nodeSize:b}=this,I=[0,v.length-1,0],A=[];for(;I.length;){let M=I.pop()||0,R=I.pop()||0,O=I.pop()||0;if(R-O<=b){for(let Y=O;Y<=R;Y++){let te=x[2*Y],ge=x[2*Y+1];te>=o&&te<=d&&ge>=c&&ge<=m&&A.push(v[Y])}continue}let U=O+R>>1,j=x[2*U],q=x[2*U+1];j>=o&&j<=d&&q>=c&&q<=m&&A.push(v[U]),(M===0?o<=j:c<=q)&&(I.push(O),I.push(U-1),I.push(1-M)),(M===0?d>=j:m>=q)&&(I.push(U+1),I.push(R),I.push(1-M))}return A}within(o,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:m,coords:v,nodeSize:x}=this,b=[0,m.length-1,0],I=[],A=d*d;for(;b.length;){let M=b.pop()||0,R=b.pop()||0,O=b.pop()||0;if(R-O<=x){for(let Y=O;Y<=R;Y++)oP(v[2*Y],v[2*Y+1],o,c)<=A&&I.push(m[Y]);continue}let U=O+R>>1,j=v[2*U],q=v[2*U+1];oP(j,q,o,c)<=A&&I.push(m[U]),(M===0?o-d<=j:c-d<=q)&&(b.push(O),b.push(U-1),b.push(1-M)),(M===0?o+d>=j:c+d>=q)&&(b.push(U+1),b.push(R),b.push(1-M))}return I}}function r1(l,o,c,d,m,v){if(m-d<=c)return;let x=d+m>>1;iP(l,o,x,d,m,v),r1(l,o,c,d,x-1,1-v),r1(l,o,c,x+1,m,1-v)}function iP(l,o,c,d,m,v){for(;m>d;){if(m-d>600){let A=m-d+1,M=c-d+1,R=Math.log(A),O=.5*Math.exp(2*R/3),U=.5*Math.sqrt(R*O*(A-O)/A)*(M-A/2<0?-1:1);iP(l,o,c,Math.max(d,Math.floor(c-M*O/A+U)),Math.min(m,Math.floor(c+(A-M)*O/A+U)),v)}let x=o[2*c+v],b=d,I=m;for(Vm(l,o,d,c),o[2*m+v]>x&&Vm(l,o,d,m);b<I;){for(Vm(l,o,b,I),b++,I--;o[2*b+v]<x;)b++;for(;o[2*I+v]>x;)I--}o[2*d+v]===x?Vm(l,o,d,I):(I++,Vm(l,o,I,m)),I<=c&&(d=I+1),c<=I&&(m=I-1)}}function Vm(l,o,c,d){i1(l,c,d),i1(o,2*c,2*d),i1(o,2*c+1,2*d+1)}function i1(l,o,c){let d=l[o];l[o]=l[c],l[c]=d}function oP(l,o,c,d){let m=l-c,v=o-d;return m*m+v*v}var o1;a.bg=void 0,(o1=a.bg||(a.bg={})).create="create",o1.load="load",o1.fullLoad="fullLoad";let c_=null,jm=[],s1=1e3/60,a1="loadTime",l1="fullLoadTime",tq={mark(l){performance.mark(l)},frame(l){let o=l;c_!=null&&jm.push(o-c_),c_=o},clearMetrics(){c_=null,jm=[],performance.clearMeasures(a1),performance.clearMeasures(l1);for(let l in a.bg)performance.clearMarks(a.bg[l])},getPerformanceMetrics(){performance.measure(a1,a.bg.create,a.bg.load),performance.measure(l1,a.bg.create,a.bg.fullLoad);let l=performance.getEntriesByName(a1)[0].duration,o=performance.getEntriesByName(l1)[0].duration,c=jm.length,d=1/(jm.reduce((v,x)=>v+x,0)/c/1e3),m=jm.filter(v=>v>s1).reduce((v,x)=>v+(x-s1)/s1,0);return{loadTime:l,fullLoadTime:o,fps:d,percentDroppedFrames:m/(c+m)*100,totalFrames:c}}};a.$=class extends k{},a.A=Oh,a.B=gS,a.C=function(l){if(ar==null){let o=l.navigator?l.navigator.userAgent:null;ar=!!l.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return ar},a.D=st,a.E=Ul,a.F=class{constructor(l,o){this.target=l,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new G$(()=>this.process()),this.subscription=function(c,d,m,v){return c.addEventListener(d,m,!1),{unsubscribe:()=>{c.removeEventListener(d,m,!1)}}}(this.target,"message",c=>this.receive(c)),this.globalScope=Lt(self)?l:window}registerMessageHandler(l,o){this.messageHandlers[l]=o}sendAsync(l,o){return new Promise((c,d)=>{let m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:c,reject:d},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];let b={id:m,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});let v=[],x=Object.assign(Object.assign({},l),{id:m,sourceMapId:this.mapId,origin:location.origin,data:oc(l.data,v)});this.target.postMessage(x,{transfer:v})})}receive(l){let o=l.data,c=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[c];let d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(Lt(self)||o.mustQueue)return this.tasks[c]=o,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,o)}}process(){if(this.taskQueue.length===0)return;let l=this.taskQueue.shift(),o=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(l,o)}processTask(l,o){return s(this,void 0,void 0,function*(){if(o.type==="<response>"){let m=this.resolveRejects[l];return delete this.resolveRejects[l],m?void(o.error?m.reject(sc(o.error)):m.resolve(sc(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=sc(o.data),d=new AbortController;this.abortControllers[l]=d;try{let m=yield this.messageHandlers[o.type](o.sourceMapId,c,d);this.completeTask(l,null,m)}catch(m){this.completeTask(l,m)}})}completeTask(l,o,c){let d=[];delete this.abortControllers[l];let m={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?oc(o):null,data:oc(c,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.G=Kt,a.H=function(){var l=new Oh(16);return Oh!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},a.I=$S,a.J=function(l,o,c){var d,m,v,x,b,I,A,M,R,O,U,j,q=c[0],Y=c[1],te=c[2];return o===l?(l[12]=o[0]*q+o[4]*Y+o[8]*te+o[12],l[13]=o[1]*q+o[5]*Y+o[9]*te+o[13],l[14]=o[2]*q+o[6]*Y+o[10]*te+o[14],l[15]=o[3]*q+o[7]*Y+o[11]*te+o[15]):(m=o[1],v=o[2],x=o[3],b=o[4],I=o[5],A=o[6],M=o[7],R=o[8],O=o[9],U=o[10],j=o[11],l[0]=d=o[0],l[1]=m,l[2]=v,l[3]=x,l[4]=b,l[5]=I,l[6]=A,l[7]=M,l[8]=R,l[9]=O,l[10]=U,l[11]=j,l[12]=d*q+b*Y+R*te+o[12],l[13]=m*q+I*Y+O*te+o[13],l[14]=v*q+A*Y+U*te+o[14],l[15]=x*q+M*Y+j*te+o[15]),l},a.K=function(l,o,c){var d=c[0],m=c[1],v=c[2];return l[0]=o[0]*d,l[1]=o[1]*d,l[2]=o[2]*d,l[3]=o[3]*d,l[4]=o[4]*m,l[5]=o[5]*m,l[6]=o[6]*m,l[7]=o[7]*m,l[8]=o[8]*v,l[9]=o[9]*v,l[10]=o[10]*v,l[11]=o[11]*v,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},a.L=UA,a.M=function(l,o){let c={};for(let d=0;d<o.length;d++){let m=o[d];m in l&&(c[m]=l[m])}return c},a.N=vc,a.O=NM,a.P=C,a.Q=FM,a.R=ko,a.S=No,a.T=Eh,a.U=ie,a.V=ye,a.W=Zr,a.X=Tr,a.Y=S,a.Z=Um,a._=s,a.a=no,a.a$=function(l,o){var c=l[0],d=l[1],m=l[2],v=l[3],x=l[4],b=l[5],I=l[6],A=l[7],M=l[8],R=l[9],O=l[10],U=l[11],j=l[12],q=l[13],Y=l[14],te=l[15],ge=o[0],le=o[1],pe=o[2],Ie=o[3],Ne=o[4],Xe=o[5],_t=o[6],Ze=o[7],He=o[8],dt=o[9],ot=o[10],tt=o[11],De=o[12],ht=o[13],ct=o[14],Tt=o[15];return Math.abs(c-ge)<=Ai*Math.max(1,Math.abs(c),Math.abs(ge))&&Math.abs(d-le)<=Ai*Math.max(1,Math.abs(d),Math.abs(le))&&Math.abs(m-pe)<=Ai*Math.max(1,Math.abs(m),Math.abs(pe))&&Math.abs(v-Ie)<=Ai*Math.max(1,Math.abs(v),Math.abs(Ie))&&Math.abs(x-Ne)<=Ai*Math.max(1,Math.abs(x),Math.abs(Ne))&&Math.abs(b-Xe)<=Ai*Math.max(1,Math.abs(b),Math.abs(Xe))&&Math.abs(I-_t)<=Ai*Math.max(1,Math.abs(I),Math.abs(_t))&&Math.abs(A-Ze)<=Ai*Math.max(1,Math.abs(A),Math.abs(Ze))&&Math.abs(M-He)<=Ai*Math.max(1,Math.abs(M),Math.abs(He))&&Math.abs(R-dt)<=Ai*Math.max(1,Math.abs(R),Math.abs(dt))&&Math.abs(O-ot)<=Ai*Math.max(1,Math.abs(O),Math.abs(ot))&&Math.abs(U-tt)<=Ai*Math.max(1,Math.abs(U),Math.abs(tt))&&Math.abs(j-De)<=Ai*Math.max(1,Math.abs(j),Math.abs(De))&&Math.abs(q-ht)<=Ai*Math.max(1,Math.abs(q),Math.abs(ht))&&Math.abs(Y-ct)<=Ai*Math.max(1,Math.abs(Y),Math.abs(ct))&&Math.abs(te-Tt)<=Ai*Math.max(1,Math.abs(te),Math.abs(Tt))},a.a0=rn,a.a1=QS,a.a2=ze,a.a3=l=>{let o=window.document.createElement("video");return o.muted=!0,new Promise(c=>{o.onloadstart=()=>{c(o)};for(let d of l){let m=window.document.createElement("source");Jo(d)||(o.crossOrigin="Anonymous"),m.src=d,o.appendChild(m)}})},a.a4=function(){return it++},a.a5=Ke,a.a6=jh,a.a7=om,a.a8=Vu,a.a9=VM,a.aA=function(l){if(l.type==="custom")return new H$(l);switch(l.type){case"background":return new j$(l);case"circle":return new A8(l);case"fill":return new G8(l);case"fill-extrusion":return new a$(l);case"heatmap":return new P8(l);case"hillshade":return new k8(l);case"line":return new m$(l);case"raster":return new q$(l);case"symbol":return new i_(l)}},a.aB=nt,a.aC=function(l,o){if(!l)return[{command:"setStyle",args:[o]}];let c=[];try{if(!vn(l.version,o.version))return[{command:"setStyle",args:[o]}];vn(l.center,o.center)||c.push({command:"setCenter",args:[o.center]}),vn(l.zoom,o.zoom)||c.push({command:"setZoom",args:[o.zoom]}),vn(l.bearing,o.bearing)||c.push({command:"setBearing",args:[o.bearing]}),vn(l.pitch,o.pitch)||c.push({command:"setPitch",args:[o.pitch]}),vn(l.sprite,o.sprite)||c.push({command:"setSprite",args:[o.sprite]}),vn(l.glyphs,o.glyphs)||c.push({command:"setGlyphs",args:[o.glyphs]}),vn(l.transition,o.transition)||c.push({command:"setTransition",args:[o.transition]}),vn(l.light,o.light)||c.push({command:"setLight",args:[o.light]}),vn(l.terrain,o.terrain)||c.push({command:"setTerrain",args:[o.terrain]}),vn(l.sky,o.sky)||c.push({command:"setSky",args:[o.sky]}),vn(l.projection,o.projection)||c.push({command:"setProjection",args:[o.projection]});let d={},m=[];(function(x,b,I,A){let M;for(M in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(b,M)||Ys(M,I,A));for(M in b)Object.prototype.hasOwnProperty.call(b,M)&&(Object.prototype.hasOwnProperty.call(x,M)?vn(x[M],b[M])||(x[M].type==="geojson"&&b[M].type==="geojson"&&Bl(x,b,M)?ur(I,{command:"setGeoJSONSourceData",args:[M,b[M].data]}):Es(M,b,I,A)):gu(M,b,I))})(l.sources,o.sources,m,d);let v=[];l.layers&&l.layers.forEach(x=>{"source"in x&&d[x.source]?c.push({command:"removeLayer",args:[x.id]}):v.push(x)}),c=c.concat(m),function(x,b,I){b=b||[];let A=(x=x||[]).map(yu),M=b.map(yu),R=x.reduce(vu,{}),O=b.reduce(vu,{}),U=A.slice(),j=Object.create(null),q,Y,te,ge,le;for(let pe=0,Ie=0;pe<A.length;pe++)q=A[pe],Object.prototype.hasOwnProperty.call(O,q)?Ie++:(ur(I,{command:"removeLayer",args:[q]}),U.splice(U.indexOf(q,Ie),1));for(let pe=0,Ie=0;pe<M.length;pe++)q=M[M.length-1-pe],U[U.length-1-pe]!==q&&(Object.prototype.hasOwnProperty.call(R,q)?(ur(I,{command:"removeLayer",args:[q]}),U.splice(U.lastIndexOf(q,U.length-Ie),1)):Ie++,ge=U[U.length-pe],ur(I,{command:"addLayer",args:[O[q],ge]}),U.splice(U.length-pe,0,q),j[q]=!0);for(let pe=0;pe<M.length;pe++)if(q=M[pe],Y=R[q],te=O[q],!j[q]&&!vn(Y,te))if(vn(Y.source,te.source)&&vn(Y["source-layer"],te["source-layer"])&&vn(Y.type,te.type)){for(le in ro(Y.layout,te.layout,I,q,null,"setLayoutProperty"),ro(Y.paint,te.paint,I,q,null,"setPaintProperty"),vn(Y.filter,te.filter)||ur(I,{command:"setFilter",args:[q,te.filter]}),vn(Y.minzoom,te.minzoom)&&vn(Y.maxzoom,te.maxzoom)||ur(I,{command:"setLayerZoomRange",args:[q,te.minzoom,te.maxzoom]}),Y)Object.prototype.hasOwnProperty.call(Y,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?ro(Y[le],te[le],I,q,le.slice(6),"setPaintProperty"):vn(Y[le],te[le])||ur(I,{command:"setLayerProperty",args:[q,le,te[le]]}));for(le in te)Object.prototype.hasOwnProperty.call(te,le)&&!Object.prototype.hasOwnProperty.call(Y,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?ro(Y[le],te[le],I,q,le.slice(6),"setPaintProperty"):vn(Y[le],te[le])||ur(I,{command:"setLayerProperty",args:[q,le,te[le]]}))}else ur(I,{command:"removeLayer",args:[q]}),ge=U[U.lastIndexOf(q)+1],ur(I,{command:"addLayer",args:[te,ge]})}(v,o.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[o]}]}return c},a.aD=function(l){let o=[],c=l.id;return c===void 0&&o.push({message:`layers.${c}: missing required property "id"`}),l.render===void 0&&o.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},a.aE=function l(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let d=0;d<o.length;d++)if(!l(o[d],c[d]))return!1;return!0}if(typeof o=="object"&&o!==null&&c!==null){if(typeof c!="object"||Object.keys(o).length!==Object.keys(c).length)return!1;for(let d in o)if(!l(o[d],c[d]))return!1;return!0}return o===c},a.aF=ut,a.aG=Mt,a.aH=class extends zu{constructor(l,o){super(l,o),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},a.aI=Hv,a.aJ=class extends zu{constructor(l,o){super(l,o),this.current=w8}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let o=1;o<16;o++)if(l[o]!==this.current[o]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},a.aK=DA,a.aL=AA,a.aM=Mn,a.aN=class extends zu{constructor(l,o){super(l,o),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},a.aO=class extends zu{constructor(l,o){super(l,o),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},a.aP=function(l,o,c,d,m,v,x){var b=1/(o-c),I=1/(d-m),A=1/(v-x);return l[0]=-2*b,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*I,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*A,l[11]=0,l[12]=(o+c)*b,l[13]=(m+d)*I,l[14]=(x+v)*A,l[15]=1,l},a.aQ=D8,a.aR=class extends ue{},a.aS=_$,a.aT=class extends _e{},a.aU=PS,a.aV=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},a.aW=qA,a.aX=oi,a.aY=Ro,a.aZ=class extends at{},a.a_=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]&&l[4]===o[4]&&l[5]===o[5]&&l[6]===o[6]&&l[7]===o[7]&&l[8]===o[8]&&l[9]===o[9]&&l[10]===o[10]&&l[11]===o[11]&&l[12]===o[12]&&l[13]===o[13]&&l[14]===o[14]&&l[15]===o[15]},a.aa=function(l){let o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,m,v)=>{let x=m||v;return o[d]=!x||x.toLowerCase(),""}),o["max-age"]){let c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},a.ab=function(l,o){let c=[];for(let d in l)d in o||c.push(d);return c},a.ac=ke,a.ad=function(l,o,c){var d=Math.sin(c),m=Math.cos(c),v=o[0],x=o[1],b=o[2],I=o[3],A=o[4],M=o[5],R=o[6],O=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=v*m+A*d,l[1]=x*m+M*d,l[2]=b*m+R*d,l[3]=I*m+O*d,l[4]=A*m-v*d,l[5]=M*m-x*d,l[6]=R*m-b*d,l[7]=O*m-I*d,l},a.ae=function(l){var o=new Oh(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},a.af=Kv,a.ag=function(l,o){let c=0,d=0;if(l.kind==="constant")d=l.layoutSize;else if(l.kind!=="source"){let{interpolationType:m,minZoom:v,maxZoom:x}=l,b=m?ke(Ti.interpolationFactor(m,o,v,x),0,1):0;l.kind==="camera"?d=Ei.number(l.minSize,l.maxSize,b):c=b}return{uSizeT:c,uSize:d}},a.ai=function(l,{uSize:o,uSizeT:c},{lowerSize:d,upperSize:m}){return l.kind==="source"?d/ra:l.kind==="composite"?Ei.number(d/ra,m/ra,c):o},a.aj=WS,a.ak=function(l,o,c,d){let m=o.y-l.y,v=o.x-l.x,x=d.y-c.y,b=d.x-c.x,I=x*v-b*m;if(I===0)return null;let A=(b*(l.y-c.y)-x*(l.x-c.x))/I;return new C(l.x+A*v,l.y+A*m)},a.al=HM,a.am=kA,a.an=DS,a.ao=function(l){let o=1/0,c=1/0,d=-1/0,m=-1/0;for(let v of l)o=Math.min(o,v.x),c=Math.min(c,v.y),d=Math.max(d,v.x),m=Math.max(m,v.y);return[o,c,d,m]},a.ap=Pr,a.ar=GS,a.as=function(l,o){var c=o[0],d=o[1],m=o[2],v=o[3],x=o[4],b=o[5],I=o[6],A=o[7],M=o[8],R=o[9],O=o[10],U=o[11],j=o[12],q=o[13],Y=o[14],te=o[15],ge=c*b-d*x,le=c*I-m*x,pe=c*A-v*x,Ie=d*I-m*b,Ne=d*A-v*b,Xe=m*A-v*I,_t=M*q-R*j,Ze=M*Y-O*j,He=M*te-U*j,dt=R*Y-O*q,ot=R*te-U*q,tt=O*te-U*Y,De=ge*tt-le*ot+pe*dt+Ie*He-Ne*Ze+Xe*_t;return De?(l[0]=(b*tt-I*ot+A*dt)*(De=1/De),l[1]=(m*ot-d*tt-v*dt)*De,l[2]=(q*Xe-Y*Ne+te*Ie)*De,l[3]=(O*Ne-R*Xe-U*Ie)*De,l[4]=(I*He-x*tt-A*Ze)*De,l[5]=(c*tt-m*He+v*Ze)*De,l[6]=(Y*pe-j*Xe-te*le)*De,l[7]=(M*Xe-O*pe+U*le)*De,l[8]=(x*ot-b*He+A*_t)*De,l[9]=(d*He-c*ot-v*_t)*De,l[10]=(j*Ne-q*pe+te*ge)*De,l[11]=(R*pe-M*Ne-U*ge)*De,l[12]=(b*Ze-x*dt-I*_t)*De,l[13]=(c*dt-d*Ze+m*_t)*De,l[14]=(q*le-j*Ie-Y*ge)*De,l[15]=(M*Ie-R*le+O*ge)*De,l):null},a.at=t1,a.au=HS,a.av=n1,a.aw=function(){let l={},o=Ce.$version;for(let c in Ce.$root){let d=Ce.$root[c];if(d.required){let m=null;m=c==="version"?o:d.type==="array"?[]:{},m!=null&&(l[c]=m)}}return l},a.ax=_m,a.ay=Bi,a.az=function(l){l=l.slice();let o=Object.create(null);for(let c=0;c<l.length;c++)o[l[c].id]=l[c];for(let c=0;c<l.length;c++)"ref"in l[c]&&(l[c]=mu(l[c],o[l[c].ref]));return l},a.b=Cr,a.b0=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l},a.b1=function(l,o,c){return l[0]=o[0]*c[0],l[1]=o[1]*c[1],l[2]=o[2]*c[2],l[3]=o[3]*c[3],l},a.b2=function(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]+l[3]*o[3]},a.b3=Ve,a.b4=zM,a.b5=OM,a.b6=function(l,o,c,d,m){var v,x=1/Math.tan(o/2);return l[0]=x/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=x,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,m!=null&&m!==1/0?(l[10]=(m+d)*(v=1/(d-m)),l[14]=2*m*d*v):(l[10]=-1,l[14]=-2*d),l},a.b7=function(l,o,c){var d=Math.sin(c),m=Math.cos(c),v=o[4],x=o[5],b=o[6],I=o[7],A=o[8],M=o[9],R=o[10],O=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=v*m+A*d,l[5]=x*m+M*d,l[6]=b*m+R*d,l[7]=I*m+O*d,l[8]=A*m-v*d,l[9]=M*m-x*d,l[10]=R*m-b*d,l[11]=O*m-I*d,l},a.b8=ve,a.b9=Ae,a.bA=uM,a.bB=function(l){return l.message===Kr},a.bC=Jl,a.bD=Hi,a.ba=function(l){return l*Math.PI/180},a.bb=function(l,o){let{x:c,y:d}=Um.fromLngLat(o);return!(l<0||l>25||d<0||d>=1||c<0||c>=1)},a.bc=function(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},a.bd=class extends P{},a.be=XS,a.bf=tq,a.bh=Vn,a.bi=function(l,o){no.REGISTERED_PROTOCOLS[l]=o},a.bj=function(l){delete no.REGISTERED_PROTOCOLS[l]},a.bk=function(l,o){let c={};for(let m=0;m<l.length;m++){let v=o&&o[l[m].id]||kv(l[m]);o&&(o[l[m].id]=v);let x=c[v];x||(x=c[v]=[]),x.push(l[m])}let d=[];for(let m in c)d.push(c[m]);return d},a.bl=rt,a.bm=BM,a.bn=jM,a.bo=_M,a.bp=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Tr/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;let o=l.bucket.layers[0],c=o.layout,d=o._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Jn(l.bucket.zoom+1),l.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Jn(l.bucket.zoom+1),l.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Jn(18))};if(l.bucket.textSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=l.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Jn(A),l.canonical),d["text-size"].possiblyEvaluate(new Jn(M),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=l.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Jn(A),l.canonical),d["icon-size"].possiblyEvaluate(new Jn(M),l.canonical)]}let v=c.get("text-line-height")*Pr,x=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",b=c.get("text-keep-upright"),I=c.get("text-size");for(let A of l.bucket.features){let M=c.get("text-font").evaluate(A,{},l.canonical).join(","),R=I.evaluate(A,{},l.canonical),O=m.layoutTextSize.evaluate(A,{},l.canonical),U=m.layoutIconSize.evaluate(A,{},l.canonical),j={horizontal:{},vertical:void 0},q=A.text,Y,te=[0,0];if(q){let pe=q.toString(),Ie=c.get("text-letter-spacing").evaluate(A,{},l.canonical)*Pr,Ne=yS(pe)?Ie:0,Xe=c.get("text-anchor").evaluate(A,{},l.canonical),_t=eP(o,A,l.canonical);if(!_t){let ot=c.get("text-radial-offset").evaluate(A,{},l.canonical);te=ot?QM(Xe,[ot*Pr,e1]):c.get("text-offset").evaluate(A,{},l.canonical).map(tt=>tt*Pr)}let Ze=x?"center":c.get("text-justify").evaluate(A,{},l.canonical),He=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(A,{},l.canonical)*Pr:1/0,dt=()=>{l.bucket.allowVerticalPlacement&&xm(pe)&&(j.vertical=t_(q,l.glyphMap,l.glyphPositions,l.imagePositions,M,He,v,Xe,"left",Ne,te,a.ah.vertical,!0,O,R))};if(!x&&_t){let ot=new Set;if(Ze==="auto")for(let De=0;De<_t.values.length;De+=2)ot.add(t1(_t.values[De]));else ot.add(Ze);let tt=!1;for(let De of ot)if(!j.horizontal[De])if(tt)j.horizontal[De]=j.horizontal[0];else{let ht=t_(q,l.glyphMap,l.glyphPositions,l.imagePositions,M,He,v,"center",De,Ne,te,a.ah.horizontal,!1,O,R);ht&&(j.horizontal[De]=ht,tt=ht.positionedLines.length===1)}dt()}else{Ze==="auto"&&(Ze=t1(Xe));let ot=t_(q,l.glyphMap,l.glyphPositions,l.imagePositions,M,He,v,Xe,Ze,Ne,te,a.ah.horizontal,!1,O,R);ot&&(j.horizontal[Ze]=ot),dt(),xm(pe)&&x&&b&&(j.vertical=t_(q,l.glyphMap,l.glyphPositions,l.imagePositions,M,He,v,Xe,Ze,Ne,te,a.ah.vertical,!1,O,R))}}let ge=!1;if(A.icon&&A.icon.name){let pe=l.imageMap[A.icon.name];pe&&(Y=L$(l.imagePositions[A.icon.name],c.get("icon-offset").evaluate(A,{},l.canonical),c.get("icon-anchor").evaluate(A,{},l.canonical)),ge=!!pe.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=ge:l.bucket.sdfIcons!==ge&&vt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==l.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}let le=nP(j.horizontal)||j.vertical;l.bucket.iconsInText=!!le&&le.iconsInText,(le||Y)&&Q$(l.bucket,A,j,Y,l.imageMap,m,O,U,te,ge,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},a.bq=US,a.br=OS,a.bs=zS,a.bt=mc,a.bu=VS,a.bv=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},a.bw=function(l,o,c,d,m){return s(this,void 0,void 0,function*(){if(ye())try{return yield Zr(l,o,c,d,m)}catch{}return function(v,x,b,I,A){let M=v.width,R=v.height;Mr&&Bn||(Mr=new OffscreenCanvas(M,R),Bn=Mr.getContext("2d",{willReadFrequently:!0})),Mr.width=M,Mr.height=R,Bn.drawImage(v,0,0,M,R);let O=Bn.getImageData(x,b,I,A);return Bn.clearRect(0,0,M,R),O.data}(l,o,c,d,m)})},a.bx=UM,a.by=h,a.bz=_,a.c=_r,a.d=l=>s(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));let o=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(o)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=Ge,a.f=l=>new Promise((o,c)=>{let d=new Image;d.onload=()=>{o(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Xo})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let m=new Blob([new Uint8Array(l)],{type:"image/png"});d.src=l.byteLength?URL.createObjectURL(m):Xo}),a.g=Ci,a.h=(l,o)=>Cs(Ge(l,{type:"json"}),o),a.i=Lt,a.j=Ks,a.k=Zs,a.l=(l,o)=>Cs(Ge(l,{type:"arrayBuffer"}),o),a.m=Cs,a.n=function(l){return new VS(l).readFields(M$,[])},a.o=Am,a.p=vM,a.q=y,a.r=mS,a.s=Jo,a.t=ym,a.u=ol,a.v=Ce,a.w=vt,a.x=function([l,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(o)*Math.sin(c),y:l*Math.sin(o)*Math.sin(c),z:l*Math.cos(c)}},a.y=Ei,a.z=Jn}),n("worker",["./shared"],function(a){"use strict";class s{constructor(z){this.keyCache={},z&&this.replace(z)}replace(z){this._layerConfigs={},this._layers={},this.update(z,[])}update(z,L){for(let X of z){this._layerConfigs[X.id]=X;let ce=this._layers[X.id]=a.aA(X);ce._featureFilter=a.a7(ce.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(let X of L)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};let G=a.bk(Object.values(this._layerConfigs),this.keyCache);for(let X of G){let ce=X.map(be=>this._layers[be.id]),de=ce[0];if(de.visibility==="none")continue;let me=de.source||"",oe=this.familiesBySource[me];oe||(oe=this.familiesBySource[me]={});let Ee=de.sourceLayer||"_geojsonTileLayer",Re=oe[Ee];Re||(Re=oe[Ee]=[]),Re.push(ce)}}}class h{constructor(z){let L={},G=[];for(let me in z){let oe=z[me],Ee=L[me]={};for(let Re in oe){let be=oe[+Re];if(!be||be.bitmap.width===0||be.bitmap.height===0)continue;let Ue={x:0,y:0,w:be.bitmap.width+2,h:be.bitmap.height+2};G.push(Ue),Ee[Re]={rect:Ue,metrics:be.metrics}}}let{w:X,h:ce}=a.p(G),de=new a.o({width:X||1,height:ce||1});for(let me in z){let oe=z[me];for(let Ee in oe){let Re=oe[+Ee];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;let be=L[me][Ee].rect;a.o.copy(Re.bitmap,de,{x:0,y:0},{x:be.x+1,y:be.y+1},Re.bitmap)}}this.image=de,this.positions=L}}a.bl("GlyphAtlas",h);class _{constructor(z){this.tileID=new a.S(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId,this.inFlightDependencies=[]}parse(z,L,G,X){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=z,this.collisionBoxArray=new a.a5;let ce=new a.bm(Object.keys(z.layers).sort()),de=new a.bn(this.tileID,this.promoteId);de.bucketLayerIDs=[];let me={},oe={featureIndex:de,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:G},Ee=L.familiesBySource[this.source];for(let qt in Ee){let An=z.layers[qt];if(!An)continue;An.version===1&&a.w(`Vector tile source "${this.source}" layer "${qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let rr=ce.encode(qt),Lr=[];for(let Yr=0;Yr<An.length;Yr++){let yi=An.feature(Yr),Vl=de.getId(yi,qt);Lr.push({feature:yi,id:Vl,index:Yr,sourceLayerIndex:rr})}for(let Yr of Ee[qt]){let yi=Yr[0];yi.source!==this.source&&a.w(`layer.source = ${yi.source} does not equal this.source = ${this.source}`),yi.minzoom&&this.zoom<Math.floor(yi.minzoom)||yi.maxzoom&&this.zoom>=yi.maxzoom||yi.visibility!=="none"&&(w(Yr,this.zoom,G),(me[yi.id]=yi.createBucket({index:de.bucketLayerIDs.length,layers:Yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rr,sourceID:this.source})).populate(Lr,oe,this.tileID.canonical),de.bucketLayerIDs.push(Yr.map(Vl=>Vl.id)))}}let Re=a.aF(oe.glyphDependencies,qt=>Object.keys(qt).map(Number));this.inFlightDependencies.forEach(qt=>qt?.abort()),this.inFlightDependencies=[];let be=Promise.resolve({});if(Object.keys(Re).length){let qt=new AbortController;this.inFlightDependencies.push(qt),be=X.sendAsync({type:"GG",data:{stacks:Re,source:this.source,tileID:this.tileID,type:"glyphs"}},qt)}let Ue=Object.keys(oe.iconDependencies),pt=Promise.resolve({});if(Ue.length){let qt=new AbortController;this.inFlightDependencies.push(qt),pt=X.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},qt)}let yt=Object.keys(oe.patternDependencies),hn=Promise.resolve({});if(yt.length){let qt=new AbortController;this.inFlightDependencies.push(qt),hn=X.sendAsync({type:"GI",data:{icons:yt,source:this.source,tileID:this.tileID,type:"patterns"}},qt)}let[Nt,pn,Yt]=yield Promise.all([be,pt,hn]),Ir=new h(Nt),dr=new a.bo(pn,Yt);for(let qt in me){let An=me[qt];An instanceof a.a6?(w(An.layers,this.zoom,G),a.bp({bucket:An,glyphMap:Nt,glyphPositions:Ir.positions,imageMap:pn,imagePositions:dr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):An.hasPattern&&(An instanceof a.bq||An instanceof a.br||An instanceof a.bs)&&(w(An.layers,this.zoom,G),An.addFeatures(oe,this.tileID.canonical,dr.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(qt=>!qt.isEmpty()),featureIndex:de,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ir.image,imageAtlas:dr,glyphMap:this.returnDependencies?Nt:null,iconMap:this.returnDependencies?pn:null,glyphPositions:this.returnDependencies?Ir.positions:null}})}}function w(Q,z,L){let G=new a.z(z);for(let X of Q)X.recalculate(G,L)}class C{constructor(z,L,G){this.actor=z,this.layerIndex=L,this.availableImages=G,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(z,L){return a._(this,void 0,void 0,function*(){let G=yield a.l(z.request,L);try{return{vectorTile:new a.bt.VectorTile(new a.bu(G.data)),rawData:G.data,cacheControl:G.cacheControl,expires:G.expires}}catch(X){let ce=new Uint8Array(G.data),de=`Unable to parse the tile at ${z.request.url}, `;throw de+=ce[0]===31&&ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${X.message}`,new Error(de)}})}loadTile(z){return a._(this,void 0,void 0,function*(){let L=z.uid,G=!!(z&&z.request&&z.request.collectResourceTiming)&&new a.bv(z.request),X=new _(z);this.loading[L]=X;let ce=new AbortController;X.abort=ce;try{let de=yield this.loadVectorTile(z,ce);if(delete this.loading[L],!de)return null;let me=de.rawData,oe={};de.expires&&(oe.expires=de.expires),de.cacheControl&&(oe.cacheControl=de.cacheControl);let Ee={};if(G){let be=G.finish();be&&(Ee.resourceTiming=JSON.parse(JSON.stringify(be)))}X.vectorTile=de.vectorTile;let Re=X.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[L]=X,this.fetching[L]={rawTileData:me,cacheControl:oe,resourceTiming:Ee};try{let be=yield Re;return a.e({rawTileData:me.slice(0)},be,oe,Ee)}finally{delete this.fetching[L]}}catch(de){throw delete this.loading[L],X.status="done",this.loaded[L]=X,de}})}reloadTile(z){return a._(this,void 0,void 0,function*(){let L=z.uid;if(!this.loaded||!this.loaded[L])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let G=this.loaded[L];if(G.showCollisionBoxes=z.showCollisionBoxes,G.status==="parsing"){let X=yield G.parse(G.vectorTile,this.layerIndex,this.availableImages,this.actor),ce;if(this.fetching[L]){let{rawTileData:de,cacheControl:me,resourceTiming:oe}=this.fetching[L];delete this.fetching[L],ce=a.e({rawTileData:de.slice(0)},X,me,oe)}else ce=X;return ce}if(G.status==="done"&&G.vectorTile)return G.parse(G.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(z){return a._(this,void 0,void 0,function*(){let L=this.loading,G=z.uid;L&&L[G]&&L[G].abort&&(L[G].abort.abort(),delete L[G])})}removeTile(z){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[z.uid]&&delete this.loaded[z.uid]})}}class T{constructor(){this.loaded={}}loadTile(z){return a._(this,void 0,void 0,function*(){let{uid:L,encoding:G,rawImageData:X,redFactor:ce,greenFactor:de,blueFactor:me,baseShift:oe}=z,Ee=X.width+2,Re=X.height+2,be=a.b(X)?new a.R({width:Ee,height:Re},yield a.bw(X,-1,-1,Ee,Re)):X,Ue=new a.bx(L,be,G,ce,de,me,oe);return this.loaded=this.loaded||{},this.loaded[L]=Ue,Ue})}removeTile(z){let L=this.loaded,G=z.uid;L&&L[G]&&delete L[G]}}function F(Q,z){if(Q.length!==0){B(Q[0],z);for(var L=1;L<Q.length;L++)B(Q[L],!z)}}function B(Q,z){for(var L=0,G=0,X=0,ce=Q.length,de=ce-1;X<ce;de=X++){var me=(Q[X][0]-Q[de][0])*(Q[de][1]+Q[X][1]),oe=L+me;G+=Math.abs(L)>=Math.abs(me)?L-oe+me:me-oe+L,L=oe}L+G>=0!=!!z&&Q.reverse()}var $=a.by(function Q(z,L){var G,X=z&&z.type;if(X==="FeatureCollection")for(G=0;G<z.features.length;G++)Q(z.features[G],L);else if(X==="GeometryCollection")for(G=0;G<z.geometries.length;G++)Q(z.geometries[G],L);else if(X==="Feature")Q(z.geometry,L);else if(X==="Polygon")F(z.coordinates,L);else if(X==="MultiPolygon")for(G=0;G<z.coordinates.length;G++)F(z.coordinates[G],L);return z});let ee=a.bt.VectorTileFeature.prototype.toGeoJSON;var ie={exports:{}},ye=a.bz,ve=a.bt.VectorTileFeature,Ae=ke;function ke(Q,z){this.options=z||{},this.features=Q,this.length=Q.length}function Ve(Q,z){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=z||4096}ke.prototype.feature=function(Q){return new Ve(this.features[Q],this.options.extent)},Ve.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var z=0;z<Q.length;z++){for(var L=Q[z],G=[],X=0;X<L.length;X++)G.push(new ye(L[X][0],L[X][1]));this.geometry.push(G)}return this.geometry},Ve.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,z=1/0,L=-1/0,G=1/0,X=-1/0,ce=0;ce<Q.length;ce++)for(var de=Q[ce],me=0;me<de.length;me++){var oe=de[me];z=Math.min(z,oe.x),L=Math.max(L,oe.x),G=Math.min(G,oe.y),X=Math.max(X,oe.y)}return[z,G,L,X]},Ve.prototype.toGeoJSON=ve.prototype.toGeoJSON;var Ge=a.bA,it=Ae;function ut(Q){var z=new Ge;return function(L,G){for(var X in L.layers)G.writeMessage(3,Mt,L.layers[X])}(Q,z),z.finish()}function Mt(Q,z){var L;z.writeVarintField(15,Q.version||1),z.writeStringField(1,Q.name||""),z.writeVarintField(5,Q.extent||4096);var G={keys:[],values:[],keycache:{},valuecache:{}};for(L=0;L<Q.length;L++)G.feature=Q.feature(L),z.writeMessage(2,nt,G);var X=G.keys;for(L=0;L<X.length;L++)z.writeStringField(3,X[L]);var ce=G.values;for(L=0;L<ce.length;L++)z.writeMessage(4,ar,ce[L])}function nt(Q,z){var L=Q.feature;L.id!==void 0&&z.writeVarintField(1,L.id),z.writeMessage(2,Nn,Q),z.writeVarintField(3,L.type),z.writeMessage(4,Lt,L)}function Nn(Q,z){var L=Q.feature,G=Q.keys,X=Q.values,ce=Q.keycache,de=Q.valuecache;for(var me in L.properties){var oe=L.properties[me],Ee=ce[me];if(oe!==null){Ee===void 0&&(G.push(me),ce[me]=Ee=G.length-1),z.writeVarint(Ee);var Re=typeof oe;Re!=="string"&&Re!=="boolean"&&Re!=="number"&&(oe=JSON.stringify(oe));var be=Re+":"+oe,Ue=de[be];Ue===void 0&&(X.push(oe),de[be]=Ue=X.length-1),z.writeVarint(Ue)}}}function vt(Q,z){return(z<<3)+(7&Q)}function Ut(Q){return Q<<1^Q>>31}function Lt(Q,z){for(var L=Q.loadGeometry(),G=Q.type,X=0,ce=0,de=L.length,me=0;me<de;me++){var oe=L[me],Ee=1;G===1&&(Ee=oe.length),z.writeVarint(vt(1,Ee));for(var Re=G===3?oe.length-1:oe.length,be=0;be<Re;be++){be===1&&G!==1&&z.writeVarint(vt(2,Re-1));var Ue=oe[be].x-X,pt=oe[be].y-ce;z.writeVarint(Ut(Ue)),z.writeVarint(Ut(pt)),X+=Ue,ce+=pt}G===3&&z.writeVarint(vt(7,1))}}function ar(Q,z){var L=typeof Q;L==="string"?z.writeStringField(1,Q):L==="boolean"?z.writeBooleanField(7,Q):L==="number"&&(Q%1!=0?z.writeDoubleField(3,Q):Q<0?z.writeSVarintField(6,Q):z.writeVarintField(5,Q))}ie.exports=ut,ie.exports.fromVectorTileJs=ut,ie.exports.fromGeojsonVt=function(Q,z){z=z||{};var L={};for(var G in Q)L[G]=new it(Q[G].features,z),L[G].name=G,L[G].version=z.version,L[G].extent=z.extent;return ut({layers:L})},ie.exports.GeoJSONWrapper=it;var Cr=a.by(ie.exports);let Xo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},Zr=Math.fround||(Mr=new Float32Array(1),Q=>(Mr[0]=+Q,Mr[0]));var Mr;let Bn=3,Kr=5,_r=6;class no{constructor(z){this.options=Object.assign(Object.create(Xo),z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(z){let{log:L,minZoom:G,maxZoom:X}=this.options;L&&console.time("total time");let ce=`prepare ${z.length} points`;L&&console.time(ce),this.points=z;let de=[];for(let oe=0;oe<z.length;oe++){let Ee=z[oe];if(!Ee.geometry)continue;let[Re,be]=Ee.geometry.coordinates,Ue=Zr(Vn(Re)),pt=Zr(Bi(be));de.push(Ue,pt,1/0,oe,-1,1),this.options.reduce&&de.push(0)}let me=this.trees[X+1]=this._createTree(de);L&&console.timeEnd(ce);for(let oe=X;oe>=G;oe--){let Ee=+Date.now();me=this.trees[oe]=this._createTree(this._cluster(me,oe)),L&&console.log("z%d: %d clusters in %dms",oe,me.numItems,+Date.now()-Ee)}return L&&console.timeEnd("total time"),this}getClusters(z,L){let G=((z[0]+180)%360+360)%360-180,X=Math.max(-90,Math.min(90,z[1])),ce=z[2]===180?180:((z[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)G=-180,ce=180;else if(G>ce){let be=this.getClusters([G,X,180,de],L),Ue=this.getClusters([-180,X,ce,de],L);return be.concat(Ue)}let me=this.trees[this._limitZoom(L)],oe=me.range(Vn(G),Bi(de),Vn(ce),Bi(X)),Ee=me.data,Re=[];for(let be of oe){let Ue=this.stride*be;Re.push(Ee[Ue+Kr]>1?Ci(Ee,Ue,this.clusterProps):this.points[Ee[Ue+Bn]])}return Re}getChildren(z){let L=this._getOriginId(z),G=this._getOriginZoom(z),X="No cluster with the specified id.",ce=this.trees[G];if(!ce)throw new Error(X);let de=ce.data;if(L*this.stride>=de.length)throw new Error(X);let me=this.options.radius/(this.options.extent*Math.pow(2,G-1)),oe=ce.within(de[L*this.stride],de[L*this.stride+1],me),Ee=[];for(let Re of oe){let be=Re*this.stride;de[be+4]===z&&Ee.push(de[be+Kr]>1?Ci(de,be,this.clusterProps):this.points[de[be+Bn]])}if(Ee.length===0)throw new Error(X);return Ee}getLeaves(z,L,G){let X=[];return this._appendLeaves(X,z,L=L||10,G=G||0,0),X}getTile(z,L,G){let X=this.trees[this._limitZoom(z)],ce=Math.pow(2,z),{extent:de,radius:me}=this.options,oe=me/de,Ee=(G-oe)/ce,Re=(G+1+oe)/ce,be={features:[]};return this._addTileFeatures(X.range((L-oe)/ce,Ee,(L+1+oe)/ce,Re),X.data,L,G,ce,be),L===0&&this._addTileFeatures(X.range(1-oe/ce,Ee,1,Re),X.data,ce,G,ce,be),L===ce-1&&this._addTileFeatures(X.range(0,Ee,oe/ce,Re),X.data,-1,G,ce,be),be.features.length?be:null}getClusterExpansionZoom(z){let L=this._getOriginZoom(z)-1;for(;L<=this.options.maxZoom;){let G=this.getChildren(z);if(L++,G.length!==1)break;z=G[0].properties.cluster_id}return L}_appendLeaves(z,L,G,X,ce){let de=this.getChildren(L);for(let me of de){let oe=me.properties;if(oe&&oe.cluster?ce+oe.point_count<=X?ce+=oe.point_count:ce=this._appendLeaves(z,oe.cluster_id,G,X,ce):ce<X?ce++:z.push(me),z.length===G)break}return ce}_createTree(z){let L=new a.av(z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let G=0;G<z.length;G+=this.stride)L.add(z[G],z[G+1]);return L.finish(),L.data=z,L}_addTileFeatures(z,L,G,X,ce,de){for(let me of z){let oe=me*this.stride,Ee=L[oe+Kr]>1,Re,be,Ue;if(Ee)Re=Kt(L,oe,this.clusterProps),be=L[oe],Ue=L[oe+1];else{let hn=this.points[L[oe+Bn]];Re=hn.properties;let[Nt,pn]=hn.geometry.coordinates;be=Vn(Nt),Ue=Bi(pn)}let pt={type:1,geometry:[[Math.round(this.options.extent*(be*ce-G)),Math.round(this.options.extent*(Ue*ce-X))]],tags:Re},yt;yt=Ee||this.options.generateId?L[oe+Bn]:this.points[L[oe+Bn]].id,yt!==void 0&&(pt.id=yt),de.features.push(pt)}}_limitZoom(z){return Math.max(this.options.minZoom,Math.min(Math.floor(+z),this.options.maxZoom+1))}_cluster(z,L){let{radius:G,extent:X,reduce:ce,minPoints:de}=this.options,me=G/(X*Math.pow(2,L)),oe=z.data,Ee=[],Re=this.stride;for(let be=0;be<oe.length;be+=Re){if(oe[be+2]<=L)continue;oe[be+2]=L;let Ue=oe[be],pt=oe[be+1],yt=z.within(oe[be],oe[be+1],me),hn=oe[be+Kr],Nt=hn;for(let pn of yt){let Yt=pn*Re;oe[Yt+2]>L&&(Nt+=oe[Yt+Kr])}if(Nt>hn&&Nt>=de){let pn,Yt=Ue*hn,Ir=pt*hn,dr=-1,qt=((be/Re|0)<<5)+(L+1)+this.points.length;for(let An of yt){let rr=An*Re;if(oe[rr+2]<=L)continue;oe[rr+2]=L;let Lr=oe[rr+Kr];Yt+=oe[rr]*Lr,Ir+=oe[rr+1]*Lr,oe[rr+4]=qt,ce&&(pn||(pn=this._map(oe,be,!0),dr=this.clusterProps.length,this.clusterProps.push(pn)),ce(pn,this._map(oe,rr)))}oe[be+4]=qt,Ee.push(Yt/Nt,Ir/Nt,1/0,qt,-1,Nt),ce&&Ee.push(dr)}else{for(let pn=0;pn<Re;pn++)Ee.push(oe[be+pn]);if(Nt>1)for(let pn of yt){let Yt=pn*Re;if(!(oe[Yt+2]<=L)){oe[Yt+2]=L;for(let Ir=0;Ir<Re;Ir++)Ee.push(oe[Yt+Ir])}}}}return Ee}_getOriginId(z){return z-this.points.length>>5}_getOriginZoom(z){return(z-this.points.length)%32}_map(z,L,G){if(z[L+Kr]>1){let de=this.clusterProps[z[L+_r]];return G?Object.assign({},de):de}let X=this.points[z[L+Bn]].properties,ce=this.options.map(X);return G&&ce===X?Object.assign({},ce):ce}}function Ci(Q,z,L){return{type:"Feature",id:Q[z+Bn],properties:Kt(Q,z,L),geometry:{type:"Point",coordinates:[(G=Q[z],360*(G-.5)),Cs(Q[z+1])]}};var G}function Kt(Q,z,L){let G=Q[z+Kr],X=G>=1e4?`${Math.round(G/1e3)}k`:G>=1e3?Math.round(G/100)/10+"k":G,ce=Q[z+_r],de=ce===-1?{}:Object.assign({},L[ce]);return Object.assign(de,{cluster:!0,cluster_id:Q[z+Bn],point_count:G,point_count_abbreviated:X})}function Vn(Q){return Q/360+.5}function Bi(Q){let z=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return L<0?0:L>1?1:L}function Cs(Q){let z=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(z))/Math.PI-90}function Jo(Q,z,L,G){let X=G,ce=z+(L-z>>1),de,me=L-z,oe=Q[z],Ee=Q[z+1],Re=Q[L],be=Q[L+1];for(let Ue=z+3;Ue<L;Ue+=3){let pt=Ws(Q[Ue],Q[Ue+1],oe,Ee,Re,be);if(pt>X)de=Ue,X=pt;else if(pt===X){let yt=Math.abs(Ue-ce);yt<me&&(de=Ue,me=yt)}}X>G&&(de-z>3&&Jo(Q,z,de,G),Q[de+2]=X,L-de>3&&Jo(Q,de,L,G))}function Ws(Q,z,L,G,X,ce){let de=X-L,me=ce-G;if(de!==0||me!==0){let oe=((Q-L)*de+(z-G)*me)/(de*de+me*me);oe>1?(L=X,G=ce):oe>0&&(L+=de*oe,G+=me*oe)}return de=Q-L,me=z-G,de*de+me*me}function Is(Q,z,L,G){let X={id:Q??null,type:z,geometry:L,tags:G,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(z==="Point"||z==="MultiPoint"||z==="LineString")Zs(X,L);else if(z==="Polygon")Zs(X,L[0]);else if(z==="MultiLineString")for(let ce of L)Zs(X,ce);else if(z==="MultiPolygon")for(let ce of L)Zs(X,ce[0]);return X}function Zs(Q,z){for(let L=0;L<z.length;L+=3)Q.minX=Math.min(Q.minX,z[L]),Q.minY=Math.min(Q.minY,z[L+1]),Q.maxX=Math.max(Q.maxX,z[L]),Q.maxY=Math.max(Q.maxY,z[L+1])}function Ks(Q,z,L,G){if(!z.geometry)return;let X=z.geometry.coordinates;if(X&&X.length===0)return;let ce=z.geometry.type,de=Math.pow(L.tolerance/((1<<L.maxZoom)*L.extent),2),me=[],oe=z.id;if(L.promoteId?oe=z.properties[L.promoteId]:L.generateId&&(oe=G||0),ce==="Point")Ul(X,me);else if(ce==="MultiPoint")for(let Ee of X)Ul(Ee,me);else if(ce==="LineString")Ce(X,me,de,!1);else if(ce==="MultiLineString"){if(L.lineMetrics){for(let Ee of X)me=[],Ce(Ee,me,de,!1),Q.push(Is(oe,"LineString",me,z.properties));return}Wa(X,me,de,!1)}else if(ce==="Polygon")Wa(X,me,de,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(let Ee of z.geometry.geometries)Ks(Q,{id:oe,geometry:Ee,properties:z.properties},L,G);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ee of X){let Re=[];Wa(Ee,Re,de,!0),me.push(Re)}}Q.push(Is(oe,ce,me,z.properties))}function Ul(Q,z){z.push(mu(Q[0]),vn(Q[1]),0)}function Ce(Q,z,L,G){let X,ce,de=0;for(let oe=0;oe<Q.length;oe++){let Ee=mu(Q[oe][0]),Re=vn(Q[oe][1]);z.push(Ee,Re,0),oe>0&&(de+=G?(X*Re-Ee*ce)/2:Math.sqrt(Math.pow(Ee-X,2)+Math.pow(Re-ce,2))),X=Ee,ce=Re}let me=z.length-3;z[2]=1,Jo(z,0,me,L),z[me+2]=1,z.size=Math.abs(de),z.start=0,z.end=z.size}function Wa(Q,z,L,G){for(let X=0;X<Q.length;X++){let ce=[];Ce(Q[X],ce,L,G),z.push(ce)}}function mu(Q){return Q/360+.5}function vn(Q){let z=Math.sin(Q*Math.PI/180),L=.5-.25*Math.log((1+z)/(1-z))/Math.PI;return L<0?0:L>1?1:L}function ur(Q,z,L,G,X,ce,de,me){if(G/=z,ce>=(L/=z)&&de<G)return Q;if(de<L||ce>=G)return null;let oe=[];for(let Ee of Q){let Re=Ee.geometry,be=Ee.type,Ue=X===0?Ee.minX:Ee.minY,pt=X===0?Ee.maxX:Ee.maxY;if(Ue>=L&&pt<G){oe.push(Ee);continue}if(pt<L||Ue>=G)continue;let yt=[];if(be==="Point"||be==="MultiPoint")gu(Re,yt,L,G,X);else if(be==="LineString")Ys(Re,yt,L,G,X,!1,me.lineMetrics);else if(be==="MultiLineString")Bl(Re,yt,L,G,X,!1);else if(be==="Polygon")Bl(Re,yt,L,G,X,!0);else if(be==="MultiPolygon")for(let hn of Re){let Nt=[];Bl(hn,Nt,L,G,X,!0),Nt.length&&yt.push(Nt)}if(yt.length){if(me.lineMetrics&&be==="LineString"){for(let hn of yt)oe.push(Is(Ee.id,be,hn,Ee.tags));continue}be!=="LineString"&&be!=="MultiLineString"||(yt.length===1?(be="LineString",yt=yt[0]):be="MultiLineString"),be!=="Point"&&be!=="MultiPoint"||(be=yt.length===3?"Point":"MultiPoint"),oe.push(Is(Ee.id,be,yt,Ee.tags))}}return oe.length?oe:null}function gu(Q,z,L,G,X){for(let ce=0;ce<Q.length;ce+=3){let de=Q[ce+X];de>=L&&de<=G&&ro(z,Q[ce],Q[ce+1],Q[ce+2])}}function Ys(Q,z,L,G,X,ce,de){let me=Es(Q),oe=X===0?yu:vu,Ee,Re,be=Q.start;for(let Nt=0;Nt<Q.length-3;Nt+=3){let pn=Q[Nt],Yt=Q[Nt+1],Ir=Q[Nt+2],dr=Q[Nt+3],qt=Q[Nt+4],An=X===0?pn:Yt,rr=X===0?dr:qt,Lr=!1;de&&(Ee=Math.sqrt(Math.pow(pn-dr,2)+Math.pow(Yt-qt,2))),An<L?rr>L&&(Re=oe(me,pn,Yt,dr,qt,L),de&&(me.start=be+Ee*Re)):An>G?rr<G&&(Re=oe(me,pn,Yt,dr,qt,G),de&&(me.start=be+Ee*Re)):ro(me,pn,Yt,Ir),rr<L&&An>=L&&(Re=oe(me,pn,Yt,dr,qt,L),Lr=!0),rr>G&&An<=G&&(Re=oe(me,pn,Yt,dr,qt,G),Lr=!0),!ce&&Lr&&(de&&(me.end=be+Ee*Re),z.push(me),me=Es(Q)),de&&(be+=Ee)}let Ue=Q.length-3,pt=Q[Ue],yt=Q[Ue+1],hn=X===0?pt:yt;hn>=L&&hn<=G&&ro(me,pt,yt,Q[Ue+2]),Ue=me.length-3,ce&&Ue>=3&&(me[Ue]!==me[0]||me[Ue+1]!==me[1])&&ro(me,me[0],me[1],me[2]),me.length&&z.push(me)}function Es(Q){let z=[];return z.size=Q.size,z.start=Q.start,z.end=Q.end,z}function Bl(Q,z,L,G,X,ce){for(let de of Q)Ys(de,z,L,G,X,ce,!1)}function ro(Q,z,L,G){Q.push(z,L,G)}function yu(Q,z,L,G,X,ce){let de=(ce-z)/(G-z);return ro(Q,ce,L+(X-L)*de,1),de}function vu(Q,z,L,G,X,ce){let de=(ce-L)/(X-L);return ro(Q,z+(G-z)*de,ce,1),de}function ze(Q,z){let L=[];for(let G=0;G<Q.length;G++){let X=Q[G],ce=X.type,de;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")de=Qo(X.geometry,z);else if(ce==="MultiLineString"||ce==="Polygon"){de=[];for(let me of X.geometry)de.push(Qo(me,z))}else if(ce==="MultiPolygon"){de=[];for(let me of X.geometry){let oe=[];for(let Ee of me)oe.push(Qo(Ee,z));de.push(oe)}}L.push(Is(X.id,ce,de,X.tags))}return L}function Qo(Q,z){let L=[];L.size=Q.size,Q.start!==void 0&&(L.start=Q.start,L.end=Q.end);for(let G=0;G<Q.length;G+=3)L.push(Q[G]+z,Q[G+1],Q[G+2]);return L}function gi(Q,z){if(Q.transformed)return Q;let L=1<<Q.z,G=Q.x,X=Q.y;for(let ce of Q.features){let de=ce.geometry,me=ce.type;if(ce.geometry=[],me===1)for(let oe=0;oe<de.length;oe+=2)ce.geometry.push(es(de[oe],de[oe+1],z,L,G,X));else for(let oe=0;oe<de.length;oe++){let Ee=[];for(let Re=0;Re<de[oe].length;Re+=2)Ee.push(es(de[oe][Re],de[oe][Re+1],z,L,G,X));ce.geometry.push(Ee)}}return Q.transformed=!0,Q}function es(Q,z,L,G,X,ce){return[Math.round(L*(Q*G-X)),Math.round(L*(z*G-ce))]}function Xs(Q,z,L,G,X){let ce=z===X.maxZoom?0:X.tolerance/((1<<z)*X.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:Q.length,source:null,x:L,y:G,z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let me of Q)$e(de,me,ce,X);return de}function $e(Q,z,L,G){let X=z.geometry,ce=z.type,de=[];if(Q.minX=Math.min(Q.minX,z.minX),Q.minY=Math.min(Q.minY,z.minY),Q.maxX=Math.max(Q.maxX,z.maxX),Q.maxY=Math.max(Q.maxY,z.maxY),ce==="Point"||ce==="MultiPoint")for(let me=0;me<X.length;me+=3)de.push(X[me],X[me+1]),Q.numPoints++,Q.numSimplified++;else if(ce==="LineString")$t(de,X,Q,L,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(let me=0;me<X.length;me++)$t(de,X[me],Q,L,ce==="Polygon",me===0);else if(ce==="MultiPolygon")for(let me=0;me<X.length;me++){let oe=X[me];for(let Ee=0;Ee<oe.length;Ee++)$t(de,oe[Ee],Q,L,!0,Ee===0)}if(de.length){let me=z.tags||null;if(ce==="LineString"&&G.lineMetrics){me={};for(let Ee in z.tags)me[Ee]=z.tags[Ee];me.mapbox_clip_start=X.start/X.size,me.mapbox_clip_end=X.end/X.size}let oe={geometry:de,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:me};z.id!==null&&(oe.id=z.id),Q.features.push(oe)}}function $t(Q,z,L,G,X,ce){let de=G*G;if(G>0&&z.size<(X?de:G))return void(L.numPoints+=z.length/3);let me=[];for(let oe=0;oe<z.length;oe+=3)(G===0||z[oe+2]>de)&&(L.numSimplified++,me.push(z[oe],z[oe+1])),L.numPoints++;X&&function(oe,Ee){let Re=0;for(let be=0,Ue=oe.length,pt=Ue-2;be<Ue;pt=be,be+=2)Re+=(oe[be]-oe[pt])*(oe[be+1]+oe[pt+1]);if(Re>0===Ee)for(let be=0,Ue=oe.length;be<Ue/2;be+=2){let pt=oe[be],yt=oe[be+1];oe[be]=oe[Ue-2-be],oe[be+1]=oe[Ue-1-be],oe[Ue-2-be]=pt,oe[Ue-1-be]=yt}}(me,ce),Q.push(me)}let Ct={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ii{constructor(z,L){let G=(L=this.options=function(ce,de){for(let me in de)ce[me]=de[me];return ce}(Object.create(Ct),L)).debug;if(G&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");let X=function(ce,de){let me=[];if(ce.type==="FeatureCollection")for(let oe=0;oe<ce.features.length;oe++)Ks(me,ce.features[oe],de,oe);else Ks(me,ce.type==="Feature"?ce:{geometry:ce},de);return me}(z,L);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),X=function(ce,de){let me=de.buffer/de.extent,oe=ce,Ee=ur(ce,1,-1-me,me,0,-1,2,de),Re=ur(ce,1,1-me,2+me,0,-1,2,de);return(Ee||Re)&&(oe=ur(ce,1,-me,1+me,0,-1,2,de)||[],Ee&&(oe=ze(Ee,1).concat(oe)),Re&&(oe=oe.concat(ze(Re,-1)))),oe}(X,L),X.length&&this.splitTile(X,0,0,0),G&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(z,L,G,X,ce,de,me){let oe=[z,L,G,X],Ee=this.options,Re=Ee.debug;for(;oe.length;){X=oe.pop(),G=oe.pop(),L=oe.pop(),z=oe.pop();let be=1<<L,Ue=Io(L,G,X),pt=this.tiles[Ue];if(!pt&&(Re>1&&console.time("creation"),pt=this.tiles[Ue]=Xs(z,L,G,X,Ee),this.tileCoords.push({z:L,x:G,y:X}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,G,X,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));let Lr=`z${L}`;this.stats[Lr]=(this.stats[Lr]||0)+1,this.total++}if(pt.source=z,ce==null){if(L===Ee.indexMaxZoom||pt.numPoints<=Ee.indexMaxPoints)continue}else{if(L===Ee.maxZoom||L===ce)continue;if(ce!=null){let Lr=ce-L;if(G!==de>>Lr||X!==me>>Lr)continue}}if(pt.source=null,z.length===0)continue;Re>1&&console.time("clipping");let yt=.5*Ee.buffer/Ee.extent,hn=.5-yt,Nt=.5+yt,pn=1+yt,Yt=null,Ir=null,dr=null,qt=null,An=ur(z,be,G-yt,G+Nt,0,pt.minX,pt.maxX,Ee),rr=ur(z,be,G+hn,G+pn,0,pt.minX,pt.maxX,Ee);z=null,An&&(Yt=ur(An,be,X-yt,X+Nt,1,pt.minY,pt.maxY,Ee),Ir=ur(An,be,X+hn,X+pn,1,pt.minY,pt.maxY,Ee),An=null),rr&&(dr=ur(rr,be,X-yt,X+Nt,1,pt.minY,pt.maxY,Ee),qt=ur(rr,be,X+hn,X+pn,1,pt.minY,pt.maxY,Ee),rr=null),Re>1&&console.timeEnd("clipping"),oe.push(Yt||[],L+1,2*G,2*X),oe.push(Ir||[],L+1,2*G,2*X+1),oe.push(dr||[],L+1,2*G+1,2*X),oe.push(qt||[],L+1,2*G+1,2*X+1)}}getTile(z,L,G){z=+z,L=+L,G=+G;let X=this.options,{extent:ce,debug:de}=X;if(z<0||z>24)return null;let me=1<<z,oe=Io(z,L=L+me&me-1,G);if(this.tiles[oe])return gi(this.tiles[oe],ce);de>1&&console.log("drilling down to z%d-%d-%d",z,L,G);let Ee,Re=z,be=L,Ue=G;for(;!Ee&&Re>0;)Re--,be>>=1,Ue>>=1,Ee=this.tiles[Io(Re,be,Ue)];return Ee&&Ee.source?(de>1&&(console.log("found parent tile z%d-%d-%d",Re,be,Ue),console.time("drilling down")),this.splitTile(Ee.source,Re,be,Ue,z,L,G),de>1&&console.timeEnd("drilling down"),this.tiles[oe]?gi(this.tiles[oe],ce):null):null}}function Io(Q,z,L){return 32*((1<<Q)*L+z)+Q}function Rt(Q,z){return z?Q.properties[z]:Q.id}function ts(Q,z){if(Q==null)return!0;if(Q.type==="Feature")return Rt(Q,z)!=null;if(Q.type==="FeatureCollection"){let L=new Set;for(let G of Q.features){let X=Rt(G,z);if(X==null||L.has(X))return!1;L.add(X)}return!0}return!1}function Ts(Q,z){let L=new Map;if(Q!=null)if(Q.type==="Feature")L.set(Rt(Q,z),Q);else for(let G of Q.features)L.set(Rt(G,z),G);return L}class Js extends C{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(z,L){return a._(this,void 0,void 0,function*(){let G=z.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let X=this._geoJSONIndex.getTile(G.z,G.x,G.y);if(!X)return null;let ce=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.X,this.length=me.length,this._features=me}feature(me){return new class{constructor(oe){this._feature=oe,this.extent=a.X,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))}loadGeometry(){if(this._feature.type===1){let oe=[];for(let Ee of this._feature.geometry)oe.push([new a.P(Ee[0],Ee[1])]);return oe}{let oe=[];for(let Ee of this._feature.geometry){let Re=[];for(let be of Ee)Re.push(new a.P(be[0],be[1]));oe.push(Re)}return oe}}toGeoJSON(oe,Ee,Re){return ee.call(this,oe,Ee,Re)}}(this._features[me])}}(X.features),de=Cr(ce);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:ce,rawData:de.buffer}})}loadData(z){return a._(this,void 0,void 0,function*(){var L;(L=this._pendingRequest)===null||L===void 0||L.abort();let G=!!(z&&z.request&&z.request.collectResourceTiming)&&new a.bv(z.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(z,this._pendingRequest),this._geoJSONIndex=z.cluster?new no(function({superclusterOptions:de,clusterProperties:me}){if(!me||!de)return de;let oe={},Ee={},Re={accumulated:null,zoom:0},be={properties:null},Ue=Object.keys(me);for(let pt of Ue){let[yt,hn]=me[pt],Nt=a.bC(hn),pn=a.bC(typeof yt=="string"?[yt,["accumulated"],["get",pt]]:yt);oe[pt]=Nt.value,Ee[pt]=pn.value}return de.map=pt=>{be.properties=pt;let yt={};for(let hn of Ue)yt[hn]=oe[hn].evaluate(Re,be);return yt},de.reduce=(pt,yt)=>{be.properties=yt;for(let hn of Ue)Re.accumulated=pt[hn],pt[hn]=Ee[hn].evaluate(Re,be)},de}(z)).load((yield this._pendingData).features):(X=yield this._pendingData,new Ii(X,z.geojsonVtOptions)),this.loaded={};let ce={};if(G){let de=G.finish();de&&(ce.resourceTiming={},ce.resourceTiming[z.source]=JSON.parse(JSON.stringify(de)))}return ce}catch(ce){if(delete this._pendingRequest,a.bB(ce))return{abandoned:!0};throw ce}var X})}getData(){return a._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(z){let L=this.loaded;return L&&L[z.uid]?super.reloadTile(z):this.loadTile(z)}loadAndProcessGeoJSON(z,L){return a._(this,void 0,void 0,function*(){let G=yield this.loadGeoJSON(z,L);if(delete this._pendingRequest,typeof G!="object")throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`);if($(G,!0),z.filter){let X=a.bC(z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(X.result==="error")throw new Error(X.value.map(de=>`${de.key}: ${de.message}`).join(", "));G={type:"FeatureCollection",features:G.features.filter(de=>X.value.evaluate({zoom:0},de))}}return G})}loadGeoJSON(z,L){return a._(this,void 0,void 0,function*(){let{promoteId:G}=z;if(z.request){let X=yield a.h(z.request,L);return this._dataUpdateable=ts(X.data,G)?Ts(X.data,G):void 0,X.data}if(typeof z.data=="string")try{let X=JSON.parse(z.data);return this._dataUpdateable=ts(X,G)?Ts(X,G):void 0,X}catch{throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`)}if(!z.dataDiff)throw new Error(`Input data given to '${z.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${z.source}`);return function(X,ce,de){var me,oe,Ee,Re;if(ce.removeAll&&X.clear(),ce.remove)for(let be of ce.remove)X.delete(be);if(ce.add)for(let be of ce.add){let Ue=Rt(be,de);Ue!=null&&X.set(Ue,be)}if(ce.update)for(let be of ce.update){let Ue=X.get(be.id);if(Ue==null)continue;let pt=!be.removeAllProperties&&(((me=be.removeProperties)===null||me===void 0?void 0:me.length)>0||((oe=be.addOrUpdateProperties)===null||oe===void 0?void 0:oe.length)>0);if((be.newGeometry||be.removeAllProperties||pt)&&(Ue=Object.assign({},Ue),X.set(be.id,Ue),pt&&(Ue.properties=Object.assign({},Ue.properties))),be.newGeometry&&(Ue.geometry=be.newGeometry),be.removeAllProperties)Ue.properties={};else if(((Ee=be.removeProperties)===null||Ee===void 0?void 0:Ee.length)>0)for(let yt of be.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,yt)&&delete Ue.properties[yt];if(((Re=be.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0)for(let{key:yt,value:hn}of be.addOrUpdateProperties)Ue.properties[yt]=hn}}(this._dataUpdateable,z.dataDiff,G),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(z){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(z){return this._geoJSONIndex.getClusterExpansionZoom(z.clusterId)}getClusterChildren(z){return this._geoJSONIndex.getChildren(z.clusterId)}getClusterLeaves(z){return this._geoJSONIndex.getLeaves(z.clusterId,z.limit,z.offset)}}class ns{constructor(z){this.self=z,this.actor=new a.F(z),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(L,G)=>{if(this.externalWorkerSourceTypes[L])throw new Error(`Worker source with name "${L}" already registered.`);this.externalWorkerSourceTypes[L]=G},this.self.addProtocol=a.bi,this.self.removeProtocol=a.bj,this.self.registerRTLTextPlugin=L=>{if(a.bD.isParsed())throw new Error("RTL text plugin already registered.");a.bD.setMethods(L)},this.actor.registerMessageHandler("LDT",(L,G)=>this._getDEMWorkerSource(L,G.source).loadTile(G)),this.actor.registerMessageHandler("RDT",(L,G)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(L,G.source).removeTile(G)})),this.actor.registerMessageHandler("GCEZ",(L,G)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(L,G.type,G.source).getClusterExpansionZoom(G)})),this.actor.registerMessageHandler("GCC",(L,G)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(L,G.type,G.source).getClusterChildren(G)})),this.actor.registerMessageHandler("GCL",(L,G)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(L,G.type,G.source).getClusterLeaves(G)})),this.actor.registerMessageHandler("LD",(L,G)=>this._getWorkerSource(L,G.type,G.source).loadData(G)),this.actor.registerMessageHandler("GD",(L,G)=>this._getWorkerSource(L,G.type,G.source).getData()),this.actor.registerMessageHandler("LT",(L,G)=>this._getWorkerSource(L,G.type,G.source).loadTile(G)),this.actor.registerMessageHandler("RT",(L,G)=>this._getWorkerSource(L,G.type,G.source).reloadTile(G)),this.actor.registerMessageHandler("AT",(L,G)=>this._getWorkerSource(L,G.type,G.source).abortTile(G)),this.actor.registerMessageHandler("RMT",(L,G)=>this._getWorkerSource(L,G.type,G.source).removeTile(G)),this.actor.registerMessageHandler("RS",(L,G)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[L]||!this.workerSources[L][G.type]||!this.workerSources[L][G.type][G.source])return;let X=this.workerSources[L][G.type][G.source];delete this.workerSources[L][G.type][G.source],X.removeSource!==void 0&&X.removeSource(G)})),this.actor.registerMessageHandler("RM",L=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[L],delete this.availableImages[L],delete this.workerSources[L],delete this.demWorkerSources[L]})),this.actor.registerMessageHandler("SR",(L,G)=>a._(this,void 0,void 0,function*(){this.referrer=G})),this.actor.registerMessageHandler("SRPS",(L,G)=>this._syncRTLPluginState(L,G)),this.actor.registerMessageHandler("IS",(L,G)=>a._(this,void 0,void 0,function*(){this.self.importScripts(G)})),this.actor.registerMessageHandler("SI",(L,G)=>this._setImages(L,G)),this.actor.registerMessageHandler("UL",(L,G)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(L).update(G.layers,G.removedIds)})),this.actor.registerMessageHandler("SL",(L,G)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(L).replace(G)}))}_setImages(z,L){return a._(this,void 0,void 0,function*(){this.availableImages[z]=L;for(let G in this.workerSources[z]){let X=this.workerSources[z][G];for(let ce in X)X[ce].availableImages=L}})}_syncRTLPluginState(z,L){return a._(this,void 0,void 0,function*(){if(a.bD.isParsed())return a.bD.getState();if(L.pluginStatus!=="loading")return a.bD.setState(L),L;let G=L.pluginURL;if(this.self.importScripts(G),a.bD.isParsed()){let X={pluginStatus:"loaded",pluginURL:G};return a.bD.setState(X),X}throw a.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${G}`)})}_getAvailableImages(z){let L=this.availableImages[z];return L||(L=[]),L}_getLayerIndex(z){let L=this.layerIndexes[z];return L||(L=this.layerIndexes[z]=new s),L}_getWorkerSource(z,L,G){if(this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][L]||(this.workerSources[z][L]={}),!this.workerSources[z][L][G]){let X={sendAsync:(ce,de)=>(ce.targetMapId=z,this.actor.sendAsync(ce,de))};switch(L){case"vector":this.workerSources[z][L][G]=new C(X,this._getLayerIndex(z),this._getAvailableImages(z));break;case"geojson":this.workerSources[z][L][G]=new Js(X,this._getLayerIndex(z),this._getAvailableImages(z));break;default:this.workerSources[z][L][G]=new this.externalWorkerSourceTypes[L](X,this._getLayerIndex(z),this._getAvailableImages(z))}}return this.workerSources[z][L][G]}_getDEMWorkerSource(z,L){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][L]||(this.demWorkerSources[z][L]=new T),this.demWorkerSources[z][L]}}return a.i(self)&&(self.worker=new ns(self)),ns}),n("index",["exports","./shared"],function(a,s){"use strict";var h="4.7.1";let _,w,C={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:y=>new Promise((i,u)=>{let p=requestAnimationFrame(i);y.signal.addEventListener("abort",()=>{cancelAnimationFrame(p),u(s.c())})}),getImageData(y,i=0){return this.getImageCanvasContext(y).getImageData(-i,-i,y.width+2*i,y.height+2*i)},getImageCanvasContext(y){let i=window.document.createElement("canvas"),u=i.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return i.width=y.width,i.height=y.height,u.drawImage(y,0,0,y.width,y.height),u},resolveURL:y=>(_||(_=document.createElement("a")),_.href=y,_.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(w==null&&(w=matchMedia("(prefers-reduced-motion: reduce)")),w.matches)}};class T{static testProp(i){if(!T.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in T.docStyle)return i[u];return i[0]}static create(i,u,p){let f=window.document.createElement(i);return u!==void 0&&(f.className=u),p&&p.appendChild(f),f}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){T.docStyle&&T.selectProp&&(T.userSelect=T.docStyle[T.selectProp],T.docStyle[T.selectProp]="none")}static enableDrag(){T.docStyle&&T.selectProp&&(T.docStyle[T.selectProp]=T.userSelect)}static setTransform(i,u){i.style[T.transformProp]=u}static addEventListener(i,u,p,f={}){i.addEventListener(u,p,"passive"in f?f:f.capture)}static removeEventListener(i,u,p,f={}){i.removeEventListener(u,p,"passive"in f?f:f.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",T.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",T.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",T.suppressClickInternal,!0)},0)}static getScale(i){let u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}static getPoint(i,u,p){let f=u.boundingClientRect;return new s.P((p.clientX-f.left)/u.x-i.clientLeft,(p.clientY-f.top)/u.y-i.clientTop)}static mousePos(i,u){let p=T.getScale(i);return T.getPoint(i,p,u)}static touchPos(i,u){let p=[],f=T.getScale(i);for(let g=0;g<u.length;g++)p.push(T.getPoint(i,f,u[g]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}T.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,T.selectProp=T.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),T.transformProp=T.testProp(["transform","WebkitTransform"]);let F={supported:!1,testSupport:function(y){!ee&&$&&(ie?ye(y):B=y)}},B,$,ee=!1,ie=!1;function ye(y){let i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,$),y.isContextLost())return;F.supported=!0}catch{}y.deleteTexture(i),ee=!0}var ve;typeof document<"u"&&($=document.createElement("img"),$.onload=()=>{B&&ye(B),B=null,ie=!0},$.onerror=()=>{ee=!0,B=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,f;y.resetRequestQueue=()=>{i=[],u=0,p=0,f={}},y.addThrottleControl=D=>{let P=p++;return f[P]=D,P},y.removeThrottleControl=D=>{delete f[D],S()},y.getImage=(D,P,k=!0)=>new Promise((N,V)=>{F.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),s.e(D,{type:"image"}),i.push({abortController:P,requestParameters:D,supportImageRefresh:k,state:"queued",onError:H=>{V(H)},onSuccess:H=>{N(H)}}),S()});let g=D=>s._(this,void 0,void 0,function*(){D.state="running";let{requestParameters:P,supportImageRefresh:k,onError:N,onSuccess:V,abortController:H}=D,W=k===!1&&!s.i(self)&&!s.g(P.url)&&(!P.headers||Object.keys(P.headers).reduce((re,ae)=>re&&ae==="accept",!0));u++;let J=W?E(P,H):s.m(P,H);try{let re=yield J;delete D.abortController,D.state="completed",re.data instanceof HTMLImageElement||s.b(re.data)?V(re):re.data&&V({data:yield(ne=re.data,typeof createImageBitmap=="function"?s.d(ne):s.f(ne)),cacheControl:re.cacheControl,expires:re.expires})}catch(re){delete D.abortController,N(re)}finally{u--,S()}var ne}),S=()=>{let D=(()=>{for(let P of Object.keys(f))if(f[P]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let P=u;P<D&&i.length>0;P++){let k=i.shift();k.abortController.signal.aborted?P--:g(k)}},E=(D,P)=>new Promise((k,N)=>{let V=new Image,H=D.url,W=D.credentials;W&&W==="include"?V.crossOrigin="use-credentials":(W&&W==="same-origin"||!s.s(H))&&(V.crossOrigin="anonymous"),P.signal.addEventListener("abort",()=>{V.src="",N(s.c())}),V.fetchPriority="high",V.onload=()=>{V.onerror=V.onload=null,k({data:V})},V.onerror=()=>{V.onerror=V.onload=null,P.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},V.src=H})}(ve||(ve={})),ve.resetRequestQueue();class Ae{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ke(y){var i=new s.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var Ve,Ge=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};Ve=new s.A(3),s.A!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0);var it=function(y){var i=y[0],u=y[1];return i*i+u*u};function ut(y){let i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){let u=[];for(let{id:p,url:f}of y){let g=`${p}${f}`;u.indexOf(g)===-1&&(u.push(g),i.push({id:p,url:f}))}}return i}function Mt(y,i,u){let p=y.split("?");return p[0]+=`${i}${u}`,p.join("?")}(function(){var y=new s.A(2);s.A!=Float32Array&&(y[0]=0,y[1]=0)})();class nt{constructor(i,u,p,f){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,f)}update(i,u,p){let{width:f,height:g}=i,S=!(this.size&&this.size[0]===f&&this.size[1]===g||p),{context:E}=this,{gl:D}=E;if(this.useMipmap=!!(u&&u.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[f,g],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,i):D.texImage2D(D.TEXTURE_2D,0,this.format,f,g,0,this.format,D.UNSIGNED_BYTE,i.data);else{let{x:P,y:k}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||s.b(i)?D.texSubImage2D(D.TEXTURE_2D,0,P,k,D.RGBA,D.UNSIGNED_BYTE,i):D.texSubImage2D(D.TEXTURE_2D,0,P,k,f,g,D.RGBA,D.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D)}bind(i,u,p){let{context:f}=this,{gl:g}=f;g.bindTexture(g.TEXTURE_2D,this.texture),p!==g.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=g.LINEAR),i!==this.filter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,i),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,u),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Nn(y){let{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class vt extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(let{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(i){let u=this.images[i];if(u&&!u.data&&u.spriteData){let p=u.spriteData;u.data=new s.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0,f=u.data||u.spriteData;return this._validateStretch(u.stretchX,f&&f.width)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,f&&f.height)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new s.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(let f of i){if(f[0]<p||f[1]<f[0]||u<f[1])return!1;p=f[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;let p=u.spriteData,f=p&&p.width||u.data.width,g=p&&p.height||u.data.height;return!(i[0]<0||f<i[0]||i[1]<0||g<i[1]||i[2]<0||f<i[2]||i[3]<0||g<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){let f=this.getImage(i);if(p&&(f.data.width!==u.data.width||f.data.height!==u.data.height))throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=f.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){let u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((u,p)=>{let f=!0;if(!this.isLoaded())for(let g of i)this.images[g]||(f=!1);this.isLoaded()||f?u(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:u})})}_getImagesForIds(i){let u={};for(let p of i){let f=this.getImage(p);f||(this.fire(new s.k("styleimagemissing",{id:p})),f=this.getImage(p)),f?u[p]={data:f.data.clone(),pixelRatio:f.pixelRatio,sdf:f.sdf,version:f.version,stretchX:f.stretchX,stretchY:f.stretchY,content:f.content,textFitWidth:f.textFitWidth,textFitHeight:f.textFitHeight,hasRenderCallback:!!(f.userImage&&f.userImage.render)}:s.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){let{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){let u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{let f={w:p.data.width+2,h:p.data.height+2,x:0,y:0},g=new s.I(f,p);this.patterns[i]={bin:f,position:g}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){let u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new nt(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){let i=[];for(let g in this.patterns)i.push(this.patterns[g].bin);let{w:u,h:p}=s.p(i),f=this.atlasImage;f.resize({width:u||1,height:p||1});for(let g in this.patterns){let{bin:S}=this.patterns[g],E=S.x+1,D=S.y+1,P=this.getImage(g).data,k=P.width,N=P.height;s.R.copy(P,f,{x:0,y:0},{x:E,y:D},{width:k,height:N}),s.R.copy(P,f,{x:0,y:N-1},{x:E,y:D-1},{width:k,height:1}),s.R.copy(P,f,{x:0,y:0},{x:E,y:D+N},{width:k,height:1}),s.R.copy(P,f,{x:k-1,y:0},{x:E-1,y:D},{width:1,height:N}),s.R.copy(P,f,{x:0,y:0},{x:E+k,y:D},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(let u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;let p=this.getImage(u);p||s.w(`Image with ID: "${u}" was not found`),Nn(p)&&this.updateImage(u,p)}}}let Ut=1e20;function Lt(y,i,u,p,f,g,S,E,D){for(let P=i;P<i+p;P++)ar(y,u*g+P,g,f,S,E,D);for(let P=u;P<u+f;P++)ar(y,P*g+i,1,p,S,E,D)}function ar(y,i,u,p,f,g,S){g[0]=0,S[0]=-Ut,S[1]=Ut,f[0]=y[i];for(let E=1,D=0,P=0;E<p;E++){f[E]=y[i+E*u];let k=E*E;do{let N=g[D];P=(f[E]-f[N]+k-N*N)/(E-N)/2}while(P<=S[D]&&--D>-1);D++,g[D]=E,S[D]=P,S[D+1]=Ut}for(let E=0,D=0;E<p;E++){for(;S[D+1]<E;)D++;let P=g[D],k=E-P;y[i+E*u]=f[P]+k*k}}class Cr{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return s._(this,void 0,void 0,function*(){let u=[];for(let g in i)for(let S of i[g])u.push(this._getAndCacheGlyphsPromise(g,S));let p=yield Promise.all(u),f={};for(let{stack:g,id:S,glyph:E}of p)f[g]||(f[g]={}),f[g][S]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return f})}_getAndCacheGlyphsPromise(i,u){return s._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let f=p.glyphs[u];if(f!==void 0)return{stack:i,id:u,glyph:f};if(f=this._tinySDF(p,i,u),f)return p.glyphs[u]=f,{stack:i,id:u,glyph:f};let g=Math.floor(u/256);if(256*g>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[g])return{stack:i,id:u,glyph:f};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[g]){let E=Cr.loadGlyphRange(i,g,this.url,this.requestManager);p.requests[g]=E}let S=yield p.requests[g];for(let E in S)this._doesCharSupportLocalGlyph(+E)||(p.glyphs[+E]=S[+E]);return p.ranges[g]=!0,{stack:i,id:u,glyph:S[u]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,u,p){let f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(p))return;let g=i.tinySDF;if(!g){let E="400";/bold/i.test(u)?E="900":/medium/i.test(u)?E="500":/light/i.test(u)&&(E="200"),g=i.tinySDF=new Cr.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:E})}let S=g.draw(String.fromCharCode(p));return{id:p,bitmap:new s.o({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Cr.loadGlyphRange=function(y,i,u,p){return s._(this,void 0,void 0,function*(){let f=256*i,g=f+255,S=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${f}-${g}`),"Glyphs"),E=yield s.l(S,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${i}, ${f}-${g}`);let D={};for(let P of s.n(E.data))D[P.id]=P;return D})},Cr.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:f="sans-serif",fontWeight:g="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;let E=this.size=y+4*i,D=this._createCanvas(E),P=this.ctx=D.getContext("2d",{willReadFrequently:!0});P.font=`${S} ${g} ${y}px ${f}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(y){let i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){let{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:f,actualBoundingBoxRight:g}=this.ctx.measureText(y),S=Math.ceil(u),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-f))),D=Math.min(this.size-this.buffer,S+Math.ceil(p)),P=E+2*this.buffer,k=D+2*this.buffer,N=Math.max(P*k,0),V=new Uint8ClampedArray(N),H={data:V,width:P,height:k,glyphWidth:E,glyphHeight:D,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(E===0||D===0)return H;let{ctx:W,buffer:J,gridInner:ne,gridOuter:re}=this;W.clearRect(J,J,E,D),W.fillText(y,J,J+S);let ae=W.getImageData(J,J,E,D);re.fill(Ut,0,N),ne.fill(0,0,N);for(let K=0;K<D;K++)for(let ue=0;ue<E;ue++){let he=ae.data[4*(K*E+ue)+3]/255;if(he===0)continue;let _e=(K+J)*P+ue+J;if(he===1)re[_e]=0,ne[_e]=Ut;else{let Pe=.5-he;re[_e]=Pe>0?Pe*Pe:0,ne[_e]=Pe<0?Pe*Pe:0}}Lt(re,0,0,P,k,P,this.f,this.v,this.z),Lt(ne,J,J,E,D,P,this.f,this.v,this.z);for(let K=0;K<N;K++){let ue=Math.sqrt(re[K])-Math.sqrt(ne[K]);V[K]=Math.round(255-255*(ue/this.radius+this.cutoff))}return H}};class Xo{constructor(){this.specification=s.v.light.position}possiblyEvaluate(i,u){return s.x(i.expression.evaluate(u))}interpolate(i,u,p){return{x:s.y.number(i.x,u.x,p),y:s.y.number(i.y,u.y,p),z:s.y.number(i.z,u.z,p)}}}let Zr;class Mr extends s.E{constructor(i){super(),Zr=Zr||new s.q({anchor:new s.D(s.v.light.anchor),position:new Xo,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Zr),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(s.r,i,u))for(let p in i){let f=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&s.t(this,i.call(s.u,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let Bn=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class Kr extends s.E{constructor(i){super(),this._transitionable=new s.T(Bn),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(i,u={}){if(!this._validate(s.B,i,u)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let p in i){let f=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),f):this._transitionable.setValue(p,f)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p={}){return p?.validate!==!1&&s.t(this,i.call(s.u,s.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class _r{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){let p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){let f=[],g=i.length%2==1?-i[i.length-1]*p:0,S=i[0]*p,E=!0;f.push({left:g,right:S,isDash:E,zeroLength:i[0]===0});let D=i[0];for(let P=1;P<i.length;P++){E=!E;let k=i[P];g=D*p,D+=k,S=D*p,f.push({left:g,right:S,isDash:E,zeroLength:k===0})}return f}addRoundDash(i,u,p){let f=u/2;for(let g=-p;g<=p;g++){let S=this.width*(this.nextRow+p+g),E=0,D=i[E];for(let P=0;P<this.width;P++){P/D.right>1&&(D=i[++E]);let k=Math.abs(P-D.left),N=Math.abs(P-D.right),V=Math.min(k,N),H,W=g/p*(f+1);if(D.isDash){let J=f-Math.abs(W);H=Math.sqrt(V*V+J*J)}else H=f-Math.sqrt(V*V+W*W);this.data[S+P]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(i){for(let E=i.length-1;E>=0;--E){let D=i[E],P=i[E+1];D.zeroLength?i.splice(E,1):P&&P.isDash===D.isDash&&(P.left=D.left,i.splice(E,1))}let u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);let f=this.width*this.nextRow,g=0,S=i[g];for(let E=0;E<this.width;E++){E/S.right>1&&(S=i[++g]);let D=Math.abs(E-S.left),P=Math.abs(E-S.right),k=Math.min(D,P);this.data[f+E]=Math.max(0,Math.min(255,(S.isDash?k:-k)+128))}}addDash(i,u){let p=u?7:0,f=2*p+1;if(this.nextRow+f>this.height)return s.w("LineAtlas out of space"),null;let g=0;for(let E=0;E<i.length;E++)g+=i[E];if(g!==0){let E=this.width/g,D=this.getDashRanges(i,this.width,E);u?this.addRoundDash(D,E,p):this.addRegularDash(D)}let S={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:g};return this.nextRow+=f,this.dirty=!0,S}bind(i){let u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}let no="maplibre_preloaded_worker_pool";class Ci{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ci.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[no]}numActive(){return Object.keys(this.active).length}}let Kt=Math.floor(C.hardwareConcurrency/2),Vn,Bi;function Cs(){return Vn||(Vn=new Ci),Vn}Ci.workerCount=s.C(globalThis)?Math.max(Math.min(Kt,3),1):1;class Jo{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=u;let p=this.workerPool.acquire(u);for(let f=0;f<p.length;f++){let g=new s.F(p[f],u);g.name=`Worker ${f}`,this.actors.push(g)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u){let p=[];for(let f of this.actors)p.push(f.sendAsync({type:i,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,u){for(let p of this.actors)p.registerMessageHandler(i,u)}}function Ws(){return Bi||(Bi=new Jo(Cs(),s.G),Bi.registerMessageHandler("GR",(y,i,u)=>s.m(i,u))),Bi}function Is(y,i){let u=s.H();return s.J(u,u,[1,1,0]),s.K(u,u,[.5*y.width,.5*y.height,1]),s.L(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Zs(y,i,u,p,f,g){let S=function(N,V,H){if(N)for(let W of N){let J=V[W];if(J&&J.source===H&&J.type==="fill-extrusion")return!0}else for(let W in V){let J=V[W];if(J.source===H&&J.type==="fill-extrusion")return!0}return!1}(f&&f.layers,i,y.id),E=g.maxPitchScaleFactor(),D=y.tilesIn(p,E,S);D.sort(Ks);let P=[];for(let N of D)P.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(i,u,y._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,f,g,E,Is(y.transform,N.tileID))});let k=function(N){let V={},H={};for(let W of N){let J=W.queryResults,ne=W.wrappedTileID,re=H[ne]=H[ne]||{};for(let ae in J){let K=J[ae],ue=re[ae]=re[ae]||{},he=V[ae]=V[ae]||[];for(let _e of K)ue[_e.featureIndex]||(ue[_e.featureIndex]=!0,he.push(_e))}}return V}(P);for(let N in k)k[N].forEach(V=>{let H=V.feature,W=y.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=W});return k}function Ks(y,i){let u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Ul(y,i,u){return s._(this,void 0,void 0,function*(){let p=y;if(y.url?p=(yield s.h(i.transformRequest(y.url,"Source"),u)).data:yield C.frameAsync(u),!p)return null;let f=s.M(s.e(p,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(f.vectorLayerIds=p.vector_layers.map(g=>g.id)),f})}class Ce{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof s.N?new s.N(i.lng,i.lat):s.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof s.N?new s.N(i.lng,i.lat):s.N.convert(i),this}extend(i){let u=this._sw,p=this._ne,f,g;if(i instanceof s.N)f=i,g=i;else{if(!(i instanceof Ce))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ce.convert(i)):this.extend(s.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(s.N.convert(i)):this;if(f=i._sw,g=i._ne,!f||!g)return this}return u||p?(u.lng=Math.min(f.lng,u.lng),u.lat=Math.min(f.lat,u.lat),p.lng=Math.max(g.lng,p.lng),p.lat=Math.max(g.lat,p.lat)):(this._sw=new s.N(f.lng,f.lat),this._ne=new s.N(g.lng,g.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){let{lng:u,lat:p}=s.N.convert(i),f=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&f}static convert(i){return i instanceof Ce?i:i&&new Ce(i)}static fromLngLat(i,u=0){let p=360*u/40075017,f=p/Math.cos(Math.PI/180*i.lat);return new Ce(new s.N(i.lng-f,i.lat-p),new s.N(i.lng+f,i.lat+p))}adjustAntiMeridian(){let i=new s.N(this._sw.lng,this._sw.lat),u=new s.N(this._ne.lng,this._ne.lat);return new Ce(i,i.lng>u.lng?new s.N(u.lng+360,u.lat):u)}}class Wa{constructor(i,u,p){this.bounds=Ce.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){let u=Math.pow(2,i.z),p=Math.floor(s.O(this.bounds.getWest())*u),f=Math.floor(s.Q(this.bounds.getNorth())*u),g=Math.ceil(s.O(this.bounds.getEast())*u),S=Math.ceil(s.Q(this.bounds.getSouth())*u);return i.x>=p&&i.x<g&&i.y>=f&&i.y<S}}class mu extends s.E{constructor(i,u,p,f){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(u,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield Ul(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(s.e(this,i),i.bounds&&(this.tileBounds=new Wa(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(i){return s._(this,void 0,void 0,function*(){let u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let f="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((g,S)=>{i.reloadPromise={resolve:g,reject:S}})}else i.actor=this.dispatcher.getActor(),f="LT";i.abortController=new AbortController;try{let g=yield i.actor.sendAsync({type:f,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,g)}catch(g){if(delete i.abortController,i.aborted)return;if(g&&g.status!==404)throw g;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,u){if(u&&u.resourceTiming&&(i.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&i.setExpiryData(u),i.loadVectorData(u,this.map.painter),i.reloadPromise){let p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class vn extends s.E{constructor(i,u,p,f){super(),this.id=i,this.dispatcher=p,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},u),s.e(this,s.M(u,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let i=yield Ul(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(s.e(this,i),i.bounds&&(this.tileBounds=new Wa(i.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new s.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return s.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return s._(this,void 0,void 0,function*(){let u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{let p=yield ve.getImage(this.map._requestManager.transformRequest(u,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});let f=this.map.painter.context,g=f.gl,S=p.data;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new nt(f,S,g.RGBA,{useMipmap:!0}),i.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE,g.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class ur extends vn{constructor(i,u,p,f){super(i,u,p,f),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i){return s._(this,void 0,void 0,function*(){let u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{let f=yield ve.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){let g=f.data;this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let S=s.b(g)&&s.U()?g:yield this.readImageNow(g),E={type:this.type,uid:i.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();let D=yield i.actor.sendAsync({type:"LDT",data:E});i.dem=D,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}readImageNow(i){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.V()){let u=i.width+2,p=i.height+2;try{return new s.R({width:u,height:p},yield s.W(i,-1,-1,u,p))}catch{}}return C.getImageData(i,1)})}_getNeighboringTiles(i){let u=i.canonical,p=Math.pow(2,u.z),f=(u.x-1+p)%p,g=u.x===0?i.wrap-1:i.wrap,S=(u.x+1+p)%p,E=u.x+1===p?i.wrap+1:i.wrap,D={};return D[new s.S(i.overscaledZ,g,u.z,f,u.y).key]={backfilled:!1},D[new s.S(i.overscaledZ,E,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(D[new s.S(i.overscaledZ,g,u.z,f,u.y-1).key]={backfilled:!1},D[new s.S(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},D[new s.S(i.overscaledZ,E,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<p&&(D[new s.S(i.overscaledZ,g,u.z,f,u.y+1).key]={backfilled:!1},D[new s.S(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},D[new s.S(i.overscaledZ,E,u.z,S,u.y+1).key]={backfilled:!1}),D}unloadTile(i){return s._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class gu extends s.E{constructor(i,u,p,f){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(f),this._data=u.data,this._options=s.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;let g=s.X/this.tileSize;u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*g,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*g,extent:s.X,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:s.X,radius:(u.clusterRadius||50)*g,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return s._(this,void 0,void 0,function*(){let i=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:u,offset:p}})}_updateWorkerData(i){return s._(this,void 0,void 0,function*(){let u=s.e({type:this.type},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(C.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{let p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let f=null;p.resourceTiming&&p.resourceTiming[this.id]&&(f=p.resourceTiming[this.id].slice(0));let g={dataType:"source"};this._collectResourceTiming&&f&&f.length>0&&s.e(g,{resourceTiming:f}),this.fire(new s.k("data",Object.assign(Object.assign({},g),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},g),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return s._(this,void 0,void 0,function*(){let u=i.actor?"RT":"LT";i.actor=this.actor;let p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;let f=yield this.actor.sendAsync({type:u,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(f,this.map.painter,u==="RT")})}abortTile(i){return s._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return s._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ys=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Es extends s.E{constructor(i,u,p,f){super(),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=u}load(i){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let u=yield ve.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,i&&(this.coordinates=i),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new s.j(u))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;let u=i.map(s.Z.fromLngLat);this.tileID=function(f){let g=1/0,S=1/0,E=-1/0,D=-1/0;for(let V of f)g=Math.min(g,V.x),S=Math.min(S,V.y),E=Math.max(E,V.x),D=Math.max(D,V.y);let P=Math.max(E-g,D-S),k=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),N=Math.pow(2,k);return new s.a1(k,Math.floor((g+E)/2*N),Math.floor((S+D)/2*N))}(u),this.minzoom=this.maxzoom=this.tileID.z;let p=u.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,s.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,s.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ys.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new nt(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(let f in this.tiles){let g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,p=!0)}p&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Bl extends Es{constructor(i,u,p,f){super(i,u,p,f),this.roundZoom=!0,this.type="video",this.options=u}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let i=this.options;this.urls=[];for(let u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{let u=yield s.a3(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new s.j(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){let u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ys.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new nt(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(let f in this.tiles){let g=this.tiles[f];g.state!=="loaded"&&(g.state="loaded",g.texture=this.texture,p=!0)}p&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ro extends Es{constructor(i,u,p,f){super(i,u,p,f),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(g=>!Array.isArray(g)||g.length!==2||g.some(S=>typeof S!="number"))||this.fire(new s.j(new s.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a2(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ys.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new nt(u,this.canvas,p.RGBA,{premultiply:!0});let f=!1;for(let g in this.tiles){let S=this.tiles[g];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,f=!0)}f&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}let yu={},vu=y=>{switch(y){case"geojson":return gu;case"image":return Es;case"raster":return vn;case"raster-dem":return ur;case"vector":return mu;case"video":return Bl;case"canvas":return ro}return yu[y]},ze="RTLPluginLoaded";class Qo extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ws()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return s._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=C.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(ze))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let gi=null;function es(){return gi||(gi=new Qo),gi}class Xs{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=s.a4(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){let u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(f,g){let S={};if(!g)return S;for(let E of f){let D=E.layerIds.map(P=>g.getLayer(P)).filter(Boolean);if(D.length!==0){E.layers=D,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(P=>D.filter(k=>k.id===P)[0]));for(let P of D)S[P.id]=E}}return S}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(let f in this.buckets){let g=this.buckets[f];if(g instanceof s.a6){if(this.hasSymbolBuckets=!0,!p)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let f in this.buckets){let g=this.buckets[f];if(g instanceof s.a6&&g.hasRTLText){this.hasRTLText=!0,es().lazyLoad();break}}this.queryPadding=0;for(let f in this.buckets){let g=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(f).queryRadius(g))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(let p in this.buckets){let f=this.buckets[p];f.uploadPending()&&f.upload(i)}let u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new nt(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new nt(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,f,g,S,E,D,P,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:g,scale:S,tileSize:this.tileSize,pixelPosMatrix:k,transform:D,params:E,queryPadding:this.queryPadding*P},i,u,p):{}}querySourceFeatures(i,u){let p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;let f=p.loadVTLayers(),g=u&&u.sourceLayer?u.sourceLayer:"",S=f._geojsonTileLayer||f[g];if(!S)return;let E=s.a7(u&&u.filter),{z:D,x:P,y:k}=this.tileID.canonical,N={z:D,x:P,y:k};for(let V=0;V<S.length;V++){let H=S.feature(V);if(E.needGeometry){let ne=s.a8(H,!0);if(!E.filter(new s.z(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!E.filter(new s.z(this.tileID.overscaledZ),H))continue;let W=p.getId(H,g),J=new s.a9(H,D,P,k,W);J.tile=N,i.push(J)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){let u=this.expirationTime;if(i.cacheControl){let p=s.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){let p=Date.now(),f=!1;if(this.expirationTime>p)f=!1;else if(u)if(this.expirationTime<u)f=!0;else{let g=this.expirationTime-u;g?this.expirationTime=p+Math.max(g,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;let p=this.latestFeatureIndex.loadVTLayers();for(let f in this.buckets){if(!u.style.hasLayer(f))continue;let g=this.buckets[f],S=g.layers[0].sourceLayer||"_geojsonTileLayer",E=p[S],D=i[S];if(!E||!D||Object.keys(D).length===0)continue;g.update(D,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let P=u&&u.style&&u.style.getLayer(f);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<C.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=C.now()+i}setDependencies(i,u){let p={};for(let f of u)p[f]=!0;this.dependencies[i]=p}hasDependency(i,u){for(let p of i){let f=this.dependencies[p];if(f){for(let g of u)if(f[g])return!0}}return!1}}class $e{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(let i in this.data)for(let u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){let f=i.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);let g={value:u,timeout:void 0};if(p!==void 0&&(g.timeout=setTimeout(()=>{this.remove(i,g)},p)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){let S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){let u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){let u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;let p=i.wrapped().key,f=u===void 0?0:this.data[p].indexOf(u),g=this.data[p][f];return this.data[p].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(g.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){let u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){let u=[];for(let p in this.data)for(let f of this.data[p])i(f.value)||u.push(f);for(let p of u)this.remove(p.value.tileID,p)}}class $t{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){let f=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][f]=this.stateChanges[i][f]||{},s.e(this.stateChanges[i][f],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(let g in this.state[i])g!==f&&(this.deletedStates[i][g]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][f]===null){this.deletedStates[i][f]={};for(let g in this.state[i][f])p[g]||(this.deletedStates[i][f][g]=null)}else for(let g in p)this.deletedStates[i]&&this.deletedStates[i][f]&&this.deletedStates[i][f][g]===null&&delete this.deletedStates[i][f][g]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;let f=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][f]!==null&&(this.deletedStates[i][f]=this.deletedStates[i][f]||{},this.deletedStates[i][f][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][f])for(p in this.deletedStates[i][f]={},this.stateChanges[i][f])this.deletedStates[i][f][p]=null;else this.deletedStates[i][f]=null;else this.deletedStates[i]=null}getState(i,u){let p=String(u),f=s.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){let g=this.deletedStates[i][u];if(g===null)return{};for(let S in g)delete f[S]}return f}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){let p={};for(let f in this.stateChanges){this.state[f]=this.state[f]||{};let g={};for(let S in this.stateChanges[f])this.state[f][S]||(this.state[f][S]={}),s.e(this.state[f][S],this.stateChanges[f][S]),g[S]=this.state[f][S];p[f]=g}for(let f in this.deletedStates){this.state[f]=this.state[f]||{};let g={};if(this.deletedStates[f]===null)for(let S in this.state[f])g[S]={},this.state[f][S]={};else for(let S in this.deletedStates[f]){if(this.deletedStates[f][S]===null)this.state[f][S]={};else for(let E of Object.keys(this.deletedStates[f][S]))delete this.state[f][S][E];g[S]=this.state[f][S]}p[f]=p[f]||{},s.e(p[f],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(let f in i)i[f].setFeatureState(p,u)}}class Ct extends s.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",f=>this._dataHandler(f)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((f,g,S,E)=>{let D=new(vu(g.type))(f,g,S,E);if(D.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${D.id}`);return D})(i,u,p,this),this._tiles={},this._cache=new $e(0,f=>this._unloadTile(f)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new $t,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let i in this._tiles){let u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u,p){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,u,p)}catch(f){i.state="errored",f.status!==404?this._source.fire(new s.j(f,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new s.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let u in this._tiles){let p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Ii).map(i=>i.key)}getRenderableIds(i){let u=[];for(let p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,f)=>{let g=p.tileID,S=f.tileID,E=new s.P(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),D=new s.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-S.overscaledZ||D.y-E.y||D.x-E.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Ii).map(p=>p.key)}hasRenderableParent(i){let u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){return s._(this,void 0,void 0,function*(){let p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,i,u))})}_tileLoaded(i,u,p){i.timeAdded=C.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){let u=this.getRenderableIds();for(let f=0;f<u.length;f++){let g=u[f];if(i.neighboringTiles&&i.neighboringTiles[g]){let S=this.getTileByID(g);p(i,S),p(S,i)}}function p(f,g){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let S=g.tileID.canonical.x-f.tileID.canonical.x,E=g.tileID.canonical.y-f.tileID.canonical.y,D=Math.pow(2,f.tileID.canonical.z),P=g.tileID.key;S===0&&E===0||Math.abs(E)>1||(Math.abs(S)>1&&(Math.abs(S+D)===1?S+=D:Math.abs(S-D)===1&&(S-=D)),g.dem&&f.dem&&(f.dem.backfillBorder(g.dem,S,E),f.neighboringTiles&&f.neighboringTiles[P]&&(f.neighboringTiles[P].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,f){for(let g in this._tiles){let S=this._tiles[g];if(f[g]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>p)continue;let E=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){let P=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[P.key],S&&S.hasData()&&(E=P)}let D=E;for(;D.overscaledZ>u;)if(D=D.scaledTo(D.overscaledZ-1),i[D.key]){f[E.key]=E;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){let p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){let f=i.scaledTo(p),g=this._getLoadedTile(f);if(g)return g}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){let u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){let u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,f=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),g=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(g)}handleWrapJump(i){let u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){let p={};for(let f in this._tiles){let g=this._tiles[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+u),p[g.tileID.key]=g}this._tiles=p;for(let f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(let f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}_updateCoveredAndRetainedTiles(i,u,p,f,g,S){let E={},D={},P=Object.keys(i),k=C.now();for(let N of P){let V=i[N],H=this._tiles[N];if(!H||H.fadeEndTime!==0&&H.fadeEndTime<=k)continue;let W=this.findLoadedParent(V,u),J=this.findLoadedSibling(V),ne=W||J||null;ne&&(this._addTile(ne.tileID),E[ne.tileID.key]=ne.tileID),D[N]=V}this._retainLoadedChildren(D,f,p,i);for(let N in E)i[N]||(this._coveredTiles[N]=!0,i[N]=E[N]);if(S){let N={},V={};for(let H of g)this._tiles[H.key].hasData()?N[H.key]=H:V[H.key]=H;for(let H in V){let W=V[H].children(this._source.maxzoom);this._tiles[W[0].key]&&this._tiles[W[1].key]&&this._tiles[W[2].key]&&this._tiles[W[3].key]&&(N[W[0].key]=i[W[0].key]=W[0],N[W[1].key]=i[W[1].key]=W[1],N[W[2].key]=i[W[2].key]=W[2],N[W[3].key]=i[W[3].key]=W[3],delete V[H])}for(let H in V){let W=V[H],J=this.findLoadedParent(W,this._source.minzoom),ne=this.findLoadedSibling(W),re=J||ne||null;if(re){N[re.tileID.key]=i[re.tileID.key]=re.tileID;for(let ae in N)N[ae].isChildOf(re.tileID)&&delete N[ae]}}for(let H in this._tiles)N[H]||(this._coveredTiles[H]=!0)}}update(i,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=u,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new s.S(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(k=>this._source.hasTile(k)))):p=[];let f=i.coveringZoomLevel(this._source),g=Math.max(f-Ct.maxOverzooming,this._source.minzoom),S=Math.max(f+Ct.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let k={};for(let N of p)if(N.canonical.z>this._source.minzoom){let V=N.scaledTo(N.canonical.z-1);k[V.key]=V;let H=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));k[H.key]=H}p=p.concat(Object.values(k))}let E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let D=this._updateRetainedTiles(p,f);Io(this._source.type)&&this._updateCoveredAndRetainedTiles(D,g,S,f,p,u);for(let k in D)this._tiles[k].clearFadeHold();let P=s.ab(this._tiles,D);for(let k of P){let N=this._tiles[k];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){var p;let f={},g={},S=Math.max(u-Ct.maxOverzooming,this._source.minzoom),E=Math.max(u+Ct.maxUnderzooming,this._source.minzoom),D={};for(let P of i){let k=this._addTile(P);f[P.key]=P,k.hasData()||u<this._source.maxzoom&&(D[P.key]=P)}this._retainLoadedChildren(D,u,E,f);for(let P of i){let k=this._tiles[P.key];if(k.hasData())continue;if(u+1>this._source.maxzoom){let V=P.children(this._source.maxzoom)[0],H=this.getTile(V);if(H&&H.hasData()){f[V.key]=V;continue}}else{let V=P.children(this._source.maxzoom);if(f[V[0].key]&&f[V[1].key]&&f[V[2].key]&&f[V[3].key])continue}let N=k.wasRequested();for(let V=P.overscaledZ-1;V>=S;--V){let H=P.scaledTo(V);if(g[H.key])break;if(g[H.key]=!0,k=this.getTile(H),!k&&N&&(k=this._addTile(H)),k){let W=k.hasData();if((W||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||N)&&(f[H.key]=H),N=k.wasRequested(),W)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let i in this._tiles){let u=[],p,f=this._tiles[i].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){p=this._loadedParentTiles[f.key];break}u.push(f.key);let g=f.scaledTo(f.overscaledZ-1);if(p=this._getLoadedTile(g),p)break;f=g}for(let g of u)this._loadedParentTiles[g]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let i in this._tiles){let u=this._tiles[i].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));let p=u;return u||(u=new Xs(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,i.key,u.state)),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new s.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);let p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){let u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(i){let u=i.sourceDataType;i.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&u==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){let f=[],g=this.transform;if(!g)return f;let S=p?g.getCameraQueryGeometry(i):i,E=i.map(W=>g.pointCoordinate(W,this.terrain)),D=S.map(W=>g.pointCoordinate(W,this.terrain)),P=this.getIds(),k=1/0,N=1/0,V=-1/0,H=-1/0;for(let W of D)k=Math.min(k,W.x),N=Math.min(N,W.y),V=Math.max(V,W.x),H=Math.max(H,W.y);for(let W=0;W<P.length;W++){let J=this._tiles[P[W]];if(J.holdingForFade())continue;let ne=J.tileID,re=Math.pow(2,g.zoom-J.tileID.overscaledZ),ae=u*J.queryPadding*s.X/J.tileSize/re,K=[ne.getTilePoint(new s.Z(k,N)),ne.getTilePoint(new s.Z(V,H))];if(K[0].x-ae<s.X&&K[0].y-ae<s.X&&K[1].x+ae>=0&&K[1].y+ae>=0){let ue=E.map(_e=>ne.getTilePoint(_e)),he=D.map(_e=>ne.getTilePoint(_e));f.push({tile:J,tileID:ne,queryGeometry:ue,cameraQueryGeometry:he,scale:re})}}return f}getVisibleCoordinates(i){let u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(let p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Io(this._source.type)){let i=C.now();for(let u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){let f=this._tiles[i];f&&f.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(let p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function Ii(y,i){let u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Io(y){return y==="raster"||y==="image"||y==="video"}Ct.maxOverzooming=10,Ct.maxUnderzooming=3;class Rt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.ac(i,0,1);let u=1,p=this._distances[u],f=i*this.paddedLength+this.padding;for(;p<f&&u<this._distances.length;)p=this._distances[++u];let g=u-1,S=this._distances[g],E=p-S,D=E>0?(f-S)/E:0;return this.points[g].mult(1-D).add(this.points[u].mult(D))}}function ts(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Ts{constructor(i,u,p){let f=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let S=0;S<this.xCellCount*this.yCellCount;S++)f.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,f,g){this._forEachCell(u,p,f,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(f),this.bboxes.push(g)}insertCircle(i,u,p,f){this._forEachCell(u-f,p-f,u+f,p+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(f)}_insertBoxCell(i,u,p,f,g,S){this.boxCells[g].push(S)}_insertCircleCell(i,u,p,f,g,S){this.circleCells[g].push(S)}_query(i,u,p,f,g,S,E){if(p<0||i>this.width||f<0||u>this.height)return[];let D=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=f){if(g)return[{key:null,x1:i,y1:u,x2:p,y2:f}];for(let P=0;P<this.boxKeys.length;P++)D.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){let k=this.circles[3*P],N=this.circles[3*P+1],V=this.circles[3*P+2];D.push({key:this.circleKeys[P],x1:k-V,y1:N-V,x2:k+V,y2:N+V})}}else this._forEachCell(i,u,p,f,this._queryCell,D,{hitTest:g,overlapMode:S,seenUids:{box:{},circle:{}}},E);return D}query(i,u,p,f){return this._query(i,u,p,f,!1,null)}hitTest(i,u,p,f,g,S){return this._query(i,u,p,f,!0,g,S).length>0}hitTestCircle(i,u,p,f,g){let S=i-p,E=i+p,D=u-p,P=u+p;if(E<0||S>this.width||P<0||D>this.height)return!1;let k=[];return this._forEachCell(S,D,E,P,this._queryCellCircle,k,{hitTest:!0,overlapMode:f,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},g),k.length>0}_queryCell(i,u,p,f,g,S,E,D){let{seenUids:P,hitTest:k,overlapMode:N}=E,V=this.boxCells[g];if(V!==null){let W=this.bboxes;for(let J of V)if(!P.box[J]){P.box[J]=!0;let ne=4*J,re=this.boxKeys[J];if(i<=W[ne+2]&&u<=W[ne+3]&&p>=W[ne+0]&&f>=W[ne+1]&&(!D||D(re))&&(!k||!ts(N,re.overlapMode))&&(S.push({key:re,x1:W[ne],y1:W[ne+1],x2:W[ne+2],y2:W[ne+3]}),k))return!0}}let H=this.circleCells[g];if(H!==null){let W=this.circles;for(let J of H)if(!P.circle[J]){P.circle[J]=!0;let ne=3*J,re=this.circleKeys[J];if(this._circleAndRectCollide(W[ne],W[ne+1],W[ne+2],i,u,p,f)&&(!D||D(re))&&(!k||!ts(N,re.overlapMode))){let ae=W[ne],K=W[ne+1],ue=W[ne+2];if(S.push({key:re,x1:ae-ue,y1:K-ue,x2:ae+ue,y2:K+ue}),k)return!0}}}return!1}_queryCellCircle(i,u,p,f,g,S,E,D){let{circle:P,seenUids:k,overlapMode:N}=E,V=this.boxCells[g];if(V!==null){let W=this.bboxes;for(let J of V)if(!k.box[J]){k.box[J]=!0;let ne=4*J,re=this.boxKeys[J];if(this._circleAndRectCollide(P.x,P.y,P.radius,W[ne+0],W[ne+1],W[ne+2],W[ne+3])&&(!D||D(re))&&!ts(N,re.overlapMode))return S.push(!0),!0}}let H=this.circleCells[g];if(H!==null){let W=this.circles;for(let J of H)if(!k.circle[J]){k.circle[J]=!0;let ne=3*J,re=this.circleKeys[J];if(this._circlesCollide(W[ne],W[ne+1],W[ne+2],P.x,P.y,P.radius)&&(!D||D(re))&&!ts(N,re.overlapMode))return S.push(!0),!0}}}_forEachCell(i,u,p,f,g,S,E,D){let P=this._convertToXCellCoord(i),k=this._convertToYCellCoord(u),N=this._convertToXCellCoord(p),V=this._convertToYCellCoord(f);for(let H=P;H<=N;H++)for(let W=k;W<=V;W++)if(g.call(this,i,u,p,f,this.xCellCount*W+H,S,E,D))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,f,g,S){let E=f-i,D=g-u,P=p+S;return P*P>E*E+D*D}_circleAndRectCollide(i,u,p,f,g,S,E){let D=(S-f)/2,P=Math.abs(i-(f+D));if(P>D+p)return!1;let k=(E-g)/2,N=Math.abs(u-(g+k));if(N>k+p)return!1;if(P<=D||N<=k)return!0;let V=P-D,H=N-k;return V*V+H*H<=p*p}}function Js(y,i,u,p,f){let g=s.H();return i?(s.K(g,g,[1/f,1/f,1]),u||s.ad(g,g,p.angle)):s.L(g,p.labelPlaneMatrix,y),g}function ns(y,i,u,p,f){if(i){let g=s.ae(y);return s.K(g,g,[f,f,1]),u||s.ad(g,g,-p.angle),g}return p.glCoordMatrix}function Q(y,i,u,p){let f;p?(f=[y,i,p(y,i),1],s.af(f,f,u)):(f=[y,i,0,1],hn(f,f,u));let g=f[3];return{point:new s.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g,isOccluded:!1}}function z(y,i){return .5+y/i*.5}function L(y,i){return y.x>=-i[0]&&y.x<=i[0]&&y.y>=-i[1]&&y.y<=i[1]}function G(y,i,u,p,f,g,S,E,D,P,k,N,V,H,W){let J=p?y.textSizeData:y.iconSizeData,ne=s.ag(J,u.transform.zoom),re=[256/u.width*2+1,256/u.height*2+1],ae=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ae.clear();let K=y.lineVertexArray,ue=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,he=u.transform.width/u.transform.height,_e=!1;for(let Pe=0;Pe<ue.length;Pe++){let Le=ue.get(Pe);if(Le.hidden||Le.writingMode===s.ah.vertical&&!_e){yt(Le.numGlyphs,ae);continue}_e=!1;let We=Q(Le.anchorX,Le.anchorY,i,W);if(!L(We.point,re)){yt(Le.numGlyphs,ae);continue}let Je=z(u.transform.cameraToCenterDistance,We.signedDistanceFromCamera),je=s.ai(J,ne,Le),Be=S?je/Je:je*Je,at={getElevation:W,labelPlaneMatrix:f,lineVertexArray:K,pitchWithMap:S,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:P,tileAnchorPoint:new s.P(Le.anchorX,Le.anchorY),unwrappedTileID:k,width:N,height:V,translation:H},Dt=de(at,Le,Be,!1,E,i,g,y.glyphOffsetArray,ae,he,D);_e=Dt.useVertical,(Dt.notEnoughRoom||_e||Dt.needsFlipping&&de(at,Le,Be,!0,E,i,g,y.glyphOffsetArray,ae,he,D).notEnoughRoom)&&yt(Le.numGlyphs,ae)}p?y.text.dynamicLayoutVertexBuffer.updateData(ae):y.icon.dynamicLayoutVertexBuffer.updateData(ae)}function X(y,i,u,p,f,g,S,E){let D=g.glyphStartIndex+g.numGlyphs,P=g.lineStartIndex,k=g.lineStartIndex+g.lineLength,N=i.getoffsetX(g.glyphStartIndex),V=i.getoffsetX(D-1),H=Ue(y*N,u,p,f,g.segment,P,k,E,S);if(!H)return null;let W=Ue(y*V,u,p,f,g.segment,P,k,E,S);return W?E.projectionCache.anyProjectionOccluded?null:{first:H,last:W}:null}function ce(y,i,u,p){return y===s.ah.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===s.ah.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function de(y,i,u,p,f,g,S,E,D,P,k){let N=u/24,V=i.lineOffsetX*N,H=i.lineOffsetY*N,W;if(i.numGlyphs>1){let J=i.glyphStartIndex+i.numGlyphs,ne=i.lineStartIndex,re=i.lineStartIndex+i.lineLength,ae=X(N,E,V,H,p,i,k,y);if(!ae)return{notEnoughRoom:!0};let K=Q(ae.first.point.x,ae.first.point.y,S,y.getElevation).point,ue=Q(ae.last.point.x,ae.last.point.y,S,y.getElevation).point;if(f&&!p){let he=ce(i.writingMode,K,ue,P);if(he)return he}W=[ae.first];for(let he=i.glyphStartIndex+1;he<J-1;he++)W.push(Ue(N*E.getoffsetX(he),V,H,p,i.segment,ne,re,y,k));W.push(ae.last)}else{if(f&&!p){let ne=Q(y.tileAnchorPoint.x,y.tileAnchorPoint.y,g,y.getElevation).point,re=i.lineStartIndex+i.segment+1,ae=new s.P(y.lineVertexArray.getx(re),y.lineVertexArray.gety(re)),K=Q(ae.x,ae.y,g,y.getElevation),ue=K.signedDistanceFromCamera>0?K.point:function(_e,Pe,Le,We,Je,je){return me(_e,Pe,Le,1,Je,je)}(y.tileAnchorPoint,ae,ne,0,g,y),he=ce(i.writingMode,ne,ue,P);if(he)return he}let J=Ue(N*E.getoffsetX(i.glyphStartIndex),V,H,p,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,y,k);if(!J||y.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};W=[J]}for(let J of W)s.aj(D,J.point,J.angle);return{}}function me(y,i,u,p,f,g){let S=y.add(y.sub(i)._unit()),E=f!==void 0?Q(S.x,S.y,f,g.getElevation).point:Ee(S.x,S.y,g).point,D=u.sub(E);return u.add(D._mult(p/D.mag()))}function oe(y,i,u){let p=i.projectionCache;if(p.projections[y])return p.projections[y];let f=new s.P(i.lineVertexArray.getx(y),i.lineVertexArray.gety(y)),g=Ee(f.x,f.y,i);if(g.signedDistanceFromCamera>0)return p.projections[y]=g.point,p.anyProjectionOccluded=p.anyProjectionOccluded||g.isOccluded,g.point;let S=y-u.direction;return function(E,D,P,k,N){return me(E,D,P,k,void 0,N)}(u.distanceFromAnchor===0?i.tileAnchorPoint:new s.P(i.lineVertexArray.getx(S),i.lineVertexArray.gety(S)),f,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,i)}function Ee(y,i,u){let p=y+u.translation[0],f=i+u.translation[1],g;return!u.pitchWithMap&&u.projection.useSpecialProjectionForSymbols?(g=u.projection.projectTileCoordinates(p,f,u.unwrappedTileID,u.getElevation),g.point.x=(.5*g.point.x+.5)*u.width,g.point.y=(.5*-g.point.y+.5)*u.height):(g=Q(p,f,u.labelPlaneMatrix,u.getElevation),g.isOccluded=!1),g}function Re(y,i,u){return y._unit()._perp()._mult(i*u)}function be(y,i,u,p,f,g,S,E,D){if(E.projectionCache.offsets[y])return E.projectionCache.offsets[y];let P=u.add(i);if(y+D.direction<p||y+D.direction>=f)return E.projectionCache.offsets[y]=P,P;let k=oe(y+D.direction,E,D),N=Re(k.sub(u),S,D.direction),V=u.add(N),H=k.add(N);return E.projectionCache.offsets[y]=s.ak(g,P,V,H)||P,E.projectionCache.offsets[y]}function Ue(y,i,u,p,f,g,S,E,D){let P=p?y-i:y+i,k=P>0?1:-1,N=0;p&&(k*=-1,N=Math.PI),k<0&&(N+=Math.PI);let V,H=k>0?g+f:g+f+1;E.projectionCache.cachedAnchorPoint?V=E.projectionCache.cachedAnchorPoint:(V=Ee(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=V);let W,J,ne=V,re=V,ae=0,K=0,ue=Math.abs(P),he=[],_e;for(;ae+K<=ue;){if(H+=k,H<g||H>=S)return null;ae+=K,re=ne,J=W;let We={absOffsetX:ue,direction:k,distanceFromAnchor:ae,previousVertex:re};if(ne=oe(H,E,We),u===0)he.push(re),_e=ne.sub(re);else{let Je,je=ne.sub(re);Je=je.mag()===0?Re(oe(H+k,E,We).sub(ne),u,k):Re(je,u,k),J||(J=re.add(Je)),W=be(H,Je,ne,g,S,J,u,E,We),he.push(J),_e=W.sub(J)}K=_e.mag()}let Pe=_e._mult((ue-ae)/K)._add(J||re),Le=N+Math.atan2(ne.y-re.y,ne.x-re.x);return he.push(Pe),{point:Pe,angle:D?Le:0,path:he}}let pt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yt(y,i){for(let u=0;u<y;u++){let p=i.length;i.resize(p+4),i.float32.set(pt,3*p)}}function hn(y,i,u){let p=i[0],f=i[1];return y[0]=u[0]*p+u[4]*f+u[12],y[1]=u[1]*p+u[5]*f+u[13],y[3]=u[3]*p+u[7]*f+u[15],y}let Nt=100;class pn{constructor(i,u,p=new Ts(i.width+200,i.height+200,25),f=new Ts(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=u,this.grid=p,this.ignoredGrid=f,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Nt,this.screenBottomBoundary=i.height+Nt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,f,g,S,E,D,P,k,N){let V=i.anchorPointX+D[0],H=i.anchorPointY+D[1],W=this.projectAndGetPerspectiveRatio(f,V,H,g,k),J=p*W.perspectiveRatio,ne;if(S||E)ne=this._projectCollisionBox(i,J,f,g,S,E,D,W,k,N);else{let he=W.point.x+(N?N.x*J:0),_e=W.point.y+(N?N.y*J:0);ne={allPointsOccluded:!1,box:[he+i.x1*J,_e+i.y1*J,he+i.x2*J,_e+i.y2*J]}}let[re,ae,K,ue]=ne.box;return this.mapProjection.useSpecialProjectionForSymbols&&(S?ne.allPointsOccluded:this.mapProjection.isOccluded(V,H,g))||W.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(re,ae,K,ue)||u!=="always"&&this.grid.hitTest(re,ae,K,ue,u,P)?{box:[re,ae,K,ue],placeable:!1,offscreen:!1}:{box:[re,ae,K,ue],placeable:!0,offscreen:this.isOffscreen(re,ae,K,ue)}}placeCollisionCircles(i,u,p,f,g,S,E,D,P,k,N,V,H,W,J,ne){let re=[],ae=new s.P(u.anchorX,u.anchorY),K=this.getPerspectiveRatio(S,ae.x,ae.y,E,ne),ue=(N?g/K:g*K)/s.ap,he={getElevation:ne,labelPlaneMatrix:D,lineVertexArray:p,pitchWithMap:N,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ae,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:J},_e=X(ue,f,u.lineOffsetX*ue,u.lineOffsetY*ue,!1,u,!1,he),Pe=!1,Le=!1,We=!0;if(_e){let Je=.5*H*K+W,je=new s.P(-100,-100),Be=new s.P(this.screenRightBoundary,this.screenBottomBoundary),at=new Rt,Dt=_e.first,qe=_e.last,Ke=[];for(let Vt=Dt.path.length-1;Vt>=1;Vt--)Ke.push(Dt.path[Vt]);for(let Vt=1;Vt<qe.path.length;Vt++)Ke.push(qe.path[Vt]);let Et=2.5*Je;if(P){let Vt=this.projectPathToScreenSpace(Ke,he,P);Ke=Vt.some(Xt=>Xt.signedDistanceFromCamera<=0)?[]:Vt.map(Xt=>Xt.point)}let Qn=[];if(Ke.length>0){let Vt=Ke[0].clone(),Xt=Ke[0].clone();for(let er=1;er<Ke.length;er++)Vt.x=Math.min(Vt.x,Ke[er].x),Vt.y=Math.min(Vt.y,Ke[er].y),Xt.x=Math.max(Xt.x,Ke[er].x),Xt.y=Math.max(Xt.y,Ke[er].y);Qn=Vt.x>=je.x&&Xt.x<=Be.x&&Vt.y>=je.y&&Xt.y<=Be.y?[Ke]:Xt.x<je.x||Vt.x>Be.x||Xt.y<je.y||Vt.y>Be.y?[]:s.al([Ke],je.x,je.y,Be.x,Be.y)}for(let Vt of Qn){at.reset(Vt,.25*Je);let Xt=0;Xt=at.length<=.5*Je?1:Math.ceil(at.paddedLength/Et)+1;for(let er=0;er<Xt;er++){let ii=er/Math.max(Xt-1,1),Po=at.lerp(ii),tr=Po.x+Nt,Di=Po.y+Nt;re.push(tr,Di,Je,0);let vi=tr-Je,oi=Di-Je,_i=tr+Je,ss=Di+Je;if(We=We&&this.isOffscreen(vi,oi,_i,ss),Le=Le||this.isInsideGrid(vi,oi,_i,ss),i!=="always"&&this.grid.hitTestCircle(tr,Di,Je,i,V)&&(Pe=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!k&&Pe||!Le||K<this.perspectiveRatioCutoff?[]:re,offscreen:We,collisionDetected:Pe}}projectPathToScreenSpace(i,u,p){return i.map(f=>Q(f.x,f.y,p,u.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let u=[],p=1/0,f=1/0,g=-1/0,S=-1/0;for(let k of i){let N=new s.P(k.x+Nt,k.y+Nt);p=Math.min(p,N.x),f=Math.min(f,N.y),g=Math.max(g,N.x),S=Math.max(S,N.y),u.push(N)}let E=this.grid.query(p,f,g,S).concat(this.ignoredGrid.query(p,f,g,S)),D={},P={};for(let k of E){let N=k.key;if(D[N.bucketInstanceId]===void 0&&(D[N.bucketInstanceId]={}),D[N.bucketInstanceId][N.featureIndex])continue;let V=[new s.P(k.x1,k.y1),new s.P(k.x2,k.y1),new s.P(k.x2,k.y2),new s.P(k.x1,k.y2)];s.am(u,V)&&(D[N.bucketInstanceId][N.featureIndex]=!0,P[N.bucketInstanceId]===void 0&&(P[N.bucketInstanceId]=[]),P[N.bucketInstanceId].push(N.featureIndex))}return P}insertCollisionBox(i,u,p,f,g,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:g,collisionGroupID:S,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,f,g,S){let E=p?this.ignoredGrid:this.grid,D={bucketInstanceId:f,featureIndex:g,collisionGroupID:S,overlapMode:u};for(let P=0;P<i.length;P+=4)E.insertCircle(D,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,u,p,f,g){let S;g?(S=[u,p,g(u,p),1],s.af(S,S,i)):(S=[u,p,0,1],hn(S,S,i));let E=S[3];return{point:new s.P((S[0]/E+1)/2*this.transform.width+Nt,(-S[1]/E+1)/2*this.transform.height+Nt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}getPerspectiveRatio(i,u,p,f,g){let S=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(u,p,f,g):Q(u,p,i,g);return .5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5}isOffscreen(i,u,p,f){return p<Nt||i>=this.screenRightBoundary||f<Nt||u>this.screenBottomBoundary}isInsideGrid(i,u,p,f){return p>=0&&i<this.gridRightBoundary&&f>=0&&u<this.gridBottomBoundary}getViewportMatrix(){let i=s.an([]);return s.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,u,p,f,g,S,E,D,P,k){let N=new s.P(1,0),V=new s.P(0,1),H=new s.P(i.anchorPointX+E[0],i.anchorPointY+E[1]);if(S&&!g){let We=this.projectAndGetPerspectiveRatio(p,H.x+1,H.y,f,P).point.sub(D.point).unit(),Je=Math.atan(We.y/We.x)+(We.x<0?Math.PI:0),je=Math.sin(Je),Be=Math.cos(Je);N=new s.P(Be,je),V=new s.P(-je,Be)}else if(!S&&g){let We=-this.transform.angle,Je=Math.sin(We),je=Math.cos(We);N=new s.P(je,Je),V=new s.P(-Je,je)}let W=D.point,J=u;if(g){W=H;let We=this.transform.zoom-Math.floor(this.transform.zoom);J=Math.pow(2,-We),J*=this.mapProjection.getPitchedTextCorrection(this.transform,H,f),k||(J*=s.ac(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}k&&(W=W.add(N.mult(k.x*J)).add(V.mult(k.y*J)));let ne=i.x1*J,re=i.x2*J,ae=(ne+re)/2,K=i.y1*J,ue=i.y2*J,he=(K+ue)/2,_e=[{offsetX:ne,offsetY:K},{offsetX:ae,offsetY:K},{offsetX:re,offsetY:K},{offsetX:re,offsetY:he},{offsetX:re,offsetY:ue},{offsetX:ae,offsetY:ue},{offsetX:ne,offsetY:ue},{offsetX:ne,offsetY:he}],Pe=[];for(let{offsetX:We,offsetY:Je}of _e)Pe.push(new s.P(W.x+N.x*We+V.x*Je,W.y+N.y*We+V.y*Je));let Le=!1;if(g){let We=Pe.map(Je=>this.projectAndGetPerspectiveRatio(p,Je.x,Je.y,f,P));Le=We.some(Je=>!Je.isOccluded),Pe=We.map(Je=>Je.point)}else Le=!0;return{box:s.ao(Pe),allPointsOccluded:!Le}}}function Yt(y,i,u){return i*(s.X/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Ir{constructor(i,u,p,f){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):f&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class dr{constructor(i,u,p,f,g){this.text=new Ir(i?i.text:null,u,p,g),this.icon=new Ir(i?i.icon:null,u,f,g)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class qt{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class An{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class rr{constructor(i,u,p,f,g){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=f,this.tileID=g}}class Lr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){let u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Yr(y,i,u,p,f){let{horizontalAlign:g,verticalAlign:S}=s.au(y);return new s.P(-(g-.5)*i+p[0]*f,-(S-.5)*u+p[1]*f)}class yi{constructor(i,u,p,f,g,S){this.transform=i.clone(),this.terrain=p,this.collisionIndex=new pn(this.transform,u),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Lr(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){let u=this.terrain;return u?(p,f)=>u.getElevation(i,p,f):null}getBucketParts(i,u,p,f){let g=p.getBucket(u),S=p.latestFeatureIndex;if(!g||!S||u.id!==g.layerIds[0])return;let E=p.collisionBoxArray,D=g.layers[0].layout,P=g.layers[0].paint,k=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),N=p.tileSize/s.X,V=p.tileID.toUnwrapped(),H=this.transform.calculatePosMatrix(V),W=D.get("text-pitch-alignment")==="map",J=D.get("text-rotation-alignment")==="map",ne=Yt(p,1,this.transform.zoom),re=this.collisionIndex.mapProjection.translatePosition(this.transform,p,P.get("text-translate"),P.get("text-translate-anchor")),ae=this.collisionIndex.mapProjection.translatePosition(this.transform,p,P.get("icon-translate"),P.get("icon-translate-anchor")),K=Js(H,W,J,this.transform,ne),ue=null;if(W){let _e=ns(H,W,J,this.transform,ne);ue=s.L([],this.transform.labelPlaneMatrix,_e)}this.retainedQueryData[g.bucketInstanceId]=new rr(g.bucketInstanceId,S,g.sourceLayerIndex,g.index,p.tileID);let he={bucket:g,layout:D,translationText:re,translationIcon:ae,posMatrix:H,unwrappedTileID:V,textLabelPlaneMatrix:K,labelToScreenMatrix:ue,scale:k,textPixelRatio:N,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ag(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(f)for(let _e of g.sortKeyRanges){let{sortKey:Pe,symbolInstanceStart:Le,symbolInstanceEnd:We}=_e;i.push({sortKey:Pe,symbolInstanceStart:Le,symbolInstanceEnd:We,parameters:he})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:he})}attemptAnchorPlacement(i,u,p,f,g,S,E,D,P,k,N,V,H,W,J,ne,re,ae,K){let ue=s.aq[i.textAnchor],he=[i.textOffset0,i.textOffset1],_e=Yr(ue,p,f,he,g),Pe=this.collisionIndex.placeCollisionBox(u,V,D,P,k,E,S,ne,N.predicate,K,_e);if((!ae||this.collisionIndex.placeCollisionBox(ae,V,D,P,k,E,S,re,N.predicate,K,_e).placeable)&&Pe.placeable){let Le;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Le=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:he,width:p,height:f,anchor:ue,textBoxScale:g,prevAnchor:Le},this.markUsedJustification(W,ue,H,J),W.allowVerticalPlacement&&(this.markUsedOrientation(W,J,H),this.placedOrientations[H.crossTileID]=J),{shift:_e,placedGlyphBoxes:Pe}}}placeLayerBucketPart(i,u,p){let{bucket:f,layout:g,translationText:S,translationIcon:E,posMatrix:D,unwrappedTileID:P,textLabelPlaneMatrix:k,labelToScreenMatrix:N,textPixelRatio:V,holdingForFade:H,collisionBoxArray:W,partiallyEvaluatedTextSize:J,collisionGroup:ne}=i.parameters,re=g.get("text-optional"),ae=g.get("icon-optional"),K=s.ar(g,"text-overlap","text-allow-overlap"),ue=K==="always",he=s.ar(g,"icon-overlap","icon-allow-overlap"),_e=he==="always",Pe=g.get("text-rotation-alignment")==="map",Le=g.get("text-pitch-alignment")==="map",We=g.get("icon-text-fit")!=="none",Je=g.get("symbol-z-order")==="viewport-y",je=ue&&(_e||!f.hasIconData()||ae),Be=_e&&(ue||!f.hasTextData()||re);!f.collisionArrays&&W&&f.deserializeCollisionBoxes(W);let at=this._getTerrainElevationFunc(this.retainedQueryData[f.bucketInstanceId].tileID),Dt=(qe,Ke,Et)=>{var Qn,Vt;if(u[qe.crossTileID])return;if(H)return void(this.placements[qe.crossTileID]=new qt(!1,!1,!1));let Xt=!1,er=!1,ii=!0,Po=null,tr={box:null,placeable:!1,offscreen:null},Di={box:null,placeable:!1,offscreen:null},vi=null,oi=null,_i=null,ss=0,cc=0,Ah=0;Ke.textFeatureIndex?ss=Ke.textFeatureIndex:qe.useRuntimeCollisionCircles&&(ss=qe.featureIndex),Ke.verticalTextFeatureIndex&&(cc=Ke.verticalTextFeatureIndex);let uc=Ke.textBox;if(uc){let co=Xr=>{let si=s.ah.horizontal;if(f.allowVerticalPlacement&&!Xr&&this.prevPlacement){let Gi=this.prevPlacement.placedOrientations[qe.crossTileID];Gi&&(this.placedOrientations[qe.crossTileID]=Gi,si=Gi,this.markUsedOrientation(f,si,qe))}return si},uo=(Xr,si)=>{if(f.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&Ke.verticalTextBox){for(let Gi of f.writingModes)if(Gi===s.ah.vertical?(tr=si(),Di=tr):tr=Xr(),tr&&tr.placeable)break}else tr=Xr()},ta=qe.textAnchorOffsetStartIndex,Ro=qe.textAnchorOffsetEndIndex;if(Ro===ta){let Xr=(si,Gi)=>{let rn=this.collisionIndex.placeCollisionBox(si,K,V,D,P,Le,Pe,S,ne.predicate,at);return rn&&rn.placeable&&(this.markUsedOrientation(f,Gi,qe),this.placedOrientations[qe.crossTileID]=Gi),rn};uo(()=>Xr(uc,s.ah.horizontal),()=>{let si=Ke.verticalTextBox;return f.allowVerticalPlacement&&qe.numVerticalGlyphVertices>0&&si?Xr(si,s.ah.vertical):{box:null,offscreen:null}}),co(tr&&tr.placeable)}else{let Xr=s.aq[(Vt=(Qn=this.prevPlacement)===null||Qn===void 0?void 0:Qn.variableOffsets[qe.crossTileID])===null||Vt===void 0?void 0:Vt.anchor],si=(rn,sl,dc)=>{let hc=rn.x2-rn.x1,jv=rn.y2-rn.y1,bS=qe.textBoxScale,$v=We&&he==="never"?sl:null,na=null,qv=K==="never"?1:2,Ph="never";Xr&&qv++;for(let Lu=0;Lu<qv;Lu++){for(let Rh=ta;Rh<Ro;Rh++){let kh=f.textAnchorOffsets.get(Rh);if(Xr&&kh.textAnchor!==Xr)continue;let pc=this.attemptAnchorPlacement(kh,rn,hc,jv,bS,Pe,Le,V,D,P,ne,Ph,qe,f,dc,S,E,$v,at);if(pc&&(na=pc.placedGlyphBoxes,na&&na.placeable))return Xt=!0,Po=pc.shift,na}Xr?Xr=null:Ph=K}return p&&!na&&(na={box:this.collisionIndex.placeCollisionBox(uc,"always",V,D,P,Le,Pe,S,ne.predicate,at,new s.P(0,0)).box,offscreen:!1,placeable:!1}),na};uo(()=>si(uc,Ke.iconBox,s.ah.horizontal),()=>{let rn=Ke.verticalTextBox;return f.allowVerticalPlacement&&(!tr||!tr.placeable)&&qe.numVerticalGlyphVertices>0&&rn?si(rn,Ke.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),tr&&(Xt=tr.placeable,ii=tr.offscreen);let Gi=co(tr&&tr.placeable);if(!Xt&&this.prevPlacement){let rn=this.prevPlacement.variableOffsets[qe.crossTileID];rn&&(this.variableOffsets[qe.crossTileID]=rn,this.markUsedJustification(f,rn.anchor,qe,Gi))}}}if(vi=tr,Xt=vi&&vi.placeable,ii=vi&&vi.offscreen,qe.useRuntimeCollisionCircles){let co=f.text.placedSymbolArray.get(qe.centerJustifiedTextSymbolIndex),uo=s.ai(f.textSizeData,J,co),ta=g.get("text-padding");oi=this.collisionIndex.placeCollisionCircles(K,co,f.lineVertexArray,f.glyphOffsetArray,uo,D,P,k,N,p,Le,ne.predicate,qe.collisionCircleDiameter,ta,S,at),oi.circles.length&&oi.collisionDetected&&!p&&s.w("Collisions detected, but collision boxes are not shown"),Xt=ue||oi.circles.length>0&&!oi.collisionDetected,ii=ii&&oi.offscreen}if(Ke.iconFeatureIndex&&(Ah=Ke.iconFeatureIndex),Ke.iconBox){let co=uo=>this.collisionIndex.placeCollisionBox(uo,he,V,D,P,Le,Pe,E,ne.predicate,at,We&&Po?Po:void 0);Di&&Di.placeable&&Ke.verticalIconBox?(_i=co(Ke.verticalIconBox),er=_i.placeable):(_i=co(Ke.iconBox),er=_i.placeable),ii=ii&&_i.offscreen}let lo=re||qe.numHorizontalGlyphVertices===0&&qe.numVerticalGlyphVertices===0,Mh=ae||qe.numIconVertices===0;lo||Mh?Mh?lo||(er=er&&Xt):Xt=er&&Xt:er=Xt=er&&Xt;let Im=er&&_i.placeable;if(Xt&&vi.placeable&&this.collisionIndex.insertCollisionBox(vi.box,K,g.get("text-ignore-placement"),f.bucketInstanceId,Di&&Di.placeable&&cc?cc:ss,ne.ID),Im&&this.collisionIndex.insertCollisionBox(_i.box,he,g.get("icon-ignore-placement"),f.bucketInstanceId,Ah,ne.ID),oi&&Xt&&this.collisionIndex.insertCollisionCircles(oi.circles,K,g.get("text-ignore-placement"),f.bucketInstanceId,ss,ne.ID),p&&this.storeCollisionData(f.bucketInstanceId,Et,Ke,vi,_i,oi),qe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[qe.crossTileID]=new qt(Xt||je,er||Be,ii||f.justReloaded),u[qe.crossTileID]=!0};if(Je){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let qe=f.getSortedSymbolIndexes(this.transform.angle);for(let Ke=qe.length-1;Ke>=0;--Ke){let Et=qe[Ke];Dt(f.symbolInstances.get(Et),f.collisionArrays[Et],Et)}}else for(let qe=i.symbolInstanceStart;qe<i.symbolInstanceEnd;qe++)Dt(f.symbolInstances.get(qe),f.collisionArrays[qe],qe);if(p&&f.bucketInstanceId in this.collisionCircleArrays){let qe=this.collisionCircleArrays[f.bucketInstanceId];s.as(qe.invProjMatrix,D),qe.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}storeCollisionData(i,u,p,f,g,S){if(p.textBox||p.iconBox){let E,D;this.collisionBoxArrays.has(i)?E=this.collisionBoxArrays.get(i):(E=new Map,this.collisionBoxArrays.set(i,E)),E.has(u)?D=E.get(u):(D={text:null,icon:null},E.set(u,D)),p.textBox&&(D.text=f.box),p.iconBox&&(D.icon=g.box)}if(S){let E=this.collisionCircleArrays[i];E===void 0&&(E=this.collisionCircleArrays[i]=new An);for(let D=0;D<S.circles.length;D+=4)E.circles.push(S.circles[D+0]),E.circles.push(S.circles[D+1]),E.circles.push(S.circles[D+2]),E.circles.push(S.collisionDetected?1:0)}}markUsedJustification(i,u,p,f){let g;g=f===s.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[s.at(u)];let S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(let E of S)E>=0&&(i.text.placedSymbolArray.get(E).crossTileID=g>=0&&E!==g?0:p.crossTileID)}markUsedOrientation(i,u,p){let f=u===s.ah.horizontal||u===s.ah.horizontalOnly?u:0,g=u===s.ah.vertical?u:0,S=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(let E of S)i.text.placedSymbolArray.get(E).placedOrientation=f;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=g)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;let u=this.prevPlacement,p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;let f=u?u.symbolFadeChange(i):1,g=u?u.opacities:{},S=u?u.variableOffsets:{},E=u?u.placedOrientations:{};for(let D in this.placements){let P=this.placements[D],k=g[D];k?(this.opacities[D]=new dr(k,f,P.text,P.icon),p=p||P.text!==k.text.placed||P.icon!==k.icon.placed):(this.opacities[D]=new dr(null,f,P.text,P.icon,P.skipFade),p=p||P.text||P.icon)}for(let D in g){let P=g[D];if(!this.opacities[D]){let k=new dr(P,f,!1,!1);k.isHidden()||(this.opacities[D]=k,p=p||P.text.placed||P.icon.placed)}}for(let D in S)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=S[D]);for(let D in E)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=E[D]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){let p={};for(let f of u){let g=f.getBucket(i);g&&f.latestFeatureIndex&&i.id===g.layerIds[0]&&this.updateBucketOpacities(g,f.tileID,p,f.collisionBoxArray)}}updateBucketOpacities(i,u,p,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();let g=i.layers[0],S=g.layout,E=new dr(null,0,!1,!1,!0),D=S.get("text-allow-overlap"),P=S.get("icon-allow-overlap"),k=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=S.get("text-rotation-alignment")==="map",V=S.get("text-pitch-alignment")==="map",H=S.get("icon-text-fit")!=="none",W=new dr(null,0,D&&(P||!i.hasIconData()||S.get("icon-optional")),P&&(D||!i.hasTextData()||S.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);let J=(re,ae,K)=>{for(let ue=0;ue<ae/4;ue++)re.opacityVertexArray.emplaceBack(K);re.hasVisibleVertices=re.hasVisibleVertices||K!==jl},ne=this.collisionBoxArrays.get(i.bucketInstanceId);for(let re=0;re<i.symbolInstances.length;re++){let ae=i.symbolInstances.get(re),{numHorizontalGlyphVertices:K,numVerticalGlyphVertices:ue,crossTileID:he}=ae,_e=this.opacities[he];p[he]?_e=E:_e||(_e=W,this.opacities[he]=_e),p[he]=!0;let Pe=ae.numIconVertices>0,Le=this.placedOrientations[ae.crossTileID],We=Le===s.ah.vertical,Je=Le===s.ah.horizontal||Le===s.ah.horizontalOnly;if(K>0||ue>0){let Be=$i(_e.text);J(i.text,K,We?jl:Be),J(i.text,ue,Je?jl:Be);let at=_e.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(Ke=>{Ke>=0&&(i.text.placedSymbolArray.get(Ke).hidden=at||We?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=at||Je?1:0);let Dt=this.variableOffsets[ae.crossTileID];Dt&&this.markUsedJustification(i,Dt.anchor,ae,Le);let qe=this.placedOrientations[ae.crossTileID];qe&&(this.markUsedJustification(i,"left",ae,qe),this.markUsedOrientation(i,qe,ae))}if(Pe){let Be=$i(_e.icon),at=!(H&&ae.verticalPlacedIconSymbolIndex&&We);ae.placedIconSymbolIndex>=0&&(J(i.icon,ae.numIconVertices,at?Be:jl),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=_e.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(J(i.icon,ae.numVerticalIconVertices,at?jl:Be),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}let je=ne&&ne.has(re)?ne.get(re):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){let Be=i.collisionArrays[re];if(Be){let at=new s.P(0,0);if(Be.textBox||Be.verticalTextBox){let Dt=!0;if(k){let qe=this.variableOffsets[he];qe?(at=Yr(qe.anchor,qe.width,qe.height,qe.textOffset,qe.textBoxScale),N&&at._rotate(V?this.transform.angle:-this.transform.angle)):Dt=!1}if(Be.textBox||Be.verticalTextBox){let qe;Be.textBox&&(qe=We),Be.verticalTextBox&&(qe=Je),Vl(i.textCollisionBox.collisionVertexArray,_e.text.placed,!Dt||qe,je.text,at.x,at.y)}}if(Be.iconBox||Be.verticalIconBox){let Dt=!!(!Je&&Be.verticalIconBox),qe;Be.iconBox&&(qe=Dt),Be.verticalIconBox&&(qe=!Dt),Vl(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,qe,je.icon,H?at.x:0,H?at.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){let re=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=re.invProjMatrix,i.placementViewportMatrix=re.viewportMatrix,i.collisionCircleArray=re.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){let p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Vl(y,i,u,p,f,g){p&&p.length!==0||(p=[0,0,0,0]);let S=p[0]-Nt,E=p[1]-Nt,D=p[2]-Nt,P=p[3]-Nt;y.emplaceBack(i?1:0,u?1:0,f||0,g||0,S,E),y.emplaceBack(i?1:0,u?1:0,f||0,g||0,D,E),y.emplaceBack(i?1:0,u?1:0,f||0,g||0,D,P),y.emplaceBack(i?1:0,u?1:0,f||0,g||0,S,P)}let Mn=Math.pow(2,25),Of=Math.pow(2,24),Lf=Math.pow(2,17),Vi=Math.pow(2,16),ji=Math.pow(2,9),Yb=Math.pow(2,8),io=Math.pow(2,1);function $i(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;let i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Mn+i*Of+u*Lf+i*Vi+u*ji+i*Yb+u*io+i}let jl=0;function Za(){return{isOccluded:(y,i,u)=>!1,getPitchedTextCorrection:(y,i,u)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(y,i,u,p){throw new Error("Not implemented.")},translatePosition:(y,i,u,p)=>function(f,g,S,E,D=!1){if(!S[0]&&!S[1])return[0,0];let P=D?E==="map"?f.angle:0:E==="viewport"?-f.angle:0;if(P){let k=Math.sin(P),N=Math.cos(P);S=[S[0]*N-S[1]*k,S[0]*k+S[1]*N]}return[D?S[0]:Yt(g,S[0],f.zoom),D?S[1]:Yt(g,S[1],f.zoom)]}(y,i,u,p),getCircleRadiusCorrection:y=>1}}class Er{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,f,g){let S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(S,f,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((E,D)=>E.sortKey-D.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,g())return!0;return!1}}class _u{constructor(i,u,p,f,g,S,E,D){this.placement=new yi(i,Za(),u,S,E,D),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=g,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){let f=C.now(),g=()=>!this._forceFullPlacement&&C.now()-f>2;for(;this._currentPlacementIndex>=0;){let S=u[i[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=E)&&(!S.maxzoom||S.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Er(S)),this._inProgressLayer.continuePlacement(p[S.source],this.placement,this._showCollisionBoxes,S,g))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}let Eo=512/s.X/2;class xr{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};let f=new Map;for(let g=0;g<u.length;g++){let S=u.get(g),E=S.key,D=f.get(E);D?D.push(S):f.set(E,[S])}for(let[g,S]of f){let E={positions:S.map(D=>({x:Math.floor(D.anchorX*Eo),y:Math.floor(D.anchorY*Eo)})),crossTileIDs:S.map(D=>D.crossTileID)};if(E.positions.length>128){let D=new s.av(E.positions.length,16,Uint16Array);for(let{x:P,y:k}of E.positions)D.add(P,k);D.finish(),delete E.positions,E.index=D}this._symbolsByKey[g]=E}}getScaledCoordinates(i,u){let{x:p,y:f,z:g}=this.tileID.canonical,{x:S,y:E,z:D}=u.canonical,P=Eo/Math.pow(2,D-g),k=(E*s.X+i.anchorY)*P,N=f*s.X*Eo;return{x:Math.floor((S*s.X+i.anchorX)*P-p*s.X*Eo),y:Math.floor(k-N)}}findMatches(i,u,p){let f=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let g=0;g<i.length;g++){let S=i.get(g);if(S.crossTileID)continue;let E=this._symbolsByKey[S.key];if(!E)continue;let D=this.getScaledCoordinates(S,u);if(E.index){let P=E.index.range(D.x-f,D.y-f,D.x+f,D.y+f).sort();for(let k of P){let N=E.crossTileIDs[k];if(!p[N]){p[N]=!0,S.crossTileID=N;break}}}else if(E.positions)for(let P=0;P<E.positions.length;P++){let k=E.positions[P],N=E.crossTileIDs[P];if(Math.abs(k.x-D.x)<=f&&Math.abs(k.y-D.y)<=f&&!p[N]){p[N]=!0,S.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Jd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class To{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){let u=Math.round((i-this.lng)/360);if(u!==0)for(let p in this.indexes){let f=this.indexes[p],g={};for(let S in f){let E=f[S];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+u),g[E.tileID.key]=E}this.indexes[p]=g}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let g=0;g<u.symbolInstances.length;g++)u.symbolInstances.get(g).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});let f=this.usedCrossTileIDs[i.overscaledZ];for(let g in this.indexes){let S=this.indexes[g];if(Number(g)>i.overscaledZ)for(let E in S){let D=S[E];D.tileID.isChildOf(i)&&D.findMatches(u.symbolInstances,i,f)}else{let E=S[i.scaledTo(Number(g)).key];E&&E.findMatches(u.symbolInstances,i,f)}}for(let g=0;g<u.symbolInstances.length;g++){let S=u.symbolInstances.get(g);S.crossTileID||(S.crossTileID=p.generate(),f[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new xr(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(let p of u.getCrossTileIDsLists())for(let f of p)delete this.usedCrossTileIDs[i][f]}removeStaleBuckets(i){let u=!1;for(let p in this.indexes){let f=this.indexes[p];for(let g in f)i[f[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,f[g]),delete f[g],u=!0)}return u}}class zf{constructor(){this.layerIndexes={},this.crossTileIDs=new Jd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let f=this.layerIndexes[i.id];f===void 0&&(f=this.layerIndexes[i.id]=new To);let g=!1,S={};f.handleWrapJump(p);for(let E of u){let D=E.getBucket(i);D&&i.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(E.tileID,D,this.crossTileIDs)&&(g=!0),S[D.bucketInstanceId]=!0)}return f.removeStaleBuckets(S)&&(g=!0),g}pruneUnusedLayers(i){let u={};i.forEach(p=>{u[p]=!0});for(let p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}let Do=(y,i)=>s.t(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Xb=s.aw();class Qd extends s.E{constructor(i,u={}){super(),this._rtlPluginLoaded=()=>{for(let p in this.sourceCaches){let f=this.sourceCaches[p].getSource().type;f!=="vector"&&f!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new Jo(Cs(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,f)=>this.getGlyphs(p,f)),this.dispatcher.registerMessageHandler("GI",(p,f)=>this.getImages(p,f)),this.imageManager=new vt,this.imageManager.setEventedParent(this),this.glyphManager=new Cr(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new _r(256,512),this.crossTileSymbolIndex=new zf,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),es().on(ze,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;let f=this.sourceCaches[p.sourceId];if(!f)return;let g=f.getSource();if(g&&g.vectorLayerIds)for(let S in this._layers){let E=this._layers[S];E.source===g.id&&this._validateLayer(E)}})}loadURL(i,u={},p){this.fire(new s.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;let f=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;let g=this._loadStyleRequest;s.h(f,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,u,p)}).catch(S=>{this._loadStyleRequest=null,S&&!g.signal.aborted&&this.fire(new s.j(S))})}loadJSON(i,u={},p){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(i,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(Xb,{validate:!1})}_load(i,u,p){var f;let g=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!Do(this,s.u(g))){this._loaded=!0,this.stylesheet=g;for(let S in g.sources)this.addSource(S,g.sources[S],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs),this._createLayers(),this.light=new Mr(this.stylesheet.light),this.sky=new Kr(this.stylesheet.sky),this.map.setTerrain((f=this.stylesheet.terrain)!==null&&f!==void 0?f:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){let i=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(let u of i){let p=s.aA(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){let f;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(g,S,E,D){return s._(this,void 0,void 0,function*(){let P=ut(g),k=E>1?"@2x":"",N={},V={};for(let{id:H,url:W}of P){let J=S.transformRequest(Mt(W,k,".json"),"SpriteJSON");N[H]=s.h(J,D);let ne=S.transformRequest(Mt(W,k,".png"),"SpriteImage");V[H]=ve.getImage(ne,D)}return yield Promise.all([...Object.values(N),...Object.values(V)]),function(H,W){return s._(this,void 0,void 0,function*(){let J={};for(let ne in H){J[ne]={};let re=C.getImageCanvasContext((yield W[ne]).data),ae=(yield H[ne]).data;for(let K in ae){let{width:ue,height:he,x:_e,y:Pe,sdf:Le,pixelRatio:We,stretchX:Je,stretchY:je,content:Be,textFitWidth:at,textFitHeight:Dt}=ae[K];J[ne][K]={data:null,pixelRatio:We,sdf:Le,stretchX:Je,stretchY:je,content:Be,textFitWidth:at,textFitHeight:Dt,spriteData:{width:ue,height:he,x:_e,y:Pe,context:re}}}}return J})}(N,V)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(g=>{if(this._spriteRequest=null,g)for(let S in g){this._spritesImagesIds[S]=[];let E=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(D=>!(D in g)):[];for(let D of E)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(let D in g[S]){let P=S==="default"?D:`${S}:${D}`;this._spritesImagesIds[S].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,g[S][D],!1):this.imageManager.addImage(P,g[S][D]),u&&(this._changedImages[P]=!0)}}}).catch(g=>{this._spriteRequest=null,f=g,this.fire(new s.j(f))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),p&&p(f)})}_unloadSprite(){for(let i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(i){let u=this.sourceCaches[i.source];if(!u)return;let p=i.sourceLayer;if(!p)return;let f=u.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.j(new Error(`Source layer "${p}" does not exist on source "${f.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,u=!1){let p=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u?s.aB(p):p);let f=[];for(let g of i)if(p[g]){let S=u?s.aB(p[g]):p[g];f.push(S)}return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};let u=Object.keys(this._layers);for(let p of u){let f=this._layers[p];f.type!=="custom"&&(i[p]=f.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(let i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;let u=this._changed;if(u){let f=Object.keys(this._updatedLayers),g=Object.keys(this._removedLayers);(f.length||g.length)&&this._updateWorkerLayers(f,g);for(let S in this._updatedSources){let E=this._updatedSources[S];if(E==="reload")this._reloadSource(S);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}let p={};for(let f in this.sourceCaches){let g=this.sourceCaches[f];p[f]=g.used,g.used=!1}for(let f of this._order){let g=this._layers[f];g.recalculate(i,this._availableImages),!g.isHidden(i.zoom)&&g.source&&(this.sourceCaches[g.source].used=!0)}for(let f in p){let g=this.sourceCaches[f];!!p[f]!=!!g.used&&g.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,u&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let i=Object.keys(this._changedImages);if(i.length){for(let u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){var p;this._checkLoaded();let f=this.serialize();if(i=u.transformStyle?u.transformStyle(f,i):i,((p=u.validate)===null||p===void 0||p)&&Do(this,s.u(i)))return!1;(i=s.aB(i)).layers=s.az(i.layers);let g=s.aC(f,i),S=this._getOperationsToPerform(g);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(let E of S.operations)E();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){let u=[],p=[];for(let f of i)switch(f.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,f.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,f.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,f.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,f.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,f.args));break;case"addSource":u.push(()=>this.addSource.apply(this,f.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,f.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,f.args));break;case"setLight":u.push(()=>this.setLight.apply(this,f.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,f.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,f.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,f.args));break;case"setSky":u.push(()=>this.setSky.apply(this,f.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,f.args));break;case"setTransition":u.push(()=>{});break;default:p.push(f.command)}return{operations:u,unimplemented:p}}addImage(i,u){if(this.getImage(i))return this.fire(new s.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new s.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(s.u.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);let f=this.sourceCaches[i]=new Ct(i,u,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:f.loaded(),source:f.serialize(),sourceId:i})),f.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(let p in this._layers)if(this._layers[p].source===i)return this.fire(new s.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));let u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);let p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();let f=i.id;if(this.getLayer(f))return void this.fire(new s.j(new Error(`Layer "${f}" already exists on this map.`)));let g;if(i.type==="custom"){if(Do(this,s.aD(i)))return;g=s.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(f,i.source),i=s.aB(i),i=s.e(i,{source:f})),this._validate(s.u.layer,`layers.${f}`,i,{arrayIndex:-1},p))return;g=s.aA(i),this._validateLayer(g),g.setEventedParent(this,{layer:{id:f}})}let S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new s.j(new Error(`Cannot add layer "${f}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,f),this._layerOrderChanged=!0,this._layers[f]=g,this._removedLayers[f]&&g.source&&g.type!=="custom"){let E=this._removedLayers[f];delete this._removedLayers[f],E.type!==g.type?this._updatedSources[g.source]="clear":(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause())}this._updateLayer(g),g.onAdd&&g.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;let p=this._order.indexOf(i);this._order.splice(p,1);let f=u?this._order.indexOf(u):this._order.length;u&&f===-1?this.fire(new s.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(f,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();let u=this._layers[i];if(!u)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);let p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();let f=this.getLayer(i);f?f.minzoom===u&&f.maxzoom===p||(u!=null&&(f.minzoom=u),p!=null&&(f.maxzoom=p),this._updateLayer(f)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();let f=this.getLayer(i);if(f){if(!s.aE(f.filter,u))return u==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(s.u.filter,`layers.${f.id}.filter`,u,null,p)||(f.filter=s.aB(u),this._updateLayer(f)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return s.aB(this.getLayer(i).filter)}setLayoutProperty(i,u,p,f={}){this._checkLoaded();let g=this.getLayer(i);g?s.aE(g.getLayoutProperty(u),p)||(g.setLayoutProperty(u,p,f),this._updateLayer(g)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){let p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,f={}){this._checkLoaded();let g=this.getLayer(i);g?s.aE(g.getPaintProperty(u),p)||(g.setPaintProperty(u,p,f)&&this._updateLayer(g),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();let p=i.source,f=i.sourceLayer,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new s.j(new Error(`The source '${p}' does not exist in the map's style.`)));let S=g.getSource().type;S==="geojson"&&f?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||f?(i.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),g.setFeatureState(f,i.id,u)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();let p=i.source,f=this.sourceCaches[p];if(f===void 0)return void this.fire(new s.j(new Error(`The source '${p}' does not exist in the map's style.`)));let g=f.getSource().type,S=g==="vector"?i.sourceLayer:void 0;g!=="vector"||S?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(S,i.id,u):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();let u=i.source,p=i.sourceLayer,f=this.sourceCaches[u];if(f!==void 0)return f.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),f.getFeatureState(p,i.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let i=s.aF(this.sourceCaches,g=>g.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,f=this.stylesheet;return s.aG({version:f.version,name:f.name,metadata:f.metadata,light:f.light,sky:f.sky,center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,sprite:f.sprite,glyphs:f.glyphs,transition:f.transition,sources:i,layers:u,terrain:p},g=>g!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){let u=S=>this._layers[S].type==="fill-extrusion",p={},f=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(u(E)){p[E]=S;for(let D of i){let P=D[E];if(P)for(let k of P)f.push(k)}}}f.sort((S,E)=>E.intersectionZ-S.intersectionZ);let g=[];for(let S=this._order.length-1;S>=0;S--){let E=this._order[S];if(u(E))for(let D=f.length-1;D>=0;D--){let P=f[D].feature;if(p[P.layer.id]<S)break;g.push(P),f.pop()}else for(let D of i){let P=D[E];if(P)for(let k of P)g.push(k.feature)}}return g}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",u.filter,null,u);let f={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(let E of u.layers){let D=this._layers[E];if(!D)return this.fire(new s.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];f[D.source]=!0}}let g=[];u.availableImages=this._availableImages;let S=this._serializedAllLayers();for(let E in this.sourceCaches)u.layers&&!f[E]||g.push(Zs(this.sourceCaches[E],this._layers,S,i,u,p));return this.placement&&g.push(function(E,D,P,k,N,V,H){let W={},J=V.queryRenderedSymbols(k),ne=[];for(let re of Object.keys(J).map(Number))ne.push(H[re]);ne.sort(Ks);for(let re of ne){let ae=re.featureIndex.lookupSymbolFeatures(J[re.bucketInstanceId],D,re.bucketIndex,re.sourceLayerIndex,N.filter,N.layers,N.availableImages,E);for(let K in ae){let ue=W[K]=W[K]||[],he=ae[K];he.sort((_e,Pe)=>{let Le=re.featureSortOrder;if(Le){let We=Le.indexOf(_e.featureIndex);return Le.indexOf(Pe.featureIndex)-We}return Pe.featureIndex-_e.featureIndex});for(let _e of he)ue.push(_e)}}for(let re in W)W[re].forEach(ae=>{let K=ae.feature,ue=P[E[re].source].getFeatureState(K.layer["source-layer"],K.id);K.source=K.layer.source,K.layer["source-layer"]&&(K.sourceLayer=K.layer["source-layer"]),K.state=ue});return W}(this._layers,S,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(g)}querySourceFeatures(i,u){u&&u.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",u.filter,null,u);let p=this.sourceCaches[i];return p?function(f,g){let S=f.getRenderableIds().map(P=>f.getTileByID(P)),E=[],D={};for(let P=0;P<S.length;P++){let k=S[P],N=k.tileID.canonical.key;D[N]||(D[N]=!0,k.querySourceFeatures(E,g))}return E}(p,u):[]}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();let p=this.light.getLight(),f=!1;for(let S in i)if(!s.aE(i[S],p[S])){f=!0;break}if(!f)return;let g={now:C.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(g)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,u={}){let p=this.getSky(),f=!1;if(!i&&!p)return;if(i&&!p)f=!0;else if(!i&&p)f=!0;else for(let S in i)if(!s.aE(i[S],p[S])){f=!0;break}if(!f)return;let g={now:C.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,u),this.sky.updateTransitions(g)}_validate(i,u,p,f,g={}){return(!g||g.validate!==!1)&&Do(this,i.call(s.u,s.e({key:u,style:this.serialize(),value:p,styleSpec:s.v},f)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),es().off(ze,this._rtlPluginLoaded);for(let u in this._layers)this._layers[u].setEventedParent(null);for(let u in this.sourceCaches){let p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(let u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(let i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,f,g=!1){let S=!1,E=!1,D={};for(let P of this._order){let k=this._layers[P];if(k.type!=="symbol")continue;if(!D[k.source]){let V=this.sourceCaches[k.source];D[k.source]=V.getRenderableIds(!0).map(H=>V.getTileByID(H)).sort((H,W)=>W.tileID.overscaledZ-H.tileID.overscaledZ||(H.tileID.isLessThan(W.tileID)?-1:1))}let N=this.crossTileSymbolIndex.addLayer(k,D[k.source],i.center.lng);S=S||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((g=g||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(C.now(),i.zoom))&&(this.pauseablePlacement=new _u(i,this.map.terrain,this._order,g,u,p,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(C.now()),E=!0),S&&this.pauseablePlacement.placement.setStale()),E||S)for(let P of this._order){let k=this._layers[P];k.type==="symbol"&&this.placement.updateLayerOpacities(k,D[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(C.now())}_releaseSymbolFadeTiles(){for(let i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u){return s._(this,void 0,void 0,function*(){let p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();let f=this.sourceCaches[u.source];return f&&f.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(i,u){return s._(this,void 0,void 0,function*(){let p=yield this.glyphManager.getGlyphs(u.stacks),f=this.sourceCaches[u.source];return f&&f.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(s.u.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},f){this._checkLoaded();let g=[{id:i,url:u}],S=[...ut(this.stylesheet.sprite),...g];this._validate(s.u.sprite,"sprite",S,null,p)||(this.stylesheet.sprite=S,this._loadSprite(g,!0,f))}removeSprite(i){this._checkLoaded();let u=ut(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(let p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ut(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(s.u.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var Ka=s.Y([{name:"a_pos",type:"Int16",components:2}]);let Qs={prelude:_n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:_n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_n(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:_n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:_n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:_n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:_n("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:_n("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:_n("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:_n("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function _n(y,i){let u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),f=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),g=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=g?g.concat(f):f,E={};return{fragmentSource:y=y.replace(u,(D,P,k,N,V)=>(E[V]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
varying ${k} ${N} ${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = u_${V};
#endif
`)),vertexSource:i=i.replace(u,(D,P,k,N,V)=>{let H=N==="float"?"vec2":"vec4",W=V.match(/color/)?"color":H;return E[V]?P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${k} ${H} a_${V};
varying ${k} ${N} ${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${W}(a_${V}, u_${V}_t);
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${k} ${H} a_${V};
#else
uniform ${k} ${N} u_${V};
#endif
`:W==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = a_${V};
#else
    ${k} ${N} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${k} ${N} ${V} = unpack_mix_${W}(a_${V}, u_${V}_t);
#else
    ${k} ${N} ${V} = u_${V};
#endif
`}),staticAttributes:p,staticUniforms:S}}class Uf{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,f,g,S,E,D,P){this.context=i;let k=this.boundPaintVertexBuffers.length!==f.length;for(let N=0;!k&&N<f.length;N++)this.boundPaintVertexBuffers[N]!==f[N]&&(k=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||k||this.boundIndexBuffer!==g||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==P?this.freshBind(u,p,f,g,S,E,D,P):(i.bindVertexArray.set(this.vao),E&&E.bind(),g&&g.dynamicDraw&&g.bind(),D&&D.bind(),P&&P.bind())}freshBind(i,u,p,f,g,S,E,D){let P=i.numAttributes,k=this.context,N=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=f,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=D,u.enableAttributes(N,i);for(let V of p)V.enableAttributes(N,i);S&&S.enableAttributes(N,i),E&&E.enableAttributes(N,i),D&&D.enableAttributes(N,i),u.bind(),u.setVertexAttribPointers(N,i,g);for(let V of p)V.bind(),V.setVertexAttribPointers(N,i,g);S&&(S.bind(),S.setVertexAttribPointers(N,i,g)),f&&f.bind(),E&&(E.bind(),E.setVertexAttribPointers(N,i,g)),D&&(D.bind(),D.setVertexAttribPointers(N,i,g)),k.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Bf=(y,i,u,p,f)=>({u_matrix:y,u_texture:0,u_ele_delta:i,u_fog_matrix:u,u_fog_color:p?p.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(f):0,u_horizon_color:p?p.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function $l(y){let i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;let p=y[u].split(" ");i.push(p.pop())}return i}class Vf{constructor(i,u,p,f,g,S){let E=i.gl;this.program=E.createProgram();let D=$l(u.staticAttributes),P=p?p.getBinderAttributes():[],k=D.concat(P),N=Qs.prelude.staticUniforms?$l(Qs.prelude.staticUniforms):[],V=u.staticUniforms?$l(u.staticUniforms):[],H=p?p.getBinderUniforms():[],W=N.concat(V).concat(H),J=[];for(let _e of W)J.indexOf(_e)<0&&J.push(_e);let ne=p?p.defines():[];g&&ne.push("#define OVERDRAW_INSPECTOR;"),S&&ne.push("#define TERRAIN3D;");let re=ne.concat(Qs.prelude.fragmentSource,u.fragmentSource).join(`
`),ae=ne.concat(Qs.prelude.vertexSource,u.vertexSource).join(`
`),K=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(K,re),E.compileShader(K),!E.getShaderParameter(K,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(K)}`);E.attachShader(this.program,K);let ue=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ue,ae),E.compileShader(ue),!E.getShaderParameter(ue,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(ue)}`);E.attachShader(this.program,ue),this.attributes={};let he={};this.numAttributes=k.length;for(let _e=0;_e<this.numAttributes;_e++)k[_e]&&(E.bindAttribLocation(this.program,_e,k[_e]),this.attributes[k[_e]]=_e);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(ue),E.deleteShader(K);for(let _e=0;_e<J.length;_e++){let Pe=J[_e];if(Pe&&!he[Pe]){let Le=E.getUniformLocation(this.program,Pe);Le&&(he[Pe]=Le)}}this.fixedUniforms=f(i,he),this.terrainUniforms=((_e,Pe)=>({u_depth:new s.aH(_e,Pe.u_depth),u_terrain:new s.aH(_e,Pe.u_terrain),u_terrain_dim:new s.aI(_e,Pe.u_terrain_dim),u_terrain_matrix:new s.aJ(_e,Pe.u_terrain_matrix),u_terrain_unpack:new s.aK(_e,Pe.u_terrain_unpack),u_terrain_exaggeration:new s.aI(_e,Pe.u_terrain_exaggeration)}))(i,he),this.binderUniforms=p?p.getUniforms(i,he):[]}draw(i,u,p,f,g,S,E,D,P,k,N,V,H,W,J,ne,re,ae){let K=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(f),i.setColorMode(g),i.setCullFace(S),D){i.activeTexture.set(K.TEXTURE2),K.bindTexture(K.TEXTURE_2D,D.depthTexture),i.activeTexture.set(K.TEXTURE3),K.bindTexture(K.TEXTURE_2D,D.texture);for(let he in this.terrainUniforms)this.terrainUniforms[he].set(D[he])}for(let he in this.fixedUniforms)this.fixedUniforms[he].set(E[he]);J&&J.setUniforms(i,this.binderUniforms,H,{zoom:W});let ue=0;switch(u){case K.LINES:ue=2;break;case K.TRIANGLES:ue=3;break;case K.LINE_STRIP:ue=1}for(let he of V.get()){let _e=he.vaos||(he.vaos={});(_e[P]||(_e[P]=new Uf)).bind(i,this,k,J?J.getPaintVertexBuffers():[],N,he.vertexOffset,ne,re,ae),K.drawElements(u,he.primitiveLength*ue,K.UNSIGNED_SHORT,he.primitiveOffset*ue*2)}}}function eh(y,i,u){let p=1/Yt(u,1,i.transform.tileZoom),f=Math.pow(2,u.tileID.overscaledZ),g=u.tileSize*Math.pow(2,i.transform.tileZoom)/f,S=g*(u.tileID.canonical.x+u.tileID.wrap*f),E=g*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[S>>16,E>>16],u_pixel_coord_lower:[65535&S,65535&E]}}let xu=(y,i,u,p)=>{let f=i.style.light,g=f.properties.get("position"),S=[g.x,g.y,g.z],E=function(){var P=new s.A(9);return s.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();f.properties.get("anchor")==="viewport"&&function(P,k){var N=Math.sin(k),V=Math.cos(k);P[0]=V,P[1]=N,P[2]=0,P[3]=-N,P[4]=V,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(E,-i.transform.angle),function(P,k,N){var V=k[0],H=k[1],W=k[2];P[0]=V*N[0]+H*N[3]+W*N[6],P[1]=V*N[1]+H*N[4]+W*N[7],P[2]=V*N[2]+H*N[5]+W*N[8]}(S,S,E);let D=f.properties.get("color");return{u_matrix:y,u_lightpos:S,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[D.r,D.g,D.b],u_vertical_gradient:+u,u_opacity:p}},th=(y,i,u,p,f,g,S)=>s.e(xu(y,i,u,p),eh(g,i,S),{u_height_factor:-Math.pow(2,f.overscaledZ)/S.tileSize/8}),ql=y=>({u_matrix:y}),cv=(y,i,u,p)=>s.e(ql(y),eh(u,i,p)),Jb=(y,i)=>({u_matrix:y,u_world:i}),uv=(y,i,u,p,f)=>s.e(cv(y,i,u,p),{u_world:f}),Qb=(y,i,u,p)=>{let f=y.transform,g,S;if(p.paint.get("circle-pitch-alignment")==="map"){let E=Yt(u,1,f.zoom);g=!0,S=[E,E]}else g=!1,S=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:S}},Ya=(y,i,u)=>({u_matrix:y,u_inv_matrix:i,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}),wu=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),Ei=y=>({u_matrix:y}),Ti=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:Yt(i,1,u),u_intensity:p}),nh=(y,i,u,p)=>{let f=s.H();s.aP(f,0,y.width,y.height,0,0,1);let g=y.context.gl;return{u_matrix:f,u_world:[g.drawingBufferWidth,g.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:i.paint.get("heatmap-opacity")}};function rh(y,i){let u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new s.Z(0,p/u).toLngLat().lat,new s.Z(0,(p+1)/u).toLngLat().lat]}let ih=(y,i,u,p)=>{let f=y.transform;return{u_matrix:pv(y,i,u,p),u_ratio:1/Yt(i,1,f.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},dv=(y,i,u,p,f)=>s.e(ih(y,i,u,f),{u_image:0,u_image_height:p}),Hl=(y,i,u,p,f)=>{let g=y.transform,S=hv(i,g);return{u_matrix:pv(y,i,u,f),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Yt(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},eS=(y,i,u,p,f,g)=>{let S=y.lineAtlas,E=hv(i,y.transform),D=u.layout.get("line-cap")==="round",P=S.getDash(p.from,D),k=S.getDash(p.to,D),N=P.width*f.fromScale,V=k.width*f.toScale;return s.e(ih(y,i,u,g),{u_patternscale_a:[E/N,-P.height/2],u_patternscale_b:[E/V,-k.height/2],u_sdfgamma:S.width/(256*Math.min(N,V)*y.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:k.y,u_mix:f.t})};function hv(y,i){return 1/Yt(y,1,i.tileZoom)}function pv(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}let tS=(y,i,u,p,f)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(S=f.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(g=f.paint.get("raster-contrast"),g>0?1/(1-g):1+g),u_spin_weights:nS(f.paint.get("raster-hue-rotate"))};var g,S};function nS(y){y*=Math.PI/180;let i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}let fv=(y,i,u,p,f,g,S,E,D,P,k,N,V,H)=>{let W=S.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:W.width/W.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:D,u_coord_matrix:P,u_is_text:+N,u_pitch_with_map:+p,u_is_along_line:f,u_is_variable_anchor:g,u_texsize:V,u_texture:0,u_translation:k,u_pitched_scale:H}},bu=(y,i,u,p,f,g,S,E,D,P,k,N,V,H,W)=>{let J=S.transform;return s.e(fv(y,i,u,p,f,g,S,E,D,P,k,N,V,W),{u_gamma_scale:p?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+H})},jf=(y,i,u,p,f,g,S,E,D,P,k,N,V,H)=>s.e(bu(y,i,u,p,f,g,S,E,D,P,k,!0,N,!0,H),{u_texsize_icon:V,u_texture_icon:1}),oh=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),$f=(y,i,u,p,f,g)=>s.e(function(S,E,D,P){let k=D.imageManager.getPattern(S.from.toString()),N=D.imageManager.getPattern(S.to.toString()),{width:V,height:H}=D.imageManager.getPixelSize(),W=Math.pow(2,P.tileID.overscaledZ),J=P.tileSize*Math.pow(2,D.transform.tileZoom)/W,ne=J*(P.tileID.canonical.x+P.tileID.wrap*W),re=J*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[V,H],u_mix:E.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Yt(P,1,D.transform.tileZoom),u_pixel_coord_upper:[ne>>16,re>>16],u_pixel_coord_lower:[65535&ne,65535&re]}}(p,g,u,f),{u_matrix:y,u_opacity:i}),qf={fillExtrusion:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_lightpos:new s.aN(y,i.u_lightpos),u_lightintensity:new s.aI(y,i.u_lightintensity),u_lightcolor:new s.aN(y,i.u_lightcolor),u_vertical_gradient:new s.aI(y,i.u_vertical_gradient),u_opacity:new s.aI(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_lightpos:new s.aN(y,i.u_lightpos),u_lightintensity:new s.aI(y,i.u_lightintensity),u_lightcolor:new s.aN(y,i.u_lightcolor),u_vertical_gradient:new s.aI(y,i.u_vertical_gradient),u_height_factor:new s.aI(y,i.u_height_factor),u_image:new s.aH(y,i.u_image),u_texsize:new s.aO(y,i.u_texsize),u_pixel_coord_upper:new s.aO(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,i.u_pixel_coord_lower),u_scale:new s.aN(y,i.u_scale),u_fade:new s.aI(y,i.u_fade),u_opacity:new s.aI(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_image:new s.aH(y,i.u_image),u_texsize:new s.aO(y,i.u_texsize),u_pixel_coord_upper:new s.aO(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,i.u_pixel_coord_lower),u_scale:new s.aN(y,i.u_scale),u_fade:new s.aI(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_world:new s.aO(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_world:new s.aO(y,i.u_world),u_image:new s.aH(y,i.u_image),u_texsize:new s.aO(y,i.u_texsize),u_pixel_coord_upper:new s.aO(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,i.u_pixel_coord_lower),u_scale:new s.aN(y,i.u_scale),u_fade:new s.aI(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new s.aI(y,i.u_camera_to_center_distance),u_scale_with_map:new s.aH(y,i.u_scale_with_map),u_pitch_with_map:new s.aH(y,i.u_pitch_with_map),u_extrude_scale:new s.aO(y,i.u_extrude_scale),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_matrix:new s.aJ(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_pixel_extrude_scale:new s.aO(y,i.u_pixel_extrude_scale)}),collisionCircle:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_inv_matrix:new s.aJ(y,i.u_inv_matrix),u_camera_to_center_distance:new s.aI(y,i.u_camera_to_center_distance),u_viewport_size:new s.aO(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new s.aL(y,i.u_color),u_matrix:new s.aJ(y,i.u_matrix),u_overlay:new s.aH(y,i.u_overlay),u_overlay_scale:new s.aI(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new s.aI(y,i.u_extrude_scale),u_intensity:new s.aI(y,i.u_intensity),u_matrix:new s.aJ(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_world:new s.aO(y,i.u_world),u_image:new s.aH(y,i.u_image),u_color_ramp:new s.aH(y,i.u_color_ramp),u_opacity:new s.aI(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_image:new s.aH(y,i.u_image),u_latrange:new s.aO(y,i.u_latrange),u_light:new s.aO(y,i.u_light),u_shadow:new s.aL(y,i.u_shadow),u_highlight:new s.aL(y,i.u_highlight),u_accent:new s.aL(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_image:new s.aH(y,i.u_image),u_dimension:new s.aO(y,i.u_dimension),u_zoom:new s.aI(y,i.u_zoom),u_unpack:new s.aK(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_ratio:new s.aI(y,i.u_ratio),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_ratio:new s.aI(y,i.u_ratio),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,i.u_units_to_pixels),u_image:new s.aH(y,i.u_image),u_image_height:new s.aI(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_texsize:new s.aO(y,i.u_texsize),u_ratio:new s.aI(y,i.u_ratio),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_image:new s.aH(y,i.u_image),u_units_to_pixels:new s.aO(y,i.u_units_to_pixels),u_scale:new s.aN(y,i.u_scale),u_fade:new s.aI(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_ratio:new s.aI(y,i.u_ratio),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_units_to_pixels:new s.aO(y,i.u_units_to_pixels),u_patternscale_a:new s.aO(y,i.u_patternscale_a),u_patternscale_b:new s.aO(y,i.u_patternscale_b),u_sdfgamma:new s.aI(y,i.u_sdfgamma),u_image:new s.aH(y,i.u_image),u_tex_y_a:new s.aI(y,i.u_tex_y_a),u_tex_y_b:new s.aI(y,i.u_tex_y_b),u_mix:new s.aI(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_tl_parent:new s.aO(y,i.u_tl_parent),u_scale_parent:new s.aI(y,i.u_scale_parent),u_buffer_scale:new s.aI(y,i.u_buffer_scale),u_fade_t:new s.aI(y,i.u_fade_t),u_opacity:new s.aI(y,i.u_opacity),u_image0:new s.aH(y,i.u_image0),u_image1:new s.aH(y,i.u_image1),u_brightness_low:new s.aI(y,i.u_brightness_low),u_brightness_high:new s.aI(y,i.u_brightness_high),u_saturation_factor:new s.aI(y,i.u_saturation_factor),u_contrast_factor:new s.aI(y,i.u_contrast_factor),u_spin_weights:new s.aN(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new s.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,i.u_is_size_feature_constant),u_size_t:new s.aI(y,i.u_size_t),u_size:new s.aI(y,i.u_size),u_camera_to_center_distance:new s.aI(y,i.u_camera_to_center_distance),u_pitch:new s.aI(y,i.u_pitch),u_rotate_symbol:new s.aH(y,i.u_rotate_symbol),u_aspect_ratio:new s.aI(y,i.u_aspect_ratio),u_fade_change:new s.aI(y,i.u_fade_change),u_matrix:new s.aJ(y,i.u_matrix),u_label_plane_matrix:new s.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,i.u_coord_matrix),u_is_text:new s.aH(y,i.u_is_text),u_pitch_with_map:new s.aH(y,i.u_pitch_with_map),u_is_along_line:new s.aH(y,i.u_is_along_line),u_is_variable_anchor:new s.aH(y,i.u_is_variable_anchor),u_texsize:new s.aO(y,i.u_texsize),u_texture:new s.aH(y,i.u_texture),u_translation:new s.aO(y,i.u_translation),u_pitched_scale:new s.aI(y,i.u_pitched_scale)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new s.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,i.u_is_size_feature_constant),u_size_t:new s.aI(y,i.u_size_t),u_size:new s.aI(y,i.u_size),u_camera_to_center_distance:new s.aI(y,i.u_camera_to_center_distance),u_pitch:new s.aI(y,i.u_pitch),u_rotate_symbol:new s.aH(y,i.u_rotate_symbol),u_aspect_ratio:new s.aI(y,i.u_aspect_ratio),u_fade_change:new s.aI(y,i.u_fade_change),u_matrix:new s.aJ(y,i.u_matrix),u_label_plane_matrix:new s.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,i.u_coord_matrix),u_is_text:new s.aH(y,i.u_is_text),u_pitch_with_map:new s.aH(y,i.u_pitch_with_map),u_is_along_line:new s.aH(y,i.u_is_along_line),u_is_variable_anchor:new s.aH(y,i.u_is_variable_anchor),u_texsize:new s.aO(y,i.u_texsize),u_texture:new s.aH(y,i.u_texture),u_gamma_scale:new s.aI(y,i.u_gamma_scale),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_is_halo:new s.aH(y,i.u_is_halo),u_translation:new s.aO(y,i.u_translation),u_pitched_scale:new s.aI(y,i.u_pitched_scale)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new s.aH(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(y,i.u_is_size_feature_constant),u_size_t:new s.aI(y,i.u_size_t),u_size:new s.aI(y,i.u_size),u_camera_to_center_distance:new s.aI(y,i.u_camera_to_center_distance),u_pitch:new s.aI(y,i.u_pitch),u_rotate_symbol:new s.aH(y,i.u_rotate_symbol),u_aspect_ratio:new s.aI(y,i.u_aspect_ratio),u_fade_change:new s.aI(y,i.u_fade_change),u_matrix:new s.aJ(y,i.u_matrix),u_label_plane_matrix:new s.aJ(y,i.u_label_plane_matrix),u_coord_matrix:new s.aJ(y,i.u_coord_matrix),u_is_text:new s.aH(y,i.u_is_text),u_pitch_with_map:new s.aH(y,i.u_pitch_with_map),u_is_along_line:new s.aH(y,i.u_is_along_line),u_is_variable_anchor:new s.aH(y,i.u_is_variable_anchor),u_texsize:new s.aO(y,i.u_texsize),u_texsize_icon:new s.aO(y,i.u_texsize_icon),u_texture:new s.aH(y,i.u_texture),u_texture_icon:new s.aH(y,i.u_texture_icon),u_gamma_scale:new s.aI(y,i.u_gamma_scale),u_device_pixel_ratio:new s.aI(y,i.u_device_pixel_ratio),u_is_halo:new s.aH(y,i.u_is_halo),u_translation:new s.aO(y,i.u_translation),u_pitched_scale:new s.aI(y,i.u_pitched_scale)}),background:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_opacity:new s.aI(y,i.u_opacity),u_color:new s.aL(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_opacity:new s.aI(y,i.u_opacity),u_image:new s.aH(y,i.u_image),u_pattern_tl_a:new s.aO(y,i.u_pattern_tl_a),u_pattern_br_a:new s.aO(y,i.u_pattern_br_a),u_pattern_tl_b:new s.aO(y,i.u_pattern_tl_b),u_pattern_br_b:new s.aO(y,i.u_pattern_br_b),u_texsize:new s.aO(y,i.u_texsize),u_mix:new s.aI(y,i.u_mix),u_pattern_size_a:new s.aO(y,i.u_pattern_size_a),u_pattern_size_b:new s.aO(y,i.u_pattern_size_b),u_scale_a:new s.aI(y,i.u_scale_a),u_scale_b:new s.aI(y,i.u_scale_b),u_pixel_coord_upper:new s.aO(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_texture:new s.aH(y,i.u_texture),u_ele_delta:new s.aI(y,i.u_ele_delta),u_fog_matrix:new s.aJ(y,i.u_fog_matrix),u_fog_color:new s.aL(y,i.u_fog_color),u_fog_ground_blend:new s.aI(y,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(y,i.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(y,i.u_horizon_color),u_horizon_fog_blend:new s.aI(y,i.u_horizon_fog_blend)}),terrainDepth:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_ele_delta:new s.aI(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new s.aJ(y,i.u_matrix),u_texture:new s.aH(y,i.u_texture),u_terrain_coords_id:new s.aI(y,i.u_terrain_coords_id),u_ele_delta:new s.aI(y,i.u_ele_delta)}),sky:(y,i)=>({u_sky_color:new s.aL(y,i.u_sky_color),u_horizon_color:new s.aL(y,i.u_horizon_color),u_horizon:new s.aI(y,i.u_horizon),u_sky_horizon_blend:new s.aI(y,i.u_sky_horizon_blend)})};class rs{constructor(i,u,p){this.context=i;let f=i.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){let u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let rS={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Hf{constructor(i,u,p,f){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=f,this.context=i;let g=i.gl;this.buffer=g.createBuffer(),i.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);let u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){let f=u.attributes[this.attributes[p].name];f!==void 0&&i.enableVertexAttribArray(f)}}setVertexAttribPointers(i,u,p){for(let f=0;f<this.attributes.length;f++){let g=this.attributes[f],S=u.attributes[g.name];S!==void 0&&i.vertexAttribPointer(S,g.components,i[rS[g.type]],!1,this.itemSize,g.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Xa=new WeakMap;function ea(y){var i;if(Xa.has(y))return Xa.get(y);{let u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Xa.set(y,u),u}}class Sn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class sh extends Sn{getDefault(){return s.aM.transparent}set(i){let u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class iS extends Sn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Gl extends Sn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class oS extends Sn{getDefault(){return[!0,!0,!0,!0]}set(i){let u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class mv extends Sn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class sS extends Sn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class gv extends Sn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){let u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Gf extends Sn{getDefault(){let i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){let u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class yv extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class vv extends Sn{getDefault(){return[0,1]}set(i){let u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class _v extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class xv extends Sn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ja extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class wv extends Sn{getDefault(){let i=this.gl;return[i.ONE,i.ZERO]}set(i){let u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class aS extends Sn{getDefault(){return s.aM.transparent}set(i){let u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class bv extends Sn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Su extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class lS extends Sn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class ah extends Sn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class cS extends Sn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class uS extends Sn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Sv extends Sn{getDefault(){let i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){let u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Cv extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Iv extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Wf extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ev extends Sn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class lh extends Sn{getDefault(){return null}set(i){let u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ds extends Sn{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;let p=this.gl;ea(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Zf extends Sn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Kf extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Yf extends Sn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;let u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ch extends Sn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Xf extends ch{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Qa extends ch{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Jf extends ch{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class dS{constructor(i,u,p,f,g){this.context=i,this.width=u,this.height=p;let S=i.gl,E=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Xf(i,E),f)this.depthAttachment=g?new Jf(i,E):new Qa(i,E);else if(g)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){let p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class mr{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}mr.Replace=[1,0],mr.disabled=new mr(mr.Replace,s.aM.transparent,[!1,!1,!1,!1]),mr.unblended=new mr(mr.Replace,s.aM.transparent,[!0,!0,!0,!0]),mr.alphaBlended=new mr([1,771],s.aM.transparent,[!0,!0,!0,!0]);class hS{constructor(i){var u,p;if(this.gl=i,this.clearColor=new sh(this),this.clearDepth=new iS(this),this.clearStencil=new Gl(this),this.colorMask=new oS(this),this.depthMask=new mv(this),this.stencilMask=new sS(this),this.stencilFunc=new gv(this),this.stencilOp=new Gf(this),this.stencilTest=new yv(this),this.depthRange=new vv(this),this.depthTest=new _v(this),this.depthFunc=new xv(this),this.blend=new Ja(this),this.blendFunc=new wv(this),this.blendColor=new aS(this),this.blendEquation=new bv(this),this.cullFace=new Su(this),this.cullFaceSide=new lS(this),this.frontFace=new ah(this),this.program=new cS(this),this.activeTexture=new uS(this),this.viewport=new Sv(this),this.bindFramebuffer=new Cv(this),this.bindRenderbuffer=new Iv(this),this.bindTexture=new Wf(this),this.bindVertexBuffer=new Ev(this),this.bindElementBuffer=new lh(this),this.bindVertexArray=new Ds(this),this.pixelStoreUnpack=new Zf(this),this.pixelStoreUnpackPremultiplyAlpha=new Kf(this),this.pixelStoreUnpackFlipY=new Yf(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ea(i)){this.HALF_FLOAT=i.HALF_FLOAT;let f=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:f?.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:f?.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");let f=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=f?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new rs(this,i,u)}createVertexBuffer(i,u,p){return new Hf(this,i,u,p)}createRenderbuffer(i,u,p){let f=this.gl,g=f.createRenderbuffer();return this.bindRenderbuffer.set(g),f.renderbufferStorage(f.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),g}createFramebuffer(i,u,p,f){return new dS(this,i,u,p,f)}clear({color:i,depth:u,stencil:p}){let f=this.gl,g=0;i&&(g|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(g|=f.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),f.clear(g)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){s.aE(i.blendFunction,mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ea(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return ea(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Gt{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}Gt.ReadOnly=!1,Gt.ReadWrite=!0,Gt.disabled=new Gt(519,Gt.ReadOnly,[0,1]);let uh=7680;class Yn{constructor(i,u,p,f,g,S){this.test=i,this.ref=u,this.mask=p,this.fail=f,this.depthFail=g,this.pass=S}}Yn.disabled=new Yn({func:519,mask:0},0,0,uh,uh,uh);class Fn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let el;function Cu(y,i,u,p,f){let g=y.context,S=g.gl,E=y.useProgram("collisionBox"),D=[],P=0,k=0;for(let re=0;re<p.length;re++){let ae=p[re],K=i.getTile(ae).getBucket(u);if(!K)continue;let ue=f?K.textCollisionBox:K.iconCollisionBox,he=K.collisionCircleArray;if(he.length>0){let _e=s.H();s.aQ(_e,K.placementInvProjMatrix,y.transform.glCoordMatrix),s.aQ(_e,_e,K.placementViewportMatrix),D.push({circleArray:he,circleOffset:k,transform:ae.posMatrix,invTransform:_e,coord:ae}),P+=he.length/4,k=P}ue&&E.draw(g,S.LINES,Gt.disabled,Yn.disabled,y.colorModeForRenderPass(),Fn.disabled,{u_matrix:ae.posMatrix,u_pixel_extrude_scale:[1/(N=y.transform).width,1/N.height]},y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae),u.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,null,y.transform.zoom,null,null,ue.collisionVertexBuffer)}var N;if(!f||!D.length)return;let V=y.useProgram("collisionCircle"),H=new s.aR;H.resize(4*P),H._trim();let W=0;for(let re of D)for(let ae=0;ae<re.circleArray.length/4;ae++){let K=4*ae,ue=re.circleArray[K+0],he=re.circleArray[K+1],_e=re.circleArray[K+2],Pe=re.circleArray[K+3];H.emplace(W++,ue,he,_e,Pe,0),H.emplace(W++,ue,he,_e,Pe,1),H.emplace(W++,ue,he,_e,Pe,2),H.emplace(W++,ue,he,_e,Pe,3)}(!el||el.length<2*P)&&(el=function(re){let ae=2*re,K=new s.aT;K.resize(ae),K._trim();for(let ue=0;ue<ae;ue++){let he=6*ue;K.uint16[he+0]=4*ue+0,K.uint16[he+1]=4*ue+1,K.uint16[he+2]=4*ue+2,K.uint16[he+3]=4*ue+2,K.uint16[he+4]=4*ue+3,K.uint16[he+5]=4*ue+0}return K}(P));let J=g.createIndexBuffer(el,!0),ne=g.createVertexBuffer(H,s.aS.members,!0);for(let re of D){let ae=Ya(re.transform,re.invTransform,y.transform);V.draw(g,S.TRIANGLES,Gt.disabled,Yn.disabled,y.colorModeForRenderPass(),Fn.disabled,ae,y.style.map.terrain&&y.style.map.terrain.getTerrainData(re.coord),u.id,ne,J,s.a0.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,y.transform.zoom,null,null,null)}ne.destroy(),J.destroy()}Fn.disabled=new Fn(!1,1029,2305),Fn.backCCW=new Fn(!0,1029,2305);let Iu=s.an(new Float32Array(16));function Qf(y,i,u,p,f,g){let{horizontalAlign:S,verticalAlign:E}=s.au(y);return new s.P((-(S-.5)*i/f+p[0])*g,(-(E-.5)*u/f+p[1])*g)}function tl(y,i,u,p,f,g){let S=i.tileAnchorPoint.add(new s.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let E=p.mult(g);u||(E=E.rotate(-f));let D=S.add(E);return Q(D.x,D.y,i.labelPlaneMatrix,i.getElevation).point}if(u){let E=Ee(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(y),D=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return y.add(p.rotate(D))}return y.add(p)}function Wl(y,i,u,p,f,g,S,E,D,P,k,N,V,H){let W=y.text.placedSymbolArray,J=y.text.dynamicLayoutVertexArray,ne=y.icon.dynamicLayoutVertexArray,re={};J.clear();for(let ae=0;ae<W.length;ae++){let K=W.get(ae),ue=K.hidden||!K.crossTileID||y.allowVerticalPlacement&&!K.placedOrientation?null:p[K.crossTileID];if(ue){let he=new s.P(K.anchorX,K.anchorY),_e={getElevation:H,width:f.width,height:f.height,labelPlaneMatrix:g,lineVertexArray:null,pitchWithMap:u,projection:k,projectionCache:null,tileAnchorPoint:he,translation:N,unwrappedTileID:V},Pe=u?Q(he.x,he.y,S,H):Ee(he.x,he.y,_e),Le=z(f.cameraToCenterDistance,Pe.signedDistanceFromCamera),We=s.ai(y.textSizeData,D,K)*Le/s.ap;u&&(We*=y.tilePixelRatio/E);let{width:Je,height:je,anchor:Be,textOffset:at,textBoxScale:Dt}=ue,qe=Qf(Be,Je,je,at,Dt,We),Ke=k.getPitchedTextCorrection(f,he.add(new s.P(N[0],N[1])),V),Et=tl(Pe.point,_e,i,qe,f.angle,Ke),Qn=y.allowVerticalPlacement&&K.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Vt=0;Vt<K.numGlyphs;Vt++)s.aj(J,Et,Qn);P&&K.associatedIconIndex>=0&&(re[K.associatedIconIndex]={shiftedAnchor:Et,angle:Qn})}else yt(K.numGlyphs,J)}if(P){ne.clear();let ae=y.icon.placedSymbolArray;for(let K=0;K<ae.length;K++){let ue=ae.get(K);if(ue.hidden)yt(ue.numGlyphs,ne);else{let he=re[K];if(he)for(let _e=0;_e<ue.numGlyphs;_e++)s.aj(ne,he.shiftedAnchor,he.angle);else yt(ue.numGlyphs,ne)}}y.icon.dynamicLayoutVertexBuffer.updateData(ne)}y.text.dynamicLayoutVertexBuffer.updateData(J)}function oo(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function em(y,i,u,p,f,g,S,E,D,P,k,N){let V=y.context,H=V.gl,W=y.transform,J=Za(),ne=E==="map",re=D==="map",ae=E!=="viewport"&&u.layout.get("symbol-placement")!=="point",K=ne&&!re&&!ae,ue=!re&&ae,he=!u.layout.get("symbol-sort-key").isConstant(),_e=!1,Pe=y.depthModeForSublayer(0,Gt.ReadOnly),Le=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),We=[],Je=J.getCircleRadiusCorrection(W);for(let je of p){let Be=i.getTile(je),at=Be.getBucket(u);if(!at)continue;let Dt=f?at.text:at.icon;if(!Dt||!Dt.segments.get().length||!Dt.hasVisibleVertices)continue;let qe=Dt.programConfigurations.get(u.id),Ke=f||at.sdfIcons,Et=f?at.textSizeData:at.iconSizeData,Qn=re||W.pitch!==0,Vt=y.useProgram(oo(Ke,f,at),qe),Xt=s.ag(Et,W.zoom),er=y.style.map.terrain&&y.style.map.terrain.getTerrainData(je),ii,Po,tr,Di,vi=[0,0],oi=null;if(f)Po=Be.glyphAtlasTexture,tr=H.LINEAR,ii=Be.glyphAtlasTexture.size,at.iconsInText&&(vi=Be.imageAtlasTexture.size,oi=Be.imageAtlasTexture,Di=Qn||y.options.rotating||y.options.zooming||Et.kind==="composite"||Et.kind==="camera"?H.LINEAR:H.NEAREST);else{let rn=u.layout.get("icon-size").constantOr(0)!==1||at.iconsNeedLinear;Po=Be.imageAtlasTexture,tr=Ke||y.options.rotating||y.options.zooming||rn||Qn?H.LINEAR:H.NEAREST,ii=Be.imageAtlasTexture.size}let _i=Yt(Be,1,y.transform.zoom),ss=ue?je.posMatrix:Iu,cc=Js(ss,re,ne,y.transform,_i),Ah=ns(ss,re,ne,y.transform,_i),uc=ns(je.posMatrix,re,ne,y.transform,_i),lo=J.translatePosition(y.transform,Be,g,S),Mh=Le&&at.hasTextData(),Im=u.layout.get("icon-text-fit")!=="none"&&Mh&&at.hasIconData();if(ae){let rn=y.style.map.terrain?(dc,hc)=>y.style.map.terrain.getElevation(je,dc,hc):null,sl=u.layout.get("text-rotation-alignment")==="map";G(at,je.posMatrix,y,f,cc,uc,re,P,sl,J,je.toUnwrapped(),W.width,W.height,lo,rn)}let co=je.posMatrix,uo=f&&Le||Im,ta=ae||uo?Iu:cc,Ro=Ah,Xr=Ke&&u.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0,si;si=Ke?at.iconsInText?jf(Et.kind,Xt,K,re,ae,uo,y,co,ta,Ro,lo,ii,vi,Je):bu(Et.kind,Xt,K,re,ae,uo,y,co,ta,Ro,lo,f,ii,!0,Je):fv(Et.kind,Xt,K,re,ae,uo,y,co,ta,Ro,lo,f,ii,Je);let Gi={program:Vt,buffers:Dt,uniformValues:si,atlasTexture:Po,atlasTextureIcon:oi,atlasInterpolation:tr,atlasInterpolationIcon:Di,isSDF:Ke,hasHalo:Xr};if(he&&at.canOverlap){_e=!0;let rn=Dt.segments.get();for(let sl of rn)We.push({segments:new s.a0([sl]),sortKey:sl.sortKey,state:Gi,terrainData:er})}else We.push({segments:Dt.segments,sortKey:0,state:Gi,terrainData:er})}_e&&We.sort((je,Be)=>je.sortKey-Be.sortKey);for(let je of We){let Be=je.state;if(V.activeTexture.set(H.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,H.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(V.activeTexture.set(H.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),Be.isSDF){let at=Be.uniformValues;Be.hasHalo&&(at.u_is_halo=1,tm(Be.buffers,je.segments,u,y,Be.program,Pe,k,N,at,je.terrainData)),at.u_is_halo=0}tm(Be.buffers,je.segments,u,y,Be.program,Pe,k,N,Be.uniformValues,je.terrainData)}}function tm(y,i,u,p,f,g,S,E,D,P){let k=p.context;f.draw(k,k.gl.TRIANGLES,g,S,E,Fn.disabled,D,P,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function nm(y,i,u,p){let f=y.context,g=f.gl,S=Yn.disabled,E=new mr([g.ONE,g.ONE],s.aM.transparent,[!0,!0,!0,!0]),D=i.getBucket(u);if(!D)return;let P=p.key,k=u.heatmapFbos.get(P);k||(k=Eu(f,i.tileSize,i.tileSize),u.heatmapFbos.set(P,k)),f.bindFramebuffer.set(k.framebuffer),f.viewport.set([0,0,i.tileSize,i.tileSize]),f.clear({color:s.aM.transparent});let N=D.programConfigurations.get(u.id),V=y.useProgram("heatmap",N),H=y.style.map.terrain.getTerrainData(p);V.draw(f,g.TRIANGLES,Gt.disabled,S,E,Fn.disabled,Ti(p.posMatrix,i,y.transform.zoom,u.paint.get("heatmap-intensity")),H,u.id,D.layoutVertexBuffer,D.indexBuffer,D.segments,u.paint,y.transform.zoom,N)}function nl(y,i,u){let p=y.context,f=p.gl;p.setColorMode(y.colorModeForRenderPass());let g=Tu(p,i),S=u.key,E=i.heatmapFbos.get(S);E&&(p.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,E.colorAttachment.get()),p.activeTexture.set(f.TEXTURE1),g.bind(f.LINEAR,f.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(p,f.TRIANGLES,Gt.disabled,Yn.disabled,y.colorModeForRenderPass(),Fn.disabled,nh(y,i,0,1),null,i.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments,i.paint,y.transform.zoom),E.destroy(),i.heatmapFbos.delete(S))}function Eu(y,i,u){var p,f;let g=y.gl,S=g.createTexture();g.bindTexture(g.TEXTURE_2D,S),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);let E=(p=y.HALF_FLOAT)!==null&&p!==void 0?p:g.UNSIGNED_BYTE,D=(f=y.RGBA16F)!==null&&f!==void 0?f:g.RGBA;g.texImage2D(g.TEXTURE_2D,0,D,i,u,0,g.RGBA,E,null);let P=y.createFramebuffer(i,u,!1,!1);return P.colorAttachment.set(S),P}function Tu(y,i){return i.colorRampTexture||(i.colorRampTexture=new nt(y,i.colorRamp,y.gl.RGBA)),i.colorRampTexture}function Zl(y,i,u,p,f){if(!u||!p||!p.imageAtlas)return;let g=p.imageAtlas.patternPositions,S=g[u.to.toString()],E=g[u.from.toString()];if(!S&&E&&(S=E),!E&&S&&(E=S),!S||!E){let D=f.getPaintProperty(i);S=g[D],E=g[D]}S&&E&&y.setConstantPatternPositions(S,E)}function Du(y,i,u,p,f,g,S){let E=y.context.gl,D="fill-pattern",P=u.paint.get(D),k=P&&P.constantOr(1),N=u.getCrossfadeParameters(),V,H,W,J,ne;S?(H=k&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=E.LINES):(H=k?"fillPattern":"fill",V=E.TRIANGLES);let re=P.constantOr(null);for(let ae of p){let K=i.getTile(ae);if(k&&!K.patternsLoaded())continue;let ue=K.getBucket(u);if(!ue)continue;let he=ue.programConfigurations.get(u.id),_e=y.useProgram(H,he),Pe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ae);k&&(y.context.activeTexture.set(E.TEXTURE0),K.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),he.updatePaintBuffers(N)),Zl(he,D,re,K,u);let Le=Pe?ae:null,We=y.translatePosMatrix(Le?Le.posMatrix:ae.posMatrix,K,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){J=ue.indexBuffer2,ne=ue.segments2;let Je=[E.drawingBufferWidth,E.drawingBufferHeight];W=H==="fillOutlinePattern"&&k?uv(We,y,N,K,Je):Jb(We,Je)}else J=ue.indexBuffer,ne=ue.segments,W=k?cv(We,y,N,K):ql(We);_e.draw(y.context,V,f,y.stencilModeForClipping(ae),g,Fn.disabled,W,Pe,u.id,ue.layoutVertexBuffer,J,ne,u.paint,y.transform.zoom,he)}}function dh(y,i,u,p,f,g,S){let E=y.context,D=E.gl,P="fill-extrusion-pattern",k=u.paint.get(P),N=k.constantOr(1),V=u.getCrossfadeParameters(),H=u.paint.get("fill-extrusion-opacity"),W=k.constantOr(null);for(let J of p){let ne=i.getTile(J),re=ne.getBucket(u);if(!re)continue;let ae=y.style.map.terrain&&y.style.map.terrain.getTerrainData(J),K=re.programConfigurations.get(u.id),ue=y.useProgram(N?"fillExtrusionPattern":"fillExtrusion",K);N&&(y.context.activeTexture.set(D.TEXTURE0),ne.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),K.updatePaintBuffers(V)),Zl(K,P,W,ne,u);let he=y.translatePosMatrix(J.posMatrix,ne,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),_e=u.paint.get("fill-extrusion-vertical-gradient"),Pe=N?th(he,y,_e,H,J,V,ne):xu(he,y,_e,H);ue.draw(E,E.gl.TRIANGLES,f,g,S,Fn.backCCW,Pe,ae,u.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,u.paint,y.transform.zoom,K,y.style.map.terrain&&re.centroidVertexBuffer)}}function Kl(y,i,u,p,f,g,S){let E=y.context,D=E.gl,P=u.fbo;if(!P)return;let k=y.useProgram("hillshade"),N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);E.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,P.colorAttachment.get()),k.draw(E,D.TRIANGLES,f,g,S,Fn.disabled,((V,H,W,J)=>{let ne=W.paint.get("hillshade-shadow-color"),re=W.paint.get("hillshade-highlight-color"),ae=W.paint.get("hillshade-accent-color"),K=W.paint.get("hillshade-illumination-direction")*(Math.PI/180);W.paint.get("hillshade-illumination-anchor")==="viewport"&&(K-=V.transform.angle);let ue=!V.options.moving;return{u_matrix:J?J.posMatrix:V.transform.calculatePosMatrix(H.tileID.toUnwrapped(),ue),u_image:0,u_latrange:rh(0,H.tileID),u_light:[W.paint.get("hillshade-exaggeration"),K],u_shadow:ne,u_highlight:re,u_accent:ae}})(y,u,p,N?i:null),N,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Yl(y,i,u,p,f,g){let S=y.context,E=S.gl,D=i.dem;if(D&&D.data){let P=D.dim,k=D.stride,N=D.getPixels();if(S.activeTexture.set(E.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(k),i.demTexture){let H=i.demTexture;H.update(N,{premultiply:!1}),H.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else i.demTexture=new nt(S,N,E.RGBA,{premultiply:!1}),i.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);S.activeTexture.set(E.TEXTURE0);let V=i.fbo;if(!V){let H=new nt(S,{width:P,height:P,data:null},E.RGBA);H.bind(E.LINEAR,E.CLAMP_TO_EDGE),V=i.fbo=S.createFramebuffer(P,P,!0,!1),V.colorAttachment.set(H.texture)}S.bindFramebuffer.set(V.framebuffer),S.viewport.set([0,0,P,P]),y.useProgram("hillshadePrepare").draw(S,E.TRIANGLES,p,f,g,Fn.disabled,((H,W)=>{let J=W.stride,ne=s.H();return s.aP(ne,0,s.X,-s.X,0,0,1),s.J(ne,ne,[0,-s.X,0]),{u_matrix:ne,u_image:1,u_dimension:[J,J],u_zoom:H.overscaledZ,u_unpack:W.getUnpackVector()}})(i.tileID,D),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Tv(y,i,u,p,f,g){let S=p.paint.get("raster-fade-duration");if(!g&&S>0){let E=C.now(),D=(E-y.timeAdded)/S,P=i?(E-i.timeAdded)/S:-1,k=u.getSource(),N=f.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),V=!i||Math.abs(i.tileID.overscaledZ-N)>Math.abs(y.tileID.overscaledZ-N),H=V&&y.refreshedUponExpiration?1:s.ac(V?D:1-P,0,1);return y.refreshedUponExpiration&&D>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}let rm=new s.aM(1,0,0,1),mn=new s.aM(0,1,0,1),hh=new s.aM(0,0,1,1),pS=new s.aM(1,0,1,1),Dv=new s.aM(0,1,1,1);function Xl(y,i,u,p){ph(y,0,i+u/2,y.transform.width,u,p)}function Av(y,i,u,p){ph(y,i-u/2,0,u,y.transform.height,p)}function ph(y,i,u,p,f,g){let S=y.context,E=S.gl;E.enable(E.SCISSOR_TEST),E.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,f*y.pixelRatio),S.clear({color:g}),E.disable(E.SCISSOR_TEST)}function Mv(y,i,u){let p=y.context,f=p.gl,g=u.posMatrix,S=y.useProgram("debug"),E=Gt.disabled,D=Yn.disabled,P=y.colorModeForRenderPass(),k="$debug",N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(f.TEXTURE0);let V=i.getTileByID(u.key).latestRawTileData,H=Math.floor((V&&V.byteLength||0)/1024),W=i.getTile(u).tileSize,J=512/Math.min(W,512)*(u.overscaledZ/y.transform.zoom)*.5,ne=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ne+=` => ${u.overscaledZ}`),function(re,ae){re.initDebugOverlayCanvas();let K=re.debugOverlayCanvas,ue=re.context.gl,he=re.debugOverlayCanvas.getContext("2d");he.clearRect(0,0,K.width,K.height),he.shadowColor="white",he.shadowBlur=2,he.lineWidth=1.5,he.strokeStyle="white",he.textBaseline="top",he.font="bold 36px Open Sans, sans-serif",he.fillText(ae,5,5),he.strokeText(ae,5,5),re.debugOverlayTexture.update(K),re.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}(y,`${ne} ${H}kB`),S.draw(p,f.TRIANGLES,E,D,mr.alphaBlended,Fn.disabled,wu(g,s.aM.transparent,J),null,k,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),S.draw(p,f.LINE_STRIP,E,D,P,Fn.disabled,wu(g,s.aM.red),N,k,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Pv(y,i,u){let p=y.context,f=p.gl,g=y.colorModeForRenderPass(),S=new Gt(f.LEQUAL,Gt.ReadWrite,y.depthRangeFor3D),E=y.useProgram("terrain"),D=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(let P of u){let k=y.renderToTexture.getTexture(P),N=i.getTerrainData(P.tileID);p.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,k.texture);let V=y.transform.calculatePosMatrix(P.tileID.toUnwrapped()),H=i.getMeshFrameDelta(y.transform.zoom),W=y.transform.calculateFogMatrix(P.tileID.toUnwrapped()),J=Bf(V,H,W,y.style.sky,y.transform.pitch);E.draw(p,f.TRIANGLES,S,Yn.disabled,g,Fn.backCCW,J,N,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}}class fh{constructor(i,u,p){this.vertexBuffer=i,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class mh{constructor(i,u){this.context=new hS(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ct.maxUnderzooming+Ct.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zf}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let f of this.style._order)this.style._layers[f].resize()}setup(){let i=this.context,u=new s.aX;u.emplaceBack(0,0),u.emplaceBack(s.X,0),u.emplaceBack(0,s.X),u.emplaceBack(s.X,s.X),this.tileExtentBuffer=i.createVertexBuffer(u,Ka.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);let p=new s.aX;p.emplaceBack(0,0),p.emplaceBack(s.X,0),p.emplaceBack(0,s.X),p.emplaceBack(s.X,s.X),this.debugBuffer=i.createVertexBuffer(p,Ka.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);let f=new s.$;f.emplaceBack(0,0,0,0),f.emplaceBack(s.X,0,s.X,0),f.emplaceBack(0,s.X,0,s.X),f.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=i.createVertexBuffer(f,Ys.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);let g=new s.aX;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(g,Ka.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);let S=new s.aZ;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);let E=new s.aY;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(E);let D=this.context.gl;this.stencilClearMode=new Yn({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO)}clearStencil(){let i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let p=s.H();s.aP(p,0,this.width,this.height,0,0,1),s.K(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Gt.disabled,this.stencilClearMode,mr.disabled,Fn.disabled,Ei(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;let p=this.context,f=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(mr.disabled),p.setDepthMode(Gt.disabled);let g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let S of u){let E=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,D=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);g.draw(p,f.TRIANGLES,Gt.disabled,new Yn({func:f.ALWAYS,mask:0},E,255,f.KEEP,f.KEEP,f.REPLACE),mr.disabled,Fn.disabled,Ei(S.posMatrix),D,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let i=this.nextStencilID++,u=this.context.gl;return new Yn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){let u=this.context.gl;return new Yn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){let u=this.context.gl,p=i.sort((S,E)=>E.overscaledZ-S.overscaledZ),f=p[p.length-1].overscaledZ,g=p[0].overscaledZ-f+1;if(g>1){this.currentStencilSource=void 0,this.nextStencilID+g>256&&this.clearStencil();let S={};for(let E=0;E<g;E++)S[E+f]=new Yn({func:u.GEQUAL,mask:255},E+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=g,[S,p]}return[{[f]:Yn.disabled},p]}colorModeForRenderPass(){let i=this.context.gl;return this._showOverdrawInspector?new mr([i.CONSTANT_COLOR,i.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mr.unblended:mr.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return Gt.disabled;let f=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Gt(p||this.context.gl.LEQUAL,u,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(C.now()),this.imageManager.beginFrame();let p=this.style._order,f=this.style.sourceCaches,g={},S={},E={};for(let D in f){let P=f[D];P.used&&P.prepare(this.context),g[D]=P.getVisibleCoordinates(),S[D]=g[D].slice().reverse(),E[D]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let D=0;D<p.length;D++)if(this.style._layers[p[D]].is3D()){this.opaquePassCutoff=D;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let D of p){let P=this.style._layers[D];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;let k=S[P.source];(P.type==="custom"||k.length)&&this.renderLayer(this,f[P.source],P,k)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(D,P){let k=D.context,N=k.gl,V=((re,ae,K)=>({u_sky_color:re.properties.get("sky-color"),u_horizon_color:re.properties.get("horizon-color"),u_horizon:(ae.height/2+ae.getHorizon())*K,u_sky_horizon_blend:re.properties.get("sky-horizon-blend")*ae.height/2*K}))(P,D.style.map.transform,D.pixelRatio),H=new Gt(N.LEQUAL,Gt.ReadWrite,[0,1]),W=Yn.disabled,J=D.colorModeForRenderPass(),ne=D.useProgram("sky");if(!P.mesh){let re=new s.aX;re.emplaceBack(-1,-1),re.emplaceBack(1,-1),re.emplaceBack(1,1),re.emplaceBack(-1,1);let ae=new s.aY;ae.emplaceBack(0,1,2),ae.emplaceBack(0,2,3),P.mesh=new fh(k.createVertexBuffer(re,Ka.members),k.createIndexBuffer(ae),s.a0.simpleSegment(0,0,re.length,ae.length))}ne.draw(k,N.TRIANGLES,H,W,J,Fn.disabled,V,void 0,"sky",P.mesh.vertexBuffer,P.mesh.indexBuffer,P.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){let D=this.style._layers[p[this.currentLayer]],P=f[D.source],k=g[D.source];this._renderTileClippingMasks(D,k),this.renderLayer(this,P,D,k)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){let D=this.style._layers[p[this.currentLayer]],P=f[D.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(D))continue;let k=(D.type==="symbol"?E:S)[D.source];this._renderTileClippingMasks(D,g[D.source]),this.renderLayer(this,P,D,k)}if(this.options.showTileBoundaries){let D=function(P,k){let N=null,V=Object.values(P._layers).flatMap(ne=>ne.source&&!ne.isHidden(k)?[P.sourceCaches[ne.source]]:[]),H=V.filter(ne=>ne.getSource().type==="vector"),W=V.filter(ne=>ne.getSource().type!=="vector"),J=ne=>{(!N||N.getSource().maxzoom<ne.getSource().maxzoom)&&(N=ne)};return H.forEach(ne=>J(ne)),N||W.forEach(ne=>J(ne)),N}(this.style,this.transform.zoom);D&&function(P,k,N){for(let V=0;V<N.length;V++)Mv(P,k,N[V])}(this,D,D.getVisibleCoordinates())}this.options.showPadding&&function(D){let P=D.transform.padding;Xl(D,D.transform.height-(P.top||0),3,rm),Xl(D,P.bottom||0,3,mn),Av(D,P.left||0,3,hh),Av(D,D.transform.width-(P.right||0),3,pS);let k=D.transform.centerPoint;(function(N,V,H,W){ph(N,V-1,H-10,2,20,W),ph(N,V-10,H-1,20,2,W)})(D,k.x,D.transform.height-k.y,Dv)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;let u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix,f=this.terrainFacilitator.dirty;f||(f=i?!s.a_(u,p):!s.a$(u,p)),f||(f=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),f&&(s.b0(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(g,S){let E=g.context,D=E.gl,P=mr.unblended,k=new Gt(D.LEQUAL,Gt.ReadWrite,[0,1]),N=S.getTerrainMesh(),V=S.sourceCache.getRenderableTiles(),H=g.useProgram("terrainDepth");E.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),E.clear({color:s.aM.transparent,depth:1});for(let W of V){let J=S.getTerrainData(W.tileID),ne={u_matrix:g.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_ele_delta:S.getMeshFrameDelta(g.transform.zoom)};H.draw(E,D.TRIANGLES,k,Yn.disabled,P,Fn.backCCW,ne,J,"terrain",N.vertexBuffer,N.indexBuffer,N.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain),function(g,S){let E=g.context,D=E.gl,P=mr.unblended,k=new Gt(D.LEQUAL,Gt.ReadWrite,[0,1]),N=S.getTerrainMesh(),V=S.getCoordsTexture(),H=S.sourceCache.getRenderableTiles(),W=g.useProgram("terrainCoords");E.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,g.width/devicePixelRatio,g.height/devicePixelRatio]),E.clear({color:s.aM.transparent,depth:1}),S.coordsIndex=[];for(let J of H){let ne=S.getTerrainData(J.tileID);E.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,V.texture);let re={u_matrix:g.transform.calculatePosMatrix(J.tileID.toUnwrapped()),u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(g.transform.zoom)};W.draw(E,D.TRIANGLES,k,Yn.disabled,P,Fn.backCCW,re,ne,"terrain",N.vertexBuffer,N.indexBuffer,N.segments),S.coordsIndex.push(J.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,g.width,g.height])}(this,this.style.map.terrain))}renderLayer(i,u,p,f){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(f||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(g,S,E,D,P){if(g.renderPass!=="translucent")return;let k=Yn.disabled,N=g.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,H,W,J,ne,re,ae,K,ue){let he=H.transform,_e=Za(),Pe=ne==="map",Le=re==="map";for(let We of V){let Je=J.getTile(We),je=Je.getBucket(W);if(!je||!je.text||!je.text.segments.get().length)continue;let Be=s.ag(je.textSizeData,he.zoom),at=Yt(Je,1,H.transform.zoom),Dt=Js(We.posMatrix,Le,Pe,H.transform,at),qe=W.layout.get("icon-text-fit")!=="none"&&je.hasIconData();if(Be){let Ke=Math.pow(2,he.zoom-Je.tileID.overscaledZ),Et=H.style.map.terrain?(Vt,Xt)=>H.style.map.terrain.getElevation(We,Vt,Xt):null,Qn=_e.translatePosition(he,Je,ae,K);Wl(je,Pe,Le,ue,he,Dt,We.posMatrix,Ke,Be,qe,_e,Qn,We.toUnwrapped(),Et)}}}(D,g,E,S,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),P),E.paint.get("icon-opacity").constantOr(1)!==0&&em(g,S,E,D,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),k,N),E.paint.get("text-opacity").constantOr(1)!==0&&em(g,S,E,D,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),k,N),S.map.showCollisionBoxes&&(Cu(g,S,E,D,!0),Cu(g,S,E,D,!1))})(i,u,p,f,this.style.placement.variableOffsets);break;case"circle":(function(g,S,E,D){if(g.renderPass!=="translucent")return;let P=E.paint.get("circle-opacity"),k=E.paint.get("circle-stroke-width"),N=E.paint.get("circle-stroke-opacity"),V=!E.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(k.constantOr(1)===0||N.constantOr(1)===0))return;let H=g.context,W=H.gl,J=g.depthModeForSublayer(0,Gt.ReadOnly),ne=Yn.disabled,re=g.colorModeForRenderPass(),ae=[];for(let K=0;K<D.length;K++){let ue=D[K],he=S.getTile(ue),_e=he.getBucket(E);if(!_e)continue;let Pe=_e.programConfigurations.get(E.id),Le=g.useProgram("circle",Pe),We=_e.layoutVertexBuffer,Je=_e.indexBuffer,je=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ue),Be={programConfiguration:Pe,program:Le,layoutVertexBuffer:We,indexBuffer:Je,uniformValues:Qb(g,ue,he,E),terrainData:je};if(V){let at=_e.segments.get();for(let Dt of at)ae.push({segments:new s.a0([Dt]),sortKey:Dt.sortKey,state:Be})}else ae.push({segments:_e.segments,sortKey:0,state:Be})}V&&ae.sort((K,ue)=>K.sortKey-ue.sortKey);for(let K of ae){let{programConfiguration:ue,program:he,layoutVertexBuffer:_e,indexBuffer:Pe,uniformValues:Le,terrainData:We}=K.state;he.draw(H,W.TRIANGLES,J,ne,re,Fn.disabled,Le,We,E.id,_e,Pe,K.segments,E.paint,g.transform.zoom,ue)}})(i,u,p,f);break;case"heatmap":(function(g,S,E,D){if(E.paint.get("heatmap-opacity")===0)return;let P=g.context;if(g.style.map.terrain){for(let k of D){let N=S.getTile(k);S.hasRenderableParent(k)||(g.renderPass==="offscreen"?nm(g,N,E,k):g.renderPass==="translucent"&&nl(g,E,k))}P.viewport.set([0,0,g.width,g.height])}else g.renderPass==="offscreen"?function(k,N,V,H){let W=k.context,J=W.gl,ne=Yn.disabled,re=new mr([J.ONE,J.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(ae,K,ue){let he=ae.gl;ae.activeTexture.set(he.TEXTURE1),ae.viewport.set([0,0,K.width/4,K.height/4]);let _e=ue.heatmapFbos.get(s.aU);_e?(he.bindTexture(he.TEXTURE_2D,_e.colorAttachment.get()),ae.bindFramebuffer.set(_e.framebuffer)):(_e=Eu(ae,K.width/4,K.height/4),ue.heatmapFbos.set(s.aU,_e))})(W,k,V),W.clear({color:s.aM.transparent});for(let ae=0;ae<H.length;ae++){let K=H[ae];if(N.hasRenderableParent(K))continue;let ue=N.getTile(K),he=ue.getBucket(V);if(!he)continue;let _e=he.programConfigurations.get(V.id),Pe=k.useProgram("heatmap",_e),{zoom:Le}=k.transform;Pe.draw(W,J.TRIANGLES,Gt.disabled,ne,re,Fn.disabled,Ti(K.posMatrix,ue,Le,V.paint.get("heatmap-intensity")),null,V.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,V.paint,k.transform.zoom,_e)}W.viewport.set([0,0,k.width,k.height])}(g,S,E,D):g.renderPass==="translucent"&&function(k,N){let V=k.context,H=V.gl;V.setColorMode(k.colorModeForRenderPass());let W=N.heatmapFbos.get(s.aU);W&&(V.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,W.colorAttachment.get()),V.activeTexture.set(H.TEXTURE1),Tu(V,N).bind(H.LINEAR,H.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(V,H.TRIANGLES,Gt.disabled,Yn.disabled,k.colorModeForRenderPass(),Fn.disabled,nh(k,N,0,1),null,N.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,N.paint,k.transform.zoom))}(g,E)})(i,u,p,f);break;case"line":(function(g,S,E,D){if(g.renderPass!=="translucent")return;let P=E.paint.get("line-opacity"),k=E.paint.get("line-width");if(P.constantOr(1)===0||k.constantOr(1)===0)return;let N=g.depthModeForSublayer(0,Gt.ReadOnly),V=g.colorModeForRenderPass(),H=E.paint.get("line-dasharray"),W=E.paint.get("line-pattern"),J=W.constantOr(1),ne=E.paint.get("line-gradient"),re=E.getCrossfadeParameters(),ae=J?"linePattern":H?"lineSDF":ne?"lineGradient":"line",K=g.context,ue=K.gl,he=!0;for(let _e of D){let Pe=S.getTile(_e);if(J&&!Pe.patternsLoaded())continue;let Le=Pe.getBucket(E);if(!Le)continue;let We=Le.programConfigurations.get(E.id),Je=g.context.program.get(),je=g.useProgram(ae,We),Be=he||je.program!==Je,at=g.style.map.terrain&&g.style.map.terrain.getTerrainData(_e),Dt=W.constantOr(null);if(Dt&&Pe.imageAtlas){let Et=Pe.imageAtlas,Qn=Et.patternPositions[Dt.to.toString()],Vt=Et.patternPositions[Dt.from.toString()];Qn&&Vt&&We.setConstantPatternPositions(Qn,Vt)}let qe=at?_e:null,Ke=J?Hl(g,Pe,E,re,qe):H?eS(g,Pe,E,H,re,qe):ne?dv(g,Pe,E,Le.lineClipsArray.length,qe):ih(g,Pe,E,qe);if(J)K.activeTexture.set(ue.TEXTURE0),Pe.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),We.updatePaintBuffers(re);else if(H&&(Be||g.lineAtlas.dirty))K.activeTexture.set(ue.TEXTURE0),g.lineAtlas.bind(K);else if(ne){let Et=Le.gradients[E.id],Qn=Et.texture;if(E.gradientVersion!==Et.version){let Vt=256;if(E.stepInterpolant){let Xt=S.getSource().maxzoom,er=_e.canonical.z===Xt?Math.ceil(1<<g.transform.maxZoom-_e.canonical.z):1;Vt=s.ac(s.aV(Le.maxLineLength/s.X*1024*er),256,K.maxTextureSize)}Et.gradient=s.aW({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Vt,image:Et.gradient||void 0,clips:Le.lineClipsArray}),Et.texture?Et.texture.update(Et.gradient):Et.texture=new nt(K,Et.gradient,ue.RGBA),Et.version=E.gradientVersion,Qn=Et.texture}K.activeTexture.set(ue.TEXTURE0),Qn.bind(E.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}je.draw(K,ue.TRIANGLES,N,g.stencilModeForClipping(_e),V,Fn.disabled,Ke,at,E.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,E.paint,g.transform.zoom,We,Le.layoutVertexBuffer2),he=!1}})(i,u,p,f);break;case"fill":(function(g,S,E,D){let P=E.paint.get("fill-color"),k=E.paint.get("fill-opacity");if(k.constantOr(1)===0)return;let N=g.colorModeForRenderPass(),V=E.paint.get("fill-pattern"),H=g.opaquePassEnabledForLayer()&&!V.constantOr(1)&&P.constantOr(s.aM.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===H){let W=g.depthModeForSublayer(1,g.renderPass==="opaque"?Gt.ReadWrite:Gt.ReadOnly);Du(g,S,E,D,W,N,!1)}if(g.renderPass==="translucent"&&E.paint.get("fill-antialias")){let W=g.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Gt.ReadOnly);Du(g,S,E,D,W,N,!0)}})(i,u,p,f);break;case"fill-extrusion":(function(g,S,E,D){let P=E.paint.get("fill-extrusion-opacity");if(P!==0&&g.renderPass==="translucent"){let k=new Gt(g.context.gl.LEQUAL,Gt.ReadWrite,g.depthRangeFor3D);if(P!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))dh(g,S,E,D,k,Yn.disabled,mr.disabled),dh(g,S,E,D,k,g.stencilModeFor3D(),g.colorModeForRenderPass());else{let N=g.colorModeForRenderPass();dh(g,S,E,D,k,Yn.disabled,N)}}})(i,u,p,f);break;case"hillshade":(function(g,S,E,D){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;let P=g.context,k=g.depthModeForSublayer(0,Gt.ReadOnly),N=g.colorModeForRenderPass(),[V,H]=g.renderPass==="translucent"?g.stencilConfigForOverlap(D):[{},D];for(let W of H){let J=S.getTile(W);J.needsHillshadePrepare!==void 0&&J.needsHillshadePrepare&&g.renderPass==="offscreen"?Yl(g,J,E,k,Yn.disabled,N):g.renderPass==="translucent"&&Kl(g,W,J,E,k,V[W.overscaledZ],N)}P.viewport.set([0,0,g.width,g.height])})(i,u,p,f);break;case"raster":(function(g,S,E,D){if(g.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!D.length)return;let P=g.context,k=P.gl,N=S.getSource(),V=g.useProgram("raster"),H=g.colorModeForRenderPass(),[W,J]=N instanceof Es?[{},D]:g.stencilConfigForOverlap(D),ne=J[J.length-1].overscaledZ,re=!g.options.moving;for(let ae of J){let K=g.depthModeForSublayer(ae.overscaledZ-ne,E.paint.get("raster-opacity")===1?Gt.ReadWrite:Gt.ReadOnly,k.LESS),ue=S.getTile(ae);ue.registerFadeDuration(E.paint.get("raster-fade-duration"));let he=S.findLoadedParent(ae,0),_e=S.findLoadedSibling(ae),Pe=Tv(ue,he||_e||null,S,E,g.transform,g.style.map.terrain),Le,We,Je=E.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;P.activeTexture.set(k.TEXTURE0),ue.texture.bind(Je,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(k.TEXTURE1),he?(he.texture.bind(Je,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),Le=Math.pow(2,he.tileID.overscaledZ-ue.tileID.overscaledZ),We=[ue.tileID.canonical.x*Le%1,ue.tileID.canonical.y*Le%1]):ue.texture.bind(Je,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),ue.texture.useMipmap&&P.extTextureFilterAnisotropic&&g.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,P.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,P.extTextureFilterAnisotropicMax);let je=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ae),Be=je?ae:null,at=Be?Be.posMatrix:g.transform.calculatePosMatrix(ae.toUnwrapped(),re),Dt=tS(at,We||[0,0],Le||1,Pe,E);N instanceof Es?V.draw(P,k.TRIANGLES,K,Yn.disabled,H,Fn.disabled,Dt,je,E.id,N.boundsBuffer,g.quadTriangleIndexBuffer,N.boundsSegments):V.draw(P,k.TRIANGLES,K,W[ae.overscaledZ],H,Fn.disabled,Dt,je,E.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}})(i,u,p,f);break;case"background":(function(g,S,E,D){let P=E.paint.get("background-color"),k=E.paint.get("background-opacity");if(k===0)return;let N=g.context,V=N.gl,H=g.transform,W=H.tileSize,J=E.paint.get("background-pattern");if(g.isPatternMissing(J))return;let ne=!J&&P.a===1&&k===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==ne)return;let re=Yn.disabled,ae=g.depthModeForSublayer(0,ne==="opaque"?Gt.ReadWrite:Gt.ReadOnly),K=g.colorModeForRenderPass(),ue=g.useProgram(J?"backgroundPattern":"background"),he=D||H.coveringTiles({tileSize:W,terrain:g.style.map.terrain});J&&(N.activeTexture.set(V.TEXTURE0),g.imageManager.bind(g.context));let _e=E.getCrossfadeParameters();for(let Pe of he){let Le=D?Pe.posMatrix:g.transform.calculatePosMatrix(Pe.toUnwrapped()),We=J?$f(Le,k,g,J,{tileID:Pe,tileSize:W},_e):oh(Le,k,P),Je=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Pe);ue.draw(N,V.TRIANGLES,ae,re,K,Fn.disabled,We,Je,E.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}})(i,0,p,f);break;case"custom":(function(g,S,E){let D=g.context,P=E.implementation;if(g.renderPass==="offscreen"){let k=P.prerender;k&&(g.setCustomLayerDefaults(),D.setColorMode(g.colorModeForRenderPass()),k.call(P,D.gl,g.transform.customLayerMatrix()),D.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),D.setColorMode(g.colorModeForRenderPass()),D.setStencilMode(Yn.disabled);let k=P.renderingMode==="3d"?new Gt(g.context.gl.LEQUAL,Gt.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,Gt.ReadOnly);D.setDepthMode(k),P.render(D.gl,g.transform.customLayerMatrix(),{farZ:g.transform.farZ,nearZ:g.transform.nearZ,fov:g.transform._fov,modelViewProjectionMatrix:g.transform.modelViewProjectionMatrix,projectionMatrix:g.transform.projectionMatrix}),D.setDirty(),g.setBaseState(),D.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,f,g){if(!p[0]&&!p[1])return i;let S=g?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(S){let P=Math.sin(S),k=Math.cos(S);p=[p[0]*k-p[1]*P,p[0]*P+p[1]*k]}let E=[g?p[0]:Yt(u,p[0],this.transform.zoom),g?p[1]:Yt(u,p[1],this.transform.zoom),0],D=new Float32Array(16);return s.J(D,i,E),D}saveTileTexture(i){let u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){let u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;let u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};let p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Vf(this.context,Qs[i],u,qf[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new nt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Jl{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){let f=Math.pow(2,p),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{let D=1/(E=s.af([],E,i))[3]/u*f;return s.b1(E,E,[D,D,1/E[3],D])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{let D=function(V,H){var W=H[0],J=H[1],ne=H[2],re=W*W+J*J+ne*ne;return re>0&&(re=1/Math.sqrt(re)),V[0]=H[0]*re,V[1]=H[1]*re,V[2]=H[2]*re,V}([],function(V,H,W){var J=H[0],ne=H[1],re=H[2],ae=W[0],K=W[1],ue=W[2];return V[0]=ne*ue-re*K,V[1]=re*ae-J*ue,V[2]=J*K-ne*ae,V}([],Ge([],g[E[0]],g[E[1]]),Ge([],g[E[2]],g[E[1]]))),P=-((k=D)[0]*(N=g[E[1]])[0]+k[1]*N[1]+k[2]*N[2]);var k,N;return D.concat(P)});return new Jl(g,S)}}class Ql{constructor(i,u){this.min=i,this.max=u,this.center=function(p,f,g){return p[0]=.5*f[0],p[1]=.5*f[1],p[2]=.5*f[2],p}([],function(p,f,g){return p[0]=f[0]+g[0],p[1]=f[1]+g[1],p[2]=f[2]+g[2],p}([],this.min,this.max))}quadrant(i){let u=[i%2==0,i<2],p=ke(this.min),f=ke(this.max);for(let g=0;g<u.length;g++)p[g]=u[g]?this.min[g]:this.center[g],f[g]=u[g]?this.center[g]:this.max[g];return f[2]=this.max[2],new Ql(p,f)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){let u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],p=!0;for(let f=0;f<i.planes.length;f++){let g=i.planes[f],S=0;for(let E=0;E<u.length;E++)s.b2(g,u[E])>=0&&S++;if(S===0)return 0;S!==u.length&&(p=!1)}if(p)return 2;for(let f=0;f<3;f++){let g=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){let D=i.points[E][f]-this.min[f];g=Math.min(g,D),S=Math.max(S,D)}if(S<0||g>this.max[f]-this.min[f])return 0}return 1}}class ec{constructor(i=0,u=0,p=0,f=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=f}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=s.y.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=s.y.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=s.y.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=s.y.number(i.right,u.right,p)),this}getCenter(i,u){let p=s.ac((this.left+i-this.right)/2,0,i),f=s.ac((this.top+u-this.bottom)/2,0,u);return new s.P(p,f)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ec(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let im=85.051129;class tc{constructor(i,u,p,f,g){this.tileSize=512,this._renderWorldCopies=g===void 0||!!g,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ec,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let i=new tc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){let u=-s.b3(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new s.A(4);return s.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,f,g){var S=f[0],E=f[1],D=f[2],P=f[3],k=Math.sin(g),N=Math.cos(g);p[0]=S*N+D*k,p[1]=E*N+P*k,p[2]=S*-k+D*N,p[3]=E*-k+P*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){let u=s.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){let u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){let u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){let u=[new s.b4(0,i)];if(this._renderWorldCopies){let p=this.pointCoordinate(new s.P(0,0)),f=this.pointCoordinate(new s.P(this.width,0)),g=this.pointCoordinate(new s.P(this.width,this.height)),S=this.pointCoordinate(new s.P(0,this.height)),E=Math.floor(Math.min(p.x,f.x,g.x,S.x)),D=Math.floor(Math.max(p.x,f.x,g.x,S.x)),P=1;for(let k=E-P;k<=D+P;k++)k!==0&&u.push(new s.b4(k,i))}return u}coveringTiles(i){var u,p;let f=this.coveringZoomLevel(i),g=f;if(i.minzoom!==void 0&&f<i.minzoom)return[];i.maxzoom!==void 0&&f>i.maxzoom&&(f=i.maxzoom);let S=this.pointCoordinate(this.getCameraPoint()),E=s.Z.fromLngLat(this.center),D=Math.pow(2,f),P=[D*S.x,D*S.y,0],k=[D*E.x,D*E.y,0],N=Jl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,f),V=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=f);let H=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,W=K=>({aabb:new Ql([K*D,0,0],[(K+1)*D,D,0]),zoom:0,x:0,y:0,wrap:K,fullyVisible:!1}),J=[],ne=[],re=f,ae=i.reparseOverscaled?g:f;if(this._renderWorldCopies)for(let K=1;K<=3;K++)J.push(W(-K)),J.push(W(K));for(J.push(W(0));J.length>0;){let K=J.pop(),ue=K.x,he=K.y,_e=K.fullyVisible;if(!_e){let je=K.aabb.intersects(N);if(je===0)continue;_e=je===2}let Pe=i.terrain?P:k,Le=K.aabb.distanceX(Pe),We=K.aabb.distanceY(Pe),Je=Math.max(Math.abs(Le),Math.abs(We));if(K.zoom===re||Je>H+(1<<re-K.zoom)-2&&K.zoom>=V){let je=re-K.zoom,Be=P[0]-.5-(ue<<je),at=P[1]-.5-(he<<je);ne.push({tileID:new s.S(K.zoom===re?ae:K.zoom,K.wrap,K.zoom,ue,he),distanceSq:it([k[0]-.5-ue,k[1]-.5-he]),tileDistanceToCamera:Math.sqrt(Be*Be+at*at)})}else for(let je=0;je<4;je++){let Be=(ue<<1)+je%2,at=(he<<1)+(je>>1),Dt=K.zoom+1,qe=K.aabb.quadrant(je);if(i.terrain){let Ke=new s.S(Dt,K.wrap,Dt,Be,at),Et=i.terrain.getMinMaxElevation(Ke),Qn=(u=Et.minElevation)!==null&&u!==void 0?u:this.elevation,Vt=(p=Et.maxElevation)!==null&&p!==void 0?p:this.elevation;qe=new Ql([qe.min[0],qe.min[1],Qn],[qe.max[0],qe.max[1],Vt])}J.push({aabb:qe,zoom:Dt,x:Be,y:at,wrap:K.wrap,fullyVisible:_e})}}return ne.sort((K,ue)=>K.distanceSq-ue.distanceSq).map(K=>K.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){let u=s.ac(i.lat,-85.051129,im);return new s.P(s.O(i.lng)*this.worldSize,s.Q(u)*this.worldSize)}unproject(i){return new s.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){let u=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,f=this.pointLocation(this.centerPoint,i),g=i.getElevationForLngLatZoom(f,this.tileZoom);if(!(this.elevation-g))return;let S=p+u-g,E=Math.cos(this._pitch)*this.cameraToCenterDistance/S/s.b5(1,f.lat),D=this.scaleZoom(E/this.tileSize);this._elevation=g,this._center=f,this.zoom=D}setLocationAtPoint(i,u){let p=this.pointCoordinate(u),f=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(i),S=new s.Z(g.x-(p.x-f.x),g.y-(p.y-f.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return s.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){let V=u.pointCoordinate(i);if(V!=null)return V}let p=[i.x,i.y,0,1],f=[i.x,i.y,1,1];s.af(p,p,this.pixelMatrixInverse),s.af(f,f,this.pixelMatrixInverse);let g=p[3],S=f[3],E=p[1]/g,D=f[1]/S,P=p[2]/g,k=f[2]/S,N=P===k?0:(0-P)/(k-P);return new s.Z(s.y.number(p[0]/g,f[0]/S,N)/this.worldSize,s.y.number(E,D,N)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){let f=[i.x*this.worldSize,i.y*this.worldSize,u,1];return s.af(f,f,p),new s.P(f[0]/f[3],f[1]/f[3])}getBounds(){let i=Math.max(0,this.height/2-this.getHorizon());return new Ce().extend(this.pointLocation(new s.P(0,i))).extend(this.pointLocation(new s.P(this.width,i))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ce([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,im])}calculateTileMatrix(i){let u=i.canonical,p=this.worldSize/this.zoomScale(u.z),f=u.x+Math.pow(2,u.z)*i.wrap,g=s.an(new Float64Array(16));return s.J(g,g,[f*p,u.y*p,0]),s.K(g,g,[p/s.X,p/s.X,1]),g}calculatePosMatrix(i,u=!1){let p=i.key,f=u?this._alignedPosMatrixCache:this._posMatrixCache;if(f[p])return f[p];let g=this.calculateTileMatrix(i);return s.L(g,u?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,g),f[p]=new Float32Array(g),f[p]}calculateFogMatrix(i){let u=i.key,p=this._fogMatrixCache;if(p[u])return p[u];let f=this.calculateTileMatrix(i);return s.L(f,this.fogMatrix,f),p[u]=new Float32Array(f),p[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,u){u=s.ac(+u,this.minZoom,this.maxZoom);let p={center:new s.N(i.lng,i.lat),zoom:u},f=this.lngRange;if(!this._renderWorldCopies&&f===null){let K=179.9999999999;f=[-K,K]}let g=this.tileSize*this.zoomScale(p.zoom),S=0,E=g,D=0,P=g,k=0,N=0,{x:V,y:H}=this.size;if(this.latRange){let K=this.latRange;S=s.Q(K[1])*g,E=s.Q(K[0])*g,E-S<H&&(k=H/(E-S))}f&&(D=s.b3(s.O(f[0])*g,0,g),P=s.b3(s.O(f[1])*g,0,g),P<D&&(P+=g),P-D<V&&(N=V/(P-D)));let{x:W,y:J}=this.project.call({worldSize:g},i),ne,re,ae=Math.max(N||0,k||0);if(ae){let K=new s.P(N?(P+D)/2:W,k?(E+S)/2:J);return p.center=this.unproject.call({worldSize:g},K).wrap(),p.zoom+=this.scaleZoom(ae),p}if(this.latRange){let K=H/2;J-K<S&&(re=S+K),J+K>E&&(re=E-K)}if(f){let K=(D+P)/2,ue=W;this._renderWorldCopies&&(ue=s.b3(W,K-g/2,K+g/2));let he=V/2;ue-he<D&&(ne=D+he),ue+he>P&&(ne=P-he)}if(ne!==void 0||re!==void 0){let K=new s.P(ne??W,re??J);p.center=this.unproject.call({worldSize:g},K).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=u,this.zoom=p,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;let i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let f=s.an(new Float64Array(16));s.K(f,f,[this.width/2,-this.height/2,1]),s.J(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=s.an(new Float64Array(16)),s.K(f,f,[1,-1,1]),s.J(f,f,[-1,-1,0]),s.K(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f;let g=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this.minElevationForCurrentTile),E=g-S*this._pixelPerMeter/Math.cos(this._pitch),D=S<0?E:g,P=Math.PI/2+this._pitch,k=this._fov*(.5+i.y/this.height),N=Math.sin(k)*D/Math.sin(s.ac(Math.PI-P-k,.01,Math.PI-.01)),V=this.getHorizon(),H=2*Math.atan(V/this.cameraToCenterDistance)*(.5+i.y/(2*V)),W=Math.sin(H)*D/Math.sin(s.ac(Math.PI-P-H,.01,Math.PI-.01)),J=Math.min(N,W);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*J+D),this.nearZ=this.height/50,f=new Float64Array(16),s.b6(f,this._fov,this.width/this.height,this.nearZ,this.farZ),f[8]=2*-i.x/this.width,f[9]=2*i.y/this.height,this.projectionMatrix=s.ae(f),s.K(f,f,[1,-1,1]),s.J(f,f,[0,0,-this.cameraToCenterDistance]),s.b7(f,f,this._pitch),s.ad(f,f,this.angle),s.J(f,f,[-u,-p,0]),this.mercatorMatrix=s.K([],f,[this.worldSize,this.worldSize,this.worldSize]),s.K(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,f),s.J(f,f,[0,0,-this.elevation]),this.modelViewProjectionMatrix=f,this.invModelViewProjectionMatrix=s.as([],f),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,g,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-u,-p,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,f);let ne=this.width%2/2,re=this.height%2/2,ae=Math.cos(this.angle),K=Math.sin(this.angle),ue=u-Math.round(u)+ae*ne+K*re,he=p-Math.round(p)+ae*re+K*ne,_e=new Float64Array(f);if(s.J(_e,_e,[ue>.5?ue-1:ue,he>.5?he-1:he,0]),this.alignedModelViewProjectionMatrix=_e,f=s.as(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let i=this.pointCoordinate(new s.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return s.af(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,i))}getCameraQueryGeometry(i){let u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,f=u.y,g=u.x,S=u.y;for(let E of i)p=Math.min(p,E.x),f=Math.min(f,E.y),g=Math.max(g,E.x),S=Math.max(S,E.y);return[new s.P(p,f),new s.P(g,f),new s.P(g,S),new s.P(p,S),new s.P(p,f)]}}lngLatToCameraDepth(i,u){let p=this.locationCoordinate(i),f=[p.x*this.worldSize,p.y*this.worldSize,u,1];return s.af(f,f,this.modelViewProjectionMatrix),f[2]/f[3]}}function Au(y,i){let u,p=!1,f=null,g=null,S=()=>{f=null,p&&(y.apply(g,u),f=setTimeout(S,i),p=!1)};return(...E)=>(p=!0,g=this,u=E,f||S(),f)}class gh{constructor(i){this._getCurrentHash=()=>{let u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(p=f)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{let u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){let p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{let u=this._getCurrentHash();if(u.length===0)return;let p=u.join("/"),f=p;f.split("&").length>0&&(f=f.split("&")[0]),this._hashName&&(f=`${this._hashName}=${p}`);let g=window.location.hash.replace(f,"");g.startsWith("#&")?g=g.slice(0,1)+g.slice(2):g==="#"&&(g="");let S=window.location.href.replace(/(#.+)?$/,g);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Au(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){let u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,f=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,f),S=Math.round(u.lng*g)/g,E=Math.round(u.lat*g)/g,D=this._map.getBearing(),P=this._map.getPitch(),k="";if(k+=i?`/${S}/${E}/${p}`:`${p}/${E}/${S}`,(D||P)&&(k+="/"+Math.round(10*D)/10),P&&(k+=`/${Math.round(P)}`),this._hashName){let N=this._hashName,V=!1,H=window.location.hash.slice(1).split("&").map(W=>{let J=W.split("=")[0];return J===N?(V=!0,`${J}=${k}`):W}).filter(W=>W);return V||H.push(`${N}=${k}`),`#${H.join("&")}`}return`#${k}`}}let yh={linearity:.3,easing:s.b8(0,0,.3,1)},om=s.e({deceleration:2500,maxSpeed:1400},yh),fS=s.e({deceleration:20,maxSpeed:1400},yh),Rv=s.e({deceleration:1e3,maxSpeed:360},yh),vh=s.e({deceleration:1e3,maxSpeed:90},yh);class sm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:C.now(),settings:i})}_drainInertiaBuffer(){let i=this._inertiaBuffer,u=C.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let u={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:g}of this._inertiaBuffer)u.zoom+=g.zoomDelta||0,u.bearing+=g.bearingDelta||0,u.pitch+=g.pitchDelta||0,g.panDelta&&u.pan._add(g.panDelta),g.around&&(u.around=g.around),g.pinchAround&&(u.pinchAround=g.pinchAround);let p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(u.pan.mag()){let g=Pu(u.pan.mag(),p,s.e({},om,i||{}));f.offset=u.pan.mult(g.amount/u.pan.mag()),f.center=this._map.transform.center,Mu(f,g)}if(u.zoom){let g=Pu(u.zoom,p,fS);f.zoom=this._map.transform.zoom+g.amount,Mu(f,g)}if(u.bearing){let g=Pu(u.bearing,p,Rv);f.bearing=this._map.transform.bearing+s.ac(g.amount,-179,179),Mu(f,g)}if(u.pitch){let g=Pu(u.pitch,p,vh);f.pitch=this._map.transform.pitch+g.amount,Mu(f,g)}if(f.zoom||f.bearing){let g=u.pinchAround===void 0?u.around:u.pinchAround;f.around=g?this._map.unproject(g):this._map.getCenter()}return this.clear(),s.e(f,{noMoveStart:!0})}}function Mu(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Pu(y,i,u){let{maxSpeed:p,linearity:f,deceleration:g}=u,S=s.ac(y*f/(i/1e3),-p,p),E=Math.abs(S)/(g*f);return{easing:u.easing,duration:1e3*E,amount:S*(E/2)}}class ri extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,f={}){let g=T.mousePos(u.getCanvas(),p),S=u.unproject(g);super(i,s.e({point:g,lngLat:S,originalEvent:p},f)),this._defaultPrevented=!1,this.target=u}}class rl extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){let f=i==="touchend"?p.changedTouches:p.touches,g=T.touchPos(u.getCanvasContainer(),f),S=g.map(D=>u.unproject(D)),E=g.reduce((D,P,k,N)=>D.add(P.div(N.length)),new s.P(0,0));super(i,{points:g,point:E,lngLats:S,lngLat:u.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class kv extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Nv{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new kv(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new ri(i.type,this._map,i))}mouseup(i){this._map.fire(new ri(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ri(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ri(i.type,this._map,i))}mouseover(i){this._map.fire(new ri(i.type,this._map,i))}mouseout(i){this._map.fire(new ri(i.type,this._map,i))}touchstart(i){return this._firePreventable(new rl(i.type,this._map,i))}touchmove(i){this._map.fire(new rl(i.type,this._map,i))}touchend(i){this._map.fire(new rl(i.type,this._map,i))}touchcancel(i){this._map.fire(new rl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ri(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ri(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ao{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(s.P.convert(i),this._map.terrain)}}class qi{constructor(i,u){this._map=i,this._tr=new Ao(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(T.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;let p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;let f=this._startPos;this._lastPos=p,this._box||(this._box=T.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));let g=Math.min(f.x,p.x),S=Math.max(f.x,p.x),E=Math.min(f.y,p.y),D=Math.max(f.y,p.y);T.setTransform(this._box,`translate(${g}px,${E}px)`),this._box.style.width=S-g+"px",this._box.style.height=D-E+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;let p=this._startPos,f=u;if(this.reset(),T.suppressClick(),p.x!==f.x||p.y!==f.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:i})),{cameraAnimation:g=>g.fitScreenCoordinates(p,f,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new s.k(i,{originalEvent:u}))}}function Ru(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);let u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class am{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(f){let g=new s.P(0,0);for(let S of f)g._add(S);return g.div(f.length)}(u),this.touches=Ru(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;let f=Ru(p,u);for(let g in this.touches){let S=f[g];(!S||S.dist(this.touches[g])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){let f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class _h{constructor(i){this.singleTap=new am(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){let f=this.singleTap.touchend(i,u,p);if(f){let g=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(f)<30;if(g&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class nc{constructor(i){this._tr=new Ao(i),this._zoomIn=new _h({numTouches:1,numTaps:2}),this._zoomOut=new _h({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){let f=this._zoomIn.touchend(i,u,p),g=this._zoomOut.touchend(i,u,p),S=this._tr;return f?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(f)},{originalEvent:i})}):g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(g)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class As{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){let u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;let p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);let f=u.length?u[0]:u;return!this._moved&&f.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=f,this._move(p,f))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&T.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let lm={0:1,2:2};class xh{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){let u=T.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){let f=lm[p];return u.buttons===void 0||(u.buttons&f)!==f}(i,this._eventButton)}isValidEndEvent(i){return T.mouseButton(i)===this._eventButton}}class cm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}let wh=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=i=>{i.preventDefault()}},um=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{let p=new xh({checkCorrectEvent:f=>T.mouseButton(f)===0&&f.ctrlKey||T.mouseButton(f)===2});return new As({clickTolerance:i,move:(f,g)=>({bearingDelta:(g.x-f.x)*u}),moveStateManager:p,enable:y,assignEvents:wh})},dm=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{let p=new xh({checkCorrectEvent:f=>T.mouseButton(f)===0&&f.ctrlKey||T.mouseButton(f)===2});return new As({clickTolerance:i,move:(f,g)=>({pitchDelta:(g.y-f.y)*u}),moveStateManager:p,enable:y,assignEvents:wh})};class il{constructor(i,u){this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return i.preventDefault(),this._calculateTransform(i,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);let f=Ru(p,u),g=new s.P(0,0),S=new s.P(0,0),E=0;for(let P in f){let k=f[P],N=this._touches[P];N&&(g._add(k),S._add(k.sub(N)),E++,f[P]=k)}if(this._touches=f,this._shouldBePrevented(E)||!S.mag())return;let D=S.div(E);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:g.div(E),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();let[f,g]=this._firstTwoTouches,S=ku(p,u,f),E=ku(p,u,g);if(!S||!E)return;let D=this._aroundCenter?null:S.add(E).div(2);return this._move([S,E],D,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;let[f,g]=this._firstTwoTouches,S=ku(p,u,f),E=ku(p,u,g);S&&E||(this._active&&T.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ku(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function hm(y,i){return Math.log(y/i)/Math.LN2}class pm extends bh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){let p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(hm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:hm(this._distance,p),pinchAround:u}}}function fm(y,i){return 180*y.angleWith(i)/Math.PI}class mm extends bh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u,p){let f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fm(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());let u=25/(Math.PI*this._minDiameter)*360,p=fm(i,this._startVector);return Math.abs(p)<u}}function Sh(y){return Math.abs(y.y)>Math.abs(y.x)}class rc extends bh{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Sh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let f=i[0].sub(this._lastPoints[0]),g=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,g,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(f.y+g.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;let f=i.mag()>=2,g=u.mag()>=2;if(!f&&!g)return;if(!f||!g)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;let S=i.y>0==u.y>0;return Sh(i)&&Sh(u)&&S}}let Fv={panStep:100,bearingStep:15,pitchStep:10};class so{constructor(i){this._tr=new Ao(i);let u=Fv;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,f=0,g=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),g=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),g=1);break;case 38:i.shiftKey?f=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?f=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(p=0,f=0),{cameraAnimation:E=>{let D=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:is,zoom:u?Math.round(D.zoom)+u*(i.shiftKey?2:1):D.zoom,bearing:D.bearing+p*this._bearingStep,pitch:D.pitch+f*this._pitchStep,offset:[-g*this._panStep,-S*this._panStep],center:D.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function is(y){return y*(2-y)}let gm=4.000244140625;class Mo{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new Ao(i),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY,p=C.now(),f=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%gm==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(f*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let u=T.mousePos(this._map.getCanvas(),i),p=this._tr;this._around=u.y>p.transform.height/2-p.transform.getHorizon()?s.N.convert(this._aroundCenter?p.center:p.unproject(u)):s.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let i=this._tr.transform;if(this._delta!==0){let D=this._type==="wheel"&&Math.abs(this._delta)>gm?this._wheelZoomRate:this._defaultZoomRate,P=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&P!==0&&(P=1/P);let k=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(k*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,f=this._easing,g,S=!1,E=C.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&f&&E){let D=Math.min(E/200,1),P=f(D);g=s.y.number(p,u,P),D<1?this._frameId||(this._frameId=!0):S=!0}else g=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:g-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=s.b9;if(this._prevEase){let p=this._prevEase,f=(C.now()-p.start)/p.duration,g=p.easing(f+.01)-p.easing(f),S=.27/Math.sqrt(g*g+1e-4)*.01,E=Math.sqrt(.0729-S*S);u=s.b8(S,E,.25,1)}return this._prevEase={start:C.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ol{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class mS{constructor(i){this._tr=new Ao(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gS{constructor(){this._tap=new _h({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){let f=u[0],g=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(f)<30;g&&S?p.length>0&&(this._swipePoint=f,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;let f=u[0],g=f.y-this._swipePoint.y;return this._swipePoint=f,i.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{let f=this._tap.touchend(i,u,p);f&&(this._tapTime=i.timeStamp,this._tapPoint=f)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ov{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Lv{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ym{constructor(i,u,p,f){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ic{constructor(i,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=T.create("div","maplibregl-cooperative-gesture-screen",i);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),f=document.createElement("div");f.className="maplibregl-desktop-message",f.textContent=u,this._container.appendChild(f);let g=document.createElement("div");g.className="maplibregl-mobile-message",g.textContent=p,this._container.appendChild(g),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(T.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,u){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:i,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ao=y=>y.zoom||y.drag||y.pitch||y.rotate;class rt extends s.k{}function Ch(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class vm{constructor(i,u){this.handleWindowEvent=f=>{this.handleEvent(f,`${f.type}Window`)},this.handleEvent=(f,g)=>{if(f.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let S=f.type==="renderFrame"?void 0:f,E={needsRenderFrame:!1},D={},P={},k=f.touches,N=k?this._getMapTouches(k):void 0,V=N?T.touchPos(this._map.getCanvas(),N):T.mousePos(this._map.getCanvas(),f);for(let{handlerName:J,handler:ne,allowed:re}of this._handlers){if(!ne.isEnabled())continue;let ae;this._blockedByActive(P,re,J)?ne.reset():ne[g||f.type]&&(ae=ne[g||f.type](f,V,N),this.mergeHandlerResult(E,D,ae,J,S),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||ne.isActive())&&(P[J]=ne)}let H={};for(let J in this._previousActiveHandlers)P[J]||(H[J]=S);this._previousActiveHandlers=P,(Object.keys(H).length||Ch(E))&&(this._changes.push([E,D,H]),this._triggerRenderFrame()),(Object.keys(P).length||Ch(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:W}=E;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new sm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);let p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(let[f,g,S]of this._listeners)T.addEventListener(f,g,f===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(let[i,u,p]of this._listeners)T.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){let u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Nv(u,i));let f=u.boxZoom=new qi(u,i);this._add("boxZoom",f),i.interactive&&i.boxZoom&&f.enable();let g=u.cooperativeGestures=new ic(u,i.cooperativeGestures);this._add("cooperativeGestures",g),i.cooperativeGestures&&g.enable();let S=new nc(u),E=new mS(u);u.doubleClickZoom=new ol(E,S),this._add("tapZoom",S),this._add("clickZoom",E),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();let D=new gS;this._add("tapDragZoom",D);let P=u.touchPitch=new rc(u);this._add("touchPitch",P),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);let k=um(i),N=dm(i);u.dragRotate=new Lv(i,k,N),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();let V=(({enable:ae,clickTolerance:K})=>{let ue=new xh({checkCorrectEvent:he=>T.mouseButton(he)===0&&!he.ctrlKey});return new As({clickTolerance:K,move:(he,_e)=>({around:_e,panDelta:_e.sub(he)}),activateOnStart:!0,moveStateManager:ue,enable:ae,assignEvents:wh})})(i),H=new il(i,u);u.dragPan=new Ov(p,V,H),this._add("mousePan",V),this._add("touchPan",H,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);let W=new mm,J=new pm;u.touchZoomRotate=new ym(p,J,W,D),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);let ne=u.scrollZoom=new Mo(u,()=>this._triggerRenderFrame());this._add("scrollZoom",ne,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);let re=u.keyboard=new so(u);this._add("keyboard",re),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new gr(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(let{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(let{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ao(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(let f in i)if(f!==p&&(!u||u.indexOf(f)<0))return!0;return!1}_getMapTouches(i){let u=[];for(let p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,f,g){if(!p)return;s.e(i,p);let S={handlerName:f,originalEvent:p.originalEvent||g};p.zoomDelta!==void 0&&(u.zoom=S),p.panDelta!==void 0&&(u.drag=S),p.pitchDelta!==void 0&&(u.pitch=S),p.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){let i={},u={},p={};for(let[f,g,S]of this._changes)f.panDelta&&(i.panDelta=(i.panDelta||new s.P(0,0))._add(f.panDelta)),f.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(i.around=f.around),f.pinchAround!==void 0&&(i.pinchAround=f.pinchAround),f.noInertia&&(i.noInertia=f.noInertia),s.e(u,g),s.e(p,S);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){let f=this._map,g=f._getTransformForUpdate(),S=f.terrain;if(!(Ch(i)||S&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:E,zoomDelta:D,bearingDelta:P,pitchDelta:k,around:N,pinchAround:V}=i;V!==void 0&&(N=V),f._stop(!0),N=N||f.transform.centerPoint;let H=g.pointLocation(E?N.sub(E):N);P&&(g.bearing+=P),k&&(g.pitch+=k),D&&(g.zoom+=D),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?g.center=g.pointLocation(g.centerPoint.sub(E)):g.setLocationAtPoint(H,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,g.setLocationAtPoint(H,N)):g.setLocationAtPoint(H,N),f._applyUpdatedTransform(g),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){let f=ao(this._eventsInProgress),g=ao(i),S={};for(let N in i){let{originalEvent:V}=i[N];this._eventsInProgress[N]||(S[`${N}start`]=V),this._eventsInProgress[N]=i[N]}!f&&g&&this._fireEvent("movestart",g.originalEvent);for(let N in S)this._fireEvent(N,S[N]);g&&this._fireEvent("move",g.originalEvent);for(let N in i){let{originalEvent:V}=i[N];this._fireEvent(N,V)}let E={},D;for(let N in this._eventsInProgress){let{handlerName:V,originalEvent:H}=this._eventsInProgress[N];this._handlersById[V].isActive()||(delete this._eventsInProgress[N],D=u[V]||H,E[`${N}end`]=D)}for(let N in E)this._fireEvent(N,E[N]);let P=ao(this._eventsInProgress),k=(f||g)&&!P;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();N.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(N)}if(p&&k){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;!N||!N.essential&&C.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:D})),V(this._map.getBearing())&&this._map.resetNorth()):(V(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new s.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new rt("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zv extends s.E{constructor(i,u){super(),this._renderFrameCallback=()=>{let p=Math.min((C.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=s.P.convert(i).mult(-1),this.panTo(this.transform.center,s.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(s.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(s.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(s.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,s.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Ce.convert(i).adjustAntiMeridian();let p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,f){let g={top:0,bottom:0,right:0,left:0};if(typeof(f=s.e({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){let je=f.padding;f.padding={top:je,bottom:je,right:je,left:je}}f.padding=s.e(g,f.padding);let S=this.transform,E=S.padding,D=new Ce(i,u),P=S.project(D.getNorthWest()),k=S.project(D.getNorthEast()),N=S.project(D.getSouthEast()),V=S.project(D.getSouthWest()),H=s.ba(-p),W=P.rotate(H),J=k.rotate(H),ne=N.rotate(H),re=V.rotate(H),ae=new s.P(Math.max(W.x,J.x,re.x,ne.x),Math.max(W.y,J.y,re.y,ne.y)),K=new s.P(Math.min(W.x,J.x,re.x,ne.x),Math.min(W.y,J.y,re.y,ne.y)),ue=ae.sub(K),he=(S.width-(E.left+E.right+f.padding.left+f.padding.right))/ue.x,_e=(S.height-(E.top+E.bottom+f.padding.top+f.padding.bottom))/ue.y;if(_e<0||he<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Pe=Math.min(S.scaleZoom(S.scale*Math.min(he,_e)),f.maxZoom),Le=s.P.convert(f.offset),We=new s.P((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(s.ba(p)),Je=Le.add(We).mult(S.scale/S.zoomScale(Pe));return{center:S.unproject(P.add(N).div(2).sub(Je)),zoom:Pe,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,f,g){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(i)),this.transform.pointLocation(s.P.convert(u)),p,f),f,g)}_fitInternal(i,u,p){return i?(delete(u=s.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();let p=this._getTransformForUpdate(),f=!1,g=!1,S=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(f=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=s.N.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(g=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(S=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new s.k("movestart",u)).fire(new s.k("move",u)),f&&this.fire(new s.k("zoomstart",u)).fire(new s.k("zoom",u)).fire(new s.k("zoomend",u)),g&&this.fire(new s.k("rotatestart",u)).fire(new s.k("rotate",u)).fire(new s.k("rotateend",u)),S&&this.fire(new s.k("pitchstart",u)).fire(new s.k("pitch",u)).fire(new s.k("pitchend",u)),this.fire(new s.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,f=0){let g=s.Z.fromLngLat(i,u),S=s.Z.fromLngLat(p,f),E=S.x-g.x,D=S.y-g.y,P=S.z-g.z,k=Math.hypot(E,D,P);if(k===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(E,D),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/k/this.transform.tileSize),H=180*Math.atan2(E,-D)/Math.PI,W=180*Math.acos(N/k)/Math.PI;return W=P<0?90-W:90+W,{center:S.toLngLat(),zoom:V,pitch:W,bearing:H}}easeTo(i,u){var p;this._stop(!1,i.easeId),((i=s.e({offset:[0,0],duration:500,easing:s.b9},i)).animate===!1||!i.essential&&C.prefersReducedMotion)&&(i.duration=0);let f=this._getTransformForUpdate(),g=f.zoom,S=f.bearing,E=f.pitch,D=f.padding,P="bearing"in i?this._normalizeBearing(i.bearing,S):S,k="pitch"in i?+i.pitch:E,N="padding"in i?i.padding:f.padding,V=s.P.convert(i.offset),H=f.centerPoint.add(V),W=f.pointLocation(H),{center:J,zoom:ne}=f.getConstrained(s.N.convert(i.center||W),(p=i.zoom)!==null&&p!==void 0?p:g);this._normalizeCenter(J,f);let re=f.project(W),ae=f.project(J).sub(re),K=f.zoomScale(ne-g),ue,he;i.around&&(ue=s.N.convert(i.around),he=f.locationPoint(ue));let _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ne!==g,this._rotating=this._rotating||S!==P,this._pitching=this._pitching||k!==E,this._padding=!f.isPaddingEqual(N),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,_e),this.terrain&&this._prepareElevation(J),this._ease(Pe=>{if(this._zooming&&(f.zoom=s.y.number(g,ne,Pe)),this._rotating&&(f.bearing=s.y.number(S,P,Pe)),this._pitching&&(f.pitch=s.y.number(E,k,Pe)),this._padding&&(f.interpolatePadding(D,N,Pe),H=f.centerPoint.add(V)),this.terrain&&!i.freezeElevation&&this._updateElevation(Pe),ue)f.setLocationAtPoint(ue,he);else{let Le=f.zoomScale(f.zoom-g),We=ne>g?Math.min(2,K):Math.max(.5,K),Je=Math.pow(We,1-Pe),je=f.unproject(re.add(ae.mult(Pe*Je)).mult(Le));f.setLocationAtPoint(f.renderWorldCopies?je.wrap():je,H)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},Pe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Pe)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new s.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new s.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new s.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new s.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){let p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){let u=i.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(u.lngLat,i.zoom);if(u.altitude<p){let f=this.calculateCameraOptionsFromTo(u.lngLat,p,i.center,i.elevation);return{pitch:f.pitch,zoom:f.zoom}}return{}}_applyUpdatedTransform(i){let u=[];if(this.terrain&&u.push(f=>this._elevateCameraIfInsideTerrain(f)),this.transformCameraUpdate&&u.push(f=>this.transformCameraUpdate(f)),!u.length)return;let p=i.clone();for(let f of u){let g=p.clone(),{center:S,zoom:E,pitch:D,bearing:P,elevation:k}=f(g);S&&(g.center=S),E!==void 0&&(g.zoom=E),D!==void 0&&(g.pitch=D),P!==void 0&&(g.bearing=P),k!==void 0&&(g.elevation=k),p.apply(g)}this.transform.apply(p)}_fireMoveEvents(i){this.fire(new s.k("move",i)),this._zooming&&this.fire(new s.k("zoom",i)),this._rotating&&this.fire(new s.k("rotate",i)),this._pitching&&this.fire(new s.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;let p=this._zooming,f=this._rotating,g=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new s.k("zoomend",i)),f&&this.fire(new s.k("rotateend",i)),g&&this.fire(new s.k("pitchend",i)),this.fire(new s.k("moveend",i))}flyTo(i,u){var p;if(!i.essential&&C.prefersReducedMotion){let Ke=s.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ke,u)}this.stop(),i=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},i);let f=this._getTransformForUpdate(),g=f.zoom,S=f.bearing,E=f.pitch,D=f.padding,P="bearing"in i?this._normalizeBearing(i.bearing,S):S,k="pitch"in i?+i.pitch:E,N="padding"in i?i.padding:f.padding,V=s.P.convert(i.offset),H=f.centerPoint.add(V),W=f.pointLocation(H),{center:J,zoom:ne}=f.getConstrained(s.N.convert(i.center||W),(p=i.zoom)!==null&&p!==void 0?p:g);this._normalizeCenter(J,f);let re=f.zoomScale(ne-g),ae=f.project(W),K=f.project(J).sub(ae),ue=i.curve,he=Math.max(f.width,f.height),_e=he/re,Pe=K.mag();if("minZoom"in i){let Ke=s.ac(Math.min(i.minZoom,g,ne),f.minZoom,f.maxZoom),Et=he/f.zoomScale(Ke-g);ue=Math.sqrt(Et/Pe*2)}let Le=ue*ue;function We(Ke){let Et=(_e*_e-he*he+(Ke?-1:1)*Le*Le*Pe*Pe)/(2*(Ke?_e:he)*Le*Pe);return Math.log(Math.sqrt(Et*Et+1)-Et)}function Je(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function je(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}let Be=We(!1),at=function(Ke){return je(Be)/je(Be+ue*Ke)},Dt=function(Ke){return he*((je(Be)*(Je(Et=Be+ue*Ke)/je(Et))-Je(Be))/Le)/Pe;var Et},qe=(We(!0)-Be)/ue;if(Math.abs(Pe)<1e-6||!isFinite(qe)){if(Math.abs(he-_e)<1e-6)return this.easeTo(i,u);let Ke=_e<he?-1:1;qe=Math.abs(Math.log(_e/he))/ue,Dt=()=>0,at=Et=>Math.exp(Ke*ue*Et)}return i.duration="duration"in i?+i.duration:1e3*qe/("screenSpeed"in i?+i.screenSpeed/ue:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==P,this._pitching=k!==E,this._padding=!f.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(J),this._ease(Ke=>{let Et=Ke*qe,Qn=1/at(Et);f.zoom=Ke===1?ne:g+f.scaleZoom(Qn),this._rotating&&(f.bearing=s.y.number(S,P,Ke)),this._pitching&&(f.pitch=s.y.number(E,k,Ke)),this._padding&&(f.interpolatePadding(D,N,Ke),H=f.centerPoint.add(V)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ke);let Vt=Ke===1?J:f.unproject(ae.add(K.mult(Dt(Et))).mult(Qn));f.setLocationAtPoint(f.renderWorldCopies?Vt.wrap():Vt,H),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}return i||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=C.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=s.b3(i,-180,180);let p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i,u){if(!u.renderWorldCopies||u.lngRange)return;let p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}let oc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class sc{constructor(i=oc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=T.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=T.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){let p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){let f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}let u=this._map.style.sourceCaches;for(let f in u){let g=u[f];if(g.used||g.usedForTerrain){let S=g.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(f=>String(f).trim()),i.sort((f,g)=>f.length-g.length),i=i.filter((f,g)=>{for(let S=g+1;S<i.length;S++)if(i[S].indexOf(f)>=0)return!1;return!0});let p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _m{constructor(i={}){this._updateCompact=()=>{let u=this._container.children;if(u.length){let p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=T.create("div","maplibregl-ctrl");let u=T.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){T.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class nn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){let u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){let u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(let f of p)if(f.id===i)return void(f.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let u=this._currentlyRunning=this._queue;this._queue=[];for(let p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var xm=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class yS extends s.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];let p={};for(let f of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[f.key]=!0,this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),s.aP(f.posMatrix,0,s.X,0,s.X,0,1),this._tiles[f.key]=new Xs(f,this.tileSize));for(let f in this._tiles)p[f]||delete this._tiles[f]}freeRtt(i){for(let u in this._tiles){let p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){let u={};for(let p of this._renderableTilesKeys){let f=this._tiles[p].tileID;if(f.canonical.equals(i.canonical)){let g=i.clone();g.posMatrix=new Float64Array(16),s.aP(g.posMatrix,0,s.X,0,s.X,0,1),u[p]=g}else if(f.canonical.isChildOf(i.canonical)){let g=i.clone();g.posMatrix=new Float64Array(16);let S=f.canonical.z-i.canonical.z,E=f.canonical.x-(f.canonical.x>>S<<S),D=f.canonical.y-(f.canonical.y>>S<<S),P=s.X>>S;s.aP(g.posMatrix,0,P,0,P,0,1),s.J(g.posMatrix,g.posMatrix,[-E*P,-D*P,0]),u[p]=g}else if(i.canonical.isChildOf(f.canonical)){let g=i.clone();g.posMatrix=new Float64Array(16);let S=i.canonical.z-f.canonical.z,E=i.canonical.x-(i.canonical.x>>S<<S),D=i.canonical.y-(i.canonical.y>>S<<S),P=s.X>>S;s.aP(g.posMatrix,0,s.X,0,s.X,0,1),s.J(g.posMatrix,g.posMatrix,[E*P,D*P,0]),s.K(g.posMatrix,g.posMatrix,[1/2**S,1/2**S,0]),u[p]=g}}return u}getSourceTile(i,u){let p=this.sourceCache._source,f=i.overscaledZ-this.deltaZoom;if(f>p.maxzoom&&(f=p.maxzoom),f<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(f).key);let g=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!g||!g.dem)&&u)for(;f>=p.minzoom&&(!g||!g.dem);)g=this.sourceCache.getTileByID(i.scaledTo(f--).key);return g}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class wm{constructor(i,u,p){this.painter=i,this.sourceCache=new yS(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,f=s.X){var g;if(!(u>=0&&u<f&&p>=0&&p<f))return 0;let S=this.getTerrainData(i),E=(g=S.tile)===null||g===void 0?void 0:g.dem;if(!E)return 0;let D=function(W,J,ne){var re=J[0],ae=J[1];return W[0]=ne[0]*re+ne[4]*ae+ne[12],W[1]=ne[1]*re+ne[5]*ae+ne[13],W}([],[u/f*s.X,p/f*s.X],S.u_terrain_matrix),P=[D[0]*E.dim,D[1]*E.dim],k=Math.floor(P[0]),N=Math.floor(P[1]),V=P[0]-k,H=P[1]-N;return E.get(k,N)*(1-V)*(1-H)+E.get(k+1,N)*V*(1-H)+E.get(k,N+1)*(1-V)*H+E.get(k+1,N+1)*V*H}getElevationForLngLatZoom(i,u){if(!s.bb(u,i.wrap()))return 0;let{tileID:p,mercatorX:f,mercatorY:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,f%s.X,g%s.X,s.X)}getElevation(i,u,p,f=s.X){return this.getDEMElevation(i,u,p,f)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){let f=this.painter.context,g=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new nt(f,g,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new nt(f,new s.R({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}let u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){let f=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new nt(f,u.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),u.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}let p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){let f=this.sourceCache.sourceCache._source.maxzoom,g=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=f?g=i.canonical.z-f:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let S=i.canonical.x-(i.canonical.x>>g<<g),E=i.canonical.y-(i.canonical.y>>g<<g),D=s.bc(new Float64Array(16),[1/(s.X<<g),1/(s.X<<g),0]);s.J(D,D,[S*s.X,E*s.X,0]),this._demMatrixCache[i.key]={matrix:D,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){let u=this.painter,p=u.width/devicePixelRatio,f=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new nt(u.context,{width:p,height:f,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new nt(u.context,{width:p,height:f,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,f,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,f))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let g=0,S=0;g<this._coordsTextureSize;g++)for(let E=0;E<this._coordsTextureSize;E++,S+=4)u[S+0]=255&E,u[S+1]=255&g,u[S+2]=E>>8<<4|g>>8,u[S+3]=0;let p=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),f=new nt(i,p,i.gl.RGBA,{premultiply:!1});return f.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);let u=new Uint8Array(4),p=this.painter.context,f=p.gl,g=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),f.readPixels(g,E-S-1,1,1,f.RGBA,f.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);let D=u[0]+(u[2]>>4<<8),P=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],N=k&&this.sourceCache.getTileByID(k);if(!N)return null;let V=this._coordsTextureSize,H=(1<<N.tileID.canonical.z)*V;return new s.Z((N.tileID.canonical.x*V+D)/H+N.tileID.wrap,(N.tileID.canonical.y*V+P)/H,this.getElevation(N.tileID,D,P,V))}depthAtPoint(i){let u=new Uint8Array(4),p=this.painter.context,f=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),f.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,f.RGBA,f.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let i=this.painter.context,u=new s.bd,p=new s.aY,f=this.meshSize,g=s.X/f,S=f*f;for(let N=0;N<=f;N++)for(let V=0;V<=f;V++)u.emplaceBack(V*g,N*g,0);for(let N=0;N<S;N+=f+1)for(let V=0;V<f;V++)p.emplaceBack(V+N,f+V+N+1,f+V+N+2),p.emplaceBack(V+N,f+V+N+2,V+N+1);let E=u.length,D=E+2*(f+1);for(let N of[0,1])for(let V=0;V<=f;V++)for(let H of[0,1])u.emplaceBack(V*g,N*s.X,H);for(let N=0;N<2*f;N+=2)p.emplaceBack(D+N,D+N+1,D+N+3),p.emplaceBack(D+N,D+N+3,D+N+2),p.emplaceBack(E+N,E+N+3,E+N+1),p.emplaceBack(E+N,E+N+2,E+N+3);let P=u.length,k=P+2*(f+1);for(let N of[0,1])for(let V=0;V<=f;V++)for(let H of[0,1])u.emplaceBack(N*s.X,V*g,H);for(let N=0;N<2*f;N+=2)p.emplaceBack(P+N,P+N+1,P+N+3),p.emplaceBack(P+N,P+N+3,P+N+2),p.emplaceBack(k+N,k+N+3,k+N+1),p.emplaceBack(k+N,k+N+2,k+N+3);return this._mesh=new fh(i.createVertexBuffer(u,xm.members),i.createIndexBuffer(p),s.a0.simpleSegment(0,0,u.length,p.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*s.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;let{tileID:f}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(f).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){let u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){let p=s.Z.fromLngLat(i.wrap()),f=(1<<u)*s.X,g=p.x*f,S=p.y*f,E=Math.floor(g/s.X),D=Math.floor(S/s.X);return{tileID:new s.S(u,0,u,E,D),mercatorX:g,mercatorY:S}}}class vS{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){let u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new nt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(let u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(let i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}let ac={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Uv{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new vS(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(let p in i.sourceCaches){this._coordsDescendingInv[p]={};let f=i.sourceCaches[p].getVisibleCoordinates();for(let g of f){let S=this.terrain.sourceCache.getTerrainCoords(g);for(let E in S)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(S[E])}}this._coordsDescendingInvStr={};for(let p of i._order){let f=i._layers[p],g=f.source;if(ac[f.type]&&!this._coordsDescendingInvStr[g]){this._coordsDescendingInvStr[g]={};for(let S in this._coordsDescendingInv[g])this._coordsDescendingInvStr[g][S]=this._coordsDescendingInv[g][S].map(E=>E.key).sort().join()}}for(let p of this._renderableTiles)for(let f in this._coordsDescendingInvStr){let g=this._coordsDescendingInvStr[f][p.tileID.key];g&&g!==p.rttCoords[f]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;let u=i.type,p=this.painter,f=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(ac[u]&&(this._prevType&&ac[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!f))return!0;if(ac[this._prevType]||ac[u]&&f){this._prevType=u;let g=this._stacks.length-1,S=this._stacks[g]||[];for(let E of this._renderableTiles){if(this.pool.isFull()&&(Pv(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[g]){let P=this.pool.getObjectForId(E.rtt[g].id);if(P.stamp===E.rtt[g].stamp){this.pool.useObject(P);continue}}let D=this.pool.getOrCreateFreeObject();this.pool.useObject(D),this.pool.stampObject(D),E.rtt[g]={id:D.id,stamp:D.stamp},p.context.bindFramebuffer.set(D.fbo.framebuffer),p.context.clear({color:s.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let P=0;P<S.length;P++){let k=p.style._layers[S[P]],N=k.source?this._coordsDescendingInv[k.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,D.fbo.width,D.fbo.height]),p._renderTileClippingMasks(k,N),p.renderLayer(p,p.style.sourceCaches[k.source],k,N),k.source&&(E.rttCoords[k.source]=this._coordsDescendingInvStr[k.source][E.tileID.key])}}return Pv(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ac[u]}return!1}}let bm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Bv=h,_S={hash:!1,interactive:!0,bearingSnap:7,attributionControl:oc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Sm=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},xS={showCompass:!0,showZoom:!0,visualizePitch:!1};class wS{constructor(i,u,p=!1){this.mousedown=S=>{this.startMouse(s.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),T.mousePos(this.element,S)),T.addEventListener(window,"mousemove",this.mousemove),T.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,T.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),T.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let f=i.dragRotate._mouseRotate.getClickTolerance(),g=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=um({clickTolerance:f,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:E,bearingDegreesPerPixelMoved:D=.8})=>{let P=new cm;return new As({clickTolerance:E,move:(k,N)=>({bearingDelta:(N.x-k.x)*D}),moveStateManager:P,enable:S,assignEvents:Sm})})({clickTolerance:f,enable:!0}),this.map=i,p&&(this.mousePitch=dm({clickTolerance:g,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:E,pitchDegreesPerPixelMoved:D=-.5})=>{let P=new cm;return new As({clickTolerance:E,move:(k,N)=>({pitchDelta:(N.y-k.y)*D}),moveStateManager:P,enable:S,assignEvents:Sm})})({clickTolerance:g,enable:!0})),T.addEventListener(u,"mousedown",this.mousedown),T.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),T.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),T.disableDrag()}moveMouse(i,u){let p=this.map,{bearingDelta:f}=this.mouseRotate.dragMove(i,u)||{};if(f&&p.setBearing(p.getBearing()+f),this.mousePitch){let{pitchDelta:g}=this.mousePitch.dragMove(i,u)||{};g&&p.setPitch(p.getPitch()+g)}}moveTouch(i,u){let p=this.map,{bearingDelta:f}=this.touchRotate.dragMove(i,u)||{};if(f&&p.setBearing(p.getBearing()+f),this.touchPitch){let{pitchDelta:g}=this.touchPitch.dragMove(i,u)||{};g&&p.setPitch(p.getPitch()+g)}}off(){let i=this.element;T.removeEventListener(i,"mousedown",this.mousedown),T.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend),T.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){T.enableDrag(),T.removeEventListener(window,"mousemove",this.mousemove),T.removeEventListener(window,"mouseup",this.mouseup),T.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),T.removeEventListener(window,"touchend",this.touchend)}}let Hi;function Jn(y,i,u){let p=new s.N(y.lng,y.lat);if(y=new s.N(y.lng,y.lat),i){let f=new s.N(y.lng-360,y.lat),g=new s.N(y.lng+360,y.lat),S=u.locationPoint(y).distSqr(i);u.locationPoint(f).distSqr(i)<S?y=f:u.locationPoint(g).distSqr(i)<S&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){let f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y.lng!==p.lng&&u.locationPoint(y).y>u.height/2-u.getHorizon()?y:p}let lc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ih(y,i,u){let p=y.classList;for(let f in lc)p.remove(`maplibregl-${u}-anchor-${f}`);p.add(`maplibregl-${u}-anchor-${i}`)}class Eh extends s.E{constructor(i){if(super(),this._onKeyPress=u=>{let p=u.code,f=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&f!==32&&f!==13||this.togglePopup()},this._onMapClick=u=>{let p=u.originalEvent.target,f=this._element;this._popup&&(p===f||f.contains(p))&&this.togglePopup()},this._update=u=>{var p;if(!this._map)return;let f=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Jn(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let S="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?S="rotateX(0deg)":this._pitchAlignment==="map"&&(S=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),T.setTransform(this._element,`${lc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${S} ${g}`),C.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){let p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i?.opacity,i?.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=s.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div");let u=T.createNS("http://www.w3.org/2000/svg","svg"),p=41,f=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${f}px`),u.setAttributeNS(null,"viewBox",`0 0 ${f} ${p}`);let g=T.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"stroke","none"),g.setAttributeNS(null,"stroke-width","1"),g.setAttributeNS(null,"fill","none"),g.setAttributeNS(null,"fill-rule","evenodd");let S=T.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");let E=T.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let re of D){let ae=T.createNS("http://www.w3.org/2000/svg","ellipse");ae.setAttributeNS(null,"opacity","0.04"),ae.setAttributeNS(null,"cx","10.5"),ae.setAttributeNS(null,"cy","5.80029008"),ae.setAttributeNS(null,"rx",re.rx),ae.setAttributeNS(null,"ry",re.ry),E.appendChild(ae)}let P=T.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);let k=T.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(k);let N=T.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let V=T.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(V);let H=T.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");let W=T.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"transform","translate(8.0, 8.0)");let J=T.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#000000"),J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962");let ne=T.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#FFFFFF"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962"),W.appendChild(J),W.appendChild(ne),S.appendChild(E),S.appendChild(P),S.appendChild(N),S.appendChild(H),S.appendChild(W),u.appendChild(S),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",f*this._scale+"px"),this._element.appendChild(u),this._offset=s.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Ih(this._element,this._anchor,"marker"),i&&i.className)for(let u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){let f=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){let i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var u,p;if(!(!((u=this._map)===null||u===void 0)&&u.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let f=this._map,g=f.terrain.depthAtPoint(this._pos),S=f.terrain.getElevationForLngLatZoom(this._lngLat,f.transform.tileZoom);if(f.transform.lngLatToCameraDepth(this._lngLat,S)-g<.006)return void(this._element.style.opacity=this._opacity);let E=-this._offset.y/f.transform._pixelPerMeter,D=Math.sin(f.getPitch()*Math.PI/180)*E,P=f.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),k=f.transform.lngLatToCameraDepth(this._lngLat,S+D)-P>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&k&&this._popup.remove(),this._element.style.opacity=k?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=s.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,u){return i===void 0&&u===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}let Vv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Nu=0,Fu=!1,os={maxWidth:100,unit:"metric"};function Ou(y,i,u){let p=u&&u.maxWidth||100,f=y._container.clientHeight/2,g=y.unproject([0,f]),S=y.unproject([p,f]),E=g.distanceTo(S);if(u&&u.unit==="imperial"){let D=3.2808*E;D>5280?st(i,p,D/5280,y._getUIString("ScaleControl.Miles")):st(i,p,D,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?st(i,p,E/1852,y._getUIString("ScaleControl.NauticalMiles")):E>=1e3?st(i,p,E/1e3,y._getUIString("ScaleControl.Kilometers")):st(i,p,E,y._getUIString("ScaleControl.Meters"))}function st(y,i,u,p){let f=function(g){let S=Math.pow(10,`${Math.floor(g)}`.length-1),E=g/S;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(D){let P=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*P)/P}(E),S*E}(u);y.style.width=i*(f/u)+"px",y.innerHTML=`${f}&nbsp;${p}`}let xt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Th=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Dh(y){if(y){if(typeof y=="number"){let i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,y),"top-left":new s.P(i,i),"top-right":new s.P(-i,i),bottom:new s.P(0,-y),"bottom-left":new s.P(i,-i),"bottom-right":new s.P(-i,-i),left:new s.P(y,0),right:new s.P(-y,0)}}if(y instanceof s.P||Array.isArray(y)){let i=s.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:s.P.convert(y.center||[0,0]),top:s.P.convert(y.top||[0,0]),"top-left":s.P.convert(y["top-left"]||[0,0]),"top-right":s.P.convert(y["top-right"]||[0,0]),bottom:s.P.convert(y.bottom||[0,0]),"bottom-left":s.P.convert(y["bottom-left"]||[0,0]),"bottom-right":s.P.convert(y["bottom-right"]||[0,0]),left:s.P.convert(y.left||[0,0]),right:s.P.convert(y.right||[0,0])}}return Dh(new s.P(0,0))}let Cm=h;a.AJAXError=s.bh,a.Evented=s.E,a.LngLat=s.N,a.MercatorCoordinate=s.Z,a.Point=s.P,a.addProtocol=s.bi,a.config=s.a,a.removeProtocol=s.bj,a.AttributionControl=sc,a.BoxZoomHandler=qi,a.CanvasSource=ro,a.CooperativeGesturesHandler=ic,a.DoubleClickZoomHandler=ol,a.DragPanHandler=Ov,a.DragRotateHandler=Lv,a.EdgeInsets=ec,a.FullscreenControl=class extends s.E{constructor(y={}){super(),this._onFullscreenChange=()=>{var i;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=u?.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){T.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let y=this._fullscreenButton=T.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);T.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=gu,a.GeolocateControl=class extends s.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{let u=new s.N(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,f=this._map.getBearing(),g=s.e({bearing:f},this.options.fitBoundsOptions),S=Ce.fromLngLat(u,p);this._map.fitBounds(S,g,{geolocateSource:!0})},this._updateMarker=i=>{if(i){let u=new s.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Fu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=T.create("button","maplibregl-ctrl-geolocate",this._container),T.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{let u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Eh({element:this._dotElement}),this._circleElement=T.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Eh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Vv,y)}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(i=!1){if(Hi!==void 0&&!i)return Hi;if(window.navigator.permissions===void 0)return Hi=!!window.navigator.geolocation,Hi;try{Hi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hi=!!window.navigator.geolocation}return Hi})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nu=0,Fu=!1}_isOutOfMapMaxBounds(y){let i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),f=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nu--,Fu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nu++,Nu>1?(y={maximumAge:6e5,timeout:0},Fu=!0):(y=this.options.positionOptions,Fu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.Hash=gh,a.ImageSource=Es,a.KeyboardHandler=so,a.LngLatBounds=Ce,a.LogoControl=_m,a.Map=class extends zv{constructor(y){s.bf.mark(s.bg.create);let i=Object.assign(Object.assign({},_S),y);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new tc(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new nn,this._controls=[],this._mapId=s.a4(),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},bm),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ve.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ae(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1,p=Au(f=>{this._trackResize&&!this._removed&&(this.resize(f),this.redraw())},50);this._resizeObserver=new ResizeObserver(f=>{u?p(f):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new vm(this,i),this._hash=i.hash&&new gh(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,s.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new sc(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new _m,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new s.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new s.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new s.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let u=y.onAdd(this);this._controls.push(y);let p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;let u=this._containerDimensions(),p=u[0],f=u[1],g=this._getClampedPixelRatio(p,f);if(this._resizeCanvas(p,f,g),this.painter.resize(p,f,g),this.painter.overLimit()){let E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];let D=this._getClampedPixelRatio(p,f);this._resizeCanvas(p,f,D),this.painter.resize(p,f,D)}this.transform.resize(p,f),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,f);let S=!this._moving;return S&&(this.stop(),this.fire(new s.k("movestart",y)).fire(new s.k("move",y))),this.fire(new s.k("resize",y)),S&&this.fire(new s.k("moveend",y)),this}_getClampedPixelRatio(y,i){let{0:u,1:p}=this._maxCanvasSize,f=this.getPixelRatio(),g=y*f,S=i*f;return Math.min(g>u?u/g:1,S>p?p/S:1)*f}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Ce.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}project(y){return this.transform.locationPoint(s.N.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(s.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layers:i,listener:u,delegates:{mousemove:g=>{let S=i.filter(D=>this.getLayer(D)),E=S.length!==0?this.queryRenderedFeatures(g.point,{layers:S}):[];E.length?p||(p=!0,u.call(this,new ri(y,this,g.originalEvent,{features:E}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layers:i,listener:u,delegates:{mousemove:S=>{let E=i.filter(D=>this.getLayer(D));(E.length!==0?this.queryRenderedFeatures(S.point,{layers:E}):[]).length?p=!0:p&&(p=!1,u.call(this,new ri(y,this,S.originalEvent)))},mouseout:S=>{p&&(p=!1,u.call(this,new ri(y,this,S.originalEvent)))}}}}{let p=f=>{let g=i.filter(E=>this.getLayer(E)),S=g.length!==0?this.queryRenderedFeatures(f.point,{layers:g}):[];S.length&&(f.features=S,u.call(this,f),delete f.features)};return{layers:i,listener:u,delegates:{[y]:p}}}}_saveDelegatedListener(y,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(i)}_removeDelegatedListener(y,i,u){if(!this._delegatedListeners||!this._delegatedListeners[y])return;let p=this._delegatedListeners[y];for(let f=0;f<p.length;f++){let g=p[f];if(g.listener===u&&g.layers.length===i.length&&g.layers.every(S=>i.includes(S))){for(let S in g.delegates)this.off(S,g.delegates[S]);return void p.splice(f,1)}}}on(y,i,u){if(u===void 0)return super.on(y,i);let p=this._createDelegatedListener(y,typeof i=="string"?[i]:i,u);this._saveDelegatedListener(y,p);for(let f in p.delegates)this.on(f,p.delegates[f]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);let p=typeof i=="string"?[i]:i,f=this._createDelegatedListener(y,p,u);for(let g in f.delegates){let S=f.delegates[g];f.delegates[g]=(...E)=>{this._removeDelegatedListener(y,p,u),S(...E)}}this._saveDelegatedListener(y,f);for(let g in f.delegates)this.once(g,f.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._removeDelegatedListener(y,typeof i=="string"?[i]:i,u),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u,p=y instanceof s.P||Array.isArray(y),f=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},f instanceof s.P||typeof f[0]=="number")u=[s.P.convert(f)];else{let g=s.P.convert(f[0]),S=s.P.convert(f[1]);u=[g,new s.P(S.x,g.y),S,new s.P(g.x,S.y),g]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){let i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));let u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new Qd(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Qd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){let u=this._requestManager.transformRequest(y,"Style");s.h(u,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new s.j(p))})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){s.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){let i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new s.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){let i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);this.terrain===null&&i.reload();for(let u in this.style._layers){let p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wm(this.painter,i,y),this.painter.renderToTexture=new Uv(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){let y=this.style&&this.style.sourceCaches;for(let i in y){let u=y[i]._tiles;for(let p in u){let f=u[p];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){let{pixelRatio:p=1,sdf:f=!1,stretchX:g,stretchY:S,content:E,textFitWidth:D,textFitHeight:P}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||s.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:k,height:N,data:V}=i,H=i;return this.style.addImage(y,{data:new s.R({width:k,height:N},new Uint8Array(V)),pixelRatio:p,stretchX:g,stretchY:S,content:E,textFitWidth:D,textFitHeight:P,sdf:f,version:0,userImage:H}),H.onAdd&&H.onAdd(this,y),this}}{let{width:k,height:N,data:V}=C.getImageData(i);this.style.addImage(y,{data:new s.R({width:k,height:N},V),pixelRatio:p,stretchX:g,stretchY:S,content:E,textFitWidth:D,textFitHeight:P,sdf:f,version:0})}}updateImage(y,i){let u=this.style.getImage(y);if(!u)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let p=i instanceof HTMLImageElement||s.b(i)?C.getImageData(i):i,{width:f,height:g,data:S}=p;if(f===void 0||g===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==u.data.width||g!==u.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(i instanceof HTMLImageElement||s.b(i));return u.data.replace(S,E),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y){return ve.getImage(this._requestManager.transformRequest(y,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(y){return this._lazyInitEmptyStyle(),this.style.setSky(y),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){let y=this._container;y.classList.add("maplibregl-map");let i=this._canvasContainer=T.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=T.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);let f=this._controlContainer=T.create("div","maplibregl-control-container",y),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{g[S]=T.create("div",`maplibregl-ctrl-${S} `,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){let y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});let u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){let p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new mh(u,this.transform),F.testSupport(u)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){let i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let f=this.transform.zoom,g=C.now();this.style.zoomHistory.update(f,g);let S=new s.z(f,{now:g,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=S.crossFadingFactor();E===1&&E===this._crossFadingFactor||(u=!0,this._crossFadingFactor=E),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(let u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ve.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();let i=this.painter.context.gl.getExtension("WEBGL_lose_context");i?.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),T.remove(this._canvasContainer),T.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,C.frameAsync(this._frameRequest).then(y=>{s.bf.frame(y),this._frameRequest=null,this._render(y)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Bv}getCameraTargetElevation(){return this.transform.elevation}},a.MapMouseEvent=ri,a.MapTouchEvent=rl,a.MapWheelEvent=kv,a.Marker=Eh,a.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{let i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{let i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{let p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=s.e({},xS,y),this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),T.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=T.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wS(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){let u=T.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},a.Popup=class extends s.E{constructor(y){super(),this.remove=()=>(this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var u;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=T.create("div","maplibregl-popup",this._map.getContainer()),this._tip=T.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Jn(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._trackPointer&&!i)return;let p=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let f=this.options.anchor,g=Dh(this.options.offset);if(!f){let E=this._container.offsetWidth,D=this._container.offsetHeight,P;P=p.y+g.bottom.y<D?["top"]:p.y>this._map.transform.height-D?["bottom"]:[],p.x<E/2?P.push("left"):p.x>this._map.transform.width-E/2&&P.push("right"),f=P.length===0?"bottom":P.join("-")}let S=p.add(g[f]);this.options.subpixelPositioning||(S=S.round()),T.setTransform(this._container,`${lc[f]} translate(${S.x}px,${S.y}px)`),Ih(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(xt),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=s.N.convert(y),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){let i=document.createDocumentFragment(),u=document.createElement("body"),p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){return this._container&&this._container.classList.add(y),this}removeClassName(y){return this._container&&this._container.classList.remove(y),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}setSubpixelPositioning(y){this.options.subpixelPositioning=y}_createCloseButton(){this.options.closeButton&&(this._closeButton=T.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let y=this._container.querySelector(Th);y&&y.focus()}},a.RasterDEMTileSource=ur,a.RasterTileSource=vn,a.ScaleControl=class{constructor(y){this._onMove=()=>{Ou(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ou(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},os),y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=Mo,a.Style=Qd,a.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=y}onAdd(y){return this._map=y,this._container=T.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=T.create("button","maplibregl-ctrl-terrain",this._container),T.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){T.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=rc,a.TwoFingersTouchRotateHandler=mm,a.TwoFingersTouchZoomHandler=pm,a.TwoFingersTouchZoomRotateHandler=ym,a.VectorTileSource=mu,a.VideoSource=Bl,a.addSourceType=(y,i)=>s._(void 0,void 0,void 0,function*(){if(vu(y))throw new Error(`A source type called "${y}" already exists.`);((u,p)=>{yu[u]=p})(y,i)}),a.clearPrewarmedResources=function(){let y=Vn;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(no),Vn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return es().getRTLTextPluginStatus()},a.getVersion=function(){return Cm},a.getWorkerCount=function(){return Ci.workerCount},a.getWorkerUrl=function(){return s.a.WORKER_URL},a.importScriptInWorkers=function(y){return Ws().broadcast("IS",y)},a.prewarm=function(){Cs().acquire(no)},a.setMaxParallelImageRequests=function(y){s.a.MAX_PARALLEL_IMAGE_REQUESTS=y},a.setRTLTextPlugin=function(y,i){return es().setRTLTextPlugin(y,i)},a.setWorkerCount=function(y){Ci.workerCount=y},a.setWorkerUrl=function(y){s.a.WORKER_URL=y}});var r=e;return r})});var CD=fe((qBe,vB)=>{"use strict";function Tte(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}vB.exports=Tte});var xB=fe((HBe,_B)=>{"use strict";function Dte(){this.__data__=[],this.size=0}_B.exports=Dte});var wf=fe((GBe,wB)=>{"use strict";function Ate(e,t){return e===t||e!==e&&t!==t}wB.exports=Ate});var By=fe((WBe,bB)=>{"use strict";var Mte=wf();function Pte(e,t){for(var n=e.length;n--;)if(Mte(e[n][0],t))return n;return-1}bB.exports=Pte});var CB=fe((ZBe,SB)=>{"use strict";var Rte=By(),kte=Array.prototype,Nte=kte.splice;function Fte(e){var t=this.__data__,n=Rte(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nte.call(t,n,1),--this.size,!0}SB.exports=Fte});var EB=fe((KBe,IB)=>{"use strict";var Ote=By();function Lte(e){var t=this.__data__,n=Ote(t,e);return n<0?void 0:t[n][1]}IB.exports=Lte});var DB=fe((YBe,TB)=>{"use strict";var zte=By();function Ute(e){return zte(this.__data__,e)>-1}TB.exports=Ute});var MB=fe((XBe,AB)=>{"use strict";var Bte=By();function Vte(e,t){var n=this.__data__,r=Bte(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}AB.exports=Vte});var Vy=fe((JBe,PB)=>{"use strict";var jte=xB(),$te=CB(),qte=EB(),Hte=DB(),Gte=MB();function bf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bf.prototype.clear=jte;bf.prototype.delete=$te;bf.prototype.get=qte;bf.prototype.has=Hte;bf.prototype.set=Gte;PB.exports=bf});var kB=fe((QBe,RB)=>{"use strict";var Wte=Vy();function Zte(){this.__data__=new Wte,this.size=0}RB.exports=Zte});var FB=fe((e3e,NB)=>{"use strict";function Kte(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}NB.exports=Kte});var LB=fe((t3e,OB)=>{"use strict";function Yte(e){return this.__data__.get(e)}OB.exports=Yte});var UB=fe((n3e,zB)=>{"use strict";function Xte(e){return this.__data__.has(e)}zB.exports=Xte});var ID=fe((r3e,BB)=>{"use strict";var Jte=typeof global=="object"&&global&&global.Object===Object&&global;BB.exports=Jte});var Hs=fe((i3e,VB)=>{"use strict";var Qte=ID(),ene=typeof self=="object"&&self&&self.Object===Object&&self,tne=Qte||ene||Function("return this")();VB.exports=tne});var jy=fe((o3e,jB)=>{"use strict";var nne=Hs(),rne=nne.Symbol;jB.exports=rne});var GB=fe((s3e,HB)=>{"use strict";var $B=jy(),qB=Object.prototype,ine=qB.hasOwnProperty,one=qB.toString,$y=$B?$B.toStringTag:void 0;function sne(e){var t=ine.call(e,$y),n=e[$y];try{e[$y]=void 0;var r=!0}catch{}var a=one.call(e);return r&&(t?e[$y]=n:delete e[$y]),a}HB.exports=sne});var ZB=fe((a3e,WB)=>{"use strict";var ane=Object.prototype,lne=ane.toString;function cne(e){return lne.call(e)}WB.exports=cne});var Hd=fe((l3e,XB)=>{"use strict";var KB=jy(),une=GB(),dne=ZB(),hne="[object Null]",pne="[object Undefined]",YB=KB?KB.toStringTag:void 0;function fne(e){return e==null?e===void 0?pne:hne:YB&&YB in Object(e)?une(e):dne(e)}XB.exports=fne});var $a=fe((c3e,JB)=>{"use strict";function mne(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}JB.exports=mne});var hb=fe((u3e,QB)=>{"use strict";var gne=Hd(),yne=$a(),vne="[object AsyncFunction]",_ne="[object Function]",xne="[object GeneratorFunction]",wne="[object Proxy]";function bne(e){if(!yne(e))return!1;var t=gne(e);return t==_ne||t==xne||t==vne||t==wne}QB.exports=bne});var t3=fe((d3e,e3)=>{"use strict";var Sne=Hs(),Cne=Sne["__core-js_shared__"];e3.exports=Cne});var i3=fe((h3e,r3)=>{"use strict";var ED=t3(),n3=function(){var e=/[^.]+$/.exec(ED&&ED.keys&&ED.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ine(e){return!!n3&&n3 in e}r3.exports=Ine});var TD=fe((p3e,o3)=>{"use strict";var Ene=Function.prototype,Tne=Ene.toString;function Dne(e){if(e!=null){try{return Tne.call(e)}catch{}try{return e+""}catch{}}return""}o3.exports=Dne});var a3=fe((f3e,s3)=>{"use strict";var Ane=hb(),Mne=i3(),Pne=$a(),Rne=TD(),kne=/[\\^$.*+?()[\]{}|]/g,Nne=/^\[object .+?Constructor\]$/,Fne=Function.prototype,One=Object.prototype,Lne=Fne.toString,zne=One.hasOwnProperty,Une=RegExp("^"+Lne.call(zne).replace(kne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bne(e){if(!Pne(e)||Mne(e))return!1;var t=Ane(e)?Une:Nne;return t.test(Rne(e))}s3.exports=Bne});var c3=fe((m3e,l3)=>{"use strict";function Vne(e,t){return e?.[t]}l3.exports=Vne});var au=fe((g3e,u3)=>{"use strict";var jne=a3(),$ne=c3();function qne(e,t){var n=$ne(e,t);return jne(n)?n:void 0}u3.exports=qne});var pb=fe((y3e,d3)=>{"use strict";var Hne=au(),Gne=Hs(),Wne=Hne(Gne,"Map");d3.exports=Wne});var qy=fe((v3e,h3)=>{"use strict";var Zne=au(),Kne=Zne(Object,"create");h3.exports=Kne});var m3=fe((_3e,f3)=>{"use strict";var p3=qy();function Yne(){this.__data__=p3?p3(null):{},this.size=0}f3.exports=Yne});var y3=fe((x3e,g3)=>{"use strict";function Xne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}g3.exports=Xne});var _3=fe((w3e,v3)=>{"use strict";var Jne=qy(),Qne="__lodash_hash_undefined__",ere=Object.prototype,tre=ere.hasOwnProperty;function nre(e){var t=this.__data__;if(Jne){var n=t[e];return n===Qne?void 0:n}return tre.call(t,e)?t[e]:void 0}v3.exports=nre});var w3=fe((b3e,x3)=>{"use strict";var rre=qy(),ire=Object.prototype,ore=ire.hasOwnProperty;function sre(e){var t=this.__data__;return rre?t[e]!==void 0:ore.call(t,e)}x3.exports=sre});var S3=fe((S3e,b3)=>{"use strict";var are=qy(),lre="__lodash_hash_undefined__";function cre(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=are&&t===void 0?lre:t,this}b3.exports=cre});var I3=fe((C3e,C3)=>{"use strict";var ure=m3(),dre=y3(),hre=_3(),pre=w3(),fre=S3();function Sf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sf.prototype.clear=ure;Sf.prototype.delete=dre;Sf.prototype.get=hre;Sf.prototype.has=pre;Sf.prototype.set=fre;C3.exports=Sf});var D3=fe((I3e,T3)=>{"use strict";var E3=I3(),mre=Vy(),gre=pb();function yre(){this.size=0,this.__data__={hash:new E3,map:new(gre||mre),string:new E3}}T3.exports=yre});var M3=fe((E3e,A3)=>{"use strict";function vre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}A3.exports=vre});var Hy=fe((T3e,P3)=>{"use strict";var _re=M3();function xre(e,t){var n=e.__data__;return _re(t)?n[typeof t=="string"?"string":"hash"]:n.map}P3.exports=xre});var k3=fe((D3e,R3)=>{"use strict";var wre=Hy();function bre(e){var t=wre(this,e).delete(e);return this.size-=t?1:0,t}R3.exports=bre});var F3=fe((A3e,N3)=>{"use strict";var Sre=Hy();function Cre(e){return Sre(this,e).get(e)}N3.exports=Cre});var L3=fe((M3e,O3)=>{"use strict";var Ire=Hy();function Ere(e){return Ire(this,e).has(e)}O3.exports=Ere});var U3=fe((P3e,z3)=>{"use strict";var Tre=Hy();function Dre(e,t){var n=Tre(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}z3.exports=Dre});var fb=fe((R3e,B3)=>{"use strict";var Are=D3(),Mre=k3(),Pre=F3(),Rre=L3(),kre=U3();function Cf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cf.prototype.clear=Are;Cf.prototype.delete=Mre;Cf.prototype.get=Pre;Cf.prototype.has=Rre;Cf.prototype.set=kre;B3.exports=Cf});var j3=fe((k3e,V3)=>{"use strict";var Nre=Vy(),Fre=pb(),Ore=fb(),Lre=200;function zre(e,t){var n=this.__data__;if(n instanceof Nre){var r=n.__data__;if(!Fre||r.length<Lre-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ore(r)}return n.set(e,t),this.size=n.size,this}V3.exports=zre});var mb=fe((N3e,$3)=>{"use strict";var Ure=Vy(),Bre=kB(),Vre=FB(),jre=LB(),$re=UB(),qre=j3();function If(e){var t=this.__data__=new Ure(e);this.size=t.size}If.prototype.clear=Bre;If.prototype.delete=Vre;If.prototype.get=jre;If.prototype.has=$re;If.prototype.set=qre;$3.exports=If});var H3=fe((F3e,q3)=>{"use strict";var Hre="__lodash_hash_undefined__";function Gre(e){return this.__data__.set(e,Hre),this}q3.exports=Gre});var W3=fe((O3e,G3)=>{"use strict";function Wre(e){return this.__data__.has(e)}G3.exports=Wre});var K3=fe((L3e,Z3)=>{"use strict";var Zre=fb(),Kre=H3(),Yre=W3();function gb(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Zre;++t<n;)this.add(e[t])}gb.prototype.add=gb.prototype.push=Kre;gb.prototype.has=Yre;Z3.exports=gb});var X3=fe((z3e,Y3)=>{"use strict";function Xre(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}Y3.exports=Xre});var Q3=fe((U3e,J3)=>{"use strict";function Jre(e,t){return e.has(t)}J3.exports=Jre});var DD=fe((B3e,e4)=>{"use strict";var Qre=K3(),eie=X3(),tie=Q3(),nie=1,rie=2;function iie(e,t,n,r,a,s){var h=n&nie,_=e.length,w=t.length;if(_!=w&&!(h&&w>_))return!1;var C=s.get(e),T=s.get(t);if(C&&T)return C==t&&T==e;var F=-1,B=!0,$=n&rie?new Qre:void 0;for(s.set(e,t),s.set(t,e);++F<_;){var ee=e[F],ie=t[F];if(r)var ye=h?r(ie,ee,F,t,e,s):r(ee,ie,F,e,t,s);if(ye!==void 0){if(ye)continue;B=!1;break}if($){if(!eie(t,function(ve,Ae){if(!tie($,Ae)&&(ee===ve||a(ee,ve,n,r,s)))return $.push(Ae)})){B=!1;break}}else if(!(ee===ie||a(ee,ie,n,r,s))){B=!1;break}}return s.delete(e),s.delete(t),B}e4.exports=iie});var AD=fe((V3e,t4)=>{"use strict";var oie=Hs(),sie=oie.Uint8Array;t4.exports=sie});var r4=fe((j3e,n4)=>{"use strict";function aie(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}n4.exports=aie});var o4=fe(($3e,i4)=>{"use strict";function lie(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}i4.exports=lie});var u4=fe((q3e,c4)=>{"use strict";var s4=jy(),a4=AD(),cie=wf(),uie=DD(),die=r4(),hie=o4(),pie=1,fie=2,mie="[object Boolean]",gie="[object Date]",yie="[object Error]",vie="[object Map]",_ie="[object Number]",xie="[object RegExp]",wie="[object Set]",bie="[object String]",Sie="[object Symbol]",Cie="[object ArrayBuffer]",Iie="[object DataView]",l4=s4?s4.prototype:void 0,MD=l4?l4.valueOf:void 0;function Eie(e,t,n,r,a,s,h){switch(n){case Iie:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Cie:return!(e.byteLength!=t.byteLength||!s(new a4(e),new a4(t)));case mie:case gie:case _ie:return cie(+e,+t);case yie:return e.name==t.name&&e.message==t.message;case xie:case bie:return e==t+"";case vie:var _=die;case wie:var w=r&pie;if(_||(_=hie),e.size!=t.size&&!w)return!1;var C=h.get(e);if(C)return C==t;r|=fie,h.set(e,t);var T=uie(_(e),_(t),r,a,s,h);return h.delete(e),T;case Sie:if(MD)return MD.call(e)==MD.call(t)}return!1}c4.exports=Eie});var PD=fe((H3e,d4)=>{"use strict";function Tie(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}d4.exports=Tie});var qa=fe((G3e,h4)=>{"use strict";var Die=Array.isArray;h4.exports=Die});var RD=fe((W3e,p4)=>{"use strict";var Aie=PD(),Mie=qa();function Pie(e,t,n){var r=t(e);return Mie(e)?r:Aie(r,n(e))}p4.exports=Pie});var m4=fe((Z3e,f4)=>{"use strict";function Rie(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var h=e[n];t(h,n,e)&&(s[a++]=h)}return s}f4.exports=Rie});var kD=fe((K3e,g4)=>{"use strict";function kie(){return[]}g4.exports=kie});var ND=fe((Y3e,v4)=>{"use strict";var Nie=m4(),Fie=kD(),Oie=Object.prototype,Lie=Oie.propertyIsEnumerable,y4=Object.getOwnPropertySymbols,zie=y4?function(e){return e==null?[]:(e=Object(e),Nie(y4(e),function(t){return Lie.call(e,t)}))}:Fie;v4.exports=zie});var x4=fe((X3e,_4)=>{"use strict";function Uie(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}_4.exports=Uie});var lu=fe((J3e,w4)=>{"use strict";function Bie(e){return e!=null&&typeof e=="object"}w4.exports=Bie});var S4=fe((Q3e,b4)=>{"use strict";var Vie=Hd(),jie=lu(),$ie="[object Arguments]";function qie(e){return jie(e)&&Vie(e)==$ie}b4.exports=qie});var yb=fe((e4e,E4)=>{"use strict";var C4=S4(),Hie=lu(),I4=Object.prototype,Gie=I4.hasOwnProperty,Wie=I4.propertyIsEnumerable,Zie=C4(function(){return arguments}())?C4:function(e){return Hie(e)&&Gie.call(e,"callee")&&!Wie.call(e,"callee")};E4.exports=Zie});var D4=fe((t4e,T4)=>{"use strict";function Kie(){return!1}T4.exports=Kie});var vb=fe((Gy,Ef)=>{"use strict";var Yie=Hs(),Xie=D4(),P4=typeof Gy=="object"&&Gy&&!Gy.nodeType&&Gy,A4=P4&&typeof Ef=="object"&&Ef&&!Ef.nodeType&&Ef,Jie=A4&&A4.exports===P4,M4=Jie?Yie.Buffer:void 0,Qie=M4?M4.isBuffer:void 0,eoe=Qie||Xie;Ef.exports=eoe});var Wy=fe((n4e,R4)=>{"use strict";var toe=9007199254740991,noe=/^(?:0|[1-9]\d*)$/;function roe(e,t){var n=typeof e;return t=t??toe,!!t&&(n=="number"||n!="symbol"&&noe.test(e))&&e>-1&&e%1==0&&e<t}R4.exports=roe});var _b=fe((r4e,k4)=>{"use strict";var ioe=9007199254740991;function ooe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ioe}k4.exports=ooe});var F4=fe((i4e,N4)=>{"use strict";var soe=Hd(),aoe=_b(),loe=lu(),coe="[object Arguments]",uoe="[object Array]",doe="[object Boolean]",hoe="[object Date]",poe="[object Error]",foe="[object Function]",moe="[object Map]",goe="[object Number]",yoe="[object Object]",voe="[object RegExp]",_oe="[object Set]",xoe="[object String]",woe="[object WeakMap]",boe="[object ArrayBuffer]",Soe="[object DataView]",Coe="[object Float32Array]",Ioe="[object Float64Array]",Eoe="[object Int8Array]",Toe="[object Int16Array]",Doe="[object Int32Array]",Aoe="[object Uint8Array]",Moe="[object Uint8ClampedArray]",Poe="[object Uint16Array]",Roe="[object Uint32Array]",fr={};fr[Coe]=fr[Ioe]=fr[Eoe]=fr[Toe]=fr[Doe]=fr[Aoe]=fr[Moe]=fr[Poe]=fr[Roe]=!0;fr[coe]=fr[uoe]=fr[boe]=fr[doe]=fr[Soe]=fr[hoe]=fr[poe]=fr[foe]=fr[moe]=fr[goe]=fr[yoe]=fr[voe]=fr[_oe]=fr[xoe]=fr[woe]=!1;function koe(e){return loe(e)&&aoe(e.length)&&!!fr[soe(e)]}N4.exports=koe});var L4=fe((o4e,O4)=>{"use strict";function Noe(e){return function(t){return e(t)}}O4.exports=Noe});var U4=fe((Zy,Tf)=>{"use strict";var Foe=ID(),z4=typeof Zy=="object"&&Zy&&!Zy.nodeType&&Zy,Ky=z4&&typeof Tf=="object"&&Tf&&!Tf.nodeType&&Tf,Ooe=Ky&&Ky.exports===z4,FD=Ooe&&Foe.process,Loe=function(){try{var e=Ky&&Ky.require&&Ky.require("util").types;return e||FD&&FD.binding&&FD.binding("util")}catch{}}();Tf.exports=Loe});var xb=fe((s4e,j4)=>{"use strict";var zoe=F4(),Uoe=L4(),B4=U4(),V4=B4&&B4.isTypedArray,Boe=V4?Uoe(V4):zoe;j4.exports=Boe});var OD=fe((a4e,$4)=>{"use strict";var Voe=x4(),joe=yb(),$oe=qa(),qoe=vb(),Hoe=Wy(),Goe=xb(),Woe=Object.prototype,Zoe=Woe.hasOwnProperty;function Koe(e,t){var n=$oe(e),r=!n&&joe(e),a=!n&&!r&&qoe(e),s=!n&&!r&&!a&&Goe(e),h=n||r||a||s,_=h?Voe(e.length,String):[],w=_.length;for(var C in e)(t||Zoe.call(e,C))&&!(h&&(C=="length"||a&&(C=="offset"||C=="parent")||s&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||Hoe(C,w)))&&_.push(C);return _}$4.exports=Koe});var wb=fe((l4e,q4)=>{"use strict";var Yoe=Object.prototype;function Xoe(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yoe;return e===n}q4.exports=Xoe});var LD=fe((c4e,H4)=>{"use strict";function Joe(e,t){return function(n){return e(t(n))}}H4.exports=Joe});var W4=fe((u4e,G4)=>{"use strict";var Qoe=LD(),ese=Qoe(Object.keys,Object);G4.exports=ese});var K4=fe((d4e,Z4)=>{"use strict";var tse=wb(),nse=W4(),rse=Object.prototype,ise=rse.hasOwnProperty;function ose(e){if(!tse(e))return nse(e);var t=[];for(var n in Object(e))ise.call(e,n)&&n!="constructor"&&t.push(n);return t}Z4.exports=ose});var Yy=fe((h4e,Y4)=>{"use strict";var sse=hb(),ase=_b();function lse(e){return e!=null&&ase(e.length)&&!sse(e)}Y4.exports=lse});var zD=fe((p4e,X4)=>{"use strict";var cse=OD(),use=K4(),dse=Yy();function hse(e){return dse(e)?cse(e):use(e)}X4.exports=hse});var Q4=fe((f4e,J4)=>{"use strict";var pse=RD(),fse=ND(),mse=zD();function gse(e){return pse(e,mse,fse)}J4.exports=gse});var n5=fe((m4e,t5)=>{"use strict";var e5=Q4(),yse=1,vse=Object.prototype,_se=vse.hasOwnProperty;function xse(e,t,n,r,a,s){var h=n&yse,_=e5(e),w=_.length,C=e5(t),T=C.length;if(w!=T&&!h)return!1;for(var F=w;F--;){var B=_[F];if(!(h?B in t:_se.call(t,B)))return!1}var $=s.get(e),ee=s.get(t);if($&&ee)return $==t&&ee==e;var ie=!0;s.set(e,t),s.set(t,e);for(var ye=h;++F<w;){B=_[F];var ve=e[B],Ae=t[B];if(r)var ke=h?r(Ae,ve,B,t,e,s):r(ve,Ae,B,e,t,s);if(!(ke===void 0?ve===Ae||a(ve,Ae,n,r,s):ke)){ie=!1;break}ye||(ye=B=="constructor")}if(ie&&!ye){var Ve=e.constructor,Ge=t.constructor;Ve!=Ge&&"constructor"in e&&"constructor"in t&&!(typeof Ve=="function"&&Ve instanceof Ve&&typeof Ge=="function"&&Ge instanceof Ge)&&(ie=!1)}return s.delete(e),s.delete(t),ie}t5.exports=xse});var i5=fe((g4e,r5)=>{"use strict";var wse=au(),bse=Hs(),Sse=wse(bse,"DataView");r5.exports=Sse});var s5=fe((y4e,o5)=>{"use strict";var Cse=au(),Ise=Hs(),Ese=Cse(Ise,"Promise");o5.exports=Ese});var l5=fe((v4e,a5)=>{"use strict";var Tse=au(),Dse=Hs(),Ase=Tse(Dse,"Set");a5.exports=Ase});var u5=fe((_4e,c5)=>{"use strict";var Mse=au(),Pse=Hs(),Rse=Mse(Pse,"WeakMap");c5.exports=Rse});var v5=fe((x4e,y5)=>{"use strict";var UD=i5(),BD=pb(),VD=s5(),jD=l5(),$D=u5(),g5=Hd(),Df=TD(),d5="[object Map]",kse="[object Object]",h5="[object Promise]",p5="[object Set]",f5="[object WeakMap]",m5="[object DataView]",Nse=Df(UD),Fse=Df(BD),Ose=Df(VD),Lse=Df(jD),zse=Df($D),Gd=g5;(UD&&Gd(new UD(new ArrayBuffer(1)))!=m5||BD&&Gd(new BD)!=d5||VD&&Gd(VD.resolve())!=h5||jD&&Gd(new jD)!=p5||$D&&Gd(new $D)!=f5)&&(Gd=function(e){var t=g5(e),n=t==kse?e.constructor:void 0,r=n?Df(n):"";if(r)switch(r){case Nse:return m5;case Fse:return d5;case Ose:return h5;case Lse:return p5;case zse:return f5}return t});y5.exports=Gd});var E5=fe((w4e,I5)=>{"use strict";var qD=mb(),Use=DD(),Bse=u4(),Vse=n5(),_5=v5(),x5=qa(),w5=vb(),jse=xb(),$se=1,b5="[object Arguments]",S5="[object Array]",bb="[object Object]",qse=Object.prototype,C5=qse.hasOwnProperty;function Hse(e,t,n,r,a,s){var h=x5(e),_=x5(t),w=h?S5:_5(e),C=_?S5:_5(t);w=w==b5?bb:w,C=C==b5?bb:C;var T=w==bb,F=C==bb,B=w==C;if(B&&w5(e)){if(!w5(t))return!1;h=!0,T=!1}if(B&&!T)return s||(s=new qD),h||jse(e)?Use(e,t,n,r,a,s):Bse(e,t,w,n,r,a,s);if(!(n&$se)){var $=T&&C5.call(e,"__wrapped__"),ee=F&&C5.call(t,"__wrapped__");if($||ee){var ie=$?e.value():e,ye=ee?t.value():t;return s||(s=new qD),a(ie,ye,n,r,s)}}return B?(s||(s=new qD),Vse(e,t,n,r,a,s)):!1}I5.exports=Hse});var HD=fe((b4e,A5)=>{"use strict";var Gse=E5(),T5=lu();function D5(e,t,n,r,a){return e===t?!0:e==null||t==null||!T5(e)&&!T5(t)?e!==e&&t!==t:Gse(e,t,n,r,D5,a)}A5.exports=D5});var P5=fe((S4e,M5)=>{"use strict";var Wse=mb(),Zse=HD(),Kse=1,Yse=2;function Xse(e,t,n,r){var a=n.length,s=a,h=!r;if(e==null)return!s;for(e=Object(e);a--;){var _=n[a];if(h&&_[2]?_[1]!==e[_[0]]:!(_[0]in e))return!1}for(;++a<s;){_=n[a];var w=_[0],C=e[w],T=_[1];if(h&&_[2]){if(C===void 0&&!(w in e))return!1}else{var F=new Wse;if(r)var B=r(C,T,w,e,t,F);if(!(B===void 0?Zse(T,C,Kse|Yse,r,F):B))return!1}}return!0}M5.exports=Xse});var GD=fe((C4e,R5)=>{"use strict";var Jse=$a();function Qse(e){return e===e&&!Jse(e)}R5.exports=Qse});var N5=fe((I4e,k5)=>{"use strict";var eae=GD(),tae=zD();function nae(e){for(var t=tae(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,eae(a)]}return t}k5.exports=nae});var WD=fe((E4e,F5)=>{"use strict";function rae(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}F5.exports=rae});var L5=fe((T4e,O5)=>{"use strict";var iae=P5(),oae=N5(),sae=WD();function aae(e){var t=oae(e);return t.length==1&&t[0][2]?sae(t[0][0],t[0][1]):function(n){return n===e||iae(n,e,t)}}O5.exports=aae});var Sb=fe((D4e,z5)=>{"use strict";var lae=Hd(),cae=lu(),uae="[object Symbol]";function dae(e){return typeof e=="symbol"||cae(e)&&lae(e)==uae}z5.exports=dae});var Cb=fe((A4e,U5)=>{"use strict";var hae=qa(),pae=Sb(),fae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mae=/^\w*$/;function gae(e,t){if(hae(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pae(e)?!0:mae.test(e)||!fae.test(e)||t!=null&&e in Object(t)}U5.exports=gae});var j5=fe((M4e,V5)=>{"use strict";var B5=fb(),yae="Expected a function";function ZD(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(yae);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var h=e.apply(this,r);return n.cache=s.set(a,h)||s,h};return n.cache=new(ZD.Cache||B5),n}ZD.Cache=B5;V5.exports=ZD});var q5=fe((P4e,$5)=>{"use strict";var vae=j5(),_ae=500;function xae(e){var t=vae(e,function(r){return n.size===_ae&&n.clear(),r}),n=t.cache;return t}$5.exports=xae});var G5=fe((R4e,H5)=>{"use strict";var wae=q5(),bae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sae=/\\(\\)?/g,Cae=wae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(bae,function(n,r,a,s){t.push(a?s.replace(Sae,"$1"):r||n)}),t});H5.exports=Cae});var J5=fe((k4e,X5)=>{"use strict";var W5=jy(),Iae=CD(),Eae=qa(),Tae=Sb(),Dae=1/0,Z5=W5?W5.prototype:void 0,K5=Z5?Z5.toString:void 0;function Y5(e){if(typeof e=="string")return e;if(Eae(e))return Iae(e,Y5)+"";if(Tae(e))return K5?K5.call(e):"";var t=e+"";return t=="0"&&1/e==-Dae?"-0":t}X5.exports=Y5});var eV=fe((N4e,Q5)=>{"use strict";var Aae=J5();function Mae(e){return e==null?"":Aae(e)}Q5.exports=Mae});var Xy=fe((F4e,tV)=>{"use strict";var Pae=qa(),Rae=Cb(),kae=G5(),Nae=eV();function Fae(e,t){return Pae(e)?e:Rae(e,t)?[e]:kae(Nae(e))}tV.exports=Fae});var Af=fe((O4e,nV)=>{"use strict";var Oae=Sb(),Lae=1/0;function zae(e){if(typeof e=="string"||Oae(e))return e;var t=e+"";return t=="0"&&1/e==-Lae?"-0":t}nV.exports=zae});var Ib=fe((L4e,rV)=>{"use strict";var Uae=Xy(),Bae=Af();function Vae(e,t){t=Uae(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Bae(t[n++])];return n&&n==r?e:void 0}rV.exports=Vae});var oV=fe((z4e,iV)=>{"use strict";var jae=Ib();function $ae(e,t,n){var r=e==null?void 0:jae(e,t);return r===void 0?n:r}iV.exports=$ae});var aV=fe((U4e,sV)=>{"use strict";function qae(e,t){return e!=null&&t in Object(e)}sV.exports=qae});var cV=fe((B4e,lV)=>{"use strict";var Hae=Xy(),Gae=yb(),Wae=qa(),Zae=Wy(),Kae=_b(),Yae=Af();function Xae(e,t,n){t=Hae(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var h=Yae(t[r]);if(!(s=e!=null&&n(e,h)))break;e=e[h]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&Kae(a)&&Zae(h,a)&&(Wae(e)||Gae(e)))}lV.exports=Xae});var dV=fe((V4e,uV)=>{"use strict";var Jae=aV(),Qae=cV();function ele(e,t){return e!=null&&Qae(e,t,Jae)}uV.exports=ele});var pV=fe((j4e,hV)=>{"use strict";var tle=HD(),nle=oV(),rle=dV(),ile=Cb(),ole=GD(),sle=WD(),ale=Af(),lle=1,cle=2;function ule(e,t){return ile(e)&&ole(t)?sle(ale(e),t):function(n){var r=nle(n,e);return r===void 0&&r===t?rle(n,e):tle(t,r,lle|cle)}}hV.exports=ule});var Eb=fe(($4e,fV)=>{"use strict";function dle(e){return e}fV.exports=dle});var gV=fe((q4e,mV)=>{"use strict";function hle(e){return function(t){return t?.[e]}}mV.exports=hle});var vV=fe((H4e,yV)=>{"use strict";var ple=Ib();function fle(e){return function(t){return ple(t,e)}}yV.exports=fle});var xV=fe((G4e,_V)=>{"use strict";var mle=gV(),gle=vV(),yle=Cb(),vle=Af();function _le(e){return yle(e)?mle(vle(e)):gle(e)}_V.exports=_le});var bV=fe((W4e,wV)=>{"use strict";var xle=L5(),wle=pV(),ble=Eb(),Sle=qa(),Cle=xV();function Ile(e){return typeof e=="function"?e:e==null?ble:typeof e=="object"?Sle(e)?wle(e[0],e[1]):xle(e):Cle(e)}wV.exports=Ile});var KD=fe((Z4e,SV)=>{"use strict";var Ele=au(),Tle=function(){try{var e=Ele(Object,"defineProperty");return e({},"",{}),e}catch{}}();SV.exports=Tle});var Tb=fe((K4e,IV)=>{"use strict";var CV=KD();function Dle(e,t,n){t=="__proto__"&&CV?CV(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}IV.exports=Dle});var YD=fe((Y4e,EV)=>{"use strict";var Ale=Tb(),Mle=wf(),Ple=Object.prototype,Rle=Ple.hasOwnProperty;function kle(e,t,n){var r=e[t];(!(Rle.call(e,t)&&Mle(r,n))||n===void 0&&!(t in e))&&Ale(e,t,n)}EV.exports=kle});var AV=fe((X4e,DV)=>{"use strict";var Nle=YD(),Fle=Xy(),Ole=Wy(),TV=$a(),Lle=Af();function zle(e,t,n,r){if(!TV(e))return e;t=Fle(t,e);for(var a=-1,s=t.length,h=s-1,_=e;_!=null&&++a<s;){var w=Lle(t[a]),C=n;if(w==="__proto__"||w==="constructor"||w==="prototype")return e;if(a!=h){var T=_[w];C=r?r(T,w,_):void 0,C===void 0&&(C=TV(T)?T:Ole(t[a+1])?[]:{})}Nle(_,w,C),_=_[w]}return e}DV.exports=zle});var PV=fe((J4e,MV)=>{"use strict";var Ule=Ib(),Ble=AV(),Vle=Xy();function jle(e,t,n){for(var r=-1,a=t.length,s={};++r<a;){var h=t[r],_=Ule(e,h);n(_,h)&&Ble(s,Vle(h,e),_)}return s}MV.exports=jle});var Db=fe((Q4e,RV)=>{"use strict";var $le=LD(),qle=$le(Object.getPrototypeOf,Object);RV.exports=qle});var NV=fe((e5e,kV)=>{"use strict";var Hle=PD(),Gle=Db(),Wle=ND(),Zle=kD(),Kle=Object.getOwnPropertySymbols,Yle=Kle?function(e){for(var t=[];e;)Hle(t,Wle(e)),e=Gle(e);return t}:Zle;kV.exports=Yle});var OV=fe((t5e,FV)=>{"use strict";function Xle(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}FV.exports=Xle});var zV=fe((n5e,LV)=>{"use strict";var Jle=$a(),Qle=wb(),ece=OV(),tce=Object.prototype,nce=tce.hasOwnProperty;function rce(e){if(!Jle(e))return ece(e);var t=Qle(e),n=[];for(var r in e)r=="constructor"&&(t||!nce.call(e,r))||n.push(r);return n}LV.exports=rce});var Ab=fe((r5e,UV)=>{"use strict";var ice=OD(),oce=zV(),sce=Yy();function ace(e){return sce(e)?ice(e,!0):oce(e)}UV.exports=ace});var VV=fe((i5e,BV)=>{"use strict";var lce=RD(),cce=NV(),uce=Ab();function dce(e){return lce(e,uce,cce)}BV.exports=dce});var $V=fe((o5e,jV)=>{"use strict";var hce=CD(),pce=bV(),fce=PV(),mce=VV();function gce(e,t){if(e==null)return{};var n=hce(mce(e),function(r){return[r]});return t=pce(t),fce(e,n,function(r,a){return t(r,a[0])})}jV.exports=gce});var XD=fe((m5e,ZV)=>{"use strict";var vue=Tb(),_ue=wf();function xue(e,t,n){(n!==void 0&&!_ue(e[t],n)||n===void 0&&!(t in e))&&vue(e,t,n)}ZV.exports=xue});var YV=fe((g5e,KV)=>{"use strict";function wue(e){return function(t,n,r){for(var a=-1,s=Object(t),h=r(t),_=h.length;_--;){var w=h[e?_:++a];if(n(s[w],w,s)===!1)break}return t}}KV.exports=wue});var JV=fe((y5e,XV)=>{"use strict";var bue=YV(),Sue=bue();XV.exports=Sue});var rj=fe((Qy,Mf)=>{"use strict";var Cue=Hs(),nj=typeof Qy=="object"&&Qy&&!Qy.nodeType&&Qy,QV=nj&&typeof Mf=="object"&&Mf&&!Mf.nodeType&&Mf,Iue=QV&&QV.exports===nj,ej=Iue?Cue.Buffer:void 0,tj=ej?ej.allocUnsafe:void 0;function Eue(e,t){if(t)return e.slice();var n=e.length,r=tj?tj(n):new e.constructor(n);return e.copy(r),r}Mf.exports=Eue});var sj=fe((v5e,oj)=>{"use strict";var ij=AD();function Tue(e){var t=new e.constructor(e.byteLength);return new ij(t).set(new ij(e)),t}oj.exports=Tue});var lj=fe((_5e,aj)=>{"use strict";var Due=sj();function Aue(e,t){var n=t?Due(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}aj.exports=Aue});var uj=fe((x5e,cj)=>{"use strict";function Mue(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}cj.exports=Mue});var pj=fe((w5e,hj)=>{"use strict";var Pue=$a(),dj=Object.create,Rue=function(){function e(){}return function(t){if(!Pue(t))return{};if(dj)return dj(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();hj.exports=Rue});var mj=fe((b5e,fj)=>{"use strict";var kue=pj(),Nue=Db(),Fue=wb();function Oue(e){return typeof e.constructor=="function"&&!Fue(e)?kue(Nue(e)):{}}fj.exports=Oue});var yj=fe((S5e,gj)=>{"use strict";var Lue=Yy(),zue=lu();function Uue(e){return zue(e)&&Lue(e)}gj.exports=Uue});var xj=fe((C5e,_j)=>{"use strict";var Bue=Hd(),Vue=Db(),jue=lu(),$ue="[object Object]",que=Function.prototype,Hue=Object.prototype,vj=que.toString,Gue=Hue.hasOwnProperty,Wue=vj.call(Object);function Zue(e){if(!jue(e)||Bue(e)!=$ue)return!1;var t=Vue(e);if(t===null)return!0;var n=Gue.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&vj.call(n)==Wue}_j.exports=Zue});var JD=fe((I5e,wj)=>{"use strict";function Kue(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}wj.exports=Kue});var Sj=fe((E5e,bj)=>{"use strict";var Yue=YD(),Xue=Tb();function Jue(e,t,n,r){var a=!n;n||(n={});for(var s=-1,h=t.length;++s<h;){var _=t[s],w=r?r(n[_],e[_],_,n,e):void 0;w===void 0&&(w=e[_]),a?Xue(n,_,w):Yue(n,_,w)}return n}bj.exports=Jue});var Ij=fe((T5e,Cj)=>{"use strict";var Que=Sj(),ede=Ab();function tde(e){return Que(e,ede(e))}Cj.exports=tde});var Pj=fe((D5e,Mj)=>{"use strict";var Ej=XD(),nde=rj(),rde=lj(),ide=uj(),ode=mj(),Tj=yb(),Dj=qa(),sde=yj(),ade=vb(),lde=hb(),cde=$a(),ude=xj(),dde=xb(),Aj=JD(),hde=Ij();function pde(e,t,n,r,a,s,h){var _=Aj(e,n),w=Aj(t,n),C=h.get(w);if(C){Ej(e,n,C);return}var T=s?s(_,w,n+"",e,t,h):void 0,F=T===void 0;if(F){var B=Dj(w),$=!B&&ade(w),ee=!B&&!$&&dde(w);T=w,B||$||ee?Dj(_)?T=_:sde(_)?T=ide(_):$?(F=!1,T=nde(w,!0)):ee?(F=!1,T=rde(w,!0)):T=[]:ude(w)||Tj(w)?(T=_,Tj(_)?T=hde(_):(!cde(_)||lde(_))&&(T=ode(w))):F=!1}F&&(h.set(w,T),a(T,w,r,s,h),h.delete(w)),Ej(e,n,T)}Mj.exports=pde});var Nj=fe((A5e,kj)=>{"use strict";var fde=mb(),mde=XD(),gde=JV(),yde=Pj(),vde=$a(),_de=Ab(),xde=JD();function Rj(e,t,n,r,a){e!==t&&gde(t,function(s,h){if(a||(a=new fde),vde(s))yde(e,t,h,n,Rj,r,a);else{var _=r?r(xde(e,h),s,h+"",e,t,a):void 0;_===void 0&&(_=s),mde(e,h,_)}},_de)}kj.exports=Rj});var Oj=fe((M5e,Fj)=>{"use strict";function wde(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}Fj.exports=wde});var Uj=fe((P5e,zj)=>{"use strict";var bde=Oj(),Lj=Math.max;function Sde(e,t,n){return t=Lj(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=Lj(r.length-t,0),h=Array(s);++a<s;)h[a]=r[t+a];a=-1;for(var _=Array(t+1);++a<t;)_[a]=r[a];return _[t]=n(h),bde(e,this,_)}}zj.exports=Sde});var Vj=fe((R5e,Bj)=>{"use strict";function Cde(e){return function(){return e}}Bj.exports=Cde});var qj=fe((k5e,$j)=>{"use strict";var Ide=Vj(),jj=KD(),Ede=Eb(),Tde=jj?function(e,t){return jj(e,"toString",{configurable:!0,enumerable:!1,value:Ide(t),writable:!0})}:Ede;$j.exports=Tde});var Gj=fe((N5e,Hj)=>{"use strict";var Dde=800,Ade=16,Mde=Date.now;function Pde(e){var t=0,n=0;return function(){var r=Mde(),a=Ade-(r-n);if(n=r,a>0){if(++t>=Dde)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Hj.exports=Pde});var Zj=fe((F5e,Wj)=>{"use strict";var Rde=qj(),kde=Gj(),Nde=kde(Rde);Wj.exports=Nde});var Yj=fe((O5e,Kj)=>{"use strict";var Fde=Eb(),Ode=Uj(),Lde=Zj();function zde(e,t){return Lde(Ode(e,t,Fde),e+"")}Kj.exports=zde});var Jj=fe((L5e,Xj)=>{"use strict";var Ude=wf(),Bde=Yy(),Vde=Wy(),jde=$a();function $de(e,t,n){if(!jde(n))return!1;var r=typeof t;return(r=="number"?Bde(n)&&Vde(t,n.length):r=="string"&&t in n)?Ude(n[t],e):!1}Xj.exports=$de});var e6=fe((z5e,Qj)=>{"use strict";var qde=Yj(),Hde=Jj();function Gde(e){return qde(function(t,n){var r=-1,a=n.length,s=a>1?n[a-1]:void 0,h=a>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,h&&Hde(n[0],n[1],h)&&(s=a<3?void 0:s,a=1),t=Object(t);++r<a;){var _=n[r];_&&e(t,_,r,s)}return t})}Qj.exports=Gde});var n6=fe((U5e,t6)=>{"use strict";var Wde=Nj(),Zde=e6(),Kde=Zde(function(e,t,n){Wde(e,t,n)});t6.exports=Kde});var u6=fe((Cje,c6)=>{"use strict";c6.exports=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}});var du=fe(Wd=>{"use strict";var nA,lhe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Wd.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Wd.getSymbolTotalCodewords=function(t){return lhe[t]};Wd.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Wd.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');nA=t};Wd.isKanjiModeEnabled=function(){return typeof nA<"u"};Wd.toSJIS=function(t){return nA(t)}});var Nb=fe(Ss=>{"use strict";Ss.L={bit:1};Ss.M={bit:0};Ss.Q={bit:3};Ss.H={bit:2};function che(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return Ss.L;case"m":case"medium":return Ss.M;case"q":case"quartile":return Ss.Q;case"h":case"high":return Ss.H;default:throw new Error("Unknown EC Level: "+e)}}Ss.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4};Ss.from=function(t,n){if(Ss.isValid(t))return t;try{return che(t)}catch{return n}}});var p6=fe((Tje,h6)=>{"use strict";function d6(){this.buffer=[],this.length=0}d6.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};h6.exports=d6});var m6=fe((Dje,f6)=>{"use strict";function tv(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}tv.prototype.set=function(e,t,n,r){let a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)};tv.prototype.get=function(e,t){return this.data[e*this.size+t]};tv.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};tv.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};f6.exports=tv});var g6=fe(Fb=>{"use strict";var uhe=du().getSymbolSize;Fb.getRowColCoords=function(t){if(t===1)return[];let n=Math.floor(t/7)+2,r=uhe(t),a=r===145?26:Math.ceil((r-13)/(2*n-2))*2,s=[r-7];for(let h=1;h<n-1;h++)s[h]=s[h-1]-a;return s.push(6),s.reverse()};Fb.getPositions=function(t){let n=[],r=Fb.getRowColCoords(t),a=r.length;for(let s=0;s<a;s++)for(let h=0;h<a;h++)s===0&&h===0||s===0&&h===a-1||s===a-1&&h===0||n.push([r[s],r[h]]);return n}});var _6=fe(v6=>{"use strict";var dhe=du().getSymbolSize,y6=7;v6.getPositions=function(t){let n=dhe(t);return[[0,0],[n-y6,0],[0,n-y6]]}});var x6=fe(cr=>{"use strict";cr.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var Zd={N1:3,N2:3,N3:40,N4:10};cr.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7};cr.from=function(t){return cr.isValid(t)?parseInt(t,10):void 0};cr.getPenaltyN1=function(t){let n=t.size,r=0,a=0,s=0,h=null,_=null;for(let w=0;w<n;w++){a=s=0,h=_=null;for(let C=0;C<n;C++){let T=t.get(w,C);T===h?a++:(a>=5&&(r+=Zd.N1+(a-5)),h=T,a=1),T=t.get(C,w),T===_?s++:(s>=5&&(r+=Zd.N1+(s-5)),_=T,s=1)}a>=5&&(r+=Zd.N1+(a-5)),s>=5&&(r+=Zd.N1+(s-5))}return r};cr.getPenaltyN2=function(t){let n=t.size,r=0;for(let a=0;a<n-1;a++)for(let s=0;s<n-1;s++){let h=t.get(a,s)+t.get(a,s+1)+t.get(a+1,s)+t.get(a+1,s+1);(h===4||h===0)&&r++}return r*Zd.N2};cr.getPenaltyN3=function(t){let n=t.size,r=0,a=0,s=0;for(let h=0;h<n;h++){a=s=0;for(let _=0;_<n;_++)a=a<<1&2047|t.get(h,_),_>=10&&(a===1488||a===93)&&r++,s=s<<1&2047|t.get(_,h),_>=10&&(s===1488||s===93)&&r++}return r*Zd.N3};cr.getPenaltyN4=function(t){let n=0,r=t.data.length;for(let s=0;s<r;s++)n+=t.data[s];return Math.abs(Math.ceil(n*100/r/5)-10)*Zd.N4};function hhe(e,t,n){switch(e){case cr.Patterns.PATTERN000:return(t+n)%2===0;case cr.Patterns.PATTERN001:return t%2===0;case cr.Patterns.PATTERN010:return n%3===0;case cr.Patterns.PATTERN011:return(t+n)%3===0;case cr.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case cr.Patterns.PATTERN101:return t*n%2+t*n%3===0;case cr.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case cr.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}cr.applyMask=function(t,n){let r=n.size;for(let a=0;a<r;a++)for(let s=0;s<r;s++)n.isReserved(s,a)||n.xor(s,a,hhe(t,s,a))};cr.getBestMask=function(t,n){let r=Object.keys(cr.Patterns).length,a=0,s=1/0;for(let h=0;h<r;h++){n(h),cr.applyMask(h,t);let _=cr.getPenaltyN1(t)+cr.getPenaltyN2(t)+cr.getPenaltyN3(t)+cr.getPenaltyN4(t);cr.applyMask(h,t),_<s&&(s=_,a=h)}return a}});var iA=fe(rA=>{"use strict";var hu=Nb(),Ob=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Lb=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];rA.getBlocksCount=function(t,n){switch(n){case hu.L:return Ob[(t-1)*4+0];case hu.M:return Ob[(t-1)*4+1];case hu.Q:return Ob[(t-1)*4+2];case hu.H:return Ob[(t-1)*4+3];default:return}};rA.getTotalCodewordsCount=function(t,n){switch(n){case hu.L:return Lb[(t-1)*4+0];case hu.M:return Lb[(t-1)*4+1];case hu.Q:return Lb[(t-1)*4+2];case hu.H:return Lb[(t-1)*4+3];default:return}}});var w6=fe(Ub=>{"use strict";var nv=new Uint8Array(512),zb=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)nv[n]=t,zb[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)nv[n]=nv[n-255]})();Ub.log=function(t){if(t<1)throw new Error("log("+t+")");return zb[t]};Ub.exp=function(t){return nv[t]};Ub.mul=function(t,n){return t===0||n===0?0:nv[zb[t]+zb[n]]}});var b6=fe(rv=>{"use strict";var oA=w6();rv.mul=function(t,n){let r=new Uint8Array(t.length+n.length-1);for(let a=0;a<t.length;a++)for(let s=0;s<n.length;s++)r[a+s]^=oA.mul(t[a],n[s]);return r};rv.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){let a=r[0];for(let h=0;h<n.length;h++)r[h]^=oA.mul(n[h],a);let s=0;for(;s<r.length&&r[s]===0;)s++;r=r.slice(s)}return r};rv.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let r=0;r<t;r++)n=rv.mul(n,new Uint8Array([1,oA.exp(r)]));return n}});var I6=fe((Fje,C6)=>{"use strict";var S6=b6();function sA(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}sA.prototype.initialize=function(t){this.degree=t,this.genPoly=S6.generateECPolynomial(this.degree)};sA.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");let n=new Uint8Array(t.length+this.degree);n.set(t);let r=S6.mod(n,this.genPoly),a=this.degree-r.length;if(a>0){let s=new Uint8Array(this.degree);return s.set(r,a),s}return r};C6.exports=sA});var aA=fe(E6=>{"use strict";E6.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}});var lA=fe(Ll=>{"use strict";var T6="[0-9]+",phe="[A-Z $%*+\\-./:]+",iv="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";iv=iv.replace(/u/g,"\\u");var fhe="(?:(?![A-Z0-9 $%*+\\-./:]|"+iv+`)(?:.|[\r
]))+`;Ll.KANJI=new RegExp(iv,"g");Ll.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ll.BYTE=new RegExp(fhe,"g");Ll.NUMERIC=new RegExp(T6,"g");Ll.ALPHANUMERIC=new RegExp(phe,"g");var mhe=new RegExp("^"+iv+"$"),ghe=new RegExp("^"+T6+"$"),yhe=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ll.testKanji=function(t){return mhe.test(t)};Ll.testNumeric=function(t){return ghe.test(t)};Ll.testAlphanumeric=function(t){return yhe.test(t)}});var pu=fe(Wr=>{"use strict";var vhe=aA(),cA=lA();Wr.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]};Wr.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]};Wr.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]};Wr.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]};Wr.MIXED={bit:-1};Wr.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!vhe.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]};Wr.getBestModeForData=function(t){return cA.testNumeric(t)?Wr.NUMERIC:cA.testAlphanumeric(t)?Wr.ALPHANUMERIC:cA.testKanji(t)?Wr.KANJI:Wr.BYTE};Wr.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")};Wr.isValid=function(t){return t&&t.bit&&t.ccBits};function _he(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return Wr.NUMERIC;case"alphanumeric":return Wr.ALPHANUMERIC;case"kanji":return Wr.KANJI;case"byte":return Wr.BYTE;default:throw new Error("Unknown mode: "+e)}}Wr.from=function(t,n){if(Wr.isValid(t))return t;try{return _he(t)}catch{return n}}});var R6=fe(Kd=>{"use strict";var Bb=du(),xhe=iA(),D6=Nb(),fu=pu(),uA=aA(),M6=7973,A6=Bb.getBCHDigit(M6);function whe(e,t,n){for(let r=1;r<=40;r++)if(t<=Kd.getCapacity(r,n,e))return r}function P6(e,t){return fu.getCharCountIndicator(e,t)+4}function bhe(e,t){let n=0;return e.forEach(function(r){let a=P6(r.mode,t);n+=a+r.getBitsLength()}),n}function She(e,t){for(let n=1;n<=40;n++)if(bhe(e,n)<=Kd.getCapacity(n,t,fu.MIXED))return n}Kd.from=function(t,n){return uA.isValid(t)?parseInt(t,10):n};Kd.getCapacity=function(t,n,r){if(!uA.isValid(t))throw new Error("Invalid QR Code version");typeof r>"u"&&(r=fu.BYTE);let a=Bb.getSymbolTotalCodewords(t),s=xhe.getTotalCodewordsCount(t,n),h=(a-s)*8;if(r===fu.MIXED)return h;let _=h-P6(r,t);switch(r){case fu.NUMERIC:return Math.floor(_/10*3);case fu.ALPHANUMERIC:return Math.floor(_/11*2);case fu.KANJI:return Math.floor(_/13);case fu.BYTE:default:return Math.floor(_/8)}};Kd.getBestVersionForData=function(t,n){let r,a=D6.from(n,D6.M);if(Array.isArray(t)){if(t.length>1)return She(t,a);if(t.length===0)return 1;r=t[0]}else r=t;return whe(r.mode,r.getLength(),a)};Kd.getEncodedBits=function(t){if(!uA.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;Bb.getBCHDigit(n)-A6>=0;)n^=M6<<Bb.getBCHDigit(n)-A6;return t<<12|n}});var O6=fe(F6=>{"use strict";var dA=du(),N6=1335,Che=21522,k6=dA.getBCHDigit(N6);F6.getEncodedBits=function(t,n){let r=t.bit<<3|n,a=r<<10;for(;dA.getBCHDigit(a)-k6>=0;)a^=N6<<dA.getBCHDigit(a)-k6;return(r<<10|a)^Che}});var z6=fe((Vje,L6)=>{"use strict";var Ihe=pu();function Pf(e){this.mode=Ihe.NUMERIC,this.data=e.toString()}Pf.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Pf.prototype.getLength=function(){return this.data.length};Pf.prototype.getBitsLength=function(){return Pf.getBitsLength(this.data.length)};Pf.prototype.write=function(t){let n,r,a;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),a=parseInt(r,10),t.put(a,10);let s=this.data.length-n;s>0&&(r=this.data.substr(n),a=parseInt(r,10),t.put(a,s*3+1))};L6.exports=Pf});var B6=fe((jje,U6)=>{"use strict";var Ehe=pu(),hA=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Rf(e){this.mode=Ehe.ALPHANUMERIC,this.data=e}Rf.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Rf.prototype.getLength=function(){return this.data.length};Rf.prototype.getBitsLength=function(){return Rf.getBitsLength(this.data.length)};Rf.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=hA.indexOf(this.data[n])*45;r+=hA.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(hA.indexOf(this.data[n]),6)};U6.exports=Rf});var j6=fe(($je,V6)=>{"use strict";V6.exports=function(t){for(var n=[],r=t.length,a=0;a<r;a++){var s=t.charCodeAt(a);if(s>=55296&&s<=56319&&r>a+1){var h=t.charCodeAt(a+1);h>=56320&&h<=57343&&(s=(s-55296)*1024+h-56320+65536,a+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer}});var q6=fe((qje,$6)=>{"use strict";var The=j6(),Dhe=pu();function kf(e){this.mode=Dhe.BYTE,this.data=new Uint8Array(The(e))}kf.getBitsLength=function(t){return t*8};kf.prototype.getLength=function(){return this.data.length};kf.prototype.getBitsLength=function(){return kf.getBitsLength(this.data.length)};kf.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};$6.exports=kf});var G6=fe((Hje,H6)=>{"use strict";var Ahe=pu(),Mhe=du();function Nf(e){this.mode=Ahe.KANJI,this.data=e}Nf.getBitsLength=function(t){return t*13};Nf.prototype.getLength=function(){return this.data.length};Nf.prototype.getBitsLength=function(){return Nf.getBitsLength(this.data.length)};Nf.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=Mhe.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};H6.exports=Nf});var W6=fe((Gje,pA)=>{"use strict";var ov={single_source_shortest_paths:function(e,t,n){var r={},a={};a[t]=0;var s=ov.PriorityQueue.make();s.push(t,0);for(var h,_,w,C,T,F,B,$,ee;!s.empty();){h=s.pop(),_=h.value,C=h.cost,T=e[_]||{};for(w in T)T.hasOwnProperty(w)&&(F=T[w],B=C+F,$=a[w],ee=typeof a[w]>"u",(ee||$>B)&&(a[w]=B,s.push(w,B),r[w]=_))}if(typeof n<"u"&&typeof a[n]>"u"){var ie=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(ie)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t,a;r;)n.push(r),a=e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var r=ov.single_source_shortest_paths(e,t,n);return ov.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t=ov.PriorityQueue,n={},r;e=e||{};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n.queue=[],n.sorter=e.sorter||t.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};typeof pA<"u"&&(pA.exports=ov)});var t8=fe(Ff=>{"use strict";var Kn=pu(),Y6=z6(),X6=B6(),J6=q6(),Q6=G6(),sv=lA(),Vb=du(),Phe=W6();function Z6(e){return unescape(encodeURIComponent(e)).length}function av(e,t,n){let r=[],a;for(;(a=e.exec(n))!==null;)r.push({data:a[0],index:a.index,mode:t,length:a[0].length});return r}function e8(e){let t=av(sv.NUMERIC,Kn.NUMERIC,e),n=av(sv.ALPHANUMERIC,Kn.ALPHANUMERIC,e),r,a;return Vb.isKanjiModeEnabled()?(r=av(sv.BYTE,Kn.BYTE,e),a=av(sv.KANJI,Kn.KANJI,e)):(r=av(sv.BYTE_KANJI,Kn.BYTE,e),a=[]),t.concat(n,r,a).sort(function(h,_){return h.index-_.index}).map(function(h){return{data:h.data,mode:h.mode,length:h.length}})}function fA(e,t){switch(t){case Kn.NUMERIC:return Y6.getBitsLength(e);case Kn.ALPHANUMERIC:return X6.getBitsLength(e);case Kn.KANJI:return Q6.getBitsLength(e);case Kn.BYTE:return J6.getBitsLength(e)}}function Rhe(e){return e.reduce(function(t,n){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===n.mode?(t[t.length-1].data+=n.data,t):(t.push(n),t)},[])}function khe(e){let t=[];for(let n=0;n<e.length;n++){let r=e[n];switch(r.mode){case Kn.NUMERIC:t.push([r,{data:r.data,mode:Kn.ALPHANUMERIC,length:r.length},{data:r.data,mode:Kn.BYTE,length:r.length}]);break;case Kn.ALPHANUMERIC:t.push([r,{data:r.data,mode:Kn.BYTE,length:r.length}]);break;case Kn.KANJI:t.push([r,{data:r.data,mode:Kn.BYTE,length:Z6(r.data)}]);break;case Kn.BYTE:t.push([{data:r.data,mode:Kn.BYTE,length:Z6(r.data)}])}}return t}function Nhe(e,t){let n={},r={start:{}},a=["start"];for(let s=0;s<e.length;s++){let h=e[s],_=[];for(let w=0;w<h.length;w++){let C=h[w],T=""+s+w;_.push(T),n[T]={node:C,lastCount:0},r[T]={};for(let F=0;F<a.length;F++){let B=a[F];n[B]&&n[B].node.mode===C.mode?(r[B][T]=fA(n[B].lastCount+C.length,C.mode)-fA(n[B].lastCount,C.mode),n[B].lastCount+=C.length):(n[B]&&(n[B].lastCount=C.length),r[B][T]=fA(C.length,C.mode)+4+Kn.getCharCountIndicator(C.mode,t))}}a=_}for(let s=0;s<a.length;s++)r[a[s]].end=0;return{map:r,table:n}}function K6(e,t){let n,r=Kn.getBestModeForData(e);if(n=Kn.from(t,r),n!==Kn.BYTE&&n.bit<r.bit)throw new Error('"'+e+'" cannot be encoded with mode '+Kn.toString(n)+`.
 Suggested mode is: `+Kn.toString(r));switch(n===Kn.KANJI&&!Vb.isKanjiModeEnabled()&&(n=Kn.BYTE),n){case Kn.NUMERIC:return new Y6(e);case Kn.ALPHANUMERIC:return new X6(e);case Kn.KANJI:return new Q6(e);case Kn.BYTE:return new J6(e)}}Ff.fromArray=function(t){return t.reduce(function(n,r){return typeof r=="string"?n.push(K6(r,null)):r.data&&n.push(K6(r.data,r.mode)),n},[])};Ff.fromString=function(t,n){let r=e8(t,Vb.isKanjiModeEnabled()),a=khe(r),s=Nhe(a,n),h=Phe.find_path(s.map,"start","end"),_=[];for(let w=1;w<h.length-1;w++)_.push(s.table[h[w]].node);return Ff.fromArray(Rhe(_))};Ff.rawSplit=function(t){return Ff.fromArray(e8(t,Vb.isKanjiModeEnabled()))}});var r8=fe(n8=>{"use strict";var $b=du(),mA=Nb(),Fhe=p6(),Ohe=m6(),Lhe=g6(),zhe=_6(),vA=x6(),_A=iA(),Uhe=I6(),jb=R6(),Bhe=O6(),Vhe=pu(),gA=t8();function jhe(e,t){let n=e.size,r=zhe.getPositions(t);for(let a=0;a<r.length;a++){let s=r[a][0],h=r[a][1];for(let _=-1;_<=7;_++)if(!(s+_<=-1||n<=s+_))for(let w=-1;w<=7;w++)h+w<=-1||n<=h+w||(_>=0&&_<=6&&(w===0||w===6)||w>=0&&w<=6&&(_===0||_===6)||_>=2&&_<=4&&w>=2&&w<=4?e.set(s+_,h+w,!0,!0):e.set(s+_,h+w,!1,!0))}}function $he(e){let t=e.size;for(let n=8;n<t-8;n++){let r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function qhe(e,t){let n=Lhe.getPositions(t);for(let r=0;r<n.length;r++){let a=n[r][0],s=n[r][1];for(let h=-2;h<=2;h++)for(let _=-2;_<=2;_++)h===-2||h===2||_===-2||_===2||h===0&&_===0?e.set(a+h,s+_,!0,!0):e.set(a+h,s+_,!1,!0)}}function Hhe(e,t){let n=e.size,r=jb.getEncodedBits(t),a,s,h;for(let _=0;_<18;_++)a=Math.floor(_/3),s=_%3+n-8-3,h=(r>>_&1)===1,e.set(a,s,h,!0),e.set(s,a,h,!0)}function yA(e,t,n){let r=e.size,a=Bhe.getEncodedBits(t,n),s,h;for(s=0;s<15;s++)h=(a>>s&1)===1,s<6?e.set(s,8,h,!0):s<8?e.set(s+1,8,h,!0):e.set(r-15+s,8,h,!0),s<8?e.set(8,r-s-1,h,!0):s<9?e.set(8,15-s-1+1,h,!0):e.set(8,15-s-1,h,!0);e.set(r-8,8,1,!0)}function Ghe(e,t){let n=e.size,r=-1,a=n-1,s=7,h=0;for(let _=n-1;_>0;_-=2)for(_===6&&_--;;){for(let w=0;w<2;w++)if(!e.isReserved(a,_-w)){let C=!1;h<t.length&&(C=(t[h]>>>s&1)===1),e.set(a,_-w,C),s--,s===-1&&(h++,s=7)}if(a+=r,a<0||n<=a){a-=r,r=-r;break}}}function Whe(e,t,n){let r=new Fhe;n.forEach(function(w){r.put(w.mode.bit,4),r.put(w.getLength(),Vhe.getCharCountIndicator(w.mode,e)),w.write(r)});let a=$b.getSymbolTotalCodewords(e),s=_A.getTotalCodewordsCount(e,t),h=(a-s)*8;for(r.getLengthInBits()+4<=h&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);let _=(h-r.getLengthInBits())/8;for(let w=0;w<_;w++)r.put(w%2?17:236,8);return Zhe(r,e,t)}function Zhe(e,t,n){let r=$b.getSymbolTotalCodewords(t),a=_A.getTotalCodewordsCount(t,n),s=r-a,h=_A.getBlocksCount(t,n),_=r%h,w=h-_,C=Math.floor(r/h),T=Math.floor(s/h),F=T+1,B=C-T,$=new Uhe(B),ee=0,ie=new Array(h),ye=new Array(h),ve=0,Ae=new Uint8Array(e.buffer);for(let ut=0;ut<h;ut++){let Mt=ut<w?T:F;ie[ut]=Ae.slice(ee,ee+Mt),ye[ut]=$.encode(ie[ut]),ee+=Mt,ve=Math.max(ve,Mt)}let ke=new Uint8Array(r),Ve=0,Ge,it;for(Ge=0;Ge<ve;Ge++)for(it=0;it<h;it++)Ge<ie[it].length&&(ke[Ve++]=ie[it][Ge]);for(Ge=0;Ge<B;Ge++)for(it=0;it<h;it++)ke[Ve++]=ye[it][Ge];return ke}function Khe(e,t,n,r){let a;if(Array.isArray(e))a=gA.fromArray(e);else if(typeof e=="string"){let C=t;if(!C){let T=gA.rawSplit(e);C=jb.getBestVersionForData(T,n)}a=gA.fromString(e,C||40)}else throw new Error("Invalid data");let s=jb.getBestVersionForData(a,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=s;else if(t<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);let h=Whe(t,n,a),_=$b.getSymbolSize(t),w=new Ohe(_);return jhe(w,t),$he(w),qhe(w,t),yA(w,n,0),t>=7&&Hhe(w,t),Ghe(w,h),isNaN(r)&&(r=vA.getBestMask(w,yA.bind(null,w,n))),vA.applyMask(r,w),yA(w,n,r),{modules:w,version:t,errorCorrectionLevel:n,maskPattern:r,segments:a}}n8.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=mA.M,a,s;return typeof n<"u"&&(r=mA.from(n.errorCorrectionLevel,mA.M),a=jb.from(n.version),s=vA.from(n.maskPattern),n.toSJISFunc&&$b.setToSJISFunction(n.toSJISFunc)),Khe(t,a,r,s)}});var xA=fe(Yd=>{"use strict";function i8(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(r){return[r,r]}))),t.length===6&&t.push("F","F");let n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}Yd.getOptions=function(t){t||(t={}),t.color||(t.color={});let n=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,a=t.scale||4;return{width:r,scale:r?4:a,margin:n,color:{dark:i8(t.color.dark||"#000000ff"),light:i8(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}};Yd.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale};Yd.getImageWidth=function(t,n){let r=Yd.getScale(t,n);return Math.floor((t+n.margin*2)*r)};Yd.qrToImageData=function(t,n,r){let a=n.modules.size,s=n.modules.data,h=Yd.getScale(a,r),_=Math.floor((a+r.margin*2)*h),w=r.margin*h,C=[r.color.light,r.color.dark];for(let T=0;T<_;T++)for(let F=0;F<_;F++){let B=(T*_+F)*4,$=r.color.light;if(T>=w&&F>=w&&T<_-w&&F<_-w){let ee=Math.floor((T-w)/h),ie=Math.floor((F-w)/h);$=C[s[ee*a+ie]?1:0]}t[B++]=$.r,t[B++]=$.g,t[B++]=$.b,t[B]=$.a}}});var o8=fe(qb=>{"use strict";var wA=xA();function Yhe(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}function Xhe(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}qb.render=function(t,n,r){let a=r,s=n;typeof a>"u"&&(!n||!n.getContext)&&(a=n,n=void 0),n||(s=Xhe()),a=wA.getOptions(a);let h=wA.getImageWidth(t.modules.size,a),_=s.getContext("2d"),w=_.createImageData(h,h);return wA.qrToImageData(w.data,t,a),Yhe(_,s,h),_.putImageData(w,0,0),s};qb.renderToDataURL=function(t,n,r){let a=r;typeof a>"u"&&(!n||!n.getContext)&&(a=n,n=void 0),a||(a={});let s=qb.render(t,n,a),h=a.type||"image/png",_=a.rendererOpts||{};return s.toDataURL(h,_.quality)}});var l8=fe(a8=>{"use strict";var Jhe=xA();function s8(e,t){let n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function bA(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Qhe(e,t,n){let r="",a=0,s=!1,h=0;for(let _=0;_<e.length;_++){let w=Math.floor(_%t),C=Math.floor(_/t);!w&&!s&&(s=!0),e[_]?(h++,_>0&&w>0&&e[_-1]||(r+=s?bA("M",w+n,.5+C+n):bA("m",a,0),a=0,s=!1),w+1<t&&e[_+1]||(r+=bA("h",h),h=0)):a++}return r}a8.render=function(t,n,r){let a=Jhe.getOptions(n),s=t.modules.size,h=t.modules.data,_=s+a.margin*2,w=a.color.light.a?"<path "+s8(a.color.light,"fill")+' d="M0 0h'+_+"v"+_+'H0z"/>':"",C="<path "+s8(a.color.dark,"stroke")+' d="'+Qhe(h,s,a.margin)+'"/>',T='viewBox="0 0 '+_+" "+_+'"',B='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+T+' shape-rendering="crispEdges">'+w+C+`</svg>
`;return typeof r=="function"&&r(null,B),B}});var u8=fe(lv=>{"use strict";var epe=u6(),SA=r8(),c8=o8(),tpe=l8();function CA(e,t,n,r,a){let s=[].slice.call(arguments,1),h=s.length,_=typeof s[h-1]=="function";if(!_&&!epe())throw new Error("Callback required as last argument");if(_){if(h<2)throw new Error("Too few arguments provided");h===2?(a=n,n=t,t=r=void 0):h===3&&(t.getContext&&typeof a>"u"?(a=r,r=void 0):(a=r,r=n,n=t,t=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(n=t,t=r=void 0):h===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(w,C){try{let T=SA.create(n,r);w(e(T,t,r))}catch(T){C(T)}})}try{let w=SA.create(n,r);a(null,e(w,t,r))}catch(w){a(w)}}lv.create=SA.create;lv.toCanvas=CA.bind(null,c8.render);lv.toDataURL=CA.bind(null,c8.renderToDataURL);lv.toString=CA.bind(null,function(e,t,n){return tpe.render(e,n)})});function fP(e,t){return Object.is(e,t)}var Qr=null,p_=!1,f_=1,aa=Symbol("SIGNAL");function xn(e){let t=Qr;return Qr=e,t}function mP(){return Qr}var Gm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function g_(e){if(p_)throw new Error("");if(Qr===null)return;Qr.consumerOnSignalRead(e);let t=Qr.nextProducerIndex++;if(__(Qr),t<Qr.producerNode.length&&Qr.producerNode[t]!==e&&Hm(Qr)){let n=Qr.producerNode[t];v_(n,Qr.producerIndexOfThis[t])}Qr.producerNode[t]!==e&&(Qr.producerNode[t]=e,Qr.producerIndexOfThis[t]=Hm(Qr)?_P(e,Qr,t):0),Qr.producerLastReadVersion[t]=e.version}function xq(){f_++}function gP(e){if(!(Hm(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===f_)){if(!e.producerMustRecompute(e)&&!m1(e)){e.dirty=!1,e.lastCleanEpoch=f_;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=f_}}function yP(e){if(e.liveConsumerNode===void 0)return;let t=p_;p_=!0;try{for(let n of e.liveConsumerNode)n.dirty||wq(n)}finally{p_=t}}function vP(){return Qr?.consumerAllowSignalWrites!==!1}function wq(e){e.dirty=!0,yP(e),e.consumerMarkedDirty?.(e)}function y_(e){return e&&(e.nextProducerIndex=0),xn(e)}function f1(e,t){if(xn(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Hm(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)v_(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function m1(e){__(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(gP(n),r!==n.version))return!0}return!1}function g1(e){if(__(e),Hm(e))for(let t=0;t<e.producerNode.length;t++)v_(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function _P(e,t,n){if(xP(e),e.liveConsumerNode.length===0&&wP(e))for(let r=0;r<e.producerNode.length;r++)e.producerIndexOfThis[r]=_P(e.producerNode[r],e,r);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function v_(e,t){if(xP(e),e.liveConsumerNode.length===1&&wP(e))for(let r=0;r<e.producerNode.length;r++)v_(e.producerNode[r],e.producerIndexOfThis[r]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let r=e.liveConsumerIndexOfThis[t],a=e.liveConsumerNode[t];__(a),a.producerIndexOfThis[r]=t}}function Hm(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function __(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function xP(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function wP(e){return e.producerNode!==void 0}function bP(e){let t=Object.create(bq);t.computation=e;let n=()=>{if(gP(t),g_(t),t.value===m_)throw t.error;return t.value};return n[aa]=t,n}var h1=Symbol("UNSET"),p1=Symbol("COMPUTING"),m_=Symbol("ERRORED"),bq=Me(Z({},Gm),{value:h1,dirty:!0,error:null,equal:fP,producerMustRecompute(e){return e.value===h1||e.value===p1},producerRecomputeValue(e){if(e.value===p1)throw new Error("Detected cycle in computations.");let t=e.value;e.value=p1;let n=y_(e),r;try{r=e.computation()}catch(a){r=m_,e.error=a}finally{f1(e,n)}if(t!==h1&&t!==m_&&r!==m_&&e.equal(t,r)){e.value=t;return}e.value=r,e.version++}});function Sq(){throw new Error}var SP=Sq;function CP(){SP()}function IP(e){SP=e}var Cq=null;function EP(e){let t=Object.create(y1);t.value=e;let n=()=>(g_(t),t.value);return n[aa]=t,n}function x_(e,t){vP()||CP(),e.equal(e.value,t)||(e.value=t,Iq(e))}function TP(e,t){vP()||CP(),x_(e,t(e.value))}var y1=Me(Z({},Gm),{equal:fP,value:void 0});function Iq(e){e.version++,xq(),yP(e),Cq?.()}function Wt(e){return typeof e=="function"}function Gh(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var w_=Gh(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,a)=>`${a+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Wm(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Rr=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Wt(r))try{r()}catch(s){t=s instanceof w_?s.errors:[s]}let{_finalizers:a}=this;if(a){this._finalizers=null;for(let s of a)try{DP(s)}catch(h){t=t??[],h instanceof w_?t=[...t,...h.errors]:t.push(h)}}if(t)throw new w_(t)}}add(t){var n;if(t&&t!==this)if(this.closed)DP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Wm(n,t)}remove(t){let{_finalizers:n}=this;n&&Wm(n,t),t instanceof e&&t._removeParent(this)}};Rr.EMPTY=(()=>{let e=new Rr;return e.closed=!0,e})();var v1=Rr.EMPTY;function b_(e){return e instanceof Rr||e&&"closed"in e&&Wt(e.remove)&&Wt(e.add)&&Wt(e.unsubscribe)}function DP(e){Wt(e)?e():e.unsubscribe()}var ks={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Wh={setTimeout(e,t,...n){let{delegate:r}=Wh;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Wh;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function S_(e){Wh.setTimeout(()=>{let{onUnhandledError:t}=ks;if(t)t(e);else throw e})}function Zm(){}var AP=_1("C",void 0,void 0);function MP(e){return _1("E",void 0,e)}function PP(e){return _1("N",e,void 0)}function _1(e,t,n){return{kind:e,value:t,error:n}}var Hu=null;function Zh(e){if(ks.useDeprecatedSynchronousErrorHandling){let t=!Hu;if(t&&(Hu={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Hu;if(Hu=null,n)throw r}}else e()}function RP(e){ks.useDeprecatedSynchronousErrorHandling&&Hu&&(Hu.errorThrown=!0,Hu.error=e)}var Gu=class extends Rr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,b_(t)&&t.add(this)):this.destination=Dq}static create(t,n,r){return new wc(t,n,r)}next(t){this.isStopped?w1(PP(t),this):this._next(t)}error(t){this.isStopped?w1(MP(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?w1(AP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Eq=Function.prototype.bind;function x1(e,t){return Eq.call(e,t)}var b1=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){C_(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){C_(r)}else C_(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){C_(n)}}},wc=class extends Gu{constructor(t,n,r){super();let a;if(Wt(t)||!t)a={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&ks.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),a={next:t.next&&x1(t.next,s),error:t.error&&x1(t.error,s),complete:t.complete&&x1(t.complete,s)}):a=t}this.destination=new b1(a)}};function C_(e){ks.useDeprecatedSynchronousErrorHandling?RP(e):S_(e)}function Tq(e){throw e}function w1(e,t){let{onStoppedNotification:n}=ks;n&&Wh.setTimeout(()=>n(e,t))}var Dq={closed:!0,next:Zm,error:Tq,complete:Zm};var Kh=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zo(e){return e}function S1(...e){return C1(e)}function C1(e){return e.length===0?zo:e.length===1?e[0]:function(n){return e.reduce((r,a)=>a(r),n)}}var Cn=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,a){let s=Mq(n)?n:new wc(n,r,a);return Zh(()=>{let{operator:h,source:_}=this;s.add(h?h.call(s,_):_?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kP(r),new r((a,s)=>{let h=new wc({next:_=>{try{n(_)}catch(w){s(w),h.unsubscribe()}},error:s,complete:a});this.subscribe(h)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Kh](){return this}pipe(...n){return C1(n)(this)}toPromise(n){return n=kP(n),new n((r,a)=>{let s;this.subscribe(h=>s=h,h=>a(h),()=>r(s))})}}return e.create=t=>new e(t),e})();function kP(e){var t;return(t=e??ks.Promise)!==null&&t!==void 0?t:Promise}function Aq(e){return e&&Wt(e.next)&&Wt(e.error)&&Wt(e.complete)}function Mq(e){return e&&e instanceof Gu||Aq(e)&&b_(e)}function I1(e){return Wt(e?.lift)}function In(e){return t=>{if(I1(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function En(e,t,n,r,a){return new E1(e,t,n,r,a)}var E1=class extends Gu{constructor(t,n,r,a,s,h){super(t),this.onFinalize=s,this.shouldUnsubscribe=h,this._next=n?function(_){try{n(_)}catch(w){t.error(w)}}:super._next,this._error=a?function(_){try{a(_)}catch(w){t.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(_){t.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Yh(){return In((e,t)=>{let n=null;e._refCount++;let r=En(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let a=e._connection,s=n;n=null,a&&(!s||a===s)&&a.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}var Xh=class extends Cn{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,I1(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Rr;let n=this.getSubject();t.add(this.source.subscribe(En(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Rr.EMPTY)}return t}refCount(){return Yh()(this)}};var NP=Gh(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Vr=(()=>{class e extends Cn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new I_(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new NP}next(n){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:a,observers:s}=this;return r||a?v1:(this.currentObservers=null,s.push(n),new Rr(()=>{this.currentObservers=null,Wm(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:a,isStopped:s}=this;r?n.error(a):s&&n.complete()}asObservable(){let n=new Cn;return n.source=this,n}}return e.create=(t,n)=>new I_(t,n),e})(),I_=class extends Vr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:v1}};var bi=class extends Vr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Jh=class extends Vr{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(t){let{hasError:n,_hasValue:r,_value:a,thrownError:s,isStopped:h,_isComplete:_}=this;n?t.error(s):(h||_)&&(r&&t.next(a),t.complete())}next(t){this.isStopped||(this._value=t,this._hasValue=!0)}complete(){let{_hasValue:t,_value:n,_isComplete:r}=this;r||(this._isComplete=!0,t&&super.next(n),super.complete())}};var Uo=new Cn(e=>e.complete());function FP(e){return e&&Wt(e.schedule)}function OP(e){return e[e.length-1]}function LP(e){return Wt(OP(e))?e.pop():void 0}function bc(e){return FP(OP(e))?e.pop():void 0}function E_(e,t,n,r){function a(s){return s instanceof n?s:new n(function(h){h(s)})}return new(n||(n=Promise))(function(s,h){function _(T){try{C(r.next(T))}catch(F){h(F)}}function w(T){try{C(r.throw(T))}catch(F){h(F)}}function C(T){T.done?s(T.value):a(T.value).then(_,w)}C((r=r.apply(e,t||[])).next())})}function UP(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,a,s,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=_(0),h.throw=_(1),h.return=_(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function _(C){return function(T){return w([C,T])}}function w(C){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,C[0]&&(n=0)),n;)try{if(r=1,a&&(s=C[0]&2?a.return:C[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,C[1])).done)return s;switch(a=0,s&&(C=[C[0]&2,s.value]),C[0]){case 0:case 1:s=C;break;case 4:return n.label++,{value:C[1],done:!1};case 5:n.label++,a=C[1],C=[0];continue;case 7:C=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(C[0]===6||C[0]===2)){n=0;continue}if(C[0]===3&&(!s||C[1]>s[0]&&C[1]<s[3])){n.label=C[1];break}if(C[0]===6&&n.label<s[1]){n.label=s[1],s=C;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(C);break}s[2]&&n.ops.pop(),n.trys.pop();continue}C=t.call(e,n)}catch(T){C=[6,T],a=0}finally{r=s=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function zP(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wu(e){return this instanceof Wu?(this.v=e,this):new Wu(e)}function BP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),_("next"),_("throw"),_("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h($){return function(ee){return Promise.resolve(ee).then($,F)}}function _($,ee){r[$]&&(a[$]=function(ie){return new Promise(function(ye,ve){s.push([$,ie,ye,ve])>1||w($,ie)})},ee&&(a[$]=ee(a[$])))}function w($,ee){try{C(r[$](ee))}catch(ie){B(s[0][3],ie)}}function C($){$.value instanceof Wu?Promise.resolve($.value.v).then(T,F):B(s[0][2],$)}function T($){w("next",$)}function F($){w("throw",$)}function B($,ee){$(ee),s.shift(),s.length&&w(s[0][0],s[0][1])}}function VP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof zP=="function"?zP(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(h){return new Promise(function(_,w){h=e[s](h),a(_,w,h.done,h.value)})}}function a(s,h,_,w){Promise.resolve(w).then(function(C){s({value:C,done:_})},h)}}var T_=e=>e&&typeof e.length=="number"&&typeof e!="function";function D_(e){return Wt(e?.then)}function A_(e){return Wt(e[Kh])}function M_(e){return Symbol.asyncIterator&&Wt(e?.[Symbol.asyncIterator])}function P_(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Pq(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var R_=Pq();function k_(e){return Wt(e?.[R_])}function N_(e){return BP(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:a}=yield Wu(n.read());if(a)return yield Wu(void 0);yield yield Wu(r)}}finally{n.releaseLock()}})}function F_(e){return Wt(e?.getReader)}function di(e){if(e instanceof Cn)return e;if(e!=null){if(A_(e))return Rq(e);if(T_(e))return kq(e);if(D_(e))return Nq(e);if(M_(e))return jP(e);if(k_(e))return Fq(e);if(F_(e))return Oq(e)}throw P_(e)}function Rq(e){return new Cn(t=>{let n=e[Kh]();if(Wt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kq(e){return new Cn(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Nq(e){return new Cn(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,S_)})}function Fq(e){return new Cn(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function jP(e){return new Cn(t=>{Lq(e,t).catch(n=>t.error(n))})}function Oq(e){return jP(N_(e))}function Lq(e,t){var n,r,a,s;return E_(this,void 0,void 0,function*(){try{for(n=VP(e);r=yield n.next(),!r.done;){let h=r.value;if(t.next(h),t.closed)return}}catch(h){a={error:h}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(a)throw a.error}}t.complete()})}function po(e,t,n,r=0,a=!1){let s=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!a)return s}function O_(e,t=0){return In((n,r)=>{n.subscribe(En(r,a=>po(r,e,()=>r.next(a),t),()=>po(r,e,()=>r.complete(),t),a=>po(r,e,()=>r.error(a),t)))})}function L_(e,t=0){return In((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function $P(e,t){return di(e).pipe(L_(t),O_(t))}function qP(e,t){return di(e).pipe(L_(t),O_(t))}function HP(e,t){return new Cn(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function GP(e,t){return new Cn(n=>{let r;return po(n,t,()=>{r=e[R_](),po(n,t,()=>{let a,s;try{({value:a,done:s}=r.next())}catch(h){n.error(h);return}s?n.complete():n.next(a)},0,!0)}),()=>Wt(r?.return)&&r.return()})}function z_(e,t){if(!e)throw new Error("Iterable cannot be null");return new Cn(n=>{po(n,t,()=>{let r=e[Symbol.asyncIterator]();po(n,t,()=>{r.next().then(a=>{a.done?n.complete():n.next(a.value)})},0,!0)})})}function WP(e,t){return z_(N_(e),t)}function ZP(e,t){if(e!=null){if(A_(e))return $P(e,t);if(T_(e))return HP(e,t);if(D_(e))return qP(e,t);if(M_(e))return z_(e,t);if(k_(e))return GP(e,t);if(F_(e))return WP(e,t)}throw P_(e)}function br(e,t){return t?ZP(e,t):di(e)}function Ft(...e){let t=bc(e);return br(e,t)}function Qh(e,t){let n=Wt(e)?e:()=>e,r=a=>a.error(n());return new Cn(t?a=>t.schedule(r,0,a):r)}function T1(e){return!!e&&(e instanceof Cn||Wt(e.lift)&&Wt(e.subscribe))}var Ns=Gh(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function D1(e,t){let n=typeof t=="object";return new Promise((r,a)=>{let s=new wc({next:h=>{r(h),s.unsubscribe()},error:a,complete:()=>{n?r(t.defaultValue):a(new Ns)}});e.subscribe(s)})}function on(e,t){return In((n,r)=>{let a=0;n.subscribe(En(r,s=>{r.next(e.call(t,s,a++))}))})}var{isArray:zq}=Array;function Uq(e,t){return zq(t)?e(...t):e(t)}function KP(e){return on(t=>Uq(e,t))}var{isArray:Bq}=Array,{getPrototypeOf:Vq,prototype:jq,keys:$q}=Object;function YP(e){if(e.length===1){let t=e[0];if(Bq(t))return{args:t,keys:null};if(qq(t)){let n=$q(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function qq(e){return e&&typeof e=="object"&&Vq(e)===jq}function XP(e,t){return e.reduce((n,r,a)=>(n[r]=t[a],n),{})}function Km(...e){let t=bc(e),n=LP(e),{args:r,keys:a}=YP(e);if(r.length===0)return br([],t);let s=new Cn(Hq(r,t,a?h=>XP(a,h):zo));return n?s.pipe(KP(n)):s}function Hq(e,t,n=zo){return r=>{JP(t,()=>{let{length:a}=e,s=new Array(a),h=a,_=a;for(let w=0;w<a;w++)JP(t,()=>{let C=br(e[w],t),T=!1;C.subscribe(En(r,F=>{s[w]=F,T||(T=!0,_--),_||r.next(n(s.slice()))},()=>{--h||r.complete()}))},r)},r)}}function JP(e,t,n){e?po(n,e,t):t()}function QP(e,t,n,r,a,s,h,_){let w=[],C=0,T=0,F=!1,B=()=>{F&&!w.length&&!C&&t.complete()},$=ie=>C<r?ee(ie):w.push(ie),ee=ie=>{s&&t.next(ie),C++;let ye=!1;di(n(ie,T++)).subscribe(En(t,ve=>{a?.(ve),s?$(ve):t.next(ve)},()=>{ye=!0},void 0,()=>{if(ye)try{for(C--;w.length&&C<r;){let ve=w.shift();h?po(t,h,()=>ee(ve)):ee(ve)}B()}catch(ve){t.error(ve)}}))};return e.subscribe(En(t,$,()=>{F=!0,B()})),()=>{_?.()}}function jr(e,t,n=1/0){return Wt(t)?jr((r,a)=>on((s,h)=>t(r,s,a,h))(di(e(r,a))),n):(typeof t=="number"&&(n=t),In((r,a)=>QP(r,a,e,n)))}function ep(e=1/0){return jr(zo,e)}function e2(){return ep(1)}function tp(...e){return e2()(br(e,bc(e)))}function U_(e){return new Cn(t=>{di(e()).subscribe(t)})}function fo(e,t){return In((n,r)=>{let a=0;n.subscribe(En(r,s=>e.call(t,s,a++)&&r.next(s)))})}function Sc(e){return In((t,n)=>{let r=null,a=!1,s;r=t.subscribe(En(n,void 0,void 0,h=>{s=di(e(h,Sc(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):a=!0})),a&&(r.unsubscribe(),r=null,s.subscribe(n))})}function t2(e,t,n,r,a){return(s,h)=>{let _=n,w=t,C=0;s.subscribe(En(h,T=>{let F=C++;w=_?e(w,T,F):(_=!0,T),r&&h.next(w)},a&&(()=>{_&&h.next(w),h.complete()})))}}function hl(e,t){return Wt(t)?jr(e,t,1):jr(e,1)}function Cc(e){return In((t,n)=>{let r=!1;t.subscribe(En(n,a=>{r=!0,n.next(a)},()=>{r||n.next(e),n.complete()}))})}function pl(e){return e<=0?()=>Uo:In((t,n)=>{let r=0;t.subscribe(En(n,a=>{++r<=e&&(n.next(a),e<=r&&n.complete())}))})}function A1(e){return on(()=>e)}function B_(e=Gq){return In((t,n)=>{let r=!1;t.subscribe(En(n,a=>{r=!0,n.next(a)},()=>r?n.complete():n.error(e())))})}function Gq(){return new Ns}function Zu(e){return In((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function la(e,t){let n=arguments.length>=2;return r=>r.pipe(e?fo((a,s)=>e(a,s,r)):zo,pl(1),n?Cc(t):B_(()=>new Ns))}function np(e){return e<=0?()=>Uo:In((t,n)=>{let r=[];t.subscribe(En(n,a=>{r.push(a),e<r.length&&r.shift()},()=>{for(let a of r)n.next(a);n.complete()},void 0,()=>{r=null}))})}function M1(e,t){let n=arguments.length>=2;return r=>r.pipe(e?fo((a,s)=>e(a,s,r)):zo,np(1),n?Cc(t):B_(()=>new Ns))}function P1(e,t){return In(t2(e,t,arguments.length>=2,!0))}function R1(...e){let t=bc(e);return In((n,r)=>{(t?tp(e,n,t):tp(e,n)).subscribe(r)})}function mo(e,t){return In((n,r)=>{let a=null,s=0,h=!1,_=()=>h&&!a&&r.complete();n.subscribe(En(r,w=>{a?.unsubscribe();let C=0,T=s++;di(e(w,T)).subscribe(a=En(r,F=>r.next(t?t(w,F,T,C++):F),()=>{a=null,_()}))},()=>{h=!0,_()}))})}function Ym(e){return In((t,n)=>{di(e).subscribe(En(n,()=>n.complete(),Zm)),!n.closed&&t.subscribe(n)})}function kr(e,t,n){let r=Wt(e)||t||n?{next:e,error:t,complete:n}:e;return r?In((a,s)=>{var h;(h=r.subscribe)===null||h===void 0||h.call(r);let _=!0;a.subscribe(En(s,w=>{var C;(C=r.next)===null||C===void 0||C.call(r,w),s.next(w)},()=>{var w;_=!1,(w=r.complete)===null||w===void 0||w.call(r),s.complete()},w=>{var C;_=!1,(C=r.error)===null||C===void 0||C.call(r,w),s.error(w)},()=>{var w,C;_&&((w=r.unsubscribe)===null||w===void 0||w.call(r)),(C=r.finalize)===null||C===void 0||C.call(r)}))}):zo}var H2="https://g.co/ng/security#xss",mt=class extends Error{constructor(t,n){super(E0(t,n)),this.code=t}};function E0(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}var G2=Symbol("InputSignalNode#UNSET"),Wq=Me(Z({},y1),{transformFn:void 0,applyValueToInputSignal(e,t){x_(e,t)}});function W2(e,t){let n=Object.create(Wq);n.value=e,n.transformFn=t?.transform;function r(){if(g_(n),n.value===G2)throw new mt(-950,!1);return n.value}return r[aa]=n,r}function cg(e){return{toString:e}.toString()}var V_="__parameters__";function Zq(e){return function(...n){if(e){let r=e(...n);for(let a in r)this[a]=r[a]}}}function Z2(e,t,n){return cg(()=>{let r=Zq(t);function a(...s){if(this instanceof a)return r.apply(this,s),this;let h=new a(...s);return _.annotation=h,_;function _(w,C,T){let F=w.hasOwnProperty(V_)?w[V_]:Object.defineProperty(w,V_,{value:[]})[V_];for(;F.length<=T;)F.push(null);return(F[T]=F[T]||[]).push(h),w}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a})}var ml=globalThis;function ir(e){for(let t in e)if(e[t]===ir)return t;throw Error("Could not find renamed property on target object.")}function Yi(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Yi).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function W1(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Kq=ir({__forward_ref__:ir});function KC(e){return e.__forward_ref__=KC,e.toString=function(){return Yi(this())},e}function Ki(e){return K2(e)?e():e}function K2(e){return typeof e=="function"&&e.hasOwnProperty(Kq)&&e.__forward_ref__===KC}function ft(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Oi(e){return{providers:e.providers||[],imports:e.imports||[]}}function T0(e){return n2(e,X2)||n2(e,J2)}function Y2(e){return T0(e)!==null}function n2(e,t){return e.hasOwnProperty(t)?e[t]:null}function Yq(e){let t=e&&(e[X2]||e[J2]);return t||null}function r2(e){return e&&(e.hasOwnProperty(i2)||e.hasOwnProperty(Xq))?e[i2]:null}var X2=ir({\u0275prov:ir}),i2=ir({\u0275inj:ir}),J2=ir({ngInjectableDef:ir}),Xq=ir({ngInjectorDef:ir}),It=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ft({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Q2(e){return e&&!!e.\u0275providers}var Jq=ir({\u0275cmp:ir}),Qq=ir({\u0275dir:ir}),eH=ir({\u0275pipe:ir}),tH=ir({\u0275mod:ir}),Y_=ir({\u0275fac:ir}),Jm=ir({__NG_ELEMENT_ID__:ir}),o2=ir({__NG_ENV_ID__:ir});function D0(e){return typeof e=="string"?e:e==null?"":String(e)}function nH(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():D0(e)}function rH(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new mt(-200,e)}function YC(e,t){throw new mt(-201,!1)}var ln=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ln||{}),Z1;function eR(){return Z1}function go(e){let t=Z1;return Z1=e,t}function tR(e,t,n){let r=T0(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ln.Optional)return null;if(t!==void 0)return t;YC(e,"Injector")}var iH={},eg=iH,K1="__NG_DI_FLAG__",X_="ngTempTokenPath",oH="ngTokenPath",sH=/\n/gm,aH="\u0275",s2="__source",ap;function lH(){return ap}function Ic(e){let t=ap;return ap=e,t}function cH(e,t=ln.Default){if(ap===void 0)throw new mt(-203,!1);return ap===null?tR(e,void 0,t):ap.get(e,t&ln.Optional?null:void 0,t)}function wt(e,t=ln.Default){return(eR()||cH)(Ki(e),t)}function Fe(e,t=ln.Default){return wt(e,A0(t))}function A0(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Y1(e){let t=[];for(let n=0;n<e.length;n++){let r=Ki(e[n]);if(Array.isArray(r)){if(r.length===0)throw new mt(900,!1);let a,s=ln.Default;for(let h=0;h<r.length;h++){let _=r[h],w=uH(_);typeof w=="number"?w===-1?a=_.token:s|=w:a=_}t.push(wt(a,s))}else t.push(wt(r))}return t}function nR(e,t){return e[K1]=t,e.prototype[K1]=t,e}function uH(e){return e[K1]}function dH(e,t,n,r){let a=e[X_];throw t[s2]&&a.unshift(t[s2]),e.message=hH(`
`+e.message,a,n,r),e[oH]=a,e[X_]=null,e}function hH(e,t,n,r=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==aH?e.slice(2):e;let a=Yi(t);if(Array.isArray(t))a=t.map(Yi).join(" -> ");else if(typeof t=="object"){let s=[];for(let h in t)if(t.hasOwnProperty(h)){let _=t[h];s.push(h+":"+(typeof _=="string"?JSON.stringify(_):Yi(_)))}a=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${a}]: ${e.replace(sH,`
  `)}`}var ug=nR(Z2("Optional"),8);var M0=nR(Z2("SkipSelf"),4);function Yu(e,t){let n=e.hasOwnProperty(Y_);return n?e[Y_]:null}function pH(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let a=e[r],s=t[r];if(n&&(a=n(a),s=n(s)),s!==a)return!1}return!0}function fH(e){return e.flat(Number.POSITIVE_INFINITY)}function XC(e,t){e.forEach(n=>Array.isArray(n)?XC(n,t):t(n))}function rR(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function J_(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function mH(e,t){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function gH(e,t,n,r){let a=e.length;if(a==t)e.push(n,r);else if(a===1)e.push(r,e[0]),e[0]=n;else{for(a--,e.push(e[a-1],e[a]);a>t;){let s=a-2;e[a]=e[s],a--}e[t]=n,e[t+1]=r}}function P0(e,t,n){let r=dg(e,t);return r>=0?e[r|1]=n:(r=~r,gH(e,r,t,n)),r}function k1(e,t){let n=dg(e,t);if(n>=0)return e[n|1]}function dg(e,t){return yH(e,t,1)}function yH(e,t,n){let r=0,a=e.length>>n;for(;a!==r;){let s=r+(a-r>>1),h=e[s<<n];if(t===h)return s<<n;h>t?a=s:r=s+1}return~(a<<n)}var tg={},yo=[],cp=new It(""),iR=new It("",-1),oR=new It(""),Q_=class{get(t,n=eg){if(n===eg){let r=new Error(`NullInjectorError: No provider for ${Yi(t)}!`);throw r.name="NullInjectorError",r}return n}},sR=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(sR||{}),da=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(da||{}),Dc=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Dc||{});function vH(e,t,n){let r=e.length;for(;;){let a=e.indexOf(t,n);if(a===-1)return a;if(a===0||e.charCodeAt(a-1)<=32){let s=t.length;if(a+s===r||e.charCodeAt(a+s)<=32)return a}n=a+1}}function X1(e,t,n){let r=0;for(;r<n.length;){let a=n[r];if(typeof a=="number"){if(a!==0)break;r++;let s=n[r++],h=n[r++],_=n[r++];e.setAttribute(t,h,_,s)}else{let s=a,h=n[++r];xH(s)?e.setProperty(t,s,h):e.setAttribute(t,s,h),r++}}return r}function _H(e){return e===3||e===4||e===6}function xH(e){return e.charCodeAt(0)===64}function JC(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let a=t[r];typeof a=="number"?n=a:n===0||(n===-1||n===2?a2(e,n,a,null,t[++r]):a2(e,n,a,null,null))}}return e}function a2(e,t,n,r,a){let s=0,h=e.length;if(t===-1)h=-1;else for(;s<e.length;){let _=e[s++];if(typeof _=="number"){if(_===t){h=-1;break}else if(_>t){h=s-1;break}}}for(;s<e.length;){let _=e[s];if(typeof _=="number")break;if(_===n){if(r===null){a!==null&&(e[s+1]=a);return}else if(r===e[s+1]){e[s+2]=a;return}}s++,r!==null&&s++,a!==null&&s++}h!==-1&&(e.splice(h,0,t),s=h+1),e.splice(s++,0,n),r!==null&&e.splice(s++,0,r),a!==null&&e.splice(s++,0,a)}var aR="ng-template";function wH(e,t,n,r){let a=0;if(r){for(;a<t.length&&typeof t[a]=="string";a+=2)if(t[a]==="class"&&vH(t[a+1].toLowerCase(),n,0)!==-1)return!0}else if(QC(e))return!1;if(a=t.indexOf(1,a),a>-1){let s;for(;++a<t.length&&typeof(s=t[a])=="string";)if(s.toLowerCase()===n)return!0}return!1}function QC(e){return e.type===4&&e.value!==aR}function bH(e,t,n){let r=e.type===4&&!n?aR:e.value;return t===r}function SH(e,t,n){let r=4,a=e.attrs,s=a!==null?EH(a):0,h=!1;for(let _=0;_<t.length;_++){let w=t[_];if(typeof w=="number"){if(!h&&!Fs(r)&&!Fs(w))return!1;if(h&&Fs(w))continue;h=!1,r=w|r&1;continue}if(!h)if(r&4){if(r=2|r&1,w!==""&&!bH(e,w,n)||w===""&&t.length===1){if(Fs(r))return!1;h=!0}}else if(r&8){if(a===null||!wH(e,a,w,n)){if(Fs(r))return!1;h=!0}}else{let C=t[++_],T=CH(w,a,QC(e),n);if(T===-1){if(Fs(r))return!1;h=!0;continue}if(C!==""){let F;if(T>s?F="":F=a[T+1].toLowerCase(),r&2&&C!==F){if(Fs(r))return!1;h=!0}}}}return Fs(r)||h}function Fs(e){return(e&1)===0}function CH(e,t,n,r){if(t===null)return-1;let a=0;if(r||!n){let s=!1;for(;a<t.length;){let h=t[a];if(h===e)return a;if(h===3||h===6)s=!0;else if(h===1||h===2){let _=t[++a];for(;typeof _=="string";)_=t[++a];continue}else{if(h===4)break;if(h===0){a+=4;continue}}a+=s?1:2}return-1}else return TH(t,e)}function lR(e,t,n=!1){for(let r=0;r<t.length;r++)if(SH(e,t[r],n))return!0;return!1}function IH(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function EH(e){for(let t=0;t<e.length;t++){let n=e[t];if(_H(n))return t}return e.length}function TH(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function DH(e,t){e:for(let n=0;n<t.length;n++){let r=t[n];if(e.length===r.length){for(let a=0;a<e.length;a++)if(e[a]!==r[a])continue e;return!0}}return!1}function l2(e,t){return e?":not("+t.trim()+")":t}function AH(e){let t=e[0],n=1,r=2,a="",s=!1;for(;n<e.length;){let h=e[n];if(typeof h=="string")if(r&2){let _=e[++n];a+="["+h+(_.length>0?'="'+_+'"':"")+"]"}else r&8?a+="."+h:r&4&&(a+=" "+h);else a!==""&&!Fs(h)&&(t+=l2(s,a),a=""),r=h,s=s||!Fs(r);n++}return a!==""&&(t+=l2(s,a)),t}function MH(e){return e.map(AH).join(",")}function PH(e){let t=[],n=[],r=1,a=2;for(;r<e.length;){let s=e[r];if(typeof s=="string")a===2?s!==""&&t.push(s,e[++r]):a===8&&n.push(s);else{if(!Fs(a))break;a=s}r++}return{attrs:t,classes:n}}function Zt(e){return cg(()=>{let t=fR(e),n=Me(Z({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===sR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||da.Emulated,styles:e.styles||yo,_:null,schemas:e.schemas||null,tView:null,id:""});mR(n);let r=e.dependencies;return n.directiveDefs=u2(r,!1),n.pipeDefs=u2(r,!0),n.id=NH(n),n})}function RH(e){return Ac(e)||uR(e)}function kH(e){return e!==null}function Li(e){return cg(()=>({type:e.type,bootstrap:e.bootstrap||yo,declarations:e.declarations||yo,imports:e.imports||yo,exports:e.exports||yo,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function c2(e,t){if(e==null)return tg;let n={};for(let r in e)if(e.hasOwnProperty(r)){let a=e[r],s,h,_=Dc.None;Array.isArray(a)?(_=a[0],s=a[1],h=a[2]??s):(s=a,h=a),t?(n[s]=_!==Dc.None?[r,_]:r,t[s]=h):n[s]=r}return n}function va(e){return cg(()=>{let t=fR(e);return mR(t),t})}function cR(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Ac(e){return e[Jq]||null}function uR(e){return e[Qq]||null}function dR(e){return e[eH]||null}function hR(e){let t=Ac(e)||uR(e)||dR(e);return t!==null?t.standalone:!1}function pR(e,t){let n=e[tH]||null;if(!n&&t===!0)throw new Error(`Type ${Yi(e)} does not have '\u0275mod' property.`);return n}function fR(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||tg,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||yo,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:c2(e.inputs,t),outputs:c2(e.outputs),debugInfo:null}}function mR(e){e.features?.forEach(t=>t(e))}function u2(e,t){if(!e)return null;let n=t?dR:RH;return()=>(typeof e=="function"?e():e).map(r=>n(r)).filter(kH)}function NH(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let a of n)t=Math.imul(31,t)+a.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function R0(e){return{\u0275providers:e}}function FH(...e){return{\u0275providers:gR(!0,e),\u0275fromNgModule:!0}}function gR(e,...t){let n=[],r=new Set,a,s=h=>{n.push(h)};return XC(t,h=>{let _=h;J1(_,s,[],r)&&(a||=[],a.push(_))}),a!==void 0&&yR(a,s),n}function yR(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:a}=e[n];eI(a,s=>{t(s,r)})}}function J1(e,t,n,r){if(e=Ki(e),!e)return!1;let a=null,s=r2(e),h=!s&&Ac(e);if(!s&&!h){let w=e.ngModule;if(s=r2(w),s)a=w;else return!1}else{if(h&&!h.standalone)return!1;a=e}let _=r.has(a);if(h){if(_)return!1;if(r.add(a),h.dependencies){let w=typeof h.dependencies=="function"?h.dependencies():h.dependencies;for(let C of w)J1(C,t,n,r)}}else if(s){if(s.imports!=null&&!_){r.add(a);let C;try{XC(s.imports,T=>{J1(T,t,n,r)&&(C||=[],C.push(T))})}finally{}C!==void 0&&yR(C,t)}if(!_){let C=Yu(a)||(()=>new a);t({provide:a,useFactory:C,deps:yo},a),t({provide:oR,useValue:a,multi:!0},a),t({provide:cp,useValue:()=>wt(a),multi:!0},a)}let w=s.providers;if(w!=null&&!_){let C=e;eI(w,T=>{t(T,C)})}}else return!1;return a!==e&&e.providers!==void 0}function eI(e,t){for(let n of e)Q2(n)&&(n=n.\u0275providers),Array.isArray(n)?eI(n,t):t(n)}var OH=ir({provide:String,useValue:ir});function vR(e){return e!==null&&typeof e=="object"&&OH in e}function LH(e){return!!(e&&e.useExisting)}function zH(e){return!!(e&&e.useFactory)}function up(e){return typeof e=="function"}function UH(e){return!!e.useClass}var k0=new It(""),H_={},BH={},N1;function tI(){return N1===void 0&&(N1=new Q_),N1}var Ji=class{},ng=class extends Ji{get destroyed(){return this._destroyed}constructor(t,n,r,a){super(),this.parent=n,this.source=r,this.scopes=a,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,eC(t,h=>this.processProvider(h)),this.records.set(iR,rp(void 0,this)),a.has("environment")&&this.records.set(Ji,rp(void 0,this));let s=this.records.get(k0);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(oR,yo,ln.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=xn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xn(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Ic(this),r=go(void 0),a;try{return t()}finally{Ic(n),go(r)}}get(t,n=eg,r=ln.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(o2))return t[o2](this);r=A0(r);let a,s=Ic(this),h=go(void 0);try{if(!(r&ln.SkipSelf)){let w=this.records.get(t);if(w===void 0){let C=HH(t)&&T0(t);C&&this.injectableDefInScope(C)?w=rp(Q1(t),H_):w=null,this.records.set(t,w)}if(w!=null)return this.hydrate(t,w)}let _=r&ln.Self?tI():this.parent;return n=r&ln.Optional&&n===eg?null:n,_.get(t,n)}catch(_){if(_.name==="NullInjectorError"){if((_[X_]=_[X_]||[]).unshift(Yi(t)),s)throw _;return dH(_,t,"R3InjectorError",this.source)}else throw _}finally{go(h),Ic(s)}}resolveInjectorInitializers(){let t=xn(null),n=Ic(this),r=go(void 0),a;try{let s=this.get(cp,yo,ln.Self);for(let h of s)h()}finally{Ic(n),go(r),xn(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Yi(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new mt(205,!1)}processProvider(t){t=Ki(t);let n=up(t)?t:Ki(t&&t.provide),r=jH(t);if(!up(t)&&t.multi===!0){let a=this.records.get(n);a||(a=rp(void 0,H_,!0),a.factory=()=>Y1(a.multi),this.records.set(n,a)),n=t,a.multi.push(t)}this.records.set(n,r)}hydrate(t,n){let r=xn(null);try{return n.value===H_&&(n.value=BH,n.value=n.factory()),typeof n.value=="object"&&n.value&&qH(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{xn(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ki(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Q1(e){let t=T0(e),n=t!==null?t.factory:Yu(e);if(n!==null)return n;if(e instanceof It)throw new mt(204,!1);if(e instanceof Function)return VH(e);throw new mt(204,!1)}function VH(e){if(e.length>0)throw new mt(204,!1);let n=Yq(e);return n!==null?()=>n.factory(e):()=>new e}function jH(e){if(vR(e))return rp(void 0,e.useValue);{let t=_R(e);return rp(t,H_)}}function _R(e,t,n){let r;if(up(e)){let a=Ki(e);return Yu(a)||Q1(a)}else if(vR(e))r=()=>Ki(e.useValue);else if(zH(e))r=()=>e.useFactory(...Y1(e.deps||[]));else if(LH(e))r=()=>wt(Ki(e.useExisting));else{let a=Ki(e&&(e.useClass||e.provide));if($H(e))r=()=>new a(...Y1(e.deps));else return Yu(a)||Q1(a)}return r}function rp(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function $H(e){return!!e.deps}function qH(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function HH(e){return typeof e=="function"||typeof e=="object"&&e instanceof It}function eC(e,t){for(let n of e)Array.isArray(n)?eC(n,t):n&&Q2(n)?eC(n.\u0275providers,t):t(n)}function us(e,t){e instanceof ng&&e.assertNotDestroyed();let n,r=Ic(e),a=go(void 0);try{return t()}finally{Ic(r),go(a)}}function xR(){return eR()!==void 0||lH()!=null}function N0(e){if(!xR())throw new mt(-203,!1)}function GH(e){let t=ml.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function WH(e){return typeof e=="function"}var gl=0,Ht=1,Bt=2,Fi=3,Os=4,_o=5,dp=6,e0=7,Xi=8,hp=9,ha=10,Nr=11,rg=12,d2=13,xp=14,Bo=15,Xu=16,ip=17,fl=18,F0=19,wR=20,Ec=21,F1=22,cs=23,Qi=25,bR=1;var Ju=7,t0=8,pp=9,Ni=10,n0=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(n0||{});function Tc(e){return Array.isArray(e)&&typeof e[bR]=="object"}function yl(e){return Array.isArray(e)&&e[bR]===!0}function nI(e){return(e.flags&4)!==0}function O0(e){return e.componentOffset>-1}function L0(e){return(e.flags&1)===1}function wp(e){return!!e.template}function tC(e){return(e[Bt]&512)!==0}var nC=class{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function SR(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}function vl(){return CR}function CR(e){return e.type.prototype.ngOnChanges&&(e.setInput=KH),ZH}vl.ngInherit=!0;function ZH(){let e=ER(this),t=e?.current;if(t){let n=e.previous;if(n===tg)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function KH(e,t,n,r,a){let s=this.declaredInputs[r],h=ER(e)||YH(e,{previous:tg,current:null}),_=h.current||(h.current={}),w=h.previous,C=w[s];_[s]=new nC(C&&C.currentValue,n,w===tg),SR(e,t,a,n)}var IR="__ngSimpleChanges__";function ER(e){return e[IR]||null}function YH(e,t){return e[IR]=t}var h2=null;var ca=function(e,t,n){h2?.(e,t,n)},TR="svg",XH="math";function pa(e){for(;Array.isArray(e);)e=e[gl];return e}function DR(e,t){return pa(t[e])}function ds(e,t){return pa(t[e.index])}function rI(e,t){return e.data[t]}function AR(e,t){return e[t]}function kc(e,t){let n=t[e];return Tc(n)?n:n[gl]}function JH(e){return(e[Bt]&4)===4}function iI(e){return(e[Bt]&128)===128}function QH(e){return yl(e[Fi])}function Mc(e,t){return t==null?null:e[t]}function MR(e){e[ip]=0}function PR(e){e[Bt]&1024||(e[Bt]|=1024,iI(e)&&U0(e))}function eG(e,t){for(;e>0;)t=t[xp],e--;return t}function z0(e){return!!(e[Bt]&9216||e[cs]?.dirty)}function rC(e){e[ha].changeDetectionScheduler?.notify(8),e[Bt]&64&&(e[Bt]|=1024),z0(e)&&U0(e)}function U0(e){e[ha].changeDetectionScheduler?.notify(0);let t=Qu(e);for(;t!==null&&!(t[Bt]&8192||(t[Bt]|=8192,!iI(t)));)t=Qu(t)}function RR(e,t){if((e[Bt]&256)===256)throw new mt(911,!1);e[Ec]===null&&(e[Ec]=[]),e[Ec].push(t)}function tG(e,t){if(e[Ec]===null)return;let n=e[Ec].indexOf(t);n!==-1&&e[Ec].splice(n,1)}function Qu(e){let t=e[Fi];return yl(t)?t[Fi]:t}var Jt={lFrame:VR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kR=!1;function nG(){return Jt.lFrame.elementDepthCount}function rG(){Jt.lFrame.elementDepthCount++}function iG(){Jt.lFrame.elementDepthCount--}function NR(){return Jt.bindingsEnabled}function FR(){return Jt.skipHydrationRootTNode!==null}function oG(e){return Jt.skipHydrationRootTNode===e}function sG(){Jt.skipHydrationRootTNode=null}function Qt(){return Jt.lFrame.lView}function Fr(){return Jt.lFrame.tView}function od(e){return Jt.lFrame.contextLView=e,e[Xi]}function sd(e){return Jt.lFrame.contextLView=null,e}function eo(){let e=OR();for(;e!==null&&e.type===64;)e=e.parent;return e}function OR(){return Jt.lFrame.currentTNode}function aG(){let e=Jt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ad(e,t){let n=Jt.lFrame;n.currentTNode=e,n.isParent=t}function oI(){return Jt.lFrame.isParent}function sI(){Jt.lFrame.isParent=!1}function lG(){return Jt.lFrame.contextLView}function LR(){return kR}function p2(e){kR=e}function B0(){let e=Jt.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function cG(e){return Jt.lFrame.bindingIndex=e}function hg(){return Jt.lFrame.bindingIndex++}function zR(e){let t=Jt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function uG(){return Jt.lFrame.inI18n}function dG(e,t){let n=Jt.lFrame;n.bindingIndex=n.bindingRootIndex=e,iC(t)}function hG(){return Jt.lFrame.currentDirectiveIndex}function iC(e){Jt.lFrame.currentDirectiveIndex=e}function pG(e){let t=Jt.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function aI(){return Jt.lFrame.currentQueryIndex}function V0(e){Jt.lFrame.currentQueryIndex=e}function fG(e){let t=e[Ht];return t.type===2?t.declTNode:t.type===1?e[_o]:null}function UR(e,t,n){if(n&ln.SkipSelf){let a=t,s=e;for(;a=a.parent,a===null&&!(n&ln.Host);)if(a=fG(s),a===null||(s=s[xp],a.type&10))break;if(a===null)return!1;t=a,e=s}let r=Jt.lFrame=BR();return r.currentTNode=t,r.lView=e,!0}function lI(e){let t=BR(),n=e[Ht];Jt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function BR(){let e=Jt.lFrame,t=e===null?null:e.child;return t===null?VR(e):t}function VR(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function jR(){let e=Jt.lFrame;return Jt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var $R=jR;function cI(){let e=jR();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mG(e){return(Jt.lFrame.contextLView=eG(e,Jt.lFrame.contextLView))[Xi]}function Nc(){return Jt.lFrame.selectedIndex}function ed(e){Jt.lFrame.selectedIndex=e}function uI(){let e=Jt.lFrame;return rI(e.tView,e.selectedIndex)}function Ls(){Jt.lFrame.currentNamespace=TR}function ld(){gG()}function gG(){Jt.lFrame.currentNamespace=null}function yG(){return Jt.lFrame.currentNamespace}var qR=!0;function j0(){return qR}function $0(e){qR=e}function vG(e,t,n){let{ngOnChanges:r,ngOnInit:a,ngDoCheck:s}=t.type.prototype;if(r){let h=CR(t);(n.preOrderHooks??=[]).push(e,h),(n.preOrderCheckHooks??=[]).push(e,h)}a&&(n.preOrderHooks??=[]).push(0-e,a),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}function q0(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let s=e.data[n].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:_,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:T}=s;h&&(e.contentHooks??=[]).push(-n,h),_&&((e.contentHooks??=[]).push(n,_),(e.contentCheckHooks??=[]).push(n,_)),w&&(e.viewHooks??=[]).push(-n,w),C&&((e.viewHooks??=[]).push(n,C),(e.viewCheckHooks??=[]).push(n,C)),T!=null&&(e.destroyHooks??=[]).push(n,T)}}function G_(e,t,n){HR(e,t,3,n)}function W_(e,t,n,r){(e[Bt]&3)===n&&HR(e,t,n,r)}function O1(e,t){let n=e[Bt];(n&3)===t&&(n&=16383,n+=1,e[Bt]=n)}function HR(e,t,n,r){let a=r!==void 0?e[ip]&65535:0,s=r??-1,h=t.length-1,_=0;for(let w=a;w<h;w++)if(typeof t[w+1]=="number"){if(_=t[w],r!=null&&_>=r)break}else t[w]<0&&(e[ip]+=65536),(_<s||s==-1)&&(_G(e,n,t,w),e[ip]=(e[ip]&4294901760)+w+2),w++}function f2(e,t){ca(4,e,t);let n=xn(null);try{t.call(e)}finally{xn(n),ca(5,e,t)}}function _G(e,t,n,r){let a=n[r]<0,s=n[r+1],h=a?-n[r]:n[r],_=e[h];a?e[Bt]>>14<e[ip]>>16&&(e[Bt]&3)===t&&(e[Bt]+=16384,f2(_,s)):f2(_,s)}var lp=-1,td=class{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function xG(e){return e instanceof td}function wG(e){return(e.flags&8)!==0}function bG(e){return(e.flags&16)!==0}var L1={},oC=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=A0(r);let a=this.injector.get(t,L1,r);return a!==L1||n===L1?a:this.parentInjector.get(t,n,r)}};function GR(e){return e!==lp}function r0(e){return e&32767}function SG(e){return e>>16}function i0(e,t){let n=SG(e),r=t;for(;n>0;)r=r[xp],n--;return r}var sC=!0;function o0(e){let t=sC;return sC=e,t}var CG=256,WR=CG-1,ZR=5,IG=0,ua={};function EG(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jm)&&(r=n[Jm]),r==null&&(r=n[Jm]=IG++);let a=r&WR,s=1<<a;t.data[e+(a>>ZR)]|=s}function s0(e,t){let n=KR(e,t);if(n!==-1)return n;let r=t[Ht];r.firstCreatePass&&(e.injectorIndex=t.length,z1(r.data,e),z1(t,null),z1(r.blueprint,null));let a=dI(e,t),s=e.injectorIndex;if(GR(a)){let h=r0(a),_=i0(a,t),w=_[Ht].data;for(let C=0;C<8;C++)t[s+C]=_[h+C]|w[h+C]}return t[s+8]=a,s}function z1(e,t){e.push(0,0,0,0,0,0,0,0,t)}function KR(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function dI(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,a=t;for(;a!==null;){if(r=ek(a),r===null)return lp;if(n++,a=a[xp],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return lp}function aC(e,t,n){EG(e,t,n)}function YR(e,t,n){if(n&ln.Optional||e!==void 0)return e;YC(t,"NodeInjector")}function XR(e,t,n,r){if(n&ln.Optional&&r===void 0&&(r=null),!(n&(ln.Self|ln.Host))){let a=e[hp],s=go(void 0);try{return a?a.get(t,r,n&ln.Optional):tR(t,r,n&ln.Optional)}finally{go(s)}}return YR(r,t,n)}function JR(e,t,n,r=ln.Default,a){if(e!==null){if(t[Bt]&2048&&!(r&ln.Self)){let h=MG(e,t,n,r,ua);if(h!==ua)return h}let s=QR(e,t,n,r,ua);if(s!==ua)return s}return XR(t,n,r,a)}function QR(e,t,n,r,a){let s=DG(n);if(typeof s=="function"){if(!UR(t,e,r))return r&ln.Host?YR(a,n,r):XR(t,n,r,a);try{let h;if(h=s(r),h==null&&!(r&ln.Optional))YC(n);else return h}finally{$R()}}else if(typeof s=="number"){let h=null,_=KR(e,t),w=lp,C=r&ln.Host?t[Bo][_o]:null;for((_===-1||r&ln.SkipSelf)&&(w=_===-1?dI(e,t):t[_+8],w===lp||!g2(r,!1)?_=-1:(h=t[Ht],_=r0(w),t=i0(w,t)));_!==-1;){let T=t[Ht];if(m2(s,_,T.data)){let F=TG(_,t,n,h,r,C);if(F!==ua)return F}w=t[_+8],w!==lp&&g2(r,t[Ht].data[_+8]===C)&&m2(s,_,t)?(h=T,_=r0(w),t=i0(w,t)):_=-1}}return a}function TG(e,t,n,r,a,s){let h=t[Ht],_=h.data[e+8],w=r==null?O0(_)&&sC:r!=h&&(_.type&3)!==0,C=a&ln.Host&&s===_,T=Z_(_,h,n,w,C);return T!==null?nd(t,h,T,_):ua}function Z_(e,t,n,r,a){let s=e.providerIndexes,h=t.data,_=s&1048575,w=e.directiveStart,C=e.directiveEnd,T=s>>20,F=r?_:_+T,B=a?_+T:C;for(let $=F;$<B;$++){let ee=h[$];if($<w&&n===ee||$>=w&&ee.type===n)return $}if(a){let $=h[w];if($&&wp($)&&$.type===n)return w}return null}function nd(e,t,n,r){let a=e[n],s=t.data;if(xG(a)){let h=a;h.resolving&&rH(nH(s[n]));let _=o0(h.canSeeViewProviders);h.resolving=!0;let w,C=h.injectImpl?go(h.injectImpl):null,T=UR(e,r,ln.Default);try{a=e[n]=h.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&vG(n,s[n],t)}finally{C!==null&&go(C),o0(_),h.resolving=!1,$R()}}return a}function DG(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Jm)?e[Jm]:void 0;return typeof t=="number"?t>=0?t&WR:AG:t}function m2(e,t,n){let r=1<<e;return!!(n[t+(e>>ZR)]&r)}function g2(e,t){return!(e&ln.Self)&&!(e&ln.Host&&t)}var Ku=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return JR(this._tNode,this._lView,t,A0(r),n)}};function AG(){return new Ku(eo(),Qt())}function hI(e){return cg(()=>{let t=e.prototype.constructor,n=t[Y_]||lC(t),r=Object.prototype,a=Object.getPrototypeOf(e.prototype).constructor;for(;a&&a!==r;){let s=a[Y_]||lC(a);if(s&&s!==n)return s;a=Object.getPrototypeOf(a)}return s=>new s})}function lC(e){return K2(e)?()=>{let t=lC(Ki(e));return t&&t()}:Yu(e)}function MG(e,t,n,r,a){let s=e,h=t;for(;s!==null&&h!==null&&h[Bt]&2048&&!(h[Bt]&512);){let _=QR(s,h,n,r|ln.Self,ua);if(_!==ua)return _;let w=s.parent;if(!w){let C=h[wR];if(C){let T=C.get(n,ua,r);if(T!==ua)return T}w=ek(h),h=h[xp]}s=w}return a}function ek(e){let t=e[Ht],n=t.type;return n===2?t.declTNode:n===1?e[_o]:null}function y2(e,t=null,n=null,r){let a=tk(e,t,n,r);return a.resolveInjectorInitializers(),a}function tk(e,t=null,n=null,r,a=new Set){let s=[n||yo,FH(e)];return r=r||(typeof e=="object"?void 0:Yi(e)),new ng(s,t||tI(),r||null,a)}var vo=class e{static{this.THROW_IF_NOT_FOUND=eg}static{this.NULL=new Q_}static create(t,n){if(Array.isArray(t))return y2({name:""},n,t,"");{let r=t.name??"";return y2({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=ft({token:e,providedIn:"any",factory:()=>wt(iR)})}static{this.__NG_ELEMENT_ID__=-1}};var PG=new It("");PG.__NG_ELEMENT_ID__=e=>{let t=eo();if(t===null)throw new mt(204,!1);if(t.type&2)return t.value;if(e&ln.Optional)return null;throw new mt(204,!1)};var RG="ngOriginalError";function U1(e){return e[RG]}var nk=!0,_l=(()=>{class e{static{this.__NG_ELEMENT_ID__=kG}static{this.__NG_ENV_ID__=n=>n}}return e})(),cC=class extends _l{constructor(t){super(),this._lView=t}onDestroy(t){return RR(this._lView,t),()=>tG(this._lView,t)}};function kG(){return new cC(Qt())}var Fc=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new bi(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ft({token:e,providedIn:"root",factory:()=>new e})}}return e})();var uC=class extends Vr{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,xR()&&(this.destroyRef=Fe(_l,{optional:!0})??void 0,this.pendingTasks=Fe(Fc,{optional:!0})??void 0)}emit(t){let n=xn(null);try{super.next(t)}finally{xn(n)}}subscribe(t,n,r){let a=t,s=n||(()=>null),h=r;if(t&&typeof t=="object"){let w=t;a=w.next?.bind(w),s=w.error?.bind(w),h=w.complete?.bind(w)}this.__isAsync&&(s=this.wrapInTimeout(s),a&&(a=this.wrapInTimeout(a)),h&&(h=this.wrapInTimeout(h)));let _=super.subscribe({next:a,error:s,complete:h});return t instanceof Rr&&t.add(_),_}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ti=uC;function a0(...e){}function rk(e){let t,n;function r(){e=a0;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function v2(e){return queueMicrotask(()=>e()),()=>{e=a0}}var pI="isAngularZone",l0=pI+"_ID",NG=0,zn=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ti(!1),this.onMicrotaskEmpty=new ti(!1),this.onStable=new ti(!1),this.onError=new ti(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:a=!1,scheduleInRootZone:s=nk}=t;if(typeof Zone>"u")throw new mt(908,!1);Zone.assertZonePatched();let h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&r,h.shouldCoalesceRunChangeDetection=a,h.callbackScheduled=!1,h.scheduleInRootZone=s,LG(h)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(pI)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new mt(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new mt(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,a){let s=this._inner,h=s.scheduleEventTask("NgZoneEvent: "+a,t,FG,a0,a0);try{return s.runTask(h,n,r)}finally{s.cancelTask(h)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},FG={};function fI(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function OG(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){rk(()=>{e.callbackScheduled=!1,dC(e),e.isCheckStableRunning=!0,fI(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),dC(e)}function LG(e){let t=()=>{OG(e)},n=NG++;e._inner=e._inner.fork({name:"angular",properties:{[pI]:!0,[l0]:n,[l0+n]:!0},onInvokeTask:(r,a,s,h,_,w)=>{if(zG(w))return r.invokeTask(s,h,_,w);try{return _2(e),r.invokeTask(s,h,_,w)}finally{(e.shouldCoalesceEventChangeDetection&&h.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),x2(e)}},onInvoke:(r,a,s,h,_,w,C)=>{try{return _2(e),r.invoke(s,h,_,w,C)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!UG(w)&&t(),x2(e)}},onHasTask:(r,a,s,h)=>{r.hasTask(s,h),a===s&&(h.change=="microTask"?(e._hasPendingMicrotasks=h.microTask,dC(e),fI(e)):h.change=="macroTask"&&(e.hasPendingMacrotasks=h.macroTask))},onHandleError:(r,a,s,h)=>(r.handleError(s,h),e.runOutsideAngular(()=>e.onError.emit(h)),!1)})}function dC(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function _2(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function x2(e){e._nesting--,fI(e)}var c0=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ti,this.onMicrotaskEmpty=new ti,this.onStable=new ti,this.onError=new ti}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,a){return t.apply(n,r)}};function zG(e){return ik(e,"__ignore_ng_zone__")}function UG(e){return ik(e,"__scheduler_tick__")}function ik(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}function BG(e="zone.js",t){return e==="noop"?new c0:e==="zone.js"?new zn(t):e}var fa=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&U1(t);for(;n&&U1(n);)n=U1(n);return n||null}},VG=new It("",{providedIn:"root",factory:()=>{let e=Fe(zn),t=Fe(fa);return n=>e.runOutsideAngular(()=>t.handleError(n))}}),hC=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=Fe(fa,{optional:!0}),this.destroyRef=Fe(_l),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new mt(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed)throw new mt(953,!1);if(this.listeners===null)return;let n=xn(null);try{for(let r of this.listeners)try{r(t)}catch(a){this.errorHandler?.handleError(a)}}finally{xn(n)}}};function At(e){return new hC}function w2(e,t){return W2(e,t)}function jG(e){return W2(G2,e)}var et=(w2.required=jG,w2);function $G(){return bp(eo(),Qt())}function bp(e,t){return new _a(ds(e,t))}var _a=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=$G}}return e})();function ok(e){return e instanceof _a?e.nativeElement:e}function qG(){return this._results[Symbol.iterator]()}var pC=class e{get changes(){return this._changes??=new ti}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=qG)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let r=fH(t);(this._changesDetected=!pH(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function sk(e){return(e.flags&128)===128}var ak=new Map,HG=0;function GG(){return HG++}function WG(e){ak.set(e[F0],e)}function fC(e){ak.delete(e[F0])}var b2="__ngContext__";function Pc(e,t){Tc(t)?(e[b2]=t[F0],WG(t)):e[b2]=t}function lk(e){return uk(e[rg])}function ck(e){return uk(e[Os])}function uk(e){for(;e!==null&&!yl(e);)e=e[Os];return e}var mC;function dk(e){mC=e}function ZG(){if(mC!==void 0)return mC;if(typeof document<"u")return document;throw new mt(210,!1)}var H0=new It("",{providedIn:"root",factory:()=>KG}),KG="ng",mI=new It(""),xa=new It("",{providedIn:"platform",factory:()=>"unknown"});var gI=new It("",{providedIn:"root",factory:()=>ZG().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var YG="h",XG="b";var JG=()=>null;function yI(e,t,n=!1){return JG(e,t,n)}var hk=!1,QG=new It("",{providedIn:"root",factory:()=>hk});var u0=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${H2})`}};function Sp(e){return e instanceof u0?e.changingThisBreaksApplicationSecurity:e}function pk(e,t){let n=e9(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${H2})`)}return n===t}function e9(e){return e instanceof u0&&e.getTypeName()||null}var t9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fk(e){return e=String(e),e.match(t9)?e:"unsafe:"+e}var vI=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(vI||{});function mk(e){let t=n9();return t?t.sanitize(vI.URL,e)||"":pk(e,"URL")?Sp(e):fk(D0(e))}function n9(){let e=Qt();return e&&e[ha].sanitizer}var r9=/^>|^->|<!--|-->|--!>|<!-$/g,i9=/(<|>)/g,o9="\u200B$1\u200B";function s9(e){return e.replace(r9,t=>t.replace(i9,o9))}function gk(e){return e instanceof Function?e():e}function yk(e){return(e??Fe(vo)).get(xa)==="browser"}var ma=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(ma||{}),a9;function _I(e,t){return a9(e,t)}function op(e,t,n,r,a){if(r!=null){let s,h=!1;yl(r)?s=r:Tc(r)&&(h=!0,r=r[gl]);let _=pa(r);e===0&&n!==null?a==null?bk(t,n,_):d0(t,n,_,a||null,!0):e===1&&n!==null?d0(t,n,_,a||null,!0):e===2?w9(t,_,h):e===3&&t.destroyNode(_),s!=null&&S9(t,e,s,n,a)}}function l9(e,t){return e.createText(t)}function c9(e,t,n){e.setValue(t,n)}function u9(e,t){return e.createComment(s9(t))}function vk(e,t,n){return e.createElement(t,n)}function d9(e,t){_k(e,t),t[gl]=null,t[_o]=null}function h9(e,t,n,r,a,s){r[gl]=a,r[_o]=t,Z0(e,r,n,1,a,s)}function _k(e,t){t[ha].changeDetectionScheduler?.notify(9),Z0(e,t,t[Nr],2,null,null)}function p9(e){let t=e[rg];if(!t)return B1(e[Ht],e);for(;t;){let n=null;if(Tc(t))n=t[rg];else{let r=t[Ni];r&&(n=r)}if(!n){for(;t&&!t[Os]&&t!==e;)Tc(t)&&B1(t[Ht],t),t=t[Fi];t===null&&(t=e),Tc(t)&&B1(t[Ht],t),n=t&&t[Os]}t=n}}function f9(e,t,n,r){let a=Ni+r,s=n.length;r>0&&(n[a-1][Os]=t),r<s-Ni?(t[Os]=n[a],rR(n,Ni+r,t)):(n.push(t),t[Os]=null),t[Fi]=n;let h=t[Xu];h!==null&&n!==h&&xk(h,t);let _=t[fl];_!==null&&_.insertView(e),rC(t),t[Bt]|=128}function xk(e,t){let n=e[pp],r=t[Fi];if(Tc(r))e[Bt]|=n0.HasTransplantedViews;else{let a=r[Fi][Bo];t[Bo]!==a&&(e[Bt]|=n0.HasTransplantedViews)}n===null?e[pp]=[t]:n.push(t)}function xI(e,t){let n=e[pp],r=n.indexOf(t);n.splice(r,1)}function ig(e,t){if(e.length<=Ni)return;let n=Ni+t,r=e[n];if(r){let a=r[Xu];a!==null&&a!==e&&xI(a,r),t>0&&(e[n-1][Os]=r[Os]);let s=J_(e,Ni+t);d9(r[Ht],r);let h=s[fl];h!==null&&h.detachView(s[Ht]),r[Fi]=null,r[Os]=null,r[Bt]&=-129}return r}function G0(e,t){if(!(t[Bt]&256)){let n=t[Nr];n.destroyNode&&Z0(e,t,n,3,null,null),p9(t)}}function B1(e,t){if(t[Bt]&256)return;let n=xn(null);try{t[Bt]&=-129,t[Bt]|=256,t[cs]&&g1(t[cs]),g9(e,t),m9(e,t),t[Ht].type===1&&t[Nr].destroy();let r=t[Xu];if(r!==null&&yl(t[Fi])){r!==t[Fi]&&xI(r,t);let a=t[fl];a!==null&&a.detachView(e)}fC(t)}finally{xn(n)}}function m9(e,t){let n=e.cleanup,r=t[e0];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let h=n[s+3];h>=0?r[h]():r[-h].unsubscribe(),s+=2}else{let h=r[n[s+1]];n[s].call(h)}r!==null&&(t[e0]=null);let a=t[Ec];if(a!==null){t[Ec]=null;for(let s=0;s<a.length;s++){let h=a[s];h()}}}function g9(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let a=t[n[r]];if(!(a instanceof td)){let s=n[r+1];if(Array.isArray(s))for(let h=0;h<s.length;h+=2){let _=a[s[h]],w=s[h+1];ca(4,_,w);try{w.call(_)}finally{ca(5,_,w)}}else{ca(4,a,s);try{s.call(a)}finally{ca(5,a,s)}}}}}function wk(e,t,n){return y9(e,t.parent,n)}function y9(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[gl];{let{componentOffset:a}=r;if(a>-1){let{encapsulation:s}=e.data[r.directiveStart+a];if(s===da.None||s===da.Emulated)return null}return ds(r,n)}}function d0(e,t,n,r,a){e.insertBefore(t,n,r,a)}function bk(e,t,n){e.appendChild(t,n)}function S2(e,t,n,r,a){r!==null?d0(e,t,n,r,a):bk(e,t,n)}function Sk(e,t){return e.parentNode(t)}function v9(e,t){return e.nextSibling(t)}function Ck(e,t,n){return x9(e,t,n)}function _9(e,t,n){return e.type&40?ds(e,n):null}var x9=_9,C2;function W0(e,t,n,r){let a=wk(e,r,t),s=t[Nr],h=r.parent||t[_o],_=Ck(h,r,t);if(a!=null)if(Array.isArray(n))for(let w=0;w<n.length;w++)S2(s,a,n[w],_,!1);else S2(s,a,n,_,!1);C2!==void 0&&C2(s,r,t,n,a)}function Xm(e,t){if(t!==null){let n=t.type;if(n&3)return ds(t,e);if(n&4)return gC(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Xm(e,r);{let a=e[t.index];return yl(a)?gC(-1,a):pa(a)}}else{if(n&128)return Xm(e,t.next);if(n&32)return _I(t,e)()||pa(e[t.index]);{let r=Ik(e,t);if(r!==null){if(Array.isArray(r))return r[0];let a=Qu(e[Bo]);return Xm(a,r)}else return Xm(e,t.next)}}}return null}function Ik(e,t){if(t!==null){let r=e[Bo][_o],a=t.projection;return r.projection[a]}return null}function gC(e,t){let n=Ni+e+1;if(n<t.length){let r=t[n],a=r[Ht].firstChild;if(a!==null)return Xm(r,a)}return t[Ju]}function w9(e,t,n){e.removeChild(null,t,n)}function wI(e,t,n,r,a,s,h){for(;n!=null;){if(n.type===128){n=n.next;continue}let _=r[n.index],w=n.type;if(h&&t===0&&(_&&Pc(pa(_),r),n.flags|=2),(n.flags&32)!==32)if(w&8)wI(e,t,n.child,r,a,s,!1),op(t,e,a,_,s);else if(w&32){let C=_I(n,r),T;for(;T=C();)op(t,e,a,T,s);op(t,e,a,_,s)}else w&16?Ek(e,t,r,n,a,s):op(t,e,a,_,s);n=h?n.projectionNext:n.next}}function Z0(e,t,n,r,a,s){wI(n,r,e.firstChild,t,a,s,!1)}function b9(e,t,n){let r=t[Nr],a=wk(e,n,t),s=n.parent||t[_o],h=Ck(s,n,t);Ek(r,0,t,n,a,h)}function Ek(e,t,n,r,a,s){let h=n[Bo],w=h[_o].projection[r.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++){let T=w[C];op(t,e,a,T,s)}else{let C=w,T=h[Fi];sk(r)&&(C.flags|=128),wI(e,t,C,T,a,s,!0)}}function S9(e,t,n,r,a){let s=n[Ju],h=pa(n);s!==h&&op(t,e,r,s,a);for(let _=Ni;_<n.length;_++){let w=n[_];Z0(w[Ht],w,e,t,r,s)}}function C9(e,t,n,r,a){if(t)a?e.addClass(n,r):e.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:ma.DashCase;a==null?e.removeStyle(n,r,s):(typeof a=="string"&&a.endsWith("!important")&&(a=a.slice(0,-10),s|=ma.Important),e.setStyle(n,r,a,s))}}function I9(e,t,n){e.setAttribute(t,"style",n)}function Tk(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Dk(e,t,n){let{mergedAttrs:r,classes:a,styles:s}=n;r!==null&&X1(e,t,r),a!==null&&Tk(e,t,a),s!==null&&I9(e,t,s)}var wa={};function xe(e=1){Ak(Fr(),Qt(),Nc()+e,!1)}function Ak(e,t,n,r){if(!r)if((t[Bt]&3)===3){let s=e.preOrderCheckHooks;s!==null&&G_(t,s,n)}else{let s=e.preOrderHooks;s!==null&&W_(t,s,0,n)}ed(n)}function sn(e,t=ln.Default){let n=Qt();if(n===null)return wt(e,t);let r=eo();return JR(r,n,Ki(e),t)}function Mk(){let e="invalid";throw new Error(e)}function Pk(e,t,n,r,a,s){let h=xn(null);try{let _=null;a&Dc.SignalBased&&(_=t[r][aa]),_!==null&&_.transformFn!==void 0&&(s=_.transformFn(s)),a&Dc.HasDecoratorInputTransform&&(s=e.inputTransforms[r].call(t,s)),e.setInput!==null?e.setInput(t,_,s,n,r):SR(t,_,r,s)}finally{xn(h)}}function E9(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let a=n[r];if(a<0)ed(~a);else{let s=a,h=n[++r],_=n[++r];dG(h,s);let w=t[s];_(2,w)}}}finally{ed(-1)}}function K0(e,t,n,r,a,s,h,_,w,C,T){let F=t.blueprint.slice();return F[gl]=a,F[Bt]=r|4|128|8|64,(C!==null||e&&e[Bt]&2048)&&(F[Bt]|=2048),MR(F),F[Fi]=F[xp]=e,F[Xi]=n,F[ha]=h||e&&e[ha],F[Nr]=_||e&&e[Nr],F[hp]=w||e&&e[hp]||null,F[_o]=s,F[F0]=GG(),F[dp]=T,F[wR]=C,F[Bo]=t.type==2?e[Bo]:F,F}function Cp(e,t,n,r,a){let s=e.data[t];if(s===null)s=T9(e,t,n,r,a),uG()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=a;let h=aG();s.injectorIndex=h===null?-1:h.injectorIndex}return ad(s,!0),s}function T9(e,t,n,r,a){let s=OR(),h=oI(),_=h?s:s&&s.parent,w=e.data[t]=k9(e,_,n,t,r,a);return e.firstChild===null&&(e.firstChild=w),s!==null&&(h?s.child==null&&w.parent!==null&&(s.child=w):s.next===null&&(s.next=w,w.prev=s)),w}function Rk(e,t,n,r){if(n===0)return-1;let a=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return a}function kk(e,t,n,r,a){let s=Nc(),h=r&2;try{ed(-1),h&&t.length>Qi&&Ak(e,t,Qi,!1),ca(h?2:0,a),n(r,a)}finally{ed(s),ca(h?3:1,a)}}function bI(e,t,n){if(nI(t)){let r=xn(null);try{let a=t.directiveStart,s=t.directiveEnd;for(let h=a;h<s;h++){let _=e.data[h];if(_.contentQueries){let w=n[h];_.contentQueries(1,w,h)}}}finally{xn(r)}}}function SI(e,t,n){NR()&&(U9(e,t,n,ds(n,t)),(n.flags&64)===64&&Lk(e,t,n))}function CI(e,t,n=ds){let r=t.localNames;if(r!==null){let a=t.index+1;for(let s=0;s<r.length;s+=2){let h=r[s+1],_=h===-1?n(t,e):e[h];e[a++]=_}}}function Nk(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=II(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function II(e,t,n,r,a,s,h,_,w,C,T){let F=Qi+r,B=F+a,$=D9(F,B),ee=typeof C=="function"?C():C;return $[Ht]={type:e,blueprint:$,template:n,queries:null,viewQuery:_,declTNode:t,data:$.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof h=="function"?h():h,firstChild:null,schemas:w,consts:ee,incompleteFirstPass:!1,ssrId:T}}function D9(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:wa);return n}function A9(e,t,n,r){let s=r.get(QG,hk)||n===da.ShadowDom,h=e.selectRootElement(t,s);return M9(h),h}function M9(e){P9(e)}var P9=()=>null;function R9(e,t,n,r){let a=Bk(t);a.push(n),e.firstCreatePass&&Vk(e).push(r,a.length-1)}function k9(e,t,n,r,a,s){let h=t?t.injectorIndex:-1,_=0;return FR()&&(_|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:h,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:_,providerIndexes:0,value:a,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function I2(e,t,n,r,a){for(let s in t){if(!t.hasOwnProperty(s))continue;let h=t[s];if(h===void 0)continue;r??={};let _,w=Dc.None;Array.isArray(h)?(_=h[0],w=h[1]):_=h;let C=s;if(a!==null){if(!a.hasOwnProperty(s))continue;C=a[s]}e===0?E2(r,n,C,_,w):E2(r,n,C,_)}return r}function E2(e,t,n,r,a){let s;e.hasOwnProperty(n)?(s=e[n]).push(t,r):s=e[n]=[t,r],a!==void 0&&s.push(a)}function N9(e,t,n){let r=t.directiveStart,a=t.directiveEnd,s=e.data,h=t.attrs,_=[],w=null,C=null;for(let T=r;T<a;T++){let F=s[T],B=n?n.get(F):null,$=B?B.inputs:null,ee=B?B.outputs:null;w=I2(0,F.inputs,T,w,$),C=I2(1,F.outputs,T,C,ee);let ie=w!==null&&h!==null&&!QC(t)?Y9(w,T,h):null;_.push(ie)}w!==null&&(w.hasOwnProperty("class")&&(t.flags|=8),w.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=_,t.inputs=w,t.outputs=C}function F9(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Fk(e,t,n,r,a,s,h,_){let w=ds(t,n),C=t.inputs,T;!_&&C!=null&&(T=C[r])?(TI(e,n,T,r,a),O0(t)&&O9(n,t.index)):t.type&3?(r=F9(r),a=h!=null?h(a,t.value||"",r):a,s.setProperty(w,r,a)):t.type&12}function O9(e,t){let n=kc(t,e);n[Bt]&16||(n[Bt]|=64)}function EI(e,t,n,r){if(NR()){let a=r===null?null:{"":-1},s=V9(e,n),h,_;s===null?h=_=null:[h,_]=s,h!==null&&Ok(e,t,n,h,a,_),a&&j9(n,r,a)}n.mergedAttrs=JC(n.mergedAttrs,n.attrs)}function Ok(e,t,n,r,a,s){for(let C=0;C<r.length;C++)aC(s0(n,t),e,r[C].type);q9(n,e.data.length,r.length);for(let C=0;C<r.length;C++){let T=r[C];T.providersResolver&&T.providersResolver(T)}let h=!1,_=!1,w=Rk(e,t,r.length,null);for(let C=0;C<r.length;C++){let T=r[C];n.mergedAttrs=JC(n.mergedAttrs,T.hostAttrs),H9(e,n,t,w,T),$9(w,T,a),T.contentQueries!==null&&(n.flags|=4),(T.hostBindings!==null||T.hostAttrs!==null||T.hostVars!==0)&&(n.flags|=64);let F=T.type.prototype;!h&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),h=!0),!_&&(F.ngOnChanges||F.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),_=!0),w++}N9(e,n,s)}function L9(e,t,n,r,a){let s=a.hostBindings;if(s){let h=e.hostBindingOpCodes;h===null&&(h=e.hostBindingOpCodes=[]);let _=~t.index;z9(h)!=_&&h.push(_),h.push(n,r,s)}}function z9(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function U9(e,t,n,r){let a=n.directiveStart,s=n.directiveEnd;O0(n)&&G9(t,n,e.data[a+n.componentOffset]),e.firstCreatePass||s0(n,t),Pc(r,t);let h=n.initialInputs;for(let _=a;_<s;_++){let w=e.data[_],C=nd(t,e,_,n);if(Pc(C,t),h!==null&&K9(t,_-a,C,w,n,h),wp(w)){let T=kc(n.index,t);T[Xi]=nd(t,e,_,n)}}}function Lk(e,t,n){let r=n.directiveStart,a=n.directiveEnd,s=n.index,h=hG();try{ed(s);for(let _=r;_<a;_++){let w=e.data[_],C=t[_];iC(_),(w.hostBindings!==null||w.hostVars!==0||w.hostAttrs!==null)&&B9(w,C)}}finally{ed(-1),iC(h)}}function B9(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function V9(e,t){let n=e.directiveRegistry,r=null,a=null;if(n)for(let s=0;s<n.length;s++){let h=n[s];if(lR(t,h.selectors,!1))if(r||(r=[]),wp(h))if(h.findHostDirectiveDefs!==null){let _=[];a=a||new Map,h.findHostDirectiveDefs(h,_,a),r.unshift(..._,h);let w=_.length;yC(e,t,w)}else r.unshift(h),yC(e,t,0);else a=a||new Map,h.findHostDirectiveDefs?.(h,r,a),r.push(h)}return r===null?null:[r,a]}function yC(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function j9(e,t,n){if(t){let r=e.localNames=[];for(let a=0;a<t.length;a+=2){let s=n[t[a+1]];if(s==null)throw new mt(-301,!1);r.push(t[a],s)}}}function $9(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;wp(t)&&(n[""]=e)}}function q9(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function H9(e,t,n,r,a){e.data[r]=a;let s=a.factory||(a.factory=Yu(a.type,!0)),h=new td(s,wp(a),sn);e.blueprint[r]=h,n[r]=h,L9(e,t,r,Rk(e,n,a.hostVars,wa),a)}function G9(e,t,n){let r=ds(t,e),a=Nk(n),s=e[ha].rendererFactory,h=16;n.signals?h=4096:n.onPush&&(h=64);let _=Y0(e,K0(e,a,null,h,r,t,null,s.createRenderer(r,n),null,null,null));e[t.index]=_}function W9(e,t,n,r,a,s){let h=ds(e,t);Z9(t[Nr],h,s,e.value,n,r,a)}function Z9(e,t,n,r,a,s,h){if(s==null)e.removeAttribute(t,a,n);else{let _=h==null?D0(s):h(s,r||"",a);e.setAttribute(t,a,_,n)}}function K9(e,t,n,r,a,s){let h=s[t];if(h!==null)for(let _=0;_<h.length;){let w=h[_++],C=h[_++],T=h[_++],F=h[_++];Pk(r,n,w,C,T,F)}}function Y9(e,t,n){let r=null,a=0;for(;a<n.length;){let s=n[a];if(s===0){a+=4;continue}else if(s===5){a+=2;continue}if(typeof s=="number")break;if(e.hasOwnProperty(s)){r===null&&(r=[]);let h=e[s];for(let _=0;_<h.length;_+=3)if(h[_]===t){r.push(s,h[_+1],h[_+2],n[a+1]);break}}a+=2}return r}function zk(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Uk(e,t){let n=e.contentQueries;if(n!==null){let r=xn(null);try{for(let a=0;a<n.length;a+=2){let s=n[a],h=n[a+1];if(h!==-1){let _=e.data[h];V0(s),_.contentQueries(2,t[h],h)}}}finally{xn(r)}}}function Y0(e,t){return e[rg]?e[d2][Os]=t:e[rg]=t,e[d2]=t,t}function vC(e,t,n){V0(0);let r=xn(null);try{t(e,n)}finally{xn(r)}}function Bk(e){return e[e0]??=[]}function Vk(e){return e.cleanup??=[]}function jk(e,t){let n=e[hp],r=n?n.get(fa,null):null;r&&r.handleError(t)}function TI(e,t,n,r,a){for(let s=0;s<n.length;){let h=n[s++],_=n[s++],w=n[s++],C=t[h],T=e.data[h];Pk(T,C,r,_,w,a)}}function X9(e,t,n){let r=DR(t,e);c9(e[Nr],r,n)}function J9(e,t){let n=kc(t,e),r=n[Ht];Q9(r,n);let a=n[gl];a!==null&&n[dp]===null&&(n[dp]=yI(a,n[hp])),DI(r,n,n[Xi])}function Q9(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function DI(e,t,n){lI(t);try{let r=e.viewQuery;r!==null&&vC(1,r,n);let a=e.template;a!==null&&kk(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[fl]?.finishViewCreation(e),e.staticContentQueries&&Uk(e,t),e.staticViewQueries&&vC(2,e.viewQuery,n);let s=e.components;s!==null&&e7(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[Bt]&=-5,cI()}}function e7(e,t){for(let n=0;n<t.length;n++)J9(e,t[n])}function X0(e,t,n,r){let a=xn(null);try{let s=t.tView,_=e[Bt]&4096?4096:16,w=K0(e,s,n,_,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),C=e[t.index];w[Xu]=C;let T=e[fl];return T!==null&&(w[fl]=T.createEmbeddedView(s)),DI(s,w,n),w}finally{xn(a)}}function t7(e,t){let n=Ni+t;if(n<e.length)return e[n]}function og(e,t){return!t||t.firstChild===null||sk(e)}function J0(e,t,n,r=!0){let a=t[Ht];if(f9(a,t,e,n),r){let h=gC(n,e),_=t[Nr],w=Sk(_,e[Ju]);w!==null&&h9(a,e[_o],_,t,w,h)}let s=t[dp];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function n7(e,t){let n=ig(e,t);return n!==void 0&&G0(n[Ht],n),n}function h0(e,t,n,r,a=!1){for(;n!==null;){if(n.type===128){n=a?n.projectionNext:n.next;continue}let s=t[n.index];s!==null&&r.push(pa(s)),yl(s)&&r7(s,r);let h=n.type;if(h&8)h0(e,t,n.child,r);else if(h&32){let _=_I(n,t),w;for(;w=_();)r.push(w)}else if(h&16){let _=Ik(t,n);if(Array.isArray(_))r.push(..._);else{let w=Qu(t[Bo]);h0(w[Ht],w,_,r,!0)}}n=a?n.projectionNext:n.next}return r}function r7(e,t){for(let n=Ni;n<e.length;n++){let r=e[n],a=r[Ht].firstChild;a!==null&&h0(r[Ht],r,a,t)}e[Ju]!==e[gl]&&t.push(e[Ju])}var $k=[];function i7(e){return e[cs]??o7(e)}function o7(e){let t=$k.pop()??Object.create(a7);return t.lView=e,t}function s7(e){e.lView[cs]!==e&&(e.lView=null,$k.push(e))}var a7=Me(Z({},Gm),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{U0(e.lView)},consumerOnSignalRead(){this.lView[cs]=this}});function l7(e){let t=e[cs]??Object.create(c7);return t.lView=e,t}var c7=Me(Z({},Gm),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=Qu(e.lView);for(;t&&!qk(t[Ht]);)t=Qu(t);t&&PR(t)},consumerOnSignalRead(){this.lView[cs]=this}});function qk(e){return e.type!==2}var u7=100;function Hk(e,t=!0,n=0){let r=e[ha],a=r.rendererFactory,s=!1;s||a.begin?.();try{d7(e,n)}catch(h){throw t&&jk(e,h),h}finally{s||(a.end?.(),r.inlineEffectRunner?.flush())}}function d7(e,t){let n=LR();try{p2(!0),_C(e,t);let r=0;for(;z0(e);){if(r===u7)throw new mt(103,!1);r++,_C(e,1)}}finally{p2(n)}}function h7(e,t,n,r){let a=t[Bt];if((a&256)===256)return;let s=!1,h=!1;!s&&t[ha].inlineEffectRunner?.flush(),lI(t);let _=!0,w=null,C=null;s||(qk(e)?(C=i7(t),w=y_(C)):mP()===null?(_=!1,C=l7(t),w=y_(C)):t[cs]&&(g1(t[cs]),t[cs]=null));try{MR(t),cG(e.bindingStartIndex),n!==null&&kk(e,t,n,2,r);let T=(a&3)===3;if(!s)if(T){let $=e.preOrderCheckHooks;$!==null&&G_(t,$,null)}else{let $=e.preOrderHooks;$!==null&&W_(t,$,0,null),O1(t,0)}if(h||p7(t),Gk(t,0),e.contentQueries!==null&&Uk(e,t),!s)if(T){let $=e.contentCheckHooks;$!==null&&G_(t,$)}else{let $=e.contentHooks;$!==null&&W_(t,$,1),O1(t,1)}E9(e,t);let F=e.components;F!==null&&Zk(t,F,0);let B=e.viewQuery;if(B!==null&&vC(2,B,r),!s)if(T){let $=e.viewCheckHooks;$!==null&&G_(t,$)}else{let $=e.viewHooks;$!==null&&W_(t,$,2),O1(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[F1]){for(let $ of t[F1])$();t[F1]=null}s||(t[Bt]&=-73)}catch(T){throw s||U0(t),T}finally{C!==null&&(f1(C,w),_&&s7(C)),cI()}}function Gk(e,t){for(let n=lk(e);n!==null;n=ck(n))for(let r=Ni;r<n.length;r++){let a=n[r];Wk(a,t)}}function p7(e){for(let t=lk(e);t!==null;t=ck(t)){if(!(t[Bt]&n0.HasTransplantedViews))continue;let n=t[pp];for(let r=0;r<n.length;r++){let a=n[r];PR(a)}}}function f7(e,t,n){let r=kc(t,e);Wk(r,n)}function Wk(e,t){iI(e)&&_C(e,t)}function _C(e,t){let r=e[Ht],a=e[Bt],s=e[cs],h=!!(t===0&&a&16);if(h||=!!(a&64&&t===0),h||=!!(a&1024),h||=!!(s?.dirty&&m1(s)),h||=!1,s&&(s.dirty=!1),e[Bt]&=-9217,h)h7(r,e,r.template,e[Xi]);else if(a&8192){Gk(e,1);let _=r.components;_!==null&&Zk(e,_,1)}}function Zk(e,t,n){for(let r=0;r<t.length;r++)f7(e,t[r],n)}function AI(e,t){let n=LR()?64:1088;for(e[ha].changeDetectionScheduler?.notify(t);e;){e[Bt]|=n;let r=Qu(e);if(tC(e)&&!r)return e;e=r}return null}var rd=class{get rootNodes(){let t=this._lView,n=t[Ht];return h0(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xi]}set context(t){this._lView[Xi]=t}get destroyed(){return(this._lView[Bt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Fi];if(yl(t)){let n=t[t0],r=n?n.indexOf(this):-1;r>-1&&(ig(t,r),J_(n,r))}this._attachedToViewContainer=!1}G0(this._lView[Ht],this._lView)}onDestroy(t){RR(this._lView,t)}markForCheck(){AI(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Bt]&=-129}reattach(){rC(this._lView),this._lView[Bt]|=128}detectChanges(){this._lView[Bt]|=1024,Hk(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=tC(this._lView),n=this._lView[Xu];n!==null&&!t&&xI(n,this._lView),_k(this._lView[Ht],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new mt(902,!1);this._appRef=t;let n=tC(this._lView),r=this._lView[Xu];r!==null&&!n&&xk(r,this._lView),rC(this._lView)}},ga=(()=>{class e{static{this.__NG_ELEMENT_ID__=y7}}return e})(),m7=ga,g7=class extends m7{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){let a=X0(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:r});return new rd(a)}};function y7(){return MI(eo(),Qt())}function MI(e,t){return e.type&4?new g7(t,e,bp(e,t)):null}var V0e=new RegExp(`^(\\d+)*(${XG}|${YG})*(.*)`);var v7=()=>null;function sg(e,t){return v7(e,t)}var fp=class{},PI=new It("",{providedIn:"root",factory:()=>!1});var Kk=new It(""),Yk=new It(""),xC=class{},p0=class{};function _7(e){let t=Error(`No component factory found for ${Yi(e)}.`);return t[x7]=e,t}var x7="ngComponent";var wC=class{resolveComponentFactory(t){throw _7(t)}},mp=class{static{this.NULL=new wC}},gp=class{},Q0=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>w7()}}return e})();function w7(){let e=Qt(),t=eo(),n=kc(t.index,e);return(Tc(n)?n:e)[Nr]}var b7=(()=>{class e{static{this.\u0275prov=ft({token:e,providedIn:"root",factory:()=>null})}}return e})();function f0(e,t,n){let r=n?e.styles:null,a=n?e.classes:null,s=0;if(t!==null)for(let h=0;h<t.length;h++){let _=t[h];if(typeof _=="number")s=_;else if(s==1)a=W1(a,_);else if(s==2){let w=_,C=t[++h];r=W1(r,w+": "+C+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=a:e.classesWithoutHost=a}var m0=class extends mp{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Ac(t);return new yp(n,this.ngModule)}};function T2(e,t){let n=[];for(let r in e){if(!e.hasOwnProperty(r))continue;let a=e[r];if(a===void 0)continue;let s=Array.isArray(a),h=s?a[0]:a,_=s?a[1]:Dc.None;t?n.push({propName:h,templateName:r,isSignal:(_&Dc.SignalBased)!==0}):n.push({propName:h,templateName:r})}return n}function S7(e){let t=e.toLowerCase();return t==="svg"?TR:t==="math"?XH:null}var yp=class extends p0{get inputs(){let t=this.componentDef,n=t.inputTransforms,r=T2(t.inputs,!0);if(n!==null)for(let a of r)n.hasOwnProperty(a.propName)&&(a.transform=n[a.propName]);return r}get outputs(){return T2(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=MH(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,a){let s=xn(null);try{a=a||this.ngModule;let h=a instanceof Ji?a:a?.injector;h&&this.componentDef.getStandaloneInjector!==null&&(h=this.componentDef.getStandaloneInjector(h)||h);let _=h?new oC(t,h):t,w=_.get(gp,null);if(w===null)throw new mt(407,!1);let C=_.get(b7,null),T=_.get(fp,null),F={rendererFactory:w,sanitizer:C,inlineEffectRunner:null,changeDetectionScheduler:T},B=w.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",ee=r?A9(B,r,this.componentDef.encapsulation,_):vk(B,$,S7($)),ie=512;this.componentDef.signals?ie|=4096:this.componentDef.onPush||(ie|=16);let ye=null;ee!==null&&(ye=yI(ee,_,!0));let ve=II(0,null,null,1,0,null,null,null,null,null,null),Ae=K0(null,ve,null,ie,null,null,F,B,_,null,ye);lI(Ae);let ke,Ve,Ge=null;try{let it=this.componentDef,ut,Mt=null;it.findHostDirectiveDefs?(ut=[],Mt=new Map,it.findHostDirectiveDefs(it,ut,Mt),ut.push(it)):ut=[it];let nt=C7(Ae,ee);Ge=I7(nt,ee,it,ut,Ae,F,B),Ve=rI(ve,Qi),ee&&D7(B,it,ee,r),n!==void 0&&A7(Ve,this.ngContentSelectors,n),ke=T7(Ge,it,ut,Mt,Ae,[M7]),DI(ve,Ae,null)}catch(it){throw Ge!==null&&fC(Ge),fC(Ae),it}finally{cI()}return new bC(this.componentType,ke,bp(Ve,Ae),Ae,Ve)}finally{xn(s)}}},bC=class extends xC{constructor(t,n,r,a,s){super(),this.location=r,this._rootLView=a,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new rd(a,void 0,!1),this.componentType=t}setInput(t,n){let r=this._tNode.inputs,a;if(r!==null&&(a=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let s=this._rootLView;TI(s[Ht],s,a,t,n),this.previousInputValues.set(t,n);let h=kc(this._tNode.index,s);AI(h,1)}}get injector(){return new Ku(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function C7(e,t){let n=e[Ht],r=Qi;return e[r]=t,Cp(n,r,2,"#host",null)}function I7(e,t,n,r,a,s,h){let _=a[Ht];E7(r,e,t,h);let w=null;t!==null&&(w=yI(t,a[hp]));let C=s.rendererFactory.createRenderer(t,n),T=16;n.signals?T=4096:n.onPush&&(T=64);let F=K0(a,Nk(n),null,T,a[e.index],e,s,C,null,null,w);return _.firstCreatePass&&yC(_,e,r.length-1),Y0(a,F),a[e.index]=F}function E7(e,t,n,r){for(let a of e)t.mergedAttrs=JC(t.mergedAttrs,a.hostAttrs);t.mergedAttrs!==null&&(f0(t,t.mergedAttrs,!0),n!==null&&Dk(r,n,t))}function T7(e,t,n,r,a,s){let h=eo(),_=a[Ht],w=ds(h,a);Ok(_,a,h,n,null,r);for(let T=0;T<n.length;T++){let F=h.directiveStart+T,B=nd(a,_,F,h);Pc(B,a)}Lk(_,a,h),w&&Pc(w,a);let C=nd(a,_,h.directiveStart+h.componentOffset,h);if(e[Xi]=a[Xi]=C,s!==null)for(let T of s)T(C,t);return bI(_,h,a),C}function D7(e,t,n,r){if(r)X1(e,n,["ng-version","18.2.10"]);else{let{attrs:a,classes:s}=PH(t.selectors[0]);a&&X1(e,n,a),s&&s.length>0&&Tk(e,n,s.join(" "))}}function A7(e,t,n){let r=e.projection=[];for(let a=0;a<t.length;a++){let s=n[a];r.push(s!=null?Array.from(s):null)}}function M7(){let e=eo();q0(Qt()[Ht],e)}var xl=(()=>{class e{static{this.__NG_ELEMENT_ID__=P7}}return e})();function P7(){let e=eo();return Jk(e,Qt())}var R7=xl,Xk=class extends R7{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return bp(this._hostTNode,this._hostLView)}get injector(){return new Ku(this._hostTNode,this._hostLView)}get parentInjector(){let t=dI(this._hostTNode,this._hostLView);if(GR(t)){let n=i0(t,this._hostLView),r=r0(t),a=n[Ht].data[r+8];return new Ku(a,n)}else return new Ku(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=D2(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ni}createEmbeddedView(t,n,r){let a,s;typeof r=="number"?a=r:r!=null&&(a=r.index,s=r.injector);let h=sg(this._lContainer,t.ssrId),_=t.createEmbeddedViewImpl(n||{},s,h);return this.insertImpl(_,a,og(this._hostTNode,h)),_}createComponent(t,n,r,a,s){let h=t&&!WH(t),_;if(h)_=n;else{let ee=n||{};_=ee.index,r=ee.injector,a=ee.projectableNodes,s=ee.environmentInjector||ee.ngModuleRef}let w=h?t:new yp(Ac(t)),C=r||this.parentInjector;if(!s&&w.ngModule==null){let ie=(h?C:this.parentInjector).get(Ji,null);ie&&(s=ie)}let T=Ac(w.componentType??{}),F=sg(this._lContainer,T?.id??null),B=F?.firstChild??null,$=w.create(C,a,B,s);return this.insertImpl($.hostView,_,og(this._hostTNode,F)),$}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let a=t._lView;if(QH(a)){let _=this.indexOf(t);if(_!==-1)this.detach(_);else{let w=a[Fi],C=new Xk(w,w[_o],w[Fi]);C.detach(C.indexOf(t))}}let s=this._adjustIndex(n),h=this._lContainer;return J0(h,a,s,r),t.attachToViewContainerRef(),rR(V1(h),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=D2(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ig(this._lContainer,n);r&&(J_(V1(this._lContainer),n),G0(r[Ht],r))}detach(t){let n=this._adjustIndex(t,-1),r=ig(this._lContainer,n);return r&&J_(V1(this._lContainer),n)!=null?new rd(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function D2(e){return e[t0]}function V1(e){return e[t0]||(e[t0]=[])}function Jk(e,t){let n,r=t[e.index];return yl(r)?n=r:(n=zk(r,t,null,e),t[e.index]=n,Y0(t,n)),N7(n,t,e,r),new Xk(n,e,t)}function k7(e,t){let n=e[Nr],r=n.createComment(""),a=ds(t,e),s=Sk(n,a);return d0(n,s,r,v9(n,a),!1),r}var N7=L7,F7=()=>!1;function O7(e,t,n){return F7(e,t,n)}function L7(e,t,n,r){if(e[Ju])return;let a;n.type&8?a=pa(r):a=k7(t,n),e[Ju]=a}var SC=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},CC=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let r=t.contentQueries!==null?t.contentQueries[0]:n.length,a=[];for(let s=0;s<r;s++){let h=n.getByIndex(s),_=this.queries[h.indexInDeclarationView];a.push(_.clone())}return new e(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)kI(t,n).matches!==null&&this.queries[n].setDirty()}},g0=class{constructor(t,n,r=null){this.flags=n,this.read=r,typeof t=="string"?this.predicate=q7(t):this.predicate=t}},IC=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){let a=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(t,a);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new e(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},EC=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let a=0;a<r.length;a++){let s=r[a];this.matchTNodeWithReadOption(t,n,z7(n,s)),this.matchTNodeWithReadOption(t,n,Z_(n,t,s,!1,!1))}else r===ga?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Z_(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(r!==null){let a=this.metadata.read;if(a!==null)if(a===_a||a===xl||a===ga&&n.type&4)this.addMatch(n.index,-2);else{let s=Z_(n,t,a,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function z7(e,t){let n=e.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1]}return null}function U7(e,t){return e.type&11?bp(e,t):e.type&4?MI(e,t):null}function B7(e,t,n,r){return n===-1?U7(t,e):n===-2?V7(e,t,r):nd(e,e[Ht],n,t)}function V7(e,t,n){if(n===_a)return bp(t,e);if(n===ga)return MI(t,e);if(n===xl)return Jk(t,e)}function Qk(e,t,n,r){let a=t[fl].queries[r];if(a.matches===null){let s=e.data,h=n.matches,_=[];for(let w=0;h!==null&&w<h.length;w+=2){let C=h[w];if(C<0)_.push(null);else{let T=s[C];_.push(B7(t,T,h[w+1],n.metadata.read))}}a.matches=_}return a.matches}function TC(e,t,n,r){let a=e.queries.getByIndex(n),s=a.matches;if(s!==null){let h=Qk(e,t,a,n);for(let _=0;_<s.length;_+=2){let w=s[_];if(w>0)r.push(h[_/2]);else{let C=s[_+1],T=t[-w];for(let F=Ni;F<T.length;F++){let B=T[F];B[Xu]===B[Fi]&&TC(B[Ht],B,C,r)}if(T[pp]!==null){let F=T[pp];for(let B=0;B<F.length;B++){let $=F[B];TC($[Ht],$,C,r)}}}}}return r}function RI(e,t){return e[fl].queries[t].queryList}function eN(e,t,n){let r=new pC((n&4)===4);return R9(e,t,r,r.destroy),(t[fl]??=new CC).queries.push(new SC(r))-1}function j7(e,t,n){let r=Fr();return r.firstCreatePass&&(tN(r,new g0(e,t,n),-1),(t&2)===2&&(r.staticViewQueries=!0)),eN(r,Qt(),t)}function $7(e,t,n,r){let a=Fr();if(a.firstCreatePass){let s=eo();tN(a,new g0(t,n,r),s.index),H7(a,e),(n&2)===2&&(a.staticContentQueries=!0)}return eN(a,Qt(),n)}function q7(e){return e.split(",").map(t=>t.trim())}function tN(e,t,n){e.queries===null&&(e.queries=new IC),e.queries.track(new EC(t,n))}function H7(e,t){let n=e.contentQueries||(e.contentQueries=[]),r=n.length?n[n.length-1]:-1;t!==r&&n.push(e.queries.length-1,t)}function kI(e,t){return e.queries.getByIndex(t)}function nN(e,t){let n=e[Ht],r=kI(n,t);return r.crossesNgTemplate?TC(n,e,t,[]):Qk(n,e,r,t)}var A2=new Set;function cd(e){A2.has(e)||(A2.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function ud(e,t){cd("NgSignals");let n=EP(e),r=n[aa];return t?.equal&&(r.equal=t.equal),n.set=a=>x_(r,a),n.update=a=>TP(r,a),n.asReadonly=G7.bind(n),n}function G7(){let e=this[aa];if(e.readonlyFn===void 0){let t=()=>this();t[aa]=e,e.readonlyFn=t}return e.readonlyFn}function rN(e,t){let n,r=bP(()=>{n._dirtyCounter();let a=Y7(n,e);if(t&&a===void 0)throw new mt(-951,!1);return a});return n=r[aa],n._dirtyCounter=ud(0),n._flatValue=void 0,r}function W7(){return rN(!0,!1)}function Z7(){return rN(!0,!0)}function K7(e,t){let n=e[aa];n._lView=Qt(),n._queryIndex=t,n._queryList=RI(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function Y7(e,t){let n=e._lView,r=e._queryIndex;if(n===void 0||r===void 0||n[Bt]&4)return t?void 0:yo;let a=RI(n,r),s=nN(n,r);return a.reset(s,ok),t?a.first:a._changesDetected||e._flatValue===void 0?e._flatValue=a.toArray():e._flatValue}function M2(e,t){return W7()}function X7(e,t){return Z7()}var ex=(M2.required=X7,M2);function J7(e){let t=[],n=new Map;function r(a){let s=n.get(a);if(!s){let h=e(a);n.set(a,s=h.then(nW))}return s}return y0.forEach((a,s)=>{let h=[];a.templateUrl&&h.push(r(a.templateUrl).then(C=>{a.template=C}));let _=typeof a.styles=="string"?[a.styles]:a.styles||[];if(a.styles=_,a.styleUrl&&a.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(a.styleUrls?.length){let C=a.styles.length,T=a.styleUrls;a.styleUrls.forEach((F,B)=>{_.push(""),h.push(r(F).then($=>{_[C+B]=$,T.splice(T.indexOf(F),1),T.length==0&&(a.styleUrls=void 0)}))})}else a.styleUrl&&h.push(r(a.styleUrl).then(C=>{_.push(C),a.styleUrl=void 0}));let w=Promise.all(h).then(()=>rW(s));t.push(w)}),eW(),Promise.all(t).then(()=>{})}var y0=new Map,Q7=new Set;function eW(){let e=y0;return y0=new Map,e}function tW(){return y0.size===0}function nW(e){return typeof e=="string"?e:e.text()}function rW(e){Q7.delete(e)}var Rc=class{},ag=class{};var v0=class extends Rc{constructor(t,n,r,a=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new m0(this);let s=pR(t);this._bootstrapComponents=gk(s.bootstrap),this._r3Injector=tk(t,n,[{provide:Rc,useValue:this},{provide:mp,useValue:this.componentFactoryResolver},...r],Yi(t),new Set(["environment"])),a&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},_0=class extends ag{constructor(t){super(),this.moduleType=t}create(t){return new v0(this.moduleType,t,[])}};function iW(e,t,n){return new v0(e,t,n,!1)}var DC=class extends Rc{constructor(t){super(),this.componentFactoryResolver=new m0(this),this.instance=null;let n=new ng([...t.providers,{provide:Rc,useValue:this},{provide:mp,useValue:this.componentFactoryResolver}],t.parent||tI(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function tx(e,t,n=null){return new DC({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function iN(e){return NI(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function oW(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function NI(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function FI(e,t,n){return e[t]=n}function sW(e,t){return e[t]}function ya(e,t,n){let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function aW(e,t,n,r){let a=ya(e,t,n);return ya(e,t+1,r)||a}function lW(e){return(e.flags&32)===32}function cW(e,t,n,r,a,s,h,_,w){let C=t.consts,T=Cp(t,e,4,h||null,_||null);EI(t,n,T,Mc(C,w)),q0(t,T);let F=T.tView=II(2,T,r,a,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,C,null);return t.queries!==null&&(t.queries.template(t,T),F.queries=t.queries.embeddedTView(T)),T}function x0(e,t,n,r,a,s,h,_,w,C){let T=n+Qi,F=t.firstCreatePass?cW(T,t,e,r,a,s,h,_,w):t.data[T];ad(F,!1);let B=uW(t,e,F,n);j0()&&W0(t,e,B,F),Pc(B,e);let $=zk(B,e,B,F);return e[T]=$,Y0(e,$),O7($,F,e),L0(F)&&SI(t,e,F),w!=null&&CI(e,F,C),F}function Tn(e,t,n,r,a,s,h,_){let w=Qt(),C=Fr(),T=Mc(C.consts,s);return x0(w,C,e,t,n,r,a,T,h,_),Tn}var uW=dW;function dW(e,t,n,r){return $0(!0),t[Nr].createComment("")}var sp=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(sp||{}),oN=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ft({token:e,providedIn:"root",factory:()=>new e})}}return e})(),AC=class e{constructor(){this.ngZone=Fe(zn),this.scheduler=Fe(fp),this.errorHandler=Fe(fa,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[sp.EarlyRead,sp.Write,sp.MixedReadWrite,sp.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=ft({token:e,providedIn:"root",factory:()=>new e})}},MC=class{constructor(t,n,r,a){this.impl=t,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=a?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function OI(e,t){!t?.injector&&N0(OI);let n=t?.injector??Fe(vo);return yk(n)?(cd("NgAfterRender"),sN(e,n,t,!1)):aN}function dd(e,t){!t?.injector&&N0(dd);let n=t?.injector??Fe(vo);return yk(n)?(cd("NgAfterNextRender"),sN(e,n,t,!0)):aN}function hW(e,t){if(e instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[t]=e,n}else return[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function sN(e,t,n,r){let a=t.get(oN);a.impl??=t.get(AC);let s=n?.phase??sp.MixedReadWrite,h=n?.manualCleanup!==!0?t.get(_l):null,_=new MC(a.impl,hW(e,s),r,h);return a.impl.register(_),_}var aN={destroy(){}};function lr(e,t,n,r){let a=Qt(),s=hg();if(ya(a,s,t)){let h=Fr(),_=uI();W9(_,a,e,t,n,r)}return lr}function pW(e,t,n,r){return ya(e,hg(),n)?t+D0(n)+r:wa}function j_(e,t){return e<<17|t<<2}function id(e){return e>>17&32767}function fW(e){return(e&2)==2}function mW(e,t){return e&131071|t<<17}function PC(e){return e|2}function vp(e){return(e&131068)>>2}function j1(e,t){return e&-131069|t<<2}function gW(e){return(e&1)===1}function RC(e){return e|1}function yW(e,t,n,r,a,s){let h=s?t.classBindings:t.styleBindings,_=id(h),w=vp(h);e[r]=n;let C=!1,T;if(Array.isArray(n)){let F=n;T=F[1],(T===null||dg(F,T)>0)&&(C=!0)}else T=n;if(a)if(w!==0){let B=id(e[_+1]);e[r+1]=j_(B,_),B!==0&&(e[B+1]=j1(e[B+1],r)),e[_+1]=mW(e[_+1],r)}else e[r+1]=j_(_,0),_!==0&&(e[_+1]=j1(e[_+1],r)),_=r;else e[r+1]=j_(w,0),_===0?_=r:e[w+1]=j1(e[w+1],r),w=r;C&&(e[r+1]=PC(e[r+1])),P2(e,T,r,!0),P2(e,T,r,!1),vW(t,T,e,r,s),h=j_(_,w),s?t.classBindings=h:t.styleBindings=h}function vW(e,t,n,r,a){let s=a?e.residualClasses:e.residualStyles;s!=null&&typeof t=="string"&&dg(s,t)>=0&&(n[r+1]=RC(n[r+1]))}function P2(e,t,n,r){let a=e[n+1],s=t===null,h=r?id(a):vp(a),_=!1;for(;h!==0&&(_===!1||s);){let w=e[h],C=e[h+1];_W(w,t)&&(_=!0,e[h+1]=r?RC(C):PC(C)),h=r?id(C):vp(C)}_&&(e[n+1]=r?PC(a):RC(a))}function _W(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?dg(e,t)>=0:!1}var ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lN(e){return e.substring(ei.key,ei.keyEnd)}function xW(e){return e.substring(ei.value,ei.valueEnd)}function wW(e){return dN(e),cN(e,_p(e,0,ei.textEnd))}function cN(e,t){let n=ei.textEnd;return n===t?-1:(t=ei.keyEnd=SW(e,ei.key=t,n),_p(e,t,n))}function bW(e){return dN(e),uN(e,_p(e,0,ei.textEnd))}function uN(e,t){let n=ei.textEnd,r=ei.key=_p(e,t,n);return n===r?-1:(r=ei.keyEnd=CW(e,r,n),r=R2(e,r,n,58),r=ei.value=_p(e,r,n),r=ei.valueEnd=IW(e,r,n),R2(e,r,n,59))}function dN(e){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=e.length}function _p(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function SW(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function CW(e,t,n){let r;for(;t<n&&((r=e.charCodeAt(t))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)t++;return t}function R2(e,t,n,r){return t=_p(e,t,n),t<n&&t++,t}function IW(e,t,n){let r=-1,a=-1,s=-1,h=t,_=h;for(;h<n;){let w=e.charCodeAt(h++);if(w===59)return _;w===34||w===39?_=h=k2(e,w,h,n):t===h-4&&s===85&&a===82&&r===76&&w===40?_=h=k2(e,41,h,n):w>32&&(_=h),s=a,a=r,r=w&-33}return _}function k2(e,t,n,r){let a=-1,s=n;for(;s<r;){let h=e.charCodeAt(s++);if(h==t&&a!==92)return s;h==92&&a===92?a=0:a=h}throw new Error}function Te(e,t,n){let r=Qt(),a=hg();if(ya(r,a,t)){let s=Fr(),h=uI();Fk(s,h,r,e,t,r[Nr],n,!1)}return Te}function kC(e,t,n,r,a){let s=t.inputs,h=a?"class":"style";TI(e,n,s[h],h,r)}function wl(e,t,n){return pN(e,t,n,!1),wl}function pg(e,t){return pN(e,t,null,!0),pg}function hN(e){fN(yN,EW,e,!1)}function EW(e,t){for(let n=bW(t);n>=0;n=uN(t,n))yN(e,lN(t),xW(t))}function hs(e){fN(kW,TW,e,!0)}function TW(e,t){for(let n=wW(t);n>=0;n=cN(t,n))P0(e,lN(t),!0)}function pN(e,t,n,r){let a=Qt(),s=Fr(),h=zR(2);if(s.firstUpdatePass&&gN(s,e,h,r),t!==wa&&ya(a,h,t)){let _=s.data[Nc()];vN(s,_,a,a[Nr],e,a[h+1]=FW(t,n),r,h)}}function fN(e,t,n,r){let a=Fr(),s=zR(2);a.firstUpdatePass&&gN(a,null,s,r);let h=Qt();if(n!==wa&&ya(h,s,n)){let _=a.data[Nc()];if(_N(_,r)&&!mN(a,s)){let w=r?_.classesWithoutHost:_.stylesWithoutHost;w!==null&&(n=W1(w,n||"")),kC(a,_,h,n,r)}else NW(a,_,h,h[Nr],h[s+1],h[s+1]=RW(e,t,n),r,s)}}function mN(e,t){return t>=e.expandoStartIndex}function gN(e,t,n,r){let a=e.data;if(a[n+1]===null){let s=a[Nc()],h=mN(e,n);_N(s,r)&&t===null&&!h&&(t=!1),t=DW(a,s,t,r),yW(a,s,t,n,h,r)}}function DW(e,t,n,r){let a=pG(e),s=r?t.residualClasses:t.residualStyles;if(a===null)(r?t.classBindings:t.styleBindings)===0&&(n=$1(null,e,t,n,r),n=lg(n,t.attrs,r),s=null);else{let h=t.directiveStylingLast;if(h===-1||e[h]!==a)if(n=$1(a,e,t,n,r),s===null){let w=AW(e,t,r);w!==void 0&&Array.isArray(w)&&(w=$1(null,e,t,w[1],r),w=lg(w,t.attrs,r),MW(e,t,r,w))}else s=PW(e,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),n}function AW(e,t,n){let r=n?t.classBindings:t.styleBindings;if(vp(r)!==0)return e[id(r)]}function MW(e,t,n,r){let a=n?t.classBindings:t.styleBindings;e[id(a)]=r}function PW(e,t,n){let r,a=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<a;s++){let h=e[s].hostAttrs;r=lg(r,h,n)}return lg(r,t.attrs,n)}function $1(e,t,n,r,a){let s=null,h=n.directiveEnd,_=n.directiveStylingLast;for(_===-1?_=n.directiveStart:_++;_<h&&(s=t[_],r=lg(r,s.hostAttrs,a),s!==e);)_++;return e!==null&&(n.directiveStylingLast=_),r}function lg(e,t,n){let r=n?1:2,a=-1;if(t!==null)for(let s=0;s<t.length;s++){let h=t[s];typeof h=="number"?a=h:a===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),P0(e,h,n?!0:t[++s]))}return e===void 0?null:e}function RW(e,t,n){if(n==null||n==="")return yo;let r=[],a=Sp(n);if(Array.isArray(a))for(let s=0;s<a.length;s++)e(r,a[s],!0);else if(typeof a=="object")for(let s in a)a.hasOwnProperty(s)&&e(r,s,a[s]);else typeof a=="string"&&t(r,a);return r}function yN(e,t,n){P0(e,t,Sp(n))}function kW(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&P0(e,r,n)}function NW(e,t,n,r,a,s,h,_){a===wa&&(a=yo);let w=0,C=0,T=0<a.length?a[0]:null,F=0<s.length?s[0]:null;for(;T!==null||F!==null;){let B=w<a.length?a[w+1]:void 0,$=C<s.length?s[C+1]:void 0,ee=null,ie;T===F?(w+=2,C+=2,B!==$&&(ee=F,ie=$)):F===null||T!==null&&T<F?(w+=2,ee=T):(C+=2,ee=F,ie=$),ee!==null&&vN(e,t,n,r,ee,ie,h,_),T=w<a.length?a[w]:null,F=C<s.length?s[C]:null}}function vN(e,t,n,r,a,s,h,_){if(!(t.type&3))return;let w=e.data,C=w[_+1],T=gW(C)?N2(w,t,n,a,vp(C),h):void 0;if(!w0(T)){w0(s)||fW(C)&&(s=N2(w,null,n,a,_,h));let F=DR(Nc(),n);C9(r,h,F,a,s)}}function N2(e,t,n,r,a,s){let h=t===null,_;for(;a>0;){let w=e[a],C=Array.isArray(w),T=C?w[1]:w,F=T===null,B=n[a+1];B===wa&&(B=F?yo:void 0);let $=F?k1(B,r):T===r?B:void 0;if(C&&!w0($)&&($=k1(w,r)),w0($)&&(_=$,h))return _;let ee=e[a+1];a=h?id(ee):vp(ee)}if(t!==null){let w=s?t.residualClasses:t.residualStyles;w!=null&&(_=k1(w,r))}return _}function w0(e){return e!==void 0}function FW(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Yi(Sp(e)))),e}function _N(e,t){return(e.flags&(t?8:16))!==0}var NC=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),a=Math.max(t,n),s=this.detach(a);if(a-r>1){let h=this.detach(r);this.attach(r,s),this.attach(a,h)}else this.attach(r,s)}move(t,n){this.attach(n,this.detach(t))}};function q1(e,t,n,r,a){return e===n&&Object.is(t,r)?1:Object.is(a(e,t),a(n,r))?-1:0}function OW(e,t,n){let r,a,s=0,h=e.length-1,_=void 0;if(Array.isArray(t)){let w=t.length-1;for(;s<=h&&s<=w;){let C=e.at(s),T=t[s],F=q1(s,C,s,T,n);if(F!==0){F<0&&e.updateValue(s,T),s++;continue}let B=e.at(h),$=t[w],ee=q1(h,B,w,$,n);if(ee!==0){ee<0&&e.updateValue(h,$),h--,w--;continue}let ie=n(s,C),ye=n(h,B),ve=n(s,T);if(Object.is(ve,ye)){let Ae=n(w,$);Object.is(Ae,ie)?(e.swap(s,h),e.updateValue(h,$),w--,h--):e.move(h,s),e.updateValue(s,T),s++;continue}if(r??=new b0,a??=O2(e,s,h,n),FC(e,r,s,ve))e.updateValue(s,T),s++,h++;else if(a.has(ve))r.set(ie,e.detach(s)),h--;else{let Ae=e.create(s,t[s]);e.attach(s,Ae),s++,h++}}for(;s<=w;)F2(e,r,n,s,t[s]),s++}else if(t!=null){let w=t[Symbol.iterator](),C=w.next();for(;!C.done&&s<=h;){let T=e.at(s),F=C.value,B=q1(s,T,s,F,n);if(B!==0)B<0&&e.updateValue(s,F),s++,C=w.next();else{r??=new b0,a??=O2(e,s,h,n);let $=n(s,F);if(FC(e,r,s,$))e.updateValue(s,F),s++,h++,C=w.next();else if(!a.has($))e.attach(s,e.create(s,F)),s++,h++,C=w.next();else{let ee=n(s,T);r.set(ee,e.detach(s)),h--}}}for(;!C.done;)F2(e,r,n,e.length,C.value),C=w.next()}for(;s<=h;)e.destroy(e.detach(h--));r?.forEach(w=>{e.destroy(w)})}function FC(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function F2(e,t,n,r,a){if(FC(e,t,r,n(r,a)))e.updateValue(r,a);else{let s=e.create(r,a);e.attach(r,s)}}function O2(e,t,n,r){let a=new Set;for(let s=t;s<=n;s++)a.add(r(s,e.at(s)));return a}var b0=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let a=this._vMap;for(;a.has(r);)r=a.get(r);a.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let a=this._vMap;for(;a.has(r);)r=a.get(r),t(r,n)}}};var OC=class{constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ni}};function LI(e){return e}var LC=class{constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function zI(e,t,n,r,a,s,h,_,w,C,T,F,B){cd("NgControlFlow");let $=Qt(),ee=Fr(),ie=w!==void 0,ye=Qt(),ve=_?h.bind(ye[Bo][Xi]):h,Ae=new LC(ie,ve);ye[Qi+e]=Ae,x0($,ee,e+1,t,n,r,a,Mc(ee.consts,s)),ie&&x0($,ee,e+2,w,C,T,F,Mc(ee.consts,B))}var zC=class extends NC{constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ni}at(t){return this.getLView(t)[Xi].$implicit}attach(t,n){let r=n[dp];this.needsIndexUpdate||=t!==this.length,J0(this.lContainer,n,t,og(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,LW(this.lContainer,t)}create(t,n){let r=sg(this.lContainer,this.templateTNode.tView.ssrId),a=X0(this.hostLView,this.templateTNode,new OC(this.lContainer,n,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),a}destroy(t){G0(t[Ht],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[Xi].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Xi].$index=t}getLView(t){return zW(this.lContainer,t)}};function UI(e){let t=xn(null),n=Nc();try{let r=Qt(),a=r[Ht],s=r[n],h=n+1,_=L2(r,h);if(s.liveCollection===void 0){let C=z2(a,h);s.liveCollection=new zC(_,r,C)}else s.liveCollection.reset();let w=s.liveCollection;if(OW(w,e,s.trackByFn),w.updateIndexes(),s.hasEmptyBlock){let C=hg(),T=w.length===0;if(ya(r,C,T)){let F=n+2,B=L2(r,F);if(T){let $=z2(a,F),ee=sg(B,$.tView.ssrId),ie=X0(r,$,void 0,{dehydratedView:ee});J0(B,ie,0,og($,ee))}else n7(B,0)}}}finally{xn(t)}}function L2(e,t){return e[t]}function LW(e,t){return ig(e,t)}function zW(e,t){return t7(e,t)}function z2(e,t){return rI(e,t)}function UW(e,t,n,r,a,s){let h=t.consts,_=Mc(h,a),w=Cp(t,e,2,r,_);return EI(t,n,w,Mc(h,s)),w.attrs!==null&&f0(w,w.attrs,!1),w.mergedAttrs!==null&&f0(w,w.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,w),w}function we(e,t,n,r){let a=Qt(),s=Fr(),h=Qi+e,_=a[Nr],w=s.firstCreatePass?UW(h,s,a,t,n,r):s.data[h],C=BW(s,a,w,_,t,e);a[h]=C;let T=L0(w);return ad(w,!0),Dk(_,C,w),!lW(w)&&j0()&&W0(s,a,C,w),nG()===0&&Pc(C,a),rG(),T&&(SI(s,a,w),bI(s,w,a)),r!==null&&CI(a,w),we}function Se(){let e=eo();oI()?sI():(e=e.parent,ad(e,!1));let t=e;oG(t)&&sG(),iG();let n=Fr();return n.firstCreatePass&&(q0(n,e),nI(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&wG(t)&&kC(n,t,Qt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&bG(t)&&kC(n,t,Qt(),t.stylesWithoutHost,!1),Se}function Qe(e,t,n,r){return we(e,t,n,r),Se(),Qe}var BW=(e,t,n,r,a,s)=>($0(!0),vk(r,a,yG()));function VW(e,t,n,r,a){let s=t.consts,h=Mc(s,r),_=Cp(t,e,8,"ng-container",h);h!==null&&f0(_,h,!0);let w=Mc(s,a);return EI(t,n,_,w),t.queries!==null&&t.queries.elementStart(t,_),_}function fg(e,t,n){let r=Qt(),a=Fr(),s=e+Qi,h=a.firstCreatePass?VW(s,a,r,t,n):a.data[s];ad(h,!0);let _=jW(a,r,h,e);return r[s]=_,j0()&&W0(a,r,_,h),Pc(_,r),L0(h)&&(SI(a,r,h),bI(a,h,r)),n!=null&&CI(r,h),fg}function mg(){let e=eo(),t=Fr();return oI()?sI():(e=e.parent,ad(e,!1)),t.firstCreatePass&&(q0(t,e),nI(e)&&t.queries.elementEnd(e)),mg}function nx(e,t,n){return fg(e,t,n),mg(),nx}var jW=(e,t,n,r)=>($0(!0),u9(t[Nr],""));function hd(){return Qt()}function BI(e,t,n){let r=Qt(),a=hg();if(ya(r,a,t)){let s=Fr(),h=uI();Fk(s,h,r,e,t,r[Nr],n,!0)}return BI}var S0="en-US";var $W=S0;function qW(e){typeof e=="string"&&($W=e.toLowerCase().replace(/_/g,"-"))}var HW=(e,t,n)=>{};function wn(e,t,n,r){let a=Qt(),s=Fr(),h=eo();return WW(s,a,a[Nr],h,e,t,r),wn}function GW(e,t,n,r){let a=e.cleanup;if(a!=null)for(let s=0;s<a.length-1;s+=2){let h=a[s];if(h===n&&a[s+1]===r){let _=t[e0],w=a[s+2];return _.length>w?_[w]:null}typeof h=="string"&&(s+=2)}return null}function WW(e,t,n,r,a,s,h){let _=L0(r),C=e.firstCreatePass&&Vk(e),T=t[Xi],F=Bk(t),B=!0;if(r.type&3||h){let ie=ds(r,t),ye=h?h(ie):ie,ve=F.length,Ae=h?Ve=>h(pa(Ve[r.index])):r.index,ke=null;if(!h&&_&&(ke=GW(e,t,a,r.index)),ke!==null){let Ve=ke.__ngLastListenerFn__||ke;Ve.__ngNextListenerFn__=s,ke.__ngLastListenerFn__=s,B=!1}else{s=B2(r,t,T,s),HW(ie,a,s);let Ve=n.listen(ye,a,s);F.push(s,Ve),C&&C.push(a,Ae,ve,ve+1)}}else s=B2(r,t,T,s);let $=r.outputs,ee;if(B&&$!==null&&(ee=$[a])){let ie=ee.length;if(ie)for(let ye=0;ye<ie;ye+=2){let ve=ee[ye],Ae=ee[ye+1],Ge=t[ve][Ae].subscribe(s),it=F.length;F.push(s,Ge),C&&C.push(a,r.index,it,-(it+1))}}}function U2(e,t,n,r){let a=xn(null);try{return ca(6,t,n),n(r)!==!1}catch(s){return jk(e,s),!1}finally{ca(7,t,n),xn(a)}}function B2(e,t,n,r){return function a(s){if(s===Function)return r;let h=e.componentOffset>-1?kc(e.index,t):t;AI(h,5);let _=U2(t,n,r,s),w=a.__ngNextListenerFn__;for(;w;)_=U2(t,n,w,s)&&_,w=w.__ngNextListenerFn__;return _}}function zt(e=1){return mG(e)}function ZW(e,t){let n=null,r=IH(e);for(let a=0;a<t.length;a++){let s=t[a];if(s==="*"){n=a;continue}if(r===null?lR(e,s,!0):DH(r,s))return a}return n}function zs(e){let t=Qt()[Bo][_o];if(!t.projection){let n=e?e.length:1,r=t.projection=mH(n,null),a=r.slice(),s=t.child;for(;s!==null;){if(s.type!==128){let h=e?ZW(s,e):0;h!==null&&(a[h]?a[h].projectionNext=s:r[h]=s,a[h]=s)}s=s.next}}}function Us(e,t=0,n,r,a,s){let h=Qt(),_=Fr(),w=r?e+1:null;w!==null&&x0(h,_,w,r,a,s,null,n);let C=Cp(_,Qi+e,16,null,n||null);C.projection===null&&(C.projection=t),sI();let F=!h[dp]||FR();h[Bo][_o].projection[C.projection]===null&&w!==null?KW(h,_,w):F&&(C.flags&32)!==32&&b9(_,h,C)}function KW(e,t,n){let r=Qi+n,a=t.data[r],s=e[r],h=sg(s,a.tView.ssrId),_=X0(e,a,void 0,{dehydratedView:h});J0(s,_,0,og(a,h))}function rx(e,t,n,r){$7(e,t,n,r)}function ix(e){let t=Qt(),n=Fr(),r=aI();V0(r+1);let a=kI(n,r);if(e.dirty&&JH(t)===((a.metadata.flags&2)===2)){if(a.matches===null)e.reset([]);else{let s=nN(t,r);e.reset(s,ok),e.notifyOnChanges()}return!0}return!1}function ox(){return RI(Qt(),aI())}function sx(e,t,n,r){K7(e,j7(t,n,r))}function ax(e=1){V0(aI()+e)}function YW(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function xN(e){let t=lG();return AR(t,Qi+e)}function Ye(e,t=""){let n=Qt(),r=Fr(),a=e+Qi,s=r.firstCreatePass?Cp(r,a,1,t,null):r.data[a],h=XW(r,n,s,t,e);n[a]=h,j0()&&W0(r,n,h,s),ad(s,!1)}var XW=(e,t,n,r,a)=>($0(!0),l9(t[Nr],r));function hi(e){return jt("",e,""),hi}function jt(e,t,n){let r=Qt(),a=pW(r,e,t,n);return a!==wa&&X9(r,Nc(),a),jt}function JW(e,t,n){let r=Fr();if(r.firstCreatePass){let a=wp(e);UC(n,r.data,r.blueprint,a,!0),UC(t,r.data,r.blueprint,a,!1)}}function UC(e,t,n,r,a){if(e=Ki(e),Array.isArray(e))for(let s=0;s<e.length;s++)UC(e[s],t,n,r,a);else{let s=Fr(),h=Qt(),_=eo(),w=up(e)?e:Ki(e.provide),C=_R(e),T=_.providerIndexes&1048575,F=_.directiveStart,B=_.providerIndexes>>20;if(up(e)||!e.multi){let $=new td(C,a,sn),ee=G1(w,t,a?T:T+B,F);ee===-1?(aC(s0(_,h),s,w),H1(s,e,t.length),t.push(w),_.directiveStart++,_.directiveEnd++,a&&(_.providerIndexes+=1048576),n.push($),h.push($)):(n[ee]=$,h[ee]=$)}else{let $=G1(w,t,T+B,F),ee=G1(w,t,T,T+B),ie=$>=0&&n[$],ye=ee>=0&&n[ee];if(a&&!ye||!a&&!ie){aC(s0(_,h),s,w);let ve=tZ(a?eZ:QW,n.length,a,r,C);!a&&ye&&(n[ee].providerFactory=ve),H1(s,e,t.length,0),t.push(w),_.directiveStart++,_.directiveEnd++,a&&(_.providerIndexes+=1048576),n.push(ve),h.push(ve)}else{let ve=wN(n[a?ee:$],C,!a&&r);H1(s,e,$>-1?$:ee,ve)}!a&&r&&ye&&n[ee].componentProviders++}}}function H1(e,t,n,r){let a=up(t),s=UH(t);if(a||s){let w=(s?Ki(t.useClass):t).prototype.ngOnDestroy;if(w){let C=e.destroyHooks||(e.destroyHooks=[]);if(!a&&t.multi){let T=C.indexOf(n);T===-1?C.push(n,[r,w]):C[T+1].push(r,w)}else C.push(n,w)}}}function wN(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function G1(e,t,n,r){for(let a=n;a<r;a++)if(t[a]===e)return a;return-1}function QW(e,t,n,r){return BC(this.multi,[])}function eZ(e,t,n,r){let a=this.multi,s;if(this.providerFactory){let h=this.providerFactory.componentProviders,_=nd(n,n[Ht],this.providerFactory.index,r);s=_.slice(0,h),BC(a,s);for(let w=h;w<_.length;w++)s.push(_[w])}else s=[],BC(a,s);return s}function BC(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function tZ(e,t,n,r,a){let s=new td(e,n,sn);return s.multi=[],s.index=t,s.componentProviders=0,wN(s,a,r&&!n),s}function lx(e,t=[]){return n=>{n.providersResolver=(r,a)=>JW(r,a?a(e):e,t)}}var nZ=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gR(!1,n.type),a=r.length>0?tx([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,a)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ft({token:e,providedIn:"environment",factory:()=>new e(wt(Ji))})}}return e})();function Ip(e){cd("NgStandalone"),e.getStandaloneInjector=t=>t.get(nZ).getOrCreateStandaloneInjector(e)}function gg(e,t,n){let r=B0()+e,a=Qt();return a[r]===wa?FI(a,r,n?t.call(n):t()):sW(a,r)}function pd(e,t,n,r){return SN(Qt(),B0(),e,t,n,r)}function VI(e,t,n,r,a){return rZ(Qt(),B0(),e,t,n,r,a)}function bN(e,t){let n=e[t];return n===wa?void 0:n}function SN(e,t,n,r,a,s){let h=t+n;return ya(e,h,a)?FI(e,h+1,s?r.call(s,a):r(a)):bN(e,h+1)}function rZ(e,t,n,r,a,s,h){let _=t+n;return aW(e,_,a,s)?FI(e,_+2,h?r.call(h,a,s):r(a,s)):bN(e,_+2)}function CN(e,t){let n=Fr(),r,a=e+Qi;n.firstCreatePass?(r=iZ(t,n.pipeRegistry),n.data[a]=r,r.onDestroy&&(n.destroyHooks??=[]).push(a,r.onDestroy)):r=n.data[a];let s=r.factory||(r.factory=Yu(r.type,!0)),h,_=go(sn);try{let w=o0(!1),C=s();return o0(w),YW(n,Qt(),a,C),C}finally{go(_)}}function iZ(e,t){if(t)for(let n=t.length-1;n>=0;n--){let r=t[n];if(e===r.name)return r}}function IN(e,t,n){let r=e+Qi,a=Qt(),s=AR(a,r);return oZ(a,r)?SN(a,B0(),t,s.transform,n,s):s.transform(n)}function oZ(e,t){return e[Ht].data[t].pure}var $_=null;function sZ(e){$_!==null&&(e.defaultEncapsulation!==$_.defaultEncapsulation||e.preserveWhitespaces!==$_.preserveWhitespaces)||($_=e)}var cx=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var jI=new It(""),yg=new It(""),ux=(()=>{class e{constructor(n,r,a){this._ngZone=n,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,$I||(aZ(a),a.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(n)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,a){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==s),n()},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:a})}whenStable(n,r,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,a),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,a){return[]}static{this.\u0275fac=function(r){return new(r||e)(wt(zn),wt(dx),wt(yg))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),dx=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return $I?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function aZ(e){$I=e}var $I;function vg(e){return!!e&&typeof e.then=="function"}function EN(e){return!!e&&typeof e.subscribe=="function"}var hx=new It(""),TN=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Fe(hx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let a of this.appInits){let s=a();if(vg(s))n.push(s);else if(EN(s)){let h=new Promise((_,w)=>{s.subscribe({complete:_,error:w})});n.push(h)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(a=>{this.reject(a)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),px=new It("");function lZ(){IP(()=>{throw new mt(600,!1)})}function cZ(e){return e.isBoundToModule}var uZ=10;function dZ(e,t,n){try{let r=n();return vg(r)?r.catch(a=>{throw t.runOutsideAngular(()=>e.handleError(a)),a}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}function DN(e,t){return Array.isArray(t)?t.reduce(DN,e):Z(Z({},e),t)}var bl=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Fe(VG),this.afterRenderManager=Fe(oN),this.zonelessEnabled=Fe(PI),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Vr,this.afterTick=new Vr,this.componentTypes=[],this.components=[],this.isStable=Fe(Fc).hasPendingTasks.pipe(on(n=>!n)),this._injector=Fe(Ji)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:a=>{a&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let a=n instanceof p0;if(!this._injector.get(TN).done){let B=!a&&hR(n),$=!1;throw new mt(405,$)}let h;a?h=n:h=this._injector.get(mp).resolveComponentFactory(n),this.componentTypes.push(h.componentType);let _=cZ(h)?void 0:this._injector.get(Rc),w=r||h.selector,C=h.create(vo.NULL,[],w,_),T=C.location.nativeElement,F=C.injector.get(jI,null);return F?.registerApplication(T),C.onDestroy(()=>{this.detachView(C.hostView),K_(this.components,C),F?.unregisterApplication(T)}),this._loadComponent(C),C}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new mt(101,!1);let n=xn(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,xn(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(gp,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<uZ;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:a,notifyErrorHandler:s}of this._views)hZ(a,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>z0(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;K_(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(px,[]);[...this._bootstrapListeners,...r].forEach(a=>a(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>K_(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new mt(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function K_(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function hZ(e,t,n,r){if(!n&&!z0(e))return;Hk(e,t,n&&!r?0:1)}var VC=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},fx=(()=>{class e{compileModuleSync(n){return new _0(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),a=pR(n),s=gk(a.declarations).reduce((h,_)=>{let w=Ac(_);return w&&h.push(new yp(w)),h},[]);return new VC(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),pZ=new It("");function fZ(e,t,n){let r=new _0(n);return Promise.resolve(r)}function V2(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var mZ=(()=>{class e{constructor(){this.zone=Fe(zn),this.changeDetectionScheduler=Fe(fp),this.applicationRef=Fe(bl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gZ({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new zn(Me(Z({},AN()),{scheduleInRootZone:n})),[{provide:zn,useFactory:e},{provide:cp,multi:!0,useFactory:()=>{let r=Fe(mZ,{optional:!0});return()=>r.initialize()}},{provide:cp,multi:!0,useFactory:()=>{let r=Fe(yZ);return()=>{r.initialize()}}},t===!0?{provide:Kk,useValue:!0}:[],{provide:Yk,useValue:n??nk}]}function AN(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var yZ=(()=>{class e{constructor(){this.subscription=new Rr,this.initialized=!1,this.zone=Fe(zn),this.pendingTasks=Fe(Fc)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{zn.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{zn.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var vZ=(()=>{class e{constructor(){this.appRef=Fe(bl),this.taskService=Fe(Fc),this.ngZone=Fe(zn),this.zonelessEnabled=Fe(PI),this.disableScheduling=Fe(Kk,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Rr,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(l0):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Fe(Yk,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof c0||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?v2:rk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(l0+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,v2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _Z(){return typeof $localize<"u"&&$localize.locale||S0}var qI=new It("",{providedIn:"root",factory:()=>Fe(qI,ln.Optional|ln.SkipSelf)||_Z()});var C0=new It("");function q_(e){return!e.moduleRef}function xZ(e){let t=q_(e)?e.r3Injector:e.moduleRef.injector,n=t.get(zn);return n.run(()=>{q_(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(fa,null),a;if(n.runOutsideAngular(()=>{a=n.onError.subscribe({next:s=>{r.handleError(s)}})}),q_(e)){let s=()=>t.destroy(),h=e.platformInjector.get(C0);h.add(s),t.onDestroy(()=>{a.unsubscribe(),h.delete(s)})}else{let s=()=>e.moduleRef.destroy(),h=e.platformInjector.get(C0);h.add(s),e.moduleRef.onDestroy(()=>{K_(e.allPlatformModules,e.moduleRef),a.unsubscribe(),h.delete(s)})}return dZ(r,n,()=>{let s=t.get(TN);return s.runInitializers(),s.donePromise.then(()=>{let h=t.get(qI,S0);if(qW(h||S0),q_(e)){let _=t.get(bl);return e.rootComponent!==void 0&&_.bootstrap(e.rootComponent),_}else return wZ(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function wZ(e,t){let n=e.injector.get(bl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new mt(-403,!1);t.push(e)}var MN=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){let a=r?.scheduleInRootZone,s=()=>BG(r?.ngZone,Me(Z({},AN({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:a})),h=r?.ignoreChangesOutsideZone,_=[gZ({ngZoneFactory:s,ignoreChangesOutsideZone:h}),{provide:fp,useExisting:vZ}],w=iW(n.moduleType,this.injector,_);return xZ({moduleRef:w,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,r=[]){let a=DN({},r);return fZ(this.injector,a,n).then(s=>this.bootstrapModuleFactory(s,a))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new mt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let n=this._injector.get(C0,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(wt(vo))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Qm=null,PN=new It("");function bZ(e){if(Qm&&!Qm.get(PN,!1))throw new mt(400,!1);lZ(),Qm=e;let t=e.get(MN);return IZ(e),t}function HI(e,t,n=[]){let r=`Platform: ${t}`,a=new It(r);return(s=[])=>{let h=RN();if(!h||h.injector.get(PN,!1)){let _=[...n,...s,{provide:a,useValue:!0}];e?e(_):bZ(SZ(_,r))}return CZ(a)}}function SZ(e=[],t){return vo.create({name:t,providers:[{provide:k0,useValue:"platform"},{provide:C0,useValue:new Set([()=>Qm=null])},...e]})}function CZ(e){let t=RN();if(!t)throw new mt(401,!1);return t}function RN(){return Qm?.get(MN)??null}function IZ(e){e.get(mI,null)?.forEach(n=>n())}var fd=(()=>{class e{static{this.__NG_ELEMENT_ID__=EZ}}return e})();function EZ(e){return TZ(eo(),Qt(),(e&16)===16)}function TZ(e,t,n){if(O0(e)&&!n){let r=kc(e.index,t);return new rd(r,r)}else if(e.type&175){let r=t[Bo];return new rd(r,t)}return null}var jC=class{constructor(){}supports(t){return iN(t)}create(t){return new $C(t)}},DZ=(e,t)=>t,$C=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||DZ}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,a=0,s=null;for(;n||r;){let h=!r||n&&n.currentIndex<j2(r,a,s)?n:r,_=j2(h,a,s),w=h.currentIndex;if(h===r)a--,r=r._nextRemoved;else if(n=n._next,h.previousIndex==null)a++;else{s||(s=[]);let C=_-a,T=w-a;if(C!=T){for(let B=0;B<C;B++){let $=B<s.length?s[B]:s[B]=0,ee=$+B;T<=ee&&ee<C&&(s[B]=$+1)}let F=h.previousIndex;s[F]=T-C}}_!==w&&t(h,_,w)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!iN(t))throw new mt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,a,s,h;if(Array.isArray(t)){this.length=t.length;for(let _=0;_<this.length;_++)s=t[_],h=this._trackByFn(_,s),n===null||!Object.is(n.trackById,h)?(n=this._mismatch(n,s,h,_),r=!0):(r&&(n=this._verifyReinsertion(n,s,h,_)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else a=0,oW(t,_=>{h=this._trackByFn(a,_),n===null||!Object.is(n.trackById,h)?(n=this._mismatch(n,_,h,a),r=!0):(r&&(n=this._verifyReinsertion(n,_,h,a)),Object.is(n.item,_)||this._addIdentityChange(n,_)),n=n._next,a++}),this.length=a;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,a){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,a)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,a),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,a)):t=this._addAfter(new qC(n,r),s,a)),t}_verifyReinsertion(t,n,r,a){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let a=t._prevRemoved,s=t._nextRemoved;return a===null?this._removalsHead=s:a._nextRemoved=s,s===null?this._removalsTail=a:s._prevRemoved=a,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let a=n===null?this._itHead:n._next;return t._next=a,t._prev=n,a===null?this._itTail=t:a._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new I0),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new I0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},qC=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},HC=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},I0=class{constructor(){this.map=new Map}put(t){let n=t.trackById,r=this.map.get(n);r||(r=new HC,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,a=this.map.get(r);return a?a.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function j2(e,t,n){let r=e.previousIndex;if(r===null)return r;let a=0;return n&&r<n.length&&(a=n[r]),r+t+a}var GC=class{constructor(){}supports(t){return t instanceof Map||NI(t)}create(){return new WC}},WC=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(t){let n;for(n=this._mapHead;n!==null;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}diff(t){if(!t)t=new Map;else if(!(t instanceof Map||NI(t)))throw new mt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,a)=>{if(n&&n.key===a)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(a,r);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){let r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){let a=this._records.get(t);this._maybeAddToChanges(a,n);let s=a._prev,h=a._next;return s&&(s._next=h),h&&(h._prev=s),a._next=null,a._prev=null,a}let r=new ZC(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;t!==null;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;t!=null;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){this._additionsHead===null?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){this._changesHead===null?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}},ZC=class{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function $2(){return new GI([new jC])}var GI=(()=>{class e{static{this.\u0275prov=ft({token:e,providedIn:"root",factory:$2})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let a=r.factories.slice();n=n.concat(a)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||$2()),deps:[[e,new M0,new ug]]}}find(n){let r=this.factories.find(a=>a.supports(n));if(r!=null)return r;throw new mt(901,!1)}}return e})();function q2(){return new mx([new GC])}var mx=(()=>{class e{static{this.\u0275prov=ft({token:e,providedIn:"root",factory:q2})}constructor(n){this.factories=n}static create(n,r){if(r){let a=r.factories.slice();n=n.concat(a)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||q2()),deps:[[e,new M0,new ug]]}}find(n){let r=this.factories.find(a=>a.supports(n));if(r)return r;throw new mt(901,!1)}}return e})();var kN=HI(null,"core",[]),NN=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(wt(bl))}}static{this.\u0275mod=Li({type:e})}static{this.\u0275inj=Oi({})}}return e})();function FN(e){let t=Ac(e);if(!t)return null;let n=new yp(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var jN=null;function md(){return jN}function $N(e){jN??=e}var gx=class{};var zi=new It(""),XI=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(NZ),providedIn:"platform"})}}return e})(),qN=new It(""),NZ=(()=>{class e extends XI{constructor(){super(),this._doc=Fe(zi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return md().getBaseHref(this._doc)}onPopState(n){let r=md().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=md().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,a){this._history.pushState(n,r,a)}replaceState(n,r,a){this._history.replaceState(n,r,a)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function JI(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function ON(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,r=n-(e[n-1]==="/"?1:0);return e.slice(0,r)+e.slice(n)}function Sl(e){return e&&e[0]!=="?"?"?"+e:e}var gd=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(QI),providedIn:"root"})}}return e})(),HN=new It(""),QI=(()=>{class e extends gd{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return JI(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Sl(this._platformLocation.search),a=this._platformLocation.hash;return a&&n?`${r}${a}`:r}pushState(n,r,a,s){let h=this.prepareExternalUrl(a+Sl(s));this._platformLocation.pushState(n,r,h)}replaceState(n,r,a,s){let h=this.prepareExternalUrl(a+Sl(s));this._platformLocation.replaceState(n,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(wt(XI),wt(HN,8))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),GN=(()=>{class e extends gd{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=JI(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,a,s){let h=this.prepareExternalUrl(a+Sl(s));h.length==0&&(h=this._platformLocation.pathname),this._platformLocation.pushState(n,r,h)}replaceState(n,r,a,s){let h=this.prepareExternalUrl(a+Sl(s));h.length==0&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(wt(XI),wt(HN,8))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),Tp=(()=>{class e{constructor(n){this._subject=new ti,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=LZ(ON(LN(r))),this._locationStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Sl(r))}normalize(n){return e.stripTrailingSlash(OZ(this._basePath,LN(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",a=null){this._locationStrategy.pushState(a,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sl(r)),a)}replaceState(n,r="",a=null){this._locationStrategy.replaceState(a,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Sl(r)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(a=>a(n,r))}subscribe(n,r,a){return this._subject.subscribe({next:n,error:r,complete:a})}static{this.normalizeQueryParams=Sl}static{this.joinWithSlash=JI}static{this.stripTrailingSlash=ON}static{this.\u0275fac=function(r){return new(r||e)(wt(gd))}}static{this.\u0275prov=ft({token:e,factory:()=>FZ(),providedIn:"root"})}}return e})();function FZ(){return new Tp(wt(gd))}function OZ(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function LN(e){return e.replace(/\/index.html$/,"")}function LZ(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function yx(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[a,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(a.trim()===t)return decodeURIComponent(s)}return null}var WI=class{constructor(t,n,r,a){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=a}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Dp=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,a){this._viewContainer=n,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((a,s,h)=>{if(a.previousIndex==null)r.createEmbeddedView(this._template,new WI(a.item,this._ngForOf,-1,-1),h===null?void 0:h);else if(h==null)r.remove(s===null?void 0:s);else if(s!==null){let _=r.get(s);r.move(_,h),zN(_,a)}});for(let a=0,s=r.length;a<s;a++){let _=r.get(a).context;_.index=a,_.count=s,_.ngForOf=this._ngForOf}n.forEachIdentityChange(a=>{let s=r.get(a.currentIndex);zN(s,a)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(sn(xl),sn(ga),sn(GI))}}static{this.\u0275dir=va({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function zN(e,t){e.context.$implicit=t.item}var $r=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new ZI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){UN("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){UN("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(sn(xl),sn(ga))}}static{this.\u0275dir=va({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),ZI=class{constructor(){this.$implicit=null,this.ngIf=null}};function UN(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Yi(t)}'.`)}var WN=(()=>{class e{constructor(n,r,a){this._ngEl=n,this._differs=r,this._renderer=a,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){let n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){let[a,s]=n.split("."),h=a.indexOf("-")===-1?void 0:ma.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,a,s?`${r}${s}`:r,h):this._renderer.removeStyle(this._ngEl.nativeElement,a,h)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(sn(_a),sn(mx),sn(Q0))}}static{this.\u0275dir=va({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})(),ZN=(()=>{class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let a=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,a,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,r,a)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,a):!1,get:(n,r,a)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,a)}})}static{this.\u0275fac=function(r){return new(r||e)(sn(xl))}}static{this.\u0275dir=va({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[vl]})}}return e})();function zZ(e,t){return{key:e,value:t}}var KN=(()=>{class e{constructor(n){this.differs=n,this.keyValues=[],this.compareFn=BN}transform(n,r=BN){if(!n||!(n instanceof Map)&&typeof n!="object")return null;this.differ??=this.differs.find(n).create();let a=this.differ.diff(n),s=r!==this.compareFn;return a&&(this.keyValues=[],a.forEachItem(h=>{this.keyValues.push(zZ(h.key,h.currentValue))})),(a||s)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||e)(sn(mx,16))}}static{this.\u0275pipe=cR({name:"keyvalue",type:e,pure:!1,standalone:!0})}}return e})();function BN(e,t){let n=e.key,r=t.key;if(n===r)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(n===null)return 1;if(r===null)return-1;if(typeof n=="string"&&typeof r=="string")return n<r?-1:1;if(typeof n=="number"&&typeof r=="number")return n-r;if(typeof n=="boolean"&&typeof r=="boolean")return n<r?-1:1;let a=String(n),s=String(r);return a==s?0:a<s?-1:1}var vx=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Li({type:e})}static{this.\u0275inj=Oi({})}}return e})(),eE="browser",UZ="server";function BZ(e){return e===eE}function _x(e){return e===UZ}var YN=(()=>{class e{static{this.\u0275prov=ft({token:e,providedIn:"root",factory:()=>BZ(Fe(xa))?new KI(Fe(zi),window):new YI})}}return e})(),KI=class{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let n=VZ(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,a=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],a-s[1])}};function VZ(e,t){let n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),a=r.currentNode;for(;a;){let s=a.shadowRoot;if(s){let h=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(h)return h}a=r.nextNode()}}return null}var YI=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},Ep=class{};var xg=class{},bx=class{},Cl=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let a=n.slice(0,r),s=a.toLowerCase(),h=n.slice(r+1).trim();this.maybeSetNormalizedName(a,s),this.headers.has(s)?this.headers.get(s).push(h):this.headers.set(s,[h])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let a=(t.op==="a"?this.headers.get(n):void 0)||[];a.push(...r),this.headers.set(n,a);break;case"d":let s=t.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let h=this.headers.get(n);if(!h)return;h=h.filter(_=>s.indexOf(_)===-1),h.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,h)}break}}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),a=t.toLowerCase();this.headers.set(a,r),this.maybeSetNormalizedName(t,a)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var nE=class{encodeKey(t){return XN(t)}encodeValue(t){return XN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function jZ(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(a=>{let s=a.indexOf("="),[h,_]=s==-1?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,s)),t.decodeValue(a.slice(s+1))],w=n.get(h)||[];w.push(_),n.set(h,w)}),n}var $Z=/%(\d[a-f0-9])/gi,qZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XN(e){return encodeURIComponent(e).replace($Z,(t,n)=>qZ[n]??t)}function wx(e){return`${e}`}var Lc=class e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new nE,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=jZ(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],a=Array.isArray(r)?r.map(wx):[wx(r)];this.map.set(n,a)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let a=t[r];Array.isArray(a)?a.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:a,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(wx(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],a=r.indexOf(wx(t.value));a!==-1&&r.splice(a,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var rE=class{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function HZ(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function JN(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function QN(e){return typeof Blob<"u"&&e instanceof Blob}function eF(e){return typeof FormData<"u"&&e instanceof FormData}function GZ(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var _g=class e{constructor(t,n,r,a){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(HZ(this.method)||a?(this.body=r!==void 0?r:null,s=a):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Cl,this.context??=new rE,!this.params)this.params=new Lc,this.urlWithParams=n;else{let h=this.params.toString();if(h.length===0)this.urlWithParams=n;else{let _=n.indexOf("?"),w=_===-1?"?":_<n.length-1?"&":"";this.urlWithParams=n+w+h}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||JN(this.body)||QN(this.body)||eF(this.body)||GZ(this.body)?this.body:this.body instanceof Lc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||eF(this.body)?null:QN(this.body)?this.body.type||null:JN(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Lc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,a=t.responseType||this.responseType,s=t.transferCache??this.transferCache,h=t.body!==void 0?t.body:this.body,_=t.withCredentials??this.withCredentials,w=t.reportProgress??this.reportProgress,C=t.headers||this.headers,T=t.params||this.params,F=t.context??this.context;return t.setHeaders!==void 0&&(C=Object.keys(t.setHeaders).reduce((B,$)=>B.set($,t.setHeaders[$]),C)),t.setParams&&(T=Object.keys(t.setParams).reduce((B,$)=>B.set($,t.setParams[$]),T)),new e(n,r,h,{params:T,headers:C,context:F,reportProgress:w,responseType:a,withCredentials:_,transferCache:s})}},zc=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(zc||{}),wg=class{constructor(t,n=200,r="OK"){this.headers=t.headers||new Cl,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Sx=class e extends wg{constructor(t={}){super(t),this.type=zc.ResponseHeader}clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},bg=class e extends wg{constructor(t={}){super(t),this.type=zc.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Oc=class extends wg{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},iF=200,WZ=204;function tE(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,transferCache:e.transferCache}}var sE=(()=>{class e{constructor(n){this.handler=n}request(n,r,a={}){let s;if(n instanceof _g)s=n;else{let w;a.headers instanceof Cl?w=a.headers:w=new Cl(a.headers);let C;a.params&&(a.params instanceof Lc?C=a.params:C=new Lc({fromObject:a.params})),s=new _g(n,r,a.body!==void 0?a.body:null,{headers:w,context:a.context,params:C,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}let h=Ft(s).pipe(hl(w=>this.handler.handle(w)));if(n instanceof _g||a.observe==="events")return h;let _=h.pipe(fo(w=>w instanceof bg));switch(a.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return _.pipe(on(w=>{if(w.body!==null&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return _.pipe(on(w=>{if(w.body!==null&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return _.pipe(on(w=>{if(w.body!==null&&typeof w.body!="string")throw new Error("Response is not a string.");return w.body}));case"json":default:return _.pipe(on(w=>w.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Lc().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,a={}){return this.request("PATCH",n,tE(a,r))}post(n,r,a={}){return this.request("POST",n,tE(a,r))}put(n,r,a={}){return this.request("PUT",n,tE(a,r))}static{this.\u0275fac=function(r){return new(r||e)(wt(xg))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),ZZ=/^\)\]\}',?\n/,KZ="X-Request-URL";function tF(e){if(e.url)return e.url;let t=KZ.toLocaleLowerCase();return e.headers.get(t)}var YZ=(()=>{class e{constructor(){this.fetchImpl=Fe(iE,{optional:!0})?.fetch??((...n)=>globalThis.fetch(...n)),this.ngZone=Fe(zn)}handle(n){return new Cn(r=>{let a=new AbortController;return this.doRequest(n,a.signal,r).then(oE,s=>r.error(new Oc({error:s}))),()=>a.abort()})}doRequest(n,r,a){return se(this,null,function*(){let s=this.createRequestInit(n),h;try{let $=this.ngZone.runOutsideAngular(()=>this.fetchImpl(n.urlWithParams,Z({signal:r},s)));XZ($),a.next({type:zc.Sent}),h=yield $}catch($){a.error(new Oc({error:$,status:$.status??0,statusText:$.statusText,url:n.urlWithParams,headers:$.headers}));return}let _=new Cl(h.headers),w=h.statusText,C=tF(h)??n.urlWithParams,T=h.status,F=null;if(n.reportProgress&&a.next(new Sx({headers:_,status:T,statusText:w,url:C})),h.body){let $=h.headers.get("content-length"),ee=[],ie=h.body.getReader(),ye=0,ve,Ae,ke=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>se(this,null,function*(){for(;;){let{done:Ge,value:it}=yield ie.read();if(Ge)break;if(ee.push(it),ye+=it.length,n.reportProgress){Ae=n.responseType==="text"?(Ae??"")+(ve??=new TextDecoder).decode(it,{stream:!0}):void 0;let ut=()=>a.next({type:zc.DownloadProgress,total:$?+$:void 0,loaded:ye,partialText:Ae});ke?ke.run(ut):ut()}}}));let Ve=this.concatChunks(ee,ye);try{let Ge=h.headers.get("Content-Type")??"";F=this.parseBody(n,Ve,Ge)}catch(Ge){a.error(new Oc({error:Ge,headers:new Cl(h.headers),status:h.status,statusText:h.statusText,url:tF(h)??n.urlWithParams}));return}}T===0&&(T=F?iF:0),T>=200&&T<300?(a.next(new bg({body:F,headers:_,status:T,statusText:w,url:C})),a.complete()):a.error(new Oc({error:F,headers:_,status:T,statusText:w,url:C}))})}parseBody(n,r,a){switch(n.responseType){case"json":let s=new TextDecoder().decode(r).replace(ZZ,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:a});case"arraybuffer":return r.buffer}}createRequestInit(n){let r={},a=n.withCredentials?"include":void 0;if(n.headers.forEach((s,h)=>r[s]=h.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){let s=n.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:a}}concatChunks(n,r){let a=new Uint8Array(r),s=0;for(let h of n)a.set(h,s),s+=h.length;return a}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),iE=class{};function oE(){}function XZ(e){e.then(oE,oE)}function JZ(e,t){return t(e)}function QZ(e,t,n){return(r,a)=>us(n,()=>t(r,s=>e(s,a)))}var oF=new It(""),eK=new It(""),tK=new It("",{providedIn:"root",factory:()=>!0});var nF=(()=>{class e extends xg{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=Fe(Fc),this.contributeToStability=Fe(tK)}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(oF),...this.injector.get(eK,[])]));this.chain=r.reduceRight((a,s)=>QZ(a,s,this.injector),JZ)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,a=>this.backend.handle(a)).pipe(Zu(()=>this.pendingTasks.remove(r)))}else return this.chain(n,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||e)(wt(bx),wt(Ji))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();var nK=/^\)\]\}',?\n/;function rK(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}var rF=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new mt(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?br(r.\u0275loadImpl()):Ft(null)).pipe(mo(()=>new Cn(s=>{let h=r.build();if(h.open(n.method,n.urlWithParams),n.withCredentials&&(h.withCredentials=!0),n.headers.forEach((ie,ye)=>h.setRequestHeader(ie,ye.join(","))),n.headers.has("Accept")||h.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){let ie=n.detectContentTypeHeader();ie!==null&&h.setRequestHeader("Content-Type",ie)}if(n.responseType){let ie=n.responseType.toLowerCase();h.responseType=ie!=="json"?ie:"text"}let _=n.serializeBody(),w=null,C=()=>{if(w!==null)return w;let ie=h.statusText||"OK",ye=new Cl(h.getAllResponseHeaders()),ve=rK(h)||n.url;return w=new Sx({headers:ye,status:h.status,statusText:ie,url:ve}),w},T=()=>{let{headers:ie,status:ye,statusText:ve,url:Ae}=C(),ke=null;ye!==WZ&&(ke=typeof h.response>"u"?h.responseText:h.response),ye===0&&(ye=ke?iF:0);let Ve=ye>=200&&ye<300;if(n.responseType==="json"&&typeof ke=="string"){let Ge=ke;ke=ke.replace(nK,"");try{ke=ke!==""?JSON.parse(ke):null}catch(it){ke=Ge,Ve&&(Ve=!1,ke={error:it,text:ke})}}Ve?(s.next(new bg({body:ke,headers:ie,status:ye,statusText:ve,url:Ae||void 0})),s.complete()):s.error(new Oc({error:ke,headers:ie,status:ye,statusText:ve,url:Ae||void 0}))},F=ie=>{let{url:ye}=C(),ve=new Oc({error:ie,status:h.status||0,statusText:h.statusText||"Unknown Error",url:ye||void 0});s.error(ve)},B=!1,$=ie=>{B||(s.next(C()),B=!0);let ye={type:zc.DownloadProgress,loaded:ie.loaded};ie.lengthComputable&&(ye.total=ie.total),n.responseType==="text"&&h.responseText&&(ye.partialText=h.responseText),s.next(ye)},ee=ie=>{let ye={type:zc.UploadProgress,loaded:ie.loaded};ie.lengthComputable&&(ye.total=ie.total),s.next(ye)};return h.addEventListener("load",T),h.addEventListener("error",F),h.addEventListener("timeout",F),h.addEventListener("abort",F),n.reportProgress&&(h.addEventListener("progress",$),_!==null&&h.upload&&h.upload.addEventListener("progress",ee)),h.send(_),s.next({type:zc.Sent}),()=>{h.removeEventListener("error",F),h.removeEventListener("abort",F),h.removeEventListener("load",T),h.removeEventListener("timeout",F),n.reportProgress&&(h.removeEventListener("progress",$),_!==null&&h.upload&&h.upload.removeEventListener("progress",ee)),h.readyState!==h.DONE&&h.abort()}})))}static{this.\u0275fac=function(r){return new(r||e)(wt(Ep))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),sF=new It(""),iK="XSRF-TOKEN",oK=new It("",{providedIn:"root",factory:()=>iK}),sK="X-XSRF-TOKEN",aK=new It("",{providedIn:"root",factory:()=>sK}),Cx=class{},lK=(()=>{class e{constructor(n,r,a){this.doc=n,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=yx(n,this.cookieName),this.lastCookieString=n),this.lastToken}static{this.\u0275fac=function(r){return new(r||e)(wt(zi),wt(xa),wt(oK))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();function cK(e,t){let n=e.url.toLowerCase();if(!Fe(sF)||e.method==="GET"||e.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return t(e);let r=Fe(Cx).getToken(),a=Fe(aK);return r!=null&&!e.headers.has(a)&&(e=e.clone({headers:e.headers.set(a,r)})),t(e)}function aF(...e){let t=[sE,rF,nF,{provide:xg,useExisting:nF},{provide:bx,useFactory:()=>Fe(YZ,{optional:!0})??Fe(rF)},{provide:oF,useValue:cK,multi:!0},{provide:sF,useValue:!0},{provide:Cx,useClass:lK}];for(let n of e)t.push(...n.\u0275providers);return R0(t)}var cE=class extends gx{constructor(){super(...arguments),this.supportsDOMEvents=!0}},uE=class e extends cE{static makeCurrent(){$N(new e)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=dK();return n==null?null:hK(n)}resetBaseElement(){Sg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return yx(document.cookie,t)}},Sg=null;function dK(){return Sg=Sg||document.querySelector("base"),Sg?Sg.getAttribute("href"):null}function hK(e){return new URL(e,document.baseURI).pathname}var dE=class{addToWindow(t){ml.getAngularTestability=(r,a=!0)=>{let s=t.findTestabilityInTree(r,a);if(s==null)throw new mt(5103,!1);return s},ml.getAllAngularTestabilities=()=>t.getAllTestabilities(),ml.getAllAngularRootElements=()=>t.getAllRootElements();let n=r=>{let a=ml.getAllAngularTestabilities(),s=a.length,h=function(){s--,s==0&&r()};a.forEach(_=>{_.whenStable(h)})};ml.frameworkStabilizers||(ml.frameworkStabilizers=[]),ml.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,r){if(n==null)return null;let a=t.getTestability(n);return a??(r?md().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},pK=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),hE=new It(""),dF=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(a=>{a.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,a){return this._findPluginFor(r).addEventListener(n,r,a)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new mt(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(wt(hE),wt(zn))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),Ix=class{constructor(t){this._doc=t}},aE="ng-app-id",hF=(()=>{class e{constructor(n,r,a,s={}){this.doc=n,this.appId=r,this.nonce=a,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_x(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(a=>a.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${aE}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(a=>{a.textContent!=null&&r.set(a.textContent,a)}),r}return null}changeUsageCount(n,r){let a=this.styleRef;if(a.has(n)){let s=a.get(n);return s.usage+=r,s.usage}return a.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let a=this.styleNodesInDOM,s=a?.get(r);if(s?.parentNode===n)return a.delete(r),s.removeAttribute(aE),s;{let h=this.doc.createElement("style");return this.nonce&&h.setAttribute("nonce",this.nonce),h.textContent=r,this.platformIsServer&&h.setAttribute(aE,this.appId),n.appendChild(h),h}}addStyleToHost(n,r){let a=this.getStyleElement(n,r),s=this.styleRef,h=s.get(r)?.elements;h?h.push(a):s.set(r,{elements:[a],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(wt(zi),wt(H0),wt(gI,8),wt(xa))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),lE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fE=/%COMP%/g,pF="%COMP%",fK=`_nghost-${pF}`,mK=`_ngcontent-${pF}`,gK=!0,yK=new It("",{providedIn:"root",factory:()=>gK});function vK(e){return mK.replace(fE,e)}function _K(e){return fK.replace(fE,e)}function fF(e,t){return t.map(n=>n.replace(fE,e))}var lF=(()=>{class e{constructor(n,r,a,s,h,_,w,C=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=a,this.removeStylesOnCompDestroy=s,this.doc=h,this.platformId=_,this.ngZone=w,this.nonce=C,this.rendererByCompId=new Map,this.platformIsServer=_x(_),this.defaultRenderer=new Cg(n,h,w,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===da.ShadowDom&&(r=Me(Z({},r),{encapsulation:da.Emulated}));let a=this.getOrCreateRenderer(n,r);return a instanceof Ex?a.applyToHost(n):a instanceof Ig&&a.applyStyles(),a}getOrCreateRenderer(n,r){let a=this.rendererByCompId,s=a.get(r.id);if(!s){let h=this.doc,_=this.ngZone,w=this.eventManager,C=this.sharedStylesHost,T=this.removeStylesOnCompDestroy,F=this.platformIsServer;switch(r.encapsulation){case da.Emulated:s=new Ex(w,C,r,this.appId,T,h,_,F);break;case da.ShadowDom:return new pE(w,C,n,r,h,_,this.nonce,F);default:s=new Ig(w,C,r,T,h,_,F);break}a.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(wt(dF),wt(hF),wt(H0),wt(yK),wt(zi),wt(xa),wt(zn),wt(gI))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),Cg=class{constructor(t,n,r,a){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=a,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(lE[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(cF(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(cF(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new mt(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,a){if(a){n=a+":"+n;let s=lE[a];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let a=lE[r];a?t.removeAttributeNS(a,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,a){a&(ma.DashCase|ma.Important)?t.style.setProperty(n,r,a&ma.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ma.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if(typeof t=="string"&&(t=md().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function cF(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var pE=class extends Cg{constructor(t,n,r,a,s,h,_,w){super(t,s,h,w),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let C=fF(a.id,a.styles);for(let T of C){let F=document.createElement("style");_&&F.setAttribute("nonce",_),F.textContent=T,this.shadowRoot.appendChild(F)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ig=class extends Cg{constructor(t,n,r,a,s,h,_,w){super(t,s,h,_),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=a,this.styles=w?fF(w,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ex=class extends Ig{constructor(t,n,r,a,s,h,_,w){let C=a+"-"+r.id;super(t,n,r,s,h,_,w,C),this.contentAttr=vK(C),this.hostAttr=_K(C)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}},xK=(()=>{class e extends Ix{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,a){return n.addEventListener(r,a,!1),()=>this.removeEventListener(n,r,a)}removeEventListener(n,r,a){return n.removeEventListener(r,a)}static{this.\u0275fac=function(r){return new(r||e)(wt(zi))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})(),uF=["alt","control","meta","shift"],wK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bK={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},SK=(()=>{class e extends Ix{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,a){let s=e.parseEventName(r),h=e.eventCallback(s.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>md().onAndCancel(n,s.domEventName,h))}static parseEventName(n){let r=n.toLowerCase().split("."),a=r.shift();if(r.length===0||!(a==="keydown"||a==="keyup"))return null;let s=e._normalizeKey(r.pop()),h="",_=r.indexOf("code");if(_>-1&&(r.splice(_,1),h="code."),uF.forEach(C=>{let T=r.indexOf(C);T>-1&&(r.splice(T,1),h+=C+".")}),h+=s,r.length!=0||s.length===0)return null;let w={};return w.domEventName=a,w.fullKey=h,w}static matchEventFullKeyCode(n,r){let a=wK[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(a=n.code,s="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),uF.forEach(h=>{if(h!==a){let _=bK[h];_(n)&&(s+=h+".")}}),s+=a,s===r)}static eventCallback(n,r,a){return s=>{e.matchEventFullKeyCode(s,n)&&a.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(wt(zi))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();function CK(){uE.makeCurrent()}function IK(){return new fa}function EK(){return dk(document),document}var TK=[{provide:xa,useValue:eE},{provide:mI,useValue:CK,multi:!0},{provide:zi,useFactory:EK,deps:[]}],mF=HI(kN,"browser",TK),DK=new It(""),AK=[{provide:yg,useClass:dE,deps:[]},{provide:jI,useClass:ux,deps:[zn,dx,yg]},{provide:ux,useClass:ux,deps:[zn,dx,yg]}],MK=[{provide:k0,useValue:"root"},{provide:fa,useFactory:IK,deps:[]},{provide:hE,useClass:xK,multi:!0,deps:[zi,zn,xa]},{provide:hE,useClass:SK,multi:!0,deps:[zi]},lF,hF,dF,{provide:gp,useExisting:lF},{provide:Ep,useClass:pK,deps:[]},[]],gF=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:H0,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(wt(DK,12))}}static{this.\u0275mod=Li({type:e})}static{this.\u0275inj=Oi({providers:[...MK,...AK],imports:[vx,NN]})}}return e})();var yF=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(wt(zi))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var en="primary",Bg=Symbol("RouteTitle"),_E=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Np(e){return new _E(e)}function PK(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let a={};for(let s=0;s<r.length;s++){let h=r[s],_=e[s];if(h[0]===":")a[h.substring(1)]=_;else if(h!==_.path)return null}return{consumed:e.slice(0,r.length),posParams:a}}function RK(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ba(e[n],t[n]))return!1;return!0}function ba(e,t){let n=e?xE(e):void 0,r=t?xE(t):void 0;if(!n||!r||n.length!=r.length)return!1;let a;for(let s=0;s<n.length;s++)if(a=n[s],!AF(e[a],t[a]))return!1;return!0}function xE(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function AF(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((a,s)=>r[s]===a)}else return e===t}function MF(e){return e.length>0?e[e.length-1]:null}function Bc(e){return T1(e)?e:vg(e)?br(Promise.resolve(e)):Ft(e)}var kK={exact:RF,subset:kF},PF={exact:NK,subset:FK,ignored:()=>!0};function _F(e,t,n){return kK[n.paths](e.root,t.root,n.matrixParams)&&PF[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function NK(e,t){return ba(e,t)}function RF(e,t,n){if(!vd(e.segments,t.segments)||!Ax(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!RF(e.children[r],t.children[r],n))return!1;return!0}function FK(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>AF(e[n],t[n]))}function kF(e,t,n){return NF(e,t,t.segments,n)}function NF(e,t,n,r){if(e.segments.length>n.length){let a=e.segments.slice(0,n.length);return!(!vd(a,n)||t.hasChildren()||!Ax(a,n,r))}else if(e.segments.length===n.length){if(!vd(e.segments,n)||!Ax(e.segments,n,r))return!1;for(let a in t.children)if(!e.children[a]||!kF(e.children[a],t.children[a],r))return!1;return!0}else{let a=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!vd(e.segments,a)||!Ax(e.segments,a,r)||!e.children[en]?!1:NF(e.children[en],t,s,r)}}function Ax(e,t,n){return t.every((r,a)=>PF[n](e[a].parameters,r.parameters))}var El=class{constructor(t=new $n([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Np(this.queryParams),this._queryParamMap}toString(){return zK.serialize(this)}},$n=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mx(this)}},yd=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Np(this.parameters),this._parameterMap}toString(){return OF(this)}};function OK(e,t){return vd(e,t)&&e.every((n,r)=>ba(n.parameters,t[r].parameters))}function vd(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function LK(e,t){let n=[];return Object.entries(e.children).forEach(([r,a])=>{r===en&&(n=n.concat(t(a,r)))}),Object.entries(e.children).forEach(([r,a])=>{r!==en&&(n=n.concat(t(a,r)))}),n}var Vg=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>new Fp,providedIn:"root"})}}return e})(),Fp=class{parse(t){let n=new bE(t);return new El(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Eg(t.root,!0)}`,r=VK(t.queryParams),a=typeof t.fragment=="string"?`#${UK(t.fragment)}`:"";return`${n}${r}${a}`}},zK=new Fp;function Mx(e){return e.segments.map(t=>OF(t)).join("/")}function Eg(e,t){if(!e.hasChildren())return Mx(e);if(t){let n=e.children[en]?Eg(e.children[en],!1):"",r=[];return Object.entries(e.children).forEach(([a,s])=>{a!==en&&r.push(`${a}:${Eg(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=LK(e,(r,a)=>a===en?[Eg(e.children[en],!1)]:[`${a}:${Eg(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[en]!=null?`${Mx(e)}/${n[0]}`:`${Mx(e)}/(${n.join("//")})`}}function FF(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tx(e){return FF(e).replace(/%3B/gi,";")}function UK(e){return encodeURI(e)}function wE(e){return FF(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Px(e){return decodeURIComponent(e)}function xF(e){return Px(e.replace(/\+/g,"%20"))}function OF(e){return`${wE(e.path)}${BK(e.parameters)}`}function BK(e){return Object.entries(e).map(([t,n])=>`;${wE(t)}=${wE(n)}`).join("")}function VK(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(a=>`${Tx(n)}=${Tx(a)}`).join("&"):`${Tx(n)}=${Tx(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var jK=/^[^\/()?;#]+/;function mE(e){let t=e.match(jK);return t?t[0]:""}var $K=/^[^\/()?;=#]+/;function qK(e){let t=e.match($K);return t?t[0]:""}var HK=/^[^=?&#]+/;function GK(e){let t=e.match(HK);return t?t[0]:""}var WK=/^[^&#]+/;function ZK(e){let t=e.match(WK);return t?t[0]:""}var bE=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[en]=new $n(t,n)),r}parseSegment(){let t=mE(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new mt(4009,!1);return this.capture(t),new yd(Px(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=qK(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=mE(this.remaining);a&&(r=a,this.capture(r))}t[Px(n)]=Px(r)}parseQueryParam(t){let n=GK(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let h=ZK(this.remaining);h&&(r=h,this.capture(r))}let a=xF(n),s=xF(r);if(t.hasOwnProperty(a)){let h=t[a];Array.isArray(h)||(h=[h],t[a]=h),h.push(s)}else t[a]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mE(this.remaining),a=this.remaining[r.length];if(a!=="/"&&a!==")"&&a!==";")throw new mt(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=en);let h=this.parseChildren();n[s]=Object.keys(h).length===1?h[en]:new $n([],h),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new mt(4011,!1)}};function LF(e){return e.segments.length>0?new $n([],{[en]:e}):e}function zF(e){let t={};for(let[r,a]of Object.entries(e.children)){let s=zF(a);if(r===en&&s.segments.length===0&&s.hasChildren())for(let[h,_]of Object.entries(s.children))t[h]=_;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let n=new $n(e.segments,t);return KK(n)}function KK(e){if(e.numberOfChildren===1&&e.children[en]){let t=e.children[en];return new $n(e.segments.concat(t.segments),t.children)}return e}function Rg(e){return e instanceof El}function YK(e,t,n=null,r=null){let a=UF(e);return BF(a,t,n,r)}function UF(e){let t;function n(s){let h={};for(let w of s.children){let C=n(w);h[w.outlet]=C}let _=new $n(s.url,h);return s===e&&(t=_),_}let r=n(e.root),a=LF(r);return t??a}function BF(e,t,n,r){let a=e;for(;a.parent;)a=a.parent;if(t.length===0)return gE(a,a,a,n,r);let s=XK(t);if(s.toRoot())return gE(a,a,new $n([],{}),n,r);let h=JK(s,a,e),_=h.processChildren?Ag(h.segmentGroup,h.index,s.commands):jF(h.segmentGroup,h.index,s.commands);return gE(a,h.segmentGroup,_,n,r)}function Rx(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function kg(e){return typeof e=="object"&&e!=null&&e.outlets}function gE(e,t,n,r,a){let s={};r&&Object.entries(r).forEach(([w,C])=>{s[w]=Array.isArray(C)?C.map(T=>`${T}`):`${C}`});let h;e===t?h=n:h=VF(e,t,n);let _=LF(zF(h));return new El(_,s,a)}function VF(e,t,n){let r={};return Object.entries(e.children).forEach(([a,s])=>{s===t?r[a]=n:r[a]=VF(s,t,n)}),new $n(e.segments,r)}var kx=class{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Rx(r[0]))throw new mt(4003,!1);let a=r.find(kg);if(a&&a!==MF(r))throw new mt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XK(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new kx(!0,0,e);let t=0,n=!1,r=e.reduce((a,s,h)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let _={};return Object.entries(s.outlets).forEach(([w,C])=>{_[w]=typeof C=="string"?C.split("/"):C}),[...a,{outlets:_}]}if(s.segmentPath)return[...a,s.segmentPath]}return typeof s!="string"?[...a,s]:h===0?(s.split("/").forEach((_,w)=>{w==0&&_==="."||(w==0&&_===""?n=!0:_===".."?t++:_!=""&&a.push(_))}),a):[...a,s]},[]);return new kx(n,t,r)}var Pp=class{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function JK(e,t,n){if(e.isAbsolute)return new Pp(t,!0,0);if(!n)return new Pp(t,!1,NaN);if(n.parent===null)return new Pp(n,!0,0);let r=Rx(e.commands[0])?0:1,a=n.segments.length-1+r;return QK(n,a,e.numberOfDoubleDots)}function QK(e,t,n){let r=e,a=t,s=n;for(;s>a;){if(s-=a,r=r.parent,!r)throw new mt(4005,!1);a=r.segments.length}return new Pp(r,!1,a-s)}function eY(e){return kg(e[0])?e[0].outlets:{[en]:e}}function jF(e,t,n){if(e??=new $n([],{}),e.segments.length===0&&e.hasChildren())return Ag(e,t,n);let r=tY(e,t,n),a=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let s=new $n(e.segments.slice(0,r.pathIndex),{});return s.children[en]=new $n(e.segments.slice(r.pathIndex),e.children),Ag(s,0,a)}else return r.match&&a.length===0?new $n(e.segments,{}):r.match&&!e.hasChildren()?SE(e,t,n):r.match?Ag(e,0,a):SE(e,t,n)}function Ag(e,t,n){if(n.length===0)return new $n(e.segments,{});{let r=eY(n),a={};if(Object.keys(r).some(s=>s!==en)&&e.children[en]&&e.numberOfChildren===1&&e.children[en].segments.length===0){let s=Ag(e.children[en],t,n);return new $n(e.segments,s.children)}return Object.entries(r).forEach(([s,h])=>{typeof h=="string"&&(h=[h]),h!==null&&(a[s]=jF(e.children[s],t,h))}),Object.entries(e.children).forEach(([s,h])=>{r[s]===void 0&&(a[s]=h)}),new $n(e.segments,a)}}function tY(e,t,n){let r=0,a=t,s={match:!1,pathIndex:0,commandIndex:0};for(;a<e.segments.length;){if(r>=n.length)return s;let h=e.segments[a],_=n[r];if(kg(_))break;let w=`${_}`,C=r<n.length-1?n[r+1]:null;if(a>0&&w===void 0)break;if(w&&C&&typeof C=="object"&&C.outlets===void 0){if(!bF(w,C,h))return s;r+=2}else{if(!bF(w,{},h))return s;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}function SE(e,t,n){let r=e.segments.slice(0,t),a=0;for(;a<n.length;){let s=n[a];if(kg(s)){let w=nY(s.outlets);return new $n(r,w)}if(a===0&&Rx(n[0])){let w=e.segments[t];r.push(new yd(w.path,wF(n[0]))),a++;continue}let h=kg(s)?s.outlets[en]:`${s}`,_=a<n.length-1?n[a+1]:null;h&&_&&Rx(_)?(r.push(new yd(h,wF(_))),a+=2):(r.push(new yd(h,{})),a++)}return new $n(r,{})}function nY(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=SE(new $n([],{}),0,r))}),t}function wF(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function bF(e,t,n){return e==n.path&&ba(t,n.parameters)}var Mg="imperative",pi=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(pi||{}),ps=class{constructor(t,n){this.id=t,this.url=n}},Op=class extends ps{constructor(t,n,r="imperative",a=null){super(t,n),this.type=pi.NavigationStart,this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Tl=class extends ps{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=pi.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jo=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(jo||{}),Nx=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Nx||{}),Il=class extends ps{constructor(t,n,r,a){super(t,n),this.reason=r,this.code=a,this.type=pi.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Uc=class extends ps{constructor(t,n,r,a){super(t,n),this.reason=r,this.code=a,this.type=pi.NavigationSkipped}},Ng=class extends ps{constructor(t,n,r,a){super(t,n),this.error=r,this.target=a,this.type=pi.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fx=class extends ps{constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a,this.type=pi.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},CE=class extends ps{constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a,this.type=pi.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},IE=class extends ps{constructor(t,n,r,a,s){super(t,n),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=s,this.type=pi.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},EE=class extends ps{constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a,this.type=pi.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},TE=class extends ps{constructor(t,n,r,a){super(t,n),this.urlAfterRedirects=r,this.state=a,this.type=pi.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},DE=class{constructor(t){this.route=t,this.type=pi.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},AE=class{constructor(t){this.route=t,this.type=pi.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ME=class{constructor(t){this.snapshot=t,this.type=pi.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},PE=class{constructor(t){this.snapshot=t,this.type=pi.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},RE=class{constructor(t){this.snapshot=t,this.type=pi.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kE=class{constructor(t){this.snapshot=t,this.type=pi.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ox=class{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=pi.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Fg=class{},Lp=class{constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function rY(e,t){return e.providers&&!e._injector&&(e._injector=tx(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Bs(e){return e.outlet||en}function iY(e,t){let n=e.filter(r=>Bs(r)===t);return n.push(...e.filter(r=>Bs(r)!==t)),n}function jg(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var NE=class{get injector(){return jg(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new $g(this.rootInjector),this.attachRef=null}},$g=(()=>{class e{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new NE(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)(wt(Ji))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Lx=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=FE(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=FE(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=OE(t,this._root);return n.length<2?[]:n[n.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return OE(t,this._root).map(n=>n.value)}};function FE(e,t){if(e===t.value)return t;for(let n of t.children){let r=FE(e,n);if(r)return r}return null}function OE(e,t){if(e===t.value)return[t];for(let n of t.children){let r=OE(e,n);if(r.length)return r.unshift(t),r}return[]}var Vo=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mp(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var zx=class extends Lx{constructor(t,n){super(t),this.snapshot=n,HE(this,t)}toString(){return this.snapshot.toString()}};function $F(e){let t=oY(e),n=new bi([new yd("",{})]),r=new bi({}),a=new bi({}),s=new bi({}),h=new bi(""),_=new zp(n,r,s,h,a,en,e,t.root);return _.snapshot=t.root,new zx(new Vo(_,[]),t)}function oY(e){let t={},n={},r={},a="",s=new Rp([],t,r,a,n,en,e,null,{});return new Bx("",new Vo(s,[]))}var zp=class{constructor(t,n,r,a,s,h,_,w){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=a,this.dataSubject=s,this.outlet=h,this.component=_,this._futureSnapshot=w,this.title=this.dataSubject?.pipe(on(C=>C[Bg]))??Ft(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(on(t=>Np(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(on(t=>Np(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ux(e,t,n="emptyOnly"){let r,{routeConfig:a}=e;return t!==null&&(n==="always"||a?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:Z(Z({},t.params),e.params),data:Z(Z({},t.data),e.data),resolve:Z(Z(Z(Z({},e.data),t.data),a?.data),e._resolvedData)}:r={params:Z({},e.params),data:Z({},e.data),resolve:Z(Z({},e.data),e._resolvedData??{})},a&&HF(a)&&(r.resolve[Bg]=a.title),r}var Rp=class{get title(){return this.data?.[Bg]}constructor(t,n,r,a,s,h,_,w,C){this.url=t,this.params=n,this.queryParams=r,this.fragment=a,this.data=s,this.outlet=h,this.component=_,this.routeConfig=w,this._resolve=C}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Np(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Np(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Bx=class extends Lx{constructor(t,n){super(n),this.url=t,HE(this,n)}toString(){return qF(this._root)}};function HE(e,t){t.value._routerState=e,t.children.forEach(n=>HE(e,n))}function qF(e){let t=e.children.length>0?` { ${e.children.map(qF).join(", ")} } `:"";return`${e.value}${t}`}function yE(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ba(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),ba(t.params,n.params)||e.paramsSubject.next(n.params),RK(t.url,n.url)||e.urlSubject.next(n.url),ba(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function LE(e,t){let n=ba(e.params,t.params)&&OK(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||LE(e.parent,t.parent))}function HF(e){return typeof e.title=="string"||e.title===null}var GE=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=en,this.activateEvents=new ti,this.deactivateEvents=new ti,this.attachEvents=new ti,this.detachEvents=new ti,this.parentContexts=Fe($g),this.location=Fe(xl),this.changeDetector=Fe(fd),this.inputBinder=Fe(Hx,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:a}=n.name;if(r)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new mt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new mt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new mt(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new mt(4013,!1);this._activatedRoute=n;let a=this.location,h=n.snapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,w=new zE(n,_,a.injector);this.activated=a.createComponent(h,{index:a.length,injector:w,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=va({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vl]})}}return e})(),zE=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===zp?this.route:t===$g?this.childContexts:this.parent.get(t,n)}},Hx=new It(""),SF=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,a=Km([r.queryParams,r.params,r.data]).pipe(mo(([s,h,_],w)=>(_=Z(Z(Z({},s),h),_),w===0?Ft(_):Promise.resolve(_)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let h=FN(r.component);if(!h){this.unsubscribeFromRouteData(n);return}for(let{templateName:_}of h.inputs)n.activatedComponentRef.setInput(_,s[_])});this.outletDataSubscriptions.set(n,a)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();function sY(e,t,n){let r=Og(e,t._root,n?n._root:void 0);return new zx(r,t)}function Og(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let a=aY(e,t,n);return new Vo(r,a)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let h=s.route;return h.value._futureSnapshot=t.value,h.children=t.children.map(_=>Og(e,_)),h}}let r=lY(t.value),a=t.children.map(s=>Og(e,s));return new Vo(r,a)}}function aY(e,t,n){return t.children.map(r=>{for(let a of n.children)if(e.shouldReuseRoute(r.value,a.value.snapshot))return Og(e,r,a);return Og(e,r)})}function lY(e){return new zp(new bi(e.url),new bi(e.params),new bi(e.queryParams),new bi(e.fragment),new bi(e.data),e.outlet,e.component,e)}var Lg=class{constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},GF="ngNavigationCancelingError";function Vx(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Rg(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,a=WF(!1,jo.Redirect);return a.url=n,a.navigationBehaviorOptions=r,a}function WF(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[GF]=!0,n.cancellationCode=t,n}function cY(e){return ZF(e)&&Rg(e.url)}function ZF(e){return!!e&&e[GF]}var uY=(e,t,n,r)=>on(a=>(new UE(t,a.targetRouterState,a.currentRouterState,n,r).activate(e),a)),UE=class{constructor(t,n,r,a,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=a,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),yE(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let a=Mp(n);t.children.forEach(s=>{let h=s.value.outlet;this.deactivateRoutes(s,a[h],r),delete a[h]}),Object.values(a).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){let a=t.value,s=n?n.value:null;if(a===s)if(a.component){let h=r.getContext(a.outlet);h&&this.deactivateChildRoutes(t,n,h.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),a=r&&t.value.component?r.children:n,s=Mp(t);for(let h of Object.values(s))this.deactivateRouteAndItsChildren(h,a);if(r&&r.outlet){let h=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:h,route:t,contexts:_})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),a=r&&t.value.component?r.children:n,s=Mp(t);for(let h of Object.values(s))this.deactivateRouteAndItsChildren(h,a);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let a=Mp(n);t.children.forEach(s=>{this.activateRoutes(s,a[s.value.outlet],r),this.forwardEvent(new kE(s.value.snapshot))}),t.children.length&&this.forwardEvent(new PE(t.value.snapshot))}activateRoutes(t,n,r){let a=t.value,s=n?n.value:null;if(yE(a),a===s)if(a.component){let h=r.getOrCreateContext(a.outlet);this.activateChildRoutes(t,n,h.children)}else this.activateChildRoutes(t,n,r);else if(a.component){let h=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){let _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),h.children.onOutletReAttached(_.contexts),h.attachRef=_.componentRef,h.route=_.route.value,h.outlet&&h.outlet.attach(_.componentRef,_.route.value),yE(_.route.value),this.activateChildRoutes(t,null,h.children)}else h.attachRef=null,h.route=a,h.outlet&&h.outlet.activateWith(a,h.injector),this.activateChildRoutes(t,null,h.children)}else this.activateChildRoutes(t,null,r)}},jx=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},kp=class{constructor(t,n){this.component=t,this.route=n}};function dY(e,t,n){let r=e._root,a=t?t._root:null;return Tg(r,a,n,[r.value])}function hY(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Bp(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!Y2(e)?e:t.get(e):r}function Tg(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=Mp(t);return e.children.forEach(h=>{pY(h,s[h.value.outlet],n,r.concat([h.value]),a),delete s[h.value.outlet]}),Object.entries(s).forEach(([h,_])=>Pg(_,n.getContext(h),a)),a}function pY(e,t,n,r,a={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,h=t?t.value:null,_=n?n.getContext(e.value.outlet):null;if(h&&s.routeConfig===h.routeConfig){let w=fY(h,s,s.routeConfig.runGuardsAndResolvers);w?a.canActivateChecks.push(new jx(r)):(s.data=h.data,s._resolvedData=h._resolvedData),s.component?Tg(e,t,_?_.children:null,r,a):Tg(e,t,n,r,a),w&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new kp(_.outlet.component,h))}else h&&Pg(t,_,a),a.canActivateChecks.push(new jx(r)),s.component?Tg(e,null,_?_.children:null,r,a):Tg(e,null,n,r,a);return a}function fY(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!vd(e.url,t.url);case"pathParamsOrQueryParamsChange":return!vd(e.url,t.url)||!ba(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!LE(e,t)||!ba(e.queryParams,t.queryParams);case"paramsChange":default:return!LE(e,t)}}function Pg(e,t,n){let r=Mp(e),a=e.value;Object.entries(r).forEach(([s,h])=>{a.component?t?Pg(h,t.children.getContext(s),n):Pg(h,null,n):Pg(h,t,n)}),a.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new kp(t.outlet.component,a)):n.canDeactivateChecks.push(new kp(null,a)):n.canDeactivateChecks.push(new kp(null,a))}function qg(e){return typeof e=="function"}function mY(e){return typeof e=="boolean"}function gY(e){return e&&qg(e.canLoad)}function yY(e){return e&&qg(e.canActivate)}function vY(e){return e&&qg(e.canActivateChild)}function _Y(e){return e&&qg(e.canDeactivate)}function xY(e){return e&&qg(e.canMatch)}function KF(e){return e instanceof Ns||e?.name==="EmptyError"}var Dx=Symbol("INITIAL_VALUE");function Up(){return mo(e=>Km(e.map(t=>t.pipe(pl(1),R1(Dx)))).pipe(on(t=>{for(let n of t)if(n!==!0){if(n===Dx)return Dx;if(n===!1||wY(n))return n}return!0}),fo(t=>t!==Dx),pl(1)))}function wY(e){return Rg(e)||e instanceof Lg}function bY(e,t){return jr(n=>{let{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:s,canDeactivateChecks:h}}=n;return h.length===0&&s.length===0?Ft(Me(Z({},n),{guardsResult:!0})):SY(h,r,a,e).pipe(jr(_=>_&&mY(_)?CY(r,s,e,t):Ft(_)),on(_=>Me(Z({},n),{guardsResult:_})))})}function SY(e,t,n,r){return br(e).pipe(jr(a=>AY(a.component,a.route,n,t,r)),la(a=>a!==!0,!0))}function CY(e,t,n,r){return br(t).pipe(hl(a=>tp(EY(a.route.parent,r),IY(a.route,r),DY(e,a.path,n),TY(e,a.route,n))),la(a=>a!==!0,!0))}function IY(e,t){return e!==null&&t&&t(new RE(e)),Ft(!0)}function EY(e,t){return e!==null&&t&&t(new ME(e)),Ft(!0)}function TY(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return Ft(!0);let a=r.map(s=>U_(()=>{let h=jg(t)??n,_=Bp(s,h),w=yY(_)?_.canActivate(t,e):us(h,()=>_(t,e));return Bc(w).pipe(la())}));return Ft(a).pipe(Up())}function DY(e,t,n){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(h=>hY(h)).filter(h=>h!==null).map(h=>U_(()=>{let _=h.guards.map(w=>{let C=jg(h.node)??n,T=Bp(w,C),F=vY(T)?T.canActivateChild(r,e):us(C,()=>T(r,e));return Bc(F).pipe(la())});return Ft(_).pipe(Up())}));return Ft(s).pipe(Up())}function AY(e,t,n,r,a){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ft(!0);let h=s.map(_=>{let w=jg(t)??a,C=Bp(_,w),T=_Y(C)?C.canDeactivate(e,t,n,r):us(w,()=>C(e,t,n,r));return Bc(T).pipe(la())});return Ft(h).pipe(Up())}function MY(e,t,n,r){let a=t.canLoad;if(a===void 0||a.length===0)return Ft(!0);let s=a.map(h=>{let _=Bp(h,e),w=gY(_)?_.canLoad(t,n):us(e,()=>_(t,n));return Bc(w)});return Ft(s).pipe(Up(),YF(r))}function YF(e){return S1(kr(t=>{if(typeof t!="boolean")throw Vx(e,t)}),on(t=>t===!0))}function PY(e,t,n,r){let a=t.canMatch;if(!a||a.length===0)return Ft(!0);let s=a.map(h=>{let _=Bp(h,e),w=xY(_)?_.canMatch(t,n):us(e,()=>_(t,n));return Bc(w)});return Ft(s).pipe(Up(),YF(r))}var zg=class{constructor(t){this.segmentGroup=t||null}},Ug=class extends Error{constructor(t){super(),this.urlTree=t}};function Ap(e){return Qh(new zg(e))}function RY(e){return Qh(new mt(4e3,!1))}function kY(e){return Qh(WF(!1,jo.GuardRejected))}var BE=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let r=[],a=n.root;for(;;){if(r=r.concat(a.segments),a.numberOfChildren===0)return Ft(r);if(a.numberOfChildren>1||!a.children[en])return RY(`${t.redirectTo}`);a=a.children[en]}}applyRedirectCommands(t,n,r,a,s){if(typeof n!="string"){let _=n,{queryParams:w,fragment:C,routeConfig:T,url:F,outlet:B,params:$,data:ee,title:ie}=a,ye=us(s,()=>_({params:$,data:ee,queryParams:w,fragment:C,routeConfig:T,url:F,outlet:B,title:ie}));if(ye instanceof El)throw new Ug(ye);n=ye}let h=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r);if(n[0]==="/")throw new Ug(h);return h}applyRedirectCreateUrlTree(t,n,r,a){let s=this.createSegmentGroup(t,n.root,r,a);return new El(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([a,s])=>{if(typeof s=="string"&&s[0]===":"){let _=s.substring(1);r[a]=n[_]}else r[a]=s}),r}createSegmentGroup(t,n,r,a){let s=this.createSegments(t,n.segments,r,a),h={};return Object.entries(n.children).forEach(([_,w])=>{h[_]=this.createSegmentGroup(t,w,r,a)}),new $n(s,h)}createSegments(t,n,r,a){return n.map(s=>s.path[0]===":"?this.findPosParam(t,s,a):this.findOrReturn(s,r))}findPosParam(t,n,r){let a=r[n.path.substring(1)];if(!a)throw new mt(4001,!1);return a}findOrReturn(t,n){let r=0;for(let a of n){if(a.path===t.path)return n.splice(r),a;r++}return t}},VE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NY(e,t,n,r,a){let s=XF(e,t,n);return s.matched?(r=rY(t,r),PY(r,t,n,a).pipe(on(h=>h===!0?s:Z({},VE)))):Ft(s)}function XF(e,t,n){if(t.path==="**")return FY(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?Z({},VE):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let a=(t.matcher||PK)(n,e,t);if(!a)return Z({},VE);let s={};Object.entries(a.posParams??{}).forEach(([_,w])=>{s[_]=w.path});let h=a.consumed.length>0?Z(Z({},s),a.consumed[a.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:a.consumed,remainingSegments:n.slice(a.consumed.length),parameters:h,positionalParamSegments:a.posParams??{}}}function FY(e){return{matched:!0,parameters:e.length>0?MF(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function CF(e,t,n,r){return n.length>0&&zY(e,n,r)?{segmentGroup:new $n(t,LY(r,new $n(n,e.children))),slicedSegments:[]}:n.length===0&&UY(e,n,r)?{segmentGroup:new $n(e.segments,OY(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new $n(e.segments,e.children),slicedSegments:n}}function OY(e,t,n,r){let a={};for(let s of n)if(Gx(e,t,s)&&!r[Bs(s)]){let h=new $n([],{});a[Bs(s)]=h}return Z(Z({},r),a)}function LY(e,t){let n={};n[en]=t;for(let r of e)if(r.path===""&&Bs(r)!==en){let a=new $n([],{});n[Bs(r)]=a}return n}function zY(e,t,n){return n.some(r=>Gx(e,t,r)&&Bs(r)!==en)}function UY(e,t,n){return n.some(r=>Gx(e,t,r))}function Gx(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function BY(e,t,n){return t.length===0&&!e.children[n]}var jE=class{};function VY(e,t,n,r,a,s,h="emptyOnly"){return new $E(e,t,n,r,a,h,s).recognize()}var jY=31,$E=class{constructor(t,n,r,a,s,h,_){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=a,this.urlTree=s,this.paramsInheritanceStrategy=h,this.urlSerializer=_,this.applyRedirects=new BE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new mt(4002,`'${t.segmentGroup}'`)}recognize(){let t=CF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(on(({children:n,rootSnapshot:r})=>{let a=new Vo(r,n),s=new Bx("",a),h=YK(r,[],this.urlTree.queryParams,this.urlTree.fragment);return h.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(h),{state:s,tree:h}}))}match(t){let n=new Rp([],Object.freeze({}),Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),en,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,en,n).pipe(on(r=>({children:r,rootSnapshot:n})),Sc(r=>{if(r instanceof Ug)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zg?this.noMatchError(r):r}))}processSegmentGroup(t,n,r,a,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,n,r,s):this.processSegment(t,n,r,r.segments,a,!0,s).pipe(on(h=>h instanceof Vo?[h]:[]))}processChildren(t,n,r,a){let s=[];for(let h of Object.keys(r.children))h==="primary"?s.unshift(h):s.push(h);return br(s).pipe(hl(h=>{let _=r.children[h],w=iY(n,h);return this.processSegmentGroup(t,w,_,h,a)}),P1((h,_)=>(h.push(..._),h)),Cc(null),M1(),jr(h=>{if(h===null)return Ap(r);let _=JF(h);return $Y(_),Ft(_)}))}processSegment(t,n,r,a,s,h,_){return br(n).pipe(hl(w=>this.processSegmentAgainstRoute(w._injector??t,n,w,r,a,s,h,_).pipe(Sc(C=>{if(C instanceof zg)return Ft(null);throw C}))),la(w=>!!w),Sc(w=>{if(KF(w))return BY(r,a,s)?Ft(new jE):Ap(r);throw w}))}processSegmentAgainstRoute(t,n,r,a,s,h,_,w){return Bs(r)!==h&&(h===en||!Gx(a,s,r))?Ap(a):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,a,r,s,h,w):this.allowRedirects&&_?this.expandSegmentAgainstRouteUsingRedirect(t,a,n,r,s,h,w):Ap(a)}expandSegmentAgainstRouteUsingRedirect(t,n,r,a,s,h,_){let{matched:w,parameters:C,consumedSegments:T,positionalParamSegments:F,remainingSegments:B}=XF(n,a,s);if(!w)return Ap(n);typeof a.redirectTo=="string"&&a.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jY&&(this.allowRedirects=!1));let $=new Rp(s,C,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,IF(a),Bs(a),a.component??a._loadedComponent??null,a,EF(a)),ee=Ux($,_,this.paramsInheritanceStrategy);$.params=Object.freeze(ee.params),$.data=Object.freeze(ee.data);let ie=this.applyRedirects.applyRedirectCommands(T,a.redirectTo,F,$,t);return this.applyRedirects.lineralizeSegments(a,ie).pipe(jr(ye=>this.processSegment(t,r,n,ye.concat(B),h,!1,_)))}matchSegmentAgainstRoute(t,n,r,a,s,h){let _=NY(n,r,a,t,this.urlSerializer);return r.path==="**"&&(n.children={}),_.pipe(mo(w=>w.matched?(t=r._injector??t,this.getChildConfig(t,r,a).pipe(mo(({routes:C})=>{let T=r._loadedInjector??t,{parameters:F,consumedSegments:B,remainingSegments:$}=w,ee=new Rp(B,F,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,IF(r),Bs(r),r.component??r._loadedComponent??null,r,EF(r)),ie=Ux(ee,h,this.paramsInheritanceStrategy);ee.params=Object.freeze(ie.params),ee.data=Object.freeze(ie.data);let{segmentGroup:ye,slicedSegments:ve}=CF(n,B,$,C);if(ve.length===0&&ye.hasChildren())return this.processChildren(T,C,ye,ee).pipe(on(ke=>new Vo(ee,ke)));if(C.length===0&&ve.length===0)return Ft(new Vo(ee,[]));let Ae=Bs(r)===s;return this.processSegment(T,C,ye,ve,Ae?en:s,!0,ee).pipe(on(ke=>new Vo(ee,ke instanceof Vo?[ke]:[])))}))):Ap(n)))}getChildConfig(t,n,r){return n.children?Ft({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Ft({routes:n._loadedRoutes,injector:n._loadedInjector}):MY(t,n,r,this.urlSerializer).pipe(jr(a=>a?this.configLoader.loadChildren(t,n).pipe(kr(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):kY(n))):Ft({routes:[],injector:t})}};function $Y(e){e.sort((t,n)=>t.value.outlet===en?-1:n.value.outlet===en?1:t.value.outlet.localeCompare(n.value.outlet))}function qY(e){let t=e.value.routeConfig;return t&&t.path===""}function JF(e){let t=[],n=new Set;for(let r of e){if(!qY(r)){t.push(r);continue}let a=t.find(s=>r.value.routeConfig===s.value.routeConfig);a!==void 0?(a.children.push(...r.children),n.add(a)):t.push(r)}for(let r of n){let a=JF(r.children);t.push(new Vo(r.value,a))}return t.filter(r=>!n.has(r))}function IF(e){return e.data||{}}function EF(e){return e.resolve||{}}function HY(e,t,n,r,a,s){return jr(h=>VY(e,t,n,r,h.extractedUrl,a,s).pipe(on(({state:_,tree:w})=>Me(Z({},h),{targetSnapshot:_,urlAfterRedirects:w}))))}function GY(e,t){return jr(n=>{let{targetSnapshot:r,guards:{canActivateChecks:a}}=n;if(!a.length)return Ft(n);let s=new Set(a.map(w=>w.route)),h=new Set;for(let w of s)if(!h.has(w))for(let C of QF(w))h.add(C);let _=0;return br(h).pipe(hl(w=>s.has(w)?WY(w,r,e,t):(w.data=Ux(w,w.parent,e).resolve,Ft(void 0))),kr(()=>_++),np(1),jr(w=>_===h.size?Ft(n):Uo))})}function QF(e){let t=e.children.map(n=>QF(n)).flat();return[e,...t]}function WY(e,t,n,r){let a=e.routeConfig,s=e._resolve;return a?.title!==void 0&&!HF(a)&&(s[Bg]=a.title),ZY(s,e,t,r).pipe(on(h=>(e._resolvedData=h,e.data=Ux(e,e.parent,n).resolve,null)))}function ZY(e,t,n,r){let a=xE(e);if(a.length===0)return Ft({});let s={};return br(a).pipe(jr(h=>KY(e[h],t,n,r).pipe(la(),kr(_=>{if(_ instanceof Lg)throw Vx(new Fp,_);s[h]=_}))),np(1),A1(s),Sc(h=>KF(h)?Uo:Qh(h)))}function KY(e,t,n,r){let a=jg(t)??r,s=Bp(e,a),h=s.resolve?s.resolve(t,n):us(a,()=>s(t,n));return Bc(h)}function vE(e){return mo(t=>{let n=e(t);return n?br(n).pipe(on(()=>t)):Ft(t)})}var eO=(()=>{class e{buildTitle(n){let r,a=n.root;for(;a!==void 0;)r=this.getResolvedTitleForRoute(a)??r,a=a.children.find(s=>s.outlet===en);return r}getResolvedTitleForRoute(n){return n.data[Bg]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(YY),providedIn:"root"})}}return e})(),YY=(()=>{class e extends eO{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(wt(yF))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Hg=new It("",{providedIn:"root",factory:()=>({})}),XY=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Zt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ip],decls:1,vars:0,template:function(r,a){r&1&&Qe(0,"router-outlet")},dependencies:[GE],encapsulation:2})}}return e})();function WE(e){let t=e.children&&e.children.map(WE),n=t?Me(Z({},e),{children:t}):Z({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==en&&(n.component=XY),n}var $x=new It(""),ZE=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Fe(fx)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ft(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Bc(n.loadComponent()).pipe(on(tO),kr(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Zu(()=>{this.componentLoaders.delete(n)})),a=new Xh(r,()=>new Vr).pipe(Yh());return this.componentLoaders.set(n,a),a}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=JY(r,this.compiler,n,this.onLoadEndListener).pipe(Zu(()=>{this.childrenLoaders.delete(r)})),h=new Xh(s,()=>new Vr).pipe(Yh());return this.childrenLoaders.set(r,h),h}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function JY(e,t,n,r){return Bc(e.loadChildren()).pipe(on(tO),jr(a=>a instanceof ag||Array.isArray(a)?Ft(a):br(t.compileModuleAsync(a))),on(a=>{r&&r(e);let s,h,_=!1;return Array.isArray(a)?(h=a,_=!0):(s=a.create(n).injector,h=s.get($x,[],{optional:!0,self:!0}).flat()),{routes:h.map(WE),injector:s}}))}function QY(e){return e&&typeof e=="object"&&"default"in e}function tO(e){return QY(e)?e.default:e}var KE=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(eX),providedIn:"root"})}}return e})(),eX=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),nO=new It(""),rO=new It("");function tX(e,t,n){let r=e.get(rO),a=e.get(zi);return e.get(zn).runOutsideAngular(()=>{if(!a.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(C=>setTimeout(C));let s,h=new Promise(C=>{s=C}),_=a.startViewTransition(()=>(s(),nX(e))),{onViewTransitionCreated:w}=r;return w&&us(e,()=>w({transition:_,from:t,to:n})),h})}function nX(e){return new Promise(t=>{dd({read:()=>setTimeout(t)},{injector:e})})}var rX=new It(""),YE=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Vr,this.transitionAbortSubject=new Vr,this.configLoader=Fe(ZE),this.environmentInjector=Fe(Ji),this.urlSerializer=Fe(Vg),this.rootContexts=Fe($g),this.location=Fe(Tp),this.inputBindingEnabled=Fe(Hx,{optional:!0})!==null,this.titleStrategy=Fe(eO),this.options=Fe(Hg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Fe(KE),this.createViewTransition=Fe(nO,{optional:!0}),this.navigationErrorHandler=Fe(rX,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ft(void 0),this.rootComponentType=null;let n=a=>this.events.next(new DE(a)),r=a=>this.events.next(new AE(a));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Me(Z(Z({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,a){return this.transitions=new bi({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mg,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(fo(s=>s.id!==0),on(s=>Me(Z({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),mo(s=>{let h=!1,_=!1;return Ft(s).pipe(mo(w=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",jo.SupersededByNewNavigation),Uo;this.currentTransition=s,this.currentNavigation={id:w.id,initialUrl:w.rawUrl,extractedUrl:w.extractedUrl,targetBrowserUrl:typeof w.extras.browserUrl=="string"?this.urlSerializer.parse(w.extras.browserUrl):w.extras.browserUrl,trigger:w.source,extras:w.extras,previousNavigation:this.lastSuccessfulNavigation?Me(Z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let C=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),T=w.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!C&&T!=="reload"){let F="";return this.events.next(new Uc(w.id,this.urlSerializer.serialize(w.rawUrl),F,Nx.IgnoredSameUrlNavigation)),w.resolve(!1),Uo}if(this.urlHandlingStrategy.shouldProcessUrl(w.rawUrl))return Ft(w).pipe(mo(F=>{let B=this.transitions?.getValue();return this.events.next(new Op(F.id,this.urlSerializer.serialize(F.extractedUrl),F.source,F.restoredState)),B!==this.transitions?.getValue()?Uo:Promise.resolve(F)}),HY(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),kr(F=>{s.targetSnapshot=F.targetSnapshot,s.urlAfterRedirects=F.urlAfterRedirects,this.currentNavigation=Me(Z({},this.currentNavigation),{finalUrl:F.urlAfterRedirects});let B=new Fx(F.id,this.urlSerializer.serialize(F.extractedUrl),this.urlSerializer.serialize(F.urlAfterRedirects),F.targetSnapshot);this.events.next(B)}));if(C&&this.urlHandlingStrategy.shouldProcessUrl(w.currentRawUrl)){let{id:F,extractedUrl:B,source:$,restoredState:ee,extras:ie}=w,ye=new Op(F,this.urlSerializer.serialize(B),$,ee);this.events.next(ye);let ve=$F(this.rootComponentType).snapshot;return this.currentTransition=s=Me(Z({},w),{targetSnapshot:ve,urlAfterRedirects:B,extras:Me(Z({},ie),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=B,Ft(s)}else{let F="";return this.events.next(new Uc(w.id,this.urlSerializer.serialize(w.extractedUrl),F,Nx.IgnoredByUrlHandlingStrategy)),w.resolve(!1),Uo}}),kr(w=>{let C=new CE(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(C)}),on(w=>(this.currentTransition=s=Me(Z({},w),{guards:dY(w.targetSnapshot,w.currentSnapshot,this.rootContexts)}),s)),bY(this.environmentInjector,w=>this.events.next(w)),kr(w=>{if(s.guardsResult=w.guardsResult,w.guardsResult&&typeof w.guardsResult!="boolean")throw Vx(this.urlSerializer,w.guardsResult);let C=new IE(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot,!!w.guardsResult);this.events.next(C)}),fo(w=>w.guardsResult?!0:(this.cancelNavigationTransition(w,"",jo.GuardRejected),!1)),vE(w=>{if(w.guards.canActivateChecks.length)return Ft(w).pipe(kr(C=>{let T=new EE(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(T)}),mo(C=>{let T=!1;return Ft(C).pipe(GY(this.paramsInheritanceStrategy,this.environmentInjector),kr({next:()=>T=!0,complete:()=>{T||this.cancelNavigationTransition(C,"",jo.NoDataFromResolver)}}))}),kr(C=>{let T=new TE(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(T)}))}),vE(w=>{let C=T=>{let F=[];T.routeConfig?.loadComponent&&!T.routeConfig._loadedComponent&&F.push(this.configLoader.loadComponent(T.routeConfig).pipe(kr(B=>{T.component=B}),on(()=>{})));for(let B of T.children)F.push(...C(B));return F};return Km(C(w.targetSnapshot.root)).pipe(Cc(null),pl(1))}),vE(()=>this.afterPreactivation()),mo(()=>{let{currentSnapshot:w,targetSnapshot:C}=s,T=this.createViewTransition?.(this.environmentInjector,w.root,C.root);return T?br(T).pipe(on(()=>s)):Ft(s)}),on(w=>{let C=sY(n.routeReuseStrategy,w.targetSnapshot,w.currentRouterState);return this.currentTransition=s=Me(Z({},w),{targetRouterState:C}),this.currentNavigation.targetRouterState=C,s}),kr(()=>{this.events.next(new Fg)}),uY(this.rootContexts,n.routeReuseStrategy,w=>this.events.next(w),this.inputBindingEnabled),pl(1),kr({next:w=>{h=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Tl(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects))),this.titleStrategy?.updateTitle(w.targetRouterState.snapshot),w.resolve(!0)},complete:()=>{h=!0}}),Ym(this.transitionAbortSubject.pipe(kr(w=>{throw w}))),Zu(()=>{!h&&!_&&this.cancelNavigationTransition(s,"",jo.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Sc(w=>{if(_=!0,ZF(w))this.events.next(new Il(s.id,this.urlSerializer.serialize(s.extractedUrl),w.message,w.cancellationCode)),cY(w)?this.events.next(new Lp(w.url,w.navigationBehaviorOptions)):s.resolve(!1);else{let C=new Ng(s.id,this.urlSerializer.serialize(s.extractedUrl),w,s.targetSnapshot??void 0);try{let T=us(this.environmentInjector,()=>this.navigationErrorHandler?.(C));if(T instanceof Lg){let{message:F,cancellationCode:B}=Vx(this.urlSerializer,T);this.events.next(new Il(s.id,this.urlSerializer.serialize(s.extractedUrl),F,B)),this.events.next(new Lp(T.redirectTo,T.navigationBehaviorOptions))}else{this.events.next(C);let F=n.errorHandler(w);s.resolve(!!F)}}catch(T){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(T)}}return Uo}))}))}cancelNavigationTransition(n,r,a){let s=new Il(n.id,this.urlSerializer.serialize(n.extractedUrl),r,a);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function iX(e){return e!==Mg}var oX=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(sX),providedIn:"root"})}}return e})(),qE=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},sX=(()=>{class e extends qE{static{this.\u0275fac=(()=>{let n;return function(a){return(n||(n=hI(e)))(a||e)}})()}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),iO=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:()=>Fe(aX),providedIn:"root"})}}return e})(),aX=(()=>{class e extends iO{constructor(){super(...arguments),this.location=Fe(Tp),this.urlSerializer=Fe(Vg),this.options=Fe(Hg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Fe(KE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new El,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$F(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Op)this.stateMemento=this.createStateMemento();else if(n instanceof Uc)this.rawUrlTree=r.initialUrl;else if(n instanceof Fx){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let a=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??a,r)}}else n instanceof Fg?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof Il&&(n.code===jo.GuardRejected||n.code===jo.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ng?this.restoreHistory(r,!0):n instanceof Tl&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let a=n instanceof El?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl){let s=this.browserPageId,h=Z(Z({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(a,"",h)}else{let s=Z(Z({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(a,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let a=this.browserPageId,s=this.currentPageId-a;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(a){return(n||(n=hI(e)))(a||e)}})()}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Dg=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Dg||{});function oO(e,t){e.events.pipe(fo(n=>n instanceof Tl||n instanceof Il||n instanceof Ng||n instanceof Uc),on(n=>n instanceof Tl||n instanceof Uc?Dg.COMPLETE:(n instanceof Il?n.code===jo.Redirect||n.code===jo.SupersededByNewNavigation:!1)?Dg.REDIRECTING:Dg.FAILED),fo(n=>n!==Dg.REDIRECTING),pl(1)).subscribe(()=>{t()})}function lX(e){throw e}var cX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_d=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=Fe(cx),this.stateManager=Fe(iO),this.options=Fe(Hg,{optional:!0})||{},this.pendingTasks=Fe(Fc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Fe(YE),this.urlSerializer=Fe(Vg),this.location=Fe(Tp),this.urlHandlingStrategy=Fe(KE),this._events=new Vr,this.errorHandler=this.options.errorHandler||lX,this.navigated=!1,this.routeReuseStrategy=Fe(oX),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Fe($x,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Fe(Hx,{optional:!0}),this.eventsSubscription=new Rr,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let a=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(a!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Il&&r.code!==jo.Redirect&&r.code!==jo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Tl)this.navigated=!0;else if(r instanceof Lp){let h=r.navigationBehaviorOptions,_=this.urlHandlingStrategy.merge(r.url,a.currentRawUrl),w=Z({browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iX(a.source)},h);this.scheduleNavigation(_,Mg,null,w,{resolve:a.resolve,reject:a.reject,promise:a.promise})}}hX(r)&&this._events.next(r)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mg,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,a){let s={replaceUrl:!0},h=a?.navigationId?a:null;if(a){let w=Z({},a);delete w.navigationId,delete w.\u0275routerPageId,Object.keys(w).length!==0&&(s.state=w)}let _=this.parseUrl(n);this.scheduleNavigation(_,r,h,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(WE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:a,queryParams:s,fragment:h,queryParamsHandling:_,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:h,T=null;switch(_??this.options.defaultQueryParamsHandling){case"merge":T=Z(Z({},this.currentUrlTree.queryParams),s);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}T!==null&&(T=this.removeEmptyProps(T));let F;try{let B=a?a.snapshot:this.routerState.snapshot.root;F=UF(B)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),F=this.currentUrlTree.root}return BF(F,n,T,C??null)}navigateByUrl(n,r={skipLocationChange:!1}){let a=Rg(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(s,Mg,null,r)}navigate(n,r={skipLocationChange:!1}){return dX(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let a;if(r===!0?a=Z({},cX):r===!1?a=Z({},uX):a=r,Rg(n))return _F(this.currentUrlTree,n,a);let s=this.parseUrl(n);return _F(this.currentUrlTree,s,a)}removeEmptyProps(n){return Object.entries(n).reduce((r,[a,s])=>(s!=null&&(r[a]=s),r),{})}scheduleNavigation(n,r,a,s,h){if(this.disposed)return Promise.resolve(!1);let _,w,C;h?(_=h.resolve,w=h.reject,C=h.promise):C=new Promise((F,B)=>{_=F,w=B});let T=this.pendingTasks.add();return oO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(T))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:_,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(F=>Promise.reject(F))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dX(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new mt(4008,!1)}function hX(e){return!(e instanceof Fg)&&!(e instanceof Lp)}var qx=class{};var pX=(()=>{class e{constructor(n,r,a,s,h){this.router=n,this.injector=a,this.preloadingStrategy=s,this.loader=h}setUpPreloading(){this.subscription=this.router.events.pipe(fo(n=>n instanceof Tl),hl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let a=[];for(let s of r){s.providers&&!s._injector&&(s._injector=tx(s.providers,n,`Route: ${s.path}`));let h=s._injector??n,_=s._loadedInjector??h;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&a.push(this.preloadConfig(h,s)),(s.children||s._loadedRoutes)&&a.push(this.processRoutes(_,s.children??s._loadedRoutes))}return br(a).pipe(ep())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let a;r.loadChildren&&r.canLoad===void 0?a=this.loader.loadChildren(n,r):a=Ft(null);let s=a.pipe(jr(h=>h===null?Ft(void 0):(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,this.processRoutes(h.injector??n,h.routes))));if(r.loadComponent&&!r._loadedComponent){let h=this.loader.loadComponent(r);return br([s,h]).pipe(ep())}else return s})}static{this.\u0275fac=function(r){return new(r||e)(wt(_d),wt(fx),wt(Ji),wt(qx),wt(ZE))}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),sO=new It(""),fX=(()=>{class e{constructor(n,r,a,s,h={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=a,this.zone=s,this.options=h,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},h.scrollPositionRestoration||="disabled",h.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Op?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Tl?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Uc&&n.code===Nx.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ox&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ox(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){Mk()}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();function mX(e){return e.routerState.root}function Gg(e,t){return{\u0275kind:e,\u0275providers:t}}function gX(){let e=Fe(vo);return t=>{let n=e.get(bl);if(t!==n.components[0])return;let r=e.get(_d),a=e.get(aO);e.get(XE)===1&&r.initialNavigation(),e.get(lO,null,ln.Optional)?.setUpPreloading(),e.get(sO,null,ln.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}var aO=new It("",{factory:()=>new Vr}),XE=new It("",{providedIn:"root",factory:()=>1});function yX(){return Gg(2,[{provide:XE,useValue:0},{provide:hx,multi:!0,deps:[vo],useFactory:t=>{let n=t.get(qN,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let a=t.get(_d),s=t.get(aO);oO(a,()=>{r(!0)}),t.get(YE).afterPreactivation=()=>(r(!0),s.closed?Ft(void 0):s),a.initialNavigation()}))}}])}function vX(){return Gg(3,[{provide:hx,multi:!0,useFactory:()=>{let t=Fe(_d);return()=>{t.setUpLocationChangeListener()}}},{provide:XE,useValue:2}])}var lO=new It("");function _X(e){return Gg(0,[{provide:lO,useExisting:pX},{provide:qx,useExisting:e}])}function xX(){return Gg(8,[SF,{provide:Hx,useExisting:SF}])}function wX(e){let t=[{provide:nO,useValue:tX},{provide:rO,useValue:Z({skipNextTransition:!!e?.skipInitialTransition},e)}];return Gg(9,t)}var TF=new It("ROUTER_FORROOT_GUARD"),bX=[Tp,{provide:Vg,useClass:Fp},_d,$g,{provide:zp,useFactory:mX,deps:[_d]},ZE,[]],JE=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[bX,[],{provide:$x,multi:!0,useValue:n},{provide:TF,useFactory:EX,deps:[[_d,new ug,new M0]]},{provide:Hg,useValue:r||{}},r?.useHash?CX():IX(),SX(),r?.preloadingStrategy?_X(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?TX(r):[],r?.bindToComponentInputs?xX().\u0275providers:[],r?.enableViewTransitions?wX().\u0275providers:[],DX()]}}static forChild(n){return{ngModule:e,providers:[{provide:$x,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||e)(wt(TF,8))}}static{this.\u0275mod=Li({type:e})}static{this.\u0275inj=Oi({})}}return e})();function SX(){return{provide:sO,useFactory:()=>{let e=Fe(YN),t=Fe(zn),n=Fe(Hg),r=Fe(YE),a=Fe(Vg);return n.scrollOffset&&e.setOffset(n.scrollOffset),new fX(a,r,e,t,n)}}}function CX(){return{provide:gd,useClass:GN}}function IX(){return{provide:gd,useClass:QI}}function EX(e){return"guarded"}function TX(e){return[e.initialNavigation==="disabled"?vX().\u0275providers:[],e.initialNavigation==="enabledBlocking"?yX().\u0275providers:[]]}var DF=new It("");function DX(){return[{provide:DF,useFactory:gX},{provide:px,multi:!0,useExisting:DF}]}var yO=qm(tT());var nT=e=>{let t=e.map(a=>a.properties.price).filter(a=>a>0),n=Math.min(...t);return e.map(a=>(a.highlight=a.properties.price==n,a))};var Wx=class e{constructor(t){this.http=t}apiUrl="https://affordable-gas-map-web-server-64d80cf2ea37.herokuapp.com/";getGasStations(t,n,r){return this.http.get(`${this.apiUrl}`,{params:{lng:t,lat:n,rad:r}})}sendData(t){return this.http.post(`${this.apiUrl}/submit-endpoint`,t)}static \u0275fac=function(n){return new(n||e)(wt(sE))};static \u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"})};var fs=qm(tT(),1);function Zx(e){e||(N0(Zx),e=Fe(_l));let t=new Cn(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(Ym(t))}var dO=["content"],hO=["*"],PX=["container"];var uO=e=>Object.keys(e).reduce((t,n)=>{let r=n;return e[r]===void 0?t:Me(Z({},t),{[r]:e[r]})},{}),Kx=(()=>{class e{constructor(){this.zone=Fe(zn),this.mapCreated=new Jh,this.mapLoaded=new Jh,this.markersToRemove=ud([]),this.popupsToRemove=ud([]),this.imageIdsToRemove=ud([]),this.mapCreated$=this.mapCreated.asObservable(),this.mapLoaded$=this.mapLoaded.asObservable()}setup(n){this.createMap(n.mapOptions),this.hookEvents(n.mapEvents),this.mapEvents=n.mapEvents,this.mapCreated.next(void 0),this.mapCreated.complete(),n.mapOptions.terrain&&this.mapInstance.on("load",()=>{this.updateTerrain(n.mapOptions.terrain)})}destroyMap(){this.mapInstance&&this.mapInstance.remove()}updateMinZoom(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinZoom(n)})}updateMaxZoom(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxZoom(n)})}updateMinPitch(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMinPitch(n)})}updateMaxPitch(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxPitch(n)})}updateRenderWorldCopies(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setRenderWorldCopies(n)})}updateScrollZoom(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.scrollZoom.enable():this.mapInstance.scrollZoom.disable()})}updateDragRotate(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.dragRotate.enable():this.mapInstance.dragRotate.disable()})}updateTouchPitch(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.touchPitch.enable():this.mapInstance.touchPitch.disable()})}updateTouchZoomRotate(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.touchZoomRotate.enable():this.mapInstance.touchZoomRotate.disable()})}updateDoubleClickZoom(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.doubleClickZoom.enable():this.mapInstance.doubleClickZoom.disable()})}updateKeyboard(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.keyboard.enable():this.mapInstance.keyboard.disable()})}updateDragPan(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.dragPan.enable():this.mapInstance.dragPan.disable()})}updateBoxZoom(n){return this.zone.runOutsideAngular(()=>{n?this.mapInstance.boxZoom.enable():this.mapInstance.boxZoom.disable()})}updateStyle(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setStyle(n)})}updateMaxBounds(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setMaxBounds(n)})}updateTerrain(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.setTerrain(n)})}getTerrain(){return this.zone.runOutsideAngular(()=>this.mapInstance.getTerrain())}changeCanvasCursor(n){let r=this.mapInstance.getCanvasContainer();r.style.cursor=n}queryRenderedFeatures(n,r){return this.mapInstance.queryRenderedFeatures(n,r)}panTo(n,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.panTo(n,r)})}move(n,r,a,s,h,_){return this.zone.runOutsideAngular(()=>{this.mapInstance[n](Me(Z({},r),{zoom:a??this.mapInstance.getZoom(),center:s??this.mapInstance.getCenter(),bearing:h??this.mapInstance.getBearing(),pitch:_??this.mapInstance.getPitch()}))})}addLayer(n,r,a){this.zone.runOutsideAngular(()=>{Object.keys(n.layerOptions).forEach(s=>{let h=s;n.layerOptions[h]===void 0&&delete n.layerOptions[h]}),this.mapInstance.addLayer(n.layerOptions,a),r&&(this.mapInstance.on("click",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerClick.emit(s)})}),this.mapInstance.on("dblclick",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerDblClick.emit(s)})}),this.mapInstance.on("mousedown",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseDown.emit(s)})}),this.mapInstance.on("mouseup",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseUp.emit(s)})}),this.mapInstance.on("mouseenter",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseEnter.emit(s)})}),this.mapInstance.on("mouseleave",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseLeave.emit(s)})}),this.mapInstance.on("mousemove",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseMove.emit(s)})}),this.mapInstance.on("mouseover",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseOver.emit(s)})}),this.mapInstance.on("mouseout",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerMouseOut.emit(s)})}),this.mapInstance.on("contextmenu",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerContextMenu.emit(s)})}),this.mapInstance.on("touchstart",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerTouchStart.emit(s)})}),this.mapInstance.on("touchend",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerTouchEnd.emit(s)})}),this.mapInstance.on("touchcancel",n.layerOptions.id,s=>{this.zone.run(()=>{n.layerEvents.layerTouchCancel.emit(s)})}))})}removeLayer(n){this.zone.runOutsideAngular(()=>{this.mapInstance.getLayer(n)!=null&&this.mapInstance.removeLayer(n)})}addMarker(n){let r={offset:n.markersOptions.offset,anchor:n.markersOptions.anchor,color:n.markersOptions.color,scale:n.markersOptions.scale,draggable:!!n.markersOptions.draggable,rotationAlignment:n.markersOptions.rotationAlignment,rotation:n.markersOptions.rotation,pitchAlignment:n.markersOptions.pitchAlignment,clickTolerance:n.markersOptions.clickTolerance,element:n.markersOptions.element.childNodes.length>0?n.markersOptions.element:void 0,opacity:n.markersOptions.opacity,opacityWhenCovered:n.markersOptions.opacityWhenCovered,subpixelPositioning:n.markersOptions.subpixelPositioning},a=new fs.Marker(r);a.on("dragstart",h=>{if(h){let{target:_}=h;this.zone.run(()=>{n.markersEvents.markerDragStart.emit(_)})}}),a.on("drag",h=>{if(h){let{target:_}=h;this.zone.run(()=>n.markersEvents.markerDrag.emit(_))}}),a.on("dragend",h=>{if(h){let{target:_}=h;this.zone.run(()=>n.markersEvents.markerDragEnd.emit(_))}});let s=n.markersOptions.feature?n.markersOptions.feature.geometry.coordinates:n.markersOptions.lngLat;return a.setLngLat(s),this.zone.runOutsideAngular(()=>(a.addTo(this.mapInstance),a))}removeMarker(n){this.markersToRemove.update(r=>[...r,n])}createPopup(n,r){return this.zone.runOutsideAngular(()=>{let a=uO(n.popupOptions),s=new fs.Popup(a);return s.setDOMContent(r),s.on("close",()=>{this.zone.run(()=>{n.popupEvents.popupClose.emit()})}),s.on("open",()=>{this.zone.run(()=>{n.popupEvents.popupOpen.emit()})}),s})}addPopupToMap(n,r,a=!1){return this.zone.runOutsideAngular(()=>{a&&n._listeners&&delete n._listeners.open,n.setLngLat(r),n.addTo(this.mapInstance)})}addPopupToMarker(n,r){return this.zone.runOutsideAngular(()=>{n.setPopup(r)})}removePopupFromMap(n,r=!1){r&&n._listeners&&delete n._listeners.close,this.popupsToRemove.update(a=>[...a,n])}removePopupFromMarker(n){return this.zone.runOutsideAngular(()=>{n.setPopup(void 0)})}addControl(n,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.addControl(n,r)})}removeControl(n){return this.zone.runOutsideAngular(()=>{this.mapInstance.removeControl(n)})}loadAndAddImage(n,r,a){return se(this,null,function*(){return this.zone.runOutsideAngular(()=>se(this,null,function*(){let s=yield this.mapInstance.loadImage(r);this.addImage(n,s.data,a)}))})}addImage(n,r,a){return this.zone.runOutsideAngular(()=>{this.mapInstance.addImage(n,r,a)})}removeImage(n){this.imageIdsToRemove.update(r=>[...r,n])}addSource(n,r){return this.zone.runOutsideAngular(()=>{Object.keys(r).forEach(a=>r[a]===void 0&&delete r[a]),this.mapInstance.addSource(n,r)})}getSource(n){return this.mapInstance.getSource(n)}removeSource(n){this.zone.runOutsideAngular(()=>{this.findLayersBySourceId(n).forEach(r=>this.mapInstance.removeLayer(r.id)),this.mapInstance.removeSource(n)})}setAllLayerPaintProperty(n,r){return this.zone.runOutsideAngular(()=>{Object.keys(r).forEach(a=>{this.mapInstance.setPaintProperty(n,a,r[a])})})}setAllLayerLayoutProperty(n,r){return this.zone.runOutsideAngular(()=>{Object.keys(r).forEach(a=>{this.mapInstance.setLayoutProperty(n,a,r[a])})})}setLayerFilter(n,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.setFilter(n,r)})}setLayerBefore(n,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.moveLayer(n,r)})}setLayerZoomRange(n,r,a){return this.zone.runOutsideAngular(()=>{this.mapInstance.setLayerZoomRange(n,r||0,a||20)})}fitBounds(n,r){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitBounds(n,r)})}fitScreenCoordinates(n,r,a){return this.zone.runOutsideAngular(()=>{this.mapInstance.fitScreenCoordinates(n[0],n[1],r,a)})}clearMapElements(){this.zone.runOutsideAngular(()=>{this.removeMarkers(),this.removePopups(),this.removeImages()})}createMap(n){zn.assertNotInAngularZone();let r=uO(n);this.mapInstance=new fs.Map(r),window&&/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)&&this.mapInstance.setStyle(n.style)}removeMarkers(){for(let n of this.markersToRemove())n.remove();this.markersToRemove.set([])}removePopups(){for(let n of this.popupsToRemove())n.remove();this.popupsToRemove.set([])}removeImages(){for(let n of this.imageIdsToRemove())this.mapInstance.removeImage(n);this.imageIdsToRemove.set([])}findLayersBySourceId(n){let r=this.mapInstance.getStyle().layers;return r==null?[]:r.filter(a=>"source"in a?a.source===n:!1)}hookEvents(n){this.mapInstance.on("load",r=>{this.mapLoaded.next(void 0),this.mapLoaded.complete(),this.zone.run(()=>{n.mapLoad.emit(r.target)})}),this.mapInstance.on("resize",r=>this.zone.run(()=>{n.mapResize.emit(r)})),this.mapInstance.on("remove",r=>this.zone.run(()=>{n.mapRemove.emit(r)})),this.mapInstance.on("mousedown",r=>this.zone.run(()=>{n.mapMouseDown.emit(r)})),this.mapInstance.on("mouseup",r=>this.zone.run(()=>{n.mapMouseUp.emit(r)})),this.mapInstance.on("mousemove",r=>this.zone.run(()=>{n.mapMouseMove.emit(r)})),this.mapInstance.on("click",r=>this.zone.run(()=>{n.mapClick.emit(r)})),this.mapInstance.on("dblclick",r=>this.zone.run(()=>{n.mapDblClick.emit(r)})),this.mapInstance.on("mouseover",r=>this.zone.run(()=>{n.mapMouseOver.emit(r)})),this.mapInstance.on("mouseout",r=>this.zone.run(()=>{n.mapMouseOut.emit(r)})),this.mapInstance.on("contextmenu",r=>this.zone.run(()=>{n.mapContextMenu.emit(r)})),this.mapInstance.on("touchstart",r=>this.zone.run(()=>{n.mapTouchStart.emit(r)})),this.mapInstance.on("touchend",r=>this.zone.run(()=>{n.mapTouchEnd.emit(r)})),this.mapInstance.on("touchmove",r=>this.zone.run(()=>{n.mapTouchMove.emit(r)})),this.mapInstance.on("touchcancel",r=>this.zone.run(()=>{n.mapTouchCancel.emit(r)})),this.mapInstance.on("wheel",r=>this.zone.run(()=>{n.mapWheel.emit(r)})),this.mapInstance.on("movestart",r=>this.zone.run(()=>n.moveStart.emit(r))),this.mapInstance.on("move",r=>this.zone.run(()=>n.move.emit(r))),this.mapInstance.on("moveend",r=>this.zone.run(()=>n.moveEnd.emit(r))),this.mapInstance.on("dragstart",r=>this.zone.run(()=>{n.mapDragStart.emit(r)})),this.mapInstance.on("drag",r=>this.zone.run(()=>{n.mapDrag.emit(r)})),this.mapInstance.on("dragend",r=>this.zone.run(()=>{n.mapDragEnd.emit(r)})),this.mapInstance.on("zoomstart",r=>this.zone.run(()=>n.zoomStart.emit(r))),this.mapInstance.on("zoom",r=>this.zone.run(()=>n.zoomEvt.emit(r))),this.mapInstance.on("zoomend",r=>this.zone.run(()=>n.zoomEnd.emit(r))),this.mapInstance.on("rotatestart",r=>this.zone.run(()=>n.rotateStart.emit(r))),this.mapInstance.on("rotate",r=>this.zone.run(()=>n.rotate.emit(r))),this.mapInstance.on("rotateend",r=>this.zone.run(()=>n.rotateEnd.emit(r))),this.mapInstance.on("pitchstart",r=>this.zone.run(()=>n.pitchStart.emit(r))),this.mapInstance.on("pitch",r=>this.zone.run(()=>n.pitchEvt.emit(r))),this.mapInstance.on("pitchend",r=>this.zone.run(()=>n.pitchEnd.emit(r))),this.mapInstance.on("boxzoomstart",r=>this.zone.run(()=>n.boxZoomStart.emit(r))),this.mapInstance.on("boxzoomend",r=>this.zone.run(()=>n.boxZoomEnd.emit(r))),this.mapInstance.on("boxzoomcancel",r=>this.zone.run(()=>n.boxZoomCancel.emit(r))),this.mapInstance.on("webglcontextlost",r=>this.zone.run(()=>n.webGlContextLost.emit(r))),this.mapInstance.on("webglcontextrestored",r=>this.zone.run(()=>n.webGlContextRestored.emit(r))),this.mapInstance.on("render",r=>this.zone.run(()=>n.render.emit(r))),this.mapInstance.on("error",r=>this.zone.run(()=>{n.mapError.emit(r)})),this.mapInstance.on("data",r=>this.zone.run(()=>n.data.emit(r))),this.mapInstance.on("styledata",r=>this.zone.run(()=>n.styleData.emit(r))),this.mapInstance.on("sourcedata",r=>this.zone.run(()=>n.sourceData.emit(r))),this.mapInstance.on("dataloading",r=>this.zone.run(()=>n.dataLoading.emit(r))),this.mapInstance.on("styledataloading",r=>this.zone.run(()=>n.styleDataLoading.emit(r))),this.mapInstance.on("sourcedataloading",r=>this.zone.run(()=>n.sourceDataLoading.emit(r))),this.mapInstance.on("styleimagemissing",r=>this.zone.run(()=>n.styleImageMissing.emit(r))),this.mapInstance.on("idle",r=>this.zone.run(()=>n.idle.emit(r)))}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ft({token:e,factory:e.\u0275fac})}}return e})();var pO=(()=>{class e{get mapInstance(){return this.mapService.mapInstance}constructor(){this.mapService=Fe(Kx),this.elementRef=Fe(_a),this.collectResourceTiming=et(),this.crossSourceCollisions=et(),this.customMapboxApiUrl=et(),this.fadeDuration=et(),this.hash=et(),this.refreshExpiredTiles=et(),this.failIfMajorPerformanceCaveat=et(),this.bearingSnap=et(),this.interactive=et(),this.pitchWithRotate=et(),this.clickTolerance=et(),this.attributionControl=et(),this.logoPosition=et(),this.maxTileCacheSize=et(),this.localIdeographFontFamily=et(),this.preserveDrawingBuffer=et(),this.trackResize=et(),this.transformRequest=et(),this.bounds=et(),this.antialias=et(),this.locale=et(),this.cooperativeGestures=et(),this.minZoom=et(),this.maxZoom=et(),this.minPitch=et(),this.maxPitch=et(),this.scrollZoom=et(),this.dragRotate=et(),this.touchPitch=et(),this.touchZoomRotate=et(),this.doubleClickZoom=et(),this.keyboard=et(),this.dragPan=et(),this.boxZoom=et(),this.style=et.required(),this.center=et(),this.maxBounds=et(),this.zoom=et(),this.bearing=et(),this.pitch=et(),this.fitBoundsOptions=et(),this.renderWorldCopies=et(),this.terrain=et(),this.movingMethod=et("flyTo"),this.movingOptions=et(),this.fitBounds=et(),this.fitScreenCoordinates=et(),this.centerWithPanTo=et(),this.panToOptions=et(),this.cursorStyle=et(),this.mapResize=At(),this.mapRemove=At(),this.mapMouseDown=At(),this.mapMouseUp=At(),this.mapMouseMove=At(),this.mapClick=At(),this.mapDblClick=At(),this.mapMouseOver=At(),this.mapMouseOut=At(),this.mapContextMenu=At(),this.mapTouchStart=At(),this.mapTouchEnd=At(),this.mapTouchMove=At(),this.mapTouchCancel=At(),this.mapWheel=At(),this.moveStart=At(),this.move=At(),this.moveEnd=At(),this.mapDragStart=At(),this.mapDrag=At(),this.mapDragEnd=At(),this.zoomStart=At(),this.zoomEvt=At(),this.zoomEnd=At(),this.rotateStart=At(),this.rotate=At(),this.rotateEnd=At(),this.pitchStart=At(),this.pitchEvt=At(),this.pitchEnd=At(),this.boxZoomStart=At(),this.boxZoomEnd=At(),this.boxZoomCancel=At(),this.webGlContextLost=At(),this.webGlContextRestored=At(),this.mapLoad=At(),this.idle=At(),this.render=At(),this.mapError=At(),this.data=At(),this.styleData=At(),this.sourceData=At(),this.dataLoading=At(),this.styleDataLoading=At(),this.sourceDataLoading=At(),this.styleImageMissing=At(),this.mapContainer=ex.required("container"),dd(()=>{if(this.preserveDrawingBuffer()){let r=this.elementRef.nativeElement;r.setAttribute("data-cy","map"),this.mapLoad.subscribe(()=>{r.setAttribute("data-loaded","true")}),this.idle.subscribe(()=>{r.setAttribute("data-idle","true")}),this.render.subscribe(()=>{r.removeAttribute("data-idle")})}this.mapService.setup({mapOptions:{collectResourceTiming:this.collectResourceTiming(),container:this.mapContainer().nativeElement,crossSourceCollisions:this.crossSourceCollisions(),fadeDuration:this.fadeDuration(),minZoom:this.minZoom(),maxZoom:this.maxZoom(),minPitch:this.minPitch(),maxPitch:this.maxPitch(),style:this.style(),hash:this.hash(),interactive:this.interactive(),bearingSnap:this.bearingSnap(),pitchWithRotate:this.pitchWithRotate(),clickTolerance:this.clickTolerance(),attributionControl:this.attributionControl(),logoPosition:this.logoPosition(),failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat(),preserveDrawingBuffer:this.preserveDrawingBuffer(),refreshExpiredTiles:this.refreshExpiredTiles(),maxBounds:this.maxBounds(),scrollZoom:this.scrollZoom(),boxZoom:this.boxZoom(),dragRotate:this.dragRotate(),dragPan:this.dragPan(),keyboard:this.keyboard(),doubleClickZoom:this.doubleClickZoom(),touchPitch:this.touchPitch(),touchZoomRotate:this.touchZoomRotate(),trackResize:this.trackResize(),center:this.center(),zoom:this.zoom(),bearing:this.bearing(),pitch:this.pitch(),renderWorldCopies:this.renderWorldCopies(),maxTileCacheSize:this.maxTileCacheSize(),localIdeographFontFamily:this.localIdeographFontFamily(),transformRequest:this.transformRequest(),bounds:this.bounds()?this.bounds():this.fitBounds(),fitBoundsOptions:this.fitBoundsOptions(),antialias:this.antialias(),locale:this.locale,cooperativeGestures:this.cooperativeGestures(),terrain:this.terrain()},mapEvents:this});let n=this.cursorStyle();n&&this.mapService.changeCanvasCursor(n)}),OI(()=>{this.mapService.clearMapElements()})}ngOnDestroy(){this.mapService.destroyMap()}ngOnChanges(n){return se(this,null,function*(){yield D1(this.mapService.mapCreated$);let r=this.zoom(),a=this.bearing(),s=this.pitch(),h=this.center();n.cursorStyle&&!n.cursorStyle.isFirstChange()&&this.mapService.changeCanvasCursor(n.cursorStyle.currentValue),n.minZoom&&!n.minZoom.isFirstChange()&&this.mapService.updateMinZoom(n.minZoom.currentValue),n.maxZoom&&!n.maxZoom.isFirstChange()&&this.mapService.updateMaxZoom(n.maxZoom.currentValue),n.minPitch&&!n.minPitch.isFirstChange()&&this.mapService.updateMinPitch(n.minPitch.currentValue),n.maxPitch&&!n.maxPitch.isFirstChange()&&this.mapService.updateMaxPitch(n.maxPitch.currentValue),n.renderWorldCopies&&!n.renderWorldCopies.isFirstChange()&&this.mapService.updateRenderWorldCopies(n.renderWorldCopies.currentValue),n.scrollZoom&&!n.scrollZoom.isFirstChange()&&this.mapService.updateScrollZoom(n.scrollZoom.currentValue),n.dragRotate&&!n.dragRotate.isFirstChange()&&this.mapService.updateDragRotate(n.dragRotate.currentValue),n.touchPitch&&!n.touchPitch.isFirstChange()&&this.mapService.updateTouchPitch(n.touchPitch.currentValue),n.touchZoomRotate&&!n.touchZoomRotate.isFirstChange()&&this.mapService.updateTouchZoomRotate(n.touchZoomRotate.currentValue),n.doubleClickZoom&&!n.doubleClickZoom.isFirstChange()&&this.mapService.updateDoubleClickZoom(n.doubleClickZoom.currentValue),n.keyboard&&!n.keyboard.isFirstChange()&&this.mapService.updateKeyboard(n.keyboard.currentValue),n.dragPan&&!n.dragPan.isFirstChange()&&this.mapService.updateDragPan(n.dragPan.currentValue),n.boxZoom&&!n.boxZoom.isFirstChange()&&this.mapService.updateBoxZoom(n.boxZoom.currentValue),n.style&&!n.style.isFirstChange()&&this.mapService.updateStyle(n.style.currentValue),n.maxBounds&&!n.maxBounds.isFirstChange()&&this.mapService.updateMaxBounds(n.maxBounds.currentValue),n.fitBounds&&n.fitBounds.currentValue&&!n.fitBounds.isFirstChange()&&this.mapService.fitBounds(n.fitBounds.currentValue,this.fitBoundsOptions()),n.fitScreenCoordinates&&n.fitScreenCoordinates.currentValue&&((h||r||s||this.fitBounds())&&n.fitScreenCoordinates.isFirstChange()&&console.warn("[ngx-maplibre-gl] center / zoom / pitch / fitBounds inputs are being overridden by fitScreenCoordinates input"),this.mapService.fitScreenCoordinates(n.fitScreenCoordinates.currentValue,a?a[0]:0,this.movingOptions())),this.centerWithPanTo()&&n.center&&!n.center.isFirstChange()&&!n.zoom&&!n.bearing&&!n.pitch?this.mapService.panTo(this.center(),this.panToOptions()):(n.center&&!n.center.isFirstChange()||n.zoom&&!n.zoom.isFirstChange()||n.bearing&&!n.bearing.isFirstChange()&&!n.fitScreenCoordinates||n.pitch&&!n.pitch.isFirstChange())&&this.mapService.move(this.movingMethod(),this.movingOptions(),n.zoom&&r?r[0]:void 0,n.center?h:void 0,n.bearing&&a?a[0]:void 0,n.pitch&&s?s[0]:void 0),n.terrain&&!n.terrain.isFirstChange()&&this.mapService.updateTerrain(n.terrain.currentValue)})}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Zt({type:e,selectors:[["mgl-map"]],viewQuery:function(r,a){r&1&&sx(a.mapContainer,PX,5),r&2&&ax()},inputs:{collectResourceTiming:[1,"collectResourceTiming"],crossSourceCollisions:[1,"crossSourceCollisions"],customMapboxApiUrl:[1,"customMapboxApiUrl"],fadeDuration:[1,"fadeDuration"],hash:[1,"hash"],refreshExpiredTiles:[1,"refreshExpiredTiles"],failIfMajorPerformanceCaveat:[1,"failIfMajorPerformanceCaveat"],bearingSnap:[1,"bearingSnap"],interactive:[1,"interactive"],pitchWithRotate:[1,"pitchWithRotate"],clickTolerance:[1,"clickTolerance"],attributionControl:[1,"attributionControl"],logoPosition:[1,"logoPosition"],maxTileCacheSize:[1,"maxTileCacheSize"],localIdeographFontFamily:[1,"localIdeographFontFamily"],preserveDrawingBuffer:[1,"preserveDrawingBuffer"],trackResize:[1,"trackResize"],transformRequest:[1,"transformRequest"],bounds:[1,"bounds"],antialias:[1,"antialias"],locale:[1,"locale"],cooperativeGestures:[1,"cooperativeGestures"],minZoom:[1,"minZoom"],maxZoom:[1,"maxZoom"],minPitch:[1,"minPitch"],maxPitch:[1,"maxPitch"],scrollZoom:[1,"scrollZoom"],dragRotate:[1,"dragRotate"],touchPitch:[1,"touchPitch"],touchZoomRotate:[1,"touchZoomRotate"],doubleClickZoom:[1,"doubleClickZoom"],keyboard:[1,"keyboard"],dragPan:[1,"dragPan"],boxZoom:[1,"boxZoom"],style:[1,"style"],center:[1,"center"],maxBounds:[1,"maxBounds"],zoom:[1,"zoom"],bearing:[1,"bearing"],pitch:[1,"pitch"],fitBoundsOptions:[1,"fitBoundsOptions"],renderWorldCopies:[1,"renderWorldCopies"],terrain:[1,"terrain"],movingMethod:[1,"movingMethod"],movingOptions:[1,"movingOptions"],fitBounds:[1,"fitBounds"],fitScreenCoordinates:[1,"fitScreenCoordinates"],centerWithPanTo:[1,"centerWithPanTo"],panToOptions:[1,"panToOptions"],cursorStyle:[1,"cursorStyle"]},outputs:{mapResize:"mapResize",mapRemove:"mapRemove",mapMouseDown:"mapMouseDown",mapMouseUp:"mapMouseUp",mapMouseMove:"mapMouseMove",mapClick:"mapClick",mapDblClick:"mapDblClick",mapMouseOver:"mapMouseOver",mapMouseOut:"mapMouseOut",mapContextMenu:"mapContextMenu",mapTouchStart:"mapTouchStart",mapTouchEnd:"mapTouchEnd",mapTouchMove:"mapTouchMove",mapTouchCancel:"mapTouchCancel",mapWheel:"mapWheel",moveStart:"moveStart",move:"move",moveEnd:"moveEnd",mapDragStart:"mapDragStart",mapDrag:"mapDrag",mapDragEnd:"mapDragEnd",zoomStart:"zoomStart",zoomEvt:"zoomEvt",zoomEnd:"zoomEnd",rotateStart:"rotateStart",rotate:"rotate",rotateEnd:"rotateEnd",pitchStart:"pitchStart",pitchEvt:"pitchEvt",pitchEnd:"pitchEnd",boxZoomStart:"boxZoomStart",boxZoomEnd:"boxZoomEnd",boxZoomCancel:"boxZoomCancel",webGlContextLost:"webGlContextLost",webGlContextRestored:"webGlContextRestored",mapLoad:"mapLoad",idle:"idle",render:"render",mapError:"mapError",data:"data",styleData:"styleData",sourceData:"sourceData",dataLoading:"dataLoading",styleDataLoading:"styleDataLoading",sourceDataLoading:"sourceDataLoading",styleImageMissing:"styleImageMissing"},standalone:!0,features:[lx([Kx]),vl,Ip],decls:2,vars:0,consts:[["container",""]],template:function(r,a){r&1&&Qe(0,"div",null,0)},styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}}return e})(),fO=(()=>{class e{constructor(){this.mapService=Fe(Kx),this.destroyRef=Fe(_l),this.offset=et(),this.anchor=et(),this.clickTolerance=et(),this.color=et(),this.scale=et(),this.opacity=et(),this.opacityWhenCovered=et(),this.subpixelPositioning=et(),this.feature=et(),this.lngLat=et(),this.draggable=et(),this.popupShown=et(),this.className=et(),this.pitchAlignment=et(),this.rotationAlignment=et(),this.rotation=et(),this.markerDragStart=At(),this.markerDragEnd=At(),this.markerDrag=At(),this.content=ex.required("content"),this.markerInstance=ud(null),dd(()=>{this.mapService.mapCreated$.pipe(Zx(this.destroyRef)).subscribe(()=>{let n=this.mapService.addMarker({markersOptions:{element:this.content().nativeElement,feature:this.feature(),lngLat:this.lngLat(),offset:this.offset(),anchor:this.anchor(),color:this.color(),scale:this.scale(),draggable:!!this.draggable(),clickTolerance:this.clickTolerance(),rotation:this.rotation(),rotationAlignment:this.rotationAlignment(),pitchAlignment:this.pitchAlignment(),opacity:this.opacity(),opacityWhenCovered:this.opacityWhenCovered(),subpixelPositioning:this.subpixelPositioning()},markersEvents:{markerDragStart:this.markerDragStart,markerDrag:this.markerDrag,markerDragEnd:this.markerDragEnd}});this.markerInstance.set(n)})}),this.destroyRef.onDestroy(()=>this.removeMarker())}ngOnInit(){if(this.feature()&&this.lngLat())throw new Error("feature and lngLat input are mutually exclusive")}ngOnChanges(n){let r=this.markerInstance();n.lngLat&&!n.lngLat.isFirstChange()&&r.setLngLat(n.lngLat.currentValue),n.feature&&!n.feature.isFirstChange()&&r.setLngLat(n.feature.currentValue.geometry.coordinates),n.draggable&&!n.draggable.isFirstChange()&&r.setDraggable(!!n.draggable.currentValue),n.popupShown&&!n.popupShown.isFirstChange()&&(n.popupShown.currentValue?r.getPopup().addTo(this.mapService.mapInstance):r.getPopup().remove()),n.pitchAlignment&&!n.pitchAlignment.isFirstChange()&&r.setPitchAlignment(n.pitchAlignment.currentValue),n.rotationAlignment&&!n.rotationAlignment.isFirstChange()&&r.setRotationAlignment(n.rotationAlignment.currentValue),n.rotation&&!n.rotation.isFirstChange()&&r.setRotation(n.rotation.currentValue)}removeMarker(){this.mapService.removeMarker(this.markerInstance()),this.markerInstance.set(null)}togglePopup(){this.markerInstance().togglePopup()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Zt({type:e,selectors:[["mgl-marker"]],viewQuery:function(r,a){r&1&&sx(a.content,dO,5),r&2&&ax()},inputs:{offset:[1,"offset"],anchor:[1,"anchor"],clickTolerance:[1,"clickTolerance"],color:[1,"color"],scale:[1,"scale"],opacity:[1,"opacity"],opacityWhenCovered:[1,"opacityWhenCovered"],subpixelPositioning:[1,"subpixelPositioning"],feature:[1,"feature"],lngLat:[1,"lngLat"],draggable:[1,"draggable"],popupShown:[1,"popupShown"],className:[1,"className"],pitchAlignment:[1,"pitchAlignment"],rotationAlignment:[1,"rotationAlignment"],rotation:[1,"rotation"]},outputs:{markerDragStart:"markerDragStart",markerDragEnd:"markerDragEnd",markerDrag:"markerDrag"},standalone:!0,features:[vl,Ip],ngContentSelectors:hO,decls:3,vars:2,consts:[["content",""]],template:function(r,a){r&1&&(zs(),we(0,"div",null,0),Us(2),Se()),r&2&&hs(a.className())},encapsulation:2,changeDetection:0})}}return e})();var mO=(()=>{class e{constructor(){this.destroyRef=Fe(_l),this.mapService=Fe(Kx),this.closeButton=et(),this.closeOnClick=et(),this.closeOnMove=et(),this.focusAfterOpen=et(),this.anchor=et(),this.className=et(),this.maxWidth=et(),this.subpixelPositioning=et(),this.feature=et(),this.lngLat=et(),this.marker=et(),this.offset=et(),this.popupClose=At(),this.popupOpen=At(),this.content=ex.required("content"),this.popupInstance=null,dd(()=>{this.popupInstance=this.createPopup(),this.addPopup(this.popupInstance).pipe(Zx(this.destroyRef)).subscribe()}),this.destroyRef.onDestroy(()=>this.removePopupFromMarker())}ngOnInit(){if(this.lngLat()&&this.marker()||this.feature()&&this.lngLat()||this.feature()&&this.marker())throw new Error("marker, lngLat, feature input are mutually exclusive")}ngOnChanges(n){if(n.feature&&!n.feature.isFirstChange()){let r=this.getLngLat(this.lngLat(),this.feature());this.mapService.removePopupFromMap(this.popupInstance,!0);let a=this.createPopup();this.mapService.addPopupToMap(a,r,this.popupInstance.isOpen()),this.popupInstance=a}if(n.lngLat&&!n.lngLat.isFirstChange()&&this.popupInstance.setLngLat(n.lngLat.currentValue),n.marker&&!n.marker.isFirstChange()){let a=n.marker.previousValue.markerInstance();a&&this.mapService.removePopupFromMarker(a);let s=this.marker()?.markerInstance();s&&this.popupInstance&&this.mapService.addPopupToMarker(s,this.popupInstance)}n.offset&&!n.offset.isFirstChange()&&this.popupInstance&&this.popupInstance.setOffset(n.offset.currentValue)}createPopup(){return this.mapService.createPopup({popupOptions:{closeButton:this.closeButton(),closeOnClick:this.closeOnClick(),closeOnMove:this.closeOnMove(),focusAfterOpen:this.focusAfterOpen(),anchor:this.anchor(),offset:this.offset(),className:this.className(),maxWidth:this.maxWidth(),subpixelPositioning:this.subpixelPositioning()},popupEvents:{popupOpen:this.popupOpen,popupClose:this.popupClose}},this.content().nativeElement)}addPopup(n){return this.mapService.mapCreated$.pipe(kr(()=>{let r=this.lngLat(),a=this.feature(),s=this.marker()?.markerInstance();if(r||a)this.mapService.addPopupToMap(n,this.getLngLat(r,a));else if(s)this.mapService.addPopupToMarker(s,n);else throw new Error("mgl-popup need either lngLat/marker/feature to be set")}))}removePopupFromMarker(){if(this.popupInstance){let n=this.marker()?.markerInstance();this.lngLat()||this.feature()?this.mapService.removePopupFromMap(this.popupInstance,!0):n&&this.mapService.removePopupFromMarker(n)}this.popupInstance=null}getLngLat(n,r){if(n)return n;if(r)return r.geometry.coordinates;throw new Error("lngLat or feature value is required")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Zt({type:e,selectors:[["mgl-popup"]],viewQuery:function(r,a){r&1&&sx(a.content,dO,5),r&2&&ax()},inputs:{closeButton:[1,"closeButton"],closeOnClick:[1,"closeOnClick"],closeOnMove:[1,"closeOnMove"],focusAfterOpen:[1,"focusAfterOpen"],anchor:[1,"anchor"],className:[1,"className"],maxWidth:[1,"maxWidth"],subpixelPositioning:[1,"subpixelPositioning"],feature:[1,"feature"],lngLat:[1,"lngLat"],marker:[1,"marker"],offset:[1,"offset"]},outputs:{popupClose:"popupClose",popupOpen:"popupOpen"},standalone:!0,features:[vl,Ip],ngContentSelectors:hO,decls:3,vars:0,consts:[["content",""],["data-cy","mgl-popup"]],template:function(r,a){r&1&&(zs(),we(0,"div",1,0),Us(2),Se())},encapsulation:2,changeDetection:0})}}return e})();var gO=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Li({type:e})}static{this.\u0275inj=Oi({})}}return e})();var kX=()=>[10],NX=e=>[e,18.33],FX=e=>[e,16.8637],OX=e=>[e,19.49178],vO=(e,t)=>[e,t],LX=e=>({color:e,display:"inline"});function zX(e,t){if(e&1&&(we(0,"mgl-marker",2,0)(2,"div"),Qe(3,"img",3),we(4,"div",4)(5,"h2",5),Ye(6),Se(),we(7,"h3",6),Ye(8),Se()()()(),we(9,"mgl-popup",7),Qe(10,"img",8),we(11,"p"),Ye(12),Se(),we(13,"p"),Ye(14),Se()()),e&2){let n=t.$implicit,r=xN(1);Te("lngLat",VI(8,vO,n.geometry.coordinates[0],n.geometry.coordinates[1])),xe(5),Te("ngStyle",pd(11,LX,n.highlight?"green":"red")),xe(),hi(n.properties.price),xe(2),hi(n.properties.name),xe(),Te("className","popup")("marker",r),xe(3),hi(n.properties.name),xe(2),hi(n.properties.price)}}var Yx=class e{constructor(t){this.srvc=t}gas_stations;min_price;map;setup(t){this.map=t,this.loadGeolocateControl()}loadGeolocateControl(){let t=new yO.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});this.map.addControl(t),t.on("trackuserlocationend",n=>{console.log("A trackuserlocationend event has occurred."),console.log(n.target._userLocationDotMarker._lngLat.lat),console.log(n.target._userLocationDotMarker._lngLat.lng),this.srvc.getGasStations(n.target._userLocationDotMarker._lngLat.lng,n.target._userLocationDotMarker._lngLat.lat,4).subscribe(r=>{this.gas_stations=nT(r.features),console.log(this.gas_stations)})})}ngOnInit(){this.srvc.getGasStations(-66,18,10).subscribe(t=>{this.gas_stations=nT(t.features),console.log(this.gas_stations)})}flyToStation(t,n){this.map.loaded()!=!1&&this.map.flyTo({center:[t,n],zoom:17})}static \u0275fac=function(n){return new(n||e)(sn(Wx))};static \u0275cmp=Zt({type:e,selectors:[["app-map"]],decls:3,vars:17,consts:[["marker",""],[3,"mapLoad","zoom","center","preserveDrawingBuffer","movingMethod","maxBounds"],[2,"text-align","center",3,"lngLat"],["src","https://upload.wikimedia.org/wikipedia/commons/b/b7/Ic_local_gas_station_48px.svg",1,"station_icon",2,"width","50px","height","50px","border-radius","50%","cursor","pointer"],[2,"display","flex","justify-content","center","gap","8px"],[3,"ngStyle"],[2,"display","inline"],[3,"className","marker"],["src","https://mayaguezmall.com/wp-content/uploads/2021/11/pumagas-300x300-1.jpg",2,"height","100px","width","100px","align-self","center"]],template:function(n,r){n&1&&(we(0,"mgl-map",1),wn("mapLoad",function(s){return r.setup(s)}),zI(1,zX,15,13,null,null,LI),Se()),n&2&&(hN("https://api.maptiler.com/maps/streets/style.json?key=n6S4rviWxFfTzUz0eHiO"),Te("zoom",gg(7,kX))("center",pd(8,NX,-66.5))("preserveDrawingBuffer",!0)("movingMethod","flyTo")("maxBounds",VI(14,vO,pd(10,FX,-70.3503),pd(12,OX,-63.27647))),xe(),UI(r.gas_stations))},dependencies:[WN,pO,fO,mO],styles:["mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     .popup{border-radius:16px;box-shadow:0 2px 18px #0562dc61;font-family:Roboto,sans-serif;font-size:14px;color:#212121;transform:scale(1);position:relative;opacity:.98;background-color:#fff0;width:10rem}[_nghost-%COMP%]     .popup p:first-of-type{font-weight:500;font-size:16px;color:#1a73e8;margin-bottom:8px}[_nghost-%COMP%]     .popup p:last-of-type{font-weight:400;color:#5f6368;font-size:14px}"]})};var Vp=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Zt({type:e,selectors:[["app-gas-map"]],decls:58,vars:0,consts:[[1,"container"],[1,"left-panel"],["type","button",1,"btn","btn-light","gas-button"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-light","gas-button","dropdown-toggle"],[1,"dropdown-menu"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input",2,"margin-right","5%","margin-left","5%","background-color","grey"],["for","flexCheckDefault",1,"form-check-label"],[1,"map-container"]],template:function(n,r){n&1&&(we(0,"div",0)(1,"div",1)(2,"h2"),Ye(3,"Nearest Stations"),Se(),we(4,"button",2),Ye(5,"Station 1"),Se(),we(6,"button",2),Ye(7,"Station 2"),Se(),we(8,"button",2),Ye(9,"Station 3"),Se(),we(10,"h2"),Ye(11,"Filters"),Se(),we(12,"div",3)(13,"button",4),Ye(14," By Brand "),Se(),we(15,"ul",5)(16,"div"),Qe(17,"input",6),we(18,"label",7),Ye(19," Texaco "),Se()(),we(20,"div"),Qe(21,"input",6),we(22,"label",7),Ye(23," Gulf "),Se()(),we(24,"div"),Qe(25,"input",6),we(26,"label",7),Ye(27," Total "),Se()()()(),we(28,"div",3)(29,"button",4),Ye(30," By Price "),Se(),we(31,"ul",5)(32,"div"),Qe(33,"input",6),we(34,"label",7),Ye(35," Lowest - Highest "),Se()(),we(36,"div"),Qe(37,"input",6),we(38,"label",7),Ye(39," Highest - Lowest "),Se()()()(),we(40,"div",3)(41,"button",4),Ye(42," By Gas Type "),Se(),we(43,"ul",5)(44,"div"),Qe(45,"input",6),we(46,"label",7),Ye(47," Regular "),Se()(),we(48,"div"),Qe(49,"input",6),we(50,"label",7),Ye(51," Premium "),Se()(),we(52,"div"),Qe(53,"input",6),we(54,"label",7),Ye(55," Diesel "),Se()()()()(),we(56,"div",8),Qe(57,"app-map"),Se()())},dependencies:[Yx],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100vw}.gas-button[_ngcontent-%COMP%]{width:100%;margin-top:5%;margin-bottom:5%;height:10%}.left-panel[_ngcontent-%COMP%]{width:25%;background-color:#001f3f;justify-content:center;align-items:center;padding:20px;box-shadow:2px 0 5px #0000001a;height:100%;color:#fff}.map-container[_ngcontent-%COMP%]{width:100%;height:100%}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column}.map-container[_ngcontent-%COMP%]{width:100%;height:67vh;order:1}.left-panel[_ngcontent-%COMP%]{width:100%;height:33vh;box-shadow:none;order:2}}"]})};var VX=[{path:"map",component:Vp}],Jx=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Li({type:e});static \u0275inj=Oi({imports:[JE.forRoot(VX),JE]})};var Vc=e=>e.context.actorRef?.getSnapshot(),jc=e=>Vc(e)?.context;var _O="Logging",rT="x-amz-user-agent",xO="NoHubcallbackProvidedException";var $o=function(e){return e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE",e}($o||{});var wO={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6},or=(()=>{class e{constructor(n,r=$o.WARN){this.name=n,this.level=r,this._pluggables=[]}_padding(n){return n<10?"0"+n:""+n}_ts(){let n=new Date;return[this._padding(n.getMinutes()),this._padding(n.getSeconds())].join(":")+"."+n.getMilliseconds()}configure(n){return n?(this._config=n,this._config):this._config}_log(n,...r){let a=this.level;e.LOG_LEVEL&&(a=e.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(a=window.LOG_LEVEL);let s=wO[a];if(!(wO[n]>=s))return;let _=console.log.bind(console);n===$o.ERROR&&console.error&&(_=console.error.bind(console)),n===$o.WARN&&console.warn&&(_=console.warn.bind(console)),e.BIND_ALL_LOG_LEVELS&&(n===$o.INFO&&console.info&&(_=console.info.bind(console)),n===$o.DEBUG&&console.debug&&(_=console.debug.bind(console)));let w=`[${n}] ${this._ts()} ${this.name}`,C="";if(r.length===1&&typeof r[0]=="string")C=`${w} - ${r[0]}`,_(C);else if(r.length===1)C=`${w} ${r[0]}`,_(w,r[0]);else if(typeof r[0]=="string"){let T=r.slice(1);T.length===1&&(T=T[0]),C=`${w} - ${r[0]} ${T}`,_(`${w} - ${r[0]}`,T)}else C=`${w} ${r}`,_(w,r);for(let T of this._pluggables){let F={message:C,timestamp:Date.now()};T.pushLogs([F])}}log(...n){this._log($o.INFO,...n)}info(...n){this._log($o.INFO,...n)}warn(...n){this._log($o.WARN,...n)}error(...n){this._log($o.ERROR,...n)}debug(...n){this._log($o.DEBUG,...n)}verbose(...n){this._log($o.VERBOSE,...n)}addPluggable(n){n&&n.getCategoryName()===_O&&(this._pluggables.push(n),n.configure(this._config))}listPluggables(){return this._pluggables}}return e.LOG_LEVEL=null,e.BIND_ALL_LOG_LEVELS=!1,e})();var Or=class e extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:a}){super(t),this.name=n,this.underlyingError=a,this.recoverySuggestion=r,this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};var ms=function(e){return e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError",e}(ms||{});var Dl=(e,t=Or)=>(n,r,a)=>{let{message:s,recoverySuggestion:h}=e[r];if(!n)throw new t({name:r,message:a?`${s} ${a}`:s,recoverySuggestion:h})};var fi=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Wg=new or("Hub"),Qx=class{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){let r=this.listeners.get(t);if(!r){Wg.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...r.filter(({callback:a})=>a!==n)])}dispatch(t,n,r,a){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(a===fi||Wg.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));let s={channel:t,payload:Z({},n),source:r,patternInfo:[]};try{this._toListeners(s)}catch(h){Wg.error(h)}}listen(t,n,r="noname"){let a;if(typeof n!="function")throw new Or({name:xO,message:"No callback supplied to Hub"});a=n;let s=this.listeners.get(t);return s||(s=[],this.listeners.set(t,s)),s.push({name:r,callback:a}),()=>{this._remove(t,a)}}_toListeners(t){let{channel:n,payload:r}=t,a=this.listeners.get(n);a&&a.forEach(s=>{Wg.debug(`Dispatching to ${n} with `,r);try{s.callback(t)}catch(h){Wg.error(h)}})}},qr=new Qx("__default__"),xd=new Qx("internal-hub");var Zg=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new Or({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},bO=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new Or({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},SO=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new Or({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})};var Kg={convert(e){return SO()(e)}};var Sa=function(e){return e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException",e}(Sa||{}),jX={[Sa.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Sa.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Sa.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Sa.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Sa.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},ew=Dl(jX);function bt(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,ew(t,Sa.AuthUserPoolException)}function Al(e){let t=!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType;ew(t,Sa.OAuthNotConfigureException)}function wd(e){let t=!!e?.identityPoolId;ew(t,Sa.InvalidIdentityPoolIdException)}function Ui(e){let t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{let r=t[1].replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(Kg.convert(r).split("").map(h=>`%${`00${h.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),s=JSON.parse(a);return{toString:()=>e,payload:s}}catch{throw new Error("Invalid token payload")}}var iT=e=>{let t=Reflect.ownKeys(e);for(let n of t){let r=e[n];(r&&typeof r=="object"||typeof r=="function")&&iT(r)}return Object.freeze(e)};var $X=new or("parseAWSExports"),qX={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},IO=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new Or({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:a,aws_bots_config:s,aws_cognito_identity_pool_id:h,aws_cognito_sign_up_verification_method:_,aws_cognito_mfa_configuration:w,aws_cognito_mfa_types:C,aws_cognito_password_protection_settings:T,aws_cognito_verification_mechanisms:F,aws_cognito_signup_attributes:B,aws_cognito_social_providers:$,aws_cognito_username_attributes:ee,aws_mandatory_sign_in:ie,aws_mobile_analytics_app_id:ye,aws_mobile_analytics_app_region:ve,aws_user_files_s3_bucket:Ae,aws_user_files_s3_bucket_region:ke,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:Ve,aws_user_pools_id:Ge,aws_user_pools_web_client_id:it,geo:ut,oauth:Mt,predictions:nt,aws_cloud_logic_custom:Nn,Notifications:vt,modelIntrospection:Ut}=e,Lt={};ye&&(Lt.Analytics={Pinpoint:{appId:ye,region:ve}});let{InAppMessaging:ar,Push:Cr}=vt??{};if(ar?.AWSPinpoint||Cr?.AWSPinpoint){if(ar?.AWSPinpoint){let{appId:Kt,region:Vn}=ar.AWSPinpoint;Lt.Notifications={InAppMessaging:{Pinpoint:{appId:Kt,region:Vn}}}}if(Cr?.AWSPinpoint){let{appId:Kt,region:Vn}=Cr.AWSPinpoint;Lt.Notifications=Me(Z({},Lt.Notifications),{PushNotification:{Pinpoint:{appId:Kt,region:Vn}}})}}if(Array.isArray(s)&&(Lt.Interactions={LexV1:Object.fromEntries(s.map(Kt=>[Kt.name,Kt]))}),r){let Kt=qX[n];Kt||$X.debug(`Invalid authentication type ${n}. Falling back to IAM.`),Lt.API={GraphQL:{endpoint:r,apiKey:t,region:a,defaultAuthMode:Kt??"iam"}},Ut&&(Lt.API.GraphQL.modelIntrospection=Ut)}let Xo=w?{status:w&&w.toLowerCase(),totpEnabled:C?.includes("TOTP")??!1,smsEnabled:C?.includes("SMS")??!1}:void 0,Zr=T?{minLength:T.passwordPolicyMinLength,requireLowercase:T.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:T.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:T.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:T.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,Bn=Array.from(new Set([...F??[],...B??[]])).reduce((Kt,Vn)=>Me(Z({},Kt),{[Vn.toLowerCase()]:{required:!0}}),{}),Kr=ee?.includes("EMAIL")??!1,_r=ee?.includes("PHONE_NUMBER")??!1;(h||Ge)&&(Lt.Auth={Cognito:{identityPoolId:h,allowGuestAccess:ie!=="enable",signUpVerificationMethod:_,userAttributes:Bn,userPoolClientId:it,userPoolId:Ge,mfa:Xo,passwordFormat:Zr,loginWith:{username:!(Kr||_r),email:Kr,phone:_r}}});let no=Mt?Object.keys(Mt).length>0:!1,Ci=$?$.length>0:!1;if(Lt.Auth&&no&&(Lt.Auth.Cognito.loginWith=Me(Z({},Lt.Auth.Cognito.loginWith),{oauth:Z(Z({},HX(Mt)),Ci&&{providers:GX($)})})),Ae&&(Lt.Storage={S3:{bucket:Ae,region:ke,dangerouslyConnectToHttpEndpointForTesting:Ve}}),ut){let{amazon_location_service:Kt}=ut;Lt.Geo={LocationService:{maps:Kt.maps,geofenceCollections:Kt.geofenceCollections,searchIndices:Kt.search_indices,region:Kt.region}}}if(Nn&&(Lt.API=Me(Z({},Lt.API),{REST:Nn.reduce((Kt,Vn)=>{let{name:Bi,endpoint:Cs,region:Jo,service:Ws}=Vn;return Me(Z({},Kt),{[Bi]:Z(Z({endpoint:Cs},Ws?{service:Ws}:void 0),Jo?{region:Jo}:void 0)})},{})})),nt){let{VoiceId:Kt}=nt?.convert?.speechGenerator?.defaults??{};Lt.Predictions=Kt?Me(Z({},nt),{convert:Me(Z({},nt.convert),{speechGenerator:Me(Z({},nt.convert.speechGenerator),{defaults:{voiceId:Kt}})})}):nt}return Lt},CO=e=>e?.split(",")??[],HX=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:a})=>({domain:e,scopes:t,redirectSignIn:CO(n),redirectSignOut:CO(r),responseType:a}),GX=e=>e.map(t=>{let n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)});var Yg=Symbol("oauth-listener");function TO(e){let{version:t}=e;return t?t.startsWith("1"):!1}function WX(e){if(!e)return;let{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&rJ(r)}}}function ZX(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:a,mfa_configuration:s,mfa_methods:h,unauthenticated_identities_enabled:_,oauth:w,username_attributes:C,standard_required_attributes:T}=e,F={Cognito:{userPoolId:t,userPoolClientId:n}};return r&&(F.Cognito=Me(Z({},F.Cognito),{identityPoolId:r})),a&&(F.Cognito.passwordFormat={requireLowercase:a.require_lowercase,requireNumbers:a.require_numbers,requireUppercase:a.require_uppercase,requireSpecialCharacters:a.require_symbols,minLength:a.min_length??6}),s&&(F.Cognito.mfa={status:nJ(s),smsEnabled:h?.includes("SMS"),totpEnabled:h?.includes("TOTP")}),_&&(F.Cognito.allowGuestAccess=_),w&&(F.Cognito.loginWith={oauth:{domain:w.domain,redirectSignIn:w.redirect_sign_in_uri,redirectSignOut:w.redirect_sign_out_uri,responseType:w.response_type==="token"?"token":"code",scopes:w.scopes,providers:tJ(w.identity_providers)}}),C&&(F.Cognito.loginWith=Me(Z({},F.Cognito.loginWith),{email:C.includes("email"),phone:C.includes("phone_number"),username:C.includes("username")})),T&&(F.Cognito.userAttributes=T.reduce((B,$)=>Me(Z({},B),{[$]:{required:!0}}),{})),F}function KX(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function YX(e){if(!e)return;let{aws_region:t,geofence_collections:n,maps:r,search_indices:a}=e;return{LocationService:{region:t,searchIndices:a,geofenceCollections:n,maps:r}}}function XX(e){if(!e)return;let{aws_region:t,default_authorization_type:n,url:r,api_key:a,model_introspection:s}=e;return{GraphQL:{endpoint:r,defaultAuthMode:AO(n),region:t,apiKey:a,modelIntrospection:s}}}function JX(e){if(!e?.events)return;let{url:t,aws_region:n,api_key:r,default_authorization_type:a}=e.events;return{Events:{endpoint:t,defaultAuthMode:AO(a),region:n,apiKey:r}}}function QX(e){if(!e)return;let{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,a=n.includes("IN_APP_MESSAGING"),s=n.includes("APNS")||n.includes("FCM");if(!(a||s))return;let h={};return a&&(h.InAppMessaging={Pinpoint:{appId:r,region:t}}),s&&(h.PushNotification={Pinpoint:{appId:r,region:t}}),h}function DO(e){let t={};if(e.storage&&(t.Storage=WX(e.storage)),e.auth&&(t.Auth=ZX(e.auth)),e.analytics&&(t.Analytics=KX(e.analytics)),e.geo&&(t.Geo=YX(e.geo)),e.data&&(t.API=XX(e.data)),e.custom){let n=JX(e.custom);n&&"Events"in n&&(t.API=Z(Z({},t.API),n))}return e.notifications&&(t.Notifications=QX(e.notifications)),t}var eJ={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function AO(e){return eJ[e]}var EO={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function tJ(e=[]){return e.reduce((t,n)=>(EO[n]!==void 0&&t.push(EO[n]),t),[])}function nJ(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function rJ(e){let t={};return e.forEach(({name:n,bucket_name:r,aws_region:a})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);t[n]={bucketName:r,region:a}}),t}var Xg=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?IO(e):TO(e)?DO(e):e;function nw({expiresAt:e,clockDrift:t}){return Date.now()+t>e}var tw=class{configure(t,n){this.authConfig=t,this.authOptions=n}fetchAuthSession(){return se(this,arguments,function*(t={}){let n,r,a=yield this.getTokens(t);return a?(r=a.accessToken?.payload?.sub,n=yield this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:a,authenticated:!0,forceRefresh:t.forceRefresh})):n=yield this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:a,credentials:n?.credentials,identityId:n?.identityId,userSub:r}})}clearCredentials(){return se(this,null,function*(){yield this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()})}getTokens(t){return se(this,null,function*(){return(yield this.authOptions?.tokenProvider?.getTokens(t))??void 0})}};var wo=64,MO=32,PO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),RO=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],kO=Math.pow(2,53)-1;var Jg=function(){function e(){this.state=Int32Array.from(RO),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=t.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>kO)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=t[n++],r--,this.bufferLength===wo&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%wo>=wo-8){for(var a=this.bufferLength;a<wo;a++)n.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(var a=this.bufferLength;a<wo-8;a++)n.setUint8(a,0);n.setUint32(wo-8,Math.floor(t/4294967296),!0),n.setUint32(wo-4,t),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(MO),a=0;a<8;a++)s[a*4]=this.state[a]>>>24&255,s[a*4+1]=this.state[a]>>>16&255,s[a*4+2]=this.state[a]>>>8&255,s[a*4+3]=this.state[a]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,r=t.state,a=r[0],s=r[1],h=r[2],_=r[3],w=r[4],C=r[5],T=r[6],F=r[7],B=0;B<wo;B++){if(B<16)this.temp[B]=(n[B*4]&255)<<24|(n[B*4+1]&255)<<16|(n[B*4+2]&255)<<8|n[B*4+3]&255;else{var $=this.temp[B-2],ee=($>>>17|$<<15)^($>>>19|$<<13)^$>>>10;$=this.temp[B-15];var ie=($>>>7|$<<25)^($>>>18|$<<14)^$>>>3;this.temp[B]=(ee+this.temp[B-7]|0)+(ie+this.temp[B-16]|0)}var ye=(((w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7))+(w&C^~w&T)|0)+(F+(PO[B]+this.temp[B]|0)|0)|0,ve=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&s^a&h^s&h)|0;F=T,T=C,C=w,w=_+ye|0,_=h,h=s,s=a,a=ye+ve|0}r[0]+=a,r[1]+=s,r[2]+=h,r[3]+=_,r[4]+=w,r[5]+=C,r[6]+=T,r[7]+=F},e}();var oT=e=>new TextEncoder().encode(e);var iJ=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:oT;function rw(e){return e instanceof Uint8Array?e:typeof e=="string"?iJ(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function sT(e){return typeof e=="string"?e.length===0:e.byteLength===0}var Ml=function(){function e(t){this.secret=t,this.hash=new Jg,this.reset()}return e.prototype.update=function(t){if(!(sT(t)||this.error))try{this.hash.update(rw(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return E_(this,void 0,void 0,function(){return UP(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Jg,this.secret){this.outer=new Jg;var t=oJ(this.secret),n=new Uint8Array(wo);n.set(t);for(var r=0;r<wo;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}},e}();function oJ(e){var t=rw(e);if(t.byteLength>wo){var n=new Jg;n.update(t),t=n.digest()}var r=new Uint8Array(wo);return r.set(t),r}var sJ={},aJ={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),sJ[e]=t,aJ[t]=e}var pr=function(e){return e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202",e}(pr||{}),qo=function(e){return e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage",e}(qo||{}),Ca=function(e){return e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9",e}(Ca||{});var Ot=function(e){return e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e}(Ot||{});var jp=function(e){return e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7",e}(jp||{}),iw=function(e){return e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3",e}(iw||{});var Qg=function(e){return e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e}(Qg||{});var aT="6.7.0";var $c=()=>typeof global<"u";var gs=()=>typeof window<"u",ow=()=>typeof document<"u",$p=()=>typeof process<"u",qc=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));function NO(){let e=r=>r.startsWith("_react")||r.startsWith("__react"),t=r=>Object.keys(r).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return ow()&&n().some(t)}function FO(){return $p()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("react"))}function OO(){return gs()&&qc(window,"__VUE")}function LO(){return $c()&&qc(global,"__VUE")}function zO(){return gs()&&qc(window,"__SVELTE")}function UO(){return $p()&&typeof process.env<"u"&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}function BO(){return gs()&&window.next&&typeof window.next=="object"}function VO(){return $c()&&(qc(global,"__next")||qc(global,"__NEXT"))}function jO(){return gs()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function $O(){return $c()&&typeof global.__NUXT_PATHS__<"u"}function qO(){let e=!!(ow()&&document.querySelector("[ng-version]")),t=!!(gs()&&typeof window.ng<"u");return e||t}function HO(){return $p()&&typeof process.env=="object"&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}function GO(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function WO(){return $c()&&typeof global.expo<"u"}function ZO(){return gs()}var lJ=[{platform:pr.Expo,detectionMethod:WO},{platform:pr.ReactNative,detectionMethod:GO},{platform:pr.NextJs,detectionMethod:BO},{platform:pr.Nuxt,detectionMethod:jO},{platform:pr.Angular,detectionMethod:qO},{platform:pr.React,detectionMethod:NO},{platform:pr.VueJs,detectionMethod:OO},{platform:pr.Svelte,detectionMethod:zO},{platform:pr.WebUnknown,detectionMethod:ZO},{platform:pr.NextJsSSR,detectionMethod:VO},{platform:pr.NuxtSSR,detectionMethod:$O},{platform:pr.ReactSSR,detectionMethod:FO},{platform:pr.VueJsSSR,detectionMethod:LO},{platform:pr.AngularSSR,detectionMethod:HO},{platform:pr.SvelteSSR,detectionMethod:UO}];function KO(){return lJ.find(e=>e.detectionMethod())?.platform||pr.ServerSideUnknown}var ey,sw=[],aw=!1,cJ=10,uJ=10,dJ=1e3,lw=()=>{if(!ey){if(ey=KO(),aw)for(;sw.length;)sw.pop()?.();else sw.forEach(e=>{e()});YO(pr.ServerSideUnknown,cJ),YO(pr.WebUnknown,uJ)}return ey},cw=e=>{aw||sw.push(e)};function hJ(){ey=void 0}function YO(e,t){ey===e&&!aw&&setTimeout(()=>{hJ(),aw=!0,setTimeout(lw,dJ)},t)}var Hc={},Ia=e=>{Hc[e.category]=e.apis.reduce((r,a)=>Me(Z({},r),{[a]:{refCount:r[a]?.refCount?r[a].refCount+1:1,additionalDetails:e.additionalDetails}}),Hc[e.category]??{});let t=!1;return()=>{t||(t=!0,e.apis.forEach(r=>{let a=Hc[e.category][r].refCount;a>1?Hc[e.category][r].refCount=a-1:(delete Hc[e.category][r],Object.keys(Hc[e.category]).length||delete Hc[e.category])}))}},XO=(e,t)=>Hc[e]?.[t]?.additionalDetails;var JO="aws-amplify",QO=e=>e.replace(/\+.*/,""),lT=class{constructor(){this.userAgent=`${JO}/${QO(aT)}`}get framework(){return lw()}get isReactNative(){return this.framework===pr.ReactNative||this.framework===pr.Expo}observeFrameworkChanges(t){cw(t)}},pJ=new lT,eL=({category:e,action:t}={})=>{let n=[[JO,QO(aT)]];if(e&&n.push([e,t]),n.push(["framework",lw()]),e&&t){let r=XO(e,t);r&&r.forEach(a=>{n.push(a)})}return n},Gc=e=>eL(e).map(([r,a])=>r&&a?`${r}/${a}`:r).join(" ");var bd=()=>typeof window<"u"&&typeof window.document<"u";var uw=class{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new tw}configure(t,n){let r=Xg(t);this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=iT(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),qr.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",fi),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[Yg](t){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?t(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=t}notifyOAuthListener(){!this.resourcesConfig.Auth?.Cognito.loginWith?.oauth||!this.oAuthListener||(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}},kt=new uw;var ty=(e,t)=>e.Auth.fetchAuthSession(t);var ny=e=>ty(kt,e);function ry(){return kt.Auth.clearCredentials()}var Sd=e=>{let{headers:t,statusCode:n}=e;return Me(Z({},fJ(e)?e.$metadata:{}),{httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]})},fJ=e=>typeof e?.$metadata=="object";var Vs=e=>se(void 0,null,function*(){if(!e||e.statusCode<300)return;let t=yield Wc(e),r=(h=>{let[_]=h.toString().split(/[,:]+/);return _.includes("#")?_.split("#")[1]:_})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),a=t.message??t.Message??"Unknown error",s=new Error(a);return Object.assign(s,{name:r,$metadata:Sd(e)})}),Wc=e=>se(void 0,null,function*(){if(!e.body)throw new Error("Missing response payload");let t=yield e.body.json();return Object.assign(t,{$metadata:Sd(e)})});var bn=(e,t,n,r)=>(a,s)=>se(void 0,null,function*(){let h=Z(Z({},r),a),_=yield h.endpointResolver(h,s),w=yield t(s,_),C=yield e(w,Z({},h));return n(C)});var cT={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},tL={partitions:[cT,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]};var iy=e=>{let{partitions:t}=tL;for(let{regions:n,outputs:r,regionRegex:a}of t){let s=new RegExp(a);if(n.includes(e)||s.test(e))return r.dnsSuffix}return cT.outputs.dnsSuffix};var rL=({maxAttempts:e=3,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(a,s)=>function(_){return se(this,null,function*(){let w,C=s.attemptsCount??0,T,F=()=>{if(T)return nL(T,C),T;throw nL(w,C),w};for(;!r?.aborted&&C<e;){try{T=yield a(_),w=void 0}catch(B){w=B,T=void 0}if(C=(s.attemptsCount??0)>C?s.attemptsCount??0:C+1,s.attemptsCount=C,yield t(T,w)){if(!r?.aborted&&C<e){let B=n(C);yield mJ(B,r)}continue}else return F()}if(r?.aborted)throw new Error("Request aborted.");return F()})}},mJ=(e,t)=>{if(t?.aborted)return Promise.resolve();let n,r,a=new Promise(s=>{r=s,n=setTimeout(s,e)});return t?.addEventListener("abort",function s(h){clearTimeout(n),t?.removeEventListener("abort",s),r()}),a},nL=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata=Me(Z({},e.$metadata??{}),{attempts:t}))};var iL=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>function(a){return se(this,null,function*(){if(t.trim().length===0)return yield n(a);{let s=e.toLowerCase();return a.headers[s]=a.headers[s]?`${a.headers[s]} ${t}`:t,yield n(a)}})};var Cd=(e,t)=>(n,r)=>{let a={},s=h=>e(h,r);for(let h=t.length-1;h>=0;h--){let _=t[h];s=_(r)(s,a)}return s(n)};var dw=e=>{let t;return()=>(t||(t=e()),t)};var gJ=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),oL=(_,w)=>se(void 0,[_,w],function*({url:e,method:t,headers:n,body:r},{abortSignal:a,cache:s,withCrossDomainCredentials:h}){let C;try{C=yield fetch(e,{method:t,headers:n,body:gJ(t)?r:void 0,signal:a,cache:s,credentials:h?"include":"same-origin"})}catch($){throw $ instanceof TypeError?new Or({name:ms.NetworkError,message:"A network error has occurred.",underlyingError:$}):$}let T={};C.headers?.forEach(($,ee)=>{T[ee.toLowerCase()]=$});let F={statusCode:C.status,headers:T,body:null},B=Object.assign(C.body??{},{text:dw(()=>C.text()),blob:dw(()=>C.blob()),json:dw(()=>C.json())});return Me(Z({},F),{body:B})});var oy=Cd(oL,[iL,rL]);function sL(e=3e5){return r=>{let a=2**r*100+100*Math.random();return a>e?!1:a}}var aL=5*60*1e3,sy=e=>{let n=sL(aL)(e);return n===!1?aL:n};var yJ=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],lL=e=>!!e&&yJ.includes(e);var ay=e=>(t,n)=>se(void 0,null,function*(){let r=n??(yield e(t))??void 0,a=r?.code||r?.name,s=t?.statusCode;return wJ(n)||xJ(s,a)||lL(a)||bJ(s,a)}),vJ=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],_J=["TimeoutError","RequestTimeout","RequestTimeoutException"],xJ=(e,t)=>e===429||!!t&&vJ.includes(t),wJ=e=>[ms.NetworkError,"ERR_NETWORK"].includes(e?.name),bJ=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&_J.includes(t);var Ho=URL;var SJ="cognito-identity",CJ=({region:e})=>({url:new Ho(`https://cognito-identity.${e}.${iy(e)}`)}),IJ=()=>e=>function(n){return se(this,null,function*(){return n.headers["cache-control"]="no-store",e(n)})},hw=Cd(oy,[IJ]),ly={service:SJ,endpointResolver:CJ,retryDecider:ay(Vs),computeDelay:sy,userAgentValue:Gc(),cache:"no-store"};cw(()=>{ly.userAgentValue=Gc()});var pw=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),fw=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});var EJ=(e,t)=>{let n=pw("GetId"),r=JSON.stringify(e);return fw(t,n,r)},TJ=e=>se(void 0,null,function*(){if(e.statusCode>=300)throw yield Vs(e);return{IdentityId:(yield Wc(e)).IdentityId,$metadata:Sd(e)}}),uT=bn(hw,EJ,TJ,ly);var DJ=(e,t)=>{let n=pw("GetCredentialsForIdentity"),r=JSON.stringify(e);return fw(t,n,r)},AJ=e=>se(void 0,null,function*(){if(e.statusCode>=300)throw yield Vs(e);{let t=yield Wc(e);return{IdentityId:t.IdentityId,Credentials:MJ(t.Credentials),$metadata:Sd(e)}}}),MJ=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r&&new Date(r*1e3)}),mw=bn(hw,DJ,AJ,ly);var Id=class extends Or{constructor(){super({name:ms.PlatformNotSupported,message:"Function not supported on current platform"})}};var Ea=class{constructor(t){this.storage=t}setItem(t,n){return se(this,null,function*(){if(!this.storage)throw new Id;this.storage.setItem(t,n)})}getItem(t){return se(this,null,function*(){if(!this.storage)throw new Id;return this.storage.getItem(t)})}removeItem(t){return se(this,null,function*(){if(!this.storage)throw new Id;this.storage.removeItem(t)})}clear(){return se(this,null,function*(){if(!this.storage)throw new Id;this.storage.clear()})}};var Ed=class{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}};var gw=()=>typeof window<"u"&&window.localStorage?window.localStorage:new Ed,cL=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new Ed;var yw=class extends Ea{constructor(){super(gw())}};var vw=class extends Ea{constructor(){super(cL())}};function _w(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var PJ={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function dT(e,t){function n(a,s,h){if(!(typeof document>"u")){h=_w({},t,h),typeof h.expires=="number"&&(h.expires=new Date(Date.now()+h.expires*864e5)),h.expires&&(h.expires=h.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var _="";for(var w in h)h[w]&&(_+="; "+w,h[w]!==!0&&(_+="="+h[w].split(";")[0]));return document.cookie=a+"="+e.write(s,a)+_}}function r(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var s=document.cookie?document.cookie.split("; "):[],h={},_=0;_<s.length;_++){var w=s[_].split("="),C=w.slice(1).join("=");try{var T=decodeURIComponent(w[0]);if(h[T]=e.read(C,T),a===T)break}catch{}}return a?h[a]:h}}return Object.create({set:n,get:r,remove:function(a,s){n(a,"",_w({},s,{expires:-1}))},withAttributes:function(a){return dT(this.converter,_w({},this.attributes,a))},withConverter:function(a){return dT(_w({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var cy=dT(PJ,{path:"/"});var Td=class{constructor(t={}){let{path:n,domain:r,expires:a,sameSite:s,secure:h}=t;if(this.domain=r,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?a:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?h:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!s||!["strict","lax","none"].includes(s))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(s==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=s}}setItem(t,n){return se(this,null,function*(){cy.set(t,n,this.getData())})}getItem(t){return se(this,null,function*(){return cy.get(t)??null})}removeItem(t){return se(this,null,function*(){cy.remove(t,this.getData())})}clear(){return se(this,null,function*(){let t=cy.get(),n=Object.keys(t).map(r=>this.removeItem(r));yield Promise.all(n)})}getData(){return Z({path:this.path,expires:this.expires,domain:this.domain,secure:this.secure},this.sameSite&&{sameSite:this.sameSite})}};var Go=new yw,uL=new vw,dL=new Ea(new Ed);var Zc={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8},Pl="CurSize";function hT(e){let t=0;t=e.length;for(let n=e.length;n>=0;n-=1){let r=e.charCodeAt(n);r>127&&r<=2047?t+=1:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&(n-=1)}return t}function Kc(){return new Date().getTime()}var Dd=e=>`${e}${Pl}`;var Ad=function(e){return e.NoCacheItem="NoCacheItem",e.NullNextNode="NullNextNode",e.NullPreviousNode="NullPreviousNode",e}(Ad||{}),RJ={[Ad.NoCacheItem]:{message:"Item not found in the cache storage."},[Ad.NullNextNode]:{message:"Next node is null."},[Ad.NullPreviousNode]:{message:"Previous node is null."}},pT=Dl(RJ);var Dr=new or("StorageCache"),xw=class{constructor({config:t,keyValueStorage:n}){this.config=Z(Z({},Zc),t),this.keyValueStorage=n,this.sanitizeConfig()}getModuleName(){return"Cache"}configure(t){return t&&(t.keyPrefix&&Dr.warn("keyPrefix can not be re-configured on an existing Cache instance."),this.config=Z(Z({},this.config),t)),this.sanitizeConfig(),this.config}getCurrentCacheSize(){return se(this,null,function*(){let t=yield this.getStorage().getItem(Dd(this.config.keyPrefix));return t||(yield this.getStorage().setItem(Dd(this.config.keyPrefix),"0"),t="0"),Number(t)})}setItem(t,n,r){return se(this,null,function*(){if(Dr.debug(`Set item: key is ${t}, value is ${n} with options: ${r}`),!t||t===Pl){Dr.warn(`Invalid key: should not be empty or reserved key: '${Pl}'`);return}if(typeof n>"u"){Dr.warn("The value of item should not be undefined!");return}let a={priority:r?.priority!==void 0?r.priority:this.config.defaultPriority,expires:r?.expires!==void 0?r.expires:this.config.defaultTTL+Kc()};if(a.priority<1||a.priority>5){Dr.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");return}let s=`${this.config.keyPrefix}${t}`,h=this.fillCacheItem(s,n,a);if(h.byteSize>this.config.itemMaxSize){Dr.warn(`Item with key: ${t} you are trying to put into is too big!`);return}try{let _=yield this.getStorage().getItem(s);if(_&&(yield this.removeCacheItem(s,JSON.parse(_).byteSize)),yield this.isCacheFull(h.byteSize)){let w=yield this.clearInvalidAndGetRemainingKeys();if(yield this.isCacheFull(h.byteSize)){let C=yield this.sizeToPop(h.byteSize);yield this.popOutItems(w,C)}}return this.setCacheItem(s,h)}catch(_){Dr.warn(`setItem failed! ${_}`)}})}getItem(t,n){return se(this,null,function*(){Dr.debug(`Get item: key is ${t} with options ${n}`);let r;if(!t||t===Pl)return Dr.warn(`Invalid key: should not be empty or reserved key: '${Pl}'`),null;let a=`${this.config.keyPrefix}${t}`;try{if(r=yield this.getStorage().getItem(a),r!=null)if(yield this.isExpired(a))yield this.removeCacheItem(a,JSON.parse(r).byteSize);else return(yield this.updateVisitedTime(JSON.parse(r),a)).data;if(n?.callback){let s=n.callback();return s!==null&&(yield this.setItem(t,s,n)),s}return null}catch(s){return Dr.warn(`getItem failed! ${s}`),null}})}removeItem(t){return se(this,null,function*(){if(Dr.debug(`Remove item: key is ${t}`),!t||t===Pl){Dr.warn(`Invalid key: should not be empty or reserved key: '${Pl}'`);return}let n=`${this.config.keyPrefix}${t}`;try{let r=yield this.getStorage().getItem(n);r&&(yield this.removeCacheItem(n,JSON.parse(r).byteSize))}catch(r){Dr.warn(`removeItem failed! ${r}`)}})}getAllKeys(){return se(this,null,function*(){try{return yield this.getAllCacheKeys()}catch(t){return Dr.warn(`getAllkeys failed! ${t}`),[]}})}getStorage(){return this.keyValueStorage}isExpired(t){return se(this,null,function*(){let n=yield this.getStorage().getItem(t);pT(n!==null,Ad.NoCacheItem,`Key: ${t}`);let r=JSON.parse(n);return Kc()>=r.expires})}removeCacheItem(t,n){return se(this,null,function*(){let r=yield this.getStorage().getItem(t);pT(r!==null,Ad.NoCacheItem,`Key: ${t}`);let a=n??JSON.parse(r).byteSize;yield this.decreaseCurrentSizeInBytes(a);try{yield this.getStorage().removeItem(t)}catch(s){yield this.increaseCurrentSizeInBytes(a),Dr.error(`Failed to remove item: ${s}`)}})}fillCacheItem(t,n,r){let a={key:t,data:n,timestamp:Kc(),visitedTime:Kc(),priority:r.priority??0,expires:r.expires??0,type:typeof n,byteSize:0};return a.byteSize=hT(JSON.stringify(a)),a.byteSize=hT(JSON.stringify(a)),a}sanitizeConfig(){this.config.itemMaxSize>this.config.capacityInBytes&&(Dr.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=Zc.itemMaxSize),(this.config.defaultPriority>5||this.config.defaultPriority<1)&&(Dr.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=Zc.defaultPriority),(Number(this.config.warningThreshold)>1||Number(this.config.warningThreshold)<0)&&(Dr.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=Zc.warningThreshold);let t=5*1024*1024;this.config.capacityInBytes>t&&(Dr.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=Zc.capacityInBytes)}increaseCurrentSizeInBytes(t){return se(this,null,function*(){let n=yield this.getCurrentCacheSize();yield this.getStorage().setItem(Dd(this.config.keyPrefix),(n+t).toString())})}decreaseCurrentSizeInBytes(t){return se(this,null,function*(){let n=yield this.getCurrentCacheSize();yield this.getStorage().setItem(Dd(this.config.keyPrefix),(n-t).toString())})}updateVisitedTime(t,n){return se(this,null,function*(){return t.visitedTime=Kc(),yield this.getStorage().setItem(n,JSON.stringify(t)),t})}setCacheItem(t,n){return se(this,null,function*(){yield this.increaseCurrentSizeInBytes(n.byteSize);try{yield this.getStorage().setItem(t,JSON.stringify(n))}catch(r){yield this.decreaseCurrentSizeInBytes(n.byteSize),Dr.error(`Failed to set item ${r}`)}})}sizeToPop(t){return se(this,null,function*(){let r=(yield this.getCurrentCacheSize())+t-this.config.capacityInBytes,a=(1-this.config.warningThreshold)*this.config.capacityInBytes;return r>a?r:a})}isCacheFull(t){return se(this,null,function*(){let n=yield this.getCurrentCacheSize();return t+n>this.config.capacityInBytes})}popOutItems(t,n){return se(this,null,function*(){let r=[],a=n;for(let s of t){let h=yield this.getStorage().getItem(s);if(h!=null){let _=JSON.parse(h);r.push(_)}}r.sort((s,h)=>s.priority>h.priority?-1:s.priority<h.priority?1:s.visitedTime<h.visitedTime?-1:1);for(let s of r)if(yield this.removeCacheItem(s.key,s.byteSize),a-=s.byteSize,a<=0)return})}clearInvalidAndGetRemainingKeys(){return se(this,null,function*(){let t=[],n=yield this.getAllCacheKeys({omitSizeKey:!0});for(let r of n)(yield this.isExpired(r))?yield this.removeCacheItem(r):t.push(r);return t})}clear(){return se(this,null,function*(){Dr.debug("Clear Cache");try{let t=yield this.getAllKeys();for(let n of t){let r=`${this.config.keyPrefix}${n}`;yield this.getStorage().removeItem(r)}}catch(t){Dr.warn(`clear failed! ${t}`)}})}};var kJ=new or("StorageCache"),ww=class e extends xw{constructor(t){let n=gw();super({config:t,keyValueStorage:new Ea(n)}),this.storage=n,this.getItem=this.getItem.bind(this),this.setItem=this.setItem.bind(this),this.removeItem=this.removeItem.bind(this)}getAllCacheKeys(t){return se(this,null,function*(){let{omitSizeKey:n}=t??{},r=[];for(let a=0;a<this.storage.length;a++){let s=this.storage.key(a);n&&s===Dd(this.config.keyPrefix)||s?.startsWith(this.config.keyPrefix)&&r.push(s.substring(this.config.keyPrefix.length))}return r})}createInstance(t){return(!t.keyPrefix||t.keyPrefix===Zc.keyPrefix)&&(kJ.error("invalid keyPrefix, setting keyPrefix with timeStamp"),t.keyPrefix=Kc.toString()),new e(t)}};var hL=new ww;var NJ=new or("I18n"),pL=class{constructor(){this._options=null,this._lang=null,this._dict={}}setDefaultLanguage(){!this._lang&&typeof window<"u"&&window&&window.navigator&&(this._lang=window.navigator.language),NJ.debug(this._lang)}setLanguage(t){this._lang=t}get(t,n=void 0){if(this.setDefaultLanguage(),!this._lang)return typeof n<"u"?n:t;let r=this._lang,a=this.getByLanguage(t,r);return a||(r.indexOf("-")>0&&(a=this.getByLanguage(t,r.split("-")[0])),a)?a:typeof n<"u"?n:t}getByLanguage(t,n,r=null){if(!n)return r;let a=this._dict[n];return a?a[t]:r}putVocabulariesForLanguage(t,n){let r=this._dict[t];r||(r=this._dict[t]={}),this._dict[t]=Z(Z({},r),n)}putVocabularies(t){Object.keys(t).forEach(n=>{this.putVocabulariesForLanguage(n,t[n])})}};var Md=function(e){return e.NotConfigured="NotConfigured",e}(Md||{}),FJ={[Md.NotConfigured]:{message:"i18n is not configured."}},uy=Dl(FJ);var fL=new or("I18n"),bw={language:null},js=null,Pd=class e{static configure(t){return fL.debug("configure I18n"),t&&(bw=Object.assign({},bw,t.I18n||t),e.createInstance()),bw}static getModuleName(){return"I18n"}static createInstance(){fL.debug("create I18n instance"),!js&&(js=new pL)}static setLanguage(t){e.checkConfig(),uy(!!js,Md.NotConfigured),js.setLanguage(t)}static get(t,n){return e.checkConfig()?(uy(!!js,Md.NotConfigured),js.get(t,n)):typeof n>"u"?t:n}static putVocabulariesForLanguage(t,n){e.checkConfig(),uy(!!js,Md.NotConfigured),js.putVocabulariesForLanguage(t,n)}static putVocabularies(t){e.checkConfig(),uy(!!js,Md.NotConfigured),js.putVocabularies(t)}static checkConfig(){return js||e.createInstance(),!0}};Pd.createInstance();var fT=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n};function mT(e){return(e.match(/.{2}/g)||[]).map(n=>String.fromCharCode(parseInt(n,16))).join("")}function gT(e){return e.split("").map(t=>t.charCodeAt(0).toString(16).padStart(2,"0")).join("")}var yT=e=>{let t;return(...n)=>se(void 0,null,function*(){return t||(t=new Promise((r,a)=>{e(...n).then(s=>{r(s)}).catch(s=>{a(s)}).finally(()=>{t=void 0})}),t)})};var vT=()=>se(void 0,null,function*(){let{userAgentData:e}=navigator;if(!e)return navigator.userAgent;let{platform:t="",platformVersion:n="",model:r="",architecture:a="",fullVersionList:s=[]}=yield e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),h=s.map(w=>`${w.brand}/${w.version}`).join(";");return[t,n,a,r,t,h].filter(w=>w).join(" ")});function mL(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}var Ta={convert(e,t={urlSafe:!1,skipPadding:!1}){let n=typeof e=="string"?e:mL(e),r=bO()(n);return t.urlSafe&&(r=r.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(r=r.replace(/=/g,"")),r}};function gL(){return Zg().getRandomValues(new Uint32Array(1))[0]}function OJ(e){let{words:t}=e,{sigBytes:n}=e,r=[];for(let a=0;a<n;a++){let s=t[a>>>2]>>>24-a%4*8&255;r.push((s>>>4).toString(16)),r.push((s&15).toString(16))}return r.join("")}var dy=class e{constructor(t,n){this.words=[];let r=t;r=this.words=r||[],n!==void 0?this.sigBytes=n:this.sigBytes=r.length*4}random(t){let n=[];for(let r=0;r<t;r+=4)n.push(gL());return new e(n,t)}toString(){return OJ(this)}};var yL={category:qo.AI,apis:[Ca.CreateConversation,Ca.DeleteConversation,Ca.ListConversations,Ca.UpdateConversation,Ca.OnMessage,Ca.SendMessage,Ca.Generation]},vL={apis:[Ot.DeleteUser,Ot.UpdatePassword],category:qo.Auth},_L={apis:[Ot.SignUp,Ot.ConfirmSignUp,Ot.ResendSignUpCode,Ot.SignIn,Ot.ConfirmSignIn,Ot.FetchUserAttributes,Ot.SignOut,Ot.ResetPassword,Ot.ConfirmResetPassword,Ot.SignInWithRedirect],category:qo.Auth},xL={apis:[Qg.UploadData],category:qo.Storage},wL={apis:[iw.NotifyMessageInteraction],category:qo.InAppMessaging},bL={category:qo.Geo,apis:[jp.SearchByText,jp.SearchForSuggestions,jp.SearchByPlaceId]},SL={category:qo.Geo,apis:[]},CL={apis:[Qg.UploadData],category:qo.Storage};function Rd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function hy(e){return typeof e=="string"||typeof e=="object"&&Object.prototype.toString.call(e)==="[object String]"}function LJ(e){return Rd(e)&&Object.prototype.toString.call(e)==="[object Map]"}function zJ(e){return Rd(e)&&Object.prototype.toString.call(e)==="[object Set]"}function _T(e){if(e==null)return!0;if(Rd(e)&&(LJ(e)||zJ(e)))return!e.size;if(Rd(e)&&(hy(e)||Array.isArray(e)))return!e.length;for(let t in e)if(xT(e,t))return!1;return!0}function IL(e){return Rd(e)&&_T(e)}function xT(e,t){return e!=null&&Object.prototype.hasOwnProperty.call(e,t)}function wT(e){return typeof e=="function"}function EL(...e){}var Sw=({payload:e},t,n)=>{let{event:r}=e,{send:a}=t,{onSignIn:s,onSignOut:h}=n??{};switch(r){case"signedIn":{wT(s)&&s(e);break}case"signInWithRedirect":{a("SIGN_IN_WITH_REDIRECT");break}case"signedOut":case"tokenRefresh_failure":{r==="signedOut"&&wT(h)&&h(),a("SIGN_OUT");break}}},bT=(e,t=Sw)=>{let n=r=>t(r,e);return qr.listen("auth",n,"authenticator-hub-handler")};var qp=["+1","+7","+20","+27","+30","+31","+32","+33","+34","+36","+39","+40","+41","+43","+44","+45","+46","+47","+48","+49","+51","+52","+53","+54","+55","+56","+57","+58","+60","+61","+62","+63","+64","+65","+66","+81","+82","+84","+86","+90","+91","+92","+93","+94","+95","+98","+212","+213","+216","+218","+220","+221","+222","+223","+224","+225","+226","+227","+228","+229","+230","+231","+232","+233","+234","+235","+236","+237","+238","+239","+240","+241","+242","+243","+244","+245","+246","+248","+249","+250","+251","+252","+253","+254","+255","+256","+257","+258","+260","+261","+262","+263","+264","+265","+266","+267","+268","+269","+290","+291","+297","+298","+299","+345","+350","+351","+352","+353","+354","+355","+356","+357","+358","+359","+370","+371","+372","+373","+374","+375","+376","+377","+378","+379","+380","+381","+382","+385","+386","+387","+389","+420","+421","+423","+500","+501","+502","+503","+504","+505","+506","+507","+508","+509","+537","+590","+591","+593","+594","+595","+596","+597","+598","+599","+670","+672","+673","+674","+675","+676","+677","+678","+679","+680","+681","+682","+683","+685","+686","+687","+688","+689","+690","+691","+692","+850","+852","+853","+855","+856","+872","+880","+886","+960","+961","+962","+963","+964","+965","+966","+967","+968","+970","+971","+972","+973","+974","+975","+976","+977","+992","+993","+994","+995","+996","+998"];var Yc={birthdate:{label:"Birthdate",placeholder:"Enter your Birthdate",type:"date",autocomplete:"bday",isRequired:!0},confirmation_code:{label:"Confirmation Code",placeholder:"Enter your Confirmation Code",type:"text",autocomplete:"one-time-code",isRequired:!0},confirm_password:{label:"Confirm Password",placeholder:"Please confirm your Password",type:"password",autocomplete:"new-password",isRequired:!0},email:{label:"Email",placeholder:"Enter your Email",type:"email",autocomplete:"username",isRequired:!0},family_name:{label:"Family Name",placeholder:"Enter your Family Name",type:"text",autocomplete:"family-name",isRequired:!0},given_name:{label:"Given Name",placeholder:"Enter your Given Name",type:"text",autocomplete:"given-name",isRequired:!0},middle_name:{label:"Middle Name",placeholder:"Enter your Middle Name",type:"text",autocomplete:"additional-name",isRequired:!0},name:{label:"Name",placeholder:"Enter your Name",type:"text",autocomplete:"name",isRequired:!0},nickname:{label:"Nickname",placeholder:"Enter your Nickname",type:"text",autocomplete:"tel",isRequired:!0},password:{label:"Password",placeholder:"Enter your Password",type:"password",autocomplete:"new-password",isRequired:!0},phone_number:{label:"Phone Number",placeholder:"Enter your Phone Number",type:"tel",autocomplete:"tel",dialCode:"+1",dialCodeList:qp,isRequired:!0},preferred_username:{label:"Preferred Username",placeholder:"Enter your Preferred Username",type:"text",isRequired:!0},profile:{label:"Profile",placeholder:"Add your Profile",type:"url",autocomplete:"url",isRequired:!0},website:{label:"Website",placeholder:"Add your Website",type:"url",autocomplete:"url",isRequired:!0},username:{label:"Username",placeholder:"Enter your Username",type:"text",autocomplete:"username",isRequired:!0}},ST=["^","$","*",".","[","]","{","}","(",")","?",'"',"!","@","#","%","&","/","\\",",",">","<","'",":",";","|","_","~","`","=","+","-"," "];var TL=(e,t)=>{if(t?.matches("federatedSignIn")){if(e.matches("signUpActor"))return"signUp";if(e.matches("signInActor"))return"signIn"}switch(!0){case e.matches("idle"):return"idle";case e.matches("setup"):return"setup";case e.matches("signOut"):return"signOut";case e.matches("authenticated"):return"authenticated";case t?.matches("confirmSignUp"):case t?.matches("resendSignUpCode"):return"confirmSignUp";case t?.matches("confirmSignIn"):return"confirmSignIn";case t?.matches("setupTotp.edit"):case t?.matches("setupTotp.submit"):return"setupTotp";case t?.matches("signIn"):return"signIn";case t?.matches("signUp"):case t?.matches("autoSignIn"):return"signUp";case t?.matches("forceChangePassword"):return"forceNewPassword";case t?.matches("forgotPassword"):return"forgotPassword";case t?.matches("confirmResetPassword"):return"confirmResetPassword";case t?.matches("selectUserAttributes"):return"verifyUser";case t?.matches("confirmVerifyUserAttribute"):return"confirmVerifyUser";case e.matches("getCurrentUser"):case t?.matches("fetchUserAttributes"):return"transition";default:return null}};var DL=e=>{let t=n=>r=>e({type:n,data:r});return{initializeMachine:t("INIT"),resendCode:t("RESEND"),signOut:t("SIGN_OUT"),submitForm:t("SUBMIT"),updateForm:t("CHANGE"),updateBlur:t("BLUR"),toFederatedSignIn:t("FEDERATED_SIGN_IN"),toForgotPassword:t("FORGOT_PASSWORD"),toSignIn:t("SIGN_IN"),toSignUp:t("SIGN_UP"),skipVerification:t("SKIP")}};var AL=e=>{let t=jc(e)??{},{challengeName:n,codeDeliveryDetails:r,remoteError:a,validationError:s,totpSecretCode:h=null,unverifiedUserAttributes:_,username:w}=t,{socialProviders:C=[]}=e.context?.config??{},T=t?.user??e.context?.user,F=!!(s&&Object.keys(s).length>0),B=Vc(e),$=e.hasTag("pending")||B?.hasTag("pending"),ee=TL(e,B);return{authStatus:(ve=>{switch(ve){case"idle":case"setup":return"configuring";case"authenticated":return"authenticated";default:return"unauthenticated"}})(ee),challengeName:n,codeDeliveryDetails:r,error:a,hasValidationErrors:F,isPending:$,route:ee,socialProviders:C,totpSecretCode:h,unverifiedUserAttributes:_,user:T,username:w,validationErrors:s}};var CT=({send:e,state:t})=>{let n=DL(e),r=AL(t);return Z(Z({},n),r)};var Cw=function(e){return e.Apple="Apple",e.Amazon="Amazon",e.Facebook="Facebook",e.Google="Google",e}(Cw||{});var UJ=["birthdate","email","family_name","given_name","middle_name","name","nickname","phone_number","preferred_username","profile","website"];var BJ=["username","email","phone_number"],IT=[...BJ,...UJ,"confirmation_code","password","confirm_password"],ML=e=>IT.includes(e);var ys=e=>{let t=new FormData(e.target);return Object.fromEntries(t)};var Iw=e=>IT.includes(e),VJ=e=>Array.isArray(e),ET=e=>e?VJ(e)?e:[e]:null;var PL=e=>{let t=e.trim().split("");for(let n=0;n<t.length;n++)n>0&&n<t.length-1&&(t[n]="*");return t.join("")},RL=e=>{if(e.length<4)return e;let t=e.split("");for(let n=0;n<t.length-4;n++)t[n]="*";return t.join("")},kL=e=>{let t=e.split("@");return`${PL(t[0])}@${t[1]}`},TT=(e,t)=>e==="Phone Number"?RL(t):kL(t),DT=e=>ST.some(t=>e.includes(t)),AT=(e,t,n)=>encodeURI(`otpauth://totp/${e}:${t}?secret=${n}&issuer=${e}`);function MT(e,...t){return Object.entries(e).reduce((n,[r,a])=>Me(Z({},n),{[r]:t.includes(r)?a:a?.trim()}),{})}var NL={"Account recovery requires verified contact information":"Zur\xFCcksetzen des Accounts ben\xF6tigt einen verifizierten Account","Add your Profile":"Ihr Profil hinzuf\xFCgen","Add your Website":"Ihre Website hinzuf\xFCgen","Back to Sign In":"Zur\xFCck zur Anmeldung","Change Password":"Passwort \xE4ndern",Changing:"\xC4ndern von",Code:"Code","Confirm Password":"Passwort best\xE4tigen","Please confirm your Password":"Bitte best\xE4tigen Sie Ihr Passwort","Confirm Sign Up":"Registrierung best\xE4tigen","Confirm SMS Code":"SMS-Code best\xE4tigen","Confirm TOTP Code":"TOTP-Code best\xE4tigen",Confirm:"Best\xE4tigen","Confirmation Code":"Best\xE4tigungs-Code",Confirming:"Wird best\xE4tigt","Create a new account":"Einen neuen Account erstellen","Create Account":"Account erstellen","Creating Account":"Account wird erstellt","Dismiss alert":"Warnung verwerfen",Email:"E-Mail","Enter your Birthdate":"Geben Sie Ihr Geburtsdatum ein","Enter your code":"Geben Sie Ihren Code ein","Enter your Confirmation Code":"Geben Sie Ihren Best\xE4tigungs-Code ein","Enter your Email":"Geben Sie Ihre E-Mail ein","Enter your Family Name":"Geben Sie Ihren Nachnamen ein","Enter your Given Name":"Geben Sie Ihren Vornamen ein","Enter your Middle Name":"Geben Sie Ihren zweiten Vornamen ein","Enter your Name":"Geben Sie Ihren Namen ein","Enter your Nickname":"Geben Sie Ihren Spitznamen ein","Enter your Password":"Geben Sie Ihr Passwort ein","Enter your password":"Geben Sie Ihr Passwort ein","Enter your email":"Geben Sie Ihre E-Mail ein","Enter your phone number":"Geben Sie Ihre Telefonnummer ein","Enter your Preferred Username":"Geben Sie Ihren bevorzugten Benutzernamen ein","Enter your username":"Geben Sie Ihren Benutzernamen ein","Forgot password?":"Passwort vergessen?","Forgot your password?":"Passwort vergessen? ","Hide password":"Passwort verbergen","It may take a minute to arrive":"Es kann eine Minute dauern, bis er ankommt",Loading:"Wird geladen","New password":"Neues Passwort",or:"oder",Password:"Passwort","Phone Number":"Telefonnummer","Resend Code":"Code erneut senden","Reset your Password":"Zur\xFCcksetzen des Passworts","Reset your password":"Zur\xFCcksetzen des passworts","Send code":"Code senden","Send Code":"Code senden",Sending:"Wird gesendet","Setup TOTP":"TOTP einrichten","Show password":"Passwort anzeigen","Sign in to your account":"Melden Sie sich mit Ihrem Account an","Sign In with Amazon":"Mit Amazon anmelden","Sign In with Apple":"Mit Apple anmelden","Sign In with Facebook":"Mit Facebook anmelden","Sign In with Google":"Mit Google anmelden","Sign in":"Anmelden","Sign In":"Anmelden","Signing in":"Wird angemeldet",Skip:"\xDCberspringen",Submit:"Abschicken",Submitting:"Wird gesendet",Username:"Benutzername","Verify Contact":"Kontakt verifizieren",Verify:"Verifizieren","We Emailed You":"E-Mail wurde versendet","We Sent A Code":"Wir haben einen Code gesendet","We Texted You":"Wir haben Ihnen eine SMS gesendet","Your code is on the way. To log in, enter the code we emailed to":"Ihr Best\xE4tigungscode ist unterwegs. Um sich einzuloggen geben Sie den Code ein, den wir per E-Mail verschickt haben","Your code is on the way. To log in, enter the code we sent you":"Ihr Code ist unterwegs. Um sich anzumelden, geben Sie den Code ein, den wir Ihnen gesendet haben","Your code is on the way. To log in, enter the code we texted to":"Ihr Best\xE4tigungscode ist unterwegs. Um sich einzuloggen geben Sie den Code ein, den wir per SMS verschickt haben","An account with the given email already exists.":"Ein Account mit dieser E-Mail existiert bereits.","Confirm a Code":"Code best\xE4tigen","Confirm Sign In":"Anmeldung best\xE4tigen","Create account":"Hier registrieren","Sign Up with Facebook":"Mit Facebook registrieren","Sign Up with Google":"Mit Google registrieren","Forgot Password":"Passwort vergessen","Have an account? ":"Schon registriert? ","Incorrect username or password":"Falscher Benutzername oder falsches Passwort","Invalid password format":"Ung\xFCltiges Passwort-Format","Invalid phone number format":"Ung\xFCltiges Telefonummern-Format. Benutze eine Nummer im Format: +12345678900","It may take a minute to arrive.":"Es k\xF6nnte eine Minute dauern, bis der Code eintrifft.","Lost your code? ":"Code verloren? ","New Password":"Neues Passwort","No account? ":"Kein Account? ","Password attempts exceeded":"Die maximale Anzahl der fehlerhaften Anmeldeversuche wurde erreicht","Reset password":"Passwort zur\xFCcksetzen","Reset Password":"Passwort Zur\xFCcksetzen","Sign Out":"Abmelden","Sign Up":"Registrieren","User already exists":"Dieser Benutzer existiert bereits","User does not exist":"Dieser Benutzer existiert nicht","Username cannot be empty":"Benutzername darf nicht leer sein"};var FL={"Account recovery requires verified contact information":"Account recovery requires verified contact information","Add your Profile":"Add your Profile","Add your Website":"Add your Website","Back to Sign In":"Back to Sign In","Change Password":"Change Password",Changing:"Changing",Code:"Code","Confirm Password":"Confirm Password","Confirm Sign Up":"Confirm Sign Up","Confirm SMS Code":"Confirm SMS Code","Confirm MFA Code":"Confirm MFA Code","Confirm TOTP Code":"Confirm TOTP Code",Confirm:"Confirm","Confirmation Code":"Confirmation Code",Confirming:"Confirming","Create a new account":"Create a new account","Create Account":"Create Account","Creating Account":"Creating Account","Dismiss alert":"Dismiss alert",Email:"Email","Enter your Birthdate":"Enter your Birthdate","Enter your code":"Enter your code","Enter your Confirmation Code":"Enter your Confirmation Code","Enter your Email":"Enter your Email","Enter your Family Name":"Enter your Family Name","Enter your Given Name":"Enter your Given Name","Enter your Middle Name":"Enter your Middle Name","Enter your Name":"Enter your Name","Enter your Nickname":"Enter your Nickname","Enter your Password":"Enter your Password","Enter your phone number":"Enter your phone number","Enter your Preferred Username":"Enter your Preferred Username","Enter your username":"Enter your username","Forgot password?":"Forgot password?","Forgot your password?":"Forgot your password?","Hide password":"Hide password","It may take a minute to arrive":"It may take a minute to arrive",Loading:"Loading","New password":"New password",or:"or",Password:"Password","Phone Number":"Phone Number","Please confirm your Password":"Please confirm your Password","Resend Code":"Resend Code","Reset your password":"Reset your password","Reset your Password":"Reset your Password","Send code":"Send code","Send Code":"Send Code",Sending:"Sending","Setup TOTP":"Setup TOTP","Show password":"Show password","Sign in to your account":"Sign in to your account","Sign In with Amazon":"Sign In with Amazon","Sign In with Apple":"Sign In with Apple","Sign In with Facebook":"Sign In with Facebook","Sign In with Google":"Sign In with Google","Sign in":"Sign in","Sign In":"Sign In","Signing in":"Signing in",Skip:"Skip",Submit:"Submit",Submitting:"Submitting",Username:"Username","Verify Contact":"Verify Contact",Verify:"Verify","We Emailed You":"We Emailed You","We Sent A Code":"We Sent A Code","We Texted You":"We Texted You","Your code is on the way. To log in, enter the code we emailed to":"Your code is on the way. To log in, enter the code we emailed to","Your code is on the way. To log in, enter the code we sent you":"Your code is on the way. To log in, enter the code we sent you","Your code is on the way. To log in, enter the code we texted to":"Your code is on the way. To log in, enter the code we texted to"};var OL={"Account recovery requires verified contact information":"La recuperaci\xF3n de la cuenta requiere informaci\xF3n de contacto verificada","Back to Sign In":"Volver a inicio de sesi\xF3n","Change Password":"Cambiar contrase\xF1a",Changing:"Cambiando",Code:"C\xF3digo","Code *":"C\xF3digo *","Confirm Password":"Confirmar contrase\xF1a","Confirm Sign Up":"Confirmar registro","Confirm SMS Code":"Confirmar el c\xF3digo de SMS","Confirm TOTP Code":"Confirmar c\xF3digo TOTP",Confirm:"Confirmar","Confirmation Code":"C\xF3digo de confirmaci\xF3n",Confirming:"Confirmando","Create a new account":"Crear una cuenta nueva","Create Account":"Crear cuenta","Creating Account":"Creando cuenta","Dismiss alert":"Descartar alerta",Email:"Email","Enter your code":"Ingrese el c\xF3digo","Enter your Email":"Escriba su Email","Enter your email":"Escriba su email","Enter your Password":"Escriba su Contrase\xF1a","Enter your phone number":"Ingrese el n\xFAmero de tel\xE9fono","Enter your username":"Ingrese el nombre de usuario","Forgot your password?":"\xBFOlvid\xF3 su contrase\xF1a?","Hide password":"Ocultar contrase\xF1a","It may take a minute to arrive":"Es posible que tarde un minuto en llegar",Loading:"Cargando","New password":"Nueva contrase\xF1a",or:"o",Password:"Contrase\xF1a","Phone Number":"N\xFAmero de tel\xE9fono","Resend Code":"Reenviar c\xF3digo","Reset your password":"Restablecer su contrase\xF1a","Reset your Password":"Restablecer su Contrase\xF1a","Send code":"Enviar c\xF3digo","Send Code":"Enviar c\xF3digo",Sending:"Enviando","Setup TOTP":"Configurar TOTP","Show password":"Mostrar contrase\xF1a","Sign in to your account":"Iniciar sesi\xF3n en tu cuenta","Sign In with Amazon":"Iniciar Sesi\xF3n con Amazon","Sign In with Apple":"Iniciar Sesi\xF3n con Apple","Sign In with Facebook":"Iniciar Sesi\xF3n con Facebook","Sign In with Google":"Iniciar Sesi\xF3n con Google","Sign in":"Iniciar sesi\xF3n","Sign In":"Iniciar Sesi\xF3n","Signing in":"Iniciando sesi\xF3n",Skip:"Omitir",Submit:"Enviar",Submitting:"Enviando",Username:"Nombre de usuario","Verify Contact":"Verificar contacto",Verify:"Verificar","We Emailed You":"Le hemos enviado un correo electr\xF3nico","We Sent A Code":"Hemos enviado un c\xF3digo","We Texted You":"Le hemos enviado un mensaje de texto","Your code is on the way. To log in, enter the code we emailed to":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que hemos enviado por correo electr\xF3nico a","Your code is on the way. To log in, enter the code we sent you":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que le hemos enviado","Your code is on the way. To log in, enter the code we texted to":"El c\xF3digo est\xE1 en camino. Para iniciar sesi\xF3n, escriba el c\xF3digo que hemos enviado por mensaje de texto a","An account with the given email already exists.":"Ya existe una cuenta con el correo ingresado.","Confirm a Code":"Confirmar un c\xF3digo","Confirm Sign In":"Confirmar inicio de sesi\xF3n","Forgot Password":"Olvid\xE9 mi contrase\xF1a","Incorrect username or password.":"Nombre de usuario o contrase\xF1a incorrecta","Enter your Family Name":"Escriba su apellido","Enter your Given Name":"Escriba su nombre","Given Name":"Nombre","Family Name":"Apellido","Reset Password":"Restablecer contrase\xF1a","Please confirm your Password":"Confirme su contrase\xF1a","Invalid password format":"Formato de contrase\xF1a inv\xE1lido","Invalid phone number format":"Formato de n\xFAmero de tel\xE9fono inv\xE1lido","Loading...":"Cargando...","New Password":"Nueva contrase\xF1a","Resend a Code":"Reenviar un c\xF3digo","Sign Out":"Cerrar sesi\xF3n","Sign Up with Amazon":"Crear cuenta con Amazon","Sign Up with Apple":"Crear cuenta con Apple","Sign Up with Facebook":"Crear cuenta con Facebook","Sign Up with Google":"Crear cuenta con Google","Sign Up":"Crear cuenta","User already exists":"El usuario ya existe","User does not exist":"El usuario no existe","Username/client id combination not found.":"El usuario no existe","Username cannot be empty":"El nombre de usuario no puede estar vac\xEDo","Your passwords must match":"Las contrase\xF1as deben coincidir","Password must have at least 8 characters":"La contrase\xF1a debe tener al menos 8 caracteres","Password did not conform with policy: Password must have uppercase characters":"La contrase\xF1a debe tener al menos un car\xE1cter en may\xFAscula","Password did not conform with policy: Password must have numeric characters":"La contrase\xF1a debe tener al menos un car\xE1cter num\xE9rico","Password did not conform with policy: Password must have symbol characters":"La contrase\xF1a debe tener al menos un s\xEDmbolo","Password did not conform with policy: Password must have lowercase characters":"La contrase\xF1a debe tener al menos un car\xE1cter en min\xFAsculas","Invalid verification code provided, please try again.":"C\xF3digo de verificaci\xF3n no v\xE1lido, int\xE9ntelo de nuevo.","Attempt limit exceeded, please try after some time.":"N\xFAmero m\xE1ximo de intentos excedido, por favor int\xE9ntelo de nuevo m\xE1s tarde.","A network error has occurred.":"Se ha producido un error de red."};var LL={"Account recovery requires verified contact information":"La r\xE9cup\xE9ration du compte n\xE9cessite des informations de contact v\xE9rifi\xE9es","Back to Sign In":"Retour \xE0 la connexion","Change Password":"Modifier le mot de passe",Changing:"Modification en cours",Code:"Code","Confirm Password":"Confirmez le mot de passe","Confirm Sign Up":"Confirmer l'inscription","Confirm SMS Code":"Confirmer le code SMS","Confirm TOTP Code":"Confirmer le code TOTP",Confirm:"Confirmer","Confirmation Code":"Code de confirmation",Confirming:"Confirmation","Create a new account":"Cr\xE9er un nouveau compte","Create Account":"Cr\xE9er un compte","Creating Account":"Cr\xE9ation d'un compte","Dismiss alert":"Supprimer l'alerte",Email:"Email","Enter your code":"Saisissez cotre code de confirmation","Enter your Email":"Saisissez votre adresse e-mail","Enter your email":"Saisissez votre adresse e-mail","Enter your phone number":"Saisissez votre num\xE9ro de t\xE9l\xE9phone","Enter your username":"Saisissez votre nom d'utilisateur","Forgot your password?":"Mot de passe oubli\xE9 ? ","Hide password":"Masquer le mot de passe","It may take a minute to arrive":"Cela peut prendre une minute",Loading:"Chargement en cours","New password":"Nouveau mot de passe",or:"ou",Password:"Mot de passe","Phone Number":"Num\xE9ro de t\xE9l\xE9phone","Resend Code":"Renvoyer le code","Reset your Password":"R\xE9initialiser votre mot de passe","Reset your password":"R\xE9initialisez votre mot de passe","Send code":"Envoyer le code","Send Code":"M'envoyer un code",Sending:"Envoi en cours","Setup TOTP":"Configuration de TOTP","Show password":"Afficher le mot de passe","Sign in to your account":"Connexion \xE0 votre compte","Sign In with Amazon":"Se connecter avec Amazon","Sign In with Apple":"Se connecter avec Apple","Sign In with Facebook":"Se connecter avec Facebook","Sign In with Google":"Se connecter avec Google","Sign in":"Se connecter","Sign In":"Se connecter","Signing in":"Connexion en cours",Skip:"Passer",Submit:"Soumettre",Submitting:"Envoi en cours",Username:"Nom d'utilisateur","Verify Contact":"V\xE9rifier le contact",Verify:"V\xE9rifier","We Sent A Code":"Nous avons envoy\xE9 un code","We Texted You":"Nous vous avons envoy\xE9 un SMS","Your code is on the way. To log in, enter the code we sent you":"Votre code est en cours d'envoi. Pour vous connecter, saisissez le code que nous vous avons envoy\xE9","Add your Profile":"Ajoutez votre profil","Add your Website":"Ajoutez votre site web","An account with the given email already exists.":"Un utilisateur avec cette adresse email existe d\xE9j\xE0.",Birthdate:"Date de naissance",Change:"Modifier","Confirm a Code":"Confirmer un code","Confirm Sign In":"Confirmer la connexion","Create account":"Cr\xE9er un compte","Enter your Birthdate":"Saisissez votre date de naissance","Enter your Confirmation Code":"Saisissez votre code de confirmation","Enter your Family Name":"Saisissez votre nom de famille","Enter your Given Name":"Saisissez votre pr\xE9nom","Enter your Middle Name":"Saisissez votre deuxi\xE8me pr\xE9nom","Enter your Name":"Saisissez votre nom","Enter your Nickname":"Saisissez votre surnom","Enter your Password":"Saisissez votre mot de passe","Enter your Phone Number":"Saisissez votre num\xE9ro de t\xE9l\xE9phone","Enter your Preferred Username":"Saisissez votre nom d'utilisateur","Enter your password":"Saisissez votre mot de passe","Given Name":"Pr\xE9nom","Family Name":"Nom de famille","Forgot Password":"Mot de passe oubli\xE9","Forgot Password?":"Mot de passe oubli\xE9 ?","Incorrect username or password.":"Identifiant ou mot de passe incorrect.","Have an account? ":"D\xE9j\xE0 un compte ? ",Hello:"Bonjour","Incorrect username or password":"Identifiant ou mot de passe incorrect","Invalid password format":"Format de mot de passe invalide","Invalid phone number format":"Format de num\xE9ro de t\xE9l\xE9phone invalide. Veuillez utiliser un format +12345678900","Loading...":"Chargement...","Lost your code? ":"Vous avez perdu votre code ? ","Network error":"Erreur r\xE9seau","New Password":"Nouveau mot de passe",Name:"Nom","No account? ":"Pas de compte ? ","Please confirm your Password":"Confirmez votre mot de passe","Preferred Username":"Nom d'utilisateur pr\xE9f\xE9r\xE9",Profile:"Profil","Resend a Code":"Renvoyer un code","Reset password":"R\xE9initialiser le mot de passe","Reset Password":"R\xE9initialiser le mot de passe",Send:"Envoyer","Sign In with AWS":"Se connecter avec AWS","Sign Out":"D\xE9connexion","Sign Up":"S'inscrire",SMS:"SMS","User already exists":"L'utilisateur existe d\xE9j\xE0","User does not exist":"L'utilisateur n'existe pas","Username cannot be empty":"Le nom d'utilisateur doit \xEAtre renseign\xE9","Username/client id combination not found.":"L'utilisateur n'existe pas","We Emailed You":"Nous vous avons envoy\xE9 un code","Your code is on the way. To log in, enter the code we emailed to":"Votre code est en route. Pour vous connecter entrez le code re\xE7u sur cette adresse email","Your code is on the way. To log in, enter the code we texted to":"Votre code est en route. Pour vous connecter entrez le code re\xE7u sur ce num\xE9ro de t\xE9l\xE9phone","Your passwords must match":"Vos mots de passe doivent \xEAtre identiques","It may take a minute to arrive.":"Cela peut prendre quelques minutes.",Website:"Site web","Password must have at least 8 characters":"Le mot de passe doit comporter au moins 8 caract\xE8res","Password did not conform with policy: Password must have uppercase characters":"Le mot de passe doit comporter des caract\xE8res majuscules","Password did not conform with policy: Password must have numeric characters":"Le mot de passe doit comporter des caract\xE8res num\xE9riques","Password did not conform with policy: Password must have symbol characters":"Le mot de passe doit comporter des symboles","Password did not conform with policy: Password must have lowercase characters":"Le mot de passe doit comporter des caract\xE8res minuscules","Invalid verification code provided, please try again.":"Code de v\xE9rification invalide, veuillez r\xE9essayer.","Attempt limit exceeded, please try after some time.":"Nombre maximum de tentatives d\xE9pass\xE9, veuillez r\xE9essayer plus tard.","A network error has occurred.":"Une erreur de r\xE9seau s'est produite."};var zL={"Account recovery requires verified contact information":"Il ripristino dell'account richiede informazioni di contatto verificate","Back to Sign In":"Torna alla schermata di accesso","Change Password":"Cambia la password",Changing:"Modifica in corso",Code:"Codice","Confirm Password":"Conferma la password","Confirm Sign Up":"Conferma registrazione","Confirm SMS Code":"Conferma codice SMS","Confirm TOTP Code":"Conferma codice TOTP",Confirm:"Conferma","Confirmation Code":"Codice di verifica",Confirming:"Conferma in corso","Create a new account":"Crea un nuovo account","Create Account":"Crea Account","Creating Account":"Creazione account in corso","Dismiss alert":"Ignora l'avviso",Email:"Email","Enter your code":"Inserisci il tuo codice","Enter your Email":"Inserisci la tua e-mail","Enter your phone number":'Inserisci il tuo numero di telefono"',"Enter your username":"Inserisci il tuo nome utente","Forgot your password?":"Password dimenticata?","Hide password":"Nascondi password","It may take a minute to arrive":"L'arrivo potrebbe richiedere qualche minuto",Loading:"Caricamento in corso","New password":"Nuova password",or:"oppure",Password:"Password","Phone Number":"Numero di telefono","Resend Code":"Invia nuovamente il codice","Reset your Password":"Reimposta la tua Password","Reset your password":"Reimposta la tua password","Send code":"Invia codice","Send Code":"Invia codice",Sending:"Invio in corso","Setup TOTP":"Configura TOTP","Show password":"Mostra password","Sign in to your account":"Accedi al tuo account","Sign In with Amazon":"Accedi con Amazon","Sign In with Apple":"Accedi con Apple","Sign In with Facebook":"Accedi con Facebook","Sign In with Google":"Accedi con Google","Sign in":"Accedi","Sign In":"Accedi","Signing in":"Accesso in corso",Skip:"Salta",Submit:"Invia",Submitting:"Invio in corso",Username:"Nome utente","Verify Contact":"Verifica contatto",Verify:"Verifica","We Emailed You":"Ti abbiamo inviato un'e-mail","We Sent A Code":"Ti abbiamo inviato un codice","We Texted You":"Ti abbiamo inviato un SMS","Your code is on the way. To log in, enter the code we emailed to":"Il codice \xE8 in arrivo. Per effettuare l'accesso, immetti il codice che ti abbiamo inviato via e-mail","Your code is on the way. To log in, enter the code we sent you":"Il codice \xE8 in arrivo. Per accedere, immetti il codice che ti abbiamo inviato","Your code is on the way. To log in, enter the code we texted to":"Il codice \xE8 in arrivo. Per accedere, immetti il codice che abbiamo inviato tramite SMS","An account with the given email already exists.":"Questa email \xE8 gi\xE0 utilizzata da un altro account.","Confirm a Code":"Conferma un codice","Confirm Sign In":"Conferma l'accesso","Create account":"Crea account","Enter your password":"Inserisci la tua password","Forgot Password?":"Password dimenticata?","Have an account? ":"Gi\xE0 registrato?","Incorrect username or password":"Nome utente o password errati","Invalid password format":"Formato della password non valido","Invalid phone number format":"Formato del numero di telefono non valido","Lost your code?":"Codice smarrito?","New Password":"Nuova password","No account? ":"Non hai un account?","Password attempts exceeded":"Il numero massimo di tentativi di accesso falliti \xE8 stato raggiunto","Reset password":"Reimposta password","Sign Out":"Esci","Sign Up":"Registrati","User already exists":"Utente gi\xE0 esistente","User does not exist":"Utente inesistente","Username cannot be empty":"Il nome utente non pu\xF2 essere vuoto"};var UL={"Account recovery requires verified contact information":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u5FA9\u65E7\u306B\u306F\u78BA\u8A8D\u6E08\u307F\u306E\u9023\u7D61\u5148\u304C\u5FC5\u8981\u3067\u3059","Back to Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3\u306B\u623B\u308B","Change Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5909\u3048\u308B ",Changing:"\u5909\u66F4\u4E2D",Code:"\u30B3\u30FC\u30C9","Confirm Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u78BA\u8A8D","Confirm Sign Up":"\u767B\u9332\u3059\u308B","Confirm SMS Code":"SMS \u30B3\u30FC\u30C9\u3092\u78BA\u8A8D","Confirm TOTP Code":"TOTP \u30B3\u30FC\u30C9\u3092\u78BA\u8A8D",Confirm:"\u78BA\u5B9A","Confirmation Code":"\u78BA\u8A8D\u30B3\u30FC\u30C9",Confirming:"\u78BA\u8A8D\u4E2D","Create a new account":"\u65B0\u3057\u3044\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B","Create Account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B","Creating Account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u4F5C\u6210\u4E2D","Dismiss alert":"\u30A2\u30E9\u30FC\u30C8\u3092\u9589\u3058\u308B",Email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9","Enter your code":"\u30B3\u30FC\u30C9\u3092\u5165\u529B","Enter your Email":"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u3092\u5165\u529B","Enter your phone number":"\u96FB\u8A71\u756A\u53F7\u3092\u5165\u529B","Enter your username":"\u30E6\u30FC\u30B6\u30FC\u540D\u3092\u5165\u529B ","Enter your Username":"\u30E6\u30FC\u30B6\u30FC\u540D\u3092\u5165\u529B ","Forgot your password?":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5FD8\u308C\u307E\u3057\u305F\u304B\uFF1F ","Hide password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u975E\u8868\u793A","It may take a minute to arrive":"\u5230\u7740\u3059\u308B\u307E\u3067\u306B 1 \u5206\u304B\u304B\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059",Loading:"\u30ED\u30FC\u30C9\u4E2D","New password":"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9",or:"\u53C8\u306F",Password:"\u30D1\u30B9\u30EF\u30FC\u30C9 ","Phone Number":"\u96FB\u8A71\u756A\u53F7","Resend Code":"\u30B3\u30FC\u30C9\u3092\u518D\u9001\u4FE1","Reset your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8","Reset your password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8\u3059\u308B","Send code":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1","Send Code":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1",Sending:"\u9001\u4FE1\u4E2D","Setup TOTP":"TOTP \u3092\u30BB\u30C3\u30C8\u30A2\u30C3\u30D7","Show password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u8868\u793A","Sign in to your account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u30B5\u30A4\u30F3\u30A4\u30F3 ","Sign In with Amazon":"Amazon\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Apple":"Apple \u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Facebook":"Facebook\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In with Google":"Google\u3067\u30B5\u30A4\u30F3\u30A4\u30F3","Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3 ","Sign in":"\u30B5\u30A4\u30F3\u30A4\u30F3","Signing in":"\u30B5\u30A4\u30F3\u30A4\u30F3\u4E2D",Skip:"\u30B9\u30AD\u30C3\u30D7",Submit:"\u9001\u4FE1",Submitting:"\u9001\u4FE1\u4E2D",Username:"\u30E6\u30FC\u30B6\u30FC\u540D ","Verify Contact":"\u9023\u7D61\u5148\u3092\u78BA\u8A8D",Verify:"\u78BA\u8A8D","We Sent A Code":"\u30B3\u30FC\u30C9\u304C\u9001\u4FE1\u3055\u308C\u307E\u3057\u305F","We Texted You":"\u30C6\u30AD\u30B9\u30C8\u304C\u9001\u4FE1\u3055\u308C\u307E\u3057\u305F","Your code is on the way. To log in, enter the code we sent you":"\u30B3\u30FC\u30C9\u304C\u9014\u4E2D\u3067\u3059\u3002\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u9001\u4FE1\u3057\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044","An account with the given email already exists.":"\u5165\u529B\u3055\u308C\u305F\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u65E2\u306B\u5B58\u5728\u3057\u307E\u3059","Confirm a Code":"\u30B3\u30FC\u30C9\u3092\u78BA\u8A8D","Confirm Sign In":"\u30B5\u30A4\u30F3\u30A4\u30F3\u3059\u308B","Create account":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u308B ","Enter your password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B ","Enter your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B","Please confirm your Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5165\u529B","Forgot Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u5FD8\u308C\u305F ","Have an account? ":"\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6301\u3063\u3066\u3044\u307E\u3059\u304B\uFF1F","Incorrect username or password":"\u30E6\u30FC\u30B6\u30FC\u540D\u304B\u30D1\u30B9\u30EF\u30FC\u30C9\u304C\u7570\u306A\u308A\u307E\u3059 ","Invalid password format":"\u30D1\u30B9\u30EF\u30FC\u30C9\u306E\u5F62\u5F0F\u304C\u7121\u52B9\u3067\u3059 ","Invalid phone number format":`\u4E0D\u6B63\u306A\u96FB\u8A71\u756A\u53F7\u306E\u5F62\u5F0F\u3067\u3059\u3002
+12345678900 \u306E\u5F62\u5F0F\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044`,"It may take a minute to arrive.":"\u30B3\u30FC\u30C9\u3092\u53D7\u4FE1\u3059\u308B\u307E\u3067\u6570\u5206\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002","Lost your code? ":"\u30B3\u30FC\u30C9\u3092\u5931\u304F\u3057\u307E\u3057\u305F\u304B\uFF1F","New Password":"\u65B0\u3057\u3044\u30D1\u30B9\u30EF\u30FC\u30C9","No account? ":"\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u7121\u3044\u3068\u304D ","Password attempts exceeded":"\u30B5\u30A4\u30F3\u30A4\u30F3\u306E\u8A66\u884C\u56DE\u6570\u304C\u4E0A\u9650\u306B\u9054\u3057\u307E\u3057\u305F","Reset password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8 ","Reset Password":"\u30D1\u30B9\u30EF\u30FC\u30C9\u3092\u30EA\u30BB\u30C3\u30C8","Sign Out":"\u30B5\u30A4\u30F3\u30A2\u30A6\u30C8 ","Sign Up":"\u767B\u9332 ","User already exists":"\u65E2\u306B\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3057\u3066\u3044\u307E\u3059 ","User does not exist":"\u30E6\u30FC\u30B6\u30FC\u304C\u5B58\u5728\u3057\u307E\u305B\u3093 ","Username cannot be empty":"\u30E6\u30FC\u30B6\u30FC\u540D\u306F\u5165\u529B\u5FC5\u9808\u3067\u3059","We Emailed You":"\u30B3\u30FC\u30C9\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F","Your code is on the way. To log in, enter the code we emailed to":"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u30E1\u30FC\u30EB\u306B\u8A18\u8F09\u3055\u308C\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u9001\u4FE1\u5148:","Your code is on the way. To log in, enter the code we texted to":"\u30ED\u30B0\u30A4\u30F3\u3059\u308B\u306B\u306F\u3001\u30C6\u30AD\u30B9\u30C8\u30E1\u30C3\u30BB\u30FC\u30B8\u306B\u8A18\u8F09\u3055\u308C\u305F\u30B3\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044\u3002\u9001\u4FE1\u5148:"};var BL={"Account recovery requires verified contact information":"\uACC4\uC815 \uBCF5\uAD6C\uB97C \uC704\uD574 \uC5F0\uB77D\uCC98 \uD655\uC778\uC774 \uD544\uC694\uD569\uB2C8\uB2E4","Back to Sign In":"\uB85C\uADF8\uC778\uC73C\uB85C \uB3CC\uC544\uAC00\uAE30","Change Password":"\uBE44\uBC00\uBC88\uD638 \uBCC0\uACBD\uD558\uAE30",Changing:"\uBCC0\uACBD\uC911",Code:"\uCF54\uB4DC","Confirm Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uD655\uC778","Confirm Sign Up":"\uD68C\uC6D0\uAC00\uC785 \uD655\uC778","Confirm SMS Code":"\uD734\uB300\uD3F0 \uBCF8\uC778 \uD655\uC778","Confirm TOTP Code":"TOTP \uC778\uC99D\uBC88\uD638 \uD655\uC778",Confirm:"\uD655\uC778","Confirmation Code":"\uC778\uC99D\uBC88\uD638",Confirming:"\uD655\uC778\uC911","Create a new account":"\uD68C\uC6D0\uAC00\uC785","Create Account":"\uD68C\uC6D0\uAC00\uC785","Creating Account":"\uD68C\uC6D0\uAC00\uC785\uC911","Dismiss alert":"\uC54C\uB9BC \uBB34\uC2DC",Email:"\uC774\uBA54\uC77C","Enter your Birthdate":"\uC0DD\uB144\uC6D4\uC77C \uC785\uB825","Enter your code":"\uC778\uC99D\uBC88\uD638\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694","Enter your Confirmation Code":"\uD655\uC778 \uCF54\uB4DC \uC785\uB825","Enter your Email":"\uC774\uBA54\uC77C \uC785\uB825","Enter your Family Name":"\uC131 \uC785\uB825","Enter your Given Name":"\uC0AC\uC6A9\uC7A5 \uC774\uB984 \uC785\uB825","Enter your Name":"\uC774\uB984 \uC785\uB825","Enter your Nickname":"\uB2C9\uB124\uC784 \uC785\uB825","Enter your Password":"\uBE44\uBC00\uBC88\uD638 \uC785\uB825","Enter your phone number":"\uC804\uD654\uBC88\uD638 \uC785\uB825","Enter your Preferred Username":"\uC120\uD638\uD558\uB294 \uC544\uC774\uB514 \uC785\uB825","Enter your username":"\uC544\uC774\uB514\uB97C \uC785\uB825\uD574\uC8FC\uC138\uC694","Forgot password?":"\uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694?","Hide password":"\uBE44\uBC00\uBC88\uD638 \uC228\uAE30\uAE30","It may take a minute to arrive":"\uB3C4\uCC29\uD558\uB294 \uB370 1\uBD84 \uC815\uB3C4 \uAC78\uB9B4 \uC218 \uC788\uC2B5\uB2C8\uB2E4",Loading:"\uB85C\uB529\uC911","New password":"\uC0C8 \uBE44\uBC00\uBC88\uD638",or:"\uB610\uB294",Password:"\uBE44\uBC00\uBC88\uD638","Phone Number":"\uC804\uD654\uBC88\uD638","Please confirm your Password":"\uBE44\uBC00\uBC88\uD638\uB97C \uD655\uC778\uD574 \uC8FC\uC138\uC694.","Resend Code":"\uC778\uC99D\uBC88\uD638 \uC7AC\uC804\uC1A1","Reset your password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815","Reset your Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815","Send code":"\uC778\uC99D\uCF54\uB4DC \uBCF4\uB0B4\uAE30","Send Code":"\uCF54\uB4DC \uC804\uC1A1",Sending:"\uC804\uC1A1\uC911","Setup TOTP":"TOTP \uC124\uC815\uD558\uAE30","Show password":"\uBE44\uBC00\uBC88\uD638 \uBCF4\uC774\uAE30","Sign in to your account":"\uB85C\uADF8\uC778","Sign In with Amazon":"Amazon \uB85C\uADF8\uC778","Sign In with Apple":"Apple \uB85C\uADF8\uC778","Sign In with Facebook":"Facebook \uB85C\uADF8\uC778","Sign In with Google":"Google \uB85C\uADF8\uC778","Sign in":"\uB85C\uADF8\uC778","Sign In":"\uB85C\uADF8\uC778","Signing in":"\uB85C\uADF8\uC778\uC911",Skip:"\uB2E4\uC74C\uC5D0 \uD558\uAE30",Submit:"\uD655\uC778",Submitting:"\uD655\uC778\uC911",Username:"\uC544\uC774\uB514","Verify Contact":"\uC5F0\uB77D\uCC98 \uD655\uC778",Verify:"\uC778\uC99D","We Emailed You":"\uC774\uBA54\uC77C\uC744 \uBCF4\uB0C4","We Sent A Code":"\uCF54\uB4DC\uB97C \uBCF4\uB0C4","We Texted You":"\uBB38\uC790 \uBA54\uC2DC\uC9C0\uB97C \uBCF4\uB0C4","Your code is on the way. To log in, enter the code we emailed to":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uC774\uBA54\uC77C\uB85C \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694","Your code is on the way. To log in, enter the code we sent you":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694","Your code is on the way. To log in, enter the code we texted to":"\uCF54\uB4DC\uAC00 \uC804\uC1A1 \uC911\uC785\uB2C8\uB2E4. \uB85C\uADF8\uC778\uD558\uB824\uBA74 \uBB38\uC790 \uBA54\uC2DC\uC9C0\uB85C \uC804\uC1A1\uD55C \uCF54\uB4DC\uB97C \uC785\uB825\uD558\uC138\uC694",Birthdate:"\uC0DD\uB144\uC6D4\uC77C","Family Name":"\uC131","Forgot your password?":"\uBE44\uBC00\uBC88\uD638\uB97C \uC78A\uC73C\uC168\uB098\uC694?","Given Name":"\uC774\uB984",Name:"\uC131\uD568",Nickname:"\uB2C9\uB124\uC784","Preferred Username":"\uB2C9\uB124\uC784",Profile:"\uD504\uB85C\uD544","Reset Password":"\uBE44\uBC00\uBC88\uD638 \uC7AC\uC124\uC815",Website:"\uC6F9\uC0AC\uC774\uD2B8"};var VL={"Account recovery requires verified contact information":"Gjenoppretting av konto krever verifisert kontaktinformajson","Add your Profile":"Legg til profilen din","Add your Website":"Legg til nettsiden din","Back to Sign In":"Tilbake til innlogging","Change Password":"Bytt passord",Changing:"Endre",Code:"Kode","Confirm Password":"Bekreft passordet","Confirm Sign Up":"Bekreft registrering","Confirm SMS Code":"Bekreft SMS-kode","Confirm TOTP Code":"Bekreft TOTP-kode",Confirm:"Bekreft","Confirmation Code":"Bekreftelseskode",Confirming:"Bekrefter","Create a new account":"Opprett en ny konto","Create Account":"Opprett konto","Creating Account":"Oppretter konto","Dismiss alert":"Avvis varsel",Email:"E-post","Enter your Birthdate":"Skriv inn f\xF8dselsdatoen din","Enter your code":"Skriv inn koden din","Enter your Confirmation Code":"Skriv inn bekreftelseskoden din","Enter your Email":"Skriv inn e-postadressen din","Enter your Family Name":"Skriv inn etternavnet ditt","Enter your Given Name":"Skriv inn fornavnet ditt","Enter your Middle Name":"Skriv inn mellomnavnet ditt","Enter your Name":"Skriv inn navnet ditt","Enter your Nickname":"Skriv inn kallenavnet ditt","Enter your Password":"Skriv inn passordet ditt","Enter your phone number":"Skriv inn telefonnummeret ditt","Enter your Preferred Username":"Skriv inn det foretrukne brukernavnet ditt","Enter your username":"Skriv inn brukernavnet ditt","Forgot password?":"Glemt passord?","Forgot your password?":"Glemt passordet ditt?","Hide password":"Skjul passordet","It may take a minute to arrive":"Det kan ta et minutt for \xE5 komme frem",Loading:"Laster inn","New password":"Nytt passord",or:"eller",Password:"Passord","Phone Number":"Telefonnummer","Please confirm your Password":"Vennligst bekreft passordet ditt","Resend Code":"Send koden p\xE5 nytt","Reset your password":"Nullstill passordet ditt","Reset your Password":"Nullstill passordet ditt","Send code":"Send kode","Send Code":"Send kode",Sending:"Sender","Setup TOTP":"Konfigurer TOTP","Show password":"Vis passordet","Sign in to your account":"Logg inn p\xE5 kontoen din","Sign In with Amazon":"Logg inn med Amazon","Sign In with Apple":"Logg inn med Apple","Sign In with Facebook":"Logg inn med Facebook","Sign In with Google":"Logg inn med Google","Sign in":"Logg inn","Sign In":"Logg inn","Signing in":"Logger inn",Skip:"Hopp over",Submit:"Send inn",Submitting:"Sender inn",Username:"Brukernavn","Verify Contact":"Bekreft kontakt",Verify:"Bekreft","We Emailed You":"Vi sendte deg en e-post","We Sent A Code":"Vi sendte en kode","We Texted You":"Vi sendte deg en tekstmelding","Your code is on the way. To log in, enter the code we emailed to":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte e-post til","Your code is on the way. To log in, enter the code we sent you":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte deg","Your code is on the way. To log in, enter the code we texted to":"Koden din er p\xE5 vei. For \xE5 logge inn, skriv inn koden vi sendte tekstmelding til","An account with the given email already exists.":"Det finnes allerede en konto med denne e-postadressen","Confirm a Code":"Bekreft koden","Confirm Sign In":"Bekreft innlogging","Create account":"Opprett konto","Enter your password":"Skriv inn passordet ditt","Forgot Password":"Glemt passordet","Have an account? ":"Har en konto allerede? ","Incorrect username or password":"Feil brukernavn eller passord","Invalid password format":"Ugyldig passordformat","Invalid phone number format":"Ugyldig telefonnummerformat","Lost your code? ":"Mistet koden? ","New Password":"Nytt passord","No account? ":"Ingen konto? ","Password attempts exceeded":"For mange mislykkede passordfors\xF8k","Reset password":"Nullstill passord","Sign Out":"Logg ut","Sign Up":"Registrering","User already exists":"Brukeren finnes allerede","User does not exist":"Brukeren finnes ikke","Username cannot be empty":"Brukernavnet kan ikke v\xE6re tomt"};var jL={"Account recovery requires verified contact information":"Accountherstel vereist geverifieerde contactgegevens","Back to Sign In":"Terug naar inloggen","Change Password":"Wachtwoord wijzigen",Changing:"Wordt aangepast",Code:"Code","Confirm Password":"Bevestig Wachtwoord","Confirm Sign Up":"Bevestig inschrijving","Confirm SMS Code":"Bevestig SMS Code","Confirm TOTP Code":"Bevestig TOTP Code",Confirm:"Bevestig","Confirmation Code":"Bevestigingscode",Confirming:"Bevestigen","Create a new account":"Nieuw account aanmaken","Create Account":"Account aanmaken","Creating Account":"Account wordt aangemaakt","Dismiss alert":"Waarschuwing sluiten",Email:"E-mail","Enter your code":"Vul je code in","Enter your Email":"Vul je e-mail in","Enter your Password":"Vul je wachtwoord in","Enter your phone number":"Vul je telefoonnummer in","Enter your username":"Vul je gebruikersnaam in","Enter your Username":"Vul je gebruikersnaam in","Forgot your password?":"Wachtwoord vergeten? ","Hide password":"Verberg wachtwoord","It may take a minute to arrive":"Het kan even duren voordat deze aankomt",Loading:"Laden","New password":"Nieuw wachtwoord","New Password":"Nieuw Wachtwoord",or:"of",Password:"Wachtwoord","Phone Number":"Telefoonnummer","Please confirm your Password":"Bevestig je wachtwoord","Resend Code":"Verstuur code nogmaals","Reset Password":"Wachtwoord resetten","Reset your password":"Reset je wachtwoord","Reset your Password":"Wachtwoord resetten","Send code":"Verstuur code","Send Code":"Verstuur Code",Sending:"Versturen","Setup TOTP":"TOTP Instellingen","Show password":"Toon wachtwoord","Sign in to your account":"Inloggen op je account","Sign In with Amazon":"Inloggen met Amazon","Sign In with Apple":"Inloggen met Apple","Sign In with Facebook":"Inloggen met Facebook","Sign In with Google":"Inloggen met Google","Sign in":"Inloggen","Sign In":"Inloggen","Signing in":"Inloggen",Skip:"Overslaan",Submit:"Versturen",Submitting:"Wordt verstuurd",Username:"Gebruikersnaam","Verify Contact":"Verifieer Contact",Verify:"Verifieer","We Emailed You":"We hebben u een e-mail gestuurd","We Sent A Code":"We hebben een code gestuurd","We Texted You":"We hebben u een sms gestuurd","Your code is on the way. To log in, enter the code we emailed to":"Uw code is onderweg. Om in te loggen, voer de code in die we gemaild hebben naar","Your code is on the way. To log in, enter the code we sent you":"Uw code is onderweg. Om in te loggen, voer de code in die we u hebben gestuurd","Your code is on the way. To log in, enter the code we texted to":"Uw code is onderweg. Om in te loggen, voer de code in die we hebben gestuurd naar","Your passwords must match":"Je wachtwoorden moeten overeenkomen"};var $L={"Account recovery requires verified contact information":"Odzyskanie konta wymaga zweryfikowanych danych kontaktowych","Back to Sign In":"Powr\xF3t do logowania","Change Password":"Zmie\u0144 has\u0142o",Changing:"Zmienianie",Code:"Kod","Confirm Password":"Potwierd\u017A Has\u0142o","Confirm Sign Up":"Potwierd\u017A rejestracj\u0119","Confirm SMS Code":"Potwierd\u017A kod SMS","Confirm TOTP Code":"Potwierd\u017A has\u0142o jednorazowe",Confirm:"Potwierd\u017A","Confirmation Code":"Kod potwierdzenia",Confirming:"Potwierdzanie","Create a new account":"Utw\xF3rz nowe konto","Create Account":"Utw\xF3rz konto","Creating Account":"Tworzenie konta","Dismiss alert":"Odrzu\u0107 alert",Email:"E-mail","Enter your code":"Wprowad\u017A sw\xF3j kod","Enter your Email":"Wpisz sw\xF3j adres e-mail","Enter your phone number":"Wpisz sw\xF3j numer telefonu","Enter your username":"Wprowad\u017A swoj\u0105 nazw\u0119 u\u017Cytkownika","Forgot your password?":"Zapomnia\u0142e\u015B has\u0142a? ","Hide password":"Ukryj has\u0142o","It may take a minute to arrive":"Mo\u017Ce to chwil\u0119 potrwa\u0107",Loading:"\u0141adowanie","New password":"Nowe has\u0142o",or:"albo",Password:"Has\u0142o","Phone Number":"Numer telefonu","Resend Code":"Wy\u015Blij kod ponownie","Reset your password":"Zresetuj swoje has\u0142o","Reset your Password":"Zresetuj swoje has\u0142o","Send code":"Wy\u015Blij kod","Send Code":"Zresetuj has\u0142o",Sending:"Wysy\u0142anie","Setup TOTP":"Konfiguruj TOTP","Show password":"Poka\u017C has\u0142o","Sign in to your account":"Zaloguj si\u0119 na swoje konto","Sign In with Amazon":"Zaloguj z Amazon","Sign In with Apple":"Zaloguj z Apple","Sign In with Facebook":"Zaloguj z Facebook","Sign In with Google":"Zaloguj z Google","Sign In":"Logowanie","Sign in":"Zaloguj","Signing in":"Logowanie",Skip:"Pomi\u0144",Submit:"Wy\u015Blij",Submitting:"Wysy\u0142anie",Username:"Nazwa u\u017Cytkownika","Verify Contact":"Weryfikacja danych kontaktowych",Verify:"Zweryfikuj",Birthdate:"Data urodzenia","Family Name":"Nazwisko","Given Name":"Pierwsze imi\u0119","Middle Name":"Drugie imi\u0119",Name:"Imi\u0119 i nazwisko",Nickname:"Pseudonim","Preferred Username":"Preferowana nazwa u\u017Cytkownika",Profile:"Profil",Website:"Strona internetowa","We Emailed You":"Wys\u0142ali\u015Bmy Ci wiadomo\u015B\u0107 e-mail","We Sent A Code":"Wys\u0142ali\u015Bmy kod","We Texted You":"Wys\u0142ali\u015Bmy Ci wiadomo\u015B\u0107 SMS","Your code is on the way. To log in, enter the code we emailed to":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A kod wys\u0142any na adres e-mail","Your code is on the way. To log in, enter the code we sent you":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A wys\u0142any do Ciebie kod","Your code is on the way. To log in, enter the code we texted to":"Tw\xF3j kod zosta\u0142 wys\u0142any. Aby si\u0119 zalogowa\u0107, wprowad\u017A kod wys\u0142any do Ciebie w wiadomo\u015Bci SMS pod numer"};var qL={"Account recovery requires verified contact information":"A recupera\xE7\xE3o da conta requer informa\xE7\xF5es de contato verificadas","Add your Profile":"Adicione seu Perfil","Add your Website":"Adicione seu Website","Back to Sign In":"Voltar para Entrar","Change Password":"Mudar senha",Changing:"Mudando",Code:"C\xF3digo","Confirm Password":"Confirme a Senha","Confirm Sign Up":"Confirmar inscri\xE7\xE3o","Confirm SMS Code":"Confirme o c\xF3digo SMS","Confirm MFA Code":"Confirme o c\xF3digo MFA","Confirm TOTP Code":"Confirme o c\xF3digo TOTP",Confirm:"confirme","Confirmation Code":"C\xF3digo de confirma\xE7\xE3o",Confirming:"Confirmando","Create a new account":"Criar uma nova conta","Create Account":"Criar Conta","Creating Account":"Criando conta","Dismiss alert":"Descartar alerta",Email:"O email","Enter your Birthdate":"Digite sua Data de Nascimento","Enter your code":"Insira seu c\xF3digo","Enter your Confirmation Code":"Digite seu c\xF3digo de confirma\xE7\xE3o","Enter your Email":"Digite seu e-mail","Enter your Family Name":"Digite seu Sobrenome","Enter your Given Name":"Digite seu Primeiro Nome","Enter your Middle Name":"Digite seu Nome do Meio","Enter your Name":"Digite seu Nome","Enter your Nickname":"Digite seu Apelido","Enter your Password":"Digite sua senha","Enter your phone number":"Digite seu n\xFAmero de telefone","Enter your Preferred Username":"Digite seu nome de usu\xE1rio preferido","Enter your username":"Digite seu nome de usu\xE1rio","Forgot password?":"Esqueceu a senha?","Forgot your password?":"Esqueceu sua senha?","Hide password":"Esconder a senha","It may take a minute to arrive":"Pode levar um minuto para chegar",Loading:"Carregando","New password":"Nova Senha",or:"ou",Password:"Senha","Phone Number":"N\xFAmero de telefone","Please confirm your Password":"Por favor confirme sua Senha","Resend Code":"Reenviar c\xF3digo","Reset your password":"Redefina sua senha","Reset your Password":"Redefina sua senha","Send code":"Enviar c\xF3digo","Send Code":"Enviar c\xF3digo",Sending:"Enviando","Setup TOTP":"Configurar TOTP","Show password":"Mostrar senha","Sign in to your account":"Fa\xE7a login em sua conta","Sign In with Amazon":"Entrar com a Amazon","Sign In with Apple":"Entrar com a Apple","Sign In with Facebook":"Entrar com o Facebook","Sign In with Google":"Fa\xE7a login no Google","Sign in":"Entrar","Sign In":"Entrar","Signing in":"Entrando",Skip:"Pular",Submit:"Enviar",Submitting:"Enviando",Username:"Nome do usu\xE1rio","Verify Contact":"Verificar contato",Verify:"Verificar","We Emailed You":"Enviamos um e-mail para voc\xEA","We Sent A Code":"Enviamos um c\xF3digo","We Texted You":"Enviamos um SMS para voc\xEA","Your code is on the way. To log in, enter the code we emailed to":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo para o qual enviamos um e-mail","Your code is on the way. To log in, enter the code we sent you":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo que enviamos para voc\xEA","Your code is on the way. To log in, enter the code we texted to":"Seu c\xF3digo est\xE1 a caminho. Para fazer login, insira o c\xF3digo para o qual enviamos uma mensagem de texto","An account with the given email already exists.":"J\xE1 existe uma conta com o email utilizado.","Confirm a Code":"Confirmar um C\xF3digo","Confirm Sign In":"Confirmar In\xEDcio de Sess\xE3o","Forgot Password":"Esqueci Minha Senha","Incorrect username or password.":"Nome de usu\xE1rio ou senha incorreta","Invalid password format":"Formato de senha inv\xE1lido","Invalid phone number format":"Formato de n\xFAmero de telefone inv\xE1lido","Loading...":"Carregando...","New Password":"Nova Senha","Resend a Code":"Reenviar um C\xF3digo","Sign Out":"Sair","Sign Up with Amazon":"Criar Conta com a Amazon","Sign Up with Apple":"Criar Conta com a Apple","Sign Up with Facebook":"Criar Conta com o Facebook","Sign Up with Google":"Criar Conta com o Google","Sign Up":"Criar Conta","User already exists":"Usu\xE1rio j\xE1 existe","User does not exist":"Usu\xE1rio n\xE3o existe","Username cannot be empty":"Nome de usu\xE1rio n\xE3o pode estar vazio","Your passwords must match":"Suas senhas devem ser iguais"};var HL={"Account recovery requires verified contact information":"\u8D26\u6237\u6062\u590D\u9700\u8981\u9A8C\u8BC1\u8FC7\u7684\u8054\u7CFB\u65B9\u5F0F","Back to Sign In":"\u56DE\u5230\u767B\u5F55","Change Password":"\u66F4\u6539\u5BC6\u7801",Changing:"\u6B63\u5728\u4FEE\u6539",Code:"\u786E\u8BA4\u7801","Confirm Password":"\u786E\u8BA4\u5BC6\u7801","Confirm Sign Up":"\u786E\u8BA4\u6CE8\u518C","Confirm SMS Code":"\u786E\u8BA4\u77ED\u4FE1\u9A8C\u8BC1\u7801","Confirm TOTP Code":"\u786E\u8BA4 TOTP \u4EE3\u7801",Confirm:"\u786E\u8BA4","Confirmation Code":"\u786E\u8BA4\u7801",Confirming:"\u6B63\u5728\u786E\u8BA4","Create a new account":"\u521B\u5EFA\u65B0\u8D26\u6237","Create Account":"\u521B\u5EFA\u8D26\u6237","Creating Account":"\u6B63\u5728\u521B\u5EFA\u8D26\u6237","Dismiss alert":"\u5173\u95ED\u8B66\u62A5",Email:"\u90AE\u7BB1","Enter your code":"\u8F93\u5165\u9A8C\u8BC1\u7801","Enter your Email":"\u8F93\u5165\u7535\u5B50\u90AE\u4EF6","Enter your phone number":"\u8F93\u5165\u7535\u8BDD\u53F7\u7801","Enter your username":"\u8F93\u5165\u7528\u6237\u540D","Forgot your password?":"\u5FD8\u8BB0\u5BC6\u7801\u4E86\uFF1F","Hide password":"\u9690\u85CF\u5BC6\u7801","It may take a minute to arrive":"\u53EF\u80FD\u9700\u8981\u4E00\u5206\u949F\u624D\u80FD\u5230\u8FBE",Loading:"\u6B63\u5728\u52A0\u8F7D","New password":"\u65B0\u5BC6\u7801",or:"\u6216\u8005",Password:"\u5BC6\u7801","Phone Number":"\u7535\u8BDD","Resend Code":"\u91CD\u53D1\u9A8C\u8BC1\u7801","Reset your password":"\u91CD\u7F6E\u5BC6\u7801","Reset your Password":"\u91CD\u7F6E\u5BC6\u7801","Send Code":"\u53D1\u9001\u786E\u8BA4\u7801","Send code":"\u53D1\u9001\u9A8C\u8BC1\u7801",Sending:"\u6B63\u5728\u53D1\u9001","Setup TOTP":"\u8BBE\u7F6E TOTP","Show password":"\u663E\u793A\u5BC6\u7801","Sign in to your account":"\u767B\u5F55\u8D26\u6237","Sign In with Amazon":"\u901A\u8FC7 Amazon \u767B\u5F55","Sign In with Apple":"\u901A\u8FC7 Apple \u767B\u5F55","Sign In with Facebook":"\u901A\u8FC7 Facebook \u767B\u5F55","Sign In with Google":"\u901A\u8FC7 Google \u767B\u5F55","Sign in":"\u767B\u5F55","Sign In":"\u767B\u5F55","Signing in":"\u6B63\u5728\u767B\u5F55",Skip:"\u8DF3\u8FC7",Submit:"\u63D0\u4EA4",Submitting:"\u6B63\u5728\u63D0\u4EA4",Username:"\u7528\u6237\u540D","Verify Contact":"\u9A8C\u8BC1\u8054\u7CFB\u65B9\u5F0F",Verify:"\u9A8C\u8BC1","We Emailed You":"\u6211\u4EEC\u7ED9\u60A8\u53D1\u9001\u4E86\u7535\u5B50\u90AE\u4EF6","We Sent A Code":"\u6211\u4EEC\u53D1\u9001\u4E86\u4EE3\u7801","We Texted You":"\u6211\u4EEC\u7ED9\u60A8\u53D1\u9001\u4E86\u77ED\u4FE1","Your code is on the way. To log in, enter the code we emailed to":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u901A\u8FC7\u7535\u5B50\u90AE\u4EF6\u53D1\u9001\u7ED9\u4EE5\u4E0B\u4EBA\u5458\u7684\u4EE3\u7801\uFF1A","Your code is on the way. To log in, enter the code we sent you":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u53D1\u9001\u7ED9\u60A8\u7684\u4EE3\u7801","Your code is on the way. To log in, enter the code we texted to":"\u60A8\u7684\u4EE3\u7801\u6B63\u5728\u53D1\u9001\u4E2D\u3002\u8981\u767B\u5F55\uFF0C\u8BF7\u8F93\u5165\u6211\u4EEC\u901A\u8FC7\u77ED\u4FE1\u53D1\u9001\u7ED9\u4EE5\u4E0B\u4EBA\u5458\u7684\u4EE3\u7801\uFF1A","Confirm a Code":"\u786E\u8BA4\u7801","Confirm Sign In":"\u786E\u8BA4\u767B\u5F55","Forgot Password":"\u5FD8\u8BB0\u5BC6\u7801","Incorrect username or password":"\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF","Invalid password format":"\u5BC6\u7801\u683C\u5F0F\u9519\u8BEF","Invalid phone number format":"\u7535\u8BDD\u683C\u5F0F\u9519\u8BEF\uFF0C\u8BF7\u4F7F\u7528\u683C\u5F0F +12345678900","New Password":"\u65B0\u5BC6\u7801","Resend a Code":"\u91CD\u53D1\u786E\u8BA4\u7801","Sign Out":"\u9000\u51FA","Sign Up":"\u6CE8\u518C","User already exists":"\u7528\u6237\u5DF2\u7ECF\u5B58\u5728","User does not exist":"\u7528\u6237\u4E0D\u5B58\u5728"};var GL={"Account recovery requires verified contact information":"F\xF6r att \xE5terst\xE4lla kontot beh\xF6ver du ett verifierat konto","Back to Sign In":"Tillbaka till inloggningen","Change Password":"Byt l\xF6senord",Changing:"\xC4ndra",Code:"Kod","Confirm Password":"Bekr\xE4fta l\xF6senord","Confirm Sign Up":"Bekr\xE4fta registrering","Confirm SMS Code":"Bekr\xE4fta SMS-kod","Confirm TOTP Code":"Bekr\xE4fta TOTP-kod",Confirm:"Bekr\xE4fta","Confirmation Code":"Verifikationskod",Confirming:"Bekr\xE4ftar","Create a new account":"Skapa ett nytt konto","Create Account":"Skapa konto","Creating Account":"Skapar konto","Dismiss alert":"Avvisa varning",Email:"E-post","Enter your code":"Skriv din kod","Enter your Email":"Fyll i din e-post","Enter your phone number":"Ange ditt telefonnummer","Enter your username":"Ange ditt anv\xE4ndarnamn","Forgot your password?":"Gl\xF6mt ditt l\xF6senord? ","Hide password":"D\xF6lj l\xF6senord","It may take a minute to arrive":"Det kan ta en minut att komma fram",Loading:"Laddar","New password":"Nytt l\xF6senord",or:"eller",Password:"L\xF6senord","Phone Number":"Telefonnummer","Resend Code":"Skicka koden igen","Reset your password":"\xC5terst\xE4ll ditt l\xF6senord","Reset your Password":"\xC5terst\xE4ll ditt l\xF6senord","Send code":"Skicka kod","Send Code":"Skicka kod",Sending:"Skickar","Setup TOTP":"Konfigurera TOTP","Show password":"Visa l\xF6senord","Sign in to your account":"Logga in till ditt konto","Sign In with Amazon":"Logga in med Amazon","Sign In with Apple":"Logga in med Apple","Sign In with Facebook":"Logga in med Facebook","Sign In with Google":"Logga in med Google","Sign in":"Logga in","Sign In":"Logga in","Signing in":"Loggar in",Skip:"Hoppa \xF6ver",Submit:"Skicka",Submitting:"Skickar in",Username:"Anv\xE4ndarnamn","Verify Contact":"Verifiera kontakt",Verify:"Verifiera","We Sent A Code":"Vi skickade en kod","We Texted You":"Vi sms:ade dig","Your code is on the way. To log in, enter the code we emailed to":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi mejlade till","Your code is on the way. To log in, enter the code we sent you":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi skickade till dig","Your code is on the way. To log in, enter the code we texted to":"Din kod \xE4r p\xE5 v\xE4g. F\xF6r att logga in, ange koden vi sms:ade till","An account with the given email already exists.":"Det finns redan ett konto med denna e-postadress","Confirm a Code":"Bekr\xE4fta koden","Confirm Sign In":"Bekr\xE4fta inloggning","Create account":"Skapa konto","Enter your password":"Ange ditt l\xF6senord","Forgot Password":"Gl\xF6mt l\xF6senordet","Have an account? ":"Redan registrerad? ","Incorrect username or password":"Felaktigt anv\xE4ndarnamn eller l\xF6senord","Invalid password format":"Ogiltigt l\xF6senordsformat","Invalid phone number format":"Ogiltigt format f\xF6r telefonnummer","Lost your code? ":"F\xF6rlorat koden? ","New Password":"Nytt l\xF6senord","No account? ":"Inget konto? ","Password attempts exceeded":"Maximalt antal felaktiga inloggningsf\xF6rs\xF6k har uppn\xE5tts","Reset password":"\xC5terst\xE4ll l\xF6senord","Sign Out":"Logga ut","Sign Up":"Registrering","User already exists":"Anv\xE4ndaren finns redan","User does not exist":"Anv\xE4ndaren finns inte","Username cannot be empty":"Anv\xE4ndarnamnet kan inte vara tomt","We Emailed You":"Vi har skickat e-post till dig"};var WL={"Account recovery requires verified contact information":"Pemulihan akun memerlukan informasi kontak terverifikasi","Back to Sign In":"Kembali ke Masuk","Change Password":"Ubah kata sandi",Changing:"Mengubah",Code:"Kode","Confirm Password":"Konfirmasi kata sandi","Confirm Sign Up":"Konfirmasi Pendaftaran","Confirm SMS Code":"Konfirmasi Kode SMS","Confirm TOTP Code":"Konfirmasi Kode TOTP",Confirm:"Konfirmasi","Confirmation Code":"Kode Konfirmasi",Confirming:"Mengkonfirmasi","Create a new account":"Buat akun baru","Create Account":"Buat Akun","Creating Account":"Membuat Akun","Dismiss alert":"Hentikan pemberitahuan",Email:"Email","Enter your code":"Masukkan kode anda","Enter your Email":"Masukkan email anda","Enter your phone number":"Masukkan nomor telepon anda","Enter your username":"Masukkan nama akun anda","Forgot your password?":"Lupa kata sandi? ","Hide password":"Sembunyikan kata sandi","It may take a minute to arrive":"Mungkin perlu waktu satu menit untuk tiba",Loading:"Memuat","New password":"Kata sandi baru",or:"atau",Password:"Kata sandi","Phone Number":"Nomor telepon","Resend Code":"Kirim ulang kodenya","Reset your Password":"Reset Kata Sandi","Reset your password":"Ubah kata sandi anda","Send code":"Kirim kode","Send Code":"Kirim Kode",Sending:"Mengirim","Setup TOTP":"Siapkan TOTP","Show password":"Tampilkan kata sandi","Sign in to your account":"Masuk akun anda","Sign In with Amazon":"Masuk dengan Amazon","Sign In with Apple":"Masuk dengan Apple","Sign In with Facebook":"Masuk dengan Facebook","Sign In with Google":"Masuk dengan Google","Sign in":"Masuk","Sign In":"Masuk","Signing in":"Memasuki",Skip:"Lewati",Submit:"Ajukan",Submitting:"Mengajukan",Username:"Nama akun","Verify Contact":"Verifikasi Kontak",Verify:"Verifikasi","We Sent A Code":"Kami Mengirim Kode","We Texted You":"Kami mengirim SMS kepada Anda","Your code is on the way. To log in, enter the code we sent you":"Kode Anda segera hadir. Untuk masuk, masukkan kode yang kami kirimkan kepada Anda","An account with the given email already exists.":"Akun dengan email tersebut sudah terdaftar.","Attempt limit exceeded, please try after some time.":"Batas percobaan terlampaui, mohon coba lagi setelah beberapa waktu.","Cannot reset password for the user as there is no registered/verified email or phone_number":"Tidak dapat mengatur ulang kata sandi karena tidak ada email terdaftar / terverifikasi atau nomor telepon",Change:"Ubah","Confirm a Code":"Konfirmasi kode","Create account":"Buat akun","Enter your password":"Masukkan kata sandi anda","Forgot Password":"Lupa kata sandi","Have an account? ":"Sudah punya akun? ",Hello:"Halo","Incorrect username or password.":"Nama akun atau kata sandi salah.","Invalid phone number format":"Nomor telepon tidak sesuai dengan format.","Invalid verification code provided, please try again.":"Kode verifikasi tidak sesuai, mohon coba lagi.","It may take a minute to arrive.":"Mungkin perlu beberapa waktu untuk tiba.","Lost your code? ":"Kode anda hilang?",Name:"Nama","Network error":"Galat jaringan","No account? ":"Tidak ada akun?","Password did not conform with policy: Password not long enough":"Kata sandi tidak sesuai dengan aturan: Kata sandi kurang panjang","Resend a Code":"Renvoyer un code","Reset password":"Ubah kata sandi anda",Send:"Kirim","Sign In with AWS":"Masuk dengan AWS","Sign Up with Amazon":"Daftar dengan Amazon","Sign Up with AWS":"Daftar dengan AWS","Sign Up with Facebook":"Daftar dengan Facebook","Sign Up with Google":"Daftar dengan Google",SMS:"SMS","User already exists":"Akun sudah terdaftar","User does not exist.":"Akun tidak terdaftar.","User is disabled.":"Akun dinonaktifkan.","Username cannot be empty":"Nama akun tidak boleh kosong","Username/client id combination not found.":"Nama akun atau id tidak ditemukan.","We Emailed You":"Kami mengirimkanmu email","Your code is on the way. To log in, enter the code we emailed to":"Kode anda dalam pengiriman. Untuk masuk, masukkan kode yang kami emailkan ke","Your code is on the way. To log in, enter the code we texted to":"Kode anda dalam pengiriman. Untuk masuk, masukkan kode yang kami tuliskan ke","Your passwords must match":"Kata sandi harus sama"};var ZL={"Account recovery requires verified contact information":"Hesap kurtarma, do\u011Frulanm\u0131\u015F ileti\u015Fim bilgilerini gerektirir","Add your Profile":"Profilinizi ekleyin","Add your Website":"Web sitenizi ekleyin","Back to Sign In":"Oturum A\xE7maya Geri D\xF6n","Change Password":"\u015Eifreyi De\u011Fi\u015Ftir",Changing:"De\u011Fi\u015Ftiriliyor",Code:"Kod","Confirm Password":"\u015Eifreyi Do\u011Frula","Confirm Sign Up":"Kay\u0131t \u0130\u015Flemini Do\u011Frula","Confirm SMS Code":"SMS Kodunu Do\u011Frula","Confirm MFA Code":"\xC7oklu Fakt\xF6rl\xFC Do\u011Frulama Kodunu Do\u011Frula","Confirm TOTP Code":"Tek Kullan\u0131ml\u0131k \u015Eifreyi Do\u011Frula",Confirm:"Do\u011Frula","Confirmation Code":"Do\u011Frulama Kodu",Confirming:"Do\u011Frulan\u0131yor","Create a new account":"Yeni bir hesap olu\u015Ftur","Create Account":"Hesap Olu\u015Ftur","Creating Account":"Hesap Olu\u015Fturuluyor","Dismiss alert":"Uyar\u0131y\u0131 reddet",Email:"E-posta","Enter your Birthdate":"Do\u011Fum g\xFCn\xFCn\xFCz\xFC girin","Enter your code":"Kodu girin","Enter your Confirmation Code":"Do\u011Frulama Kodunuzu Girin","Enter your Email":"E-posta adresinizi girin","Enter your email":"E-posta adresinizi girin","Enter your Family Name":"Ad Soyad\u0131n\u0131z\u0131 girin","Enter your Given Name":"Ad\u0131n\u0131z\u0131 girin","Enter your Middle Name":"Soyad\u0131n\u0131z\u0131 girin","Enter your Name":"Ad\u0131n\u0131z\u0131 girin","Enter your Nickname":"Takma ad\u0131n\u0131z\u0131 girin","Enter your Password":"\u015Eifrenizi girin","Enter your phone number":"Telefon numaran\u0131z\u0131 girin","Enter your Preferred Username":"Tercih etti\u011Finiz kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin","Enter your username":"Kullan\u0131c\u0131 ad\u0131n\u0131z\u0131 girin","Forgot Password?":"\u015Eifrenizi Mi Unuttunuz?","Forgot password?":"\u015Eifrenizi mi unuttunuz?","Forgot your password?":"\u015Eifrenizi mi unuttunuz?","Hide password":"\u015Eifreyi gizle","It may take a minute to arrive":"Kodun gelmesi bir dakika s\xFCrebilir",Loading:"Y\xFCkleniyor","New password":"Yeni \u015Fifre",or:"veya",Password:"\u015Eifre","Phone Number":"Telefon Numaras\u0131","Please confirm your Password":"L\xFCtfen \u015Fifrenizi do\u011Frulay\u0131n","Resend Code":"Kodu Yeniden G\xF6nder","Reset your password":"\u015Eifrenizi s\u0131f\u0131rlay\u0131n","Reset your Password":"\u015Eifrenizi S\u0131f\u0131rlay\u0131n","Reset Password":"\u015Eifreyi S\u0131f\u0131rla","Send code":"Kod g\xF6nder","Send Code":"Kod G\xF6nder",Sending:"G\xF6nderiliyor","Setup TOTP":"Tek kullan\u0131ml\u0131k \u015Fifre kurulumu yap","Show password":"\u015Eifreyi g\xF6ster","Sign in to your account":"Hesab\u0131n\u0131zda oturum a\xE7\u0131n","Sign In with Amazon":"Amazon ile Oturum A\xE7","Sign In with Apple":"Apple ile Oturum A\xE7","Sign In with Facebook":"Facebook ile Oturum A\xE7","Sign In with Google":"Google ile Oturum A\xE7","Sign in":"Oturum a\xE7","Sign In":"Oturum A\xE7","Sign Up with Facebook":"Facebook ile Kay\u0131t Ol","Sign Up with Google":"Google ile Kay\u0131t Ol","Signing in":"Oturum a\xE7\u0131l\u0131yor",Skip:"Atla",Submit:"G\xF6nder",Submitting:"G\xF6nderiliyor",Username:"Kullan\u0131c\u0131 ad\u0131","Verify Contact":"Ki\u015Fiyi Do\u011Frula",Verify:"Do\u011Frula","We Emailed You":"Size E-posta G\xF6nderdik","We Sent A Code":"Bir Kod G\xF6nderdik","We Texted You":"Size Mesaj G\xF6nderdik","Your code is on the way. To log in, enter the code we emailed to":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, g\xF6nderdi\u011Fimiz e-postadaki kodu girin","Your code is on the way. To log in, enter the code we sent you":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, size g\xF6nderdi\u011Fimiz kodu girin","Your code is on the way. To log in, enter the code we texted to":"Kodunuz yolda. Oturum a\xE7mak i\xE7in, g\xF6nderdi\u011Fimiz mesajdaki kodu girin","An account with the given email already exists.":"Bu e-postaya ait zaten bir hesap var.","Confirm Sign In":"Oturum A\xE7may\u0131 Do\u011Frula","Have an account? ":"Hesab\u0131n\u0131z var m\u0131? ","Incorrect username or password":"Yanl\u0131\u015F kullan\u0131c\u0131 ad\u0131 ya da \u015Fifre","Invalid password format":"Ge\xE7ersiz parola format\u0131","Invalid phone number format":"Ge\xE7ersiz telefon numaras\u0131 format\u0131","Lost your code? ":"Kodu mu kaybettiniz? ","No account? ":"Hesab\u0131n\u0131z yok mu? ","Password attempts exceeded":"Maksimum oturum a\xE7ma giri\u015Fimi a\u015F\u0131ld\u0131","Sign Out":"\xC7\u0131k\u0131\u015F yap","Sign Up":"Kay\u0131t Ol","User already exists":"Bu kullan\u0131c\u0131 zaten var","User does not exist":"B\xF6yle bir kullan\u0131c\u0131 mevcut de\u011Fil","Username cannot be empty":"Kullan\u0131c\u0131 ad\u0131 bo\u015F olamaz"};var KL={"Account recovery requires verified contact information":"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u0443\u0447\u0435\u0442\u043D\u043E\u0439 \u0437\u0430\u043F\u0438\u0441\u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u043E\u0439 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438","Back to Sign In":"\u041D\u0430\u0437\u0430\u0434, \u0447\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438","Change Password":"\u0438\u0437\u043C\u0435\u043D\u044F\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C",Changing:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435",Code:"\u041A\u043E\u0434","Confirm Password":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u043F\u0430\u0440\u043E\u043B\u044F","Confirm Sign Up":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F","Confirm SMS Code":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 CMC-\u041A\u043E\u0434","Confirm TOTP Code":"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 TOTP-\u041A\u043E\u0434",Confirm:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0442\u044C","Confirmation Code":"\u043A\u043E\u0434 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F",Confirming:"\u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435","Create a new account":"\u0421\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C","Create Account":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C","Creating Account":"\u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u0443\u0447\u0435\u0442\u043D\u0430\u044F \u0437\u0430\u043F\u0438\u0441\u044C","Dismiss alert":"\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u043E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u0435",Email:"\u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430","Enter your code":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u041A\u043E\u0434","Enter your Email":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430","Enter your phone number":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","Enter your username":"\u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0430\u0448 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F","Forgot your password?":"\u0417\u0430\u0431\u044B\u043B\u0438 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C?","Hide password":"\u0421\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","It may take a minute to arrive":"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430 \u043C\u043E\u0436\u0435\u0442 \u0437\u0430\u043D\u044F\u0442\u044C \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u0432\u0440\u0435\u043C\u044F",Loading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430","New password":"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",or:"\u0438\u043B\u0438",Password:"\u041F\u0430\u0440\u043E\u043B\u044C","Phone Number":"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430","Resend Code":"\u041E\u0442\u043F\u0440\u0430\u0432\u044C \u0435\u0449\u0435 \u0440\u0430\u0437 \u041A\u043E\u0434","Reset your password":"\u0441\u0431\u0440\u043E\u0441 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C","Reset your Password":"\u0441\u0431\u0440\u043E\u0441 \u0432\u0430\u0448 \u041F\u0430\u0440\u043E\u043B\u044C","Send code":"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u041A\u043E\u0434","Send Code":"\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u041A\u043E\u0434",Sending:"\u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0430","Setup TOTP":"\u041D\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044C TOTP","Show password":"\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","Sign in to your account":"\u0437\u043D\u0430\u043A \u0432 \u0441\u0432\u043E\u0439 \u0430\u043A\u043A\u0430\u0443\u043D\u0442","Sign In with Amazon":"\u0437\u043D\u0430\u043A \u0432 \u0441 Amazon","Sign In with Apple":"\u0437\u043D\u0430\u043A \u0432 \u0441 Apple","Sign In with Facebook":"\u0437\u043D\u0430\u043A \u0432 \u0441 Facebook","Sign In with Google":"\u0437\u043D\u0430\u043A \u0432 \u0441 Google","Sign in":"\u0437\u043D\u0430\u043A \u0432","Sign In":"\u0437\u043D\u0430\u043A \u0432","Signing in":"\u043F\u043E\u0434\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0432",Skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u0442\u044C",Submit:"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043B\u044F\u0442\u044C \u043D\u0430 \u0440\u0430\u0441\u0441\u043C\u043E\u0442\u0440\u0435\u043D\u0438\u0435",Submitting:"\u041F\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0432",Username:"\u0418\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F","Verify Contact":"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043A\u043E\u043D\u0442\u0430\u043A\u0442",Verify:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C","We Emailed You":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0435 \u043F\u0438\u0441\u044C\u043C\u043E","We Sent A Code":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043A\u043E\u0434","We Texted You":"\u041C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435","Your code is on the way. To log in, enter the code we emailed to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043F\u043E \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0439 \u043F\u043E\u0447\u0442\u0435","Your code is on the way. To log in, enter the code we sent you":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043F\u043E\u0441\u043B\u0430\u043B\u0438 \u0432\u0430\u043C","Your code is on the way. To log in, enter the code we texted to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D. \u0427\u0442\u043E\u0431\u044B \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u043C\u044B \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u043C \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435\u043C"};var YL={"Account recovery requires verified contact information":"\u05E9\u05D7\u05D6\u05D5\u05E8 \u05DC\u05E7\u05D5\u05D7 \u05D3\u05D5\u05E8\u05E9 \u05E2\u05D5\u05D3 \u05DE\u05D9\u05D3\u05E2","Back to Sign In":"\u05D7\u05D6\u05D5\u05E8 \u05DC\u05D4\u05E8\u05E9\u05DE\u05D4","Change Password":"\u05E2\u05D3\u05DB\u05D5\u05DF \u05E1\u05D9\u05E1\u05DE\u05D0",Changing:"\u05DE\u05E2\u05D3\u05DB\u05DF",Code:"\u05E7\u05D5\u05D3","Confirm Password":"\u05D0\u05E9\u05E8 \u05E1\u05D9\u05E1\u05DE\u05D0","Confirm Sign Up":"\u05D0\u05E9\u05E8 \u05D4\u05E8\u05E9\u05DE\u05D4","Confirm SMS Code":"\u05D0\u05E9\u05E8 sms \u05E7\u05D5\u05D3","Confirm TOTP Code":"\u05D0\u05E9\u05E8 totp \u05E7\u05D5\u05D3",Confirm:"\u05D0\u05D9\u05E9\u05D5\u05E8","Confirmation Code":"\u05D0\u05D9\u05E9\u05D5\u05E8 \u05E7\u05D5\u05D3",Confirming:"\u05DE\u05D0\u05E9\u05E8","Create a new account":"\u05E6\u05D5\u05E8 \u05DE\u05E9\u05EA\u05DE\u05E9 \u05D7\u05D3\u05E9","Create Account":"\u05E6\u05D5\u05E8 \u05DE\u05E9\u05EA\u05DE\u05E9","Creating Account":"\u05D9\u05E6\u05D9\u05E8\u05EA \u05DE\u05E9\u05EA\u05DE\u05E9","Dismiss alert":"\u05D4\u05E1\u05E8 \u05D4\u05EA\u05E8\u05D0\u05D4",Email:"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC","Enter your code":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05D4\u05E7\u05D5\u05D3","Enter your Email":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05D4\u05DE\u05D9\u05D9\u05DC \u05E9\u05DC\u05DA","Enter your phone number":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05DE\u05E1\u05E4\u05E8 \u05D4\u05D8\u05DC\u05E4\u05D5\u05DF \u05E9\u05DC\u05DA","Enter your username":"\u05D4\u05DB\u05E0\u05E1 \u05D0\u05EA \u05E9\u05DD \u05D4\u05DE\u05EA\u05DE\u05E9 \u05E9\u05DC\u05DA","Forgot your password?":"\u05E9\u05DB\u05D7\u05EA \u05E1\u05D9\u05E1\u05DE\u05D0 ?","Hide password":"\u05D4\u05E1\u05EA\u05E8 \u05E1\u05D9\u05E1\u05DE\u05D0",Loading:"\u05D8\u05D5\u05E2\u05DF","New password":"\u05E1\u05D9\u05E1\u05DE\u05D0 \u05D7\u05D3\u05E9\u05D4",or:"\u05D0\u05D5\u05B9",Password:"\u05E1\u05D9\u05E1\u05DE\u05D0","Phone Number":"\u05DE\u05E1\u05E4\u05E8 \u05D8\u05DC\u05E4\u05D5\u05DF","Resend Code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3 \u05E9\u05D5\u05D1","Reset your password":"\u05D0\u05E4\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0","Reset your Password":"\u05D0\u05E4\u05E1 \u05E1\u05D9\u05E1\u05DE\u05D0","Send code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3","Send Code":"\u05E9\u05DC\u05D7 \u05E7\u05D5\u05D3",Sending:"\u05E9\u05D5\u05DC\u05D7","Setup TOTP":"Setup TOTP","Show password":"\u05D4\u05E6\u05D2 \u05E1\u05D9\u05E1\u05DE\u05D0","Sign in to your account":"\u05D4\u05EA\u05D7\u05D1\u05E8 \u05DC\u05D7\u05E9\u05D1\u05D5\u05DF \u05E9\u05DC\u05DA","Sign In with Amazon":"Sign In with Amazon","Sign In with Apple":"Sign In with Apple","Sign In with Facebook":"Sign In with Facebook","Sign In with Google":"Sign In with Google","Sign in":"\u05D4\u05EA\u05D7\u05D1\u05E8","Sign In":"\u05D4\u05EA\u05D7\u05D1\u05E8","Signing in":"\u05DE\u05EA\u05D7\u05D1\u05E8",Skip:"\u05D3\u05DC\u05D2",Submit:"\u05E9\u05DC\u05D7",Submitting:"\u05E9\u05D5\u05DC\u05D7",Username:"\u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9","Verify Contact":"\u05D0\u05DE\u05EA \u05D0\u05D9\u05E9 \u05E7\u05E9\u05E8",Verify:"\u05D0\u05DE\u05EA"};var XL={"Account recovery requires verified contact information":"\u0412\u0456\u0434\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F \u043E\u0431\u043B\u0456\u043A\u043E\u0432\u043E\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0443 \u043F\u043E\u0442\u0440\u0435\u0431\u0443\u0454 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u043D\u043E\u0457 \u0456\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0456\u0457","Back to Sign In":"\u041D\u0430\u0437\u0430\u0434 \u043D\u0430 \u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0443 \u0432\u0445\u043E\u0434\u0443","Change Password":"\u0417\u043C\u0456\u043D\u0438\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C",Changing:"\u0417\u043C\u0456\u043D\u044E\u0454\u043C\u043E",Code:"\u041A\u043E\u0434","Confirm Password":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C","Confirm Sign Up":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044E","Confirm SMS Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C SMS \u043A\u043E\u0434","Confirm TOTP Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C TOTP \u043A\u043E\u0434",Confirm:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438","Confirmation Code":"\u041A\u043E\u0434 \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F",Confirming:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0443\u0454\u043C\u043E","Create a new account":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","Create Account":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","Creating Account":"\u0420\u0435\u0454\u0441\u0442\u0440\u0443\u0454\u043C\u043E","Dismiss alert":"\u0412\u0456\u0434\u0445\u0438\u043B\u0438\u0442\u0438 \u0441\u043F\u043E\u0432\u0456\u0449\u0435\u043D\u043D\u044F",Email:"Email","Enter your code":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434","Enter your Email":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 email","Enter your phone number":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Enter your username":"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448\u0435 \u0456\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","Forgot password?":"\u0417\u0430\u0431\u0443\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?","Forgot your password?":"\u0417\u0430\u0431\u0443\u043B\u0438 \u0432\u0430\u0448 \u043F\u0430\u0440\u043E\u043B\u044C?","Hide password":"\u0421\u0445\u043E\u0432\u0430\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","It may take a minute to arrive":"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430 \u043C\u043E\u0436\u0435 \u0442\u0440\u0438\u0432\u0430\u0442\u0438 \u0445\u0432\u0438\u043B\u0438\u043D\u0443",Loading:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0454\u043C\u043E","New password":"\u041D\u043E\u0432\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",or:"\u0430\u0431\u043E",Password:"\u041F\u0430\u0440\u043E\u043B\u044C","Phone Number":"\u041D\u043E\u043C\u0435\u0440 \u0422\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Resend Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E","Reset your password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Reset your Password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Send code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434","Send Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434",Sending:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u044F\u0454\u043C\u043E","Setup TOTP":"\u041D\u0430\u043B\u0430\u0448\u0442\u0443\u0432\u0430\u0442\u0438 TOTP","Show password":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Sign in to your account":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0443 \u0432\u0430\u0448 \u043E\u0431\u043B\u0456\u043A\u043E\u0432\u0438\u0439 \u0437\u0430\u043F\u0438\u0441","Sign In with Amazon":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Amazon","Sign In with Apple":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Apple","Sign In with Facebook":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Facebook","Sign In with Google":"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Google","Sign in":"\u0423\u0432\u0456\u0439\u0442\u0438","Sign In":"\u0423\u0432\u0456\u0439\u0442\u0438","Signing in":"\u0412\u0445\u043E\u0434\u0438\u043C\u043E",Skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u0438",Submit:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438",Submitting:"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u043B\u044F\u0454\u043C\u043E",Username:"\u0406\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430","Verify Contact":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u041A\u043E\u043D\u0442\u0430\u043A\u0442",Verify:"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438","We Emailed You":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C Email","We Sent A Code":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u043A\u043E\u0434","We Texted You":"\u041C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u0435 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","Your code is on the way. To log in, enter the code we emailed to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u043D\u0430 Email","Your code is on the way. To log in, enter the code we sent you":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0430\u043C \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438","Your code is on the way. To log in, enter the code we texted to":"\u0412\u0430\u0448 \u043A\u043E\u0434 \u0432\u0436\u0435 \u0432 \u0434\u043E\u0440\u043E\u0437\u0456. \u0429\u043E\u0431 \u0443\u0432\u0456\u0439\u0442\u0438, \u0432\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434, \u0449\u043E \u043C\u0438 \u0432\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u043B\u0438 \u0432\u0430\u043C \u0442\u0435\u043A\u0441\u0442\u043E\u0432\u0438\u043C \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F\u043C","An account with the given email already exists.":"\u041E\u0431\u043B\u0456\u043A\u043E\u0432\u0438\u0439 \u0437\u0430\u043F\u0438\u0441 \u0437 \u0446\u0438\u043C Email \u0432\u0436\u0435 \u0456\u0441\u043D\u0443\u0454.","Confirm a Code":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u043A\u043E\u0434","Confirm Sign In":"\u041F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0456\u0442\u044C \u0432\u0445\u0456\u0434","Forgot Password":"\u0417\u0430\u0431\u0443\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Incorrect username or password.":"\u041D\u0435\u0432\u0456\u0440\u043D\u0435 \u0456\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u0430\u0431\u043E \u043F\u0430\u0440\u043E\u043B\u044C","Invalid password format":"\u041D\u0435\u0432\u0456\u0440\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043F\u0430\u0440\u043E\u043B\u044E","Invalid phone number format":"\u041D\u0435\u0432\u0456\u0440\u043D\u0438\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043D\u043E\u043C\u0435\u0440\u0443 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443","Loading...":"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0454\u043C\u043E...","New Password":"\u041D\u043E\u0432\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","Resend a Code":"\u0412\u0456\u0434\u043F\u0440\u0430\u0432\u0438\u0442\u0438 \u043A\u043E\u0434 \u043F\u043E\u0432\u0442\u043E\u0440\u043D\u043E","Reset Password":"\u0421\u043A\u0438\u043D\u0443\u0442\u0438 \u043F\u0430\u0440\u043E\u043B\u044C","Sign Out":"\u0412\u0438\u0439\u0442\u0438","Sign Up with Amazon":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Amazon","Sign Up with Apple":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Apple","Sign Up with Facebook":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Facebook","Sign Up with Google":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u0437 Google","Sign Up":"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044F","User already exists":"\u041A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u0432\u0436\u0435 \u0456\u0441\u043D\u0443\u0454","User does not exist":"\u0422\u0430\u043A\u0438\u0439 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043D\u0435 \u0456\u0441\u043D\u0443\u0454","Username cannot be empty":"\u0406\u043C\u02BC\u044F \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430 \u043D\u0435 \u043C\u043E\u0436\u0435 \u0431\u0443\u0442\u0438 \u043F\u0443\u0441\u0442\u0438\u043C","Your passwords must match":"\u041F\u0430\u0440\u043E\u043B\u0456 \u043C\u0430\u044E\u0442\u044C \u0437\u0431\u0456\u0433\u0430\u0442\u0438\u0441\u044F"};var JL={"Account recovery requires verified contact information":"\u0E01\u0E32\u0E23\u0E01\u0E39\u0E49\u0E04\u0E37\u0E19\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A\u0E01\u0E32\u0E23\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E41\u0E25\u0E49\u0E27","Add your Profile":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E42\u0E1B\u0E23\u0E44\u0E1F\u0E25\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Add your Website":"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E27\u0E47\u0E1A\u0E44\u0E0B\u0E15\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Back to Sign In":"\u0E01\u0E25\u0E31\u0E1A\u0E44\u0E1B\u0E17\u0E35\u0E48\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Change Password":"\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19",Changing:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19",Code:"\u0E23\u0E2B\u0E31\u0E2A","Confirm Password":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Please confirm your Password":"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Confirm Sign Up":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19","Confirm SMS Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A SMS","Confirm MFA Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A MFA","Confirm TOTP Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A TOTP",Confirm:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","Confirmation Code":"\u0E23\u0E2B\u0E31\u0E2A\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19",Confirming:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","Create a new account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E43\u0E2B\u0E21\u0E48","Create Account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Creating Account":"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Dismiss alert":"\u0E1B\u0E34\u0E14\u0E01\u0E32\u0E23\u0E41\u0E08\u0E49\u0E07\u0E40\u0E15\u0E37\u0E2D\u0E19",Email:"\u0E2D\u0E35\u0E40\u0E21\u0E25","Enter your Birthdate":"\u0E01\u0E23\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E40\u0E01\u0E34\u0E14\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your code":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Confirmation Code":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Email":"\u0E01\u0E23\u0E2D\u0E01\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Family Name":"\u0E01\u0E23\u0E2D\u0E01\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Given Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Middle Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E01\u0E25\u0E32\u0E07\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Name":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Nickname":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E25\u0E48\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Password":"\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your email":"\u0E01\u0E23\u0E2D\u0E01\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your phone number":"\u0E01\u0E23\u0E2D\u0E01\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Enter your Preferred Username":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E17\u0E35\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23","Enter your username":"\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Forgot password?":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19?","Forgot your password?":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?","Hide password":"\u0E0B\u0E48\u0E2D\u0E19\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","It may take a minute to arrive":"\u0E2D\u0E32\u0E08\u0E43\u0E0A\u0E49\u0E40\u0E27\u0E25\u0E32\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48",Loading:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E42\u0E2B\u0E25\u0E14","New password":"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E21\u0E48",or:"\u0E2B\u0E23\u0E37\u0E2D",Password:"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Phone Number":"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C","Resend Code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E2D\u0E35\u0E01\u0E04\u0E23\u0E31\u0E49\u0E07","Reset your Password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Reset your password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Send code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A","Send Code":"\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A",Sending:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E48\u0E07","Setup TOTP":"\u0E15\u0E31\u0E49\u0E07\u0E04\u0E48\u0E32 TOTP","Show password":"\u0E41\u0E2A\u0E14\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Sign in to your account":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13","Sign In with Amazon":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Amazon","Sign In with Apple":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Apple","Sign In with Facebook":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Facebook","Sign In with Google":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E14\u0E49\u0E27\u0E22 Google","Sign in":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Sign In":"\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Signing in":"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A",Skip:"\u0E02\u0E49\u0E32\u0E21",Submit:"\u0E2A\u0E48\u0E07",Submitting:"\u0E01\u0E33\u0E25\u0E31\u0E07\u0E2A\u0E48\u0E07",Username:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49","Verify Contact":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D",Verify:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19","We Emailed You":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E16\u0E36\u0E07\u0E04\u0E38\u0E13\u0E41\u0E25\u0E49\u0E27","We Sent A Code":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07\u0E23\u0E2B\u0E31\u0E2A\u0E41\u0E25\u0E49\u0E27","We Texted You":"\u0E40\u0E23\u0E32\u0E44\u0E14\u0E49\u0E2A\u0E48\u0E07 SMS \u0E16\u0E36\u0E07\u0E04\u0E38\u0E13\u0E41\u0E25\u0E49\u0E27","Your code is on the way. To log in, enter the code we emailed to":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07\u0E2D\u0E35\u0E40\u0E21\u0E25","Your code is on the way. To log in, enter the code we sent you":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E43\u0E2B\u0E49\u0E04\u0E38\u0E13","Your code is on the way. To log in, enter the code we texted to":"\u0E23\u0E2B\u0E31\u0E2A\u0E02\u0E2D\u0E07\u0E04\u0E38\u0E13\u0E01\u0E33\u0E25\u0E31\u0E07\u0E21\u0E32 \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A \u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E17\u0E35\u0E48\u0E40\u0E23\u0E32\u0E2A\u0E48\u0E07\u0E44\u0E1B\u0E22\u0E31\u0E07 SMS","An account with the given email already exists.":"\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E17\u0E35\u0E48\u0E43\u0E0A\u0E49\u0E2D\u0E35\u0E40\u0E21\u0E25\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27","Confirm a Code":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E23\u0E2B\u0E31\u0E2A","Confirm Sign In":"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E40\u0E02\u0E49\u0E32\u0E2A\u0E39\u0E48\u0E23\u0E30\u0E1A\u0E1A","Create account":"\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E1A\u0E31\u0E0D\u0E0A\u0E35","Sign Up with Facebook":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Facebook","Sign Up with Google":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Google","Sign Up with Apple":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Apple","Sign Up with Line":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19\u0E14\u0E49\u0E27\u0E22 Line","Forgot Password":"\u0E25\u0E37\u0E21\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Have an account? ":"\u0E21\u0E35\u0E1A\u0E31\u0E0D\u0E0A\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27? ","Incorrect username or password":"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E2B\u0E23\u0E37\u0E2D\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07","Invalid password format":"\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07","It may take a minute to arrive.":"\u0E2D\u0E32\u0E08\u0E43\u0E0A\u0E49\u0E40\u0E27\u0E25\u0E32\u0E2A\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48\u0E43\u0E19\u0E01\u0E32\u0E23\u0E21\u0E32\u0E16\u0E36\u0E07","Lost your code? ":"\u0E2B\u0E32\u0E23\u0E2B\u0E31\u0E2A\u0E44\u0E21\u0E48\u0E40\u0E08\u0E2D? ","New Password":"\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19\u0E43\u0E2B\u0E21\u0E48","No account? ":"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1A\u0E31\u0E0D\u0E0A\u0E35? ","Password attempts exceeded":"\u0E40\u0E01\u0E34\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E04\u0E23\u0E31\u0E49\u0E07\u0E17\u0E35\u0E48\u0E2D\u0E19\u0E38\u0E0D\u0E32\u0E15\u0E43\u0E2B\u0E49\u0E43\u0E2A\u0E48\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Reset password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Reset Password":"\u0E23\u0E35\u0E40\u0E0B\u0E47\u0E15\u0E23\u0E2B\u0E31\u0E2A\u0E1C\u0E48\u0E32\u0E19","Sign Out":"\u0E2D\u0E2D\u0E01\u0E08\u0E32\u0E01\u0E23\u0E30\u0E1A\u0E1A","Sign Up":"\u0E25\u0E07\u0E17\u0E30\u0E40\u0E1A\u0E35\u0E22\u0E19","User already exists":"\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49\u0E21\u0E35\u0E2D\u0E22\u0E39\u0E48\u0E41\u0E25\u0E49\u0E27","User does not exist":"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E19\u0E35\u0E49","Username cannot be empty":"\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E2A\u0E48\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E43\u0E0A\u0E49\u0E07\u0E32\u0E19"};var QL={ADD_PROFILE:"Add your Profile",ADD_WEBSITE:"Add your Website",BACK_SIGN_IN:"Back to Sign In",BIRTHDATE:"Birthdate",CHANGE_PASSWORD:"Change Password",CHANGING_PASSWORD:"Changing",CODE:"Code",CODE_ARRIVAL:"It may take a minute to arrive",CODE_EMAILED:"Your code is on the way. To log in, enter the code we emailed to",CODE_SENT:"Your code is on the way. To log in, enter the code we sent you",CODE_TEXTED:"Your code is on the way. To log in, enter the code we texted to",CONFIRM_PASSWORD:"Confirm Password",CONFIRM_PASSWORD_PLACEHOLDER:"Please confirm your Password",CONFIRM_RESET_PASSWORD_HEADING:"Reset your Password",CONFIRM_SIGNUP_HEADING:"Confirm Sign Up",CONFIRM_SMS:"Confirm SMS Code",CONFIRM_MFA_DEFAULT:"Confirm MFA Code",CONFIRM_TOTP:"Confirm TOTP Code",CONFIRM:"Confirm",CONFIRMATION_CODE:"Confirmation Code",CONFIRMING:"Confirming",CREATE_ACCOUNT:"Create Account",CREATING_ACCOUNT:"Creating Account",EMAIL_ADDRESS:"Email",ENTER_BIRTHDATE:"Enter your Birthdate",ENTER_CODE:"Enter your code",ENTER_CONFIRMATION_CODE:"Enter your Confirmation Code",ENTER_EMAIL:"Enter your Email",ENTER_FAMILY_NAME:"Enter your Family Name",ENTER_GIVEN_NAME:"Enter your Given Name",ENTER_MIDDLE_NAME:"Enter your Middle Name",ENTER_NAME:"Enter your Name",ENTER_NICK_NAME:"Enter your Nickname",ENTER_PASSWORD:"Enter your Password",ENTER_PHONE_NUMBER:"Enter your Phone Number",ENTER_PREFERRED_USERNAME:"Enter your Preferred Username",ENTER_USERNAME:"Enter your username",FAMILY_NAME:"Family Name",GIVEN_NAME:"Given Name",FORGOT_PASSWORD:"Forgot Password?",FORGOT_YOUR_PASSWORD:"Forgot your password?",HIDE_PASSWORD:"Hide password",LOADING:"Loading",LOGIN_NAME:"Username",MIDDLE_NAME:"Middle Name",NAME:"Name",NICKNAME:"Nickname",NEW_PASSWORD:"New password",OR:"or",PASSWORD:"Password",PHONE_NUMBER:"Phone Number",PREFERRED_USERNAME:"Preferred Username",PROFILE:"Profile",RESEND_CODE:"Resend Code",RESET_PASSWORD_HEADING:"Reset your password",RESET_PASSWORD:"Reset Password",SEND_CODE:"Send code",SENDING:"Sending",SETUP_TOTP:"Setup TOTP",SHOW_PASSWORD:"Show password",SIGN_IN_BUTTON:"Sign in",SIGN_IN_TAB:"Sign In",SIGN_IN_WITH_AMAZON:"Sign In with Amazon",SIGN_IN_WITH_APPLE:"Sign In with Apple",SIGN_IN_WITH_FACEBOOK:"Sign In with Facebook",SIGN_IN_WITH_GOOGLE:"Sign In with Google",SIGN_IN:"Sign in to your account",SIGN_UP_BUTTON:"Create a new account",SIGNING_IN_BUTTON:"Signing in",SKIP:"Skip",SUBMIT:"Submit",SUBMITTING:"Submitting",UPPERCASE_COPY:"COPY",VERIFY_CONTACT:"Verify Contact",VERIFY_HEADING:"Account recovery requires verified contact information",VERIFY:"Verify",WE_EMAILED:"We Emailed You",WE_SENT_CODE:"We Sent A Code",WE_TEXTED:"We Texted You",WEBSITE:"Website"};var $J=Z({},NL),qJ=Z({},FL),HJ=Z({},OL),GJ=Z({},LL),WJ=Z({},zL),ZJ=Z({},UL),KJ=Z({},BL),YJ=Z({},VL),XJ=Z({},jL),JJ=Z({},$L),QJ=Z({},qL),eQ=Z({},HL),tQ=Z({},GL),nQ=Z({},WL),rQ=Z({},ZL),iQ=Z({},KL),oQ=Z({},YL),sQ=Z({},XL),aQ=Z({},JL),ez=Z({},QL);var tn=Z({},ez);function St(e){return Pd.get(e)}var Ew=e=>{let t=e?.context.config?.loginMechanisms,[n]=t??["username"];return n},tz=e=>{let t=Z({},e);for(let[n,r]of Object.entries(e)){let{label:a,placeholder:s}=r;t[n]=Me(Z({},r),{label:a?St(a):void 0,placeholder:s?St(s):void 0})}return t},nz=e=>Object.entries(e).sort((t,n)=>{let r=t[1].order||Number.MAX_VALUE,a=n[1].order||Number.MAX_VALUE;return r-a}).filter(t=>t[1]!==void 0);var lQ="+1",Xc=e=>{let t=Yc[e],{type:n}=t;return n==="tel"&&(t=Me(Z({},t),{dialCode:lQ})),t},py=e=>{let t=Ew(e);return Me(Z({},Xc(t)),{autocomplete:"username"})},Tw=e=>({confirmation_code:Me(Z({},Xc("confirmation_code")),{label:"Code *",placeholder:"Code"})}),cQ=e=>({username:Z({},py(e)),password:Me(Z({},Xc("password")),{autocomplete:"current-password"})}),uQ=e=>{let{loginMechanisms:t,signUpAttributes:n}=e.context.config,r=Ew(e),a=Array.from(new Set([...t,"password","confirm_password",...n])),s={};for(let h of a)if(Iw(h)){let _=h===r?py(e):Xc(h);s[h]=Z({},_)}else console.debug(`Authenticator does not have a default implementation for ${h}. Customize SignUp FormFields to add your own.`);return s},dQ=e=>({confirmation_code:Me(Z({},Xc("confirmation_code")),{placeholder:"Enter your code"})}),hQ=e=>{let t=Ew(e),{label:n}=Yc[t];return{username:Me(Z({},py(e)),{label:`Enter your ${n.toLowerCase()}`,placeholder:`Enter your ${n.toLowerCase()}`})}},pQ=e=>Me(Z({},Tw()),{password:Me(Z({},Xc("password")),{label:"New Password",placeholder:"New Password"}),confirm_password:Me(Z({},Xc("confirm_password")),{label:"Confirm Password",placeholder:"Confirm Password"})}),fQ=e=>{let t=Vc(e),{missingAttributes:n}=t.context,r=Array.from(new Set(["password","confirm_password",...n??[]])),a={};for(let s of r)Iw(s)?a[s]=Z({},Xc(s)):console.debug(`Authenticator does not have a default implementation for ${s}. Customize ForceNewPassword FormFields to add your own.`);return a},rz={signIn:cQ,signUp:uQ,confirmSignUp:dQ,confirmSignIn:Tw,forceNewPassword:fQ,forgotPassword:hQ,confirmResetPassword:pQ,confirmVerifyUser:Tw,setupTotp:Tw};var iz=(e,t)=>{let n=rz[e];return n(t)},oz=(e,t)=>{let n=jc(t)?.formFields?.[e];return!n||Object.keys(n).length===0?{}:Object.entries(n).reduce((r,[a,s])=>{if((e==="signIn"||e==="forgotPassword")&&a==="username"){let h=py(t),_=Z(Z({},h),s);return Me(Z({},r),{[a]:_})}else if(ML(a)){let h=Yc[a],_=Z(Z({},h),s);return Me(Z({},r),{[a]:_})}else return Me(Z({},r),{[a]:s})},{})},sz=(e,t)=>{let n=iz(e,t),r=oz(e,t),a=Z(Z({},n),r);return delete a.QR,tz(a)},az=e=>e.map(t=>{let n=t[0],r=Me(Z({},t[1]),{order:void 0});return[n,r]}),PT=(e,t)=>{let n=sz(e,t);return az(nz(n))};var mQ=e=>{switch(e){case"SMS_MFA":return St(tn.CONFIRM_SMS);case"SOFTWARE_TOKEN_MFA":return St(tn.CONFIRM_TOTP);default:return St(tn.CONFIRM_MFA_DEFAULT)}},gQ=e=>{let{DeliveryMedium:t,Destination:n}=e??{},r=t==="EMAIL",a=t==="SMS",s=St(tn.CODE_ARRIVAL);return r||a?`${r?St(tn.CODE_EMAILED):St(tn.CODE_TEXTED)} ${n}. ${s}.`:`${St(tn.CODE_SENT)}. ${s}.`},yQ=e=>{let{DeliveryMedium:t}=e??{},n=t==="EMAIL";return!n&&t==="SMS"?St(tn.WE_SENT_CODE):n?St(tn.WE_EMAILED):St(tn.WE_TEXTED)},vQ={amazon:"Amazon",apple:"Apple",facebook:"Facebook",google:"Google"},_Q=(e,t)=>St(`Sign ${e==="signIn"?"In":"Up"} with ${vQ[t]}`),bo={getBackToSignInText:()=>St(tn.BACK_SIGN_IN),getChangePasswordText:()=>St(tn.CHANGE_PASSWORD),getChangingText:()=>St(tn.CHANGING_PASSWORD),getConfirmText:()=>St(tn.CONFIRM),getConfirmingText:()=>St(tn.CONFIRMING),getCopyText:()=>St(tn.UPPERCASE_COPY),getHidePasswordText:()=>St(tn.HIDE_PASSWORD),getLoadingText:()=>St(tn.LOADING),getOrText:()=>St(tn.OR),getResendCodeText:()=>St(tn.RESEND_CODE),getSendCodeText:()=>St(tn.SEND_CODE),getSendingText:()=>St(tn.SENDING),getShowPasswordText:()=>St(tn.SHOW_PASSWORD),getSubmitText:()=>St(tn.SUBMIT),getSubmittingText:()=>St(tn.SUBMITTING),getSignInTabText:()=>St(tn.SIGN_IN_TAB),getSignUpTabText:()=>St(tn.CREATE_ACCOUNT),getForgotPasswordText:e=>St(e?tn.FORGOT_PASSWORD:tn.FORGOT_YOUR_PASSWORD),getSigningInText:()=>St(tn.SIGNING_IN_BUTTON),getSignInText:()=>St(tn.SIGN_IN_BUTTON),getCreatingAccountText:()=>St(tn.CREATING_ACCOUNT),getCreateAccountText:()=>St(tn.CREATE_ACCOUNT),getDeliveryMessageText:gQ,getDeliveryMethodText:yQ,getChallengeText:mQ,getResetYourPasswordText:()=>St(tn.RESET_PASSWORD),getSetupTotpText:()=>St(tn.SETUP_TOTP),getSetupTotpInstructionsText:()=>St("Copy and paste the secret key below into an authenticator app and then enter the code in the text field below."),getCopiedText:()=>St("COPIED"),getSignInWithFederationText:_Q,getSkipText:()=>St(tn.SKIP),getVerifyText:()=>St(tn.VERIFY),getVerifyContactText:()=>St(tn.VERIFY_CONTACT),getAccountRecoveryInfoText:()=>St(tn.VERIFY_HEADING),getInvalidEmailText:()=>St("Please enter a valid email"),getRequiredFieldText:()=>St("This field is required")};var Pt=function(e){return e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword",e}(Pt||{});var lz={[Pt.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[Pt.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[Pt.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[Pt.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[Pt.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[Pt.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[Pt.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[Pt.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[Pt.EmptySignInPassword]:{message:"password is required to signIn"},[Pt.EmptySignInUsername]:{message:"username is required to signIn"},[Pt.EmptySignUpPassword]:{message:"password is required to signUp"},[Pt.EmptySignUpUsername]:{message:"username is required to signUp"},[Pt.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[Pt.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[Pt.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[Pt.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[Pt.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}},mi=function(e){return e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings",e}(mi||{}),Rl=function(e){return e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException",e}(Rl||{});var gt=class e extends Or{constructor(t){super(t),this.constructor=e,Object.setPrototypeOf(this,e.prototype)}};function Pn(e,t){let{message:n,recoverySuggestion:r}=lz[t];if(!e)throw new gt({name:t,message:n,recoverySuggestion:r})}function un(e){let t=e?.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new gt({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function fy(e){if(!e||!e.includes(":"))throw new gt({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function RT(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}function cz(e){let t={};return e?.forEach(n=>{n.Name&&(t[n.Name]=n.Value)}),t}var Dw=function(e){return e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException",e}(Dw||{});var Hp="UserUnAuthenticatedException",uz="UserAlreadyAuthenticatedException",dz="DeviceMetadataNotFoundException",Aw="AutoSignInException",xQ="InvalidRedirectException",wQ="InvalidAppSchemeException",bQ="InvalidPreferredRedirectUrlException",hz=new gt({name:xQ,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),jDe=new gt({name:wQ,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."}),pz=new gt({name:bQ,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),SQ="InvalidOriginException",fz=new gt({name:SQ,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),mz="OAuthSignOutException",gz="TokenRefreshException",yz="UnexpectedSignInInterruptionException";function Da(e){if(!e||!e.accessToken)throw new gt({name:Hp,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function vz(e){if(!e||!e.idToken)throw new gt({name:Hp,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}var CQ=new gt({name:gz,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),IQ=new gt({name:Hp,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function Mw(e){if(TQ(e))throw CQ;if(!EQ(e))throw IQ}function kT(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new gt({name:dz,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}var _z={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function xz(e){return e?.accessToken||e?.idToken}function EQ(e){return xz(e)&&e?.refreshToken}function TQ(e){return xz(e)&&!e?.refreshToken}var wz=e=>se(void 0,null,function*(){let t=e.getConfig().Auth?.Cognito;bt(t);let n=yield e.Auth.getTokens({forceRefresh:!1});Da(n);let{"cognito:username":r,sub:a}=n.idToken?.payload??{},s={username:r,userId:a},h=DQ(n);return h&&(s.signInDetails=h),s});function DQ(e){return e?.signInDetails}var kl=()=>se(void 0,null,function*(){return wz(kt)});var Dn=(e,t)=>Gc(Z({category:qo.Auth,action:e},t));var qn=e=>(t,n)=>{let r=AQ(e),a=JSON.stringify(t);return MQ(n,r,a)},AQ=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),MQ=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function So(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new gt({name:ms.Unknown,message:"An unknown error has occurred.",underlyingError:e})}var Hn=()=>e=>se(void 0,null,function*(){if(e.statusCode>=300){let t=yield Vs(e);throw So(t),new gt({name:t.name,message:t.message})}return Wc(e)});var PQ=()=>(e,t)=>function(r){return se(this,null,function*(){return r.headers["cache-control"]="no-store",e(r)})},Gn=Cd(oy,[PQ]);var Pw="cognito-idp";var Wn={service:Pw,retryDecider:ay(Vs),computeDelay:sy,userAgentValue:Gc(),cache:"no-store"};var kd=e=>bn(Gn,qn("InitiateAuth"),Hn(),Z(Z({},Wn),e));var Aa=e=>bn(Gn,qn("RespondToAuthChallenge"),Hn(),Z(Z({},Wn),e));var bz=e=>bn(Gn,qn("VerifySoftwareToken"),Hn(),Z(Z({},Wn),e));var Sz=e=>bn(Gn,qn("AssociateSoftwareToken"),Hn(),Z(Z({},Wn),e));var Cz=e=>bn(Gn,qn("ConfirmDevice"),Hn(),Z(Z({},Wn),e));var Iz=({region:e})=>({url:new Ho(`https://${Pw}.${e}.${iy(e)}`)});var dn=({endpointOverride:e})=>t=>e?{url:new Ho(e)}:Iz(t);var RQ=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return Me(Z({},e),{signInSession:t.value});case"SET_SIGN_IN_STATE":return Z({},t.value);case"SET_CHALLENGE_NAME":return Me(Z({},e),{challengeName:t.value});case"SET_USERNAME":return Me(Z({},e),{username:t.value});case"SET_INITIAL_STATE":return Ez();default:return e}};function Ez(){return{username:void 0,challengeName:void 0,signInSession:void 0}}var kQ=e=>{let t=e(Ez(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},Ma=kQ(RQ);function Pa(e){Ma.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function Co(){Ma.dispatch({type:"SET_INITIAL_STATE"})}var Gp={convert(e){return new TextEncoder().encode(e)}};function lt(e,t){e!=null&&this.fromString(e,t)}function to(){return new lt(null,null)}var Jc,NQ=0xdeadbeefcafe,Tz=(NQ&16777215)===15715070;function FQ(e,t,n,r,a,s){for(;--s>=0;){let h=t*this[e++]+n[r]+a;a=Math.floor(h/67108864),n[r++]=h&67108863}return a}function OQ(e,t,n,r,a,s){let h=t&32767,_=t>>15;for(;--s>=0;){let w=this[e]&32767,C=this[e++]>>15,T=_*w+C*h;w=h*w+((T&32767)<<15)+n[r]+(a&1073741823),a=(w>>>30)+(T>>>15)+_*C+(a>>>30),n[r++]=w&1073741823}return a}function LQ(e,t,n,r,a,s){let h=t&16383,_=t>>14;for(;--s>=0;){let w=this[e]&16383,C=this[e++]>>14,T=_*w+C*h;w=h*w+((T&16383)<<14)+n[r]+a,a=(w>>28)+(T>>14)+_*C,n[r++]=w&268435455}return a}var Dz=typeof navigator<"u";Dz&&Tz&&navigator.appName==="Microsoft Internet Explorer"?(lt.prototype.am=OQ,Jc=30):Dz&&Tz&&navigator.appName!=="Netscape"?(lt.prototype.am=FQ,Jc=26):(lt.prototype.am=LQ,Jc=28);lt.prototype.DB=Jc;lt.prototype.DM=(1<<Jc)-1;lt.prototype.DV=1<<Jc;var NT=52;lt.prototype.FV=Math.pow(2,NT);lt.prototype.F1=NT-Jc;lt.prototype.F2=2*Jc-NT;var zQ="0123456789abcdefghijklmnopqrstuvwxyz",Rw=[],Wp,vs;Wp=48;for(vs=0;vs<=9;++vs)Rw[Wp++]=vs;Wp=97;for(vs=10;vs<36;++vs)Rw[Wp++]=vs;Wp=65;for(vs=10;vs<36;++vs)Rw[Wp++]=vs;function Az(e){return zQ.charAt(e)}function UQ(e,t){let n=Rw[e.charCodeAt(t)];return n??-1}function BQ(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function VQ(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function FT(e){let t=to();return t.fromInt(e),t}function jQ(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let r=e.length,a=!1,s=0;for(;--r>=0;){let h=UQ(e,r);if(h<0){e.charAt(r)==="-"&&(a=!0);continue}a=!1,s===0?this[this.t++]=h:s+n>this.DB?(this[this.t-1]|=(h&(1<<this.DB-s)-1)<<s,this[this.t++]=h>>this.DB-s):this[this.t-1]|=h<<s,s+=n,s>=this.DB&&(s-=this.DB)}this.clamp(),a&&lt.ZERO.subTo(this,this)}function $Q(){let e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function qQ(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");let n=(1<<t)-1,r,a=!1,s="",h=this.t,_=this.DB-h*this.DB%t;if(h-- >0)for(_<this.DB&&(r=this[h]>>_)>0&&(a=!0,s=Az(r));h>=0;)_<t?(r=(this[h]&(1<<_)-1)<<t-_,r|=this[--h]>>(_+=this.DB-t)):(r=this[h]>>(_-=t)&n,_<=0&&(_+=this.DB,--h)),r>0&&(a=!0),a&&(s+=Az(r));return a?s:"0"}function HQ(){let e=to();return lt.ZERO.subTo(this,e),e}function GQ(){return this.s<0?this.negate():this}function WQ(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function OT(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function ZQ(){return this.t<=0?0:this.DB*(this.t-1)+OT(this[this.t-1]^this.s&this.DM)}function KQ(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function YQ(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function XQ(e,t){let n=e%this.DB,r=this.DB-n,a=(1<<r)-1,s=Math.floor(e/this.DB),h=this.s<<n&this.DM,_;for(_=this.t-1;_>=0;--_)t[_+s+1]=this[_]>>r|h,h=(this[_]&a)<<n;for(_=s-1;_>=0;--_)t[_]=0;t[s]=h,t.t=this.t+s+1,t.s=this.s,t.clamp()}function JQ(e,t){t.s=this.s;let n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}let r=e%this.DB,a=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(let h=n+1;h<this.t;++h)t[h-n-1]|=(this[h]&s)<<a,t[h-n]=this[h]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<a),t.t=this.t-n,t.clamp()}function QQ(e,t){let n=0,r=0,a=Math.min(e.t,this.t);for(;n<a;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function eee(e,t){let n=this.abs(),r=e.abs(),a=n.t;for(t.t=a+r.t;--a>=0;)t[a]=0;for(a=0;a<r.t;++a)t[a+n.t]=n.am(0,r[a],t,a,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&lt.ZERO.subTo(t,t)}function tee(e){let t=this.abs(),n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){let r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function nee(e,t,n){let r=e.abs();if(r.t<=0)return;let a=this.abs();if(a.t<r.t){t?.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=to());let s=to(),h=this.s,_=e.s,w=this.DB-OT(r[r.t-1]);w>0?(r.lShiftTo(w,s),a.lShiftTo(w,n)):(r.copyTo(s),a.copyTo(n));let C=s.t,T=s[C-1];if(T===0)return;let F=T*(1<<this.F1)+(C>1?s[C-2]>>this.F2:0),B=this.FV/F,$=(1<<this.F1)/F,ee=1<<this.F2,ie=n.t,ye=ie-C,ve=t===null?to():t;for(s.dlShiftTo(ye,ve),n.compareTo(ve)>=0&&(n[n.t++]=1,n.subTo(ve,n)),lt.ONE.dlShiftTo(C,ve),ve.subTo(s,s);s.t<C;)s[s.t++]=0;for(;--ye>=0;){let Ae=n[--ie]===T?this.DM:Math.floor(n[ie]*B+(n[ie-1]+ee)*$);if((n[ie]+=s.am(0,Ae,n,ye,0,C))<Ae)for(s.dlShiftTo(ye,ve),n.subTo(ve,n);n[ie]<--Ae;)n.subTo(ve,n)}t!==null&&(n.drShiftTo(C,t),h!==_&&lt.ZERO.subTo(t,t)),n.t=C,n.clamp(),w>0&&n.rShiftTo(w,n),h<0&&lt.ZERO.subTo(n,n)}function ree(e){let t=to();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(lt.ZERO)>0&&e.subTo(t,t),t}function iee(){if(this.t<1)return 0;let e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function oee(e){return this.compareTo(e)===0}function see(e,t){let n=0,r=0,a=Math.min(e.t,this.t);for(;n<a;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()}function aee(e){let t=to();return this.addTo(e,t),t}function lee(e){let t=to();return this.subTo(e,t),t}function cee(e){let t=to();return this.multiplyTo(e,t),t}function uee(e){let t=to();return this.divRemTo(e,t,null),t}function Zp(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function dee(e){let t=to();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(lt.ZERO)>0&&this.m.subTo(t,t),t}function hee(e){let t=to();return e.copyTo(t),this.reduce(t),t}function pee(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function fee(e,t){e.squareTo(t),this.reduce(t)}function mee(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Zp.prototype.convert=dee;Zp.prototype.revert=hee;Zp.prototype.reduce=pee;Zp.prototype.mulTo=mee;Zp.prototype.sqrTo=fee;function gee(e,t,n){let r=e.bitLength(),a,s=FT(1),h=new Zp(t);if(r<=0)return s;r<18?a=1:r<48?a=3:r<144?a=4:r<768?a=5:a=6;let _=[],w=3,C=a-1,T=(1<<a)-1;if(_[1]=h.convert(this),a>1){let ve=to();for(h.sqrTo(_[1],ve);w<=T;)_[w]=to(),h.mulTo(ve,_[w-2],_[w]),w+=2}let F=e.t-1,B,$=!0,ee=to(),ie;for(r=OT(e[F])-1;F>=0;){for(r>=C?B=e[F]>>r-C&T:(B=(e[F]&(1<<r+1)-1)<<C-r,F>0&&(B|=e[F-1]>>this.DB+r-C)),w=a;!(B&1);)B>>=1,--w;if((r-=w)<0&&(r+=this.DB,--F),$)_[B].copyTo(s),$=!1;else{for(;w>1;)h.sqrTo(s,ee),h.sqrTo(ee,s),w-=2;w>0?h.sqrTo(s,ee):(ie=s,s=ee,ee=ie),h.mulTo(ee,_[B],s)}for(;F>=0&&!(e[F]&1<<r);)h.sqrTo(s,ee),ie=s,s=ee,ee=ie,--r<0&&(r=this.DB-1,--F)}let ye=h.revert(s);return n(null,ye),ye}lt.prototype.copyTo=BQ;lt.prototype.fromInt=VQ;lt.prototype.fromString=jQ;lt.prototype.clamp=$Q;lt.prototype.dlShiftTo=KQ;lt.prototype.drShiftTo=YQ;lt.prototype.lShiftTo=XQ;lt.prototype.rShiftTo=JQ;lt.prototype.subTo=QQ;lt.prototype.multiplyTo=eee;lt.prototype.squareTo=tee;lt.prototype.divRemTo=nee;lt.prototype.invDigit=iee;lt.prototype.addTo=see;lt.prototype.toString=qQ;lt.prototype.negate=HQ;lt.prototype.abs=GQ;lt.prototype.compareTo=WQ;lt.prototype.bitLength=ZQ;lt.prototype.mod=ree;lt.prototype.equals=oee;lt.prototype.add=aee;lt.prototype.subtract=lee;lt.prototype.multiply=cee;lt.prototype.divide=uee;lt.prototype.modPow=gee;lt.ZERO=FT(0);lt.ONE=FT(1);var Mz=_=>se(void 0,[_],function*({a:e,g:t,k:n,x:r,B:a,N:s,U:h}){return new Promise((w,C)=>{t.modPow(r,s,(T,F)=>{if(T){C(T);return}a.subtract(n.multiply(F)).modPow(e.add(h.multiply(r)),s,(B,$)=>{if(B){C(B);return}w($.mod(s))})})})});var Pz="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",LT={},kw={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),LT[e]=t,kw[t]=e}var Ra=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){let r=e.slice(n,n+2).toLowerCase();if(r in kw)t[n/2]=kw[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t};var Kp=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=LT[e[n]];return t};var my=e=>{let t=new Ml;t.update(e);let n=t.digestSync(),r=Kp(n);return new Array(64-r.length).join("0")+r};var Yp=e=>my(Ra(e));var yee=/^[89a-f]/i,$s=e=>{if(!(e instanceof lt))throw new Error("Not a BigInteger");let t=e.compareTo(lt.ZERO)<0,n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=yee.test(n)?`00${n}`:n,t){let r=n.split("").map(s=>{let h=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(h)}).join("");n=new lt(r,16).add(lt.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n};var Rz=({A:e,B:t})=>{let n=new lt(Yp($s(e)+$s(t)),16);if(n.equals(lt.ZERO))throw new Error("U cannot be zero.");return n};var kz=(e,t,n)=>{let r=new Ml(t);r.update(e);let a=r.digestSync(),s=new Ml(a);return s.update(n),s.digestSync().slice(0,16)};var Xp=e=>{let t=new dy().random(e).toString();return Ra(t)};var Nz=()=>Ta.convert(Xp(40));var Nw=class{constructor({userPoolName:t,a:n,g:r,A:a,N:s}){this.encoder=Gp,this.userPoolName=t,this.a=n,this.g=r,this.A=a,this.N=s,this.k=new lt(Yp(`${$s(s)}${$s(r)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new gt({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new gt({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new gt({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}generateHashDevice(t,n){return se(this,null,function*(){this.randomPassword=Nz();let r=`${t}${n}:${this.randomPassword}`,a=my(r),s=Kp(Xp(16));return this.saltToHashDevices=$s(new lt(s,16)),new Promise((h,_)=>{this.g.modPow(new lt(Yp(this.saltToHashDevices+a),16),this.N,(w,C)=>{if(w){_(w);return}this.verifierDevices=$s(C),h()})})})}getPasswordAuthenticationKey(s){return se(this,arguments,function*({username:t,password:n,serverBValue:r,salt:a}){if(r.mod(this.N).equals(lt.ZERO))throw new Error("B cannot be zero.");let h=Rz({A:this.A,B:r}),_=`${this.userPoolName}${t}:${n}`,w=my(_),C=new lt(Yp($s(a)+w),16),T=yield Mz({a:this.a,g:this.g,k:this.k,x:C,B:r,N:this.N,U:h}),F=this.encoder.convert("Caldera Derived Key"),B=this.encoder.convert(""),$=new Uint8Array(F.byteLength+B.byteLength);return $.set(F,0),$.set(B,F.byteLength),kz(Ra($s(T)),Ra($s(h)),$)})}};var Fz=r=>se(void 0,[r],function*({a:e,g:t,N:n}){return new Promise((a,s)=>{t.modPow(e,n,(h,_)=>{if(h){s(h);return}if(_.mod(n).equals(lt.ZERO)){s(new Error("Illegal parameter. A mod N cannot be 0."));return}a(_)})})});var gy=e=>se(void 0,null,function*(){let t=new lt(Pz,16),n=new lt("2",16),r=vee(),a=yield Fz({a:r,g:n,N:t});return new Nw({userPoolName:e,a:r,g:n,A:a,N:t})}),vee=()=>{let e=Kp(Xp(128));return new lt(e,16)};var _ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],xee=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zT=()=>{let e=new Date,t=xee[e.getUTCDay()],n=_ee[e.getUTCMonth()],r=e.getUTCDate(),a=e.getUTCHours();a<10&&(a=`0${a}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let h=e.getUTCSeconds();h<10&&(h=`0${h}`);let _=e.getUTCFullYear();return`${t} ${n} ${r} ${a}:${s}:${h} UTC ${_}`};var UT=({userPoolName:e,username:t,challengeParameters:n,dateNow:r,hkdf:a})=>{let s=Gp.convert(e),h=Gp.convert(t),_=wee(n.SECRET_BLOCK),w=Gp.convert(r),C=new Uint8Array(s.byteLength+h.byteLength+_.byteLength+w.byteLength);C.set(s,0),C.set(h,s.byteLength),C.set(_,s.byteLength+h.byteLength),C.set(w,s.byteLength+h.byteLength+_.byteLength);let T=new Ml(a);T.update(C);let F=T.digestSync();return Ta.convert(F)},wee=e=>{let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),r=Kg.convert(n),a=new Uint8Array(r.length);for(let s=0;s<r.length;++s)a[s]=r.charCodeAt(s);return a};function vr({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;let r=window.AmazonCognitoAdvancedSecurityData;if(typeof r>"u")return;let a=r.getData(e,t,n);return a?{EncodedData:a}:{}}var BT="userAttributes.";function bee(h){return se(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:r,config:a,tokenOrchestrator:s}){let{userPoolId:_,userPoolClientId:w,userPoolEndpoint:C}=a,T={USERNAME:r,ANSWER:e},F=yield s?.getDeviceMetadata(r);F&&F.deviceKey&&(T.DEVICE_KEY=F.deviceKey);let B=vr({username:r,userPoolId:_,userPoolClientId:w}),$={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:T,Session:n,ClientMetadata:t,ClientId:w,UserContextData:B},ie=yield Aa({endpointResolver:dn({endpointOverride:C})})({region:un(_),userAgentValue:Dn(Ot.ConfirmSignIn)},$);return ie.ChallengeName==="DEVICE_SRP_AUTH"?Fw({username:r,config:a,clientMetadata:t,session:ie.Session,tokenOrchestrator:s}):ie})}function See(h){return se(this,arguments,function*({challengeResponse:e,username:t,clientMetadata:n,session:r,deviceName:a,config:s}){let{userPoolId:_,userPoolClientId:w,userPoolEndpoint:C}=s,T={USERNAME:t},F=bz({endpointResolver:dn({endpointOverride:C})}),{Session:B}=yield F({region:un(_),userAgentValue:Dn(Ot.ConfirmSignIn)},{UserCode:e,Session:r,FriendlyDeviceName:a});Ma.dispatch({type:"SET_SIGN_IN_SESSION",value:B});let $={ChallengeName:"MFA_SETUP",ChallengeResponses:T,Session:B,ClientMetadata:n,ClientId:w};return Aa({endpointResolver:dn({endpointOverride:C})})({region:un(_)},$)})}function Cee(s){return se(this,arguments,function*({challengeResponse:e,username:t,clientMetadata:n,session:r,config:a}){let{userPoolId:h,userPoolClientId:_,userPoolEndpoint:w}=a;Pn(e==="TOTP"||e==="SMS",Pt.IncorrectMFAMethod);let C={USERNAME:t,ANSWER:Ree(e)},T=vr({username:t,userPoolId:h,userPoolClientId:_}),F={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:C,Session:r,ClientMetadata:n,ClientId:_,UserContextData:T};return Aa({endpointResolver:dn({endpointOverride:w})})({region:un(h),userAgentValue:Dn(Ot.ConfirmSignIn)},F)})}function Iee(s){return se(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:r,config:a}){let{userPoolId:h,userPoolClientId:_,userPoolEndpoint:w}=a,C={USERNAME:r,SMS_MFA_CODE:e},T=vr({username:r,userPoolId:h,userPoolClientId:_}),F={ChallengeName:"SMS_MFA",ChallengeResponses:C,Session:n,ClientMetadata:t,ClientId:_,UserContextData:T};return Aa({endpointResolver:dn({endpointOverride:w})})({region:un(h),userAgentValue:Dn(Ot.ConfirmSignIn)},F)})}function Eee(s){return se(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:r,config:a}){let{userPoolId:h,userPoolClientId:_,userPoolEndpoint:w}=a,C={USERNAME:r,SOFTWARE_TOKEN_MFA_CODE:e},T=vr({username:r,userPoolId:h,userPoolClientId:_}),F={ChallengeName:"SOFTWARE_TOKEN_MFA",ChallengeResponses:C,Session:n,ClientMetadata:t,ClientId:_,UserContextData:T};return Aa({endpointResolver:dn({endpointOverride:w})})({region:un(h),userAgentValue:Dn(Ot.ConfirmSignIn)},F)})}function Tee(h){return se(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:r,requiredAttributes:a,config:s}){let{userPoolId:_,userPoolClientId:w,userPoolEndpoint:C}=s,T=Me(Z({},Pee(a)),{NEW_PASSWORD:e,USERNAME:r}),F=vr({username:r,userPoolId:_,userPoolClientId:w}),B={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:T,ClientMetadata:t,Session:n,ClientId:w,UserContextData:F};return Aa({endpointResolver:dn({endpointOverride:C})})({region:un(_),userAgentValue:Dn(Ot.ConfirmSignIn)},B)})}function Oz(e,t,n,r,a){return se(this,null,function*(){let{userPoolClientId:s,userPoolId:h,userPoolEndpoint:_}=r,w={USERNAME:e,PASSWORD:t},C=yield a.getDeviceMetadata(e);C&&C.deviceKey&&(w.DEVICE_KEY=C.deviceKey);let T=vr({username:e,userPoolId:h,userPoolClientId:s}),F={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:w,ClientMetadata:n,ClientId:s,UserContextData:T},$=yield kd({endpointResolver:dn({endpointOverride:_})})({region:un(h),userAgentValue:Dn(Ot.SignIn)},F),ee=$.ChallengeParameters?.USERNAME??$.ChallengeParameters?.USER_ID_FOR_SRP??e;return Lw(ee),$.ChallengeName==="DEVICE_SRP_AUTH"?Fw({username:ee,config:r,clientMetadata:n,session:$.Session,tokenOrchestrator:a}):$})}function Lz(e,t,n,r,a){return se(this,null,function*(){let{userPoolId:s,userPoolClientId:h,userPoolEndpoint:_}=r,w=s?.split("_")[1]||"",C=yield gy(w),T={USERNAME:e,SRP_A:C.A.toString(16)},F=vr({username:e,userPoolId:s,userPoolClientId:h}),B={AuthFlow:"USER_SRP_AUTH",AuthParameters:T,ClientMetadata:n,ClientId:h,UserContextData:F},ee=yield kd({endpointResolver:dn({endpointOverride:_})})({region:un(s),userAgentValue:Dn(Ot.SignIn)},B),{ChallengeParameters:ie,Session:ye}=ee,ve=ie?.USERNAME??e;return Lw(ve),Nd(Bz,[t,ie,n,ye,C,r,a],ve,a)})}function zz(e,t,n,r){return se(this,null,function*(){let{userPoolClientId:a,userPoolId:s,userPoolEndpoint:h}=n,_={USERNAME:e},w=yield r.getDeviceMetadata(e);w&&w.deviceKey&&(_.DEVICE_KEY=w.deviceKey);let C=vr({username:e,userPoolId:s,userPoolClientId:a}),T={AuthFlow:"CUSTOM_AUTH",AuthParameters:_,ClientMetadata:t,ClientId:a,UserContextData:C},B=yield kd({endpointResolver:dn({endpointOverride:h})})({region:un(s),userAgentValue:Dn(Ot.SignIn)},T),$=B.ChallengeParameters?.USERNAME??e;return Lw($),B.ChallengeName==="DEVICE_SRP_AUTH"?Fw({username:$,config:n,clientMetadata:t,session:B.Session,tokenOrchestrator:r}):B})}function Uz(e,t,n,r,a){return se(this,null,function*(){bt(r);let{userPoolId:s,userPoolClientId:h,userPoolEndpoint:_}=r,w=s?.split("_")[1]||"",C=yield gy(w),T={USERNAME:e,SRP_A:C.A.toString(16),CHALLENGE_NAME:"SRP_A"},F=vr({username:e,userPoolId:s,userPoolClientId:h}),B={AuthFlow:"CUSTOM_AUTH",AuthParameters:T,ClientMetadata:n,ClientId:h,UserContextData:F},$=kd({endpointResolver:dn({endpointOverride:_})}),{ChallengeParameters:ee,Session:ie}=yield $({region:un(s),userAgentValue:Dn(Ot.SignIn)},B),ye=ee?.USERNAME??e;return Lw(ye),Nd(Bz,[t,ee,n,ie,C,r,a],ye,a)})}function Fw(s){return se(this,arguments,function*({username:e,config:t,clientMetadata:n,session:r,tokenOrchestrator:a}){let{userPoolId:h,userPoolEndpoint:_}=t,w=t.userPoolClientId,C=yield a?.getDeviceMetadata(e);kT(C);let T=yield gy(C.deviceGroupKey),F={USERNAME:e,SRP_A:T.A.toString(16),DEVICE_KEY:C.deviceKey},B={ChallengeName:"DEVICE_SRP_AUTH",ClientId:w,ChallengeResponses:F,ClientMetadata:n,Session:r},$=Aa({endpointResolver:dn({endpointOverride:_})}),{ChallengeParameters:ee,Session:ie}=yield $({region:un(h)},B);return Dee(e,ee,n,ie,T,t,a)})}function Dee(C,T,F,B,$,ee,ie){return se(this,arguments,function*(e,t,n,r,a,{userPoolId:s,userPoolClientId:h,userPoolEndpoint:_},w){let ye=yield w?.getDeviceMetadata(e);kT(ye);let ve=new lt(t?.SRP_B,16),Ae=new lt(t?.SALT,16),{deviceKey:ke}=ye,{deviceGroupKey:Ve}=ye,Ge=yield a.getPasswordAuthenticationKey({username:ye.deviceKey,password:ye.randomPassword,serverBValue:ve,salt:Ae}),it=zT(),ut={USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:it,PASSWORD_CLAIM_SIGNATURE:UT({username:ke,userPoolName:Ve,challengeParameters:t,dateNow:it,hkdf:Ge}),DEVICE_KEY:ke},Mt=vr({username:e,userPoolId:s,userPoolClientId:h}),nt={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:h,ChallengeResponses:ut,Session:r,ClientMetadata:n,UserContextData:Mt};return Aa({endpointResolver:dn({endpointOverride:_})})({region:un(s)},nt)})}function Bz(e,t,n,r,a,s,h){return se(this,null,function*(){let{userPoolId:_,userPoolClientId:w,userPoolEndpoint:C}=s,T=_?.split("_")[1]||"",F=new lt(t?.SRP_B,16),B=new lt(t?.SALT,16),$=t?.USER_ID_FOR_SRP;if(!$)throw new gt({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});let ee=yield a.getPasswordAuthenticationKey({username:$,password:e,serverBValue:F,salt:B}),ie=zT(),ye={USERNAME:$,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:ie,PASSWORD_CLAIM_SIGNATURE:UT({username:$,userPoolName:T,challengeParameters:t,dateNow:ie,hkdf:ee})},ve=yield h.getDeviceMetadata($);ve&&ve.deviceKey&&(ye.DEVICE_KEY=ve.deviceKey);let Ae=vr({username:$,userPoolId:_,userPoolClientId:w}),ke={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:ye,ClientMetadata:n,Session:r,ClientId:w,UserContextData:Ae},Ge=yield Aa({endpointResolver:dn({endpointOverride:C})})({region:un(_)},ke);return Ge.ChallengeName==="DEVICE_SRP_AUTH"?Fw({username:$,config:s,clientMetadata:n,session:Ge.Session,tokenOrchestrator:h}):Ge})}function ka(e){return se(this,null,function*(){let{challengeName:t,challengeParameters:n}=e,r=kt.getConfig().Auth?.Cognito;switch(bt(r),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{let{signInSession:a,username:s}=Ma.getState();if(!Nee(n,"TOTP"))throw new gt({name:Rl.SignInException,message:`Cannot initiate MFA setup from available types: ${VT(jT(n.MFAS_CAN_SETUP))}`});let h=Sz({endpointResolver:dn({endpointOverride:r.userPoolEndpoint})}),{Session:_,SecretCode:w}=yield h({region:un(r.userPoolId)},{Session:a});return Ma.dispatch({type:"SET_SIGN_IN_SESSION",value:_}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Aee(w,s)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Mee(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:VT(jT(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new gt({name:Rl.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})})}function Aee(e,t){return{sharedSecret:e,getSetupUri:(n,r)=>{let a=`otpauth://totp/${n}:${r??t}?secret=${e}&issuer=${n}`;return new Ho(a)}}}function Na(e){if(e===Dw.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===Dw.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function Mee(e){return e?JSON.parse(e).map(n=>n.includes(BT)?n.replace(BT,""):n):[]}function Pee(e){if(!e)return{};let t={};return Object.entries(e).forEach(([n,r])=>{r&&(t[`${BT}${n}`]=r)}),t}function Vz(e,t,n,r,a,s,h,_){return se(this,null,function*(){let w=_?.userAttributes,C=_?.friendlyDeviceName;switch(t){case"SMS_MFA":return Iee({challengeResponse:r,clientMetadata:h,session:n,username:e,config:a});case"SELECT_MFA_TYPE":return Cee({challengeResponse:r,clientMetadata:h,session:n,username:e,config:a});case"MFA_SETUP":return See({challengeResponse:r,clientMetadata:h,session:n,username:e,deviceName:C,config:a});case"NEW_PASSWORD_REQUIRED":return Tee({challengeResponse:r,clientMetadata:h,session:n,username:e,requiredAttributes:w,config:a});case"CUSTOM_CHALLENGE":return Nd(bee,[{challengeResponse:r,clientMetadata:h,session:n,username:e,config:a,tokenOrchestrator:s}],e,s);case"SOFTWARE_TOKEN_MFA":return Eee({challengeResponse:r,clientMetadata:h,session:n,username:e,config:a})}throw new gt({name:Rl.SignInException,message:`An error occurred during the sign in process. 
		${t} challengeName returned by the underlying service was not addressed.`})})}function Ree(e){let t="SMS_MFA";return e==="TOTP"&&(t="SOFTWARE_TOKEN_MFA"),t}function kee(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function VT(e){if(e)return e.map(kee).filter(Boolean)}function jT(e){return e?JSON.parse(e):[]}function Nee(e,t){let{MFAS_CAN_SETUP:n}=e,r=VT(jT(n));return r?r.includes(t):!1}function Ow(){return se(this,null,function*(){let e;try{e=yield kl()}catch{}if(e&&e.userId&&e.username)throw new gt({name:uz,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})})}function Fa(a){return se(this,arguments,function*({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:r}){if(!n)return;let s=e.split("_")[1]||"",h=yield gy(s),_=n?.DeviceKey,w=n?.DeviceGroupKey;try{yield h.generateHashDevice(w??"",_??"")}catch{return}let C={Salt:Ta.convert(Ra(h.getSaltToHashDevices())),PasswordVerifier:Ta.convert(Ra(h.getVerifierDevices()))},T=h.getRandomPassword();try{return yield Cz({endpointResolver:dn({endpointOverride:t})})({region:un(e)},{AccessToken:r,DeviceName:yield vT(),DeviceKey:n?.DeviceKey,DeviceSecretVerifierConfig:C}),{deviceKey:_,deviceGroupKey:w,randomPassword:T}}catch{return}})}function Nd(e,t,n,r){return se(this,null,function*(){try{return yield e(...t)}catch(a){if(a instanceof gt&&a.name==="ResourceNotFoundException"&&a.message.includes("Device does not exist."))return yield r.clearDeviceMetadata(n),e(...t);throw a}})}function Lw(e){let{dispatch:t}=Ma;t({type:"SET_USERNAME",value:e})}function Qc(e){return Ma.getState().username??e}var Fee=r=>se(void 0,[r],function*({tokens:e,authConfig:t,username:n}){bt(t?.Cognito);let{userPoolId:a,userPoolClientId:s,userPoolEndpoint:h}=t.Cognito,_=un(a);Mw(e);let w=e.refreshToken,C={REFRESH_TOKEN:w};e.deviceMetadata?.deviceKey&&(C.DEVICE_KEY=e.deviceMetadata.deviceKey);let T=vr({username:n,userPoolId:a,userPoolClientId:s}),F=kd({endpointResolver:dn({endpointOverride:h})}),{AuthenticationResult:B}=yield F({region:_},{ClientId:s,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:C,UserContextData:T}),$=Ui(B?.AccessToken??""),ee=B?.IdToken?Ui(B.IdToken):void 0,{iat:ie}=$.payload;if(!ie)throw new gt({name:"iatNotFoundException",message:"iat not found in access token"});let ye=ie*1e3-new Date().getTime();return{accessToken:$,idToken:ee,clockDrift:ye,refreshToken:w,username:n}}),jz=yT(Fee);var $z={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var zw=function(e){return e.InvalidAuthTokens="InvalidAuthTokens",e}(zw||{}),Oee={[zw.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},qz=Dl(Oee);var Uw=class{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new gt({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}loadTokens(){return se(this,null,function*(){try{let t=yield this.getAuthKeys(),n=yield this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new gt({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let r=Ui(n),a=yield this.getKeyValueStorage().getItem(t.idToken),s=a?Ui(a):void 0,h=(yield this.getKeyValueStorage().getItem(t.refreshToken))??void 0,_=(yield this.getKeyValueStorage().getItem(t.clockDrift))??"0",w=Number.parseInt(_),C=yield this.getKeyValueStorage().getItem(t.signInDetails),T={accessToken:r,idToken:s,refreshToken:h,deviceMetadata:(yield this.getDeviceMetadata())??void 0,clockDrift:w,username:yield this.getLastAuthUser()};return C&&(T.signInDetails=JSON.parse(C)),T}catch{return null}})}storeTokens(t){return se(this,null,function*(){qz(t!==void 0,zw.InvalidAuthTokens),yield this.clearTokens();let n=t.username;yield this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);let r=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken&&(yield this.getKeyValueStorage().setItem(r.idToken,t.idToken.toString())),t.refreshToken&&(yield this.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken)),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&(yield this.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey)),t.deviceMetadata.deviceGroupKey&&(yield this.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey)),yield this.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&(yield this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails))),yield this.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)})}clearTokens(){return se(this,null,function*(){let t=yield this.getAuthKeys();yield Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])})}getDeviceMetadata(t){return se(this,null,function*(){let n=yield this.getAuthKeys(t),r=yield this.getKeyValueStorage().getItem(n.deviceKey),a=yield this.getKeyValueStorage().getItem(n.deviceGroupKey),s=yield this.getKeyValueStorage().getItem(n.randomPasswordKey);return s&&a&&r?{deviceKey:r,deviceGroupKey:a,randomPassword:s}:null})}clearDeviceMetadata(t){return se(this,null,function*(){let n=yield this.getAuthKeys(t);yield Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])})}getAuthKeys(t){return se(this,null,function*(){bt(this.authConfig?.Cognito);let n=t??(yield this.getLastAuthUser());return Lee(this.name,`${this.authConfig.Cognito.userPoolClientId}.${n}`)})}getLastAuthUserKey(){bt(this.authConfig?.Cognito);let t=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${t}.LastAuthUser`}getLastAuthUser(){return se(this,null,function*(){return(yield this.getKeyValueStorage().getItem(this.getLastAuthUserKey()))??"username"})}setOAuthMetadata(t){return se(this,null,function*(){let{oauthMetadata:n}=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(n,JSON.stringify(t))})}getOAuthMetadata(){return se(this,null,function*(){let{oauthMetadata:t}=yield this.getAuthKeys(),n=yield this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)})}},Lee=(e,t)=>yy($z)(`${e}`,t);function yy(e){let t=Object.values(Z({},e));return(n,r)=>t.reduce((a,s)=>Me(Z({},a),{[s]:`${n}.${r}.${s}`}),{})}var Hz="amplify-signin-with-hostedUI",Oa="CognitoIdentityServiceProvider",Jp=class{constructor(t){this.keyValueStorage=t}clearOAuthInflightData(){return se(this,null,function*(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId);yield Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])})}clearOAuthData(){return se(this,null,function*(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId);return yield this.clearOAuthInflightData(),yield this.keyValueStorage.removeItem(Hz),this.keyValueStorage.removeItem(t.oauthSignIn)})}loadOAuthState(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){bt(this.cognitoConfig);let n=La(Oa,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){bt(this.cognitoConfig);let n=La(Oa,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}loadOAuthInFlight(){return se(this,null,function*(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId);return(yield this.keyValueStorage.getItem(t.inflightOAuth))==="true"})}storeOAuthInFlight(t){return se(this,null,function*(){bt(this.cognitoConfig);let n=La(Oa,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)})}loadOAuthSignIn(){return se(this,null,function*(){bt(this.cognitoConfig);let t=La(Oa,this.cognitoConfig.userPoolClientId),n=yield this.keyValueStorage.getItem(Hz),[r,a]=(yield this.keyValueStorage.getItem(t.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:r==="true"||n==="true",preferPrivateSession:a==="true"}})}storeOAuthSignIn(t,n=!1){return se(this,null,function*(){bt(this.cognitoConfig);let r=La(Oa,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(r.oauthSignIn,`${t},${n}`)})}},La=(e,t)=>yy(_z)(e,t);var Hr=new Jp(Go);var $T=[],Gz=e=>{$T.push(e)},Bw=()=>{for(;$T.length;)$T.pop()?.()};var Vw=class{constructor(){this.waitForInflightOAuth=bd()?()=>se(this,null,function*(){if(yield Hr.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{Gz(t)}),this.inflightPromise)}):()=>se(this,null,function*(){})}setAuthConfig(t){Hr.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new gt({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new gt({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}getTokens(t){return se(this,null,function*(){let n;try{bt(this.authConfig?.Cognito)}catch{return null}yield this.waitForInflightOAuth(),this.inflightPromise=void 0,n=yield this.getTokenStore().loadTokens();let r=yield this.getTokenStore().getLastAuthUser();if(n===null)return null;let a=!!n?.idToken&&nw({expiresAt:(n.idToken?.payload?.exp??0)*1e3,clockDrift:n.clockDrift??0}),s=nw({expiresAt:(n.accessToken?.payload?.exp??0)*1e3,clockDrift:n.clockDrift??0});return(t?.forceRefresh||a||s)&&(n=yield this.refreshTokens({tokens:n,username:r}),n===null)?null:{accessToken:n?.accessToken,idToken:n?.idToken,signInDetails:n?.signInDetails}})}refreshTokens(r){return se(this,arguments,function*({tokens:t,username:n}){try{let{signInDetails:a}=t,s=yield this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return s.signInDetails=a,yield this.setTokens({tokens:s}),qr.dispatch("auth",{event:"tokenRefresh"},"Auth",fi),s}catch(a){return this.handleErrors(a)}})}handleErrors(t){if(So(t),t.name!==ms.NetworkError&&this.clearTokens(),qr.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",fi),t.name.startsWith("NotAuthorizedException"))return null;throw t}setTokens(n){return se(this,arguments,function*({tokens:t}){return this.getTokenStore().storeTokens(t)})}clearTokens(){return se(this,null,function*(){return this.getTokenStore().clearTokens()})}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}};var jw=class{constructor(){this.authTokenStore=new Uw,this.authTokenStore.setKeyValueStorage(Go),this.tokenOrchestrator=new Vw,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(jz)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}};var Fd=new jw,{tokenOrchestrator:Sr}=Fd;function Wo(e){return se(this,null,function*(){if(e.AccessToken){let t=Ui(e.AccessToken),n=(t.payload.iat||0)*1e3,r=new Date().getTime(),a=n>0?n-r:0,s,h,_;e.RefreshToken&&(h=e.RefreshToken),e.IdToken&&(s=Ui(e.IdToken)),e?.NewDeviceMetadata&&(_=e.NewDeviceMetadata);let w={accessToken:t,idToken:s,refreshToken:h,clockDrift:a,deviceMetadata:_,username:e.username};e?.signInDetails&&(w.signInDetails=e.signInDetails),yield Sr.setTokens({tokens:w})}else throw new Or({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})})}var zee="Unable to get user session following successful sign-in.",_s=()=>se(void 0,null,function*(){try{qr.dispatch("auth",{event:"signedIn",data:yield kl()},"Auth",fi)}catch(e){throw e.name===Hp?new gt({name:yz,message:zee,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}});function Wz(e){return se(this,null,function*(){let t=kt.getConfig().Auth?.Cognito;bt(t);let{username:n,password:r,options:a}=e,s={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},h=a?.clientMetadata;Pn(!!n,Pt.EmptySignInUsername),Pn(!r,Pt.CustomAuthSignInPassword);try{let{ChallengeName:_,ChallengeParameters:w,AuthenticationResult:C,Session:T}=yield Nd(zz,[n,h,t,Sr],n,Sr),F=Qc(n);return Pa({signInSession:T,username:F,challengeName:_,signInDetails:s}),C?(Co(),yield Wo(Me(Z({username:F},C),{NewDeviceMetadata:yield Fa({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:C.NewDeviceMetadata,accessToken:C.AccessToken}),signInDetails:s})),yield _s(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ka({challengeName:_,challengeParameters:w})}catch(_){Co(),So(_);let w=Na(_.name);if(w)return w;throw _}})}function Zz(e){return se(this,null,function*(){let{username:t,password:n,options:r}=e,a={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=kt.getConfig().Auth?.Cognito;bt(s);let h=r?.clientMetadata;Pn(!!t,Pt.EmptySignInUsername),Pn(!!n,Pt.EmptySignInPassword);try{let{ChallengeName:_,ChallengeParameters:w,AuthenticationResult:C,Session:T}=yield Uz(t,n,h,s,Sr),F=Qc(t);return Pa({signInSession:T,username:F,challengeName:_,signInDetails:a}),C?(yield Wo(Me(Z({username:F},C),{NewDeviceMetadata:yield Fa({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:C.NewDeviceMetadata,accessToken:C.AccessToken}),signInDetails:a})),Co(),yield _s(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ka({challengeName:_,challengeParameters:w})}catch(_){Co(),So(_);let w=Na(_.name);if(w)return w;throw _}})}function qT(e){return se(this,null,function*(){let{username:t,password:n}=e,r=kt.getConfig().Auth?.Cognito,a={loginId:t,authFlowType:"USER_SRP_AUTH"};bt(r);let s=e.options?.clientMetadata;Pn(!!t,Pt.EmptySignInUsername),Pn(!!n,Pt.EmptySignInPassword);try{let{ChallengeName:h,ChallengeParameters:_,AuthenticationResult:w,Session:C}=yield Lz(t,n,s,r,Sr),T=Qc(t);return Pa({signInSession:C,username:T,challengeName:h,signInDetails:a}),w?(Co(),yield Wo(Me(Z({username:T},w),{NewDeviceMetadata:yield Fa({userPoolId:r.userPoolId,userPoolEndpoint:r.userPoolEndpoint,newDeviceMetadata:w.NewDeviceMetadata,accessToken:w.AccessToken}),signInDetails:a})),yield _s(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ka({challengeName:h,challengeParameters:_})}catch(h){Co(),So(h);let _=Na(h.name);if(_)return _;throw h}})}function Kz(e){return se(this,null,function*(){let{username:t,password:n,options:r}=e,a=kt.getConfig().Auth?.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};bt(a);let h=r?.clientMetadata;Pn(!!t,Pt.EmptySignInUsername),Pn(!!n,Pt.EmptySignInPassword);try{let{ChallengeName:_,ChallengeParameters:w,AuthenticationResult:C,Session:T}=yield Nd(Oz,[t,n,h,a,Sr],t,Sr),F=Qc(t);return Pa({signInSession:T,username:F,challengeName:_,signInDetails:s}),C?(yield Wo(Me(Z({},C),{username:F,NewDeviceMetadata:yield Fa({userPoolId:a.userPoolId,userPoolEndpoint:a.userPoolEndpoint,newDeviceMetadata:C.NewDeviceMetadata,accessToken:C.AccessToken}),signInDetails:s})),Co(),yield _s(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ka({challengeName:_,challengeParameters:w})}catch(_){Co(),So(_);let w=Na(_.name);if(w)return w;throw _}})}function Qp(e){return se(this,null,function*(){let t=e.options?.authFlowType;switch(yield Ow(),t){case"USER_SRP_AUTH":return qT(e);case"USER_PASSWORD_AUTH":return Kz(e);case"CUSTOM_WITHOUT_SRP":return Wz(e);case"CUSTOM_WITH_SRP":return Zz(e);default:return qT(e)}})}var Yz=()=>se(void 0,null,function*(){throw new gt({name:Aw,message:"The autoSignIn flow has not started, or has been cancelled/completed.",recoverySuggestion:"Please try to use the signIn API or log out before starting a new autoSignIn flow."})}),vy=Yz;function _y(e){vy=e}function Od(){vy=Yz}var Xz=3*60*1e3;function Jz(e){let t=xd.listen("auth-internal",a=>se(this,[a],function*({payload:r}){switch(r.event){case"confirmSignUp":r.data?.isSignUpComplete&&(xd.dispatch("auth-internal",{event:"autoSignIn"}),_y(iU(e)),t())}})),n=setTimeout(()=>{t(),eu(!1),clearTimeout(n),Od()},Xz)}function Qz(e,t){let n;return r=>{n||e(...r),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}function Uee(e,t,n){let r=Date.now(),a=setInterval(()=>se(this,null,function*(){if(Date.now()-r>Xz)clearInterval(a),eu(!1),n(new gt({name:Aw,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),Od();else try{let _=yield Qp(e);_.nextStep.signInStep!=="CONFIRM_SIGN_UP"&&(t(_),clearInterval(a),eu(!1),Od())}catch(_){clearInterval(a),eu(!1),n(_),Od()}}),5e3)}var Bee=Qz(Uee,300),Vee=Qz(jee,300),eU=!1,tU;function HT(e){tU=e}function nU(e){return tU===e}function Ld(){return eU}function eu(e){e===!1&&HT(void 0),eU=e}function xy(e){return!!e.UserConfirmed}function rU(e){return()=>se(this,null,function*(){return new Promise((t,n)=>{Bee([e,t,n])})})}function jee(e,t,n){return se(this,null,function*(){try{let r=yield Qp(e);t(r),Od()}catch(r){n(r),Od()}})}function iU(e){return()=>se(this,null,function*(){return new Promise((t,n)=>{Vee([e,t,n])})})}var oU=iU;var sU=e=>bn(Gn,qn("SignUp"),Hn(),Z(Z({},Wn),e));function GT(e){return se(this,null,function*(){let{username:t,password:n,options:r}=e,a=kt.getConfig().Auth?.Cognito,s=a?.signUpVerificationMethod??"code",{clientMetadata:h,validationData:_,autoSignIn:w}=e.options??{};bt(a),Pn(!!t,Pt.EmptySignUpUsername),Pn(!!n,Pt.EmptySignUpPassword);let C=typeof w!="boolean"?w:void 0,T={username:t,options:C};C?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(T.password=n),(C||w===!0)&&(HT(t),eu(!0));let{userPoolId:F,userPoolClientId:B,userPoolEndpoint:$}=a,ie=yield sU({endpointResolver:dn({endpointOverride:$})})({region:un(F),userAgentValue:Dn(Ot.SignUp)},{Username:t,Password:n,UserAttributes:r?.userAttributes&&RT(r?.userAttributes),ClientMetadata:h,ValidationData:_&&RT(_),ClientId:B,UserContextData:vr({username:t,userPoolId:F,userPoolClientId:B})}),{UserSub:ye,CodeDeliveryDetails:ve}=ie;if(xy(ie)&&Ld())return _y(oU(T)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:ye};if(xy(ie)&&!Ld())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:ye};if(!xy(ie)&&Ld()&&s==="code")Jz(T);else if(!xy(ie)&&Ld()&&s==="link")return _y(rU(T)),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:ve?.DeliveryMedium,destination:ve?.Destination,attributeName:ve?.AttributeName}},userId:ye};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:ve?.DeliveryMedium,destination:ve?.Destination,attributeName:ve?.AttributeName}},userId:ye}})}var aU=e=>bn(Gn,qn("ForgotPassword"),Hn(),Z(Z({},Wn),e));function wy(e){return se(this,null,function*(){let{username:t}=e;Pn(!!t,Pt.EmptyResetPasswordUsername);let n=kt.getConfig().Auth?.Cognito;bt(n);let{userPoolClientId:r,userPoolId:a,userPoolEndpoint:s}=n,h=e.options?.clientMetadata,_=vr({username:t,userPoolId:a,userPoolClientId:r}),T=(yield aU({endpointResolver:dn({endpointOverride:s})})({region:un(a),userAgentValue:Dn(Ot.ResetPassword)},{Username:t,ClientMetadata:h,ClientId:r,UserContextData:_})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:T?.DeliveryMedium,destination:T?.Destination,attributeName:T?.AttributeName}}}})}var lU=e=>bn(Gn,qn("ConfirmForgotPassword"),Hn(),Z(Z({},Wn),e));function WT(e){return se(this,null,function*(){let t=kt.getConfig().Auth?.Cognito;bt(t);let{userPoolClientId:n,userPoolId:r,userPoolEndpoint:a}=t,{username:s,newPassword:h}=e;Pn(!!s,Pt.EmptyConfirmResetPasswordUsername),Pn(!!h,Pt.EmptyConfirmResetPasswordNewPassword);let _=e.confirmationCode;Pn(!!_,Pt.EmptyConfirmResetPasswordConfirmationCode);let w=e.options?.clientMetadata,C=vr({username:s,userPoolId:r,userPoolClientId:n});yield lU({endpointResolver:dn({endpointOverride:a})})({region:un(t.userPoolId),userAgentValue:Dn(Ot.ConfirmResetPassword)},{Username:s,ConfirmationCode:_,Password:h,ClientMetadata:w,ClientId:t.userPoolClientId,UserContextData:C})})}var cU=e=>bn(Gn,qn("ResendConfirmationCode"),Hn(),Z(Z({},Wn),e));function by(e){return se(this,null,function*(){let{username:t}=e;Pn(!!t,Pt.EmptySignUpUsername);let n=kt.getConfig().Auth?.Cognito;bt(n);let{userPoolClientId:r,userPoolId:a,userPoolEndpoint:s}=n,h=e.options?.clientMetadata,_=vr({username:t,userPoolId:a,userPoolClientId:r}),w=cU({endpointResolver:dn({endpointOverride:s})}),{CodeDeliveryDetails:C}=yield w({region:un(n.userPoolId),userAgentValue:Dn(Ot.ResendSignUpCode)},{Username:t,ClientMetadata:h,ClientId:n.userPoolClientId,UserContextData:_}),{DeliveryMedium:T,AttributeName:F,Destination:B}=Z({},C);return{destination:B,deliveryMedium:T,attributeName:F||void 0}})}var uU=e=>bn(Gn,qn("ConfirmSignUp"),Hn(),Z(Z({},Wn),e));function ZT(e){return se(this,null,function*(){let{username:t,confirmationCode:n,options:r}=e,a=kt.getConfig().Auth?.Cognito;bt(a);let{userPoolId:s,userPoolClientId:h,userPoolEndpoint:_}=a,w=r?.clientMetadata;Pn(!!t,Pt.EmptyConfirmSignUpUsername),Pn(!!n,Pt.EmptyConfirmSignUpCode);let C=vr({username:t,userPoolId:s,userPoolClientId:h});return yield uU({endpointResolver:dn({endpointOverride:_})})({region:un(a.userPoolId),userAgentValue:Dn(Ot.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:w,ForceAliasCreation:r?.forceAliasCreation,ClientId:a.userPoolClientId,UserContextData:C}),new Promise((F,B)=>{try{let $={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Ld()||!nU(t)){F($);return}let ee=xd.listen("auth-internal",({payload:ie})=>{switch(ie.event){case"autoSignIn":F({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),eu(!1),ee()}});xd.dispatch("auth-internal",{event:"confirmSignUp",data:$})}catch($){B($)}})})}function Sy(e){return se(this,null,function*(){let{challengeResponse:t,options:n}=e,{username:r,challengeName:a,signInSession:s,signInDetails:h}=Ma.getState(),_=kt.getConfig().Auth?.Cognito;bt(_);let w=n?.clientMetadata;if(Pn(!!t,Pt.EmptyChallengeResponse),!r||!a||!s)throw new gt({name:Rl.SignInException,message:`
			An error occurred during the sign in process. 
			
			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the page is not refreshed until the sign in process is done."});try{let{Session:C,ChallengeName:T,AuthenticationResult:F,ChallengeParameters:B}=yield Vz(r,a,s,t,_,Sr,w,n);return Pa({signInSession:C,username:r,challengeName:T,signInDetails:h}),F?(Co(),yield Wo(Me(Z({username:r},F),{NewDeviceMetadata:yield Fa({userPoolId:_.userPoolId,userPoolEndpoint:_.userPoolEndpoint,newDeviceMetadata:F.NewDeviceMetadata,accessToken:F.AccessToken}),signInDetails:h})),yield _s(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ka({challengeName:T,challengeParameters:B})}catch(C){So(C);let T=Na(C.name);if(T)return T;throw C}})}var dU=e=>bn(Gn,qn("GetUser"),Hn(),Z(Z({},Wn),e));var hU=e=>bn(Gn,qn("VerifyUserAttribute"),Hn(),Z(Z({},Wn),e));function KT(e){return se(this,null,function*(){let t=kt.getConfig().Auth?.Cognito;bt(t);let{userPoolEndpoint:n,userPoolId:r}=t,{confirmationCode:a,userAttributeKey:s}=e;Pn(!!a,Pt.EmptyConfirmUserAttributeCode);let{tokens:h}=yield ny({forceRefresh:!1});Da(h),yield hU({endpointResolver:dn({endpointOverride:n})})({region:un(r),userAgentValue:Dn(Ot.ConfirmUserAttribute)},{AccessToken:h.accessToken.toString(),AttributeName:s,Code:a})})}var BFe=new or("AuthError");var pU={oauthSignInError:{message:mi.OAUTH_ERROR,log:"Make sure Cognito Hosted UI has been configured correctly"},noConfig:{message:mi.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly.
            This error is typically caused by one of the following scenarios:

            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point
                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information
            
            2. There might be multiple conflicting versions of amplify packages in your node_modules.
				Refer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)
        `},missingAuthConfig:{message:mi.DEFAULT_MSG,log:`
            Error: Amplify has not been configured correctly. 
            The configuration object is missing required auth properties.
            This error is typically caused by one of the following scenarios:

            1. Did you run \`amplify push\` after adding auth via \`amplify add auth\`?
                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information

            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.
        `},emptyUsername:{message:mi.EMPTY_USERNAME},invalidUsername:{message:mi.INVALID_USERNAME},emptyPassword:{message:mi.EMPTY_PASSWORD},emptyCode:{message:mi.EMPTY_CODE},signUpError:{message:mi.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:mi.NO_MFA},invalidMFA:{message:mi.INVALID_MFA},emptyChallengeResponse:{message:mi.EMPTY_CHALLENGE},noUserSession:{message:mi.NO_USER_SESSION},deviceConfig:{message:mi.DEVICE_CONFIG},networkError:{message:mi.NETWORK_ERROR},autoSignInError:{message:mi.AUTOSIGNIN_ERROR},default:{message:mi.DEFAULT_MSG}};var za=(e,t)=>new gt({message:e??"An error has occurred during the oauth process.",name:Rl.OAuthSignInError,recoverySuggestion:t??pU.oauthSignInError.log});var YT=function(e){return e.NoConfig="noConfig",e.MissingAuthConfig="missingAuthConfig",e.EmptyUsername="emptyUsername",e.InvalidUsername="invalidUsername",e.EmptyPassword="emptyPassword",e.EmptyCode="emptyCode",e.SignUpError="signUpError",e.NoMFA="noMFA",e.InvalidMFA="invalidMFA",e.EmptyChallengeResponse="emptyChallengeResponse",e.NoUserSession="noUserSession",e.Default="default",e.DeviceConfig="deviceConfig",e.NetworkError="networkError",e.AutoSignInError="autoSignInError",e.OAuthSignInError="oauthSignInError",e}(YT||{});var $ee="`signInWithRedirect` has been canceled.",qee="An error occurred while validating the state.",Hee="Try to initiate an OAuth flow from Amplify",XT=e=>se(void 0,null,function*(){let t=yield Hr.loadOAuthState(),n=e===t?t:void 0;if(!n)throw new gt({name:YT.OAuthSignInError,message:e===null?$ee:qee,recoverySuggestion:e===null?void 0:Hee});return n});var $w=_=>se(void 0,[_],function*({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,responseType:a,domain:s,preferPrivateSession:h}){let w=new Ho(e),C=w.searchParams.get("error"),T=w.searchParams.get("error_description");if(C)throw za(T??C);return a==="code"?Gee({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,domain:s,preferPrivateSession:h}):Wee({currentUrl:e,redirectUri:r,preferPrivateSession:h})}),Gee=h=>se(void 0,[h],function*({currentUrl:e,userAgentValue:t,clientId:n,redirectUri:r,domain:a,preferPrivateSession:s}){let _=new Ho(e),w=_.searchParams.get("code"),C=_.searchParams.get("state");if(!w||!C)throw za("User cancelled OAuth flow.");let T=yield XT(C),F="https://"+a+"/oauth2/token",B=yield Hr.loadPKCE(),$=Z({grant_type:"authorization_code",code:w,client_id:n,redirect_uri:r},B?{code_verifier:B}:{}),ee=Object.entries($).map(([ut,Mt])=>`${encodeURIComponent(ut)}=${encodeURIComponent(Mt)}`).join("&"),{access_token:ie,refresh_token:ye,id_token:ve,error:Ae,error_message:ke,token_type:Ve,expires_in:Ge}=yield(yield fetch(F,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",[rT]:t},body:ee})).json();if(Ae)throw za(ke??Ae);let it=(ie&&Ui(ie).payload.username)??"username";return yield Wo({username:it,AccessToken:ie,IdToken:ve,RefreshToken:ye,TokenType:Ve,ExpiresIn:Ge}),fU({redirectUri:r,state:T,preferPrivateSession:s})}),Wee=r=>se(void 0,[r],function*({currentUrl:e,redirectUri:t,preferPrivateSession:n}){let a=new Ho(e),{id_token:s,access_token:h,state:_,token_type:w,expires_in:C,error_description:T,error:F}=(a.hash??"#").substring(1).split("&").map(ee=>ee.split("=")).reduce((ee,[ie,ye])=>Me(Z({},ee),{[ie]:ye}),{id_token:void 0,access_token:void 0,state:void 0,token_type:void 0,expires_in:void 0,error_description:void 0,error:void 0});if(F)throw za(T??F);if(!h)throw za("No access token returned from OAuth flow.");let B=yield XT(_),$=(h&&Ui(h).payload.username)??"username";return yield Wo({username:$,AccessToken:h,IdToken:s,TokenType:w,ExpiresIn:C}),fU({redirectUri:t,state:B,preferPrivateSession:n})}),fU=r=>se(void 0,[r],function*({redirectUri:e,state:t,preferPrivateSession:n}){yield Sr.setOAuthMetadata({oauthSignIn:!0}),yield Hr.clearOAuthData(),yield Hr.storeOAuthSignIn(!0,n),Bw(),Zee(t)&&qr.dispatch("auth",{event:"customOAuthState",data:mT(Kee(t))},"Auth",fi),qr.dispatch("auth",{event:"signInWithRedirect"},"Auth",fi),yield _s(),Yee(e)}),Zee=e=>/-/.test(e),Kee=e=>e.split("-").splice(1).join("-"),Yee=e=>{typeof window<"u"&&typeof window.history<"u"&&window.history.replaceState(window.history.state,"",e)};function ef(e,t){if(t){let n=e?.find(r=>r===t);if(!n)throw pz;return n}else{let n=e?.find(Xee)??e?.find(Jee),r=e?.find(ete)??e?.find(Qee);if(n)return n;throw r?fz:hz}}var Xee=e=>e.startsWith(String(window.location.origin+window.location.pathname)),Jee=e=>e.includes(String(window.location.hostname)),Qee=e=>e.startsWith("http://"),ete=e=>e.startsWith("https://");var tf=e=>se(void 0,null,function*(){Bw(),yield Hr.clearOAuthInflightData(),qr.dispatch("auth",{event:"signInWithRedirect_failure",data:{error:e}},"Auth",fi)});var mU=e=>se(void 0,null,function*(){try{bt(e),Al(e),Hr.setAuthConfig(e)}catch{return}if(yield Hr.loadOAuthInFlight())try{let t=window.location.href,{loginWith:n,userPoolClientId:r}=e,{domain:a,redirectSignIn:s,responseType:h}=n.oauth,_=ef(s);yield $w({currentUrl:t,clientId:r,domain:a,redirectUri:_,responseType:h,userAgentValue:Dn(Ot.SignInWithRedirect)})}catch(t){yield tf(t)}});bd()&&kt[Yg](mU);var gU={Google:"Google",Facebook:"Facebook",Amazon:"LoginWithAmazon",Apple:"SignInWithApple"};var qw=e=>se(void 0,null,function*(){window?.location&&(window.location.href=e.replace("http://","https://"))});var yU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",vU=e=>{let t=new Uint8Array(e);Zg().getRandomValues(t);let n="",r;for(let a of t)n+=yU.charAt(a%yU.length);return{value:n,method:"S256",toCodeChallenge(){return r||(r=tte(n),r)}}};function tte(e){let t=new Ml;return t.update(e),nte(Ta.convert(t.digestSync(),{urlSafe:!0}))}function nte(e){return e.replace(/=/g,"")}var _U=()=>fT(32);var xU=e=>{function t(n){return se(this,null,function*(){if(n.persisted&&(yield e.loadOAuthInFlight())){let a=za("User cancelled OAuth flow.");yield tf(a)}window.removeEventListener("pageshow",t)})}window.addEventListener("pageshow",t)};function nf(e){return se(this,null,function*(){let t=kt.getConfig().Auth?.Cognito;bt(t),Al(t),Hr.setAuthConfig(t),yield Ow();let n="COGNITO";return typeof e?.provider=="string"?n=gU[e.provider]:e?.provider?.custom&&(n=e.provider.custom),rte({oauthConfig:t.loginWith.oauth,clientId:t.userPoolClientId,provider:n,customState:e?.customState,preferPrivateSession:e?.options?.preferPrivateSession})})}var rte=s=>se(void 0,[s],function*({oauthConfig:e,provider:t,clientId:n,customState:r,preferPrivateSession:a}){let{domain:h,redirectSignIn:_,responseType:w,scopes:C}=e,T=_U(),F=r?`${T}-${gT(r)}`:T,{value:B,method:$,toCodeChallenge:ee}=vU(128),ie=ef(e.redirectSignIn);bd()&&Hr.storeOAuthInFlight(!0),Hr.storeOAuthState(F),Hr.storePKCE(B);let ye=Object.entries(Z({redirect_uri:ie,response_type:w,client_id:n,identity_provider:t,scope:C.join(" "),state:F},w==="code"&&{code_challenge:ee(),code_challenge_method:$})).map(([Ge,it])=>`${encodeURIComponent(Ge)}=${encodeURIComponent(it)}`).join("&"),ve=`https://${h}/oauth2/authorize?${ye}`;xU(Hr);let{type:Ae,error:ke,url:Ve}=(yield qw(ve))??{};try{if(Ae==="error")throw za(String(ke));Ae==="success"&&Ve&&(yield $w({currentUrl:Ve,clientId:n,domain:h,redirectUri:ie,responseType:w,userAgentValue:Dn(Ot.SignInWithRedirect),preferPrivateSession:a}))}catch(Ge){throw yield tf(Ge),Ge}});var wU=e=>se(void 0,null,function*(){let t=e.getConfig().Auth?.Cognito;bt(t);let{userPoolEndpoint:n,userPoolId:r}=t,{tokens:a}=yield ty(e,{forceRefresh:!1});Da(a);let s=dU({endpointResolver:dn({endpointOverride:n})}),{UserAttributes:h}=yield s({region:un(r),userAgentValue:Dn(Ot.FetchUserAttributes)},{AccessToken:a.accessToken.toString()});return cz(h)});var Cy=()=>wU(kt);var bU=e=>se(void 0,null,function*(){yield e.clearOAuthData(),Sr.clearTokens(),yield ry(),qr.dispatch("auth",{event:"signedOut"},"Auth",fi)});var SU=(e,t=!1,n)=>se(void 0,null,function*(){Al(e);let{loginWith:r,userPoolClientId:a}=e,{domain:s,redirectSignOut:h}=r.oauth,_=ef(h,n),w=`https://${s}/logout?${Object.entries({client_id:a,logout_uri:encodeURIComponent(_)}).map(([C,T])=>`${C}=${T}`).join("&")}`;return qw(w)});var CU=(e,t,n,r)=>se(void 0,null,function*(){let{isOAuthSignIn:a}=yield t.loadOAuthSignIn(),s=yield n.getOAuthMetadata();if(yield bU(t),a||s?.oauthSignIn)return SU(e,!1,r)});var IU=e=>bn(Gn,qn("RevokeToken"),Hn(),Z(Z({},Wn),e));var EU=e=>bn(Gn,qn("GlobalSignOut"),Hn(),Z(Z({},Wn),e));var TU=new or("Auth");function JT(e){return se(this,null,function*(){let t=kt.getConfig().Auth?.Cognito;bt(t),e?.global?yield ote(t):yield ite(t);let n;try{Al(t),n=!0}catch{n=!1}if(n){let r=new Jp(Go);r.setAuthConfig(t);let{type:a}=(yield CU(t,r,Sr,e?.oauth?.redirectUrl))??{};if(a==="error")throw new gt({name:mz,message:"An error occurred when attempting to log out from OAuth provider."})}else Sr.clearTokens(),yield ry(),qr.dispatch("auth",{event:"signedOut"},"Auth",fi)})}function ite(e){return se(this,null,function*(){try{let{userPoolEndpoint:t,userPoolId:n,userPoolClientId:r}=e,a=yield Sr.getTokenStore().loadTokens();Mw(a),ste(a.accessToken)&&(yield IU({endpointResolver:dn({endpointOverride:t})})({region:un(n),userAgentValue:Dn(Ot.SignOut)},{ClientId:r,Token:a.refreshToken}))}catch{TU.debug("Client signOut error caught but will proceed with token removal")}})}function ote(e){return se(this,null,function*(){try{let{userPoolEndpoint:t,userPoolId:n}=e,r=yield Sr.getTokenStore().loadTokens();Da(r),yield EU({endpointResolver:dn({endpointOverride:t})})({region:un(n),userAgentValue:Dn(Ot.SignOut)},{AccessToken:r.accessToken.toString()})}catch{TU.debug("Global signOut error caught but will proceed with token removal")}})}var ste=e=>!!e?.payload?.origin_jti;var DU=e=>bn(Gn,qn("GetUserAttributeVerificationCode"),Hn(),Z(Z({},Wn),e));var QT=e=>se(void 0,null,function*(){let{userAttributeKey:t,options:n}=e,r=kt.getConfig().Auth?.Cognito,a=n?.clientMetadata;bt(r);let{userPoolEndpoint:s,userPoolId:h}=r,{tokens:_}=yield ny({forceRefresh:!1});Da(_);let w=DU({endpointResolver:dn({endpointOverride:s})}),{CodeDeliveryDetails:C}=yield w({region:un(h),userAgentValue:Dn(Ot.SendUserAttributeVerificationCode)},{AccessToken:_.accessToken.toString(),ClientMetadata:a,AttributeName:t}),{DeliveryMedium:T,AttributeName:F,Destination:B}=Z({},C);return{destination:B,deliveryMedium:T,attributeName:F}});var AU={identityId:"identityId"};var ate=new or("DefaultIdentityIdStore"),Hw=class{setAuthConfig(t){wd(t.Cognito),this.authConfig=t,this._authKeys=lte("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}loadIdentityId(){return se(this,null,function*(){wd(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let t=yield this.keyValueStorage.getItem(this._authKeys.identityId);return t?(this._hasGuestIdentityId=!0,{id:t,type:"guest"}):null}}catch(t){return ate.log("Error getting stored IdentityId.",t),null}})}storeIdentityId(t){return se(this,null,function*(){wd(this.authConfig?.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))})}clearIdentityId(){return se(this,null,function*(){this._primaryIdentityId=void 0,yield this.keyValueStorage.removeItem(this._authKeys.identityId)})}},lte=(e,t)=>yy(AU)(`com.amplify.${e}`,t);function Gw(e){let t=Ui(e).payload.iss,n={};if(!t)throw new gt({name:"InvalidIdTokenException",message:"Invalid Idtoken."});let r=t.replace(/(^\w+:|^)\/\//,"");return n[r]=e,n}var cte=new or("CognitoIdentityIdProvider");function PU(r){return se(this,arguments,function*({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let a=yield n.loadIdentityId();if(e){if(a&&a.type==="primary")return a.id;{let s=e.idToken?Gw(e.idToken.toString()):{},h=yield MU(s,t);a&&a.id===h&&cte.debug(`The guest identity ${a.id} has become the primary identity.`),a={id:h,type:"primary"}}}else{if(a&&a.type==="guest")return a.id;a={id:yield MU({},t),type:"guest"}}return n.storeIdentityId(a),a.id})}function MU(e,t){return se(this,null,function*(){let n=t?.identityPoolId,r=fy(n),a=(yield uT({region:r},{IdentityPoolId:n,Logins:e})).IdentityId;if(!a)throw new gt({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return a})}var Ww=new or("CognitoCredentialsProvider"),RU=50*60*1e3,Zw=class{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}clearCredentialsAndIdentityId(){return se(this,null,function*(){Ww.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,yield this._identityIdStore.clearIdentityId()})}clearCredentials(){return se(this,null,function*(){Ww.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0})}getCredentialsAndIdentityId(t){return se(this,null,function*(){let n=t.authenticated,{tokens:r}=t,{authConfig:a}=t;try{wd(a?.Cognito)}catch{return}if(!n&&!a.Cognito.allowGuestAccess)return;let{forceRefresh:s}=t,h=this.hasTokenChanged(r),_=yield PU({tokens:r,authConfig:a.Cognito,identityIdStore:this._identityIdStore});return(s||h)&&this.clearCredentials(),n?(vz(r),this.credsForOIDCTokens(a.Cognito,r,_)):this.getGuestCredentials(_,a.Cognito)})}getGuestCredentials(t,n){return se(this,null,function*(){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return Ww.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let r=fy(n.identityPoolId),a=yield mw({region:r},{IdentityId:t});if(a.Credentials&&a.Credentials.AccessKeyId&&a.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+RU;let s={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:t},h=a.IdentityId;return h&&(s.identityId=h,this._identityIdStore.storeIdentityId({id:h,type:"guest"})),this._credentialsAndIdentityId=Me(Z({},s),{isAuthenticatedCreds:!1}),s}else throw new gt({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}credsForOIDCTokens(t,n,r){return se(this,null,function*(){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return Ww.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let a=n.idToken?Gw(n.idToken.toString()):{},s=fy(t.identityPoolId),h=yield mw({region:s},{IdentityId:r,Logins:a});if(h.Credentials&&h.Credentials.AccessKeyId&&h.Credentials.SecretKey){let _={credentials:{accessKeyId:h.Credentials.AccessKeyId,secretAccessKey:h.Credentials.SecretKey,sessionToken:h.Credentials.SessionToken,expiration:h.Credentials.Expiration},identityId:r};this._credentialsAndIdentityId=Me(Z({},_),{isAuthenticatedCreds:!0,associatedIdToken:n.idToken?.toString()}),this._nextCredentialsRefresh=new Date().getTime()+RU;let w=h.IdentityId;return w&&(_.identityId=w,this._identityIdStore.storeIdentityId({id:w,type:"primary"})),_}else throw new gt({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){return!!t&&!!this._credentialsAndIdentityId?.associatedIdToken&&t.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}};var eD=new Zw(new Hw(Go));var Iy={configure(e,t){let n=Xg(e);if(!n.Auth){kt.configure(n,t);return}if(t?.Auth){kt.configure(n,t);return}if(!kt.libraryOptions.Auth){Fd.setAuthConfig(n.Auth),Fd.setKeyValueStorage(t?.ssr?new Td({sameSite:"lax"}):Go),kt.configure(n,Me(Z({},t),{Auth:{tokenProvider:Fd,credentialsProvider:eD}}));return}if(t){t.ssr!==void 0&&Fd.setKeyValueStorage(t.ssr?new Td({sameSite:"lax"}):Go),kt.configure(n,Z({Auth:kt.libraryOptions.Auth},t));return}kt.configure(n)},getConfig(){return kt.getConfig()}};var pf={};pP(pf,{actionTypes:()=>oD,after:()=>pD,assign:()=>hD,cancel:()=>sb,choose:()=>eB,done:()=>hf,doneInvoke:()=>ru,error:()=>iu,escalate:()=>yte,forwardTo:()=>fD,getActionFunction:()=>Ny,initEvent:()=>Va,isActionObject:()=>gte,log:()=>YU,pure:()=>QU,raise:()=>ib,resolveActions:()=>jd,resolveLog:()=>XU,resolveRaise:()=>WU,resolveSend:()=>ZU,resolveStop:()=>JU,respond:()=>fte,send:()=>nu,sendParent:()=>ob,sendTo:()=>KU,sendUpdate:()=>uD,start:()=>dD,stop:()=>ab,toActionObject:()=>$d,toActionObjects:()=>qs,toActivityDefinition:()=>Fy});var Oe=function(){return Oe=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Oe.apply(this,arguments)};function rf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function an(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function cn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,s=[],h;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)s.push(a.value)}catch(_){h={error:_}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(h)throw h.error}}return s}function Rn(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var kn=function(e){return e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose",e}(kn||{}),Ua=function(e){return e.Parent="#_parent",e.Internal="#_internal",e}(Ua||{});var oD={};pP(oD,{after:()=>ute,assign:()=>Ty,cancel:()=>Ey,choose:()=>rD,doneState:()=>dte,error:()=>Dy,errorExecution:()=>hte,errorPlatform:()=>Kw,init:()=>nD,invoke:()=>af,log:()=>sf,nullEvent:()=>tD,pure:()=>iD,raise:()=>Nl,send:()=>tu,start:()=>of,stop:()=>zd,update:()=>Ud});var of=kn.Start,zd=kn.Stop,Nl=kn.Raise,tu=kn.Send,Ey=kn.Cancel,tD=kn.NullEvent,Ty=kn.Assign,ute=kn.After,dte=kn.DoneState,sf=kn.Log,nD=kn.Init,af=kn.Invoke,hte=kn.ErrorExecution,Kw=kn.ErrorPlatform,Dy=kn.ErrorCustom,Ud=kn.Update,rD=kn.Choose,iD=kn.Pure;var Yw=".",sD={},Xw="xstate.guard",kU="";var Zn=!0;var Jw;function My(e,t,n){n===void 0&&(n=Yw);var r=lf(e,n),a=lf(t,n);return fn(a)?fn(r)?a===r:!1:fn(r)?r in a:Object.keys(r).every(function(s){return s in a?My(r[s],a[s]):!1})}function Qw(e){try{return fn(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function eb(e,t){try{return Fl(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function pte(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function lf(e,t){if(pte(e))return e.value;if(Fl(e))return Ay(e);if(typeof e!="string")return e;var n=eb(e,t);return Ay(n)}function Ay(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function cf(e,t){for(var n={},r=Object.keys(e),a=0;a<r.length;a++){var s=r[a];n[s]=t(e[s],s,e,a)}return n}function aD(e,t,n){var r,a,s={};try{for(var h=an(Object.keys(e)),_=h.next();!_.done;_=h.next()){var w=_.value,C=e[w];n(C)&&(s[w]=t(C,w,e))}}catch(T){r={error:T}}finally{try{_&&!_.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return s}var NU=function(e){return function(t){var n,r,a=t;try{for(var s=an(e),h=s.next();!h.done;h=s.next()){var _=h.value;a=a[_]}}catch(w){n={error:w}}finally{try{h&&!h.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}};function FU(e,t){return function(n){var r,a,s=n;try{for(var h=an(e),_=h.next();!_.done;_=h.next()){var w=_.value;s=s[t][w]}}catch(C){r={error:C}}finally{try{_&&!_.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return s}}function Py(e){if(!e)return[[]];if(fn(e))return[[e]];var t=sr(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:Py(e[n]).map(function(a){return[n].concat(a)})}));return t}function sr(e){var t;return(t=[]).concat.apply(t,Rn([],cn(e),!1))}function OU(e){return Fl(e)?e:[e]}function Zo(e){return e===void 0?[]:OU(e)}function Bd(e,t,n){var r,a;if(yn(e))return e(t,n.data);var s={};try{for(var h=an(Object.keys(e)),_=h.next();!_.done;_=h.next()){var w=_.value,C=e[w];yn(C)?s[w]=C(t,n.data):s[w]=C}}catch(T){r={error:T}}finally{try{_&&!_.done&&(a=h.return)&&a.call(h)}finally{if(r)throw r.error}}return s}function LU(e){return/^(done|error)\./.test(e)}function lD(e){return!!(e instanceof Promise||e!==null&&(yn(e)||typeof e=="object")&&yn(e.then))}function zU(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function UU(e,t){var n,r,a=cn([[],[]],2),s=a[0],h=a[1];try{for(var _=an(e),w=_.next();!w.done;w=_.next()){var C=w.value;t(C)?s.push(C):h.push(C)}}catch(T){n={error:T}}finally{try{w&&!w.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}return[s,h]}function BU(e,t){return cf(e.states,function(n,r){if(n){var a=(fn(t)?void 0:t[r])||(n?n.current:void 0);if(a)return{current:a,states:BU(n,a)}}})}function VU(e,t){return{current:t,states:BU(e,t)}}function cD(e,t,n,r){Zn||Ar(!!e,"Attempting to update undefined context");var a=e&&n.reduce(function(s,h){var _,w,C=h.assignment,T={state:r,action:h,_event:t},F={};if(yn(C))F=C(s,t.data,T);else try{for(var B=an(Object.keys(C)),$=B.next();!$.done;$=B.next()){var ee=$.value,ie=C[ee];F[ee]=yn(ie)?ie(s,t.data,T):ie}}catch(ye){_={error:ye}}finally{try{$&&!$.done&&(w=B.return)&&w.call(B)}finally{if(_)throw _.error}}return Object.assign({},s,F)},e);return a}var Ar=function(){};Zn||(Ar=function(e,t){var n=e instanceof Error?e:void 0;if(!(!n&&e)&&console!==void 0){var r=["Warning: ".concat(t)];n&&r.push(n),console.warn.apply(console,r)}});function Fl(e){return Array.isArray(e)}function yn(e){return typeof e=="function"}function fn(e){return typeof e=="string"}function tb(e,t){if(e)return fn(e)?{type:Xw,name:e,predicate:t?t[e]:void 0}:yn(e)?{type:Xw,name:e.name,predicate:e}:e}function jU(e){try{return"subscribe"in e&&yn(e.subscribe)}catch{return!1}}var Ba=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),RUe=(Jw={},Jw[Ba]=function(){return this},Jw[Symbol.observable]=function(){return this},Jw);function xs(e){return!!e&&"__xstatenode"in e}function $U(e){return!!e&&typeof e.send=="function"}var qU=function(){var e=0;return function(){return e++,e.toString(16)}}();function uf(e,t){return fn(e)||typeof e=="number"?Oe({type:e},t):e}function Gr(e,t){if(!fn(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=uf(e);return Oe({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function Vd(e,t){var n=OU(t).map(function(r){return typeof r>"u"||typeof r=="string"||xs(r)?{target:r,event:e}:Oe(Oe({},r),{event:e})});return n}function HU(e){if(!(e===void 0||e===kU))return Zo(e)}function GU(e,t,n){if(!Zn){var r=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(e,"'.").concat(r));else{var a=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(e,"'. ").concat(r," Current error is '").concat(t,"'.").concat(a))}}}function nb(e,t,n,r,a){var s=e.options.guards,h={state:a,cond:t,_event:r};if(t.type===Xw)return(s?.[t.name]||t.predicate)(n,r.data,h);var _=s?.[t.type];if(!_)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return _(n,r.data,h)}function rb(e){return typeof e=="string"?{type:e}:e}function df(e,t,n){var r=function(){},a=typeof e=="object",s=a?e:null;return{next:((a?e.next:e)||r).bind(s),error:((a?e.error:t)||r).bind(s),complete:((a?e.complete:n)||r).bind(s)}}function Ry(e,t){return"".concat(e,":invocation[").concat(t,"]")}function ky(e){return(e.type===Nl||e.type===tu&&e.to===Ua.Internal)&&typeof e.delay!="number"}var Va=Gr({type:nD});function Ny(e,t){return t&&t[e]||void 0}function $d(e,t){var n;if(fn(e)||typeof e=="number"){var r=Ny(e,t);yn(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if(yn(e))n={type:e.name||e.toString(),exec:e};else{var r=Ny(e.type,t);if(yn(r))n=Oe(Oe({},e),{exec:r});else if(r){var a=r.type||e.type;n=Oe(Oe(Oe({},r),e),{type:a})}else n=e}return n}var qs=function(e,t){if(!e)return[];var n=Fl(e)?e:[e];return n.map(function(r){return $d(r,t)})};function Fy(e){var t=$d(e);return Oe(Oe({id:fn(e)?e:t.id},t),{type:t.type})}function ib(e,t){return{type:Nl,event:typeof e=="function"?e:uf(e),delay:t?t.delay:void 0,id:t?.id}}function WU(e,t,n,r){var a={_event:n},s=Gr(yn(e.event)?e.event(t,n.data,a):e.event),h;if(fn(e.delay)){var _=r&&r[e.delay];h=yn(_)?_(t,n.data,a):_}else h=yn(e.delay)?e.delay(t,n.data,a):e.delay;return Oe(Oe({},e),{type:Nl,_event:s,delay:h})}function nu(e,t){return{to:t?t.to:void 0,type:tu,event:yn(e)?e:uf(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:yn(e)?e.name:Qw(e)}}function ZU(e,t,n,r){var a={_event:n},s=Gr(yn(e.event)?e.event(t,n.data,a):e.event),h;if(fn(e.delay)){var _=r&&r[e.delay];h=yn(_)?_(t,n.data,a):_}else h=yn(e.delay)?e.delay(t,n.data,a):e.delay;var w=yn(e.to)?e.to(t,n.data,a):e.to;return Oe(Oe({},e),{to:w,_event:s,event:s.data,delay:h})}function ob(e,t){return nu(e,Oe(Oe({},t),{to:Ua.Parent}))}function KU(e,t,n){return nu(t,Oe(Oe({},n),{to:e}))}function uD(){return ob(Ud)}function fte(e,t){return nu(e,Oe(Oe({},t),{to:function(n,r,a){var s=a._event;return s.origin}}))}var mte=function(e,t){return{context:e,event:t}};function YU(e,t){return e===void 0&&(e=mte),{type:sf,label:t,expr:e}}var XU=function(e,t,n){return Oe(Oe({},e),{value:fn(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},sb=function(e){return{type:Ey,sendId:e}};function dD(e){var t=Fy(e);return{type:kn.Start,activity:t,exec:void 0}}function ab(e){var t=yn(e)?e:Fy(e);return{type:kn.Stop,activity:t,exec:void 0}}function JU(e,t,n){var r=yn(e.activity)?e.activity(t,n.data):e.activity,a=typeof r=="string"?{id:r}:r,s={type:kn.Stop,activity:a};return s}var hD=function(e){return{type:Ty,assignment:e}};function gte(e){return typeof e=="object"&&"type"in e}function pD(e,t){var n=t?"#".concat(t):"";return"".concat(kn.After,"(").concat(e,")").concat(n)}function hf(e,t){var n="".concat(kn.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function ru(e,t){var n="".concat(kn.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function iu(e,t){var n="".concat(kn.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function QU(e){return{type:kn.Pure,get:e}}function fD(e,t){if(!Zn&&(!e||typeof e=="function")){var n=e;e=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=typeof n=="function"?n.apply(void 0,Rn([],cn(r),!1)):n;if(!s)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return s}}return nu(function(r,a){return a},Oe(Oe({},t),{to:e}))}function yte(e,t){return ob(function(n,r,a){return{type:Dy,data:yn(e)?e(n,r,a):e}},Oe(Oe({},t),{to:Ua.Parent}))}function eB(e){return{type:kn.Choose,conds:e}}var vte=function(e){var t,n,r=[];try{for(var a=an(e),s=a.next();!s.done;s=a.next())for(var h=s.value,_=0;_<h.actions.length;){if(h.actions[_].type===Ty){r.push(h.actions[_]),h.actions.splice(_,1);continue}_++}}catch(w){t={error:w}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r};function jd(e,t,n,r,a,s,h){h===void 0&&(h=!1);var _=h?[]:vte(a),w=_.length?cD(n,r,_,t):n,C=h?[n]:void 0,T=[];function F(ee,ie){var ye;switch(ie.type){case Nl:{var ve=WU(ie,w,r,e.options.delays);return s&&typeof ve.delay=="number"&&s(ve,w,r),ve}case tu:var Ae=ZU(ie,w,r,e.options.delays);if(!Zn){var ke=ie.delay;Ar(!fn(ke)||typeof Ae.delay=="number","No delay reference for delay expression '".concat(ke,"' was found on machine '").concat(e.id,"'"))}return s&&Ae.to!==Ua.Internal&&(ee==="entry"?T.push(Ae):s(Ae,w,r)),Ae;case sf:{var Ve=XU(ie,w,r);return s?.(Ve,w,r),Ve}case rD:{var Ge=ie,it=(ye=Ge.conds.find(function(Zr){var Mr=tb(Zr.cond,e.options.guards);return!Mr||nb(e,Mr,w,r,s?void 0:t)}))===null||ye===void 0?void 0:ye.actions;if(!it)return[];var ut=cn(jd(e,t,w,r,[{type:ee,actions:qs(Zo(it),e.options.actions)}],s,h),2),Mt=ut[0],nt=ut[1];return w=nt,C?.push(w),Mt}case iD:{var it=ie.get(w,r.data);if(!it)return[];var Nn=cn(jd(e,t,w,r,[{type:ee,actions:qs(Zo(it),e.options.actions)}],s,h),2),vt=Nn[0],Ut=Nn[1];return w=Ut,C?.push(w),vt}case zd:{var Ve=JU(ie,w,r);return s?.(Ve,n,r),Ve}case Ty:{w=cD(w,r,[ie],s?void 0:t),C?.push(w);break}default:var Lt=$d(ie,e.options.actions),ar=Lt.exec;if(s)s(Lt,w,r);else if(ar&&C){var Cr=C.length-1,Xo=Oe(Oe({},Lt),{exec:function(Zr){for(var Mr=[],Bn=1;Bn<arguments.length;Bn++)Mr[Bn-1]=arguments[Bn];ar.apply(void 0,Rn([C[Cr]],cn(Mr),!1))}});Lt=Xo}return Lt}}function B(ee){var ie,ye,ve=[];try{for(var Ae=an(ee.actions),ke=Ae.next();!ke.done;ke=Ae.next()){var Ve=ke.value,Ge=F(ee.type,Ve);Ge&&(ve=ve.concat(Ge))}}catch(it){ie={error:it}}finally{try{ke&&!ke.done&&(ye=Ae.return)&&ye.call(Ae)}finally{if(ie)throw ie.error}}return T.forEach(function(it){s(it,w,r)}),T.length=0,ve}var $=sr(a.map(B));return[$,w]}var lb=[],ou=function(e,t){lb.push(e);var n=t(e);return lb.pop(),n},tB=function(e){return e(lb[lb.length-1])};function nB(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[Ba]=function(){return this},t}function rB(e,t,n,r){var a,s=rb(e.src),h=(a=t?.options.services)===null||a===void 0?void 0:a[s.type],_=e.data?Bd(e.data,n,r):void 0,w=h?cb(h,e.id,_):nB(e.id);return w.meta=e,w}function cb(e,t,n){var r=nB(t);if(r.deferred=!0,xs(e)){var a=r.state=ou(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return a}}return r}function _te(e){try{return typeof e.send=="function"}catch{return!1}}function iB(e){return _te(e)&&"id"in e}function oB(e){var t;return Oe((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[Ba]=function(){return this},t),e)}var Oy=function(e){return e.type==="atomic"||e.type==="final"};function gD(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function ff(e){return gD(e).filter(function(t){return t.type!=="history"})}function yD(e){var t=[e];return Oy(e)?t:t.concat(sr(ff(e).map(yD)))}function mf(e,t){var n,r,a,s,h,_,w,C,T=new Set(e),F=mD(T),B=new Set(t);try{for(var $=an(B),ee=$.next();!ee.done;ee=$.next())for(var ie=ee.value,ye=ie.parent;ye&&!B.has(ye);)B.add(ye),ye=ye.parent}catch(nt){n={error:nt}}finally{try{ee&&!ee.done&&(r=$.return)&&r.call($)}finally{if(n)throw n.error}}var ve=mD(B);try{for(var Ae=an(B),ke=Ae.next();!ke.done;ke=Ae.next()){var ie=ke.value;if(ie.type==="compound"&&(!ve.get(ie)||!ve.get(ie).length))F.get(ie)?F.get(ie).forEach(function(Nn){return B.add(Nn)}):ie.initialStateNodes.forEach(function(Nn){return B.add(Nn)});else if(ie.type==="parallel")try{for(var Ve=(h=void 0,an(ff(ie))),Ge=Ve.next();!Ge.done;Ge=Ve.next()){var it=Ge.value;B.has(it)||(B.add(it),F.get(it)?F.get(it).forEach(function(Nn){return B.add(Nn)}):it.initialStateNodes.forEach(function(Nn){return B.add(Nn)}))}}catch(Nn){h={error:Nn}}finally{try{Ge&&!Ge.done&&(_=Ve.return)&&_.call(Ve)}finally{if(h)throw h.error}}}}catch(nt){a={error:nt}}finally{try{ke&&!ke.done&&(s=Ae.return)&&s.call(Ae)}finally{if(a)throw a.error}}try{for(var ut=an(B),Mt=ut.next();!Mt.done;Mt=ut.next())for(var ie=Mt.value,ye=ie.parent;ye&&!B.has(ye);)B.add(ye),ye=ye.parent}catch(nt){w={error:nt}}finally{try{Mt&&!Mt.done&&(C=ut.return)&&C.call(ut)}finally{if(w)throw w.error}}return B}function sB(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(Oy(r))return r.key}else return{}}var a={};return n.forEach(function(s){a[s.key]=sB(s,t)}),a}function mD(e){var t,n,r=new Map;try{for(var a=an(e),s=a.next();!s.done;s=a.next()){var h=s.value;r.has(h)||r.set(h,[]),h.parent&&(r.has(h.parent)||r.set(h.parent,[]),r.get(h.parent).push(h))}}catch(_){t={error:_}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}function aB(e,t){var n=mf([e],t);return sB(e,mD(n))}function gf(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function lB(e){return Rn([],cn(new Set(sr(Rn([],cn(e.map(function(t){return t.ownEvents})),!1)))),!1)}function Ly(e,t){return t.type==="compound"?ff(t).some(function(n){return n.type==="final"&&gf(e,n)}):t.type==="parallel"?ff(t).every(function(n){return Ly(e,n)}):!1}function cB(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function vD(e){return new Set(sr(e.map(function(t){return t.tags})))}function _D(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(fn(e)||fn(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(a){return _D(e[a],t[a])})}function uB(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function dB(e,t){var n=e.exec,r=Oe(Oe({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var ws=function(){function e(t){var n=this,r;this.actions=[],this.activities=sD,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||sD,this.meta=cB(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return lB(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var r=Va;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=Va;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),fn(t))return[t];var a=Object.keys(t);return a.concat.apply(a,Rn([],cn(a.map(function(s){return r.toStrings(t[s],n).map(function(h){return s+n+h})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=rf(t,["configuration","transitions","tags","machine"]);return Oe(Oe({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return My(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;Zn&&Ar(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!r?.transitions.length&&r.transitions.some(function(a){return a.target!==void 0||a.actions.length})},e}();var xte={deferEvents:!1},xD=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=Oe(Oe({},xte),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e}();var wD=new Map,wte=0,yf={bookId:function(){return"x:".concat(wte++)},register:function(e,t){return wD.set(e,t),e},get:function(e){return wD.get(e)},free:function(e){wD.delete(e)}};function ub(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;Zn||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function bte(){var e=ub();if(e&&"__xstate__"in e)return e.__xstate__}function hB(e){if(ub()){var t=bte();t&&t.register(e)}}function pB(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,a=[],s=!1,h=function(){if(!s){for(s=!0;a.length>0;){var C=a.shift();n=e.transition(n,C,w),r.forEach(function(T){return T.next(n)})}s=!1}},_=oB({id:t.id,send:function(C){a.push(C),h()},getSnapshot:function(){return n},subscribe:function(C,T,F){var B=df(C,T,F);return r.add(B),B.next(n),{unsubscribe:function(){r.delete(B)}}}}),w={parent:t.parent,self:_,id:t.id||"anonymous",observers:r};return n=e.start?e.start(w):n,_}var bD={sync:!1,autoForward:!1},ni=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e}(ni||{}),fB=function(){function e(t,n){n===void 0&&(n=e.defaultOptions);var r=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=ni.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(T,F){if(Fl(T))return r.batch(T),r.state;var B=Gr(uf(T,F));if(r.status===ni.Stopped)return Zn||Ar(!1,'Event "'.concat(B.name,'" was sent to stopped service "').concat(r.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(B.data))),r.state;if(r.status!==ni.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(B.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(B.data)));return r.scheduler.schedule(function(){r.forward(B);var $=r._nextState(B);r.update($,B)}),r._state},this.sendTo=function(T,F,B){var $=r.parent&&(F===Ua.Parent||r.parent.id===F),ee=$?r.parent:fn(F)?F===Ua.Internal?r:r.children.get(F)||yf.get(F):$U(F)?F:void 0;if(!ee){if(!$)throw new Error("Unable to send event to child '".concat(F,"' from service '").concat(r.id,"'."));Zn||Ar(!1,"Service '".concat(r.id,"' has no parent: unable to send event ").concat(T.type));return}if("machine"in ee){if(r.status!==ni.Stopped||r.parent!==ee||r.state.done){var ie=Oe(Oe({},T),{name:T.name===Dy?"".concat(iu(r.id)):T.name,origin:r.sessionId});!B&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([ee,ie]):ee.send(ie)}}else!B&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([ee,T.data]):ee.send(T.data)},this._exec=function(T,F,B,$){$===void 0&&($=r.machine.options.actions);var ee=T.exec||Ny(T.type,$),ie=yn(ee)?ee:ee?ee.exec:T.exec;if(ie)try{return ie(F,B.data,r.machine.config.predictableActionArguments?{action:T,_event:B}:{action:T,state:r.state,_event:B})}catch(ar){throw r.parent&&r.parent.send({type:"xstate.error",data:ar}),ar}switch(T.type){case Nl:{var ye=T;r.defer(ye);break}case tu:var ve=T;if(typeof ve.delay=="number"){r.defer(ve);return}else ve.to?r.sendTo(ve._event,ve.to,B===Va):r.send(ve._event);break;case Ey:r.cancel(T.sendId);break;case of:{if(r.status!==ni.Running)return;var Ae=T.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[Ae.id||Ae.type])break;if(Ae.type===kn.Invoke){var ke=rb(Ae.src),Ve=r.machine.options.services?r.machine.options.services[ke.type]:void 0,Ge=Ae.id,it=Ae.data;Zn||Ar(!("forward"in Ae),"`forward` property is deprecated (found in invocation of '".concat(Ae.src,"' in in machine '").concat(r.machine.id,"'). ")+"Please use `autoForward` instead.");var ut="autoForward"in Ae?Ae.autoForward:!!Ae.forward;if(!Ve){Zn||Ar(!1,"No service found for invocation '".concat(Ae.src,"' in machine '").concat(r.machine.id,"'."));return}var Mt=it?Bd(it,F,B):void 0;if(typeof Ve=="string")return;var nt=yn(Ve)?Ve(F,B.data,{data:Mt,src:ke,meta:Ae.meta}):Ve;if(!nt)return;var Nn=void 0;xs(nt)&&(nt=Mt?nt.withContext(Mt):nt,Nn={autoForward:ut}),r.spawn(nt,Ge,Nn)}else r.spawnActivity(Ae);break}case zd:{r.stopChild(T.activity.id);break}case sf:var vt=T,Ut=vt.label,Lt=vt.value;Ut?r.logger(Ut,Lt):r.logger(Lt);break;default:Zn||Ar(!1,"No implementation found for action type '".concat(T.type,"'"));break}};var a=Oe(Oe({},e.defaultOptions),n),s=a.clock,h=a.logger,_=a.parent,w=a.id,C=w!==void 0?w:t.id;this.id=C,this.logger=h,this.clock=s,this.parent=_,this.options=a,this.scheduler=new xD({deferEvents:this.options.deferEvents}),this.sessionId=yf.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:ou(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Zn||Ar(this.status!==ni.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,a;try{for(var s=an(t.actions),h=s.next();!h.done;h=s.next()){var _=h.value;this.exec(_,t,n)}}catch(w){r={error:w}}finally{try{h&&!h.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,a,s,h,_,w,C,T,F=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||n===Va)&&this.options.execute)this.execute(this.state);else for(var B=void 0;B=this._outgoingQueue.shift();)B[0].send(B[1]);if(this.children.forEach(function(nt){F.state.children[nt.id]=nt}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var $=an(this.eventListeners),ee=$.next();!ee.done;ee=$.next()){var ie=ee.value;ie(t.event)}}catch(nt){r={error:nt}}finally{try{ee&&!ee.done&&(a=$.return)&&a.call($)}finally{if(r)throw r.error}}try{for(var ye=an(this.listeners),ve=ye.next();!ve.done;ve=ye.next()){var ie=ve.value;ie(t,t.event)}}catch(nt){s={error:nt}}finally{try{ve&&!ve.done&&(h=ye.return)&&h.call(ye)}finally{if(s)throw s.error}}try{for(var Ae=an(this.contextListeners),ke=Ae.next();!ke.done;ke=Ae.next()){var Ve=ke.value;Ve(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(nt){_={error:nt}}finally{try{ke&&!ke.done&&(w=Ae.return)&&w.call(Ae)}finally{if(_)throw _.error}}if(this.state.done){var Ge=t.configuration.find(function(nt){return nt.type==="final"&&nt.parent===F.machine}),it=Ge&&Ge.doneData?Bd(Ge.doneData,t.context,n):void 0;this._doneEvent=ru(this.id,it);try{for(var ut=an(this.doneListeners),Mt=ut.next();!Mt.done;Mt=ut.next()){var ie=Mt.value;ie(this._doneEvent)}}catch(nt){C={error:nt}}finally{try{Mt&&!Mt.done&&(T=ut.return)&&T.call(ut)}finally{if(C)throw C.error}}this._stop(),this._stopChildren(),yf.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===ni.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var a=this,s=df(t,n,r);this.listeners.add(s.next),this.status!==ni.NotStarted&&s.next(this.state);var h=function(){a.doneListeners.delete(h),a.stopListeners.delete(h),s.complete()};return this.status===ni.Stopped?s.complete():(this.onDone(h),this.onStop(h)),{unsubscribe:function(){a.listeners.delete(s.next),a.doneListeners.delete(h),a.stopListeners.delete(h)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===ni.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===ni.Running)return this;this.machine._init(),yf.register(this.sessionId,this),this.initialized=!0,this.status=ni.Running;var r=t===void 0?this.initialState:ou(this,function(){return uB(t)?n.machine.resolveState(t):n.machine.resolveState(ws.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,Va)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){yn(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,n,r,a,s,h,_,w,C,T;try{for(var F=an(this.listeners),B=F.next();!B.done;B=F.next()){var $=B.value;this.listeners.delete($)}}catch(ut){t={error:ut}}finally{try{B&&!B.done&&(n=F.return)&&n.call(F)}finally{if(t)throw t.error}}try{for(var ee=an(this.stopListeners),ie=ee.next();!ie.done;ie=ee.next()){var $=ie.value;$(),this.stopListeners.delete($)}}catch(ut){r={error:ut}}finally{try{ie&&!ie.done&&(a=ee.return)&&a.call(ee)}finally{if(r)throw r.error}}try{for(var ye=an(this.contextListeners),ve=ye.next();!ve.done;ve=ye.next()){var $=ve.value;this.contextListeners.delete($)}}catch(ut){s={error:ut}}finally{try{ve&&!ve.done&&(h=ye.return)&&h.call(ye)}finally{if(s)throw s.error}}try{for(var Ae=an(this.doneListeners),ke=Ae.next();!ke.done;ke=Ae.next()){var $=ke.value;this.doneListeners.delete($)}}catch(ut){_={error:ut}}finally{try{ke&&!ke.done&&(w=Ae.return)&&w.call(Ae)}finally{if(_)throw _.error}}if(!this.initialized)return this;this.initialized=!1,this.status=ni.Stopped,this._initialState=void 0;try{for(var Ve=an(Object.keys(this.delayedEventsMap)),Ge=Ve.next();!Ge.done;Ge=Ve.next()){var it=Ge.value;this.clock.clearTimeout(this.delayedEventsMap[it])}}catch(ut){C={error:ut}}finally{try{Ge&&!Ge.done&&(T=Ve.return)&&T.call(Ve)}finally{if(C)throw C.error}}this.scheduler.clear(),this.scheduler=new xD({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=t._state)===null||r===void 0)&&r.done)){var a=Gr({type:"xstate.stop"}),s=ou(t,function(){var h=sr(Rn([],cn(t.state.configuration),!1).sort(function(F,B){return B.order-F.order}).map(function(F){return qs(F.onExit,t.machine.options.actions)})),_=cn(jd(t.machine,t.state,t.state.context,a,[{type:"exit",actions:h}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),w=_[0],C=_[1],T=new ws({value:t.state.value,context:C,_event:a,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:w.filter(function(F){return!ky(F)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return T.changed=!0,T});t.update(s,a),t._stopChildren(),yf.free(t.sessionId)}}),this},e.prototype.batch=function(t){var n=this;if(this.status===ni.NotStarted&&this.options.deferEvents)Zn||Ar(!1,"".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==ni.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(t.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var a,s,h=n.state,_=!1,w=[],C=function($){var ee=Gr($);n.forward(ee),h=ou(n,function(){return n.machine.transition(h,ee,void 0,r||void 0)}),w.push.apply(w,Rn([],cn(n.machine.config.predictableActionArguments?h.actions:h.actions.map(function(ie){return dB(ie,h)})),!1)),_=_||!!h.changed};try{for(var T=an(t),F=T.next();!F.done;F=T.next()){var B=F.value;C(B)}}catch($){a={error:$}}finally{try{F&&!F.done&&(s=T.return)&&s.call(T)}finally{if(a)throw a.error}}h.changed=_,h.actions=w,n.update(h,Gr(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var a=Gr(t);if(a.name.indexOf(Kw)===0&&!this.state.nextEvents.some(function(h){return h.indexOf(Kw)===0}))throw a.data.data;var s=ou(this,function(){return r.machine.transition(r.state,a,void 0,n||void 0)});return s},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var n,r;try{for(var a=an(this.forwardTo),s=a.next();!s.done;s=a.next()){var h=s.value,_=this.children.get(h);if(!_)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(h,"'."));_.send(t)}}catch(w){n={error:w}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this,r=this.clock.setTimeout(function(){"to"in t&&t.to?n.sendTo(t._event,t.to,!0):n.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=r)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(t,n.context,n._event,r)},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);n&&(this.removeChild(t),yn(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(this.status!==ni.Running)return cb(t,n);if(lD(t))return this.spawnPromise(Promise.resolve(t),n);if(yn(t))return this.spawnCallback(t,n);if(iB(t))return this.spawnActor(t,n);if(jU(t))return this.spawnObservable(t,n);if(xs(t))return this.spawnMachine(t,Oe(Oe({},r),{id:n}));if(zU(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var a=new e(t,Oe(Oe({},this.options),{parent:this,id:n.id||t.id})),s=Oe(Oe({},bD),n);s.sync&&a.onTransition(function(_){r.send(Ud,{state:_,id:a.id})});var h=a;return this.children.set(a.id,h),s.autoForward&&this.forwardTo.add(a.id),a.onDone(function(_){r.removeChild(a.id),r.send(Gr(_,{origin:a.id}))}).start(),h},e.prototype.spawnBehavior=function(t,n){var r=pB(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,a=this,s=!1,h;t.then(function(w){s||(h=w,a.removeChild(n),a.send(Gr(ru(n,w),{origin:n})))},function(w){if(!s){a.removeChild(n);var C=iu(n,w);try{a.send(Gr(C,{origin:n}))}catch(T){GU(w,T,n),a.devTools&&a.devTools.send(C,a.state),a.machine.strict&&a.stop()}}});var _=(r={id:n,send:function(){},subscribe:function(w,C,T){var F=df(w,C,T),B=!1;return t.then(function($){B||(F.next($),!B&&F.complete())},function($){B||F.error($)}),{unsubscribe:function(){return B=!0}}},stop:function(){s=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return h}},r[Ba]=function(){return this},r);return this.children.set(n,_),_},e.prototype.spawnCallback=function(t,n){var r,a=this,s=!1,h=new Set,_=new Set,w,C=function(B){w=B,_.forEach(function($){return $(B)}),!s&&a.send(Gr(B,{origin:n}))},T;try{T=t(C,function(B){h.add(B)})}catch(B){this.send(iu(n,B))}if(lD(T))return this.spawnPromise(T,n);var F=(r={id:n,send:function(B){return h.forEach(function($){return $(B)})},subscribe:function(B){var $=df(B);return _.add($.next),{unsubscribe:function(){_.delete($.next)}}},stop:function(){s=!0,yn(T)&&T()},toJSON:function(){return{id:n}},getSnapshot:function(){return w}},r[Ba]=function(){return this},r);return this.children.set(n,F),F},e.prototype.spawnObservable=function(t,n){var r,a=this,s,h=t.subscribe(function(w){s=w,a.send(Gr(w,{origin:n}))},function(w){a.removeChild(n),a.send(Gr(iu(n,w),{origin:n}))},function(){a.removeChild(n),a.send(Gr(ru(n),{origin:n}))}),_=(r={id:n,send:function(){},subscribe:function(w,C,T){return t.subscribe(w,C,T)},stop:function(){return h.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:n}}},r[Ba]=function(){return this},r);return this.children.set(n,_),_},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(!n){Zn||Ar(!1,"No implementation found for activity '".concat(t.type,"'"));return}var r=n(this.state.context,t);this.spawnEffect(t.id,r)},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[Ba]=function(){return this},r))},e.prototype.attachDev=function(){var t=ub();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(Oe(Oe({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:Oe({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}hB(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[Ba]=function(){return this},e.prototype.getSnapshot=function(){return this.status===ni.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=db,e}(),Ste=function(e){return fn(e)?Oe(Oe({},bD),{name:e}):Oe(Oe(Oe({},bD),{name:qU()}),e)};function qd(e,t){var n=Ste(t);return tB(function(r){if(!Zn){var a=xs(e)||yn(e);Ar(!!r||a,'Attempted to spawn an Actor (ID: "'.concat(xs(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return r?r.spawn(e,n.name,n):cb(e,n.name)})}function db(e,t){var n=new fB(e,t);return n}function Cte(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function zy(e){return Oe(Oe({type:af},e),{toJSON:function(){e.onDone,e.onError;var t=rf(e,["onDone","onError"]);return Oe(Oe({},t),{type:af,src:Cte(e.src)})}})}var xf="",SD="#",Uy="*",vf={},_f=function(e){return e[0]===SD},Ite=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Ete=function(e,t,n){var r=n.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(fn(s.target)||xs(s.target))}),a=t===xf?"the transient event":"event '".concat(t,"'");Ar(!r,"One or more transitions for ".concat(a," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},mB=function(){function e(t,n,r,a){r===void 0&&(r="context"in t?t.context:void 0);var s=this,h;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Ite(),n),this.parent=a?.parent,this.key=this.config.key||a?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Yw),this.id=this.config.id||Rn([this.machine.key],cn(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(h=this.config.schema)!==null&&h!==void 0?h:{},this.description=this.config.description,Zn||Ar(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?cf(this.config.states,function(C,T){var F,B=new e(C,{},void 0,{parent:s,key:T});return Object.assign(s.idMap,Oe((F={},F[B.id]=B,F),B.idMap)),B}):vf;var _=0;function w(C){var T,F;C.order=_++;try{for(var B=an(gD(C)),$=B.next();!$.done;$=B.next()){var ee=$.value;w(ee)}}catch(ie){T={error:ie}}finally{try{$&&!$.done&&(F=B.return)&&F.call(B)}finally{if(T)throw T.error}}}w(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(C){var T=C.event;return T===xf}):xf in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Zo(this.config.entry||this.config.onEntry).map(function(C){return $d(C)}),this.onExit=Zo(this.config.exit||this.config.onExit).map(function(C){return $d(C)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Zo(this.config.invoke).map(function(C,T){var F,B;if(xs(C)){var $=Ry(s.id,T);return s.machine.options.services=Oe((F={},F[$]=C,F),s.machine.options.services),zy({src:$,id:$})}else if(fn(C.src)){var $=C.id||Ry(s.id,T);return zy(Oe(Oe({},C),{id:$,src:C.src}))}else if(xs(C.src)||yn(C.src)){var $=C.id||Ry(s.id,T);return s.machine.options.services=Oe((B={},B[$]=C.src,B),s.machine.options.services),zy(Oe(Oe({id:$},C),{src:$}))}else{var ee=C.src;return zy(Oe(Oe({id:Ry(s.id,T)},C),{src:ee}))}}),this.activities=Zo(this.config.activities).concat(this.invoke).map(function(C){return Fy(C)}),this.transition=this.transition.bind(this),this.tags=Zo(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||yD(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,a=r.actions,s=r.activities,h=r.guards,_=r.services,w=r.delays;return new e(this.config,{actions:Oe(Oe({},a),t.actions),activities:Oe(Oe({},s),t.activities),guards:Oe(Oe({},h),t.guards),services:Oe(Oe({},_),t.services),delays:Oe(Oe({},w),t.delays)},n??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return yn(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:cf(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===xf,r=this.transitions.filter(function(a){var s=a.eventType===t;return n?s:s||a.eventType===Uy});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(s,h){var _=yn(s)?"".concat(t.id,":delay[").concat(h,"]"):s,w=pD(_,t.id);return t.onEntry.push(nu(w,{delay:s})),t.onExit.push(sb(w)),w},a=Fl(n)?n.map(function(s,h){var _=r(s.delay,h);return Oe(Oe({},s),{event:_})}):sr(Object.keys(n).map(function(s,h){var _=n[s],w=fn(_)?{target:_}:_,C=isNaN(+s)?s:+s,T=r(C,h);return Zo(w).map(function(F){return Oe(Oe({},F),{event:T,delay:C})})}));return a.map(function(s){var h=s.delay;return Oe(Oe({},t.formatTransition(s)),{delay:h})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var a=t instanceof ws?t.value:lf(t,this.delimiter);if(fn(a)){var s=this.getStateNode(a).initial;return s!==void 0?this.getStateNodes((n={},n[a]=s,n)):[this,this.states[a]]}var h=Object.keys(a),_=[this];return _.push.apply(_,Rn([],cn(sr(h.map(function(w){return r.getStateNode(w).getStateNodes(a[w])}))),!1)),_},e.prototype.handles=function(t){var n=Qw(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof ws?t:ws.create(t),r=Array.from(mf([],this.getStateNodes(n.value)));return new ws(Oe(Oe({},n),{value:this.resolve(n.value),configuration:r,done:Ly(r,this),tags:vD(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var a=this.getStateNode(t),s=a.next(n,r);return!s||!s.transitions.length?this.next(n,r):s},e.prototype.transitionCompoundNode=function(t,n,r){var a=Object.keys(t),s=this.getStateNode(a[0]),h=s._transition(t[a[0]],n,r);return!h||!h.transitions.length?this.next(n,r):h},e.prototype.transitionParallelNode=function(t,n,r){var a,s,h={};try{for(var _=an(Object.keys(t)),w=_.next();!w.done;w=_.next()){var C=w.value,T=t[C];if(T){var F=this.getStateNode(C),B=F._transition(T,n,r);B&&(h[C]=B)}}}catch(ve){a={error:ve}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}var $=Object.keys(h).map(function(ve){return h[ve]}),ee=sr($.map(function(ve){return ve.transitions})),ie=$.some(function(ve){return ve.transitions.length>0});if(!ie)return this.next(n,r);var ye=sr(Object.keys(h).map(function(ve){return h[ve].configuration}));return{transitions:ee,exitSet:sr($.map(function(ve){return ve.exitSet})),configuration:ye,source:n,actions:sr(Object.keys(h).map(function(ve){return h[ve].actions}))}},e.prototype._transition=function(t,n,r){return fn(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,Gr(n))},e.prototype.next=function(t,n){var r,a,s=this,h=n.name,_=[],w=[],C;try{for(var T=an(this.getCandidates(h)),F=T.next();!F.done;F=T.next()){var B=F.value,$=B.cond,ee=B.in,ie=t.context,ye=ee?fn(ee)&&_f(ee)?t.matches(lf(this.getStateNodeById(ee).path,this.delimiter)):My(lf(ee,this.delimiter),NU(this.path.slice(0,-2))(t.value)):!0,ve=!1;try{ve=!$||nb(this.machine,$,ie,n,t)}catch(Ve){throw new Error("Unable to evaluate guard '".concat($.name||$.type,"' in transition for event '").concat(h,"' in state node '").concat(this.id,`':
`).concat(Ve.message))}if(ve&&ye){B.target!==void 0&&(w=B.target),_.push.apply(_,Rn([],cn(B.actions),!1)),C=B;break}}}catch(Ve){r={error:Ve}}finally{try{F&&!F.done&&(a=T.return)&&a.call(T)}finally{if(r)throw r.error}}if(C){if(!w.length)return{transitions:[C],exitSet:[],configuration:t.value?[this]:[],source:t,actions:_};var Ae=sr(w.map(function(Ve){return s.getRelativeStateNodes(Ve,t.historyValue)})),ke=!!C.internal;return{transitions:[C],exitSet:ke?[]:sr(w.map(function(Ve){return s.getPotentiallyReenteringNodes(Ve)})),configuration:Ae,source:t,actions:_}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var n=[],r=this,a=t;r&&r!==a;)n.push(r),r=r.parent;return r!==a?[]:(n.push(a),n)},e.prototype.getActions=function(t,n,r,a,s,h,_){var w,C,T,F,B=this,$=h?mf([],this.getStateNodes(h.value)):[],ee=new Set;try{for(var ie=an(Array.from(t).sort(function(vt,Ut){return vt.order-Ut.order})),ye=ie.next();!ye.done;ye=ie.next()){var ve=ye.value;(!gf($,ve)||gf(r.exitSet,ve)||ve.parent&&ee.has(ve.parent))&&ee.add(ve)}}catch(vt){w={error:vt}}finally{try{ye&&!ye.done&&(C=ie.return)&&C.call(ie)}finally{if(w)throw w.error}}try{for(var Ae=an($),ke=Ae.next();!ke.done;ke=Ae.next()){var ve=ke.value;(!gf(t,ve)||gf(r.exitSet,ve.parent))&&r.exitSet.push(ve)}}catch(vt){T={error:vt}}finally{try{ke&&!ke.done&&(F=Ae.return)&&F.call(Ae)}finally{if(T)throw T.error}}r.exitSet.sort(function(vt,Ut){return Ut.order-vt.order});var Ve=Array.from(ee).sort(function(vt,Ut){return vt.order-Ut.order}),Ge=new Set(r.exitSet),it=sr(Ve.map(function(vt){var Ut=[];if(vt.type!=="final")return Ut;var Lt=vt.parent;if(!Lt.parent)return Ut;Ut.push(hf(vt.id,vt.doneData),hf(Lt.id,vt.doneData?Bd(vt.doneData,a,s):void 0));var ar=Lt.parent;return ar.type==="parallel"&&ff(ar).every(function(Cr){return Ly(r.configuration,Cr)})&&Ut.push(hf(ar.id)),Ut})),ut=Ve.map(function(vt){var Ut=vt.onEntry,Lt=vt.activities.map(function(ar){return dD(ar)});return{type:"entry",actions:qs(_?Rn(Rn([],cn(Ut),!1),cn(Lt),!1):Rn(Rn([],cn(Lt),!1),cn(Ut),!1),B.machine.options.actions)}}).concat({type:"state_done",actions:it.map(function(vt){return ib(vt)})}),Mt=Array.from(Ge).map(function(vt){return{type:"exit",actions:qs(Rn(Rn([],cn(vt.onExit),!1),cn(vt.activities.map(function(Ut){return ab(Ut)})),!1),B.machine.options.actions)}}),nt=Mt.concat({type:"transition",actions:qs(r.actions,this.machine.options.actions)}).concat(ut);if(n){var Nn=qs(sr(Rn([],cn(t),!1).sort(function(vt,Ut){return Ut.order-vt.order}).map(function(vt){return vt.onExit})),this.machine.options.actions).filter(function(vt){return!ky(vt)});return nt.concat({type:"stop",actions:Nn})}return nt},e.prototype.transition=function(t,n,r,a){t===void 0&&(t=this.initialState);var s=Gr(n),h;if(t instanceof ws)h=r===void 0?t:this.resolveState(ws.from(t,r));else{var _=fn(t)?this.resolve(Ay(this.getResolvedPath(t))):this.resolve(t),w=r??this.machine.context;h=this.resolveState(ws.from(_,w))}if(!Zn&&s.name===Uy)throw new Error("An event cannot have the wildcard type ('".concat(Uy,"')"));if(this.strict&&!this.events.includes(s.name)&&!LU(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var C=this._transition(h.value,h,s)||{transitions:[],configuration:[],exitSet:[],source:h,actions:[]},T=mf([],this.getStateNodes(h.value)),F=C.configuration.length?mf(T,C.configuration):T;return C.configuration=Rn([],cn(F),!1),this.resolveTransition(C,h,h.context,a,s)},e.prototype.resolveRaisedTransition=function(t,n,r,a){var s,h=t.actions;return t=this.transition(t,n,void 0,a),t._event=r,t.event=r.data,(s=t.actions).unshift.apply(s,Rn([],cn(h),!1)),t},e.prototype.resolveTransition=function(t,n,r,a,s){var h,_,w,C,T=this;s===void 0&&(s=Va);var F=t.configuration,B=!n||t.transitions.length>0,$=B?t.configuration:n?n.configuration:[],ee=Ly($,this),ie=B?aB(this.machine,F):void 0,ye=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,ve=this.getActions(new Set($),ee,t,r,s,n,a),Ae=n?Oe({},n.activities):{};try{for(var ke=an(ve),Ve=ke.next();!Ve.done;Ve=ke.next()){var Ge=Ve.value;try{for(var it=(w=void 0,an(Ge.actions)),ut=it.next();!ut.done;ut=it.next()){var Mt=ut.value;Mt.type===of?Ae[Mt.activity.id||Mt.activity.type]=Mt:Mt.type===zd&&(Ae[Mt.activity.id||Mt.activity.type]=!1)}}catch(Kt){w={error:Kt}}finally{try{ut&&!ut.done&&(C=it.return)&&C.call(it)}finally{if(w)throw w.error}}}}catch(Kt){h={error:Kt}}finally{try{Ve&&!Ve.done&&(_=ke.return)&&_.call(ke)}finally{if(h)throw h.error}}var nt=cn(jd(this,n,r,s,ve,a,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),Nn=nt[0],vt=nt[1],Ut=cn(UU(Nn,ky),2),Lt=Ut[0],ar=Ut[1],Cr=Nn.filter(function(Kt){var Vn;return Kt.type===of&&((Vn=Kt.activity)===null||Vn===void 0?void 0:Vn.type)===af}),Xo=Cr.reduce(function(Kt,Vn){return Kt[Vn.activity.id]=rB(Vn.activity,T.machine,vt,s),Kt},n?Oe({},n.children):{}),Zr=new ws({value:ie||n.value,context:vt,_event:s,_sessionid:n?n._sessionid:null,historyValue:ie?ye?VU(ye,ie):void 0:n?n.historyValue:void 0,history:!ie||t.source?n:void 0,actions:ie?ar:[],activities:ie?Ae:n?n.activities:{},events:[],configuration:$,transitions:t.transitions,children:Xo,done:ee,tags:vD($),machine:this}),Mr=r!==vt;Zr.changed=s.name===Ud||Mr;var Bn=Zr.history;Bn&&delete Bn.history;var Kr=!ee&&(this._transient||F.some(function(Kt){return Kt._transient}));if(!B&&(!Kr||s.name===xf))return Zr;var _r=Zr;if(!ee)for(Kr&&(_r=this.resolveRaisedTransition(_r,{type:tD},s,a));Lt.length;){var no=Lt.shift();_r=this.resolveRaisedTransition(_r,no._event,s,a)}var Ci=_r.changed||(Bn?!!_r.actions.length||Mr||typeof Bn.value!=typeof _r.value||!_D(_r.value,Bn.value):void 0);return _r.changed=Ci,_r.history=Bn,_r},e.prototype.getStateNode=function(t){if(_f(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=_f(t)?t.slice(SD.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&_f(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=eb(t,this.delimiter).slice(),r=this;n.length;){var a=n.shift();if(!a.length)break;r=r.getStateNode(a)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||vf;switch(this.type){case"parallel":return cf(this.initialStateValue,function(s,h){return s?r.getStateNode(h).resolve(t[h]||s):vf});case"compound":if(fn(t)){var a=this.getStateNode(t);return a.type==="parallel"||a.type==="compound"?(n={},n[t]=a.initialStateValue,n):t}return Object.keys(t).length?cf(t,function(s,h){return s?r.getStateNode(h).resolve(s):vf}):this.initialStateValue||{};default:return t||vf}},e.prototype.getResolvedPath=function(t){if(_f(t)){var n=this.machine.idMap[t.slice(SD.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return eb(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=aD(this.states,function(r){return r.initialStateValue||vf},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Oy(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;fn(n.target)?t=_f(n.target)?Ay(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(Oy(this))return[this];if(this.type==="compound"&&!this.initial)return Zn||Ar(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var n=Py(this.initialStateValue);return sr(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=cn(t),r=n[0],a=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var s=this.getStateNode(r);if(s.type==="history")return s.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(a)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:aD(this.states,function(n,r){if(!t)return n.historyValue();var a=fn(t)?void 0:t[r];return n.historyValue(a||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var a=this.target;return a?sr(Py(a).map(function(h){return r.getFromRelativePath(h)})):r.initialStateNodes}var s=FU(r.path,"states")(t).current;return fn(s)?[r.getStateNode(s)]:sr(Py(s).map(function(h){return n.history==="deep"?r.getFromRelativePath(h):[r.states[h[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=sr(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,a;if(this.__cache.events)return this.__cache.events;var s=this.states,h=new Set(this.ownEvents);if(s)try{for(var _=an(Object.keys(s)),w=_.next();!w.done;w=_.next()){var C=w.value,T=s[C];if(T.states)try{for(var F=(r=void 0,an(T.events)),B=F.next();!B.done;B=F.next()){var $=B.value;h.add("".concat($))}}catch(ee){r={error:ee}}finally{try{B&&!B.done&&(a=F.return)&&a.call(F)}finally{if(r)throw r.error}}}}catch(ee){t={error:ee}}finally{try{w&&!w.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!fn(r))return r;var a=r[0]===n.delimiter;if(a&&!n.parent)return n.getStateNodeByPath(r.slice(1));var s=a?n.key+r:r;if(n.parent)try{var h=n.parent.getStateNodeByPath(s);return h}catch(_){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(_.message))}else return n.getStateNodeByPath(s)})},e.prototype.formatTransition=function(t){var n=this,r=HU(t.target),a="internal"in t?t.internal:r?r.some(function(w){return fn(w)&&w[0]===n.delimiter}):!0,s=this.machine.options.guards,h=this.resolveTarget(r),_=Oe(Oe({},t),{actions:qs(Zo(t.actions)),cond:tb(t.cond,s),target:h,source:this,internal:a,eventType:t.event,toJSON:function(){return Oe(Oe({},_),{target:_.target?_.target.map(function(w){return"#".concat(w.id)}):void 0,source:"#".concat(n.id)})}});return _},e.prototype.formatTransitions=function(){var t,n,r=this,a;if(!this.config.on)a=[];else if(Array.isArray(this.config.on))a=this.config.on;else{var s=this.config.on,h=Uy,_=s[h],w=_===void 0?[]:_,C=rf(s,[typeof h=="symbol"?h:h+""]);a=sr(Object.keys(C).map(function(Ae){!Zn&&Ae===xf&&Ar(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var ke=Vd(Ae,C[Ae]);return Zn||Ete(r,Ae,ke),ke}).concat(Vd(Uy,w)))}var T=this.config.always?Vd("",this.config.always):[],F=this.config.onDone?Vd(String(hf(this.id)),this.config.onDone):[];Zn||Ar(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var B=sr(this.invoke.map(function(Ae){var ke=[];return Ae.onDone&&ke.push.apply(ke,Rn([],cn(Vd(String(ru(Ae.id)),Ae.onDone)),!1)),Ae.onError&&ke.push.apply(ke,Rn([],cn(Vd(String(iu(Ae.id)),Ae.onError)),!1)),ke})),$=this.after,ee=sr(Rn(Rn(Rn(Rn([],cn(F),!1),cn(B),!1),cn(a),!1),cn(T),!1).map(function(Ae){return Zo(Ae).map(function(ke){return r.formatTransition(ke)})}));try{for(var ie=an($),ye=ie.next();!ye.done;ye=ie.next()){var ve=ye.value;ee.push(ve)}}catch(Ae){t={error:Ae}}finally{try{ye&&!ye.done&&(n=ie.return)&&n.call(ie)}finally{if(t)throw t.error}}return ee},e}();var gB=!1;function Ko(e,t){return!Zn&&!("predictableActionArguments"in e)&&!gB&&(gB=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new mB(e,t)}var ja=hD;var su=uD,yB=fD;var qV=qm($V(),1);var yce=!0,vce="",Jy=(e,t)=>`${e}${t}`.replace(/[^A-Z0-9+]/gi,""),_ce=(e,t)=>{switch(t){case"address":case"birthdate":case"email":case"family_name":case"gender":case"given_name":case"locale":case"middle_name":case"name":case"nickname":case"phone_number":case"picture":case"preferred_username":case"profile":case"updated_at":case"website":case"zoneinfo":return!0;default:return t.startsWith("custom:")}},xce=e=>{let r=(0,qV.default)(e,_ce),{phone_number:t}=r,n=dl(r,["phone_number"]);if(hy(t)&&t!==vce){let{country_code:a}=e;return Me(Z({},n),{phone_number:Jy(a,t)})}return n},HV=(e,t,n)=>{let _=t,{password:r}=_,a=dl(_,["password"]),s=xce(a),h={autoSignIn:yce,userAttributes:Z({},n==="phone_number"?Me(Z({},s),{phone_number:e}):s)};return{username:e,password:r,options:h}},GV=({formValues:e,loginMechanisms:t})=>{let n=t[0];if(n==="phone_number"){let{country_code:r,phone_number:a}=e;return Jy(r,a)}return e[n]};var{assign:Un}=pf,wce=Un({actorDoneData:void 0}),bce=Un({challengeName:void 0}),Sce=Un({missingAttributes:void 0}),Cce=Un({remoteError:void 0}),Ice=Un({formValues:{}}),Ece=Un({touched:{}}),Tce=Un({user:void 0}),Dce=Un({validationError:{}}),Ace=Un({totpSecretCode:(e,{data:t})=>{let{sharedSecret:n}=t.nextStep?.totpSetupDetails??{};return n}}),Mce=Un({step:"SIGN_IN"}),Pce=Un({step:"SHOULD_CONFIRM_USER_ATTRIBUTE"}),Rce=Un({step:"CONFIRM_ATTRIBUTE_COMPLETE"}),kce=Un({challengeName:(e,{data:t})=>{let{signInStep:n}=t.nextStep;return n==="CONFIRM_SIGN_IN_WITH_SMS_CODE"?"SMS_MFA":n==="CONFIRM_SIGN_IN_WITH_TOTP_CODE"?"SOFTWARE_TOKEN_MFA":void 0}}),Nce=Un({username:({formValues:e,loginMechanisms:t})=>{let n=t[0],{username:r,country_code:a}=e;return n==="phone_number"?Jy(a,r):r}}),Fce=Un({username:GV}),Oce=Un({username:({formValues:e,loginMechanisms:t})=>{let n=t[0],{username:r,country_code:a}=e;return n==="phone_number"?Jy(a,r):r}}),Lce=Un({step:(e,{data:t})=>t.nextStep.signInStep==="DONE"?"SIGN_IN_COMPLETE":t.nextStep.signInStep}),zce=Un({step:(e,{data:t})=>t.nextStep.signUpStep==="DONE"?"SIGN_UP_COMPLETE":t.nextStep.signUpStep}),Uce=Un({step:(e,{data:t})=>t.nextStep.resetPasswordStep==="DONE"?"RESET_PASSWORD_COMPLETE":t.nextStep.resetPasswordStep}),Bce=Un({missingAttributes:(e,{data:t})=>t.nextStep?.missingAttributes}),Vce=Un({validationError:(e,{data:t})=>t}),jce=Un({remoteError:(e,{data:t})=>t.name==="NoUserPoolError"?"Configuration error (see console) \u2013 please contact the administrator":t?.message||t}),$ce=Un({user:(e,{data:t})=>t}),WV=e=>({Destination:e.destination,DeliveryMedium:e.deliveryMedium,AttributeName:e.attributName}),qce=Un({codeDeliveryDetails:(e,{data:t})=>t?.nextStep?.codeDeliveryDetails?WV(t.nextStep.codeDeliveryDetails):WV(t)}),Hce=Un({formValues:(e,{data:t})=>{let{name:n,value:r}=t;return Me(Z({},e.formValues),{[n]:r})}}),Gce=Un({formValues:(e,{data:t})=>MT(Z(Z({},e.formValues),t),"password")}),Wce=Un({touched:(e,{data:t})=>Me(Z({},e.touched),{[t.name]:!0})}),Zce=Un({unverifiedUserAttributes:(e,{data:t})=>{let{email:n,phone_number:r}=t;return Z(Z({},n&&{email:n}),r&&{phone_number:r})}}),Kce=Un({selectedUserAttribute:void 0}),Yce=Un({selectedUserAttribute:e=>e.formValues?.unverifiedAttr}),Xce=Un({step:"CONFIRM_SIGN_UP"}),Ha={clearActorDoneData:wce,clearChallengeName:bce,clearError:Cce,clearFormValues:Ice,clearMissingAttributes:Sce,clearSelectedUserAttribute:Kce,clearTouched:Ece,clearUser:Tce,clearValidationError:Dce,handleBlur:Wce,handleInput:Hce,handleSubmit:Gce,setChallengeName:kce,setCodeDeliveryDetails:qce,setFieldErrors:Vce,setMissingAttributes:Bce,setNextResetPasswordStep:Uce,setNextSignInStep:Lce,setNextSignUpStep:zce,setRemoteError:jce,setConfirmAttributeCompleteStep:Rce,setConfirmSignUpSignUpStep:Xce,setShouldVerifyUserAttributeStep:Pce,setSelectedUserAttribute:Yce,setSignInStep:Mce,setTotpSecretCode:Ace,setUser:$ce,setUnverifiedUserAttributes:Zce,setUsernameForgotPassword:Nce,setUsernameSignIn:Oce,setUsernameSignUp:Fce};var Jce=["CONFIRM_SIGN_IN_WITH_SMS_CODE","CONFIRM_SIGN_IN_WITH_TOTP_CODE"],Qce=(e,{data:t})=>t?.nextStep.signInStep==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",eue=(e,{data:t})=>t?.nextStep?.signInStep==="RESET_PASSWORD",tue=(e,{data:t})=>t?.nextStep.signInStep==="CONFIRM_SIGN_UP",nue=(e,{data:t})=>t?.nextStep.signUpStep==="COMPLETE_AUTO_SIGN_IN",rue=(e,{data:t})=>t?.nextStep.signInStep==="DONE",iue=(e,{data:t})=>t?.nextStep.signUpStep==="DONE",oue=(e,{data:t})=>t?.nextStep.resetPasswordStep==="DONE",sue=(e,{data:t})=>t?.step==="CONFIRM_ATTRIBUTE_COMPLETE",aue=(e,{data:t})=>t?.step==="CONFIRM_ATTRIBUTE_WITH_CODE",lue=(e,{data:t})=>t?.step==="SHOULD_CONFIRM_USER_ATTRIBUTE",cue=(e,{data:t})=>t?.step==="RESET_PASSWORD",uue=(e,{data:t})=>t?.step==="CONFIRM_SIGN_UP",due=({step:e})=>Jce.includes(e),hue=({step:e})=>e==="CONTINUE_SIGN_IN_WITH_TOTP_SETUP",pue=({step:e})=>e==="RESET_PASSWORD",fue=({step:e})=>e==="CONFIRM_RESET_PASSWORD_WITH_CODE",mue=({step:e})=>e==="CONFIRM_SIGN_UP",gue=(e,{data:t})=>{let{phone_number_verified:n,email_verified:r}=t;return(r===void 0||r==="false")&&(n===void 0||n==="false")},yue=(e,{data:t})=>t.message==="User is already confirmed.",cu={hasCompletedAttributeConfirmation:sue,hasCompletedResetPassword:oue,hasCompletedSignIn:rue,hasCompletedSignUp:iue,isConfirmSignUpStep:uue,isConfirmUserAttributeStep:aue,isResetPasswordStep:cue,isShouldConfirmUserAttributeStep:lue,isUserAlreadyConfirmed:yue,shouldAutoSignIn:nue,shouldConfirmResetPassword:fue,shouldConfirmSignIn:due,shouldConfirmSignInWithNewPassword:Qce,shouldConfirmSignUp:mue,shouldConfirmSignUpFromSignIn:tue,shouldResetPassword:pue,shouldResetPasswordFromSignIn:eue,shouldSetupTotp:hue,shouldVerifyAttribute:gue};var r6=qm(n6(),1);var uu=(e,t,n,r)=>se(void 0,null,function*(){let a=yield Promise.all(r.map(h=>h(e,t,n))),s=(0,r6.default)({},...a);return _T(s)?Promise.resolve():Promise.reject(s)});var Yde=8,Xde=e=>Array.isArray(e),Jde=e=>{if(e)return Xde(e)?Object.entries(e).map(([t,n])=>Object.keys(n)[0]):Object.keys(e)},bs={getAmplifyConfig(){return se(this,null,function*(){let e=Iy.getConfig(),t=e.Auth?.Cognito,{loginWith:n,userAttributes:r}=e.Auth?.Cognito??{},a=n?Object.entries(n).filter(([_,w])=>_!=="oauth").filter(([_,w])=>!!w).map(_=>_[0]==="phone"?"phone_number":_[0]):void 0,s=Jde(r),h=n?.oauth?.providers?n.oauth.providers?.map(_=>_.toString().toLowerCase()):void 0;return Me(Z({},t),{loginMechanisms:a,signUpAttributes:s,socialProviders:h})})},getCurrentUser:kl,handleSignIn:Qp,handleSignUp:GT,handleConfirmSignIn:Sy,handleConfirmSignUp:ZT,handleForgotPasswordSubmit:WT,handleForgotPassword:wy,validateCustomSignUp(e,t){return se(this,null,function*(){})},validateFormPassword(e,t,n){return se(this,null,function*(){let{password:r}=e,{password:a}=t;if(!a||!n)return null;let s=[],h=n.minLength??Yde;return r.length<h&&s.push(`Password must have at least ${h} characters`),n.requireLowercase&&!/[a-z]/.test(r)&&s.push("Password must have lower case letters"),n.requireUppercase&&!/[A-Z]/.test(r)&&s.push("Password must have upper case letters"),n.requireNumbers&&!/[0-9]/.test(r)&&s.push("Password must have numbers"),n.requireSpecialCharacters&&!DT(r)&&s.push("Password must have special characters"),s.length!==0?{password:s}:null})},validateConfirmPassword(e,t){return se(this,null,function*(){let{password:n,confirm_password:r}=e,{confirm_password:a,password:s}=t;if(!n&&!r)return null;if((n||r)&&n!==r&&(a&&s||n?.length>=6&&r?.length>=6))return{confirm_password:"Your passwords must match"}})},validatePreferredUsername(e,t){return se(this,null,function*(){})}};function i6({services:e}){return Ko({id:"forgotPasswordActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldResetPassword",target:"confirmResetPassword"},{cond:"shouldConfirmResetPassword",target:"confirmResetPassword"},{target:"forgotPassword"}]},forgotPassword:{initial:"edit",entry:"sendUpdate",exit:["clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},submit:{tags:"pending",entry:["sendUpdate","clearError","setUsernameForgotPassword"],invoke:{src:"handleResetPassword",onDone:{actions:["setCodeDeliveryDetails","setNextResetPasswordStep"],target:"#forgotPasswordActor.confirmResetPassword"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmResetPassword:{type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"},RESEND:"resendCode",CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{target:"pending",actions:"clearValidationError"},onError:{target:"idle",actions:"setFieldErrors"}}},resendCode:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleResetPassword",onDone:{target:"idle"},onError:{actions:"setRemoteError",target:"idle"}}},pending:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"handleConfirmResetPassword",onDone:[{cond:"hasCompletedResetPassword",actions:"setNextResetPasswordStep",target:"#forgotPasswordActor.resolved"},{actions:"setSignInStep",target:"#forgotPasswordActor.resolved"}],onError:{actions:"setRemoteError",target:"idle"}}}}}}},resolved:{type:"final",data:({step:t})=>({step:t})}}},{actions:Me(Z({},Ha),{sendUpdate:su()}),guards:cu,services:{handleResetPassword({username:t}){return e.handleForgotPassword({username:t})},handleConfirmResetPassword({formValues:t,username:n}){let{confirmation_code:r,password:a}=t;return e.handleForgotPasswordSubmit({confirmationCode:r,newPassword:a,username:n})},validateFields(t){return uu(t.formValues,t.touched,t.passwordSettings,[bs.validateFormPassword,bs.validateConfirmPassword])}}})}var Mb=e=>({entry:["sendUpdate","clearError"],invoke:{src:"signInWithRedirect",onDone:{target:e},onError:{actions:"setRemoteError",target:e}}});var Pb={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signInActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:["setMissingAttributes","setNextSignInStep"],target:"#signInActor.forceChangePassword"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signInActor.resendSignUpCode"},{actions:["setChallengeName","setMissingAttributes","setNextSignInStep","setTotpSecretCode"],target:"#signInActor.init"}],onError:{actions:"setRemoteError",target:"edit"}},Qde={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signInActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signInActor.resolved"}};function o6({services:e}){return Ko({id:"signInActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignIn",target:"confirmSignIn"},{cond:"shouldSetupTotp",target:"setupTotp"},{cond:({step:n})=>n==="CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",actions:"setActorDoneData",target:"forceChangePassword"},{target:"signIn"}]},federatedSignIn:Mb("signIn"),fetchUserAttributes:{invoke:Z({src:"fetchUserAttributes"},Qde)},resendSignUpCode:{invoke:{src:"handleResendSignUpCode",onDone:{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"},onError:{actions:"setRemoteError",target:"#signInActor.signIn"}}},resetPassword:{invoke:{src:"resetPassword",onDone:[{actions:"setCodeDeliveryDetails",target:"#signInActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}}},signIn:{initial:"edit",exit:"clearTouched",states:{edit:{entry:"sendUpdate",on:{CHANGE:{actions:"handleInput"},FEDERATED_SIGN_IN:{target:"#signInActor.federatedSignIn"},SUBMIT:{actions:"handleSubmit",target:"submit"}}},submit:{tags:"pending",entry:["clearError","sendUpdate","setUsernameSignIn"],exit:"clearFormValues",invoke:Z({src:"handleSignIn"},Pb)}}},confirmSignIn:{initial:"edit",exit:["clearChallengeName","clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:Z({src:"confirmSignIn"},Pb)}}},forceChangePassword:{entry:"sendUpdate",type:"parallel",exit:["clearFormValues","clearError","clearTouched"],states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateFields",onDone:{target:"valid",actions:"clearValidationError"},onError:{target:"invalid",actions:"setFieldErrors"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{SIGN_IN:{actions:"setSignInStep",target:"#signInActor.resolved"},CHANGE:{actions:"handleInput",target:".pending"},BLUR:{actions:"handleBlur",target:".pending"}}},submit:{initial:"edit",entry:"clearError",states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateFields",onDone:{actions:"clearValidationError",target:"pending"},onError:{actions:"setFieldErrors",target:"edit"}}},pending:{tags:"pending",entry:["sendUpdate","clearError"],invoke:Z({src:"handleForceChangePassword"},Pb)}}}}},setupTotp:{initial:"edit",exit:["clearFormValues","clearError","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SIGN_IN:"#signInActor.signIn",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["sendUpdate","clearError"],invoke:Z({src:"confirmSignIn"},Pb)}}},resolved:{type:"final",data:n=>({codeDeliveryDetails:n.codeDeliveryDetails,remoteError:n.remoteError,step:n.step,unverifiedUserAttributes:n.unverifiedUserAttributes,username:n.username})}}},{actions:Me(Z({},Ha),{sendUpdate:su()}),guards:cu,services:{fetchUserAttributes(){return se(this,null,function*(){return Cy()})},resetPassword({username:n}){return wy({username:n})},handleResendSignUpCode({username:n}){return by({username:n})},handleSignIn({formValues:n,username:r}){let{password:a}=n;return e.handleSignIn({username:r,password:a})},confirmSignIn({formValues:n}){let{confirmation_code:r}=n;return e.handleConfirmSignIn({challengeResponse:r})},handleForceChangePassword(r){return se(this,arguments,function*({formValues:n}){let F=n,{password:a,phone_number:s,country_code:h,confirm_password:_}=F,w=dl(F,["password","phone_number","country_code","confirm_password"]),C;return s&&(C=`${h}${s}`.replace(/[^A-Z0-9+]/gi,""),w=Me(Z({},w),{phone_number:C})),Sy({challengeResponse:a,options:{userAttributes:w}})})},signInWithRedirect(n,{data:r}){return nf(r)},validateFields(n){return se(this,null,function*(){return uu(n.formValues,n.touched,n.passwordSettings,[bs.validateFormPassword,bs.validateConfirmPassword])})}}})}var ehe={onDone:[{actions:"setCodeDeliveryDetails",target:"#signUpActor.resolved"}],onError:{actions:["setRemoteError","sendUpdate"]}},the={onDone:[{cond:"hasCompletedSignIn",actions:"setNextSignInStep",target:"#signUpActor.fetchUserAttributes"},{cond:"shouldConfirmSignInWithNewPassword",actions:"setNextSignInStep",target:"#signUpActor.resolved"},{cond:"shouldResetPasswordFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resetPassword"},{cond:"shouldConfirmSignUpFromSignIn",actions:"setNextSignInStep",target:"#signUpActor.resendSignUpCode"},{actions:["setNextSignInStep","setChallengeName","setMissingAttributes","setTotpSecretCode"],target:"#signUpActor.resolved"}],onError:{actions:"setRemoteError",target:"#signUpActor.resolved"}},nhe={onDone:[{cond:"shouldVerifyAttribute",actions:["setShouldVerifyUserAttributeStep","setUnverifiedUserAttributes"],target:"#signUpActor.resolved"},{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}],onError:{actions:"setConfirmAttributeCompleteStep",target:"#signUpActor.resolved"}};function s6({services:e}){return Ko({id:"signUpActor",initial:"init",predictableActionArguments:!0,states:{init:{always:[{cond:"shouldConfirmSignUp",target:"confirmSignUp"},{target:"signUp"}]},autoSignIn:{tags:"pending",invoke:Z({src:"autoSignIn"},the)},fetchUserAttributes:{invoke:Z({src:"fetchUserAttributes"},nhe)},federatedSignIn:Mb("signUp"),resetPassword:{invoke:Z({src:"resetPassword"},ehe)},resendSignUpCode:{tags:"pending",entry:"sendUpdate",exit:"sendUpdate",invoke:{src:"resendSignUpCode",onDone:{actions:["setCodeDeliveryDetails","sendUpdate"],target:"#signUpActor.confirmSignUp"},onError:[{cond:"isUserAlreadyConfirmed",target:"#signUpActor.resolved"},{actions:["setRemoteError","sendUpdate"]}]}},signUp:{type:"parallel",exit:"clearTouched",on:{FEDERATED_SIGN_IN:{target:"federatedSignIn"}},states:{validation:{initial:"pending",states:{pending:{invoke:{src:"validateSignUp",onDone:{actions:"clearValidationError",target:"valid"},onError:{actions:"setFieldErrors",target:"invalid"}}},valid:{entry:"sendUpdate"},invalid:{entry:"sendUpdate"}},on:{BLUR:{actions:"handleBlur",target:".pending"},CHANGE:{actions:"handleInput",target:".pending"}}},submission:{initial:"idle",states:{idle:{entry:["sendUpdate"],on:{SUBMIT:{actions:"handleSubmit",target:"validate"}}},validate:{entry:"sendUpdate",invoke:{src:"validateSignUp",onDone:{target:"handleSignUp",actions:"clearValidationError"},onError:{actions:"setFieldErrors",target:"idle"}}},handleSignUp:{tags:"pending",entry:["setUsernameSignUp","clearError"],exit:"sendUpdate",invoke:{src:"handleSignUp",onDone:[{cond:"hasCompletedSignUp",actions:"setNextSignUpStep",target:"#signUpActor.resolved"},{cond:"shouldAutoSignIn",actions:"setNextSignUpStep",target:"#signUpActor.autoSignIn"},{actions:["setCodeDeliveryDetails","setNextSignUpStep"],target:"#signUpActor.init"}],onError:{actions:["sendUpdate","setRemoteError"],target:"idle"}}}}}}},confirmSignUp:{initial:"edit",entry:"sendUpdate",states:{edit:{on:{SUBMIT:{actions:"handleSubmit",target:"submit"},CHANGE:{actions:"handleInput"},BLUR:{actions:"handleBlur"},RESEND:"#signUpActor.resendSignUpCode"}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmSignUp",onDone:[{cond:"shouldAutoSignIn",actions:["setNextSignUpStep","clearFormValues"],target:"#signUpActor.autoSignIn"},{actions:"setNextSignUpStep",target:"#signUpActor.init"}],onError:{actions:["setRemoteError","sendUpdate"],target:"edit"}}}}},resolved:{type:"final",data:n=>({challengeName:n.challengeName,missingAttributes:n.missingAttributes,remoteError:n.remoteError,step:n.step,totpSecretCode:n.totpSecretCode,username:n.username,unverifiedUserAttributes:n.unverifiedUserAttributes})}}},{actions:Me(Z({},Ha),{sendUpdate:su()}),guards:cu,services:{autoSignIn(){return vy()},fetchUserAttributes(){return se(this,null,function*(){return Cy()})},confirmSignUp({formValues:n,username:r}){let{confirmation_code:a}=n,s={username:r,confirmationCode:a};return e.handleConfirmSignUp(s)},resendSignUpCode({username:n}){return by({username:n})},signInWithRedirect(n,{data:r}){return nf(r)},handleSignUp(n){let{formValues:r,loginMechanisms:a,username:s}=n,h=a[0],_=HV(s,r,h);return e.handleSignUp(_)},validateSignUp(n){return se(this,null,function*(){return uu(n.formValues,n.touched,n.passwordSettings,[e.validateFormPassword,e.validateConfirmPassword,e.validatePreferredUsername,e.validateCustomSignUp])})}}})}var a6=()=>Ko({initial:"pending",id:"signOutActor",predictableActionArguments:!0,states:{pending:{tags:"pending",invoke:{src:"signOut",onDone:"resolved",onError:"rejected"}},resolved:{type:"final"},rejected:{type:"final"}}},{services:{signOut:()=>JT()}});function l6(){return Ko({id:"verifyUserAttributesActor",initial:"selectUserAttributes",predictableActionArguments:!0,states:{selectUserAttributes:{initial:"edit",exit:["clearError","clearTouched","sendUpdate"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:{target:"#verifyUserAttributesActor.resolved"},CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"sendUserAttributeVerificationCode",onDone:{actions:["setSelectedUserAttribute","setCodeDeliveryDetails"],target:"#verifyUserAttributesActor.confirmVerifyUserAttribute"},onError:{actions:"setRemoteError",target:"edit"}}}}},confirmVerifyUserAttribute:{initial:"edit",exit:["clearError","clearFormValues","clearTouched"],states:{edit:{entry:"sendUpdate",on:{SUBMIT:{actions:"handleSubmit",target:"submit"},SKIP:"#verifyUserAttributesActor.resolved",CHANGE:{actions:"handleInput"}}},submit:{tags:"pending",entry:["clearError","sendUpdate"],invoke:{src:"confirmVerifyUserAttribute",onDone:{actions:["setConfirmAttributeCompleteStep","clearSelectedUserAttribute"],target:"#verifyUserAttributesActor.resolved"},onError:{actions:"setRemoteError",target:"edit"}}}}},resolved:{type:"final",data:({step:t})=>({step:t})}}},{actions:Me(Z({},Ha),{sendUpdate:su()}),services:{sendUserAttributeVerificationCode({formValues:{unverifiedAttr:t}}){return QT({userAttributeKey:t})},confirmVerifyUserAttribute(r){return se(this,arguments,function*({formValues:{confirmation_code:t},selectedUserAttribute:n}){return KT({confirmationCode:t,userAttributeKey:n})})},validateFields(t){return se(this,null,function*(){return uu(t.formValues,t.touched,t.passwordSettings,[bs.validateFormPassword,bs.validateConfirmPassword])})}}})}var Rb=(e,t)=>Me(Z({},e.actorDoneData),{step:e?.actorDoneData?.step??t,formValues:{},touched:{},validationError:{},formFields:e.config?.formFields,loginMechanisms:e.config?.loginMechanisms,passwordSettings:e.config?.passwordSettings,signUpAttributes:e.config?.signUpAttributes,socialProviders:e.config?.socialProviders}),{choose:rhe,stop:ihe}=pf,ev=e=>ihe(e),ohe={on:{INIT:{actions:"configure",target:"getConfig"},SIGN_OUT:"#authenticator.signOut"}},she={always:{actions:"configure",target:"getConfig"}};function QD(e){let a=e??{},{useNextWaitConfig:t}=a,n=dl(a,["useNextWaitConfig"]);return Ko({id:"authenticator",initial:"idle",context:{user:void 0,config:{},services:bs,actorRef:void 0,hasSetup:!1},predictableActionArguments:!0,states:{idle:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"setup"},onError:{target:"setup"}}},setup:{initial:"initConfig",states:{initConfig:t?she:ohe,getConfig:{invoke:{src:"getAmplifyConfig",onDone:[{actions:["applyAmplifyConfig","setHasSetup"],cond:"hasUser",target:"#authenticator.authenticated"},{actions:["applyAmplifyConfig","setHasSetup"],target:"goToInitialState"}]}},goToInitialState:{always:[{cond:"isInitialStateSignUp",target:"#authenticator.signUpActor"},{cond:"isInitialStateResetPassword",target:"#authenticator.forgotPasswordActor"},{target:"#authenticator.signInActor"}]}}},getCurrentUser:{invoke:{src:"handleGetCurrentUser",onDone:{actions:"setUser",target:"#authenticator.authenticated"},onError:{target:"#authenticator.setup"}}},signInActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignInActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:ev("signInActor")}},on:{FORGOT_PASSWORD:"forgotPasswordActor",SIGN_IN:"signInActor",SIGN_UP:"signUpActor","done.invoke.signInActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isResetPasswordStep",actions:"setActorDoneData",target:"#authenticator.forgotPasswordActor"},{cond:"isConfirmSignUpStep",actions:"setActorDoneData",target:"#authenticator.signUpActor"}]}},signUpActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignUpActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:ev("signUpActor")}},on:{SIGN_IN:"signInActor","done.invoke.signUpActor":[{cond:"hasCompletedAttributeConfirmation",target:"#authenticator.getCurrentUser"},{cond:"isShouldConfirmUserAttributeStep",actions:"setActorDoneData",target:"#authenticator.verifyUserAttributesActor"},{cond:"isConfirmUserAttributeStep",target:"#authenticator.verifyUserAttributesActor"},{actions:"setActorDoneData",target:"#authenticator.signInActor"}]}},forgotPasswordActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnForgotPasswordActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:ev("forgotPasswordActor")}},on:{SIGN_IN:"signInActor","done.invoke.forgotPasswordActor":[{target:"#authenticator.signInActor"}]}},verifyUserAttributesActor:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnVerifyUserAttributesActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:ev("verifyUserAttributesActor")}},on:{"done.invoke.verifyUserAttributesActor":[{actions:"setActorDoneData",target:"#authenticator.getCurrentUser"}]}},authenticated:{initial:"idle",states:{idle:{on:{TOKEN_REFRESH:"refreshUser"}},refreshUser:{invoke:{src:"#authenticator.getCurrentUser",onDone:{actions:"setUser",target:"idle"},onError:{target:"#authenticator.signOut"}}}},on:{SIGN_OUT:"signOut"}},signOut:{initial:"spawnActor",states:{spawnActor:{always:{actions:"spawnSignOutActor",target:"runActor"}},runActor:{entry:"clearActorDoneData",exit:ev("signOutActor")}},on:{"done.invoke.signOutActor":{actions:"clearUser",target:"setup.getConfig"}}}},on:{SIGN_IN_WITH_REDIRECT:{target:"#authenticator.getCurrentUser"},CHANGE:{actions:"forwardToActor"},BLUR:{actions:"forwardToActor"},SUBMIT:{actions:"forwardToActor"},FEDERATED_SIGN_IN:{actions:"forwardToActor"},RESEND:{actions:"forwardToActor"},SIGN_IN:{actions:"forwardToActor"},SKIP:{actions:"forwardToActor"}}},{actions:Me(Z({},Ha),{forwardToActor:rhe([{cond:"hasActor",actions:yB(({actorRef:s})=>s)}]),setActorDoneData:ja({actorDoneData:(s,h)=>({challengeName:h.data.challengeName,codeDeliveryDetails:h.data.codeDeliveryDetails,missingAttributes:h.data.missingAttributes,remoteError:h.data.remoteError,username:h.data.username,step:h.data.step,totpSecretCode:h.data.totpSecretCode,unverifiedUserAttributes:h.data.unverifiedUserAttributes})}),applyAmplifyConfig:ja({config(s,{data:h}){let{loginMechanisms:_=h.loginMechanisms??[],signUpAttributes:w=h.signUpAttributes??[],socialProviders:C=h.socialProviders??[],initialState:T,formFields:F,passwordSettings:B=h.passwordFormat??{}}=s.config;return _.length===0&&_.push("username"),{formFields:ahe(F)??{},initialState:T,loginMechanisms:_,passwordSettings:B,signUpAttributes:w,socialProviders:C}}}),spawnSignInActor:ja({actorRef:(s,h)=>{let{services:_}=s,w=o6({services:_}).withContext(Rb(s,"SIGN_IN"));return qd(w,{name:"signInActor"})}}),spawnSignUpActor:ja({actorRef:(s,h)=>{let{services:_}=s,w=s6({services:_}).withContext(Rb(s,"SIGN_UP"));return qd(w,{name:"signUpActor"})}}),spawnForgotPasswordActor:ja({actorRef:(s,h)=>{let{services:_}=s,w=i6({services:_}).withContext(Rb(s,"FORGOT_PASSWORD"));return qd(w,{name:"forgotPasswordActor"})}}),spawnVerifyUserAttributesActor:ja({actorRef:s=>{let h=l6().withContext(Rb(s));return qd(h,{name:"verifyUserAttributesActor"})}}),spawnSignOutActor:ja({actorRef:s=>{let h=a6().withContext({user:s?.user});return qd(h,{name:"signOutActor"})}}),configure:ja((s,h)=>{let C=IL(n)?h.data??{}:n,{services:_}=C,w=dl(C,["services"]);return{services:Z(Z({},bs),_),config:w}}),setHasSetup:ja({hasSetup:!0})}),guards:Me(Z({},cu),{hasActor:({actorRef:s})=>!!s,isInitialStateSignUp:({config:s})=>s.initialState==="signUp",isInitialStateResetPassword:({config:s})=>s.initialState==="forgotPassword",shouldSetup:({hasSetup:s})=>!s,hasUser:({user:s})=>!!s}),services:{getAmplifyConfig:({services:s})=>s.getAmplifyConfig(),handleGetCurrentUser:({services:s})=>s.getCurrentUser()}})}function ahe(e){return e&&Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(n=>{let r=e[t][n];r.required=r.isRequired})}),e}var kb=(...e)=>{let t=[];for(let n of e)if(n){if(hy(n)){t.push(n);continue}if(typeof n=="number"){t.push(n.toString());continue}if(Array.isArray(n)){t.push(kb(...n));continue}if(Rd(n)){if(n.toString!==Object.prototype.toString&&n.toString()!=="[object Object]"){t.push(n.toString());continue}for(let r in n)xT(n,r)&&n[r]&&t.push(r)}}return t.join(" ")};var eA={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Avatar:"amplify-avatar",AvatarIcon:"amplify-avatar__icon",AvatarImage:"amplify-avatar__image",AvatarLoader:"amplify-avatar__loader",AIConversation:"amplify-ai-conversation",AIConversationAttachment:"amplify-ai-conversation__attachment",AIConversationAttachmentList:"amplify-ai-conversation__attachment__list",AIConversationAttachmentImage:"amplify-ai-conversation__attachment__image",AIConversationAttachmentName:"amplify-ai-conversation__attachment__name",AIConversationAttachmentSize:"amplify-ai-conversation__attachment__size",AIConversationAttachmentRemove:"amplify-ai-conversation__attachment__remove",AIConversationForm:"amplify-ai-conversation__form",AIConversationFormAttach:"amplify-ai-conversation__form__attach",AIConversationFormSend:"amplify-ai-conversation__form__send",AIConversationFormField:"amplify-ai-conversation__form__field",AIConversationFormDropzone:"amplify-ai-conversation__form__dropzone",AIConversationMessage:"amplify-ai-conversation__message",AIConversationMessageAvatar:"amplify-ai-conversation__message__avatar",AIConversationMessageSender:"amplify-ai-conversation__message__sender",AIConversationMessageSenderUsername:"amplify-ai-conversation__message__sender__username",AIConversationMessageSenderTimestamp:"amplify-ai-conversation__message__sender__timestamp",AIConversationMessageBody:"amplify-ai-conversation__message__body",AIConversationMessageContent:"amplify-ai-conversation__message__content",AIConversationMessageActions:"amplify-ai-conversation__message__actions",AIConversationMessageList:"amplify-ai-conversation__message__list",AIConversationPrompt:"amplify-ai-conversation__prompt",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",FileUploader:"amplify-fileuploader",FileUploaderDropZone:"amplify-fileuploader__dropzone",FileUploaderDropZoneIcon:"amplify-fileuploader__dropzone__icon",FileUploaderDropZoneText:"amplify-fileuploader__dropzone__text",FileUploaderFilePicker:"amplify-fileuploader__file__picker",FileUploaderFile:"amplify-fileuploader__file",FileUploaderFileWrapper:"amplify-fileuploader__file__wrapper",FileUploaderFileList:"amplify-fileuploader__file__list",FileUploaderFileName:"amplify-fileuploader__file__name",FileUploaderFileSize:"amplify-fileuploader__file__size",FileUploaderFileInfo:"amplify-fileuploader__file__info",FileUploaderFileImage:"amplify-fileuploader__file__image",FileUploaderFileMain:"amplify-fileuploader__file__main",FileUploaderFileStatus:"amplify-fileuploader__file__status",FileUploaderLoader:"amplify-fileuploader__loader",FileUploaderPreviewer:"amplify-fileuploader__previewer",FileUploaderPreviewerText:"amplify-fileuploader__previewer__text",FileUploaderPreviewerActions:"amplify-fileuploader__previewer__actions",FileUploaderPreviewerFooter:"amplify-fileuploader__previewer__footer",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"};var tA=({componentName:e,packageName:t,version:n})=>{let r=[`ui-${t}`,n];switch(e){case"AIConversation":{Ia(Me(Z({},yL),{additionalDetails:[[e],r]}));break}case"Authenticator":{Ia(Me(Z({},_L),{additionalDetails:[[e],r]}));break}case"ChangePassword":case"DeleteUser":{Ia(Me(Z({},vL),{additionalDetails:[["AccountSettings"],r]}));break}case"FileUploader":{Ia(Me(Z({},xL),{additionalDetails:[[e],r]}));break}case"InAppMessaging":{Ia(Me(Z({},wL),{additionalDetails:[[e],r]}));break}case"LocationSearch":{Ia(Me(Z({},bL),{additionalDetails:[[e],r]}));break}case"MapView":{Ia(Me(Z({},SL),{additionalDetails:[[e],r]}));break}case"StorageManager":{Ia(Me(Z({},CL),{additionalDetails:[[e],r]}));break}}return EL};var Ol=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};var m8=qm(u8(),1);var Xd=["*"];function npe(e,t){e&1&&Us(0,0,["*ngIf","!isOverriden"])}function rpe(e,t){if(e&1&&nx(0,2),e&2){let n=zt();Te("ngTemplateOutlet",n.overridingComponent)("ngTemplateOutletContext",n.context)}}var ipe=["amplify-button",""];function ope(e,t){e&1&&(Ls(),we(0,"svg",4),Qe(1,"path",5),Se())}function spe(e,t){e&1&&(Ls(),we(0,"svg",4),Qe(1,"path",6)(2,"path",7),Se())}function ape(e,t){if(e&1&&(we(0,"option",7),Ye(1),Se()),e&2){let n=t.$implicit,r=zt();Te("value",n)("selected",n===r.defaultValue),xe(),jt(" ",n," ")}}function lpe(e,t){if(e&1&&Qe(0,"amplify-phone-number-field",5),e&2){let n=zt();Te("name",n.name)("label",n.formField.label)("defaultCountryCode",n.formField.dialCode)("dialCodeList",n.formField.dialCodeList)("placeholder",n.formField.placeholder)("required",n.formField.isRequired)("labelHidden",n.formField.labelHidden)("autocomplete",n.formField.autocomplete)("hasError",n.hasError)("describedBy",n.ariaDescribedBy)}}function cpe(e,t){if(e&1){let n=hd();we(0,"amplify-password-field",6),wn("setBlur",function(a){od(n);let s=zt();return sd(s.onBlur(a))}),Se()}if(e&2){let n=zt();Te("name",n.name)("label",n.formField.label)("placeholder",n.formField.placeholder)("required",n.formField.isRequired)("labelHidden",n.formField.labelHidden)("autocomplete",n.formField.autocomplete)("hasError",n.hasError)("describedBy",n.ariaDescribedBy)}}function upe(e,t){if(e&1&&Qe(0,"amplify-text-field",7),e&2){let n=zt();Te("name",n.name)("label",n.formField.label)("placeholder",n.formField.placeholder)("required",n.formField.isRequired)("labelHidden",n.formField.labelHidden)("autocomplete",n.formField.autocomplete)("type",n.formField.type)("hasError",n.hasError)("describedBy",n.ariaDescribedBy)}}function dpe(e,t){if(e&1&&(we(0,"div",10),Ye(1),Se()),e&2){let n=t.$implicit,r=zt(2);xe(),jt(" ",r.translate(n)," ")}}function hpe(e,t){if(e&1&&(we(0,"div",8),Tn(1,dpe,2,1,"div",9),Se()),e&2){let n=zt();Te("id",n.errorId),xe(),Te("ngForOf",n.errors)}}function ppe(e,t){if(e&1&&(fg(0),Qe(1,"amplify-form-field",1),mg()),e&2){let n=t.$implicit;xe(),Te("name",n[0])("formField",n[1])}}function fpe(e,t){if(e&1){let n=hd();we(0,"div",1)(1,"div",2),Ls(),we(2,"svg",3),Qe(3,"path",4),Se(),ld(),we(4,"div"),Us(5),Se()(),we(6,"button",5),wn("click",function(){od(n);let a=zt();return sd(a.close())}),Ls(),we(7,"svg",3),Qe(8,"path",6),Se()()()}if(e&2){let n=zt();xe(2),lr("aria-hidden",!0),xe(4),Te("fullWidth",!1),lr("aria-label",n.dismissAriaLabel),xe(),lr("aria-hidden",!0)}}function mpe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function gpe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function ype(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function vpe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function _pe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function xpe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function wpe(e,t){e&1&&(we(0,"p"),Ye(1,"Loading..."),Se())}function bpe(e,t){if(e&1&&Qe(0,"img",15),e&2){let n=zt();Te("src",n.qrCodeSource,mk)}}function Spe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function Cpe(e,t){if(e&1&&(we(0,"amplify-federated-sign-in-button",5),Ls(),we(1,"svg",6),Qe(2,"path",7),Se(),ld(),we(3,"p",8),Ye(4),Se()()),e&2){let n=zt(2);Te("text",n.signInAmazonText)("provider",n.FederatedProviders.Amazon),xe(4),jt(" ",n.signInAmazonText," ")}}function Ipe(e,t){if(e&1&&(we(0,"amplify-federated-sign-in-button",9),Ls(),we(1,"svg",10),Qe(2,"path",11),Se(),ld(),we(3,"p",8),Ye(4),Se()()),e&2){let n=zt(2);Te("provider",n.FederatedProviders.Apple),xe(4),jt(" ",n.signInAppleText," ")}}function Epe(e,t){if(e&1&&(we(0,"amplify-federated-sign-in-button",5),Ls(),we(1,"svg",12),Qe(2,"path",13),Se(),ld(),we(3,"p",8),Ye(4),Se()()),e&2){let n=zt(2);Te("text",n.signInFacebookText)("provider",n.FederatedProviders.Facebook),xe(4),jt(" ",n.signInFacebookText," ")}}function Tpe(e,t){if(e&1&&(we(0,"amplify-federated-sign-in-button",9),Ls(),we(1,"svg",14),Qe(2,"path",15)(3,"path",16)(4,"path",17)(5,"path",18),Se(),ld(),we(6,"p",8),Ye(7),Se()()),e&2){let n=zt(2);Te("provider",n.FederatedProviders.Google),xe(7),jt(" ",n.signInGoogleText," ")}}function Dpe(e,t){if(e&1&&(we(0,"div",1),Tn(1,Cpe,5,3,"amplify-federated-sign-in-button",2)(2,Ipe,5,2,"amplify-federated-sign-in-button",3)(3,Epe,5,3,"amplify-federated-sign-in-button",2)(4,Tpe,8,2,"amplify-federated-sign-in-button",3),Qe(5,"hr",4),Se()),e&2){let n=zt();xe(),Te("ngIf",n.includeAmazon),xe(),Te("ngIf",n.includeApple),xe(),Te("ngIf",n.includeFacebook),xe(),Te("ngIf",n.includeGoogle),xe(),lr("data-label",n.orText)}}function Ape(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function Mpe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function Ppe(e,t){e&1&&Us(0,0,["*ngIf","active"])}function Rpe(e,t){if(e&1){let n=hd();we(0,"button",3),wn("click",function(){let a=od(n).$implicit,s=zt();return sd(s.handleTabClick(a))}),Ye(1),Se()}if(e&2){let n=t.$implicit;hs(n.active?"amplify-tabs__item--active":""),Te("id",n.labelledById)("tabindex",n.active?"0":"-1"),lr("aria-selected",n.active)("aria-controls",n.id),xe(),jt(" ",n.title," ")}}function kpe(e,t){if(e&1&&(we(0,"div"),Qe(1,"input",9),we(2,"label",10),Ye(3),Se()()),e&2){let n=t.$implicit,r=t.index,a=zt();xe(),Te("value",n.key)("id",a.labelId)("checked",r===0),xe(),Te("for",a.labelId),xe(),hi(a.getLabel(n.key,n.value))}}function Npe(e,t){if(e&1&&(we(0,"amplify-error"),Ye(1),Se()),e&2){let n=zt();xe(),jt(" ",n.authenticator.error," ")}}function Fpe(e,t){if(e&1&&(we(0,"amplify-slot",20),Qe(1,"amplify-sign-in"),Se()),e&2){let n=zt(3);Te("context",n.context)}}function Ope(e,t){if(e&1&&(we(0,"amplify-slot",21),Qe(1,"amplify-sign-up"),Se()),e&2){let n=zt(3);Te("context",n.context)}}function Lpe(e,t){if(e&1){let n=hd();we(0,"amplify-tabs",17),wn("tabChange",function(){od(n);let a=zt(2);return sd(a.onTabChange())}),we(1,"amplify-tab-item",18),Tn(2,Fpe,2,1,"amplify-slot",7),Se(),we(3,"amplify-tab-item",18),Tn(4,Ope,2,1,"amplify-slot",19),Se()()}if(e&2){let n=zt(2);xe(),Te("title",n.signInTitle)("active",n.route==="signIn"),xe(),Te("ngIf",n.route==="signIn"),xe(),Te("title",n.signUpTitle)("active",n.route==="signUp"),xe(),Te("ngIf",n.route==="signUp")}}function zpe(e,t){if(e&1&&(we(0,"amplify-slot",20),Qe(1,"amplify-sign-in"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Upe(e,t){if(e&1&&(we(0,"amplify-slot",22),Qe(1,"amplify-confirm-sign-up"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Bpe(e,t){if(e&1&&(we(0,"amplify-slot",23),Qe(1,"amplify-confirm-sign-in"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Vpe(e,t){if(e&1&&(we(0,"amplify-slot",24),Qe(1,"amplify-setup-totp"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function jpe(e,t){if(e&1&&(we(0,"amplify-slot",25),Qe(1,"amplify-force-new-password"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function $pe(e,t){if(e&1&&(we(0,"amplify-slot",26),Qe(1,"amplify-forgot-password"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function qpe(e,t){if(e&1&&(we(0,"amplify-slot",27),Qe(1,"amplify-confirm-reset-password"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Hpe(e,t){if(e&1&&(we(0,"amplify-slot",28),Qe(1,"amplify-verify-user"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Gpe(e,t){if(e&1&&(we(0,"amplify-slot",29),Qe(1,"amplify-confirm-verify-user"),Se()),e&2){let n=zt(2);Te("context",n.context)}}function Wpe(e,t){if(e&1&&(we(0,"div",2)(1,"div",3),Qe(2,"amplify-slot",4),we(3,"div",5),Tn(4,Lpe,5,6,"amplify-tabs",6)(5,zpe,2,1,"amplify-slot",7)(6,Upe,2,1,"amplify-slot",8)(7,Bpe,2,1,"amplify-slot",9)(8,Vpe,2,1,"amplify-slot",10)(9,jpe,2,1,"amplify-slot",11)(10,$pe,2,1,"amplify-slot",12)(11,qpe,2,1,"amplify-slot",13)(12,Hpe,2,1,"amplify-slot",14)(13,Gpe,2,1,"amplify-slot",15),Se(),Qe(14,"amplify-slot",16),Se()()),e&2){let n=zt();lr("data-variation",n.variation),xe(2),Te("context",n.context),xe(),lr("data-amplify-router-content",n.hasTabs()?void 0:""),xe(),Te("ngIf",(n.route==="signIn"||n.route==="signUp")&&!n.hideSignUp),xe(),Te("ngIf",n.route==="signIn"&&n.hideSignUp),xe(),Te("ngIf",n.route==="confirmSignUp"),xe(),Te("ngIf",n.route==="confirmSignIn"),xe(),Te("ngIf",n.route==="setupTotp"),xe(),Te("ngIf",n.route==="forceNewPassword"),xe(),Te("ngIf",n.route==="forgotPassword"),xe(),Te("ngIf",n.route==="confirmResetPassword"),xe(),Te("ngIf",n.route==="verifyUser"),xe(),Te("ngIf",n.route==="confirmVerifyUser"),xe(),Te("context",n.context)}}function Zpe(e,t){if(e&1&&(we(0,"amplify-slot",30),Us(1),Se()),e&2){let n=zt();Te("context",n.context)}}var EA=(()=>{class e{constructor(n){this.template=n}set amplifySlot(n){this.name=n}}return e.\u0275fac=function(n){return new(n||e)(sn(ga))},e.\u0275dir=va({type:e,selectors:[["","amplifySlot",""]],inputs:{amplifySlot:"amplifySlot"}}),e})(),IA=(()=>{class e{constructor(){this._customComponents={}}get customComponents(){return this._customComponents}set customComponents(n){this._customComponents=Z(Z({},this._customComponents),n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Kpe="5.0.30",Ype=new or("state-machine"),Si=(()=>{class e{constructor(){this._authStatus="configuring";let n=QD();this._authService=db(n).start(),this.getInitialAuthStatus(),this.setupMachineSubscription(),this.setupHubListener()}get error(){return St(this._facade?.error)}get hasValidationErrors(){return this._facade?.hasValidationErrors}get isPending(){return this._facade?.isPending}get route(){return this._facade?.route}get authStatus(){return this._authStatus}get user(){return this._facade?.user}get username(){return this._facade?.username}get validationErrors(){return this._facade?.validationErrors}get codeDeliveryDetails(){return this._facade?.codeDeliveryDetails}get totpSecretCode(){return this._facade?.totpSecretCode}get initializeMachine(){return this._facade.initializeMachine}get updateForm(){return this._facade.updateForm}get updateBlur(){return this._facade.updateBlur}get resendCode(){return this._facade.resendCode}get signOut(){return this._facade.signOut}get submitForm(){return this._facade.submitForm}get toFederatedSignIn(){return this._facade.toFederatedSignIn}get toForgotPassword(){return this._facade.toForgotPassword}get toSignIn(){return this._facade.toSignIn}get toSignUp(){return this._facade.toSignUp}get skipVerification(){return this._facade.skipVerification}get authState(){return this._authState}get authService(){return this._authService}get context(){return this._authState.context}get slotContext(){return Me(Z({},this._facade),{$implicit:this._facade})}get hubSubject(){return this._hubSubject}subscribe(n){return this._authService||Ype.error("Subscription attempted before machine was created. This is likely a bug on the library, please consider filing a bug."),this._authService.subscribe(()=>{n(this._facade)})}ngOnDestroy(){this._machineSubscription&&this._machineSubscription.unsubscribe(),this._unsubscribeHub&&this._unsubscribeHub()}send(n){this.authService.send(n)}getInitialAuthStatus(){return se(this,null,function*(){try{yield kl(),this._authStatus="authenticated"}catch{this._authStatus="unauthenticated"}})}setupHubListener(){this._hubSubject=new Vr;let n=()=>{this._authStatus="authenticated"},r=()=>{this._authStatus="unauthenticated"};this._unsubscribeHub=bT(this._authService,(a,s)=>{Sw(a,s,{onSignIn:n,onSignOut:r}),this._hubSubject.next()})}setupMachineSubscription(){this._machineSubscription=this._authService.subscribe(n=>{let r=n;this._authState=r,this._facade=CT({send:this._authService.send,state:r})})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=ft({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Gs=(()=>{class e{constructor(n){this.propService=n,this.display="contents",this.isOverriden=!1}ngAfterContentInit(){let{customComponents:n}=this.propService,r=n[this.name];r&&(this.overridingComponent=r,this.isOverriden=!0)}}return e.\u0275fac=function(n){return new(n||e)(sn(IA))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-slot"]],hostVars:2,hostBindings:function(n,r){n&2&&wl("display",r.display)},inputs:{name:"name",context:"context"},ngContentSelectors:Xd,decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,r){n&1&&(zs(),Tn(0,npe,1,0,"ng-content",0)(1,rpe,1,2,"ng-container",1)),n&2&&(Te("ngIf",!r.isOverriden),xe(),Te("ngIf",r.isOverriden))},dependencies:[$r,ZN],encapsulation:2}),e})(),Yo=(()=>{class e{constructor(){this.type="button",this.fullWidth=!1,this.isDisabled=!1,this.size="medium",this.variation="default",this.fontWeight="normal"}get getDisabled(){return this.isDisabled?"":null}get classNames(){let n="amplify-button";return this.variation&&(n+=` amplify-button--${this.variation}`),this.size&&(n+=` amplify-button--${this.size}`),this.fullWidth&&(n+=" amplify-button--fullwidth"),this.isDisabled&&(n+=" amplify-button--disabled amplify-button--loading"),n}ngOnInit(){this.typeAttr=this.type,this.fullWidthAttr=this.fullWidth,this.sizeAttr=this.size,this.variationAttr=this.variation,this.fontWeightAttr=this.fontWeight}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["button","amplify-button",""]],hostVars:9,hostBindings:function(n,r){n&2&&(BI("type",r.typeAttr),lr("data-fullwidth",r.fullWidthAttr)("data-size",r.sizeAttr)("data-variation",r.variationAttr)("disabled",r.getDisabled),hs(r.classNames),wl("font-weight",r.fontWeightAttr))},inputs:{type:"type",fullWidth:"fullWidth",isDisabled:"isDisabled",size:"size",variation:"variation",fontWeight:"fontWeight"},attrs:ipe,ngContentSelectors:Xd,decls:1,vars:0,template:function(n,r){n&1&&(zs(),Us(0))},encapsulation:2}),e})(),Xpe=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.fieldId=`amplify-field-${Ol(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.setBlur=new ti,this.type="password",this.showPassword=!1,this.showPasswordButtonlabel=St("Show password"),this.classnames=kb,this.ComponentClassName=eA}togglePasswordText(){this.showPassword=!this.showPassword,this.showPasswordButtonlabel=this.showPassword?St("Hide password"):St("Show password"),this.type=this.showPassword?"text":"password"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-password-field"]],inputs:{autocomplete:"autocomplete",disabled:"disabled",fieldId:"fieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",labelHidden:"labelHidden",hasError:"hasError",describedBy:"describedBy"},outputs:{setBlur:"setBlur"},decls:10,vars:30,consts:[[1,"amplify-label",3,"for"],["autocapitalize","off",3,"blur","id","type","name","placeholder","required","value","autocomplete"],["amplify-button","","role","switch",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24","class","amplify-icon",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"amplify-icon"],["d","M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"],["d","M0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0zm0 0h24v24H0z","fill","none"],["d","M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"]],template:function(n,r){n&1&&(we(0,"div")(1,"label",0),Ye(2),Se(),we(3,"div")(4,"div")(5,"input",1),wn("blur",function(s){return r.setBlur.emit(s)}),Se()(),we(6,"div")(7,"button",2),wn("click",function(){return r.togglePasswordText()}),Tn(8,ope,2,0,"svg",3)(9,spe,3,0,"svg",3),Se()()()()),n&2&&(hs(r.classnames(r.ComponentClassName.Flex,r.ComponentClassName.Field,r.ComponentClassName.TextField,r.ComponentClassName.PasswordField)),xe(),pg("amplify-visually-hidden",r.labelHidden),Te("for",r.fieldId),xe(),jt(" ",r.label," "),xe(),hs(r.classnames(r.ComponentClassName.Flex,r.ComponentClassName.FieldGroup)),xe(),hs(r.ComponentClassName.FieldGroupFieldWrapper),xe(),hs(r.classnames(r.ComponentClassName.Input,r.ComponentClassName.FieldGroupControl,r.ComponentClassName.FieldShowPassword)),Te("id",r.fieldId)("type",r.type)("name",r.name)("placeholder",r.placeholder)("required",r.required)("value",r.initialValue)("autocomplete",r.autocomplete),lr("disabled",r.disabled?"":null)("aria-invalid",r.hasError?"true":"false")("aria-describedby",r.describedBy),xe(),hs(r.ComponentClassName.FieldGroupOuterEnd),xe(),hs(r.classnames(r.ComponentClassName.Input,r.ComponentClassName.FieldGroupControl)),lr("aria-checked",r.type!=="password")("aria-label",r.showPasswordButtonlabel),xe(),Te("ngIf",!r.showPassword),xe(),Te("ngIf",r.showPassword))},dependencies:[$r,Yo],encapsulation:2}),e})(),Jpe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-form-select"]],inputs:{items:"items",name:"name",label:"label",id:"id",defaultValue:"defaultValue"},decls:8,vars:5,consts:[[1,"amplify-label","amplify-visually-hidden",3,"for"],[1,"amplify-select__wrapper"],["autocomplete","tel-country-code",1,"amplify-select","amplify-field-group__control",3,"id","name"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"amplify-flex","amplify-select__icon",2,"align-items","center","justify-content","center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","data-size","large","fill","currentColor",1,"amplify-icon"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"],[3,"value","selected"]],template:function(n,r){n&1&&(we(0,"label",0),Ye(1),Se(),we(2,"div",1)(3,"select",2),Tn(4,ape,2,3,"option",3),Se(),we(5,"div",4),Ls(),we(6,"svg",5),Qe(7,"path",6),Se()()()),n&2&&(Te("for",r.id),xe(),hi(r.label),xe(2),Te("id",r.id)("name",r.name),xe(),Te("ngForOf",r.items))},dependencies:[Dp],encapsulation:2}),e})(),Qpe=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.selectFieldId=`amplify-field-${Ol(12)}`,this.textFieldId=`amplify-field-${Ol(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.display="contents"}ngOnInit(){this.countryDialCodesValues=this.dialCodeList??qp}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-phone-number-field"]],hostVars:2,hostBindings:function(n,r){n&2&&wl("display",r.display)},inputs:{autocomplete:"autocomplete",disabled:"disabled",defaultCountryCode:"defaultCountryCode",selectFieldId:"selectFieldId",textFieldId:"textFieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",type:"type",labelHidden:"labelHidden",dialCodeList:"dialCodeList",hasError:"hasError",describedBy:"describedBy"},decls:9,vars:17,consts:[[1,"amplify-flex","amplify-field","amplify-textfield","amplify-phonenumberfield"],[1,"amplify-label",3,"for"],[1,"amplify-flex","amplify-field-group","amplify-field-group--horizontal"],[1,"amplify-field-group__outer-start"],[1,"amplify-flex","amplify-field","amplify-selectfield","amplify-dialcodeselect",2,"flex-direction","column"],["name","country_code","label","Country Code",3,"id","items","defaultValue"],[1,"amplify-field-group__field-wrapper","amplify-field-group__field-wrapper--horizontal"],[1,"amplify-input","amplify-field-group__control",3,"id","type","name","placeholder","required","value","autocomplete"]],template:function(n,r){n&1&&(we(0,"div",0)(1,"label",1),Ye(2),Se(),we(3,"div",2)(4,"div",3)(5,"div",4),Qe(6,"amplify-form-select",5),Se()(),we(7,"div",6),Qe(8,"input",7),Se()()()),n&2&&(xe(),pg("amplify-visually-hidden",r.labelHidden),Te("for",r.textFieldId),xe(),jt(" ",r.label," "),xe(4),Te("id",r.selectFieldId)("items",r.countryDialCodesValues)("defaultValue",r.defaultCountryCode),xe(2),Te("id",r.textFieldId)("type",r.type)("name",r.name)("placeholder",r.placeholder)("required",r.required)("value",r.initialValue)("autocomplete",r.autocomplete),lr("disabled",r.disabled?"":null)("aria-invalid",r.hasError?"true":"false")("aria-describedby",r.describedBy))},dependencies:[Jpe],encapsulation:2}),e})(),efe=(()=>{class e{constructor(){this.autocomplete="new-password",this.disabled=!1,this.fieldId=`amplify-field-${Ol(12)}`,this.initialValue="",this.label="",this.placeholder="",this.required=!0,this.labelHidden=!1,this.display="contents"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-text-field"]],hostVars:2,hostBindings:function(n,r){n&2&&wl("display",r.display)},inputs:{autocomplete:"autocomplete",disabled:"disabled",fieldId:"fieldId",initialValue:"initialValue",label:"label",name:"name",placeholder:"placeholder",required:"required",type:"type",labelHidden:"labelHidden",hasError:"hasError",describedBy:"describedBy"},decls:3,vars:14,consts:[[1,"amplify-label",3,"for"],["autocapitalize","off",1,"amplify-input",3,"id","type","name","placeholder","required","value","autocomplete"]],template:function(n,r){n&1&&(we(0,"label",0),Ye(1),Se(),Qe(2,"input",1)),n&2&&(pg("amplify-visually-hidden",r.labelHidden),Te("for",r.fieldId),xe(),jt(" ",r.label,`
`),xe(),Te("id",r.fieldId)("type",r.type)("name",r.name)("placeholder",r.placeholder)("required",r.required)("value",r.initialValue)("autocomplete",r.autocomplete),lr("disabled",r.disabled?"":null)("aria-invalid",r.hasError?"true":"false")("aria-describedby",r.describedBy))},encapsulation:2}),e})(),tfe=(()=>{class e{constructor(n){this.authenticator=n,this.countryDialCodesValue=qp,this.errorId=Ol(12)}get ariaDescribedBy(){return this.hasError()?this.errorId:void 0}get errors(){let{validationErrors:n}=this.authenticator;return ET(n[this.name])}onBlur(n){let{name:r}=n.target;this.authenticator.updateBlur({name:r})}isPasswordField(){return this.formField.type==="password"}isPhoneField(){return this.formField.type==="tel"}hasError(){return this.errors?.length>0}translate(n){return St(n)}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-form-field"]],inputs:{name:"name",formField:"formField"},decls:5,vars:4,consts:[[1,"amplify-flex","amplify-field","amplify-authenticator__column"],["type","tel",3,"name","label","defaultCountryCode","dialCodeList","placeholder","required","labelHidden","autocomplete","hasError","describedBy",4,"ngIf"],[3,"name","label","placeholder","required","labelHidden","autocomplete","hasError","describedBy","setBlur",4,"ngIf"],[3,"name","label","placeholder","required","labelHidden","autocomplete","type","hasError","describedBy",4,"ngIf"],["data-amplify-sign-up-errors","",3,"id",4,"ngIf"],["type","tel",3,"name","label","defaultCountryCode","dialCodeList","placeholder","required","labelHidden","autocomplete","hasError","describedBy"],[3,"setBlur","name","label","placeholder","required","labelHidden","autocomplete","hasError","describedBy"],[3,"name","label","placeholder","required","labelHidden","autocomplete","type","hasError","describedBy"],["data-amplify-sign-up-errors","",3,"id"],["class","amplify-text amplify-text--error","data-variation","error",4,"ngFor","ngForOf"],["data-variation","error",1,"amplify-text","amplify-text--error"]],template:function(n,r){n&1&&(we(0,"div",0),Tn(1,lpe,1,10,"amplify-phone-number-field",1)(2,cpe,1,8,"amplify-password-field",2)(3,upe,1,9,"amplify-text-field",3)(4,hpe,2,2,"div",4),Se()),n&2&&(xe(),Te("ngIf",r.isPhoneField()),xe(),Te("ngIf",r.isPasswordField()),xe(),Te("ngIf",!r.isPasswordField()&&!r.isPhoneField()),xe(),Te("ngIf",r.hasError()))},dependencies:[Dp,$r,Xpe,Qpe,efe],encapsulation:2}),e})(),zl=(()=>{class e{constructor(n){this.authenticator=n,this.display="contents",this.formFields=[]}ngOnInit(){let n=this.authenticator.authState;this.formFields=PT(this.route,n)}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-base-form-fields"]],hostVars:2,hostBindings:function(n,r){n&2&&wl("display",r.display)},inputs:{route:"route"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"name","formField"]],template:function(n,r){n&1&&Tn(0,ppe,2,2,"ng-container",0),n&2&&Te("ngForOf",r.formFields)},dependencies:[Dp,tfe],encapsulation:2}),e})(),Ga=(()=>{class e{constructor(){this.isVisible=!0,this.dismissAriaLabel=St("Dismiss alert")}close(){this.isVisible=!1}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-error"]],ngContentSelectors:Xd,decls:1,vars:1,consts:[["class","amplify-flex amplify-alert amplify-alert--error","data-variation","error","style","align-items: center; justify-content: space-between","role","alert",4,"ngIf"],["data-variation","error","role","alert",1,"amplify-flex","amplify-alert","amplify-alert--error",2,"align-items","center","justify-content","space-between"],[1,"amplify-flex",2,"align-items","center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"amplify-icon"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"],["amplify-button","","variation","link",3,"click","fullWidth"],["d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"]],template:function(n,r){n&1&&(zs(),Tn(0,fpe,9,4,"div",0)),n&2&&Te("ngIf",r.isVisible)},dependencies:[$r,Yo],encapsulation:2}),e})(),{getBackToSignInText:nfe,getResendCodeText:rfe,getSubmitText:ife,getResetYourPasswordText:ofe}=bo,sfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=ofe(),this.backToSignInText=nfe(),this.resendCodeText=rfe(),this.submitText=ife()}get context(){return this.authenticator.slotContext}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-confirm-reset-password"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-confirmsignin",r.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-reset-password-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmResetPassword"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true","type","button",3,"click"],[4,"ngIf"],["name","confirm-reset-password-footer",3,"context"]],template:function(n,r){n&1&&(we(0,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Qe(5,"amplify-base-form-fields",4),we(6,"button",5),Ye(7),Se(),we(8,"button",6),wn("click",function(){return r.authenticator.resendCode()}),Ye(9),Se(),Tn(10,mpe,2,1,"amplify-error",7),Se(),Qe(11,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.submitText," "),xe(2),jt(" ",r.resendCodeText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),{getConfirmText:afe,getBackToSignInText:lfe,getChallengeText:cfe}=bo,ufe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.confirmText=afe(),this.backToSignInText=lfe()}get context(){return this.authenticator.slotContext}ngOnInit(){this.setHeaderText()}setHeaderText(){let n=this.authenticator.authState,r=jc(n),{challengeName:a}=r;this.headerText=cfe(a)}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-confirm-sign-in"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-confirmsignin",r.dataAttr)},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-sign-in-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmSignIn"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","confirm-sign-in-footer",3,"context"]],template:function(n,r){n&1&&(we(0,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Qe(5,"amplify-base-form-fields",4),we(6,"button",5),Ye(7),Se(),we(8,"button",6),wn("click",function(){return r.authenticator.toSignIn()}),Ye(9),Se(),Tn(10,gpe,2,1,"amplify-error",7),Se(),Qe(11,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.confirmText," "),xe(2),jt(" ",r.backToSignInText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),{getResendCodeText:dfe,getConfirmText:hfe,getDeliveryMethodText:pfe,getDeliveryMessageText:ffe}=bo,mfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.resendCodeText=dfe(),this.confirmText=hfe()}get context(){return this.authenticator.slotContext}get confirmSignUpHeading(){let{codeDeliveryDetails:n}=this.authenticator;return pfe(n)}get subtitleText(){let{codeDeliveryDetails:n}=this.authenticator;return ffe(n)}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-confirm-sign-up"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-confirmsignup",r.dataAttr)},decls:15,vars:9,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-sign-up-header",3,"context"],[1,"amplify-heading","amplify-authenticator__heading",2,"font-size","1.5rem"],[1,"amplify-authenticator__subtitle"],["route","confirmSignUp"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","fontWeight","normal",3,"click"],[4,"ngIf"],["name","confirm-sign-up-footer",3,"context"]],template:function(n,r){n&1&&(fg(0),we(1,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(2,"fieldset",1)(3,"amplify-slot",2)(4,"h3",3),Ye(5),Se()(),we(6,"span",4),Ye(7),Se(),Qe(8,"amplify-base-form-fields",5),we(9,"button",6),Ye(10),Se(),we(11,"button",7),wn("click",function(){return r.authenticator.resendCode()}),Ye(12),Se()(),Tn(13,ype,2,1,"amplify-error",8),Qe(14,"amplify-slot",9),Se(),mg()),n&2&&(xe(2),Te("disabled",r.context.isPending),xe(),Te("context",r.context),xe(2),jt(" ",r.confirmSignUpHeading," "),xe(2),jt(" ",r.subtitleText," "),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.confirmText," "),xe(2),jt(" ",r.resendCodeText," "),xe(),Te("ngIf",r.context.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),{getAccountRecoveryInfoText:gfe,getSkipText:yfe,getSubmitText:vfe}=bo,_fe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=gfe(),this.skipText=yfe(),this.submitText=vfe()}get context(){return this.authenticator.slotContext}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-confirm-verify-user"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-confirmverifyuser",r.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"input","submit"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","confirm-verify-user-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","confirmVerifyUser"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","confirm-verify-user-footer",3,"context"]],template:function(n,r){n&1&&(we(0,"form",0),wn("input",function(s){return r.onInput(s)})("submit",function(s){return r.onSubmit(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Qe(5,"amplify-base-form-fields",4),we(6,"button",5),Ye(7),Se(),we(8,"button",6),wn("click",function(){return r.authenticator.skipVerification()}),Ye(9),Se(),Tn(10,vpe,2,1,"amplify-error",7),Se(),Qe(11,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.submitText," "),xe(2),jt(" ",r.skipText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),xfe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-force-new-password-form-fields"]],decls:2,vars:0,consts:[["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column"],["route","forceNewPassword"]],template:function(n,r){n&1&&(we(0,"div",0),Qe(1,"amplify-base-form-fields",1),Se())},dependencies:[zl],encapsulation:2}),e})(),{getChangePasswordText:d8,getBackToSignInText:wfe}=bo,bfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=d8(),this.changePasswordText=d8(),this.backToSignInText=wfe()}get context(){return this.authenticator.slotContext}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-force-new-password"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-forcenewpassword",r.dataAttr)},inputs:{headerText:"headerText"},decls:13,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","force-new-password-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],["name","force-new-form-fields",3,"context"],["amplify-button","","variation","primary","fullWidth","true","type","submit"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","force-new-password-footer",3,"context"]],template:function(n,r){n&1&&(we(0,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),we(5,"amplify-slot",4),Qe(6,"amplify-force-new-password-form-fields"),Se(),we(7,"button",5),Ye(8),Se(),we(9,"button",6),wn("click",function(){return r.authenticator.toSignIn()}),Ye(10),Se(),Tn(11,_pe,2,1,"amplify-error",7),Se(),Qe(12,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(),Te("context",r.context),xe(3),jt(" ",r.changePasswordText," "),xe(2),jt(" ",r.backToSignInText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,Yo,Ga,xfe],encapsulation:2}),e})(),{getResetYourPasswordText:Sfe,getSendCodeText:Cfe,getBackToSignInText:Ife}=bo,Efe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=Sfe(),this.sendCodeText=Cfe(),this.backToSignInText=Ife()}get context(){return this.authenticator.slotContext}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-forgot-password"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-forgotpassword",r.dataAttr)},inputs:{headerText:"headerText"},decls:12,vars:8,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","forgot-password-header",1,"amplify-flex",3,"context"],[1,"amplify-heading","amplify-heading--3"],["route","forgotPassword"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","forgot-password-footer",3,"context"]],template:function(n,r){n&1&&(we(0,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Qe(5,"amplify-base-form-fields",4),we(6,"button",5),Ye(7),Se(),we(8,"button",6),wn("click",function(){return r.authenticator.toSignIn()}),Ye(9),Se(),Tn(10,xpe,2,1,"amplify-error",7),Se(),Qe(11,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.sendCodeText," "),xe(2),jt(" ",r.backToSignInText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),h8=new or("SetupTotp"),{getSetupTotpText:Tfe,getCopyText:Dfe,getBackToSignInText:Afe,getConfirmText:Mfe,getCopiedText:Pfe}=bo,Rfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=Tfe(),this.qrCodeSource="",this.totpSecretCode="",this.copyTextLabel=Dfe(),this.backToSignInText=Afe(),this.confirmText=Mfe()}get context(){return this.authenticator.slotContext}ngOnInit(){return se(this,null,function*(){yield this.generateQRCode()})}generateQRCode(){return se(this,null,function*(){let{authState:n,totpSecretCode:r,username:a}=this.authenticator,{formFields:s}=jc(n),{totpIssuer:h="AWSCognito",totpUsername:_=a}=s?.setupTotp?.QR??{};this.totpSecretCode=r;try{let w=AT(h,_,this.totpSecretCode);h8.info("totp code was generated:",w),this.qrCodeSource=yield m8.default.toDataURL(w)}catch(w){h8.error(w)}})}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}copyText(){navigator.clipboard.writeText(this.totpSecretCode),this.copyTextLabel=Pfe()}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-setup-totp"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-setup-totp",r.dataAttr)},decls:22,vars:12,consts:[["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","setup-totp-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],[4,"ngIf"],["alt","qr code","data-amplify-qrcode","","width","228","height","228",3,"src",4,"ngIf"],["data-amplify-copy","",1,"amplify-flex"],["data-amplify-copy-svg","",3,"click"],["data-amplify-copy-tooltip",""],["width","24","height","24","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg"],["d","M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z"],["route","setupTotp"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],["name","setup-totp-footer",3,"context"],["alt","qr code","data-amplify-qrcode","","width","228","height","228",3,"src"]],template:function(n,r){n&1&&(we(0,"form",0),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Tn(5,wpe,2,0,"p",4)(6,bpe,1,1,"img",5),we(7,"div",6)(8,"div"),Ye(9),Se(),we(10,"div",7),wn("click",function(){return r.copyText()}),we(11,"div",8),Ye(12),Se(),Ls(),we(13,"svg",9),Qe(14,"path",10),Se()()(),ld(),Qe(15,"amplify-base-form-fields",11),we(16,"button",12),Ye(17),Se(),we(18,"button",13),wn("click",function(){return r.authenticator.toSignIn()}),Ye(19),Se(),Tn(20,Spe,2,1,"amplify-error",4),Se(),Qe(21,"amplify-slot",14),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(),Te("ngIf",!r.qrCodeSource),xe(),Te("ngIf",r.qrCodeSource),xe(3),hi(r.totpSecretCode),xe(3),hi(r.copyTextLabel),xe(4),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.confirmText," "),xe(2),jt(" ",r.backToSignInText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[$r,Gs,zl,Yo,Ga],encapsulation:2}),e})(),kfe=(()=>{class e{constructor(n){this.authenticator=n,this.onClick=()=>{this.authenticator.send({type:"FEDERATED_SIGN_IN",data:{provider:this.provider}})}}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-federated-sign-in-button"]],inputs:{provider:"provider",text:"text"},ngContentSelectors:Xd,decls:3,vars:0,consts:[["amplify-button","","fullWidth","true","fontWeight","normal",1,"amplify-field-group__control","federated-sign-in-button",3,"click"],[1,"amplify-flex","federated-sign-in-button-row"]],template:function(n,r){n&1&&(zs(),we(0,"button",0),wn("click",function(){return r.onClick()}),we(1,"div",1),Us(2),Se()())},dependencies:[Yo],encapsulation:2}),e})(),{getSignInWithFederationText:Hb,getOrText:Nfe}=bo,g8=(()=>{class e{constructor(n){this.authenticator=n,this.FederatedProviders=Cw,this.includeAmazon=!1,this.includeApple=!1,this.includeFacebook=!1,this.includeGoogle=!1,this.shouldShowFederatedSignIn=!1}ngOnInit(){let n=this.authenticator.context?.config?.socialProviders;this.setFederatedTexts(),this.includeAmazon=n?.includes("amazon"),this.includeApple=n?.includes("apple"),this.includeGoogle=n?.includes("google"),this.includeFacebook=n?.includes("facebook"),this.shouldShowFederatedSignIn=this.includeAmazon||this.includeApple||this.includeFacebook||this.includeGoogle}setFederatedTexts(){let{route:n}=this.authenticator;this.orText=Nfe(),this.signInAmazonText=Hb(n,"amazon"),this.signInAppleText=Hb(n,"apple"),this.signInFacebookText=Hb(n,"facebook"),this.signInGoogleText=Hb(n,"google")}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-federated-sign-in"]],decls:1,vars:1,consts:[["class","amplify-flex federated-sign-in-container","data-orientation","horizontal","data-size","small",4,"ngIf"],["data-orientation","horizontal","data-size","small",1,"amplify-flex","federated-sign-in-container"],[3,"text","provider",4,"ngIf"],[3,"provider",4,"ngIf"],["aria-orientation","horizontal","data-size","small",1,"amplify-divider","amplify-divider--label","amplify-divider--small"],[3,"text","provider"],["aria-label","Amazon icon","viewBox","0 0 248 268",1,"amplify-icon","federated-sign-in-icon"],["d","M139.056521,147.024612 C133.548808,156.744524 124.782731,162.726926 115.087401,162.726926 C101.790721,162.726926 93.9937779,152.612964 93.9937779,137.68681 C93.9937779,108.224571 120.447551,102.879017 145.533369,102.879017 L145.533369,110.365976 C145.533369,123.831358 145.876354,135.063787 139.056521,147.024612 M207.206992,162.579655 C209.400505,165.692256 209.887066,169.437725 207.063416,171.770186 C199.996315,177.653081 187.429476,188.590967 180.513926,194.716661 L180.46208,194.621133 C178.176838,196.663031 174.862638,196.810303 172.27828,195.445057 C160.780281,185.9162 158.686473,181.494078 152.405048,172.403055 C133.405233,191.751331 119.909143,197.534719 95.309886,197.534719 C66.1281801,197.534719 43.4791563,179.599451 43.4791563,143.669212 C43.4791563,115.616003 58.6782107,96.5105248 80.4019706,87.1727225 C99.2063636,78.9096034 125.464714,77.4528107 145.533369,75.1641337 L145.533369,70.694248 C145.533369,62.4749122 146.167493,52.7510201 141.297893,45.6541312 C137.110277,39.2856386 129.018206,36.6586354 121.859376,36.6586354 C108.658413,36.6586354 96.9171331,43.4171982 94.0416364,57.4199213 C93.4593582,60.532522 91.1701278,63.5933787 88.003492,63.7406501 L54.4387473,60.1424518 C51.6150972,59.5095829 48.4484614,57.2248862 49.2740201,52.8982915 C56.9712583,12.2553679 93.7983558,0 126.732964,0 C143.587124,0 165.606011,4.47386604 178.902691,17.2148315 C195.760839,32.917146 194.149604,53.8694866 194.149604,76.6726704 L194.149604,130.542157 C194.149604,146.734049 200.87372,153.830938 207.206992,162.579655 Z M233.826346,208.038962 C230.467669,203.683255 211.550709,205.9821 203.056405,206.998432 C200.470662,207.321077 200.076227,205.042397 202.406981,203.404973 C217.475208,192.664928 242.201125,195.766353 245.081698,199.363845 C247.966255,202.981502 244.336653,228.071183 230.172839,240.049379 C228.001452,241.888455 225.929671,240.904388 226.89783,238.468418 C230.077218,230.430525 237.204944,212.418868 233.826346,208.038962 Z M126.768855,264 C74.0234043,264 42.0764048,241.955028 17.7852554,217.541992 C12.9733903,212.705982 6.71799208,206.295994 3.31151296,200.690918 C1.90227474,198.372135 5.59096074,195.021875 8.0442063,196.84375 C38.2390146,219.267578 82.1011654,239.538304 125.529506,239.538304 C154.819967,239.538304 191.046475,227.469543 220.66851,214.867659 C225.146771,212.966167 225.146771,219.180222 224.511585,221.060516 C224.183264,222.03242 209.514625,236.221149 189.247207,247.047411 C170.304273,257.166172 146.397132,264 126.768855,264 Z","fill","#FF9900"],[1,"amplify-text","amplify-authenticator__federated-text"],[3,"provider"],["aria-label","Apple icon","fill","#000","preserveAspectRatio","xMidYMid","stroke","#000","strokeWidth","0","viewBox","0 0 1024 1024","xmlns","http://www.w3.org/2000/svg",1,"amplify-icon","federated-sign-in-icon"],["d","M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"],["aria-label","Facebook icon","viewBox","0 0 279 538",1,"amplify-icon","federated-sign-in-icon"],["d","M82.3409742,538 L82.3409742,292.936652 L0,292.936652 L0,196.990154 L82.2410458,196.990154 L82.2410458,126.4295 C82.2410458,44.575144 132.205229,0 205.252865,0 C240.227794,0 270.306232,2.59855099 279,3.79788222 L279,89.2502322 L228.536175,89.2502322 C188.964542,89.2502322 181.270057,108.139699 181.270057,135.824262 L181.270057,196.89021 L276.202006,196.89021 L263.810888,292.836708 L181.16913,292.836708 L181.16913,538 L82.3409742,538 Z","fill","#1877F2"],["aria-label","Google icon","viewBox","0 0 256 262","xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid",1,"amplify-icon","federated-sign-in-icon"],["d","M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027","fill","#4285F4"],["d","M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1","fill","#34A853"],["d","M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782","fill","#FBBC05"],["d","M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251","fill","#EB4335"]],template:function(n,r){n&1&&Tn(0,Dpe,6,5,"div",0),n&2&&Te("ngIf",r.shouldShowFederatedSignIn)},dependencies:[$r,kfe],encapsulation:2}),e})(),{getForgotPasswordText:Ffe,getSignInText:Ofe}=bo,Lfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.forgotPasswordText=Ffe(),this.signInButtonText=Ofe()}get context(){return this.authenticator.slotContext}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-sign-in"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-signin",r.dataAttr)},decls:14,vars:7,consts:[["name","sign-in-header",3,"context"],["data-amplify-form","",3,"submit","input"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",2,"flex-direction","column",3,"disabled"],[1,"amplify-visually-hidden"],["route","signIn"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],[4,"ngIf"],["name","sign-in-footer",3,"context"],["data-amplify-footer",""],["amplify-button","","fontWeight","normal","size","small","variation","link","fullWidth","true",3,"click"]],template:function(n,r){n&1&&(Qe(0,"amplify-slot",0),we(1,"form",1),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),Qe(2,"amplify-federated-sign-in"),we(3,"fieldset",2)(4,"legend",3),Ye(5,"Sign in"),Se(),Qe(6,"amplify-base-form-fields",4),we(7,"button",5),Ye(8),Se(),Tn(9,Ape,2,1,"amplify-error",6),Se()(),we(10,"amplify-slot",7)(11,"div",8)(12,"button",9),wn("click",function(){return r.authenticator.toForgotPassword()}),Ye(13),Se()()()),n&2&&(Te("context",r.context),xe(3),Te("disabled",r.authenticator.isPending),xe(4),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.signInButtonText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context),xe(3),jt(" ",r.forgotPasswordText," "))},dependencies:[$r,Gs,zl,Yo,Ga,g8],encapsulation:2}),e})(),zfe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-sign-up-form-fields"]],decls:2,vars:0,consts:[["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column"],["route","signUp"]],template:function(n,r){n&1&&(we(0,"div",0),Qe(1,"amplify-base-form-fields",1),Se())},dependencies:[zl],encapsulation:2}),e})(),{getCreateAccountText:Ufe}=bo,Bfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.createAccountText=Ufe()}get context(){return this.authenticator.slotContext}onInput(n){let{checked:r,name:a,type:s,value:h}=n.target,_=s==="checkbox"&&!r;this.authenticator.updateForm({name:a,value:_?void 0:h})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-sign-up"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-signup",r.dataAttr)},decls:12,vars:7,consts:[["name","sign-up-header",3,"context"],["data-amplify-form","",3,"submit","input"],[1,"amplify-flex","amplify-authenticator__column"],["name","sign-up-form-fields",3,"context"],[4,"ngIf"],["name","sign-up-button",3,"context"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["name","sign-up-footer",3,"context"]],template:function(n,r){n&1&&(Qe(0,"amplify-slot",0),we(1,"form",1),wn("submit",function(s){return r.onSubmit(s)})("input",function(s){return r.onInput(s)}),Qe(2,"amplify-federated-sign-in"),we(3,"div",2)(4,"div",2)(5,"amplify-slot",3),Qe(6,"amplify-sign-up-form-fields"),Se(),Tn(7,Mpe,2,1,"amplify-error",4),Se(),we(8,"amplify-slot",5)(9,"button",6),Ye(10),Se()()()(),Qe(11,"amplify-slot",7)),n&2&&(Te("context",r.context),xe(5),Te("context",r.context),xe(2),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context),xe(),Te("isDisabled",r.authenticator.isPending||r.authenticator.hasValidationErrors),xe(),jt(" ",r.createAccountText," "),xe(),Te("context",r.context))},dependencies:[$r,Gs,Yo,Ga,g8,zfe],encapsulation:2}),e})(),y8=(()=>{class e{constructor(){this.active=!1,this.display="block"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-tab-item"]],hostVars:2,hostBindings:function(n,r){n&2&&wl("display",r.display)},inputs:{title:"title",active:"active",id:"id",labelledById:"labelledById",tabIndex:"tabIndex"},ngContentSelectors:Xd,decls:2,vars:6,consts:[["role","tabpanel",1,"amplify-tabs__panel",3,"id"],[4,"ngIf"]],template:function(n,r){n&1&&(zs(),we(0,"div",0),Tn(1,Ppe,1,0,"ng-content",1),Se()),n&2&&(hs(r.active?"amplify-tabs__panel--active":""),Te("id",r.id),lr("aria-labelledby",r.labelledById)("tabindex",r.tabIndex),xe(),Te("ngIf",r.active))},dependencies:[$r],encapsulation:2}),e})(),Vfe=(()=>{class e{constructor(){this.tabChange=new ti}ngAfterContentInit(){this.tabs.forEach((r,a)=>{r.id=`tab-${Ol(12)}-panel-${a}`,r.labelledById=`tab-${Ol(12)}-tab-${a}`}),this.tabs.filter(r=>r.active).length!==1&&this.selectTab(this.tabs.first)}selectTab(n){this.tabs.forEach(r=>{r.active=!1}),n.active=!0}handleTabClick(n){n.active||(this.tabChange.emit(),this.selectTab(n))}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Zt({type:e,selectors:[["amplify-tabs"]],contentQueries:function(n,r,a){if(n&1&&rx(a,y8,4),n&2){let s;ix(s=ox())&&(r.tabs=s)}},outputs:{tabChange:"tabChange"},ngContentSelectors:Xd,decls:4,vars:1,consts:[[1,"amplify-tabs"],["role","tablist",1,"amplify-tabs__list","amplify-tabs__list--top","amplify-tabs__list--equal"],["class","amplify-tabs__item","role","tab",3,"id","tabindex","class","click",4,"ngFor","ngForOf"],["role","tab",1,"amplify-tabs__item",3,"click","id","tabindex"]],template:function(n,r){n&1&&(zs(),we(0,"div",0)(1,"div",1),Tn(2,Rpe,2,7,"button",2),Se()(),Us(3)),n&2&&(xe(2),Te("ngForOf",r.tabs))},dependencies:[Dp],encapsulation:2}),e})(),jfe=()=>Yc,{getSkipText:$fe,getVerifyText:qfe,getAccountRecoveryInfoText:Hfe}=bo,Gfe=(()=>{class e{constructor(n){this.authenticator=n,this.dataAttr="",this.headerText=Hfe(),this.unverifiedUserAttributes={},this.labelId=Ol(12),this.skipText=$fe(),this.verifyText=qfe()}get context(){return this.authenticator.slotContext}ngOnInit(){let n=Vc(this.authenticator.authState);this.unverifiedUserAttributes=n.context.unverifiedUserAttributes}getLabel(n,r){let a=jfe(),{label:s}=a[n],h=St(s),_=TT(s,r);return`${h}: ${_}`}onInput(n){n.preventDefault();let{name:r,value:a}=n.target;this.authenticator.updateForm({name:r,value:a})}onSubmit(n){n.preventDefault(),this.authenticator.submitForm(ys(n))}}return e.\u0275fac=function(n){return new(n||e)(sn(Si))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-verify-user"]],hostVars:1,hostBindings:function(n,r){n&2&&lr("data-amplify-authenticator-verifyuser",r.dataAttr)},inputs:{headerText:"headerText"},decls:13,vars:11,consts:[["data-amplify-form","",3,"input","submit"],["data-amplify-fieldset","",1,"amplify-flex","amplify-authenticator__column",3,"disabled"],["name","verify-user-header",3,"context"],[1,"amplify-heading","amplify-heading--3"],[4,"ngFor","ngForOf"],["amplify-button","","variation","primary","fullWidth","true","type","submit",3,"isDisabled"],["amplify-button","","size","small","variation","link","fontWeight","normal","fullWidth","true",3,"click"],[4,"ngIf"],["name","verify-user-footer",3,"context"],["name","unverifiedAttr","type","radio",3,"value","id","checked"],[3,"for"]],template:function(n,r){n&1&&(we(0,"form",0),wn("input",function(s){return r.onInput(s)})("submit",function(s){return r.onSubmit(s)}),we(1,"fieldset",1)(2,"amplify-slot",2)(3,"h3",3),Ye(4),Se()(),Tn(5,kpe,4,5,"div",4),CN(6,"keyvalue"),we(7,"button",5),Ye(8),Se(),we(9,"button",6),wn("click",function(){return r.authenticator.skipVerification()}),Ye(10),Se(),Tn(11,Npe,2,1,"amplify-error",7),Se(),Qe(12,"amplify-slot",8),Se()),n&2&&(xe(),Te("disabled",r.authenticator.isPending),xe(),Te("context",r.context),xe(2),hi(r.headerText),xe(),Te("ngForOf",IN(6,9,r.unverifiedUserAttributes)),xe(2),Te("isDisabled",r.authenticator.isPending),xe(),jt(" ",r.verifyText," "),xe(2),jt(" ",r.skipText," "),xe(),Te("ngIf",r.authenticator.error),xe(),Te("context",r.context))},dependencies:[Dp,$r,Gs,Yo,Ga,KN],encapsulation:2}),e})(),{getSignInTabText:p8,getSignUpTabText:f8}=bo,v8=(()=>{class e{constructor(n,r,a){this.authenticator=n,this.contextService=r,this.changeDetector=a,this.customComponentQuery=null,this.signInTitle=p8(),this.signUpTitle=f8(),this.hasInitialized=!1,this.isHandlingHubEvent=!1}get context(){return this.authenticator.slotContext}get route(){return this.authenticator.route}ngOnInit(){let{initialState:n,loginMechanisms:r,services:a,signUpAttributes:s,socialProviders:h,formFields:_}=this;this.clearUserAgent=tA({componentName:"Authenticator",packageName:"angular",version:Kpe});let{initializeMachine:w}=this.authenticator;this.authenticator.hubSubject.subscribe(()=>{this.changeDetector.detectChanges(),this.isHandlingHubEvent=!0}),this.unsubscribeMachine=this.authenticator.subscribe(()=>{let{route:C}=this.authenticator;this.isHandlingHubEvent&&(this.changeDetector.detectChanges(),C===(n??"signIn")&&(this.isHandlingHubEvent=!1)),!this.hasInitialized&&C==="setup"&&(w({initialState:n,loginMechanisms:r,services:a,signUpAttributes:s,socialProviders:h,formFields:_}),this.hasInitialized=!0)}).unsubscribe,this.signInTitle=p8(),this.signUpTitle=f8()}ngAfterContentInit(){this.contextService.customComponents=this.mapCustomComponents(this.customComponentQuery)}ngOnDestroy(){this.clearUserAgent(),this.unsubscribeMachine&&this.unsubscribeMachine()}onTabChange(){let{route:n}=this.authenticator;n==="signIn"?this.authenticator.toSignUp():this.authenticator.toSignIn()}hasTabs(){let{route:n}=this.authenticator;return n==="signIn"||n==="signUp"}hasRouteComponent(){let{route:n}=this.authenticator;switch(n){case"authenticated":case"idle":case"setup":case"signOut":case"transition":return!1;default:return!0}}mapCustomComponents(n){if(!n)return{};let r={};return n.forEach(a=>{r[a.name]=a.template}),r}}return e.\u0275fac=function(n){return new(n||e)(sn(Si),sn(IA),sn(fd))},e.\u0275cmp=Zt({type:e,selectors:[["amplify-authenticator"]],contentQueries:function(n,r,a){if(n&1&&rx(a,EA,4),n&2){let s;ix(s=ox())&&(r.customComponentQuery=s)}},inputs:{formFields:"formFields",initialState:"initialState",loginMechanisms:"loginMechanisms",services:"services",signUpAttributes:"signUpAttributes",socialProviders:"socialProviders",variation:"variation",hideSignUp:"hideSignUp"},features:[lx([IA])],ngContentSelectors:Xd,decls:2,vars:2,consts:[["data-amplify-authenticator","",4,"ngIf"],["name","authenticated",3,"context",4,"ngIf"],["data-amplify-authenticator",""],["data-amplify-container",""],["name","header",3,"context"],["data-amplify-router",""],[3,"tabChange",4,"ngIf"],["name","sign-in",3,"context",4,"ngIf"],["name","confirm-sign-up",3,"context",4,"ngIf"],["name","confirm-sign-in",3,"context",4,"ngIf"],["name","setup-totp",3,"context",4,"ngIf"],["name","force-new-password",3,"context",4,"ngIf"],["name","forgot-password",3,"context",4,"ngIf"],["name","confirm-reset-password",3,"context",4,"ngIf"],["name","verify-user",3,"context",4,"ngIf"],["name","confirm-verify-user",3,"context",4,"ngIf"],["name","footer",3,"context"],[3,"tabChange"],["data-amplify-router-content","",3,"title","active"],["name","sign-up",3,"context",4,"ngIf"],["name","sign-in",3,"context"],["name","sign-up",3,"context"],["name","confirm-sign-up",3,"context"],["name","confirm-sign-in",3,"context"],["name","setup-totp",3,"context"],["name","force-new-password",3,"context"],["name","forgot-password",3,"context"],["name","confirm-reset-password",3,"context"],["name","verify-user",3,"context"],["name","confirm-verify-user",3,"context"],["name","authenticated",3,"context"]],template:function(n,r){n&1&&(zs(),Tn(0,Wpe,15,14,"div",0)(1,Zpe,2,1,"amplify-slot",1)),n&2&&(Te("ngIf",r.hasRouteComponent()),xe(),Te("ngIf",r.route==="authenticated"))},dependencies:[$r,Gs,sfe,ufe,mfe,_fe,bfe,Efe,Rfe,Lfe,Bfe,y8,Vfe,Gfe],encapsulation:2}),e})();var _8=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Li({type:e}),e.\u0275inj=Oi({imports:[vx]}),e})();var Gb=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Zt({type:e,selectors:[["home-component"]],decls:1,vars:0,template:function(n,r){n&1&&Qe(0,"app-gas-map")},dependencies:[Vp]})};function Zfe(e,t){if(e&1){let n=hd();we(0,"div",3)(1,"button",4),Ye(2),Se(),we(3,"ul",5)(4,"li")(5,"a",6),Ye(6,"My Profile"),Se()(),we(7,"li")(8,"a",6),Ye(9,"About Us"),Se()(),we(10,"li")(11,"a",7),wn("click",function(){od(n);let a=zt();return sd(a.authenticator.signOut())}),Ye(12,"Sing Out"),Se()()()()}if(e&2){let n=zt();xe(2),jt(" ",n.authenticator.user.username," ")}}var Wb=class e{constructor(t){this.authenticator=t}static \u0275fac=function(n){return new(n||e)(sn(Si))};static \u0275cmp=Zt({type:e,selectors:[["navbar"]],decls:5,vars:1,consts:[[1,"navbar"],[1,"container-fluid"],["class","dropdown",4,"ngIf"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-info","dropdown-toggle"],[1,"dropdown-menu"],["href","#",1,"dropdown-item"],[1,"dropdown-item",3,"click"]],template:function(n,r){n&1&&(we(0,"nav",0)(1,"div",1)(2,"h1"),Ye(3,"GRASP"),Se(),Tn(4,Zfe,13,1,"div",2),Se()()),n&2&&(xe(4),Te("ngIf",r.authenticator.route==="authenticated"))},dependencies:[$r],styles:[".navbar[_ngcontent-%COMP%]{background-color:#001f3f;color:#fff}"]})};var Yfe=()=>["username"];function Xfe(e,t){e&1&&Qe(0,"home-component")}var Zb=class e{title="GRASP-FrontEnd";formFields={signUp:{username:{order:1},email:{order:2},password:{order:5},confirm_password:{order:6}}};static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Zt({type:e,selectors:[["app-root"]],decls:4,vars:3,consts:[[3,"loginMechanisms","formFields"],["amplifySlot","authenticated"]],template:function(n,r){n&1&&(Qe(0,"navbar")(1,"router-outlet"),we(2,"amplify-authenticator",0),Tn(3,Xfe,1,0,"ng-template",1),Se()),n&2&&(xe(2),Te("loginMechanisms",gg(2,Yfe))("formFields",r.formFields))},dependencies:[GE,EA,v8,Gb,Wb]})};var TA={production:!0,apiUrl:"https://your-production-api-url.com/api",cognitoConfig:{userPoolId:"us-west-2_UR2oBa8bZ",clientId:"1hh20kasovioaq9mrsqo5fibui"}};Iy.configure({Auth:{Cognito:{userPoolId:TA.cognitoConfig.userPoolId,userPoolClientId:TA.cognitoConfig.clientId}}});var Kb=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=Li({type:e,bootstrap:[Zb]});static \u0275inj=Oi({providers:[aF()],imports:[gF,Jx,gO,_8]})};mF().bootstrapModule(Kb,{ngZoneEventCoalescing:!0}).catch(e=>console.error(e));
